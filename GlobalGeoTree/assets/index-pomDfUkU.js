(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();const SY=!1;var yC=Array.isArray,Vde=Array.prototype.indexOf,jL=Array.from,UL=Object.defineProperty,Ny=Object.getOwnPropertyDescriptor,kY=Object.getOwnPropertyDescriptors,qde=Object.prototype,Zde=Array.prototype,VL=Object.getPrototypeOf,NQ=Object.isExtensible;function Dx(t){return typeof t=="function"}const Ys=()=>{};function Xde(t){return t()}function nT(t){for(var e=0;e<t.length;e++)t[e]()}function CY(){var t,e,n=new Promise((r,i)=>{t=r,e=i});return{promise:n,resolve:t,reject:e}}function W8(t,e,n=!1){return t===void 0?n?e():e:t}function zQ(t,e){if(Array.isArray(t))return t;if(!(Symbol.iterator in t))return Array.from(t);const n=[];for(const r of t)if(n.push(r),n.length===e)break;return n}const iu=2,DP=4,IP=8,xm=16,d0=32,n_=64,MP=128,vl=1024,kc=2048,wm=4096,mh=8192,Zg=16384,RP=32768,s0=65536,QQ=1<<17,AY=1<<18,z2=1<<19,EY=1<<20,ff=256,rT=512,iT=32768,P7=1<<21,qL=1<<22,zy=1<<23,Hp=Symbol("$state"),ZL=Symbol("legacy props"),Wde=Symbol(""),Zx=new class extends Error{name="StaleReactionError";message="The reaction that called `getAbortSignal()` was re-run or destroyed"},FP=3,r_=8;function LP(t){throw new Error("https://svelte.dev/e/lifecycle_outside_component")}function Gde(){throw new Error("https://svelte.dev/e/async_derived_orphan")}function Yde(t){throw new Error("https://svelte.dev/e/effect_in_teardown")}function Hde(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function Kde(t){throw new Error("https://svelte.dev/e/effect_orphan")}function Jde(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function epe(){throw new Error("https://svelte.dev/e/hydration_failed")}function tpe(t){throw new Error("https://svelte.dev/e/lifecycle_legacy_only")}function npe(t){throw new Error("https://svelte.dev/e/props_invalid_value")}function rpe(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function ipe(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function spe(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}function ope(){throw new Error("https://svelte.dev/e/svelte_boundary_reset_onerror")}const $P=1,BP=2,TY=4,ape=8,lpe=16,upe=1,cpe=2,hpe=4,fpe=8,dpe=16,ppe=1,mpe=2,gpe=4,PY=1,ype=2,DY="[",NP="[!",XL="]",Tb={},pl=Symbol(),vpe="http://www.w3.org/1999/xhtml",bpe="@attach";function vC(t){console.warn("https://svelte.dev/e/hydration_mismatch")}function _pe(){console.warn("https://svelte.dev/e/select_multiple_invalid_value")}function xpe(){console.warn("https://svelte.dev/e/svelte_boundary_reset_noop")}let Gr=!1;function wd(t){Gr=t}let Si;function Kl(t){if(t===null)throw vC(),Tb;return Si=t}function e1(){return Kl(Rd(Si))}function Be(t){if(Gr){if(Rd(Si)!==null)throw vC(),Tb;Si=t}}function Xg(t=1){if(Gr){for(var e=t,n=Si;e--;)n=Rd(n);Si=n}}function sT(t=!0){for(var e=0,n=Si;;){if(n.nodeType===r_){var r=n.data;if(r===XL){if(e===0)return n;e-=1}else(r===DY||r===NP)&&(e+=1)}var i=Rd(n);t&&n.remove(),n=i}}function IY(t){if(!t||t.nodeType!==r_)throw vC(),Tb;return t.data}function MY(t){return t===this.v}function WL(t,e){return t!=t?e==e:t!==e||t!==null&&typeof t=="object"||typeof t=="function"}function RY(t){return!WL(t,this.v)}let Q2=!1,wpe=!1;function Ope(){Q2=!0}let zs=null;function Vw(t){zs=t}function Ln(t,e=!1,n){zs={p:zs,i:!1,c:null,e:null,s:t,x:null,l:Q2&&!e?{s:null,u:null,$:[]}:null}}function $n(t){var e=zs,n=e.e;if(n!==null){e.e=null;for(var r of n)eH(r)}return t!==void 0&&(e.x=t),e.i=!0,zs=e.p,t??{}}function j2(){return!Q2||zs!==null&&zs.l===null}let Zv=[];function FY(){var t=Zv;Zv=[],nT(t)}function p0(t){if(Zv.length===0&&!P3){var e=Zv;queueMicrotask(()=>{e===Zv&&FY()})}Zv.push(t)}function Spe(){for(;Zv.length>0;)FY()}function LY(t){var e=ii;if(e===null)return xi.f|=zy,t;if((e.f&RP)===0){if((e.f&MP)===0)throw t;e.b.error(t)}else qw(t,e)}function qw(t,e){for(;e!==null;){if((e.f&MP)!==0)try{e.b.error(t);return}catch(n){t=n}e=e.parent}throw t}const IE=new Set;let mo=null,J4=null,pd=null,Ip=[],zP=null,D7=!1,P3=!1,Xv=class I7{committed=!1;current=new Map;previous=new Map;#e=new Set;#t=new Set;#n=0;#r=0;#l=null;#a=[];#i=[];skipped_effects=new Set;is_fork=!1;process(e){Ip=[],J4=null,this.apply();var n={parent:null,effect:null,effects:[],render_effects:[],block_effects:[]};for(const r of e)this.#s(r,n);this.is_fork||this.#u(),this.#r>0||this.is_fork?(this.#o(n.effects),this.#o(n.render_effects),this.#o(n.block_effects)):(J4=this,mo=null,jQ(n.render_effects),jQ(n.effects),J4=null,this.#l?.resolve()),pd=null}#s(e,n){e.f^=vl;for(var r=e.first;r!==null;){var i=r.f,s=(i&(d0|n_))!==0,o=s&&(i&vl)!==0,a=o||(i&mh)!==0||this.skipped_effects.has(r);if((r.f&MP)!==0&&r.b?.is_pending()&&(n={parent:n,effect:r,effects:[],render_effects:[],block_effects:[]}),!a&&r.fn!==null){s?r.f^=vl:(i&DP)!==0?n.effects.push(r):Z2(r)&&((r.f&xm)!==0&&n.block_effects.push(r),Xw(r));var l=r.first;if(l!==null){r=l;continue}}var h=r.parent;for(r=r.next;r===null&&h!==null;)h===n.effect&&(this.#o(n.effects),this.#o(n.render_effects),this.#o(n.block_effects),n=n.parent),r=h.next,h=h.parent}}#o(e){for(const n of e)((n.f&kc)!==0?this.#a:this.#i).push(n),_l(n,vl)}capture(e,n){this.previous.has(e)||this.previous.set(e,n),(e.f&zy)===0&&(this.current.set(e,e.v),pd?.set(e,e.v))}activate(){mo=this,this.apply()}deactivate(){mo=null,pd=null}flush(){if(this.activate(),Ip.length>0){if(BY(),mo!==null&&mo!==this)return}else this.#n===0&&this.process([]);this.deactivate()}discard(){for(const e of this.#t)e(this);this.#t.clear()}#u(){if(this.#r===0){for(const e of this.#e)e();this.#e.clear()}this.#n===0&&this.#c()}#c(){if(IE.size>1){this.previous.clear();var e=pd,n=!0,r={parent:null,effect:null,effects:[],render_effects:[],block_effects:[]};for(const i of IE){if(i===this){n=!1;continue}const s=[];for(const[a,l]of this.current){if(i.current.has(a))if(n&&l!==i.current.get(a))i.current.set(a,l);else continue;s.push(a)}if(s.length===0)continue;const o=[...i.current.keys()].filter(a=>!this.current.has(a));if(o.length>0){const a=new Set,l=new Map;for(const h of s)NY(h,o,a,l);if(Ip.length>0){mo=i,i.apply();for(const h of Ip)i.#s(h,r);Ip=[],i.deactivate()}}}mo=null,pd=e}this.committed=!0,IE.delete(this)}increment(e){this.#n+=1,e&&(this.#r+=1)}decrement(e){this.#n-=1,e&&(this.#r-=1),this.revive()}revive(){for(const e of this.#a)_l(e,kc),Pb(e);for(const e of this.#i)_l(e,wm),Pb(e);this.#a=[],this.#i=[],this.flush()}oncommit(e){this.#e.add(e)}ondiscard(e){this.#t.add(e)}settled(){return(this.#l??=CY()).promise}static ensure(){if(mo===null){const e=mo=new I7;IE.add(mo),P3||I7.enqueue(()=>{mo===e&&e.flush()})}return mo}static enqueue(e){p0(e)}apply(){}};function $Y(t){var e=P3;P3=!0;try{for(var n;;){if(Spe(),Ip.length===0&&(mo?.flush(),Ip.length===0))return zP=null,n;BY()}}finally{P3=e}}function BY(){var t=lw;D7=!0;try{var e=0;for(qQ(!0);Ip.length>0;){var n=Xv.ensure();if(e++>1e3){var r,i;kpe()}n.process(Ip),Qy.clear()}}finally{D7=!1,qQ(t),zP=null}}function kpe(){try{Jde()}catch(t){qw(t,zP)}}let wg=null;function jQ(t){var e=t.length;if(e!==0){for(var n=0;n<e;){var r=t[n++];if((r.f&(Zg|mh))===0&&Z2(r)&&(wg=new Set,Xw(r),r.deps===null&&r.first===null&&r.nodes_start===null&&(r.teardown===null&&r.ac===null?iH(r):r.fn=null),wg?.size>0)){Qy.clear();for(const i of wg){if((i.f&(Zg|mh))!==0)continue;const s=[i];let o=i.parent;for(;o!==null;)wg.has(o)&&(wg.delete(o),s.push(o)),o=o.parent;for(let a=s.length-1;a>=0;a--){const l=s[a];(l.f&(Zg|mh))===0&&Xw(l)}}wg.clear()}}wg=null}}function NY(t,e,n,r){if(!n.has(t)&&(n.add(t),t.reactions!==null))for(const i of t.reactions){const s=i.f;(s&iu)!==0?NY(i,e,n,r):(s&(qL|xm))!==0&&(s&kc)===0&&zY(i,e,r)&&(_l(i,kc),Pb(i))}}function zY(t,e,n){const r=n.get(t);if(r!==void 0)return r;if(t.deps!==null)for(const i of t.deps){if(e.includes(i))return!0;if((i.f&iu)!==0&&zY(i,e,n))return n.set(i,!0),!0}return n.set(t,!1),!1}function Pb(t){for(var e=zP=t;e.parent!==null;){e=e.parent;var n=e.f;if(D7&&e===ii&&(n&xm)!==0&&(n&AY)===0)return;if((n&(n_|d0))!==0){if((n&vl)===0)return;e.f^=vl}}Ip.push(e)}function Cpe(t){let e=0,n=Db(0),r;return()=>{$pe()&&(F(n),q2(()=>(e===0&&(r=xl(()=>t(()=>D3(n)))),e+=1,()=>{p0(()=>{e-=1,e===0&&(r?.(),r=void 0,D3(n))})})))}}var Ape=s0|z2|MP;function QY(t,e,n){new Epe(t,e,n)}class Epe{parent;#e=!1;#t;#n=Gr?Si:null;#r;#l;#a;#i=null;#s=null;#o=null;#u=null;#c=null;#d=0;#h=0;#p=!1;#f=null;#y=Cpe(()=>(this.#f=Db(this.#d),()=>{this.#f=null}));constructor(e,n,r){this.#t=e,this.#r=n,this.#l=r,this.parent=ii.b,this.#e=!!this.#r.pending,this.#a=w1(()=>{if(ii.b=this,Gr){const s=this.#n;e1(),s.nodeType===r_&&s.data===NP?this.#b():this.#v()}else{var i=this.#_();try{this.#i=sc(()=>r(i))}catch(s){this.error(s)}this.#h>0?this.#g():this.#e=!1}return()=>{this.#c?.remove()}},Ape),Gr&&(this.#t=Si)}#v(){try{this.#i=sc(()=>this.#l(this.#t))}catch(e){this.error(e)}this.#e=!1}#b(){const e=this.#r.pending;e&&(this.#s=sc(()=>e(this.#t)),Xv.enqueue(()=>{var n=this.#_();this.#i=this.#m(()=>(Xv.ensure(),sc(()=>this.#l(n)))),this.#h>0?this.#g():(aw(this.#s,()=>{this.#s=null}),this.#e=!1)}))}#_(){var e=this.#t;return this.#e&&(this.#c=_h(),this.#t.before(this.#c),e=this.#c),e}is_pending(){return this.#e||!!this.parent&&this.parent.is_pending()}has_pending_snippet(){return!!this.#r.pending}#m(e){var n=ii,r=xi,i=zs;lm(this.#a),mc(this.#a),Vw(this.#a.ctx);try{return e()}catch(s){return LY(s),null}finally{lm(n),mc(r),Vw(i)}}#g(){const e=this.#r.pending;this.#i!==null&&(this.#u=document.createDocumentFragment(),this.#u.append(this.#c),aH(this.#i,this.#u)),this.#s===null&&(this.#s=sc(()=>e(this.#t)))}#x(e){if(!this.has_pending_snippet()){this.parent&&this.parent.#x(e);return}this.#h+=e,this.#h===0&&(this.#e=!1,this.#s&&aw(this.#s,()=>{this.#s=null}),this.#u&&(this.#t.before(this.#u),this.#u=null))}update_pending_count(e){this.#x(e),this.#d+=e,this.#f&&Zw(this.#f,this.#d)}get_effect_pending(){return this.#y(),F(this.#f)}error(e){var n=this.#r.onerror;let r=this.#r.failed;if(this.#p||!n&&!r)throw e;this.#i&&(ol(this.#i),this.#i=null),this.#s&&(ol(this.#s),this.#s=null),this.#o&&(ol(this.#o),this.#o=null),Gr&&(Kl(this.#n),Xg(),Kl(sT()));var i=!1,s=!1;const o=()=>{if(i){xpe();return}i=!0,s&&ope(),Xv.ensure(),this.#d=0,this.#o!==null&&aw(this.#o,()=>{this.#o=null}),this.#e=this.has_pending_snippet(),this.#i=this.#m(()=>(this.#p=!1,sc(()=>this.#l(this.#t)))),this.#h>0?this.#g():this.#e=!1};var a=xi;try{mc(null),s=!0,n?.(e,o),s=!1}catch(l){qw(l,this.#a&&this.#a.parent)}finally{mc(a)}r&&p0(()=>{this.#o=this.#m(()=>{Xv.ensure(),this.#p=!0;try{return sc(()=>{r(this.#t,()=>e,()=>o)})}catch(l){return qw(l,this.#a.parent),null}finally{this.#p=!1}})})}}function jY(t,e,n,r){const i=j2()?bC:GL;if(n.length===0&&t.length===0){r(e.map(i));return}var s=mo,o=ii,a=Tpe();function l(){Promise.all(n.map(h=>Ppe(h))).then(h=>{a();try{r([...e.map(i),...h])}catch(f){(o.f&Zg)===0&&qw(f,o)}s?.deactivate(),oT()}).catch(h=>{qw(h,o)})}t.length>0?Promise.all(t).then(()=>{a();try{return l()}finally{s?.deactivate(),oT()}}):l()}function Tpe(){var t=ii,e=xi,n=zs,r=mo;return function(s=!0){lm(t),mc(e),Vw(n),s&&r?.activate()}}function oT(){lm(null),mc(null),Vw(null)}function bC(t){var e=iu|kc,n=xi!==null&&(xi.f&iu)!==0?xi:null;return ii===null||n!==null&&(n.f&ff)!==0?e|=ff:ii.f|=z2,{ctx:zs,deps:null,effects:null,equals:MY,f:e,fn:t,reactions:null,rv:0,v:pl,wv:0,parent:n??ii,ac:null}}function Ppe(t,e){let n=ii;n===null&&Gde();var r=n.b,i=void 0,s=Db(pl),o=!xi,a=new Map;return Qpe(()=>{var l=CY();i=l.promise;try{Promise.resolve(t()).then(l.resolve,l.reject).then(()=>{h===mo&&h.committed&&h.deactivate(),oT()})}catch(g){l.reject(g),oT()}var h=mo;if(o){var f=!r.is_pending();r.update_pending_count(1),h.increment(f),a.get(h)?.reject(Zx),a.delete(h),a.set(h,l)}const p=(g,b=void 0)=>{if(h.activate(),b)b!==Zx&&(s.f|=zy,Zw(s,b));else{(s.f&zy)!==0&&(s.f^=zy),Zw(s,g);for(const[x,k]of a){if(a.delete(x),x===h)break;k.reject(Zx)}}o&&(r.update_pending_count(-1),h.decrement(f))};l.promise.then(p,g=>p(null,g||"unknown"))}),QP(()=>{for(const l of a.values())l.reject(Zx)}),new Promise(l=>{function h(f){function p(){f===i?l(s):h(i)}f.then(p,p)}h(i)})}function Fe(t){const e=bC(t);return lH(e),e}function GL(t){const e=bC(t);return e.equals=RY,e}function UY(t){var e=t.effects;if(e!==null){t.effects=null;for(var n=0;n<e.length;n+=1)ol(e[n])}}function Dpe(t){for(var e=t.parent;e!==null;){if((e.f&iu)===0)return e;e=e.parent}return null}function YL(t){var e,n=ii;lm(Dpe(t));try{t.f&=~iT,UY(t),e=fH(t)}finally{lm(n)}return e}function VY(t){var e=YL(t);if(t.equals(e)||(t.v=e,t.wv=cH()),!i_)if(pd!==null)pd.set(t,t.v);else{var n=(Ay||(t.f&ff)!==0)&&t.deps!==null?wm:vl;_l(t,n)}}let M7=new Set;const Qy=new Map;let qY=!1;function Db(t,e){var n={f:0,v:t,reactions:null,equals:MY,rv:0,wv:0};return n}function hn(t,e){const n=Db(t);return lH(n),n}function mb(t,e=!1,n=!0){const r=Db(t);return e||(r.equals=RY),Q2&&n&&zs!==null&&zs.l!==null&&(zs.l.s??=[]).push(r),r}function ct(t,e,n=!1){xi!==null&&(!md||(xi.f&QQ)!==0)&&j2()&&(xi.f&(iu|xm|qL|QQ))!==0&&!Wg?.includes(t)&&spe();let r=n?Ng(e):e;return Zw(t,r)}function Zw(t,e){if(!t.equals(e)){var n=t.v;i_?Qy.set(t,e):Qy.set(t,n),t.v=e;var r=Xv.ensure();r.capture(t,n),(t.f&iu)!==0&&((t.f&kc)!==0&&YL(t),_l(t,(t.f&ff)===0?vl:wm)),t.wv=cH(),ZY(t,kc),j2()&&ii!==null&&(ii.f&vl)!==0&&(ii.f&(d0|n_))===0&&(Yh===null?Upe([t]):Yh.push(t)),!r.is_fork&&M7.size>0&&!qY&&Ipe()}return e}function Ipe(){qY=!1;const t=Array.from(M7);for(const e of t)(e.f&vl)!==0&&_l(e,wm),Z2(e)&&Xw(e);M7.clear()}function D3(t){ct(t,t.v+1)}function ZY(t,e){var n=t.reactions;if(n!==null)for(var r=j2(),i=n.length,s=0;s<i;s++){var o=n[s],a=o.f;if(!(!r&&o===ii)){var l=(a&kc)===0;l&&_l(o,e),(a&iu)!==0?(a&iT)===0&&(o.f|=iT,ZY(o,wm)):l&&((a&xm)!==0&&wg!==null&&wg.add(o),Pb(o))}}}function Ng(t){if(typeof t!="object"||t===null||Hp in t)return t;const e=VL(t);if(e!==qde&&e!==Zde)return t;var n=new Map,r=yC(t),i=hn(0),s=gb,o=a=>{if(gb===s)return a();var l=xi,h=gb;mc(null),XQ(s);var f=a();return mc(l),XQ(h),f};return r&&n.set("length",hn(t.length)),new Proxy(t,{defineProperty(a,l,h){(!("value"in h)||h.configurable===!1||h.enumerable===!1||h.writable===!1)&&rpe();var f=n.get(l);return f===void 0?f=o(()=>{var p=hn(h.value);return n.set(l,p),p}):ct(f,h.value,!0),!0},deleteProperty(a,l){var h=n.get(l);if(h===void 0){if(l in a){const f=o(()=>hn(pl));n.set(l,f),D3(i)}}else ct(h,pl),D3(i);return!0},get(a,l,h){if(l===Hp)return t;var f=n.get(l),p=l in a;if(f===void 0&&(!p||Ny(a,l)?.writable)&&(f=o(()=>{var b=Ng(p?a[l]:pl),x=hn(b);return x}),n.set(l,f)),f!==void 0){var g=F(f);return g===pl?void 0:g}return Reflect.get(a,l,h)},getOwnPropertyDescriptor(a,l){var h=Reflect.getOwnPropertyDescriptor(a,l);if(h&&"value"in h){var f=n.get(l);f&&(h.value=F(f))}else if(h===void 0){var p=n.get(l),g=p?.v;if(p!==void 0&&g!==pl)return{enumerable:!0,configurable:!0,value:g,writable:!0}}return h},has(a,l){if(l===Hp)return!0;var h=n.get(l),f=h!==void 0&&h.v!==pl||Reflect.has(a,l);if(h!==void 0||ii!==null&&(!f||Ny(a,l)?.writable)){h===void 0&&(h=o(()=>{var g=f?Ng(a[l]):pl,b=hn(g);return b}),n.set(l,h));var p=F(h);if(p===pl)return!1}return f},set(a,l,h,f){var p=n.get(l),g=l in a;if(r&&l==="length")for(var b=h;b<p.v;b+=1){var x=n.get(b+"");x!==void 0?ct(x,pl):b in a&&(x=o(()=>hn(pl)),n.set(b+"",x))}if(p===void 0)(!g||Ny(a,l)?.writable)&&(p=o(()=>hn(void 0)),ct(p,Ng(h)),n.set(l,p));else{g=p.v!==pl;var k=o(()=>Ng(h));ct(p,k)}var T=Reflect.getOwnPropertyDescriptor(a,l);if(T?.set&&T.set.call(f,h),!g){if(r&&typeof l=="string"){var I=n.get("length"),M=Number(l);Number.isInteger(M)&&M>=I.v&&ct(I,M+1)}D3(i)}return!0},ownKeys(a){F(i);var l=Reflect.ownKeys(a).filter(p=>{var g=n.get(p);return g===void 0||g.v!==pl});for(var[h,f]of n)f.v!==pl&&!(h in a)&&l.push(h);return l},setPrototypeOf(){ipe()}})}function UQ(t){try{if(t!==null&&typeof t=="object"&&Hp in t)return t[Hp]}catch{}return t}function Mpe(t,e){return Object.is(UQ(t),UQ(e))}var R7,XY,WY,GY;function F7(){if(R7===void 0){R7=window,XY=/Firefox/.test(navigator.userAgent);var t=Element.prototype,e=Node.prototype,n=Text.prototype;WY=Ny(e,"firstChild").get,GY=Ny(e,"nextSibling").get,NQ(t)&&(t.__click=void 0,t.__className=void 0,t.__attributes=null,t.__style=void 0,t.__e=void 0),NQ(n)&&(n.__t=void 0)}}function _h(t=""){return document.createTextNode(t)}function Xl(t){return WY.call(t)}function Rd(t){return GY.call(t)}function je(t,e){if(!Gr)return Xl(t);var n=Xl(Si);if(n===null)n=Si.appendChild(_h());else if(e&&n.nodeType!==FP){var r=_h();return n?.before(r),Kl(r),r}return Kl(n),n}function pn(t,e=!1){if(!Gr){var n=Xl(t);return n instanceof Comment&&n.data===""?Rd(n):n}if(e&&Si?.nodeType!==FP){var r=_h();return Si?.before(r),Kl(r),r}return Si}function lt(t,e=1,n=!1){let r=Gr?Si:t;for(var i;e--;)i=r,r=Rd(r);if(!Gr)return r;if(n&&r?.nodeType!==FP){var s=_h();return r===null?i?.after(s):r.before(s),Kl(s),s}return Kl(r),r}function YY(t){t.textContent=""}function HY(){return!1}function Rpe(t,e){if(e){const n=document.body;t.autofocus=!0,p0(()=>{document.activeElement===n&&t.focus()})}}let VQ=!1;function KY(){VQ||(VQ=!0,document.addEventListener("reset",t=>{Promise.resolve().then(()=>{if(!t.defaultPrevented)for(const e of t.target.elements)e.__on_r?.()})},{capture:!0}))}function U2(t){var e=xi,n=ii;mc(null),lm(null);try{return t()}finally{mc(e),lm(n)}}function Fpe(t,e,n,r=n){t.addEventListener(e,()=>U2(n));const i=t.__on_r;i?t.__on_r=()=>{i(),r(!0)}:t.__on_r=()=>r(!0),KY()}function JY(t){ii===null&&xi===null&&Kde(),xi!==null&&(xi.f&ff)!==0&&ii===null&&Hde(),i_&&Yde()}function Lpe(t,e){var n=e.last;n===null?e.last=e.first=t:(n.next=t,t.prev=n,e.last=t)}function Om(t,e,n,r=!0){var i=ii;i!==null&&(i.f&mh)!==0&&(t|=mh);var s={ctx:zs,deps:null,nodes_start:null,nodes_end:null,f:t|kc,first:null,fn:e,last:null,next:null,parent:i,b:i&&i.b,prev:null,teardown:null,transitions:null,wv:0,ac:null};if(n)try{Xw(s),s.f|=RP}catch(l){throw ol(s),l}else e!==null&&Pb(s);if(r){var o=s;if(n&&o.deps===null&&o.teardown===null&&o.nodes_start===null&&o.first===o.last&&(o.f&z2)===0&&(o=o.first,(t&xm)!==0&&(t&s0)!==0&&o!==null&&(o.f|=s0)),o!==null&&(o.parent=i,i!==null&&Lpe(o,i),xi!==null&&(xi.f&iu)!==0&&(t&n_)===0)){var a=xi;(a.effects??=[]).push(o)}}return s}function $pe(){return xi!==null&&!md}function QP(t){const e=Om(IP,null,!1);return _l(e,vl),e.teardown=t,e}function xh(t){JY();var e=ii.f,n=!xi&&(e&d0)!==0&&(e&RP)===0;if(n){var r=zs;(r.e??=[]).push(t)}else return eH(t)}function eH(t){return Om(DP|EY,t,!1)}function Oo(t){return JY(),Om(IP|EY,t,!0)}function Bpe(t){Xv.ensure();const e=Om(n_|z2,t,!0);return(n={})=>new Promise(r=>{n.outro?aw(e,()=>{ol(e),r(void 0)}):(ol(e),r(void 0))})}function V2(t){return Om(DP,t,!1)}function Npe(t,e){var n=zs,r={effect:null,ran:!1,deps:t};n.l.$.push(r),r.effect=q2(()=>{t(),!r.ran&&(r.ran=!0,xl(e))})}function zpe(){var t=zs;q2(()=>{for(var e of t.l.$){e.deps();var n=e.effect;(n.f&vl)!==0&&_l(n,wm),Z2(n)&&Xw(n),e.ran=!1}})}function Qpe(t){return Om(qL|z2,t,!0)}function q2(t,e=0){return Om(IP|e,t,!0)}function on(t,e=[],n=[],r=[],i=!1){jY(r,e,n,s=>{Om(i?DP:IP,()=>t(...s.map(F)),!0)})}function w1(t,e=0){var n=Om(xm|e,t,!0);return n}function sc(t,e=!0){return Om(d0|z2,t,!0,e)}function tH(t){var e=t.teardown;if(e!==null){const n=i_,r=xi;ZQ(!0),mc(null);try{e.call(null)}finally{ZQ(n),mc(r)}}}function nH(t,e=!1){var n=t.first;for(t.first=t.last=null;n!==null;){const i=n.ac;i!==null&&U2(()=>{i.abort(Zx)});var r=n.next;(n.f&n_)!==0?n.parent=null:ol(n,e),n=r}}function jpe(t){for(var e=t.first;e!==null;){var n=e.next;(e.f&d0)===0&&ol(e),e=n}}function ol(t,e=!0){var n=!1;(e||(t.f&AY)!==0)&&t.nodes_start!==null&&t.nodes_end!==null&&(rH(t.nodes_start,t.nodes_end),n=!0),nH(t,e&&!n),aT(t,0),_l(t,Zg);var r=t.transitions;if(r!==null)for(const s of r)s.stop();tH(t);var i=t.parent;i!==null&&i.first!==null&&iH(t),t.next=t.prev=t.teardown=t.ctx=t.deps=t.fn=t.nodes_start=t.nodes_end=t.ac=null}function rH(t,e){for(;t!==null;){var n=t===e?null:Rd(t);t.remove(),t=n}}function iH(t){var e=t.parent,n=t.prev,r=t.next;n!==null&&(n.next=r),r!==null&&(r.prev=n),e!==null&&(e.first===t&&(e.first=r),e.last===t&&(e.last=n))}function aw(t,e,n=!0){var r=[];HL(t,r,!0),sH(r,()=>{n&&ol(t),e&&e()})}function sH(t,e){var n=t.length;if(n>0){var r=()=>--n||e();for(var i of t)i.out(r)}else e()}function HL(t,e,n){if((t.f&mh)===0){if(t.f^=mh,t.transitions!==null)for(const o of t.transitions)(o.is_global||n)&&e.push(o);for(var r=t.first;r!==null;){var i=r.next,s=(r.f&s0)!==0||(r.f&d0)!==0&&(t.f&xm)!==0;HL(r,e,s?n:!1),r=i}}}function KL(t){oH(t,!0)}function oH(t,e){if((t.f&mh)!==0){t.f^=mh,(t.f&vl)===0&&(_l(t,kc),Pb(t));for(var n=t.first;n!==null;){var r=n.next,i=(n.f&s0)!==0||(n.f&d0)!==0;oH(n,i?e:!1),n=r}if(t.transitions!==null)for(const s of t.transitions)(s.is_global||e)&&s.in()}}function aH(t,e){for(var n=t.nodes_start,r=t.nodes_end;n!==null;){var i=n===r?null:Rd(n);e.append(n),n=i}}let lw=!1;function qQ(t){lw=t}let i_=!1;function ZQ(t){i_=t}let xi=null,md=!1;function mc(t){xi=t}let ii=null;function lm(t){ii=t}let Wg=null;function lH(t){xi!==null&&(Wg===null?Wg=[t]:Wg.push(t))}let Ou=null,th=0,Yh=null;function Upe(t){Yh=t}let uH=1,rk=0,gb=rk;function XQ(t){gb=t}let Ay=!1;function cH(){return++uH}function Z2(t){var e=t.f;if((e&kc)!==0)return!0;if((e&wm)!==0){var n=t.deps,r=(e&ff)!==0;if(e&iu&&(t.f&=~iT),n!==null){var i,s,o=(e&rT)!==0,a=r&&ii!==null&&!Ay,l=n.length;if((o||a)&&(ii===null||(ii.f&Zg)===0)){var h=t,f=h.parent;for(i=0;i<l;i++)s=n[i],(o||!s?.reactions?.includes(h))&&(s.reactions??=[]).push(h);o&&(h.f^=rT),a&&f!==null&&(f.f&ff)===0&&(h.f^=ff)}for(i=0;i<l;i++)if(s=n[i],Z2(s)&&VY(s),s.wv>t.wv)return!0}(!r||ii!==null&&!Ay)&&_l(t,vl)}return!1}function hH(t,e,n=!0){var r=t.reactions;if(r!==null&&!Wg?.includes(t))for(var i=0;i<r.length;i++){var s=r[i];(s.f&iu)!==0?hH(s,e,!1):e===s&&(n?_l(s,kc):(s.f&vl)!==0&&_l(s,wm),Pb(s))}}function fH(t){var e=Ou,n=th,r=Yh,i=xi,s=Ay,o=Wg,a=zs,l=md,h=gb,f=t.f;Ou=null,th=0,Yh=null,Ay=(f&ff)!==0&&(md||!lw||xi===null),xi=(f&(d0|n_))===0?t:null,Wg=null,Vw(t.ctx),md=!1,gb=++rk,t.ac!==null&&(U2(()=>{t.ac.abort(Zx)}),t.ac=null);try{t.f|=P7;var p=t.fn,g=p(),b=t.deps;if(Ou!==null){var x;if(aT(t,th),b!==null&&th>0)for(b.length=th+Ou.length,x=0;x<Ou.length;x++)b[th+x]=Ou[x];else t.deps=b=Ou;if(!Ay||(f&iu)!==0&&t.reactions!==null)for(x=th;x<b.length;x++)(b[x].reactions??=[]).push(t)}else b!==null&&th<b.length&&(aT(t,th),b.length=th);if(j2()&&Yh!==null&&!md&&b!==null&&(t.f&(iu|wm|kc))===0)for(x=0;x<Yh.length;x++)hH(Yh[x],t);return i!==null&&i!==t&&(rk++,Yh!==null&&(r===null?r=Yh:r.push(...Yh))),(t.f&zy)!==0&&(t.f^=zy),g}catch(k){return LY(k)}finally{t.f^=P7,Ou=e,th=n,Yh=r,xi=i,Ay=s,Wg=o,Vw(a),md=l,gb=h}}function Vpe(t,e){let n=e.reactions;if(n!==null){var r=Vde.call(n,t);if(r!==-1){var i=n.length-1;i===0?n=e.reactions=null:(n[r]=n[i],n.pop())}}n===null&&(e.f&iu)!==0&&(Ou===null||!Ou.includes(e))&&(_l(e,wm),(e.f&(ff|rT))===0&&(e.f^=rT),UY(e),aT(e,0))}function aT(t,e){var n=t.deps;if(n!==null)for(var r=e;r<n.length;r++)Vpe(t,n[r])}function Xw(t){var e=t.f;if((e&Zg)===0){_l(t,vl);var n=ii,r=lw;ii=t,lw=!0;try{(e&xm)!==0?jpe(t):nH(t),tH(t);var i=fH(t);t.teardown=typeof i=="function"?i:null,t.wv=uH;var s;SY&&wpe&&(t.f&kc)!==0&&t.deps}finally{lw=r,ii=n}}}async function dH(){await Promise.resolve(),$Y()}function F(t){var e=t.f,n=(e&iu)!==0;if(xi!==null&&!md){var r=ii!==null&&(ii.f&Zg)!==0;if(!r&&!Wg?.includes(t)){var i=xi.deps;if((xi.f&P7)!==0)t.rv<rk&&(t.rv=rk,Ou===null&&i!==null&&i[th]===t?th++:Ou===null?Ou=[t]:(!Ay||!Ou.includes(t))&&Ou.push(t));else{(xi.deps??=[]).push(t);var s=t.reactions;s===null?t.reactions=[xi]:s.includes(xi)||s.push(xi)}}}else if(n&&t.deps===null&&t.effects===null){var o=t,a=o.parent;a!==null&&(a.f&ff)===0&&(o.f^=ff)}if(i_){if(Qy.has(t))return Qy.get(t);if(n){o=t;var l=o.v;return((o.f&vl)===0&&o.reactions!==null||pH(o))&&(l=YL(o)),Qy.set(o,l),l}}else if(n){if(o=t,pd?.has(o))return pd.get(o);Z2(o)&&VY(o)}if(pd?.has(t))return pd.get(t);if((t.f&zy)!==0)throw t.v;return t.v}function pH(t){if(t.v===pl)return!0;if(t.deps===null)return!1;for(const e of t.deps)if(Qy.has(e)||(e.f&iu)!==0&&pH(e))return!0;return!1}function xl(t){var e=md;try{return md=!0,t()}finally{md=e}}const qpe=-7169;function _l(t,e){t.f=t.f&qpe|e}function JL(t){if(!(typeof t!="object"||!t||t instanceof EventTarget)){if(Hp in t)L7(t);else if(!Array.isArray(t))for(let e in t){const n=t[e];typeof n=="object"&&n&&Hp in n&&L7(n)}}}function L7(t,e=new Set){if(typeof t=="object"&&t!==null&&!(t instanceof EventTarget)&&!e.has(t)){e.add(t),t instanceof Date&&t.getTime();for(let r in t)try{L7(t[r],e)}catch{}const n=VL(t);if(n!==Object.prototype&&n!==Array.prototype&&n!==Map.prototype&&n!==Set.prototype&&n!==Date.prototype){const r=kY(n);for(let i in r){const s=r[i].get;if(s)try{s.call(t)}catch{}}}}}function Zpe(t){return t.endsWith("capture")&&t!=="gotpointercapture"&&t!=="lostpointercapture"}const Xpe=["beforeinput","click","change","dblclick","contextmenu","focusin","focusout","input","keydown","keyup","mousedown","mousemove","mouseout","mouseover","mouseup","pointerdown","pointermove","pointerout","pointerover","pointerup","touchend","touchmove","touchstart"];function Wpe(t){return Xpe.includes(t)}const Gpe={formnovalidate:"formNoValidate",ismap:"isMap",nomodule:"noModule",playsinline:"playsInline",readonly:"readOnly",defaultvalue:"defaultValue",defaultchecked:"defaultChecked",srcobject:"srcObject",novalidate:"noValidate",allowfullscreen:"allowFullscreen",disablepictureinpicture:"disablePictureInPicture",disableremoteplayback:"disableRemotePlayback"};function Ype(t){return t=t.toLowerCase(),Gpe[t]??t}const Hpe=["touchstart","touchmove"];function Kpe(t){return Hpe.includes(t)}const mH=new Set,$7=new Set;function gH(t,e,n,r={}){function i(s){if(r.capture||i3.call(e,s),!s.cancelBubble)return U2(()=>n?.call(this,s))}return t.startsWith("pointer")||t.startsWith("touch")||t==="wheel"?p0(()=>{e.addEventListener(t,i,r)}):e.addEventListener(t,i,r),i}function jy(t,e,n,r,i){var s={capture:r,passive:i},o=gH(t,e,n,s);(e===document.body||e===window||e===document||e instanceof HTMLMediaElement)&&QP(()=>{e.removeEventListener(t,o,s)})}function Js(t){for(var e=0;e<t.length;e++)mH.add(t[e]);for(var n of $7)n(t)}let WQ=null;function i3(t){var e=this,n=e.ownerDocument,r=t.type,i=t.composedPath?.()||[],s=i[0]||t.target;WQ=t;var o=0,a=WQ===t&&t.__root;if(a){var l=i.indexOf(a);if(l!==-1&&(e===document||e===window)){t.__root=e;return}var h=i.indexOf(e);if(h===-1)return;l<=h&&(o=l)}if(s=i[o]||t.target,s!==e){UL(t,"currentTarget",{configurable:!0,get(){return s||n}});var f=xi,p=ii;mc(null),lm(null);try{for(var g,b=[];s!==null;){var x=s.assignedSlot||s.parentNode||s.host||null;try{var k=s["__"+r];k!=null&&(!s.disabled||t.target===s)&&k.call(s,t)}catch(T){g?b.push(T):g=T}if(t.cancelBubble||x===e||x===null)break;s=x}if(g){for(let T of b)queueMicrotask(()=>{throw T});throw g}}finally{t.__root=e,delete t.currentTarget,mc(f),lm(p)}}}function e$(t){var e=document.createElement("template");return e.innerHTML=t.replaceAll("<!>","<!---->"),e.content}function gh(t,e){var n=ii;n.nodes_start===null&&(n.nodes_start=t,n.nodes_end=e)}function gt(t,e){var n=(e&PY)!==0,r=(e&ype)!==0,i,s=!t.startsWith("<!>");return()=>{if(Gr)return gh(Si,null),Si;i===void 0&&(i=e$(s?t:"<!>"+t),n||(i=Xl(i)));var o=r||XY?document.importNode(i,!0):i.cloneNode(!0);if(n){var a=Xl(o),l=o.lastChild;gh(a,l)}else gh(o,o);return o}}function Jpe(t,e,n="svg"){var r=!t.startsWith("<!>"),i=(e&PY)!==0,s=`<${n}>${r?t:"<!>"+t}</${n}>`,o;return()=>{if(Gr)return gh(Si,null),Si;if(!o){var a=e$(s),l=Xl(a);if(i)for(o=document.createDocumentFragment();Xl(l);)o.appendChild(Xl(l));else o=Xl(l)}var h=o.cloneNode(!0);if(i){var f=Xl(h),p=h.lastChild;gh(f,p)}else gh(h,h);return h}}function $r(t,e){return Jpe(t,e,"svg")}function yb(t=""){if(!Gr){var e=_h(t+"");return gh(e,e),e}var n=Si;return n.nodeType!==FP&&(n.before(n=_h()),Kl(n)),gh(n,n),n}function ar(){if(Gr)return gh(Si,null),Si;var t=document.createDocumentFragment(),e=document.createComment(""),n=_h();return t.append(e,n),gh(e,n),t}function Re(t,e){if(Gr){ii.nodes_end=Si,e1();return}t!==null&&t.before(e)}let B7=!0;function Pr(t,e){var n=e==null?"":typeof e=="object"?e+"":e;n!==(t.__t??=t.nodeValue)&&(t.__t=n,t.nodeValue=n+"")}function t$(t,e){return yH(t,e)}function eme(t,e){F7(),e.intro=e.intro??!1;const n=e.target,r=Gr,i=Si;try{for(var s=Xl(n);s&&(s.nodeType!==r_||s.data!==DY);)s=Rd(s);if(!s)throw Tb;wd(!0),Kl(s);const o=yH(t,{...e,anchor:s});return wd(!1),o}catch(o){if(o instanceof Error&&o.message.split(`
`).some(a=>a.startsWith("https://svelte.dev/e/")))throw o;return o!==Tb&&console.warn("Failed to hydrate: ",o),e.recover===!1&&epe(),F7(),YY(n),wd(!1),t$(t,e)}finally{wd(r),Kl(i)}}const xx=new Map;function yH(t,{target:e,anchor:n,props:r={},events:i,context:s,intro:o=!0}){F7();var a=new Set,l=p=>{for(var g=0;g<p.length;g++){var b=p[g];if(!a.has(b)){a.add(b);var x=Kpe(b);e.addEventListener(b,i3,{passive:x});var k=xx.get(b);k===void 0?(document.addEventListener(b,i3,{passive:x}),xx.set(b,1)):xx.set(b,k+1)}}};l(jL(mH)),$7.add(l);var h=void 0,f=Bpe(()=>{var p=n??e.appendChild(_h());return QY(p,{pending:()=>{}},g=>{if(s){Ln({});var b=zs;b.c=s}if(i&&(r.$$events=i),Gr&&gh(g,null),B7=o,h=t(g,r)||{},B7=!0,Gr&&(ii.nodes_end=Si,Si===null||Si.nodeType!==r_||Si.data!==XL))throw vC(),Tb;s&&$n()}),()=>{for(var g of a){e.removeEventListener(g,i3);var b=xx.get(g);--b===0?(document.removeEventListener(g,i3),xx.delete(g)):xx.set(g,b)}$7.delete(l),p!==n&&p.parentNode?.removeChild(p)}});return N7.set(h,f),h}let N7=new WeakMap;function tme(t,e){const n=N7.get(t);return n?(N7.delete(t),n(e)):Promise.resolve()}class jP{anchor;#e=new Map;#t=new Map;#n=new Map;#r=!0;constructor(e,n=!0){this.anchor=e,this.#r=n}#l=()=>{var e=mo;if(this.#e.has(e)){var n=this.#e.get(e),r=this.#t.get(n);if(r)KL(r);else{var i=this.#n.get(n);i&&(this.#t.set(n,i.effect),this.#n.delete(n),i.fragment.lastChild.remove(),this.anchor.before(i.fragment),r=i.effect)}for(const[s,o]of this.#e){if(this.#e.delete(s),s===e)break;const a=this.#n.get(o);a&&(ol(a.effect),this.#n.delete(o))}for(const[s,o]of this.#t){if(s===n)continue;const a=()=>{if(Array.from(this.#e.values()).includes(s)){var h=document.createDocumentFragment();aH(o,h),h.append(_h()),this.#n.set(s,{effect:o,fragment:h})}else ol(o);this.#t.delete(s)};this.#r||!r?aw(o,a,!1):a()}}};#a=e=>{this.#e.delete(e);const n=Array.from(this.#e.values());for(const[r,i]of this.#n)n.includes(r)||(ol(i.effect),this.#n.delete(r))};ensure(e,n){var r=mo,i=HY();if(n&&!this.#t.has(e)&&!this.#n.has(e))if(i){var s=document.createDocumentFragment(),o=_h();s.append(o),this.#n.set(e,{effect:sc(()=>n(o)),fragment:s})}else this.#t.set(e,sc(()=>n(this.anchor)));if(this.#e.set(r,e),i){for(const[a,l]of this.#t)a===e?r.skipped_effects.delete(l):r.skipped_effects.add(l);for(const[a,l]of this.#n)a===e?r.skipped_effects.delete(l.effect):r.skipped_effects.add(l.effect);r.oncommit(this.#l),r.ondiscard(this.#a)}else Gr&&(this.anchor=Si),this.#l()}}function Pt(t,e,n=!1){Gr&&e1();var r=new jP(t),i=n?s0:0;function s(o,a){if(Gr){const h=IY(t)===NP;if(o===h){var l=sT();Kl(l),r.anchor=l,wd(!1),r.ensure(o,a),wd(!0);return}}r.ensure(o,a)}w1(()=>{var o=!1;e((a,l=!0)=>{o=!0,s(l,a)}),o||s(!1,null)},i)}function lT(t,e,n){Gr&&e1();var r=new jP(t),i=!j2();w1(()=>{var s=e();i&&s!==null&&typeof s=="object"&&(s={}),r.ensure(s,n)})}let e5=null;function Wi(t,e){return e}function nme(t,e,n){for(var r=t.items,i=[],s=e.length,o=0;o<s;o++)HL(e[o].e,i,!0);var a=s>0&&i.length===0&&n!==null;if(a){var l=n.parentNode;YY(l),l.append(n),r.clear(),kp(t,e[0].prev,e[s-1].next)}sH(i,()=>{for(var h=0;h<s;h++){var f=e[h];a||(r.delete(f.k),kp(t,f.prev,f.next)),ol(f.e,!a)}})}function Wr(t,e,n,r,i,s=null){var o=t,a={flags:e,items:new Map,first:null},l=(e&TY)!==0;if(l){var h=t;o=Gr?Kl(Xl(h)):h.appendChild(_h())}Gr&&e1();var f=null,p=!1,g=new Map,b=GL(()=>{var I=n();return yC(I)?I:I==null?[]:jL(I)}),x,k;function T(){rme(k,x,a,g,o,i,e,r,n),s!==null&&(x.length===0?f?KL(f):f=sc(()=>s(o)):f!==null&&aw(f,()=>{f=null}))}w1(()=>{k??=ii,x=F(b);var I=x.length;if(p&&I===0)return;p=I===0;let M=!1;if(Gr){var B=IY(o)===NP;B!==(I===0)&&(o=sT(),Kl(o),wd(!1),M=!0)}if(Gr){for(var j=null,Q,Z=0;Z<I;Z++){if(Si.nodeType===r_&&Si.data===XL){o=Si,M=!0,wd(!1);break}var q=x[Z],J=r(q,Z);Q=z7(Si,a,j,null,q,J,Z,i,e,n),a.items.set(J,Q),j=Q}I>0&&Kl(sT())}if(Gr)I===0&&s&&(f=sc(()=>s(o)));else if(HY()){var oe=new Set,me=mo;for(Z=0;Z<I;Z+=1){q=x[Z],J=r(q,Z);var ae=a.items.get(J)??g.get(J);ae?(e&($P|BP))!==0&&vH(ae,q,Z,e):(Q=z7(null,a,null,null,q,J,Z,i,e,n,!0),g.set(J,Q)),oe.add(J)}for(const[ce,se]of a.items)oe.has(ce)||me.skipped_effects.add(se.e);me.oncommit(T)}else T();M&&wd(!0),F(b)}),Gr&&(o=Si)}function rme(t,e,n,r,i,s,o,a,l){var h=(o&ape)!==0,f=(o&($P|BP))!==0,p=e.length,g=n.items,b=n.first,x=b,k,T=null,I,M=[],B=[],j,Q,Z,q;if(h)for(q=0;q<p;q+=1)j=e[q],Q=a(j,q),Z=g.get(Q),Z!==void 0&&(Z.a?.measure(),(I??=new Set).add(Z));for(q=0;q<p;q+=1){if(j=e[q],Q=a(j,q),Z=g.get(Q),Z===void 0){var J=r.get(Q);if(J!==void 0){r.delete(Q),g.set(Q,J);var oe=T?T.next:x;kp(n,T,J),kp(n,J,oe),G8(J,oe,i),T=J}else{var me=x?x.e.nodes_start:i;T=z7(me,n,T,T===null?n.first:T.next,j,Q,q,s,o,l)}g.set(Q,T),M=[],B=[],x=T.next;continue}if(f&&vH(Z,j,q,o),(Z.e.f&mh)!==0&&(KL(Z.e),h&&(Z.a?.unfix(),(I??=new Set).delete(Z))),Z!==x){if(k!==void 0&&k.has(Z)){if(M.length<B.length){var ae=B[0],ce;T=ae.prev;var se=M[0],ge=M[M.length-1];for(ce=0;ce<M.length;ce+=1)G8(M[ce],ae,i);for(ce=0;ce<B.length;ce+=1)k.delete(B[ce]);kp(n,se.prev,ge.next),kp(n,T,se),kp(n,ge,ae),x=ae,T=ge,q-=1,M=[],B=[]}else k.delete(Z),G8(Z,x,i),kp(n,Z.prev,Z.next),kp(n,Z,T===null?n.first:T.next),kp(n,T,Z),T=Z;continue}for(M=[],B=[];x!==null&&x.k!==Q;)(x.e.f&mh)===0&&(k??=new Set).add(x),B.push(x),x=x.next;if(x===null)continue;Z=x}M.push(Z),T=Z,x=Z.next}if(x!==null||k!==void 0){for(var xe=k===void 0?[]:jL(k);x!==null;)(x.e.f&mh)===0&&xe.push(x),x=x.next;var Se=xe.length;if(Se>0){var De=(o&TY)!==0&&p===0?i:null;if(h){for(q=0;q<Se;q+=1)xe[q].a?.measure();for(q=0;q<Se;q+=1)xe[q].a?.fix()}nme(n,xe,De)}}h&&p0(()=>{if(I!==void 0)for(Z of I)Z.a?.apply()}),t.first=n.first&&n.first.e,t.last=T&&T.e;for(var He of r.values())ol(He.e);r.clear()}function vH(t,e,n,r){(r&$P)!==0&&Zw(t.v,e),(r&BP)!==0?Zw(t.i,n):t.i=n}function z7(t,e,n,r,i,s,o,a,l,h,f){var p=e5,g=(l&$P)!==0,b=(l&lpe)===0,x=g?b?mb(i,!1,!1):Db(i):i,k=(l&BP)===0?o:Db(o),T={i:k,v:x,k:s,a:null,e:null,prev:n,next:r};e5=T;try{if(t===null){var I=document.createDocumentFragment();I.append(t=_h())}return T.e=sc(()=>a(t,x,k,h),Gr),T.e.prev=n&&n.e,T.e.next=r&&r.e,n===null?f||(e.first=T):(n.next=T,n.e.next=T.e),r!==null&&(r.prev=T,r.e.prev=T.e),T}finally{e5=p}}function G8(t,e,n){for(var r=t.next?t.next.e.nodes_start:n,i=e?e.e.nodes_start:n,s=t.e.nodes_start;s!==null&&s!==r;){var o=Rd(s);i.before(s),s=o}}function kp(t,e,n){e===null?t.first=n:(e.next=n,e.e.next=n&&n.e),n!==null&&(n.prev=e,n.e.prev=e&&e.e)}function n$(t,e,n=!1,r=!1,i=!1){var s=t,o="";on(()=>{var a=ii;if(o===(o=e()??"")){Gr&&e1();return}if(a.nodes_start!==null&&(rH(a.nodes_start,a.nodes_end),a.nodes_start=a.nodes_end=null),o!==""){if(Gr){Si.data;for(var l=e1(),h=l;l!==null&&(l.nodeType!==r_||l.data!=="");)h=l,l=Rd(l);if(l===null)throw vC(),Tb;gh(Si,h),s=Kl(l);return}var f=o+"";n?f=`<svg>${f}</svg>`:r&&(f=`<math>${f}</math>`);var p=e$(f);if((n||r)&&(p=Xl(p)),gh(Xl(p),p.lastChild),n||r)for(;Xl(p);)s.before(Xl(p));else s.before(p)}})}function vf(t,e,...n){var r=new jP(t);w1(()=>{const i=e()??null;r.ensure(i,i&&(s=>i(s,...n)))},s0)}function o0(t,e,n){Gr&&e1();var r=new jP(t);w1(()=>{var i=e()??null;r.ensure(i,i&&(s=>n(s,i)))},s0)}function Do(t,e,n){V2(()=>{var r=xl(()=>e(t,n?.())||{});if(n&&r?.update){var i=!1,s={};q2(()=>{var o=n();JL(o),i&&WL(s,o)&&(s=o,r.update(o))}),i=!0}if(r?.destroy)return()=>r.destroy()})}function ime(t,e){var n=void 0,r;w1(()=>{n!==(n=e())&&(r&&(ol(r),r=null),n&&(r=sc(()=>{V2(()=>n(t))})))})}function bH(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var i=t.length;for(e=0;e<i;e++)t[e]&&(n=bH(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function sme(){for(var t,e,n=0,r="",i=arguments.length;n<i;n++)(t=arguments[n])&&(e=bH(t))&&(r&&(r+=" "),r+=e);return r}function _C(t){return typeof t=="object"?sme(t):t??""}const GQ=[...` 	
\r\fÂ \v\uFEFF`];function ome(t,e,n){var r=t==null?"":""+t;if(e&&(r=r?r+" "+e:e),n){for(var i in n)if(n[i])r=r?r+" "+i:i;else if(r.length)for(var s=i.length,o=0;(o=r.indexOf(i,o))>=0;){var a=o+s;(o===0||GQ.includes(r[o-1]))&&(a===r.length||GQ.includes(r[a]))?r=(o===0?"":r.substring(0,o))+r.substring(a+1):o=a}}return r===""?null:r}function YQ(t,e=!1){var n=e?" !important;":";",r="";for(var i in t){var s=t[i];s!=null&&s!==""&&(r+=" "+i+": "+s+n)}return r}function Y8(t){return t[0]!=="-"||t[1]!=="-"?t.toLowerCase():t}function ame(t,e){if(e){var n="",r,i;if(Array.isArray(e)?(r=e[0],i=e[1]):r=e,t){t=String(t).replaceAll(/\s*\/\*.*?\*\/\s*/g,"").trim();var s=!1,o=0,a=!1,l=[];r&&l.push(...Object.keys(r).map(Y8)),i&&l.push(...Object.keys(i).map(Y8));var h=0,f=-1;const k=t.length;for(var p=0;p<k;p++){var g=t[p];if(a?g==="/"&&t[p-1]==="*"&&(a=!1):s?s===g&&(s=!1):g==="/"&&t[p+1]==="*"?a=!0:g==='"'||g==="'"?s=g:g==="("?o++:g===")"&&o--,!a&&s===!1&&o===0){if(g===":"&&f===-1)f=p;else if(g===";"||p===k-1){if(f!==-1){var b=Y8(t.substring(h,f).trim());if(!l.includes(b)){g!==";"&&p++;var x=t.substring(h,p).trim();n+=" "+x+";"}}h=p+1,f=-1}}}}return r&&(n+=YQ(r)),i&&(n+=YQ(i,!0)),n=n.trim(),n===""?null:n}return t==null?null:String(t)}function Hi(t,e,n,r,i,s){var o=t.__className;if(Gr||o!==n||o===void 0){var a=ome(n,r,s);(!Gr||a!==t.getAttribute("class"))&&(a==null?t.removeAttribute("class"):e?t.className=a:t.setAttribute("class",a)),t.__className=n}else if(s&&i!==s)for(var l in s){var h=!!s[l];(i==null||h!==!!i[l])&&t.classList.toggle(l,h)}return s}function H8(t,e={},n,r){for(var i in n){var s=n[i];e[i]!==s&&(n[i]==null?t.style.removeProperty(i):t.style.setProperty(i,s,r))}}function lr(t,e,n,r){var i=t.__style;if(Gr||i!==e){var s=ame(e,r);(!Gr||s!==t.getAttribute("style"))&&(s==null?t.removeAttribute("style"):t.style.cssText=s),t.__style=e}else r&&(Array.isArray(r)?(H8(t,n?.[0],r[0]),H8(t,n?.[1],r[1],"important")):H8(t,n,r));return r}function uT(t,e,n=!1){if(t.multiple){if(e==null)return;if(!yC(e))return _pe();for(var r of t.options)r.selected=e.includes(HQ(r));return}for(r of t.options){var i=HQ(r);if(Mpe(i,e)){r.selected=!0;return}}(!n||e!==void 0)&&(t.selectedIndex=-1)}function _H(t){var e=new MutationObserver(()=>{uT(t,t.__value)});e.observe(t,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),QP(()=>{e.disconnect()})}function HQ(t){return"__value"in t?t.__value:t.value}const CS=Symbol("class"),AS=Symbol("style"),xH=Symbol("is custom element"),wH=Symbol("is html");function UP(t){if(Gr){var e=!1,n=()=>{if(!e){if(e=!0,t.hasAttribute("value")){var r=t.value;St(t,"value",null),t.value=r}if(t.hasAttribute("checked")){var i=t.checked;St(t,"checked",null),t.checked=i}}};t.__on_r=n,p0(n),KY()}}function OH(t,e){var n=r$(t);n.value===(n.value=e??void 0)||t.value===e&&(e!==0||t.nodeName!=="PROGRESS")||(t.value=e??"")}function lme(t,e){e?t.hasAttribute("selected")||t.setAttribute("selected",""):t.removeAttribute("selected")}function St(t,e,n,r){var i=r$(t);Gr&&(i[e]=t.getAttribute(e),e==="src"||e==="srcset"||e==="href"&&t.nodeName==="LINK")||i[e]!==(i[e]=n)&&(e==="loading"&&(t[Wde]=n),n==null?t.removeAttribute(e):typeof n!="string"&&SH(t).includes(e)?t[e]=n:t.setAttribute(e,n))}function ume(t,e,n,r,i=!1,s=!1){if(Gr&&i&&t.tagName==="INPUT"){var o=t,a=o.type==="checkbox"?"defaultChecked":"defaultValue";a in n||UP(o)}var l=r$(t),h=l[xH],f=!l[wH];let p=Gr&&h;p&&wd(!1);var g=e||{},b=t.tagName==="OPTION";for(var x in e)x in n||(n[x]=null);n.class?n.class=_C(n.class):n[CS]&&(n.class=null),n[AS]&&(n.style??=null);var k=SH(t);for(const Z in n){let q=n[Z];if(b&&Z==="value"&&q==null){t.value=t.__value="",g[Z]=q;continue}if(Z==="class"){var T=t.namespaceURI==="http://www.w3.org/1999/xhtml";Hi(t,T,q,r,e?.[CS],n[CS]),g[Z]=q,g[CS]=n[CS];continue}if(Z==="style"){lr(t,q,e?.[AS],n[AS]),g[Z]=q,g[AS]=n[AS];continue}var I=g[Z];if(!(q===I&&!(q===void 0&&t.hasAttribute(Z)))){g[Z]=q;var M=Z[0]+Z[1];if(M!=="$$")if(M==="on"){const J={},oe="$$"+Z;let me=Z.slice(2);var B=Wpe(me);if(Zpe(me)&&(me=me.slice(0,-7),J.capture=!0),!B&&I){if(q!=null)continue;t.removeEventListener(me,g[oe],J),g[oe]=null}if(q!=null)if(B)t[`__${me}`]=q,Js([me]);else{let ae=function(ce){g[Z].call(this,ce)};g[oe]=gH(me,t,ae,J)}else B&&(t[`__${me}`]=void 0)}else if(Z==="style")St(t,Z,q);else if(Z==="autofocus")Rpe(t,!!q);else if(!h&&(Z==="__value"||Z==="value"&&q!=null))t.value=t.__value=q;else if(Z==="selected"&&b)lme(t,q);else{var j=Z;f||(j=Ype(j));var Q=j==="defaultValue"||j==="defaultChecked";if(q==null&&!h&&!Q)if(l[Z]=null,j==="value"||j==="checked"){let J=t;const oe=e===void 0;if(j==="value"){let me=J.defaultValue;J.removeAttribute(j),J.defaultValue=me,J.value=J.__value=oe?me:null}else{let me=J.defaultChecked;J.removeAttribute(j),J.defaultChecked=me,J.checked=oe?me:!1}}else t.removeAttribute(Z);else Q||k.includes(j)&&(h||typeof q!="string")?(t[j]=q,j in l&&(l[j]=pl)):typeof q!="function"&&St(t,j,q)}}}return p&&wd(!0),g}function oo(t,e,n=[],r=[],i=[],s,o=!1,a=!1){jY(i,n,r,l=>{var h=void 0,f={},p=t.nodeName==="SELECT",g=!1;if(w1(()=>{var x=e(...l.map(F)),k=ume(t,h,x,s,o,a);g&&p&&"value"in x&&uT(t,x.value);for(let I of Object.getOwnPropertySymbols(f))x[I]||ol(f[I]);for(let I of Object.getOwnPropertySymbols(x)){var T=x[I];I.description===bpe&&(!h||T!==h[I])&&(f[I]&&ol(f[I]),f[I]=sc(()=>ime(t,()=>T))),k[I]=T}h=k}),p){var b=t;V2(()=>{uT(b,h.value,!0),_H(b)})}g=!0})}function r$(t){return t.__attributes??={[xH]:t.nodeName.includes("-"),[wH]:t.namespaceURI===vpe}}var KQ=new Map;function SH(t){var e=t.getAttribute("is")||t.nodeName,n=KQ.get(e);if(n)return n;KQ.set(e,n=[]);for(var r,i=t,s=Element.prototype;s!==i;){r=kY(i);for(var o in r)r[o].set&&n.push(o);i=VL(i)}return n}const cme=()=>performance.now(),Dg={tick:t=>requestAnimationFrame(t),now:()=>cme(),tasks:new Set};function kH(){const t=Dg.now();Dg.tasks.forEach(e=>{e.c(t)||(Dg.tasks.delete(e),e.f())}),Dg.tasks.size!==0&&Dg.tick(kH)}function hme(t){let e;return Dg.tasks.size===0&&Dg.tick(kH),{promise:new Promise(n=>{Dg.tasks.add(e={c:t,f:n})}),abort(){Dg.tasks.delete(e)}}}function ME(t,e){U2(()=>{t.dispatchEvent(new CustomEvent(e))})}function fme(t){if(t==="float")return"cssFloat";if(t==="offset")return"cssOffset";if(t.startsWith("--"))return t;const e=t.split("-");return e.length===1?e[0]:e[0]+e.slice(1).map(n=>n[0].toUpperCase()+n.slice(1)).join("")}function JQ(t){const e={},n=t.split(";");for(const r of n){const[i,s]=r.split(":");if(!i||s===void 0)break;const o=fme(i.trim());e[o]=s.trim()}return e}const dme=t=>t;function ej(t,e,n){var r=e5,i,s,o,a=null;r.a??={element:t,measure(){i=this.element.getBoundingClientRect()},apply(){if(o?.abort(),s=this.element.getBoundingClientRect(),i.left!==s.left||i.right!==s.right||i.top!==s.top||i.bottom!==s.bottom){const l=e()(this.element,{from:i,to:s},n?.());o=cT(this.element,l,void 0,1,()=>{o?.abort(),o=void 0})}},fix(){if(!t.getAnimations().length){var{position:l,width:h,height:f}=getComputedStyle(t);if(l!=="absolute"&&l!=="fixed"){var p=t.style;a={position:p.position,width:p.width,height:p.height,transform:p.transform},p.position="absolute",p.width=h,p.height=f;var g=t.getBoundingClientRect();if(i.left!==g.left||i.top!==g.top){var b=`translate(${i.left-g.left}px, ${i.top-g.top}px)`;p.transform=p.transform?`${p.transform} ${b}`:b}}}},unfix(){if(a){var l=t.style;l.position=a.position,l.width=a.width,l.height=a.height,l.transform=a.transform}}},r.a.element=t}function Ey(t,e,n,r){var i=(t&ppe)!==0,s=(t&mpe)!==0,o=i&&s,a=(t&gpe)!==0,l=o?"both":i?"in":"out",h,f=e.inert,p=e.style.overflow,g,b;function x(){return U2(()=>h??=n()(e,r?.()??{},{direction:l}))}var k={is_global:a,in(){if(e.inert=f,!i){b?.abort(),b?.reset?.();return}s||g?.abort(),ME(e,"introstart"),g=cT(e,x(),b,1,()=>{ME(e,"introend"),g?.abort(),g=h=void 0,e.style.overflow=p})},out(B){if(!s){B?.(),h=void 0;return}e.inert=!0,ME(e,"outrostart"),b=cT(e,x(),g,0,()=>{ME(e,"outroend"),B?.()})},stop:()=>{g?.abort(),b?.abort()}},T=ii;if((T.transitions??=[]).push(k),i&&B7){var I=a;if(!I){for(var M=T.parent;M&&(M.f&s0)!==0;)for(;(M=M.parent)&&(M.f&xm)===0;);I=!M||(M.f&RP)!==0}I&&V2(()=>{xl(()=>k.in())})}}function cT(t,e,n,r,i){var s=r===1;if(Dx(e)){var o,a=!1;return p0(()=>{if(!a){var T=e({direction:s?"in":"out"});o=cT(t,T,n,r,i)}}),{abort:()=>{a=!0,o?.abort()},deactivate:()=>o.deactivate(),reset:()=>o.reset(),t:()=>o.t()}}if(n?.deactivate(),!e?.duration)return i(),{abort:Ys,deactivate:Ys,reset:Ys,t:()=>r};const{delay:l=0,css:h,tick:f,easing:p=dme}=e;var g=[];if(s&&n===void 0&&(f&&f(0,1),h)){var b=JQ(h(0,1));g.push(b,b)}var x=()=>1-r,k=t.animate(g,{duration:l,fill:"forwards"});return k.onfinish=()=>{k.cancel();var T=n?.t()??1-r;n?.abort();var I=r-T,M=e.duration*Math.abs(I),B=[];if(M>0){var j=!1;if(h)for(var Q=Math.ceil(M/16.666666666666668),Z=0;Z<=Q;Z+=1){var q=T+I*p(Z/Q),J=JQ(h(q,1-q));B.push(J),j||=J.overflow==="hidden"}j&&(t.style.overflow="hidden"),x=()=>{var oe=k.currentTime;return T+I*p(oe/M)},f&&hme(()=>{if(k.playState!=="running")return!1;var oe=x();return f(oe,1-oe),!0})}k=t.animate(B,{duration:M,fill:"forwards"}),k.onfinish=()=>{x=()=>r,f?.(r,1-r),i()}},{abort:()=>{k&&(k.cancel(),k.effect=null,k.onfinish=Ys)},deactivate:()=>{i=Ys},reset:()=>{r===0&&f?.(1,0)},t:()=>x()}}function pme(t,e,n=e){var r=new WeakSet;Fpe(t,"input",async i=>{var s=i?t.defaultValue:t.value;if(s=K8(t)?J8(s):s,n(s),mo!==null&&r.add(mo),await dH(),s!==(s=e())){var o=t.selectionStart,a=t.selectionEnd,l=t.value.length;if(t.value=s??"",a!==null){var h=t.value.length;o===a&&a===l&&h>l?(t.selectionStart=h,t.selectionEnd=h):(t.selectionStart=o,t.selectionEnd=Math.min(a,h))}}}),(Gr&&t.defaultValue!==t.value||xl(e)==null&&t.value)&&(n(K8(t)?J8(t.value):t.value),mo!==null&&r.add(mo)),q2(()=>{var i=e();if(t===document.activeElement){var s=J4??mo;if(r.has(s))return}K8(t)&&i===J8(t.value)||t.type==="date"&&!i&&!t.value||i!==t.value&&(t.value=i??"")})}function K8(t){var e=t.type;return e==="number"||e==="range"}function J8(t){return t===""?null:+t}class i${#e=new WeakMap;#t;#n;static entries=new WeakMap;constructor(e){this.#n=e}observe(e,n){var r=this.#e.get(e)||new Set;return r.add(n),this.#e.set(e,r),this.#r().observe(e,this.#n),()=>{var i=this.#e.get(e);i.delete(n),i.size===0&&(this.#e.delete(e),this.#t.unobserve(e))}}#r(){return this.#t??(this.#t=new ResizeObserver(e=>{for(var n of e){i$.entries.set(n.target,n);for(var r of this.#e.get(n.target)||[])r(n)}}))}}var mme=new i$({box:"border-box"});function a0(t,e,n){var r=mme.observe(t,()=>n(t[e]));V2(()=>(xl(()=>n(t[e])),r))}function tj(t,e){return t===e||t?.[Hp]===e}function zu(t={},e,n,r){return V2(()=>{var i,s;return q2(()=>{i=s,s=r?.()||[],xl(()=>{t!==n(...s)&&(e(t,...s),i&&tj(n(...i),t)&&e(null,...i))})}),()=>{p0(()=>{s&&tj(n(...s),t)&&e(null,...s)})}}),t}function s$(t=!1){const e=zs,n=e.l.u;if(!n)return;let r=()=>JL(e.s);if(t){let i=0,s={};const o=bC(()=>{let a=!1;const l=e.s;for(const h in l)l[h]!==s[h]&&(s[h]=l[h],a=!0);return a&&i++,i});r=()=>F(o)}n.b.length&&Oo(()=>{nj(e,r),nT(n.b)}),xh(()=>{const i=xl(()=>n.m.map(Xde));return()=>{for(const s of i)typeof s=="function"&&s()}}),n.a.length&&xh(()=>{nj(e,r),nT(n.a)})}function nj(t,e){if(t.l.s)for(const n of t.l.s)F(n);e()}function rj(t,e){var n=t.$$events?.[e.type],r=yC(n)?n.slice():n==null?[]:[n];for(var i of r)i.call(this,e)}function o$(t,e,n){if(t==null)return e(void 0),n&&n(void 0),Ys;const r=xl(()=>t.subscribe(e,n));return r.unsubscribe?()=>r.unsubscribe():r}const wx=[];function CH(t,e){return{subscribe:gc(t,e).subscribe}}function gc(t,e=Ys){let n=null;const r=new Set;function i(a){if(WL(t,a)&&(t=a,n)){const l=!wx.length;for(const h of r)h[1](),wx.push(h,t);if(l){for(let h=0;h<wx.length;h+=2)wx[h][0](wx[h+1]);wx.length=0}}}function s(a){i(a(t))}function o(a,l=Ys){const h=[a,l];return r.add(h),r.size===1&&(n=e(i,s)||Ys),a(t),()=>{r.delete(h),r.size===0&&n&&(n(),n=null)}}return{set:i,update:s,subscribe:o}}function xC(t,e,n){const r=!Array.isArray(t),i=r?[t]:t;if(!i.every(Boolean))throw new Error("derived() expects stores as input, got a falsy value");const s=e.length<2;return CH(n,(o,a)=>{let l=!1;const h=[];let f=0,p=Ys;const g=()=>{if(f)return;p();const x=e(r?h[0]:h,o,a);s?o(x):p=typeof x=="function"?x:Ys},b=i.map((x,k)=>o$(x,T=>{h[k]=T,f&=~(1<<k),l&&g()},()=>{f|=1<<k}));return l=!0,g(),function(){nT(b),p(),l=!1}})}function gme(t){let e;return o$(t,n=>e=n)(),e}let RE=!1,Q7=Symbol();function qo(t,e,n){const r=n[e]??={store:null,source:mb(void 0),unsubscribe:Ys};if(r.store!==t&&!(Q7 in n))if(r.unsubscribe(),r.store=t??null,t==null)r.source.v=void 0,r.unsubscribe=Ys;else{var i=!0;r.unsubscribe=o$(t,s=>{i?r.source.v=s:ct(r.source,s)}),i=!1}return t&&Q7 in n?gme(t):F(r.source)}function ij(t,e){return t.set(e),e}function Cf(){const t={};function e(){QP(()=>{for(var n in t)t[n].unsubscribe();UL(t,Q7,{enumerable:!1,value:!0})})}return[t,e]}function yme(t){var e=RE;try{return RE=!1,[t(),RE]}finally{RE=e}}const vme={get(t,e){if(!t.exclude.includes(e))return t.props[e]},set(t,e){return!1},getOwnPropertyDescriptor(t,e){if(!t.exclude.includes(e)&&e in t.props)return{enumerable:!0,configurable:!0,value:t.props[e]}},has(t,e){return t.exclude.includes(e)?!1:e in t.props},ownKeys(t){return Reflect.ownKeys(t.props).filter(e=>!t.exclude.includes(e))}};function Qs(t,e,n){return new Proxy({props:t,exclude:e},vme)}const bme={get(t,e){let n=t.props.length;for(;n--;){let r=t.props[n];if(Dx(r)&&(r=r()),typeof r=="object"&&r!==null&&e in r)return r[e]}},set(t,e,n){let r=t.props.length;for(;r--;){let i=t.props[r];Dx(i)&&(i=i());const s=Ny(i,e);if(s&&s.set)return s.set(n),!0}return!1},getOwnPropertyDescriptor(t,e){let n=t.props.length;for(;n--;){let r=t.props[n];if(Dx(r)&&(r=r()),typeof r=="object"&&r!==null&&e in r){const i=Ny(r,e);return i&&!i.configurable&&(i.configurable=!0),i}}},has(t,e){if(e===Hp||e===ZL)return!1;for(let n of t.props)if(Dx(n)&&(n=n()),n!=null&&e in n)return!0;return!1},ownKeys(t){const e=[];for(let n of t.props)if(Dx(n)&&(n=n()),!!n){for(const r in n)e.includes(r)||e.push(r);for(const r of Object.getOwnPropertySymbols(n))e.includes(r)||e.push(r)}return e}};function Ib(...t){return new Proxy({props:t},bme)}function jn(t,e,n,r){var i=!Q2||(n&cpe)!==0,s=(n&fpe)!==0,o=(n&dpe)!==0,a=r,l=!0,h=()=>(l&&(l=!1,a=o?xl(r):r),a),f;if(s){var p=Hp in t||ZL in t;f=Ny(t,e)?.set??(p&&e in t?B=>t[e]=B:void 0)}var g,b=!1;s?[g,b]=yme(()=>t[e]):g=t[e],g===void 0&&r!==void 0&&(g=h(),f&&(i&&npe(),f(g)));var x;if(i?x=()=>{var B=t[e];return B===void 0?h():(l=!0,B)}:x=()=>{var B=t[e];return B!==void 0&&(a=void 0),B===void 0?a:B},i&&(n&hpe)===0)return x;if(f){var k=t.$$legacy;return(function(B,j){return arguments.length>0?((!i||!j||k||b)&&f(j?x():B),B):x()})}var T=!1,I=((n&upe)!==0?bC:GL)(()=>(T=!1,x()));s&&F(I);var M=ii;return(function(B,j){if(arguments.length>0){const Q=j?F(I):i&&s?Ng(B):B;return ct(I,Q),T=!0,a!==void 0&&(a=Q),B}return i_&&T||(M.f&Zg)!==0?I.v:F(I)})}function _me(t){return new xme(t)}class xme{#e;#t;constructor(e){var n=new Map,r=(s,o)=>{var a=mb(o,!1,!1);return n.set(s,a),a};const i=new Proxy({...e.props||{},$$events:{}},{get(s,o){return F(n.get(o)??r(o,Reflect.get(s,o)))},has(s,o){return o===ZL?!0:(F(n.get(o)??r(o,Reflect.get(s,o))),Reflect.has(s,o))},set(s,o,a){return ct(n.get(o)??r(o,a),a),Reflect.set(s,o,a)}});this.#t=(e.hydrate?eme:t$)(e.component,{target:e.target,anchor:e.anchor,props:i,context:e.context,intro:e.intro??!1,recover:e.recover}),(!e?.props?.$$host||e.sync===!1)&&$Y(),this.#e=i.$$events;for(const s of Object.keys(this.#t))s==="$set"||s==="$destroy"||s==="$on"||UL(this,s,{get(){return this.#t[s]},set(o){this.#t[s]=o},enumerable:!0});this.#t.$set=s=>{Object.assign(i,s)},this.#t.$destroy=()=>{tme(this.#t)}}$set(e){this.#t.$set(e)}$on(e,n){this.#e[e]=this.#e[e]||[];const r=(...i)=>n.call(this,...i);return this.#e[e].push(r),()=>{this.#e[e]=this.#e[e].filter(i=>i!==r)}}$destroy(){this.#t.$destroy()}}function s_(t){zs===null&&LP(),Q2&&zs.l!==null?AH(zs).m.push(t):xh(()=>{const e=xl(t);if(typeof e=="function")return e})}function VP(t){zs===null&&LP(),s_(()=>()=>xl(t))}function wme(t,e,{bubbles:n=!1,cancelable:r=!1}={}){return new CustomEvent(t,{detail:e,bubbles:n,cancelable:r})}function Ome(){const t=zs;return t===null&&LP(),(e,n,r)=>{const i=t.s.$$events?.[e];if(i){const s=yC(i)?i.slice():[i],o=wme(e,n,r);for(const a of s)a.call(t.x,o);return!o.defaultPrevented}return!0}}function Sme(t){zs===null&&LP(),zs.l===null&&tpe(),AH(zs).a.push(t)}function AH(t){var e=t.l;return e.u??={a:[],b:[],m:[]}}const kme="5";typeof window<"u"&&((window.__svelte??={}).v??=new Set).add(kme);Ope();function Cme(t,e){if(t instanceof RegExp)return{keys:!1,pattern:t};var n,r,i,s,o=[],a="",l=t.split("/");for(l[0]||l.shift();i=l.shift();)n=i[0],n==="*"?(o.push("wild"),a+="/(.*)"):n===":"?(r=i.indexOf("?",1),s=i.indexOf(".",1),o.push(i.substring(1,~r?r:~s?s:i.length)),a+=~r&&!~s?"(?:/([^/]+?))?":"/([^/]+?)",~s&&(a+=(~r?"?":"")+"\\"+i.substring(s))):a+="/"+i;return{keys:o,pattern:new RegExp("^"+a+"/?$","i")}}function sj(){const t=window.location.href.indexOf("#/");let e=t>-1?window.location.href.substr(t+1):"/";const n=e.indexOf("?");let r="";return n>-1&&(r=e.substr(n+1),e=e.substr(0,n)),{location:e,querystring:r}}const a$=CH(null,function(e){e(sj());const n=()=>{e(sj())};return window.addEventListener("hashchange",n,!1),function(){window.removeEventListener("hashchange",n,!1)}});xC(a$,t=>t.location);xC(a$,t=>t.querystring);const oj=gc(void 0);function Ame(t){t?window.scrollTo(t.__svelte_spa_router_scrollX,t.__svelte_spa_router_scrollY):window.scrollTo(0,0)}function Eme(t,e){Ln(e,!1);let n=jn(e,"routes",24,()=>({})),r=jn(e,"prefix",8,""),i=jn(e,"restoreScrollState",8,!1);class s{constructor(Z,q){if(!q||typeof q!="function"&&(typeof q!="object"||q._sveltesparouter!==!0))throw Error("Invalid component object");if(!Z||typeof Z=="string"&&(Z.length<1||Z.charAt(0)!="/"&&Z.charAt(0)!="*")||typeof Z=="object"&&!(Z instanceof RegExp))throw Error('Invalid value for "path" argument - strings must start with / or *');const{pattern:J,keys:oe}=Cme(Z);this.path=Z,typeof q=="object"&&q._sveltesparouter===!0?(this.component=q.component,this.conditions=q.conditions||[],this.userData=q.userData,this.props=q.props||{}):(this.component=()=>Promise.resolve(q),this.conditions=[],this.props={}),this._pattern=J,this._keys=oe}match(Z){if(r()){if(typeof r()=="string")if(Z.startsWith(r()))Z=Z.substr(r().length)||"/";else return null;else if(r()instanceof RegExp){const me=Z.match(r());if(me&&me[0])Z=Z.substr(me[0].length)||"/";else return null}}const q=this._pattern.exec(Z);if(q===null)return null;if(this._keys===!1)return q;const J={};let oe=0;for(;oe<this._keys.length;){try{J[this._keys[oe]]=decodeURIComponent(q[oe+1]||"")||null}catch{J[this._keys[oe]]=null}oe++}return J}async checkConditions(Z){for(let q=0;q<this.conditions.length;q++)if(!await this.conditions[q](Z))return!1;return!0}}const o=[];n()instanceof Map?n().forEach((Q,Z)=>{o.push(new s(Z,Q))}):Object.keys(n()).forEach(Q=>{o.push(new s(Q,n()[Q]))});let a=mb(null),l=mb(null),h=mb({});const f=Ome();async function p(Q,Z){await dH(),f(Q,Z)}let g=null,b=null;i()&&(b=Q=>{Q.state&&(Q.state.__svelte_spa_router_scrollY||Q.state.__svelte_spa_router_scrollX)?g=Q.state:g=null},window.addEventListener("popstate",b),Sme(()=>{Ame(g)}));let x=null,k=null;const T=a$.subscribe(async Q=>{x=Q;let Z=0;for(;Z<o.length;){const q=o[Z].match(Q.location);if(!q){Z++;continue}const J={route:o[Z].path,location:Q.location,querystring:Q.querystring,userData:o[Z].userData,params:q&&typeof q=="object"&&Object.keys(q).length?q:null};if(!await o[Z].checkConditions(J)){ct(a,null),k=null,p("conditionsFailed",J);return}p("routeLoading",Object.assign({},J));const oe=o[Z].component;if(k!=oe){oe.loading?(ct(a,oe.loading),k=oe,ct(l,oe.loadingParams),ct(h,{}),p("routeLoaded",Object.assign({},J,{component:F(a),name:F(a).name,params:F(l)}))):(ct(a,null),k=null);const me=await oe();if(Q!=x)return;ct(a,me&&me.default||me),k=oe}q&&typeof q=="object"&&Object.keys(q).length?ct(l,q):ct(l,null),ct(h,o[Z].props),p("routeLoaded",Object.assign({},J,{component:F(a),name:F(a).name,params:F(l)})).then(()=>{oj.set(F(l))});return}ct(a,null),k=null,oj.set(void 0)});VP(()=>{T(),b&&window.removeEventListener("popstate",b)}),Npe(()=>JL(i()),()=>{history.scrollRestoration=i()?"manual":"auto"}),zpe(),s$();var I=ar(),M=pn(I);{var B=Q=>{var Z=ar(),q=pn(Z);o0(q,()=>F(a),(J,oe)=>{oe(J,Ib({get params(){return F(l)}},()=>F(h),{$$events:{routeEvent(me){rj.call(this,e,me)}}}))}),Re(Q,Z)},j=Q=>{var Z=ar(),q=pn(Z);o0(q,()=>F(a),(J,oe)=>{oe(J,Ib(()=>F(h),{$$events:{routeEvent(me){rj.call(this,e,me)}}}))}),Re(Q,Z)};Pt(M,Q=>{F(l)?Q(B):Q(j,!1)})}Re(t,I),$n()}async function Tme(t,e="gzip"){let n=new CompressionStream(e),i=new Blob([t]).stream().pipeThrough(n),o=await(await new Response(i).blob()).arrayBuffer();return new Uint8Array(o)}async function Pme(t,e="gzip"){let n=new DecompressionStream(e),i=new Blob([t]).stream().pipeThrough(n),o=await(await new Response(i).blob()).arrayBuffer();return new Uint8Array(o)}function Dme(t){let e=t.replace(/-/g,"+").replace(/_/g,"/");const n=e.length%4;return n===2?e+="==":n===3?e+="=":n===1&&(e+="==="),e}function Ime(t){let e=t.replace(/\+/g,"-").replace(/\//g,"_");return e=e.replace(/=+$/,""),e}function Mme(t){let n="";for(let r=0;r<t.length;r+=32768)n+=String.fromCharCode(...t.subarray(r,r+32768));return Ime(btoa(n))}function Rme(t){let e=atob(Dme(t)),n=new Uint8Array(e.length);for(let r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n}function l$(t,e=1e3){let n;return(...i)=>{n&&clearTimeout(n),n=setTimeout(()=>{t(...i)},e)}}function ik(t,e){if(t===e)return!0;if(t===null||e===null||typeof t!="object"||typeof e!="object"||Object.keys(t).length!==Object.keys(e).length)return!1;for(let n in t)if(e.hasOwnProperty(n)){if(!ik(t[n],e[n]))return!1}else return!1;return!0}function j7(t){let e;return(...n)=>{let r=t(...n);return e!==void 0&&ik(r,e)?e:(e=r,r)}}function gy(t,e,...n){try{if(n.every(r=>r!==void 0)){const r=t[e];if(typeof r=="function")return r(...n)}}catch(r){console.error(r)}}const Fme=2;function FE(t){return{clientX:t.clientX,clientY:t.clientY,pageX:t.pageX,pageY:t.pageY,modifiers:{shift:t.shiftKey,ctrl:t.ctrlKey,alt:t.altKey,meta:t.metaKey}}}function vs(t,e){let n=e,r,i=!1,s=!1;const o=h=>{let f=FE(h);h.preventDefault(),h.stopPropagation(),Lme(),i=!0,r&&(gy(r,"up"),r=void 0);let p=b=>{let x=FE(b);n.drag&&!r?Math.hypot(f.clientX-x.clientX,f.clientY-x.clientY)>Fme&&(r=gy(n,"drag",f),r&&gy(r,"move",x)):r&&gy(r,"move",x)},g=b=>{let x=FE(b);i=!1,window.removeEventListener("mousemove",p),window.removeEventListener("mouseup",g),r?(gy(r,"up",b),r=void 0):n.click&&gy(n,"click",x)};window.addEventListener("mousemove",p,{passive:!0}),window.addEventListener("mouseup",g,{passive:!0})},a=h=>{if(!i){n.hover&&(gy(n,"hover",FE(h)),s=!0);return}},l=h=>{s&&n.hover&&(gy(n,"hover",null),s=!1)};return t.addEventListener("mousedown",o,{passive:!1}),t.addEventListener("mousemove",a,{passive:!0}),t.addEventListener("mouseleave",l,{passive:!0}),{update:h=>{n=h},destroy:()=>{t.removeEventListener("mousedown",o),t.removeEventListener("mousemove",a),t.removeEventListener("mouseleave",l)}}}function Lme(){try{document.activeElement&&document.activeElement!==document.body&&document.activeElement.blur?.()}catch{}}function uw(t,e){if(aj(t)&&aj(e)){let n;for(let r in e)if(e[r]!==t[r])if(e[r]===void 0)n===void 0&&(n={...t}),delete n[r];else{let i=uw(t[r],e[r]);i!==void 0&&(n===void 0&&(n={...t}),n[r]=i)}return n}else return ik(t,e)?void 0:e}function Ww(t,e,n,r){switch(n){case"merge":{let i=uw(t,e);return i!==void 0?r(i):void 0}case"replace":return t!==e?r(e):void 0}}function t5(t,e,n,r,i){switch(r){case"merge":{let s=uw(t,{[e]:n});return s!==void 0?i(s):void 0}case"replace":if(t[e]!==n){let s={...t};return s[e]=n,i(s)}else return}}function aj(t){return t!=null&&typeof t=="object"&&!Array.isArray(t)}const lj={};function $me(t,e=!1){let n,r,i=lj;function s(h){n=t(h)?.catch(()=>{}).finally(()=>{if(r){const{event:f}=r;r=null,s(f)}else n=null})||null}function o(h){r={event:h}}function a(h){n?o(h):s(h)}function l(h){i!==h&&requestAnimationFrame(()=>{const f=i;i=lj,a(f)}),i=h}return e?l:a}class qP{_filterBy;_requestUpdate;_coordinator;_pending;_enabled;_initialized;_request;constructor(e){this._filterBy=e,this._requestUpdate=$me(()=>this.requestQuery(),!0),this._coordinator=null,this._pending=Promise.resolve(),this._enabled=!0,this._initialized=!1,this._request=null}get coordinator(){return this._coordinator}set coordinator(e){this._coordinator=e}get enabled(){return this._enabled}set enabled(e){e=!!e,this._enabled!==e&&(this._enabled=e,e&&(this._initialized?this._request&&this.requestQuery(this._request===!0?void 0:this._request):this.initialize(),this._request=null))}get pending(){return this._pending}get filterBy(){return this._filterBy}get filterStable(){return!0}async prepare(){}query(e){return null}queryPending(){return this}queryResult(e){return this}queryError(e){return this}requestQuery(e){if(this._enabled){const n=e||this.query(this.filterBy?.predicate(this));return this._coordinator.requestQuery(this,n)}else return this._request=e??!0,null}requestUpdate(){this._enabled?this._requestUpdate():this.requestQuery()}initialize(){this._enabled?this._coordinator&&(this._initialized=!0,this._pending=this.prepare().then(()=>this.requestQuery())):this._initialized=!1}destroy(){this._enabled=!1,this.coordinator?.disconnect(this)}update(){return this}}const EH=Uint8Array.of(65,82,82,79,87,49),ZP={V1:0,V4:3,V5:4},Ig={NONE:0,Schema:1,DictionaryBatch:2,RecordBatch:3,Tensor:4,SparseTensor:5},Nt={Dictionary:-1,NONE:0,Null:1,Int:2,Float:3,Binary:4,Utf8:5,Bool:6,Decimal:7,Date:8,Time:9,Timestamp:10,Interval:11,List:12,Struct:13,Union:14,FixedSizeBinary:15,FixedSizeList:16,Map:17,Duration:18,LargeBinary:19,LargeUtf8:20,LargeList:21,RunEndEncoded:22,BinaryView:23,Utf8View:24,ListView:25,LargeListView:26},TH={HALF:0,SINGLE:1,DOUBLE:2},hT={DAY:0,MILLISECOND:1},yc={SECOND:0,MILLISECOND:1,MICROSECOND:2,NANOSECOND:3},cw={YEAR_MONTH:0,DAY_TIME:1,MONTH_DAY_NANO:2},u$={Sparse:0,Dense:1},Bme=Uint8Array,PH=Uint16Array,Nme=Uint32Array,DH=BigUint64Array,IH=Int8Array,zme=Int16Array,Fd=Int32Array,Sm=BigInt64Array,Qme=Float32Array,XP=Float64Array;function jme(t){return t instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&t instanceof SharedArrayBuffer}function Ume(t,e){const n=Math.log2(t)-3;return(e?[IH,zme,Fd,Sm]:[Bme,PH,Nme,DH])[n]}function c$(t,e){let n=0,r=t.length;if(r<=2147483648)do{const i=n+r>>>1;t[i]<=e?n=i+1:r=i}while(n<r);else do{const i=Math.trunc((n+r)/2);t[i]<=e?n=i+1:r=i}while(n<r);return n}function h$(t,e,n){if(e(t))return t;throw new Error(n(t))}function km(t,e,n){return e=Array.isArray(e)?e:Object.values(e),h$(t,r=>e.includes(r),n??(()=>`${t} must be one of ${e}`))}function MH(t,e){for(const[n,r]of Object.entries(t))if(r===e)return n;return"<Unknown>"}const f$=t=>`Unsupported data type: "${MH(Nt,t)}" (id ${t})`,RH=(t,e,n=!0,r=null)=>({name:t,type:e,nullable:n,metadata:r});function FH(t){return Object.hasOwn(t,"name")&&LH(t.type)}function LH(t){return typeof t?.typeId=="number"}function t1(t,e="",n=!0){return FH(t)?t:RH(e,h$(t,LH,()=>"Data type expected."),n)}const Vme=(t,e,n=!1,r=-1)=>({typeId:Nt.Dictionary,id:r,dictionary:t,indices:e||BH(),ordered:n}),$H=(t=32,e=!0)=>({typeId:Nt.Int,bitWidth:km(t,[8,16,32,64]),signed:e,values:Ume(t,e)}),BH=()=>$H(32),qme=(t=2)=>({typeId:Nt.Float,precision:km(t,TH),values:[PH,Qme,XP][t]}),Zme=()=>({typeId:Nt.Binary,offsets:Fd}),Xme=()=>({typeId:Nt.Utf8,offsets:Fd}),Wme=(t,e,n=128)=>({typeId:Nt.Decimal,precision:t,scale:e,bitWidth:km(n,[32,64,128,256]),values:n===32?Fd:DH}),Gme=t=>({typeId:Nt.Date,unit:km(t,hT),values:t===hT.DAY?Fd:Sm}),Yme=(t=yc.MILLISECOND)=>{t=km(t,yc);const e=t===yc.SECOND||t===yc.MILLISECOND?32:64;return{typeId:Nt.Time,unit:t,bitWidth:e,values:e===32?Fd:Sm}},Hme=(t=yc.MILLISECOND,e=null)=>({typeId:Nt.Timestamp,unit:km(t,yc),timezone:e,values:Sm}),Kme=(t=cw.MONTH_DAY_NANO)=>({typeId:Nt.Interval,unit:km(t,cw),values:t===cw.MONTH_DAY_NANO?void 0:Fd}),Jme=t=>({typeId:Nt.List,children:[t1(t)],offsets:Fd}),ege=t=>({typeId:Nt.Struct,children:Array.isArray(t)&&FH(t[0])?t:Object.entries(t).map(([e,n])=>RH(e,n))}),tge=(t,e,n,r)=>(n??=e.map((i,s)=>s),{typeId:Nt.Union,mode:km(t,u$),typeIds:n,typeMap:n.reduce((i,s,o)=>(i[s]=o,i),{}),children:e.map((i,s)=>t1(i,`_${s}`)),typeIdForValue:r,offsets:Fd}),nge=t=>({typeId:Nt.FixedSizeBinary,stride:t}),rge=(t,e)=>({typeId:Nt.FixedSizeList,stride:e,children:[t1(t)]}),ige=(t,e)=>({typeId:Nt.Map,keysSorted:t,children:[e],offsets:Fd}),sge=(t=yc.MILLISECOND)=>({typeId:Nt.Duration,unit:km(t,yc),values:Sm}),oge=()=>({typeId:Nt.LargeBinary,offsets:Sm}),age=()=>({typeId:Nt.LargeUtf8,offsets:Sm}),lge=t=>({typeId:Nt.LargeList,children:[t1(t)],offsets:Sm}),uge=(t,e)=>({typeId:Nt.RunEndEncoded,children:[h$(t1(t,"run_ends"),n=>n.type.typeId===Nt.Int,()=>"Run-ends must have an integer type."),t1(e,"values")]}),cge=t=>({typeId:Nt.ListView,children:[t1(t,"value")],offsets:Fd}),hge=t=>({typeId:Nt.LargeListView,children:[t1(t,"value")],offsets:Sm}),fge=new XP(2),dge=fge.buffer;new Sm(dge);function n1(t){if(t>Number.MAX_SAFE_INTEGER||t<Number.MIN_SAFE_INTEGER)throw Error(`BigInt exceeds integer number representation: ${t}`);return Number(t)}function d$(t,e){return Number(t/e)+Number(t%e)/Number(e)}const Xx=t=>BigInt.asUintN(64,t);function pge(t,e){return BigInt.asIntN(64,t[e])}function mge(t,e){const n=e<<1;let r;return BigInt.asIntN(64,t[n+1])<0?(r=Xx(~t[n])|Xx(~t[n+1])<<64n,r=-(r+1n)):r=t[n]|t[n+1]<<64n,r}function gge(t,e){const n=e<<2;let r;return BigInt.asIntN(64,t[n+3])<0?(r=Xx(~t[n])|Xx(~t[n+1])<<64n|Xx(~t[n+2])<<128n|Xx(~t[n+3])<<192n,r=-(r+1n)):r=t[n]|t[n+1]<<64n|t[n+2]<<128n|t[n+3]<<192n,r}const yge=new TextDecoder("utf-8");new TextEncoder;function WP(t){return yge.decode(t)}const sk=4;function NH(t,e){return(t[e>>3]&1<<e%8)!==0}function m0(t,e){const n=e+Io(t,e),r=n-Io(t,n),i=ef(t,r);return(s,o,a=null)=>{if(s<i){const l=ef(t,r+s);if(l)return o(t,n+l)}return a}}function Wv(t,e){return e}function ok(t,e){return!!vge(t,e)}function vge(t,e){return p$(t,e)<<24>>24}function p$(t,e){return t[e]}function ef(t,e){return bge(t,e)<<16>>16}function bge(t,e){return t[e]|t[e+1]<<8}function Io(t,e){return t[e]|t[e+1]<<8|t[e+2]<<16|t[e+3]<<24}function uj(t,e){return Io(t,e)>>>0}function rf(t,e){return n1(BigInt.asIntN(64,BigInt(uj(t,e))+(BigInt(uj(t,e+sk))<<32n)))}function fT(t,e){let n=e+Io(t,e);const r=Io(t,n);return n+=sk,WP(t.subarray(n,n+r))}function Uy(t,e,n,r){if(!e)return[];const i=e+Io(t,e);return Array.from({length:Io(t,i)},(s,o)=>r(t,i+sk+o*n))}const eM=Symbol("rowIndex");function U7(t,e){class n{constructor(s){this[eM]=s}toJSON(){return QH(t,e,this[eM])}}const r=n.prototype;for(let i=0;i<t.length;++i){if(Object.hasOwn(r,t[i]))continue;const s=e[i];Object.defineProperty(r,t[i],{get(){return s.at(this[eM])},enumerable:!0})}return i=>new n(i)}function zH(t,e){return n=>QH(t,e,n)}function QH(t,e,n){const r={};for(let i=0;i<t.length;++i)r[t[i]]=e[i].at(n);return r}function _ge(t){return t instanceof s3}class GP{static ArrayType=null;constructor({length:e,nullCount:n,type:r,validity:i,values:s,offsets:o,sizes:a,children:l}){this.length=e,this.nullCount=n,this.type=r,this.validity=i,this.values=s,this.offsets=o,this.sizes=a,this.children=l,(!n||!this.validity)&&(this.at=h=>this.value(h))}get[Symbol.toStringTag](){return"Batch"}at(e){return this.isValid(e)?this.value(e):null}isValid(e){return NH(this.validity,e)}value(e){return this.values[e]}slice(e,n){const r=n-e,i=Array(r);for(let s=0;s<r;++s)i[s]=this.at(e+s);return i}*[Symbol.iterator](){for(let e=0;e<this.length;++e)yield this.at(e)}}class s3 extends GP{constructor(e){super(e);const{length:n,values:r}=this;this.values=r.subarray(0,n)}slice(e,n){return this.nullCount?super.slice(e,n):this.values.subarray(e,n)}[Symbol.iterator](){return this.nullCount?super[Symbol.iterator]():this.values[Symbol.iterator]()}}class YP extends GP{static ArrayType=XP}class ua extends GP{static ArrayType=Array}class xge extends ua{value(e){return null}}class X2 extends YP{value(e){return n1(this.values[e])}}class wge extends YP{value(e){const n=this.values[e],r=(n&31744)>>10,i=(n&1023)/1024,s=(-1)**((n&32768)>>15);switch(r){case 31:return s*(i?Number.NaN:1/0);case 0:return s*(i?6103515625e-14*i:0)}return s*2**(r-15)*(1+i)}}class Oge extends ua{value(e){return NH(this.values,e)}}class Sge extends YP{constructor(e){super(e);const{scale:n}=this.type;this.scale=10**n}value(e){return this.values[e]/this.scale}}class jH extends GP{constructor(e){super(e);const{bitWidth:n,scale:r}=this.type;this.decimal=n===64?pge:n===128?mge:gge,this.scale=10n**BigInt(r)}}class kge extends jH{static ArrayType=XP;value(e){return d$(this.decimal(this.values,e),this.scale)}}class Cge extends jH{static ArrayType=Array;value(e){return this.decimal(this.values,e)}}class cj extends ua{constructor(e){super(e),this.source=e}value(e){return new Date(this.source.value(e))}}class Age extends YP{value(e){return 864e5*this.values[e]}}const Ege=X2;class Tge extends X2{value(e){return super.value(e)*1e3}}const Pge=X2;class Dge extends X2{value(e){return d$(this.values[e],1000n)}}class Ige extends X2{value(e){return d$(this.values[e],1000000n)}}class Mge extends ua{value(e){return this.values.subarray(e<<1,e+1<<1)}}class Rge extends ua{value(e){const n=this.values,r=e<<4;return Float64Array.of(Io(n,r),Io(n,r+4),rf(n,r+8))}}const UH=({values:t,offsets:e},n)=>t.subarray(e[n],e[n+1]),VH=({values:t,offsets:e},n)=>t.subarray(n1(e[n]),n1(e[n+1]));class Fge extends ua{value(e){return UH(this,e)}}class Lge extends ua{value(e){return VH(this,e)}}class $ge extends ua{value(e){return WP(UH(this,e))}}class Bge extends ua{value(e){return WP(VH(this,e))}}class Nge extends ua{value(e){const n=this.offsets;return this.children[0].slice(n[e],n[e+1])}}class zge extends ua{value(e){const n=this.offsets;return this.children[0].slice(n1(n[e]),n1(n[e+1]))}}class Qge extends ua{value(e){const n=this.offsets[e],r=n+this.sizes[e];return this.children[0].slice(n,r)}}class jge extends ua{value(e){const n=this.offsets[e],r=n+this.sizes[e];return this.children[0].slice(n1(n),n1(r))}}class qH extends ua{constructor(e){super(e),this.stride=this.type.stride}}class Uge extends qH{value(e){const{stride:n,values:r}=this;return r.subarray(e*n,(e+1)*n)}}class Vge extends qH{value(e){const{children:n,stride:r}=this;return n[0].slice(e*r,(e+1)*r)}}function ZH({children:t,offsets:e},n){const[r,i]=t[0].children,s=e[n],o=e[n+1],a=[];for(let l=s;l<o;++l)a.push([r.at(l),i.at(l)]);return a}class qge extends ua{value(e){return ZH(this,e)}}class Zge extends ua{value(e){return new Map(ZH(this,e))}}class XH extends ua{constructor({typeIds:e,...n}){super(n),this.typeIds=e,this.typeMap=this.type.typeMap}value(e,n=e){const{typeIds:r,children:i,typeMap:s}=this;return i[s[r[e]]].at(n)}}class Xge extends XH{value(e){return super.value(e,this.offsets[e])}}class WH extends ua{constructor(e,n=zH){super(e),this.names=this.type.children.map(r=>r.name),this.factory=n(this.names,this.children)}value(e){return this.factory(e)}}class Wge extends WH{constructor(e){super(e,U7)}}class Gge extends ua{value(e){const[{values:n},r]=this.children;return r.at(c$(n,e))}}let Yge=class extends ua{setDictionary(e){return this.dictionary=e,this.cache=e.cache(),this}value(e){return this.cache[this.key(e)]}key(e){return this.values[e]}};class GH extends ua{constructor({data:e,...n}){super(n),this.data=e}view(e){const{values:n,data:r}=this,i=e<<4;let s=i+4,o=n;const a=Io(o,i);return a>12&&(s=Io(o,i+12),o=r[Io(o,i+8)]),o.subarray(s,s+a)}}class Hge extends GH{value(e){return this.view(e)}}class Kge extends GH{value(e){return WP(this.view(e))}}function hj(t){let e=[];return{add(n){return e.push(n),this},clear:()=>e=[],done:()=>new Jge(e,t)}}class Jge{constructor(e,n=e[0]?.type){this.type=n,this.length=e.reduce((s,o)=>s+o.length,0),this.nullCount=e.reduce((s,o)=>s+o.nullCount,0),this.data=e;const r=e.length,i=new Int32Array(r+1);if(r===1){const[s]=e;i[1]=s.length,this.at=o=>s.at(o)}else for(let s=0,o=0;s<r;++s)i[s+1]=o+=e[s].length;this.offsets=i}get[Symbol.toStringTag](){return"Column"}[Symbol.iterator](){const e=this.data;return e.length===1?e[0][Symbol.iterator]():e0e(e)}at(e){const{data:n,offsets:r}=this,i=c$(r,e)-1;return n[i]?.at(e-r[i])}get(e){return this.at(e)}toArray(){const{length:e,nullCount:n,data:r}=this,i=!n&&_ge(r[0]),s=r.length;if(i&&s===1)return r[0].values;const o=!s||n>0?Array:r[0].constructor.ArrayType??r[0].values.constructor,a=new o(e);return i?t0e(a,r):n0e(a,r)}cache(){return this._cache??(this._cache=this.toArray())}}function*e0e(t){for(let e=0;e<t.length;++e){const n=t[e][Symbol.iterator]();for(let r=n.next();!r.done;r=n.next())yield r.value}}function t0e(t,e){for(let n=0,r=0;n<e.length;++n){const{values:i}=e[n];t.set(i,r),r+=i.length}return t}function n0e(t,e){let n=-1;for(let r=0;r<e.length;++r){const i=e[r];for(let s=0;s<i.length;++s)t[++n]=i.at(s)}return t}let r0e=class YH{constructor(e,n,r=!1){const i=e.fields.map(o=>o.name);this.schema=e,this.names=i,this.children=n,this.factory=r?U7:zH;const s=[];this.getFactory=o=>s[o]??(s[o]=this.factory(i,n.map(a=>a.data[o])))}get[Symbol.toStringTag](){return"Table"}get numCols(){return this.names.length}get numRows(){return this.children[0]?.length??0}getChildAt(e){return this.children[e]}getChild(e){const n=this.names.findIndex(r=>r===e);return n>-1?this.children[n]:void 0}selectAt(e,n=[]){const{children:r,factory:i,schema:s}=this,{fields:o}=s;return new YH({...s,fields:e.map((a,l)=>i0e(o[a],n[l]))},e.map(a=>r[a]),i===U7)}select(e,n){const r=this.names,i=e.map(s=>r.indexOf(s));return this.selectAt(i,n)}toColumns(){const{children:e,names:n}=this,r={};return n.forEach((i,s)=>r[i]=e[s]?.toArray()??[]),r}toArray(){const{children:e,getFactory:n,numRows:r}=this,i=e[0]?.data??[],s=Array(r);for(let o=0,a=-1;o<i.length;++o){const l=n(o);for(let h=0;h<i[o].length;++h)s[++a]=l(h)}return s}*[Symbol.iterator](){const{children:e,getFactory:n}=this,r=e[0]?.data??[];for(let i=0;i<r.length;++i){const s=n(i);for(let o=0;o<r[i].length;++o)yield s(o)}}at(e){const{children:n,getFactory:r,numRows:i}=this;if(e<0||e>=i)return null;const[{offsets:s}]=n,o=c$(s,e)-1;return r(o)(e-s[o])}get(e){return this.at(e)}};function i0e(t,e){return e!=null&&e!==t.name?{...t,name:e}:t}function s0e(t,e={}){const{typeId:n,bitWidth:r,mode:i,precision:s,unit:o}=t,{useBigInt:a,useDate:l,useDecimalInt:h,useMap:f,useProxy:p}=e;switch(n){case Nt.Null:return xge;case Nt.Bool:return Oge;case Nt.Int:case Nt.Time:case Nt.Duration:return a||r<64?s3:X2;case Nt.Float:return s?s3:wge;case Nt.Date:return fj(o===hT.DAY?Age:Ege,l&&cj);case Nt.Timestamp:return fj(o===yc.SECOND?Tge:o===yc.MILLISECOND?Pge:o===yc.MICROSECOND?Dge:Ige,l&&cj);case Nt.Decimal:return r===32?h?s3:Sge:h?Cge:kge;case Nt.Interval:return o===cw.DAY_TIME?Mge:o===cw.YEAR_MONTH?s3:Rge;case Nt.FixedSizeBinary:return Uge;case Nt.Utf8:return $ge;case Nt.LargeUtf8:return Bge;case Nt.Binary:return Fge;case Nt.LargeBinary:return Lge;case Nt.BinaryView:return Hge;case Nt.Utf8View:return Kge;case Nt.List:return Nge;case Nt.LargeList:return zge;case Nt.Map:return f?Zge:qge;case Nt.ListView:return Qge;case Nt.LargeListView:return jge;case Nt.FixedSizeList:return Vge;case Nt.Struct:return p?Wge:WH;case Nt.RunEndEncoded:return Gge;case Nt.Dictionary:return Yge;case Nt.Union:return i?Xge:XH}throw new Error(f$(n))}function fj(t,e){return e?class extends e{constructor(r){super(new t(r))}}:t}function o0e(t,e){return{offset:rf(t,e),metadataLength:Io(t,e+8),bodyLength:rf(t,e+16)}}function dj(t,e){return Uy(t,e,24,o0e)}function HH(t,e,n){const r=m0(t,e);if(r(10,Wv,0))throw new Error("Record batch compression not implemented");const i=n<ZP.V4?8:0;return{length:r(4,rf,0),nodes:Uy(t,r(6,Wv),16,(s,o)=>({length:rf(s,o),nullCount:rf(s,o+8)})),regions:Uy(t,r(8,Wv),16+i,(s,o)=>({offset:rf(s,o+i),length:rf(s,o+i+8)})),variadic:Uy(t,r(12,Wv),8,rf)}}function a0e(t,e,n){const r=m0(t,e);return{id:r(4,rf,0),data:r(6,(i,s)=>HH(i,s,n)),isDelta:r(8,ok,!1)}}function KH(t,e,n,r){km(n,Nt,f$);const i=m0(t,e);switch(n){case Nt.Binary:return Zme();case Nt.Utf8:return Xme();case Nt.LargeBinary:return oge();case Nt.LargeUtf8:return age();case Nt.List:return Jme(r[0]);case Nt.ListView:return cge(r[0]);case Nt.LargeList:return lge(r[0]);case Nt.LargeListView:return hge(r[0]);case Nt.Struct:return ege(r);case Nt.RunEndEncoded:return uge(r[0],r[1]);case Nt.Int:return $H(i(4,Io,0),i(6,ok,!1));case Nt.Float:return qme(i(4,ef,TH.HALF));case Nt.Decimal:return Wme(i(4,Io,0),i(6,Io,0),i(8,Io,128));case Nt.Date:return Gme(i(4,ef,hT.MILLISECOND));case Nt.Time:return Yme(i(4,ef,yc.MILLISECOND));case Nt.Timestamp:return Hme(i(4,ef,yc.SECOND),i(6,fT));case Nt.Interval:return Kme(i(4,ef,cw.YEAR_MONTH));case Nt.Duration:return sge(i(4,ef,yc.MILLISECOND));case Nt.FixedSizeBinary:return nge(i(4,Io,0));case Nt.FixedSizeList:return rge(r[0],i(4,Io,0));case Nt.Map:return ige(i(4,ok,!1),r[0]);case Nt.Union:return tge(i(4,ef,u$.Sparse),r,Uy(t,i(6,Wv),4,Io))}return{typeId:n}}function m$(t,e){const n=Uy(t,e,4,(r,i)=>{const s=m0(r,i);return[s(4,fT),s(6,fT)]});return n.length?new Map(n):null}function JH(t,e,n){const r=m0(t,e);return{version:n,endianness:r(4,ef,0),fields:r(6,l0e,[]),metadata:r(8,m$)}}function l0e(t,e){return Uy(t,e,4,eK)}function eK(t,e){const n=m0(t,e),r=n(8,p$,Nt.NONE),i=n(10,Wv,0),s=n(12,c0e),o=n(14,(l,h)=>u0e(l,h));let a=KH(t,i,r,o);return s&&(s.dictionary=a,a=s),{name:n(4,fT),type:a,nullable:n(6,ok,!1),metadata:n(16,m$)}}function u0e(t,e){const n=Uy(t,e,4,eK);return n.length?n:null}function c0e(t,e){if(!e)return null;const n=m0(t,e);return Vme(null,n(6,h0e,BH()),n(8,ok,!1),n(4,rf,0))}function h0e(t,e){return KH(t,e,Nt.Int)}const f0e=(t,e)=>`Expected to read ${t} metadata bytes, but only read ${e}.`,d0e=(t,e)=>`Expected to read ${t} bytes for message body, but only read ${e}.`,p0e=t=>`Unsupported message type: ${t} (${MH(Ig,t)})`;function V7(t,e){let n=Io(t,e)||0;if(e+=sk,n===-1&&(n=Io(t,e)||0,e+=sk),n===0)return null;const r=t.subarray(e,e+=n);if(r.byteLength<n)throw new Error(f0e(n,r.byteLength));const i=m0(r,0),s=i(4,ef,ZP.V1),o=i(6,p$,Ig.NONE),a=i(8,Wv,0),l=i(10,rf,0);let h;if(a){const f=o===Ig.Schema?JH:o===Ig.DictionaryBatch?a0e:o===Ig.RecordBatch?HH:null;if(!f)throw new Error(p0e(o));if(h=f(r,a,s),l>0){const p=t.subarray(e,e+=l);if(p.byteLength<l)throw new Error(d0e(l,p.byteLength));h.body=p}else o!==Ig.Schema&&(h.body=new Uint8Array(0))}return{version:s,type:o,index:e,content:h}}function m0e(t){const e=jme(t)?new Uint8Array(t):t;return e instanceof Uint8Array&&g0e(e)?v0e(e):y0e(e)}function g0e(t){if(!t||t.length<4)return!1;for(let e=0;e<6;++e)if(EH[e]!==t[e])return!1;return!0}function y0e(t){const e=[t].flat();let n;const r=[],i=[];for(const s of e){if(!(s instanceof Uint8Array))throw new Error("IPC data batch was not a Uint8Array.");let o=0;for(;;){const a=V7(s,o);if(a===null)break;if(o=a.index,!!a.content)switch(a.type){case Ig.Schema:n||(n=a.content);break;case Ig.RecordBatch:r.push(a.content);break;case Ig.DictionaryBatch:i.push(a.content);break}}}return{schema:n,dictionaries:i,records:r,metadata:null}}function v0e(t){const e=t.byteLength-(EH.length+4),n=Io(t,e),r=m0(t,e-n),i=r(4,ef,ZP.V1),s=r(8,dj,[]),o=r(10,dj,[]);return{schema:r(6,(a,l)=>JH(a,l,i)),dictionaries:s.map(({offset:a})=>V7(t,a).content),records:o.map(({offset:a})=>V7(t,a).content),metadata:r(12,m$)}}function b0e(t,e){return _0e(m0e(t),e)}function _0e(t,e={}){const{schema:n={fields:[]},dictionaries:r,records:i}=t,{version:s,fields:o}=n,a=new Map,l=w0e(e,s,a),h=new Map;x0e(n,g=>{const b=g.type;b.typeId===Nt.Dictionary&&h.set(b.id,b.dictionary)});const f=new Map;for(const g of r){const{id:b,data:x,isDelta:k,body:T}=g,I=h.get(b),M=q7(I,l({...x,body:T}));if(f.has(b)){const B=f.get(b);k||B.clear(),B.add(M)}else{if(k)throw new Error("Delta update can not be first dictionary batch.");f.set(b,hj(I).add(M))}}f.forEach((g,b)=>a.set(b,g.done()));const p=o.map(g=>hj(g.type));for(const g of i){const b=l(g);o.forEach((x,k)=>p[k].add(q7(x.type,b)))}return new r0e(n,p.map(g=>g.done()),e.useProxy)}function x0e(t,e){t.fields.forEach(function n(r){e(r),r.type.dictionary?.children?.forEach(n),r.type.children?.forEach(n)})}function w0e(t,e,n){const r={version:e,options:t,dictionary:i=>n.get(i)};return i=>{const{length:s,nodes:o,regions:a,variadic:l,body:h}=i;let f=-1,p=-1,g=-1;return{...r,length:s,node:()=>o[++f],buffer:b=>{const{length:x,offset:k}=a[++p];return b?new b(h.buffer,h.byteOffset+k,x/b.BYTES_PER_ELEMENT):h.subarray(k,k+x)},variadic:()=>l[++g],visit(b){return b.map(x=>q7(x.type,this))}}}}function q7(t,e){const{typeId:n}=t,{options:r,node:i,buffer:s,variadic:o,version:a}=e,l=s0e(t,r),h={...i(),type:t};if(n===Nt.Null)return new l({...h,nullCount:h.length});switch(n){case Nt.Bool:case Nt.Int:case Nt.Time:case Nt.Duration:case Nt.Float:case Nt.Decimal:case Nt.Date:case Nt.Timestamp:case Nt.Interval:case Nt.FixedSizeBinary:return new l({...h,validity:s(),values:s(t.values)});case Nt.Utf8:case Nt.LargeUtf8:case Nt.Binary:case Nt.LargeBinary:return new l({...h,validity:s(),offsets:s(t.offsets),values:s()});case Nt.BinaryView:case Nt.Utf8View:return new l({...h,validity:s(),values:s(),data:Array.from({length:o()},()=>s())});case Nt.List:case Nt.LargeList:case Nt.Map:return new l({...h,validity:s(),offsets:s(t.offsets),children:e.visit(t.children)});case Nt.ListView:case Nt.LargeListView:return new l({...h,validity:s(),offsets:s(t.offsets),sizes:s(t.offsets),children:e.visit(t.children)});case Nt.FixedSizeList:case Nt.Struct:return new l({...h,validity:s(),children:e.visit(t.children)});case Nt.RunEndEncoded:return new l({...h,children:e.visit(t.children)});case Nt.Dictionary:{const{id:f,indices:p}=t;return new l({...h,validity:s(),values:s(p.values)}).setDictionary(e.dictionary(f))}case Nt.Union:return a<ZP.V5&&s(),new l({...h,typeIds:s(IH),offsets:t.mode===u$.Sparse?null:s(t.offsets),children:e.visit(t.children)});default:throw new Error(f$(n))}}new Uint16Array(new Uint8Array([1,0]).buffer)[0];function dT(t,e={useDate:!0}){return b0e(t,e)}function O0e(t){return new tK(t)}class tK{_uri;_queue;_connected;_request;_ws;_events;constructor({uri:e="ws://localhost:3000/",ipc:n=void 0}={}){this._uri=e,this._queue=[],this._connected=!1,this._request=null,this._ws=null;const r=this;this._events={open(){r._connected=!0,r.next()},close(){for(r._connected=!1,r._request=null,r._ws=null;r._queue.length;)r._queue.shift().reject("Socket closed")},error(i){if(r._request){const{reject:s}=r._request;r._request=null,r.next(),s(i)}else console.error("WebSocket error: ",i)},message(i){const{data:s}=i;if(r._request){const{query:o,resolve:a,reject:l}=r._request;if(r._request=null,r.next(),typeof s=="string"){const h=JSON.parse(s);h.error?l(h.error):a(h)}else if(o.type==="exec")a();else if(o.type==="arrow")a(dT(s,n));else throw new Error(`Unexpected socket data: ${s}`)}else console.log("WebSocket message: ",s)}}}get connected(){return this._connected}init(){this._ws=new WebSocket(this._uri),this._ws.binaryType="arraybuffer";for(const e in this._events)this._ws.addEventListener(e,this._events[e])}enqueue(e,n,r){this._ws==null&&this.init(),this._queue.push({query:e,resolve:n,reject:r}),this._connected&&!this._request&&this.next()}next(){this._queue.length&&(this._request=this._queue.shift(),this._ws.send(JSON.stringify(this._request.query)))}query(e){return new Promise((n,r)=>this.enqueue(e,n,r))}}function Cd(t){return t instanceof Cm}let nK;function S0e(t){nK=t}class Cm{type;constructor(e){this.type=e}clone(){const e=new this.constructor(this.type);for(const n in this)n!=="type"&&(e[n]=this[n]);return e}toString(e=nK){if(!e)throw new Error("No visitor provided and no default visitor set.");return e.toString(this)}}class ca extends Cm{}function rK(t){return t.split(".")}function Av(t){return`"${t.replaceAll('"','""')}"`}function tM(t){return t&&k0e(t)?t.slice(1,-1):t}function k0e(t){return t[0]==='"'&&t[t.length-1]==='"'}const HP="COLUMN_REF",KP="COLUMN_PARAM",iK="TABLE_REF",sK="LITERAL",C0e="INTERVAL",oK="LIST",aK="UNNEST",g$="ORDER_BY",y$="CAST",v$="CASE",b$="WHEN",lK="COLLATE",_$="UNARY",x$="UNARY_POSTFIX",w$="BINARY",O$="BETWEEN",uK="NOT_BETWEEN",S$="LOGICAL_OPERATOR",k$="IN",C$="FUNCTION",wC="AGGREGATE",JP="WINDOW",A$="WINDOW_FUNCTION",E$="WINDOW_DEF",cK="WINDOW_FRAME",T$="WINDOW_EXTENT_EXPR",hK="EXPRESSION",eD="FRAGMENT",P$="VERBATIM",D$="PARAM",I$="WITH_CLAUSE",M$="WINDOW_CLAUSE",R$="SELECT_CLAUSE",F$="FROM_CLAUSE",fK="JOIN_CLAUSE",dK="SAMPLE_CLAUSE",L$="SELECT_QUERY",$$="DESCRIBE_QUERY",B$="SET_OPERATION",pK="SCALAR_SUBQUERY";class mK extends ca{value;constructor(e){super(sK),this.value=e}}function pj(t){switch(typeof t){case"number":return Number.isFinite(t)?`${t}`:"NULL";case"string":return`'${t.replaceAll("'","''")}'`;case"boolean":return t?"TRUE":"FALSE";default:if(t==null)return"NULL";if(t instanceof Date){const e=+t;if(Number.isNaN(e))return"NULL";const n=t.getUTCFullYear(),r=t.getUTCMonth(),i=t.getUTCDate();return e===Date.UTC(n,r,i)?`DATE '${n}-${r+1}-${i}'`:`epoch_ms(${e})`}else return t instanceof RegExp?`'${t.source}'`:`${t}`}}class A0e{toString(e){if(!e)throw new Error("Node is null or undefined");if(typeof e.type!="string")throw new Error(`Node type is not a string: ${typeof e.type}, value: ${e.type}`);if(e.type==="CUSTOM")return e.toString(this);const n=this.getVisitMethod(e.type);if(typeof n=="function")return n.call(this,e);throw new Error(`No visitor method for node type: '${e.type}'`)}getVisitMethod(e){switch(e){case wC:return this.visitAggregate;case O$:return this.visitBetween;case w$:return this.visitBinary;case v$:return this.visitCase;case y$:return this.visitCast;case lK:return this.visitCollate;case KP:return this.visitColumnParam;case HP:return this.visitColumnRef;case $$:return this.visitDescribeQuery;case hK:return this.visitExpression;case eD:return this.visitFragment;case F$:return this.visitFromClause;case C$:return this.visitFunction;case k$:return this.visitIn;case C0e:return this.visitInterval;case fK:return this.visitJoinClause;case oK:return this.visitList;case sK:return this.visitLiteral;case S$:return this.visitLogicalOperator;case uK:return this.visitNotBetween;case g$:return this.visitOrderBy;case D$:return this.visitParam;case dK:return this.visitSampleClause;case pK:return this.visitScalarSubquery;case R$:return this.visitSelectClause;case L$:return this.visitSelectQuery;case B$:return this.visitSetOperation;case iK:return this.visitTableRef;case _$:return this.visitUnary;case x$:return this.visitUnaryPostfix;case aK:return this.visitUnnest;case P$:return this.visitVerbatim;case b$:return this.visitWhen;case JP:return this.visitWindow;case M$:return this.visitWindowClause;case E$:return this.visitWindowDef;case T$:return this.visitWindowExtentExpr;case cK:return this.visitWindowFrame;case A$:return this.visitWindowFunction;case I$:return this.visitWithClause;default:throw new Error(`Unknown node type: '${e}'`)}}mapToString(e){return e.map(n=>this.toString(n))}}function r1(t){return typeof t=="string"}function Z7(t){return Array.isArray(t)}function N$(t){if(t){const e=t;return typeof e?.addEventListener=="function"&&e.dynamic!==!1&&"value"in e}return!1}class z$ extends ca{param;constructor(e){super(D$),this.param=e}get value(){return this.param.value}}const E0e="PRECEDING",T0e="FOLLOWING",gK="CURRENT ROW",yK="UNBOUNDED";class P0e extends A0e{visitAggregate(e){const{name:n,args:r,isDistinct:i,filter:s,order:o}=e,a=[i?"DISTINCT":"",r?.length?this.mapToString(r).join(", "):n.toLowerCase()==="count"?"*":"",o.length?`ORDER BY ${this.mapToString(o).join(", ")}`:""].filter(h=>h).join(" "),l=s?` FILTER (WHERE ${this.toString(s)})`:"";return`${n}(${a})${l}`}visitBetween(e){return mj(this,e,"BETWEEN")}visitBinary(e){const{left:n,right:r,op:i}=e;return`(${this.toString(n)} ${i} ${this.toString(r)})`}visitCase(e){const{expr:n,_when:r,_else:i}=e;return"CASE "+(n?`${this.toString(n)} `:"")+this.mapToString(r).join(" ")+(i?` ELSE ${this.toString(i)}`:"")+" END"}visitCast(e){const{expr:n,cast:r}=e;return`(${this.toString(n)})::${r}`}visitCollate(e){const{expr:n,collation:r}=e;return`${this.toString(n)} COLLATE ${r}`}visitColumnParam(e){return this.visitColumnRef(e)}visitColumnRef(e){const{column:n,table:r}=e,i=r?`${this.toString(r)}.`:"",s=n==="*"?"*":Av(n);return`${i}${s}`}visitDescribeQuery(e){const{query:n}=e;return`DESC ${this.toString(n)}`}visitExpression(e){throw new Error(`Unexpected EXPRESSION node type. Node: ${JSON.stringify(e)}`)}visitFragment(e){const{spans:n}=e;return n.map(r=>typeof r=="string"?r:this.toString(r)).join("")}visitFromClause(e){const{expr:n,alias:r,sample:i}=e,s=AK(n)?`(${this.toString(n)})`:`${this.toString(n)}`;return`${r&&!(pT(n)&&n.table?.join(".")===r)?`${s} AS ${Av(r)}`:`${s}`}${i?` TABLESAMPLE ${this.toString(i)}`:""}`}visitFunction(e){const{name:n,args:r}=e;return`${n}(${this.mapToString(r).join(", ")})`}visitIn(e){const{expr:n,values:r}=e;return`(${this.toString(n)} IN (${this.mapToString(r).join(", ")}))`}visitInterval(e){const{steps:n,name:r}=e;return`INTERVAL ${n} ${r}`}visitJoinClause(e){const{left:n,right:r,joinVariant:i,joinType:s,condition:o,using:a,sample:l}=e,h=i==="REGULAR"?"":`${i} `;let f="",p="";i!=="CROSS"&&(f=s!=="INNER"?`${s} `:"",p=o?` ON ${this.toString(o)}`:a?` USING (${this.mapToString(a).join(", ")})`:"");const g=l?` USING SAMPLE ${this.toString(l)}`:"";return`${this.toString(n)} ${h}${f}JOIN ${this.toString(r)}${p}${g}`}visitList(e){const{values:n}=e;return`[${this.mapToString(n).join(", ")}]`}visitLiteral(e){const{value:n}=e;return pj(n)}visitLogicalOperator(e){const{clauses:n,op:r}=e,i=this.mapToString(n);return i.length===0?"":i.length===1?`${i[0]}`:`(${i.join(` ${r} `)})`}visitNotBetween(e){return mj(this,e,"NOT BETWEEN")}visitOrderBy(e){const{expr:n,desc:r,nullsFirst:i}=e,s=r?" DESC":r===!1?" ASC":"",o=i?" NULLS FIRST":i===!1?" NULLS LAST":"";return`${this.toString(n)}${s}${o}`}visitParam(e){const{param:n}=e;return pj(n.value)}visitSampleClause(e){const{size:n,perc:r,method:i,seed:s}=e,o=i?`${i} `:"",a=s!=null?` REPEATABLE (${s})`:"";return`${o}(${n}${r?"%":" ROWS"})${a}`}visitScalarSubquery(e){return`(${this.toString(e.subquery)})`}visitSelectClause(e){const{expr:n,alias:r}=e;return!r||D0e(n,r)?this.toString(n):`${this.toString(n)} AS ${Av(r)}`}visitSelectQuery(e){const{_with:n,_select:r,_distinct:i,_from:s,_sample:o,_where:a,_groupby:l,_having:h,_window:f,_qualify:p,_orderby:g,_limitPerc:b,_limit:x,_offset:k}=e,T=[];if(n.length&&T.push(`WITH ${this.mapToString(n).join(", ")}`),T.push(`SELECT${i?" DISTINCT":""} ${this.mapToString(r).join(", ")}`),s.length&&T.push(`FROM ${this.mapToString(s).join(", ")}`),o&&T.push(`USING SAMPLE ${this.toString(o)}`),a.length){const I=this.mapToString(a).filter(M=>M).join(" AND ");I&&T.push(`WHERE ${I}`)}if(l.length&&T.push(`GROUP BY ${this.mapToString(l).join(", ")}`),h.length){const I=this.mapToString(h).filter(M=>M).join(" AND ");I&&T.push(`HAVING ${I}`)}if(f.length&&T.push(`WINDOW ${this.mapToString(f).join(", ")}`),p.length){const I=this.mapToString(p).filter(M=>M).join(" AND ");I&&T.push(`QUALIFY ${I}`)}return g.length&&T.push(`ORDER BY ${this.mapToString(g).join(", ")}`),x&&T.push(`LIMIT ${this.toString(x)}${b?"%":""}`),k!=null&&T.push(`OFFSET ${this.toString(k)}`),T.join(" ")}visitSetOperation(e){const{op:n,queries:r,_with:i,_orderby:s,_limitPerc:o,_limit:a,_offset:l}=e,h=[];return i.length&&h.push(`WITH ${this.mapToString(i).join(", ")}`),h.push(r.join(` ${n} `)),s.length&&h.push(`ORDER BY ${this.mapToString(s).join(", ")}`),a&&h.push(`LIMIT ${this.toString(a)}${o?"%":""}`),l&&h.push(`OFFSET ${this.toString(l)}`),h.join(" ")}visitTableRef(e){const{table:n}=e;return n.map(r=>Av(r)).join(".")}visitUnary(e){const{expr:n,op:r}=e;return`(${r} ${this.toString(n)})`}visitUnaryPostfix(e){const{expr:n,op:r}=e;return`(${this.toString(n)} ${r})`}visitUnnest(e){const{expr:n,recursive:r,maxDepth:i}=e,s=[this.toString(n)];return r&&s.push("recursive := true"),i!=null&&i>0&&s.push(`max_depth := ${i}`),`UNNEST(${s.join(", ")})`}visitVerbatim(e){const{value:n}=e;return n}visitWhen(e){const{when:n,then:r}=e;return`WHEN ${this.toString(n)} THEN ${this.toString(r)}`}visitWindow(e){const{func:n,def:r}=e;return`${this.toString(n)} OVER ${this.toString(r)}`}visitWindowClause(e){const{name:n,def:r}=e;return`${Av(n)} AS ${this.toString(r)}`}visitWindowDef(e){const{name:n,partition:r,order:i,framedef:s}=e,o=n&&Av(n),a=[o,r?.length&&`PARTITION BY ${this.mapToString(r).join(", ")}`,i?.length&&`ORDER BY ${this.mapToString(i).join(", ")}`,s&&this.toString(s)].filter(l=>l);return o&&a.length<2?o:`(${a.join(" ")})`}visitWindowExtentExpr(e){const{scope:n,expr:r}=e;return n===gK?n:`${Cd(r)?this.toString(r):r??yK} ${n}`}visitWindowFrame(e){const{frameType:n,exclude:r,extent:i}=e,[s,o]=Cd(i)?i.value:i,a=gj(this,s,E0e),l=gj(this,o,T0e);return`${n} BETWEEN ${a} AND ${l}${r?` ${r}`:""}`}visitWindowFunction(e){const{name:n,args:r,ignoreNulls:i,order:s}=e,o=[this.mapToString(r).join(", "),s.length?`ORDER BY ${this.mapToString(s).join(", ")}`:"",i?"IGNORE NULLS":""].filter(a=>a).join(" ");return`${n}(${o})`}visitWithClause(e){const{name:n,query:r,materialized:i}=e,s=i===!0?"MATERIALIZED ":i===!1?"NOT MATERIALIZED ":"";return`${Av(n)} AS ${s}(${this.toString(r)})`}}function D0e(t,e){return t instanceof nD&&t.table==null&&t.column===e}function mj(t,e,n){const{extent:r,expr:i}=e;if(!r)return"";const[s,o]=t.mapToString(r);return`(${t.toString(i)} ${n} ${s} AND ${o})`}function gj(t,e,n){const r=Cd(e)?t.toString(e):e;return Cd(e)&&e.type===T$?r:r!=null&&typeof r!="number"?`${r} ${n}`:r===0?gK:r&&Number.isFinite(r)?`${Math.abs(r)} ${n}`:`${yK} ${n}`}const I0e=new P0e;S0e(I0e);class M0e extends ca{name;args;constructor(e,n=[]){super(C$),this.name=e,this.args=n}}function Sh(t,...e){return new M0e(t,tD(e).map(cs))}function wl(t,...e){return new R3(t,tD(e).map(cs))}function R0e(t,...e){return new Gv(new L0e(t,tD(e).map(cs)))}function I3(t,e){return t.flat().filter(n=>n!=null).map(n=>e(n))}function i1(t){return I3(t,cs)}function tD(t){const e=t.length;let n=e;for(;n>0&&t[n-1]===void 0;--n);return n<e?t.slice(0,n):t}class F0e extends Cm{name;def;constructor(e,n){super(M$),this.name=e,this.def=n}}class Gv extends ca{func;def;constructor(e,n=new vK){super(JP),this.func=e,this.def=n}over(e){return new Gv(this.func,this.def.over(e))}partitionby(...e){return new Gv(this.func,this.def.partitionby(...e))}orderby(...e){return new Gv(this.func,this.def.orderby(...e))}frame(e){return new Gv(this.func,this.def.frame(e))}}class L0e extends ca{name;args;ignoreNulls;order;constructor(e,n=[],r=!1,i=[]){super(A$),this.name=e,this.args=n,this.ignoreNulls=r,this.order=i1([i])}}class vK extends Cm{name;partition;order;framedef;constructor(e,n,r,i){super(E$),this.name=e,this.partition=n,this.order=r,this.framedef=i}over(e){return LE(this,{name:e})}partitionby(...e){return LE(this,{partition:i1(e)})}orderby(...e){return LE(this,{order:i1(e)})}frame(e){return LE(this,{framedef:e})}}function LE(t,e){return new vK(e.name??t.name,e.partition??t.partition,e.order??t.order,e.framedef??t.framedef)}function Q$(t){return t instanceof nD}class nD extends ca{table;constructor(e,n){super(e),this.table=n}get column(){return""}}class bK extends nD{name;constructor(e,n){super(HP,n),this.name=e}get column(){return this.name}}class $0e extends nD{param;constructor(e,n){super(KP,n),this.param=e}get column(){return`${this.param.value}`}}function It(t,e){const n=xK(e);return N$(t)?new $0e(new z$(t),n):new bK(t,n)}class _K extends ca{value;hint;constructor(e,n){super(P$),this.value=e,this.hint=n}}function kn(t){return new mK(t)}function B0e(t,e){return new _K(t,e)}function pT(t){return t instanceof j$}class j$ extends ca{table;constructor(e){super(iK),this.table=[e].flat()}get name(){return this.table[this.table.length-1]}}function U$(...t){const e=I3(t,String);return e?.length?new j$(e):void 0}function cs(t){return r1(t)?z0e(t):rD(t)}function M3(t){return r1(t)?B0e(t):rD(t)}function rD(t){return t instanceof ca?t:N$(t)?new z$(t):kn(t)}function xK(t){return wK(t)}function N0e(t){return wK(t)}function wK(t){return r1(t)?Q0e(t):Z7(t)?U$(t):t}function z0e(t){const e=rK(t);return It(e.pop(),U$(e))}function Q0e(t){return U$(rK(t))}class R3 extends ca{name;args;isDistinct;filter;order;constructor(e,n,r=!1,i=null,s=[]){super(wC),this.name=e,this.args=n,this.isDistinct=r,this.filter=i,this.order=i1([s])}distinct(e=!0){return new R3(this.name,this.args,e,this.filter,this.order)}where(e){return r1(e)&&(e=M3(e)),new R3(this.name,this.args,this.isDistinct,e,this.order)}argOrder(e){return new R3(this.name,this.args,this.isDistinct,this.filter,e)}window(){return new Gv(this)}partitionby(...e){return this.window().partitionby(...e)}orderby(...e){return this.window().orderby(...e)}frame(e){return this.window().frame(e)}}const j0e=["any_value","approx_count_distinct","approx_quantile","arbitrary","arg_max","arg_max_null","arg_min","arg_min_null","array_agg","avg","bit_and","bit_or","bit_xor","bitstring_agg","bool_and","bool_or","corr","count","count_star","covar_pop","covar_samp","entropy","favg","first","fsum","geomean","kurtosis_pop","kurtosis","last","mad","max","max_by","median","min","min_by","mode","product","quantile","quantile_cont","quantile_disc","regr_avgx","regr_avgy","regr_count","regr_intercept","regr_r2","regr_sxx","regr_sxy","regr_syy","regr_slope","reservoir_quantile","skewness","stddev","stddev_pop","stddev_samp","string_agg","sum","variance","var_pop","var_samp"];class U0e extends ca{expr;extent;constructor(e,n,r){super(e),this.expr=n,this.extent=r}toSQL(e){const{extent:n,expr:r}=this;return n?`(${r} ${e} ${n[0]} AND ${n[1]})`:""}}class V0e extends U0e{constructor(e,n){super(O$,e,n)}}class q0e extends ca{op;left;right;constructor(e,n,r){super(w$),this.op=e,this.left=n,this.right=r}}class ak extends ca{expr;_when;_else;constructor(e=void 0,n=[],r=void 0){super(v$),this.expr=e,this._when=n,this._else=r}when(e,n){return new ak(this.expr,this._when.concat(new OK(cs(e),cs(n))),this._else)}else(e){return new ak(this.expr,this._when,cs(e))}}class OK extends Cm{when;then;constructor(e,n){super(b$),this.when=e,this.then=n}}class Z0e extends ca{expr;cast;constructor(e,n){super(y$),this.expr=e,this.cast=n}}class X0e extends ca{spans;constructor(e){super(eD),this.spans=e}}class SK extends Cm{}class lk extends SK{expr;alias;sample;constructor(e,n,r){super(F$),this.expr=e,this.alias=n,this.sample=r}as(e){return new lk(this.expr,e,this.sample)}}class W0e extends ca{expr;values;constructor(e,n){super(k$),this.expr=e,this.values=n}}class G0e extends ca{values;constructor(e){super(oK),this.values=e}}class kK extends ca{op;clauses;constructor(e,n){super(S$),this.op=e,this.clauses=n}}class Y0e extends kK{constructor(e){super("AND",e)}}class H0e extends kK{constructor(e){super("OR",e)}}class CK extends ca{expr;desc;nullsFirst;constructor(e,n,r){super(g$),this.expr=e,this.desc=n,this.nullsFirst=r}}class K0e extends Cm{size;perc;method;seed;constructor(e,n=!1,r,i){super(dK),this.size=e,this.perc=n,this.method=r,this.seed=i}}class J0e extends Cm{expr;alias;constructor(e,n){super(R$),this.expr=e,this.alias=n}}class yj extends Cm{name;query;materialized;constructor(e,n,r=null){super(I$),this.name=e,this.query=n,this.materialized=r}}function AK(t){return t instanceof Vn}function iD(t){return t instanceof Gw}function eye(t){return t instanceof sD}class Vn extends ca{static with(...e){return new tye(...e)}static select(...e){return new Gw().select(...e)}static from(...e){return new Gw().from(...e)}static union(...e){return new Cp("UNION",e.flat())}static unionByName(...e){return new Cp("UNION BY NAME",e.flat())}static unionAll(...e){return new Cp("UNION ALL",e.flat())}static unionAllByName(...e){return new Cp("UNION ALL BY NAME",e.flat())}static intersect(...e){return new Cp("INTERSECT",e.flat())}static intersectAll(...e){return new Cp("INTERSECT ALL",e.flat())}static except(...e){return new Cp("EXCEPT",e.flat())}static exceptAll(...e){return new Cp("EXCEPT ALL",e.flat())}static describe(e){return new sD(e)}_with=[];_orderby=[];_limitPerc=!1;_limit;_offset;cteFor=null;constructor(e){super(e)}get subqueries(){return[]}clone(){return this}setCteFor(e){this.cteFor=e}with(...e){const n=[],r=(i,s)=>{const o=s.clone();o.setCteFor(this),n.push(new yj(i,o))};return e.flat().forEach(i=>{if(i instanceof yj)n.push(i);else if(i!=null)for(const s in i)r(s,i[s])}),this._with=this._with.concat(n),this}orderby(...e){return this._orderby=this._orderby.concat(i1(e)),this}limitPercent(e){return this._limitPerc=!0,this._limit=cs(e),this}limit(e){return this._limitPerc=!1,this._limit=cs(e),this}offset(e){return this._offset=cs(e),this}}class Gw extends Vn{_select=[];_from=[];_where=[];_sample;_groupby=[];_having=[];_window=[];_qualify=[];_distinct=!1;constructor(){super(L$)}get subqueries(){const e=this.cteFor||this,r=(e instanceof Gw?e._with:[]).reduce((s,o)=>(s[o.name]=o.query,s),{}),i=[];return this._from.forEach(s=>{if(s instanceof lk){const{expr:o}=s;if(AK(o))i.push(o);else if(pT(o)){const a=r[o.name];a&&i.push(a)}}}),i}clone(){return Object.assign(new Gw,this)}select(...e){const n=new Set,r=[],i=(s,o)=>{const a=tM(o);n.add(a),s&&r.push(new J0e(cs(s),a))};return e.flat().forEach(s=>{if(s!=null)if(r1(s))i(s,s);else if(Q$(s))i(s,s.column);else if(Z7(s))i(s[1],s[0]);else if(Cd(s))i(s,`${s}`);else for(const o in s)i(s[o],o)}),this._select=this._select.filter(s=>!n.has(s.alias)).concat(r),this}setSelect(...e){return this._select=[],this.select(...e)}distinct(e=!0){return this._distinct=!!e,this}from(...e){const n=[],r=(i,s)=>{n.push(new lk(N0e(i),tM(s)))};return e.flat().forEach(i=>{if(i!=null)if(i instanceof SK)n.push(i);else if(r1(i))r(i,i);else if(pT(i))r(i,i.name);else if(Cd(i))r(i);else if(Z7(i))r(i[1],i[0]);else for(const s in i)r(i[s],s)}),this._from=this._from.concat(n),this}setFrom(...e){return this._from=[],this.from(...e)}sample(e,n,r){let i;if(typeof e=="number"){const s=e>0&&e<1,o=s?e*100:Math.floor(e);i=new K0e(o,s,n,r)}else i=e;return this._sample=i??void 0,this}where(...e){return this._where=this._where.concat(I3(e,M3)),this}setWhere(...e){return this._where=[],this.where(...e)}groupby(...e){return this._groupby=this._groupby.concat(i1(e)),this}setGroupby(...e){return this._groupby=[],this.groupby(...e)}having(...e){return this._having=this._having.concat(I3(e,M3)),this}window(...e){const n=[];return e.flat().forEach(r=>{if(r!=null)for(const i in r)n.push(new F0e(tM(i),r[i]))}),this._window=this._window.concat(n),this}qualify(...e){return this._qualify=this._qualify.concat(I3(e,M3)),this}}class sD extends Cm{query;constructor(e){super($$),this.query=e}clone(){return new sD(this.query.clone())}}class Cp extends Vn{op;queries;constructor(e,n){super(B$),this.op=e,this.queries=n}setCteFor(e){super.setCteFor(e);const{queries:n,cteFor:r}=this;r&&n.forEach(i=>i.setCteFor(r))}get subqueries(){return this.queries}clone(){const{op:e,queries:n,...r}=this;return Object.assign(new Cp(e,n),r)}}class tye{_with;constructor(...e){this._with=e}select(...e){return Vn.select(...e).with(...this._with)}from(...e){return Vn.from(...e).with(...this._with)}union(...e){return Vn.union(...e).with(...this._with)}unionByName(...e){return Vn.unionByName(...e).with(...this._with)}unionAll(...e){return Vn.unionAll(...e).with(...this._with)}unionAllByName(...e){return Vn.unionAllByName(...e).with(...this._with)}intersect(...e){return Vn.intersect(...e).with(...this._with)}intersectAll(...e){return Vn.intersectAll(...e).with(...this._with)}except(...e){return Vn.except(...e).with(...this._with)}exceptAll(...e){return Vn.exceptAll(...e).with(...this._with)}}class EK extends ca{op;expr;constructor(e,n,r){super(e),this.op=n,this.expr=r}}class nye extends EK{constructor(e,n){super(_$,e,n)}}class rye extends EK{constructor(e,n){super(x$,e,n)}}function iye(t,e){return wl("arg_max",t,e)}function sye(t,e){return wl("arg_min",t,e)}function mT(t){return wl("avg",t)}function Mo(t){return wl("count",t)}function OC(t){return wl("max",t)}function V$(t){return wl("median",t)}function Yw(t){return wl("min",t)}function oye(t){return wl("product",t)}function aye(t,e){return wl("quantile",t,e)}function lye(t,e){return wl("regr_avgx",t,e)}function uye(t,e){return wl("regr_avgy",t,e)}function cye(t,e){return wl("regr_count",t,e)}function hye(t){return wl("stddev",t)}function fye(t){return wl("stddev_pop",t)}function Zo(t){return wl("sum",t)}function dye(t){return wl("var_samp",t)}function pye(t){return wl("var_pop",t)}function Yv(t,e,n){return t?new ak(void 0,[new OK(cs(t),cs(e))],cs(n)):new ak}function ao(t,e){return new Z0e(cs(t),e)}function mye(t){return ao(t,"INTEGER")}function vj(t){return ao(t,"DOUBLE")}function gye(t){return Sh("epoch_ms",t)}function yye(t){return new G0e(tD(t).map(rD))}function vye(t){return Array.isArray(t)?yye(t):cs(t)}function bj(t,e){return Sh("list_contains",vye(t),rD(e))}function Vy(t){return Sh("isfinite",t)}function q$(t){return Sh("exp",t)}function TK(t){return Sh("log",t)}function hw(t){return Sh("ln",t)}function Mb(t){return Sh("sign",t)}function Hw(t){return Sh("abs",t)}function gT(t){return Sh("sqrt",t)}function bye(t){return Sh("ceil",t)}function yT(t){return Sh("floor",t)}function _ye(t,e){return Sh("round",t,e)}function xye(t,e){return new nye(t,cs(e))}function PK(t,e){return new rye(t,cs(e))}function Ld(t,e,n){return new q0e(t,cs(e),cs(n))}function wc(...t){return new Y0e(i1(t))}function Od(...t){return new H0e(i1(t))}function Kw(t){return xye("NOT",t)}function Kp(t){return PK("IS NULL",t)}function Rb(t){return PK("IS NOT NULL",t)}function Z$(t,e){return Ld("+",t,e)}function ka(t,e){return Ld("-",t,e)}function aa(t,e){return Ld("*",t,e)}function il(t,e){return Ld("/",t,e)}function wye(t,e){return Ld("%",t,e)}function bf(t,e){return Ld("**",t,e)}function ah(t,e){return Ld("=",t,e)}function nM(t,e){return Ld("<",t,e)}function oD(t,e){return Ld(">",t,e)}function _j(t,e){return Ld("<=",t,e)}function DK(t,e){return Ld("IS NOT DISTINCT FROM",t,e)}function Ty(t,e){return new V0e(cs(t),e?.map(cs))}function Fb(t,e){return new W0e(cs(t),e.map(cs))}function ES(t,e){return new CK(cs(t),!1,e)}function fw(t,e){return new CK(cs(t),!0,e)}function ir(t,...e){return new X0e(Oye(t,e))}function Oye(t,e){const n=[t[0]],r=e.length;for(let i=0,s=0;i<r;){const o=e[i];Cd(o)?n[++s]=o:N$(o)?n[++s]=new z$(o):n[s]+=r1(o)?o:`${kn(o)}`;const a=t[++i];Cd(n[s])?n[++s]=a:n[s]+=a}return n.filter(i=>i).map(i=>r1(i)?new _K(i):i)}function IK(...t){return Sh("coalesce",...t)}function Sye(){return R0e("row_number")}const MK={[wC]:["args","order","filter"],[O$]:["expr","extent"],[w$]:["left","right"],[v$]:["expr","_when","_else"],[y$]:["expr"],[lK]:["expr"],[KP]:["param","table"],[HP]:["table"],[$$]:["query"],[hK]:["node"],[eD]:["spans"],[F$]:["expr"],[C$]:["args"],[k$]:["expr","values"],[fK]:["left","right","on","using","sample"],[S$]:["clauses"],[uK]:["expr","extent"],[g$]:["expr"],[D$]:["value"],[pK]:["subquery"],[R$]:["expr"],[L$]:["_with","_select","_from","_where","_sample","_groupby","_having","_window","_qualify","_orderby"],[B$]:["queries","_orderby"],[_$]:["expr"],[x$]:["expr"],[aK]:["expr"],[b$]:["when","then"],[JP]:["func","def"],[M$]:["def"],[E$]:["partition","order","framedef"],[T$]:["expr"],[cK]:["extent"],[A$]:["args"],[I$]:["query"]};function X7(t,e){if(e.has(t))return e.get(t);if(Cd(t)){const n=MK[t.type],r=n?.length??0;if(r>0){t=t.clone();for(let i=0;i<r;++i){const s=n[i],o=t[s];if(Array.isArray(o)){const a=t[s]=o.slice(),l=o.length;for(let h=0;h<l;++h)a[h]=X7(o[h],e)}else o&&(t[s]=X7(o,e))}}}return t}function uk(t,e){if(!Cd(t))return;const n=e(t);if(n)return n;const r=MK[t.type],i=r?.length??0;for(let s=0;s<i;++s){const o=t[r[s]];if(Array.isArray(o)){const a=o.length;for(let l=0;l<a;++l)if(o[l]&&Number(uk(o[l],e))<0)return n}else if(o&&Number(uk(o,e))<0)return-1}}const kye=new RegExp(`^(${j0e.join("|")})$`),Cye=/(\\'|\\"|"(?:\\"|[^"])*"|'(?:\\'|[^'])*'|\w+\()/g;function Aye(t){return t.split(Cye).some(e=>e.endsWith("(")&&kye.test(e.slice(0,-1)))}function aD(t){let e=0;return uk(t,n=>{switch(n.type){case JP:return-1;case wC:return e|=1,-1;case eD:case P$:{let r=`${n}`.toLowerCase();const i=r.indexOf("(select ");return i>=0&&(r=r.slice(0,i)),r.includes(") over ")?-1:Aye(r)?(e|=2,-1):1}}}),e}function Eye(t){const e=new Set;return uk(t,n=>{n.type===wC&&e.add(n)}),Array.from(e)}function RK(t){const e={};return uk(t,n=>{(n.type===HP||n.type===KP)&&(e[`${n}`]=n)}),Object.values(e)}function Tye(t,e,{replace:n=!1,temp:r=!1,view:i=!1}={}){return"CREATE"+(n?" OR REPLACE ":" ")+(r?"TEMP ":"")+(i?"VIEW":"TABLE")+(n?" ":" IF NOT EXISTS ")+t+" AS "+e}function n5(t){return t}function xj(){return{apply:n5,invert:n5,sqlApply:cs,sqlInvert:n5}}function Pye({base:t=null}={}){if(t==null||t===Math.E)return{apply:Math.log,invert:Math.exp,sqlApply:e=>hw(e),sqlInvert:e=>q$(e)};if(t===10)return{apply:Math.log10,invert:e=>Math.pow(10,e),sqlApply:e=>TK(e),sqlInvert:e=>bf(10,e)};{const e=+t;return{apply:n=>Math.log(n)/Math.log(e),invert:n=>Math.pow(e,n),sqlApply:n=>il(hw(n),hw(e)),sqlInvert:n=>bf(e,n)}}}function Dye({constant:t=1}={}){const e=+t;return{apply:n=>Math.sign(n)*Math.log1p(Math.abs(n)),invert:n=>Math.sign(n)*Math.exp(Math.abs(n)-e),sqlApply:n=>(n=cs(n),aa(Mb(n),hw(Z$(e,Hw(n))))),sqlInvert:n=>aa(Mb(n),ka(q$(Hw(n)),e))}}function Iye(){return{apply:t=>Math.sign(t)*Math.sqrt(Math.abs(t)),invert:t=>Math.sign(t)*t*t,sqlApply:t=>(t=cs(t),aa(Mb(t),gT(Hw(t)))),sqlInvert:t=>aa(Mb(t),bf(t,2))}}function Mye({exponent:t=1}={}){const e=+t;return{apply:n=>Math.sign(n)*Math.pow(Math.abs(n),e),invert:n=>Math.sign(n)*Math.pow(Math.abs(n),1/e),sqlApply:n=>(n=cs(n),aa(Mb(n),bf(Hw(n),e))),sqlInvert:n=>aa(Mb(n),bf(Hw(n),il(1,e)))}}function wj(){return{apply:t=>Number(t),invert:t=>new Date(t),sqlApply:t=>t instanceof Date?kn(+t):Lye(t)?kn(Number(t.value)):gye(t),sqlInvert:n5}}const Rye={identity:xj,linear:xj,log:Pye,symlog:Dye,sqrt:Iye,pow:Mye,time:wj,utc:wj};function Fye(t){const e=Rye[t.type];if(!e)throw new Error(`Unrecognized scale type: ${t.type}`);return{...t,...e(t)}}function Lye(t){return t instanceof mK&&t.value instanceof Date}function FK(t){let e=2166136261;for(let n=0,r=t.length;n<r;++n){const i=t.charCodeAt(n),s=i&65280;s&&(e=Oj(e^s>>8)),e=Oj(e^i&255)}return $ye(e)>>>0}function Oj(t){return t+(t<<1)+(t<<4)+(t<<7)+(t<<8)+(t<<24)}function $ye(t){return t+=t<<13,t^=t>>>7,t+=t<<3,t^=t>>>17,t+=t<<5,t&4294967295}function Bye(t,e,n){switch(t.name){case"count":case"count_star":return Nye(e,t);case"sum":return $K(e,t);case"avg":return zye(e,t);case"geomean":return Qye(e,t);case"arg_max":return jye(e,t);case"arg_min":return Uye(e,t);case"variance":case"var_samp":return $E(e,t,n);case"var_pop":return $E(e,t,n,!1);case"stddev":case"stddev_samp":return gT($E(e,t,n));case"stddev_pop":return gT($E(e,t,n,!1));case"covar_samp":return r5(e,t,n);case"covar_pop":return r5(e,t,n,!1);case"corr":return Sj(e,t,n);case"regr_count":return W2(e,t).expr;case"regr_avgx":return NK(e,t);case"regr_avgy":return zK(e,t);case"regr_syy":return G7(e,0,t,n);case"regr_sxx":return G7(e,1,t,n);case"regr_sxy":return r5(e,t,n,null);case"regr_slope":return QK(e,t,n);case"regr_intercept":return Vye(e,t,n);case"regr_r2":return bf(Sj(e,t,n),2);case"max":case"min":case"bit_and":case"bit_or":case"bit_xor":case"bool_and":case"bool_or":case"product":{const r=LK(t);return e[r]=t,ir`${t.name}("${r}")`}default:return null}}function LK(t){return"pre_"+FK(`${t}`).toString(16)}function su(t,e,n){const r=n?.filter;r&&(e=e.filter?e.where(wc(r,e.filter)):e.where(r));const i=LK(e);return t[i]=e,i}function X$(t,e){const n=su(t,Mo(e.args[0]),e);return{expr:IK(Zo(n),0),name:n}}function Nye(t,e){return IK($K(t,e),0)}function $K(t,e){return Zo(su(t,e))}function zye(t,e){const n=su(t,e),{expr:r,name:i}=X$(t,e);return il(Zo(aa(n,i)),r)}function Qye(t,e){const n=e.args[0],r=su(t,Zo(hw(n)),e),{expr:i}=X$(t,e);return q$(il(Zo(r),i))}function jye(t,e){const n=su(t,e),r=su(t,OC(e.args[1]),e);return iye(n,r)}function Uye(t,e){const n=su(t,e),r=su(t,Yw(e.args[1]),e);return sye(n,r)}function $E(t,e,n,r=!0){const i=e.args[0],{expr:s}=X$(t,e),o=ka(i,n(i)),a=su(t,Zo(bf(o,2)),e),l=su(t,Zo(o),e),h=r?ka(s,1):s;return il(ka(Zo(a),il(bf(Zo(l),2),s)),h)}function r5(t,e,n,r=!0){const{expr:i}=W2(t,e),s=BK(t,e,n),o=ck(t,1,e,n),a=ck(t,0,e,n),l=ka(s,il(aa(o,a),i));return r===null?l:r?il(l,ka(i,1)):il(l,i)}function Sj(t,e,n){const{expr:r}=W2(t,e),i=BK(t,e,n),s=W7(t,1,e,n),o=W7(t,0,e,n),a=ck(t,1,e,n),l=ck(t,0,e,n),h=ka(s,il(bf(a,2),r)),f=ka(o,il(bf(l,2),r));return il(ka(i,il(aa(a,l),r)),gT(aa(h,f)))}function W2(t,e){const[n,r]=e.args,i=su(t,cye(n,r),e);return{expr:Zo(i),name:i}}function ck(t,e,n,r){const i=n.args,s=i[e],o=i[1-e],a=Zo(ka(s,r(s))).where(Rb(o));return Zo(su(t,a,n))}function W7(t,e,n,r){const i=n.args,s=i[e],o=i[1-e],a=Zo(bf(ka(s,r(s)),2)).where(Rb(o));return Zo(su(t,a,n))}function BK(t,e,n){const[r,i]=e.args,s=Zo(aa(ka(i,n(i)),ka(r,n(r))));return Zo(su(t,s,e))}function NK(t,e){const[n,r]=e.args,{expr:i,name:s}=W2(t,e),o=su(t,lye(n,r),e);return il(Zo(aa(o,s)),i)}function zK(t,e){const[n,r]=e.args,{expr:i,name:s}=W2(t,e),o=su(t,uye(n,r),e);return il(Zo(aa(o,s)),i)}function G7(t,e,n,r){const{expr:i}=W2(t,n),s=ck(t,e,n,r),o=W7(t,e,n,r);return ka(o,il(bf(s,2),i))}function QK(t,e,n){const r=r5(t,e,n,null),i=G7(t,1,e,n);return il(r,i)}function Vye(t,e,n){const r=NK(t,e),i=zK(t,e),s=QK(t,e,n);return ka(i,aa(s,r))}function qye(t){if(!t.filterStable)return null;const e=t.query();if(!iD(e))return null;const n=vT(e,l=>{const h=l._from[0],f=h instanceof lk&&h.expr;return pT(f)?f.name:f});if(typeof n!="string")return null;const r=new Map,i={},s={},o=[],a=l=>{const h=l.column,f=vT(e,p=>p._select.find(g=>g.alias===h)?.expr);return ir`(SELECT avg(${f??l}) FROM "${n}")`};for(const{alias:l,expr:h}of e._select){if(aD(h)>1)return null;const f=Eye(h);if(f.length===0)o.push(l),i[l]=h;else{for(const p of f){if(p.isDistinct)return null;const g=Bye(p,i,a);if(!g)return null;r.set(p,g)}s[l]=X7(h,r)}}return r.size?{group:o,preagg:i,output:s}:null}function vT(t,e){const n=t.subqueries;if(iD(t)&&n.length===0)return e(t);const r=vT(n[0],e);for(let i=1;i<n.length;++i){const s=vT(n[i],e);if(s!==void 0&&s!==r)return NaN}return r}const Zye={skip:!0,result:null};class Xye{entries;active;mc;_schema;_enabled;constructor(e,{schema:n="mosaic",enabled:r=!0}={}){this.entries=new Map,this.active=null,this.mc=e,this._schema=n,this._enabled=r}set enabled(e){this._enabled!==e&&(e||this.clear(),this._enabled=e)}get enabled(){return this._enabled}set schema(e){this._schema!==e&&(this.clear(),this._schema=e)}get schema(){return this._schema}dropSchema(){return this.clear(),this.mc.exec(`DROP SCHEMA IF EXISTS "${this.schema}" CASCADE`)}clear(){this.entries.clear(),this.active=null}request(e,n,r){if(!this.enabled||r==null)return null;const{entries:i,mc:s,schema:o}=this,{source:a}=r;if(!a||this.active&&(this.active.source!==a&&this.clear(),this.active?.source===null))return null;let{active:l}=this;if(!l&&(r.predicate==null||(this.active=l=Wye(r),l.source===null)))return null;if(i.has(e))return i.get(e);const h=qye(e);let f;if(!h)f=null;else if(n.skip(e,r))f=Zye;else{const p=n.remove(a).predicate(e);f=Hye(e.query(p),l,h,o),f.result=s.exec([`CREATE SCHEMA IF NOT EXISTS ${o}`,Tye(f.table,f.create,{temp:!1})]),f.result.catch(g=>s.logger().error(g))}return i.set(e,f),f}}function Wye(t){const{source:e,meta:n}=t,r=t.predicate,i=RK(r).map(a=>a.column);let s,o;if(!n||!i)return{source:null,columns:o,predicate:s};switch(n.type){case"point":s=a=>a,o=Object.fromEntries(i.map(a=>[`${a}`,cs(a)]));break;case"interval":{const{scales:a,bin:l,pixelSize:h=1}=n;if(!a)break;const f=a.map(p=>Yye(p,h,l));f.some(p=>!p)||(f.length===1?(s=p=>p?Ty("active0",p.extent?.map(f[0])):[],o={active0:f[0](r.expr)}):(s=p=>p?wc(p.clauses.map((g,b)=>Ty(`active${b}`,g.extent?.map(f[b])))):[],o=Object.fromEntries(r.clauses.map((p,g)=>[`active${g}`,f[g](p.expr)]))))}}return{source:o?e:null,columns:o,predicate:s}}const Gye={ceil:bye,round:_ye};function Yye(t,e,n){const{type:r,domain:i,range:s,apply:o,sqlApply:a}=Fye(t);if(!o)return;const l=Gye[`${n}`.toLowerCase()]||yT,h=i.map(k=>Number(k)),f=o(Math.min(...h)),p=o(Math.max(...h)),g=(r==="identity"?1:Math.abs(s[1]-s[0])/(p-f))/e,b=g===1?k=>k:k=>aa(vj(g),k),x=f===0?k=>k:k=>ka(k,vj(f));return k=>mye(l(b(x(a(k)))))}function Hye(t,e,n,r){const{group:i,output:s,preagg:o}=n,{columns:a}=e,l=t.setSelect({...o,...a}).groupby(Object.keys(a)),[h]=l.subqueries;if(h){const T=Object.values(a).flatMap(I=>RK(I).map(M=>M.column));Kye(h,T)}const f=l._having,p=l._orderby;l._having=[],l._orderby=[];const g=l.toString(),b=(FK(g)>>>0).toString(16),x=`${r}.preagg_${b}`,k=Vn.select(i,s).from(x).groupby(i).having(f).orderby(p);return new e1e({table:x,create:g,active:e,select:k})}function Kye(t,e){const n=new Set,r=i=>{if(!n.has(i)){if(n.add(i),iD(i)&&i._from.length&&(i.select(e),Jye(i))){const s=new Set(i._groupby.flatMap(o=>o instanceof bK?[o.name]:[]));i.groupby(e.filter(o=>!s.has(o)))}i.subqueries.forEach(r)}};r(t)}function Jye(t){return t._groupby.length>0||t._select.some(e=>aD(e))}class e1e{table;create;result;active;select;skip;constructor({table:e,create:n,active:r,select:i}){this.table=e,this.create=n,this.result=null,this.active=r,this.select=i,this.skip=!1}query(e){return this.select.clone().where(this.active.predicate(e))}}function Y7(){return{debug(){},info(){},log(){},warn(){},error(){},group(){},groupCollapsed(){},groupEnd(){}}}const Hv=Object.freeze({pending:Symbol("pending"),ready:Symbol("ready"),error:Symbol("error"),done:Symbol("done")});class W$ extends Promise{_resolve;_reject;_state;_value;constructor(){let e,n;super((r,i)=>{e=r,n=i}),this._resolve=e,this._reject=n,this._state=Hv.pending,this._value=void 0}fulfill(e){if(this._value!==void 0){if(e!==void 0)throw Error("Promise is ready and fulfill has a provided value");this._resolve(this._value)}else{if(e===void 0)throw Error("Promise is neither ready nor has provided value");this._resolve(e)}return this._state=Hv.done,this}ready(e){return this._state=Hv.ready,this._value=e,this}reject(e){return this._state=Hv.error,this._reject(e),this}get state(){return this._state}}W$.prototype.constructor=Promise;function t1e(t){return typeof requestAnimationFrame<"u"?requestAnimationFrame(t):typeof setImmediate<"u"?setImmediate(t):setTimeout(t)}function n1e(t,e){let n=[],r=0;function i(){const s=r1e(n,e);n=[],r=0;for(const o of s)s1e(o,t),l1e(o,e)}return{add(s,o){s.request.type==="arrow"?(r||=t1e(()=>i()),n.push({entry:s,priority:o,index:n.length})):t(s,o)}}}function r1e(t,e){const n=[],r=new Map;for(const i of t){const{entry:{request:s}}=i,o=i1e(s.query,e);if(!r.has(o)){const a=[];n.push(a),r.set(o,a)}r.get(o).push(i)}return n}function i1e(t,e){const n=`${t}`;if(iD(t)&&!e.get(n)){if(t._where.length||t._qualify.length||t._having.length||t._orderby.length||t._distinct)return n;const r=t.clone().setSelect("*"),i=t._groupby;if(i.length){const s={};t._select.forEach(({alias:o,expr:a})=>s[o]=a),r.setGroupby(i.map(o=>Q$(o)&&s[o.column]||o))}else t._select.some(s=>aD(s.expr))&&r.setGroupby("ALL");return`${r}`}else return n}function s1e(t,e){if(o1e(t))e({request:{type:"arrow",cache:!1,query:t.query=a1e(t)},result:t.result=new W$});else for(const{entry:n,priority:r}of t)e(n,r)}function o1e(t){if(t.length>1){const e=`${t[0].entry.request.query}`;for(let n=1;n<t.length;++n)if(e!==`${t[n].entry.request.query}`)return!0}return!1}function a1e(t){const e=t.maps=[],n=new Map;for(const s of t){const o=s.entry.request.query,a=[];e.push(a);for(const{alias:l,expr:h}of o._select){const f=`${h}`;n.has(f)||n.set(f,[`col${n.size}`,h]);const[p]=n.get(f);a.push([p,l])}}const r=t[0].entry.request.query.clone(),i=r._groupby;if(i.length){const s={};t.maps[0].forEach(([o,a])=>s[a]=o),r.setGroupby(i.map(o=>Q$(o)&&s[o.column]||o))}return r.setSelect(Array.from(n.values()))}async function l1e(t,e){const{maps:n,query:r,result:i}=t;if(!n)return;let s;try{s=await i}catch(a){for(const{entry:l}of t)l.result.reject(a);return}const o=eye(r);t.forEach(({entry:a},l)=>{const{request:h,result:f}=a,p=n[l],g=o&&p?c1e(s,p):p?u1e(s,p):s;h.cache&&e.set(String(h.query),g),f.fulfill(g)})}function u1e(t,e){return t.select(e.map(n=>n[0]),e.map(n=>n[1]))}function c1e(t,e){const n=new Map(e),r=[];for(const i of t)n.has(i.column_name)&&r.push({...i,column_name:n.get(i.column_name)});return r}const h1e=typeof requestIdleCallback<"u"?requestIdleCallback:setTimeout;function f1e(){return{get:()=>{},set:(t,e)=>e,clear:()=>{}}}function d1e({max:t=1e3,ttl:e=10800*1e3}={}){let n=new Map;function r(){const i=performance.now()-e;let s=null,o=1/0;for(const[a,l]of n){const{last:h}=l;h<o&&(s=a,o=h),i>h&&n.delete(a)}s&&n.delete(s)}return{get(i){const s=n.get(i);if(s)return s.last=performance.now(),s.value},set(i,s){return n.set(i,{last:performance.now(),value:s}),n.size>t&&h1e(r),s},clear(){n=new Map}}}class p1e{queue;constructor(e){this.queue=Array.from({length:e},()=>({head:null,tail:null}))}isEmpty(){return this.queue.every(e=>!e.head)}insert(e,n){const r=this.queue[n];if(!r)throw new Error(`Invalid queue priority rank: ${n}`);const i={item:e,next:null};r.head===null?r.head=r.tail=i:r.tail=r.tail.next=i}remove(e){for(const n of this.queue){let{head:r,tail:i}=n;for(let s=null,o=r;o;s=o,o=o.next)e(o.item)&&(o===r?r=o.next:s.next=o.next,o===i&&(i=s||r));n.head=r,n.tail=i}}next(){for(const e of this.queue){const{head:n}=e;if(n!==null)return e.head=n.next,e.tail===n&&(e.tail=null),n.item}}}const Wx=Object.freeze({High:0,Normal:1,Low:2});class m1e{queue;db;clientCache;_logger;_logQueries;_consolidate;pendingResults;maxConcurrentRequests;pendingExec;constructor(e=32){this.queue=new p1e(3),this.db=null,this.clientCache=null,this._logger=Y7(),this._logQueries=!1,this._consolidate=null,this.pendingResults=[],this.maxConcurrentRequests=e,this.pendingExec=!1}next(){if(this.queue.isEmpty()||this.pendingResults.length>this.maxConcurrentRequests||this.pendingExec)return;const e=this.queue.next();if(!e)return;const{request:n,result:r}=e;this.pendingResults.push(r),n.type==="exec"&&(this.pendingExec=!0),this.submit(n,r).finally(()=>{for(;this.pendingResults.length&&this.pendingResults[0].state!==Hv.pending;){const i=this.pendingResults.shift();i.state===Hv.ready?i.fulfill():i.state===Hv.done&&this._logger.warn("Found resolved query in pending results.")}n.type==="exec"&&(this.pendingExec=!1),this.next()})}enqueue(e,n=Wx.Normal){this.queue.insert(e,n),this.next()}async submit(e,n){try{const{query:r,type:i,cache:s=!1,options:o}=e,a=r?`${r}`:null;if(s){const p=this.clientCache.get(a);if(p){const g=await p;this._logger.debug("Cache"),n.ready(g);return}}const l=performance.now();this._logQueries&&this._logger.debug("Query",{type:i,sql:a,...o});const h=this.db.query({type:i,sql:a,...o});s&&this.clientCache.set(a,h);const f=await h;s&&this.clientCache.set(a,f),this._logger.debug(`Request: ${(performance.now()-l).toFixed(1)}`),n.ready(i==="exec"?null:f)}catch(r){n.reject(r)}}cache(e){return e!==void 0?this.clientCache=e===!0?d1e():e||f1e():this.clientCache}logger(e){return e?this._logger=e:this._logger}logQueries(e){return e!==void 0?this._logQueries=!!e:this._logQueries}connector(e){return e?this.db=e:this.db}consolidate(e){e&&!this._consolidate?this._consolidate=n1e(this.enqueue.bind(this),this.clientCache):!e&&this._consolidate&&(this._consolidate=null)}request(e,n=Wx.Normal){const r=new W$,i={request:e,result:r};return this._consolidate?this._consolidate.add(i,n):this.enqueue(i,n),r}cancel(e){const n=new Set(e);if(n.size){this.queue.remove(({result:r})=>n.has(r)?(r.reject("Canceled"),!0):!1);for(const r of this.pendingResults)n.has(r)&&r.reject("Canceled")}}clear(){this.queue.remove(({result:e})=>(e.reject("Cleared"),!0));for(const e of this.pendingResults)e.reject("Cleared");this.pendingResults=[]}}let BE;function SC(t){return t?BE=t:BE==null&&(BE=new g1e),BE}class g1e{manager;preaggregator;clients=new Set;filterGroups=new Map;_logger=Y7();constructor(e=new tK,n={}){const{logger:r=console,manager:i=new m1e,cache:s=!0,consolidate:o=!0,preagg:a={}}=n;this.manager=i,this.manager.cache(s),this.manager.consolidate(o),this.databaseConnector(e),this.logger(r),this.clear(),this.preaggregator=new Xye(this,a)}clear(e={}){const{clients:n=!0,cache:r=!0}=e;this.manager.clear(),n&&(this.filterGroups?.forEach(i=>i.disconnect()),this.filterGroups=new Map,this.clients?.forEach(i=>this.disconnect(i)),this.clients=new Set),r&&this.manager.cache().clear()}databaseConnector(e){return e?this.manager.connector(e):this.manager.connector()}logger(e){return arguments.length&&(this._logger=e||Y7(),this.manager.logger(this._logger)),this._logger}cancel(e){this.manager.cancel(e)}exec(e,n={}){const{priority:r=Wx.Normal}=n;return e=Array.isArray(e)?e.filter(i=>i).join(`;
`):e,this.manager.request({type:"exec",query:e},r)}query(e,n={}){const{type:r="arrow",cache:i=!0,priority:s=Wx.Normal,...o}=n;return this.manager.request({type:r,query:e,cache:i,options:o},s)}prefetch(e,n={}){return this.query(e,{...n,cache:!0,priority:Wx.Low})}updateClient(e,n,r=Wx.Normal){return e.queryPending(),e._pending=this.query(n,{priority:r}).then(i=>e.queryResult(i).update(),i=>{this._logger?.error(i),e.queryError(i)}).catch(i=>this._logger?.error(i))}requestQuery(e,n){return this.preaggregator.clear(),n?this.updateClient(e,n):Promise.resolve(e.update())}connect(e){const{clients:n}=this;if(n?.has(e))throw new Error("Client already connected.");n?.add(e),e.coordinator=this,e.initialize(),y1e(this,e.filterBy,e)}disconnect(e){const{clients:n,filterGroups:r}=this;if(!n?.has(e))return;n.delete(e),e.coordinator=null;const i=r?.get(e.filterBy);i&&i.clients.delete(e)}}function y1e(t,e,n){if(!e)return;let r=t.filterGroups?.get(e);if(!r){const i=o=>v1e(t,e,o),s=()=>b1e(t,e);e.addEventListener("activate",i),e.addEventListener("value",s),r={selection:e,clients:new Set,disconnect(){e.removeEventListener("activate",i),e.removeEventListener("value",s)}},t.filterGroups?.set(e,r)}r.clients.add(n)}function v1e(t,e,n){const{preaggregator:r,filterGroups:i}=t,{clients:s}=i.get(e);for(const o of s)o.enabled&&r.request(o,e,n)}function b1e(t,e){const{preaggregator:n,filterGroups:r}=t,{clients:i}=r.get(e),{active:s}=e;return Promise.allSettled(Array.from(i,o=>{if(!o.enabled)return o.requestQuery();const a=n.request(o,e,s),l=a?null:e.predicate(o);if(a?.skip||!a&&!l)return;const h=a?.query(s.predicate)??o.query(l);return t.updateClient(o,h)}))}function kC(t){const{coordinator:e=SC(),...n}=t,r=new _1e(n);return e.connect(r),r}class _1e extends qP{_methods;_filterStable;constructor({selection:e=void 0,enabled:n=!0,filterStable:r=!0,...i}){super(e),this.enabled=n,this._methods=i,this._filterStable=r}get filterStable(){return this._filterStable}async prepare(){await this._methods.prepare?.()}query(e){return this._methods.query?.(e)??null}queryResult(e){return this._methods.queryResult?.(e),this}queryPending(){return this._methods.queryPending?.(),this}queryError(e){return this._methods.queryError?.(e),this}}class x1e{_callbacks;constructor(){this._callbacks=new Map}addEventListener(e,n){this._callbacks.has(e)||this._callbacks.set(e,{callbacks:new Set,pending:null,queue:new w1e}),this._callbacks.get(e).callbacks.add(n)}removeEventListener(e,n){const r=this._callbacks.get(e);r&&r.callbacks.delete(n)}willEmit(e,n){return n}emitQueueFilter(e,n){return null}cancel(e){this._callbacks.get(e)?.queue.clear()}async pending(e){await this._callbacks.get(e)?.pending}emit(e,n){const r=this._callbacks.get(e)||{};if(r.pending)r.queue.enqueue(n,this.emitQueueFilter(e,n));else{const i=this.willEmit(e,n),{callbacks:s,queue:o}=r;if(s?.size){const a=Array.from(s,l=>l(i));r.pending=Promise.allSettled(a).then(()=>{r.pending=null,o.isEmpty()||this.emit(e,o.dequeue())})}}}}class w1e{next=null;constructor(){this.clear()}clear(){this.next=null}isEmpty(){return!this.next}enqueue(e,n){const r={value:e};if(n&&this.next){let i=this;for(;i.next;)n(i.next.value)?i=i.next:i.next=i.next.next;i.next=r}else this.next=r}dequeue(){const{next:e}=this;return this.next=e?.next||null,e?.value}}function O1e(t,e){return t===e?!1:t instanceof Date&&e instanceof Date?+t!=+e:Array.isArray(t)&&Array.isArray(e)?S1e(t,e):!0}function S1e(t,e){if(t.length!==e.length)return!0;for(let n=0;n<t.length;++n)if(t[n]!==e[n])return!0;return!1}function rM(t){return t instanceof dw}class dw extends x1e{_value;constructor(e){super(),this._value=e}static value(e){return new dw(e)}static array(e){if(e.some(n=>rM(n))){const n=new dw,r=()=>{n.update(e.map(i=>rM(i)?i.value:i))};return r(),e.forEach(i=>rM(i)?i.addEventListener("value",r):0),n}return new dw(e)}get value(){return this._value}update(e,{force:n}={}){return O1e(this._value,e)||n?this.emit("value",e):this.cancel("value"),this}willEmit(e,n){return e==="value"&&(this._value=n),n}}function kj(t){return t instanceof G$}function NE(t,e){return new G$(new UK(t),e?[e].flat():void 0)}let G$=class jK extends dw{_resolved;_resolver;_relay;static intersect({cross:e=!1,empty:n=!1,include:r=[]}={}){return NE({cross:e,empty:n},r)}static union({cross:e=!1,empty:n=!1,include:r=[]}={}){return NE({cross:e,empty:n,union:!0},r)}static single({cross:e=!1,empty:n=!1,include:r=[]}={}){return NE({cross:e,empty:n,single:!0},r)}static crossfilter({empty:e=!1,include:n=[]}={}){return NE({cross:!0,empty:e},n)}constructor(e=new UK,n=[]){if(super([]),this._resolved=this._value,this._resolver=e,this._relay=new Set,Array.isArray(n))for(const r of n)r._relay.add(this)}clone(){const e=new jK(this._resolver);return e._value=e._resolved=this._value,e}remove(e){const n=this.clone();return n._value=n._resolved=n._resolver.resolve(this._resolved,{source:e}),n._value.active={source:e},n}get resolver(){return this._resolver}get single(){return this._resolver.single}get clauses(){return super.value}get active(){return this.clauses.active}get value(){return this.active?.value}valueFor(e){return this.clauses.find(n=>n.source===e)?.value}activate(e){this.emit("activate",e),this._relay.forEach(n=>n.activate(e))}update(e){return this._resolved=this._resolver.resolve(this._resolved,e,!0),this._resolved.active=e,this._relay.forEach(n=>n.update(e)),super.update(this._resolved)}reset(e){return e??=this._resolved,e.forEach(n=>n.source?.reset?.()),this._resolved=this._resolved.filter(n=>!e.includes(n)),this._relay.forEach(n=>n.reset(e)),super.update(this._resolved)}willEmit(e,n){return e==="value"?(this._value=n,this.value):n}emitQueueFilter(e,n){return e==="value"?this._resolver.queueFilter(n):null}skip(e,n){return this._resolver.skip(e,n)}predicate(e=void 0,n=!1){const{clauses:r}=this,i=n?null:r.active;return this._resolver.predicate(r,i,e)}};class UK{union;cross;single;empty;constructor({union:e,cross:n,single:r,empty:i}={}){this.union=!!e,this.cross=!!n,this.single=!!r,this.empty=!!i}resolve(e,n,r=!1){const{source:i,predicate:s}=n,o=e.filter(l=>i!==l.source),a=this.single?[]:o;return this.single&&r&&o.forEach(l=>l.source?.reset?.()),s&&a.push(n),a}skip(e,n){return e==null?!1:!!(this.cross&&n?.clients?.has(e))}predicate(e,n,r){const{empty:i,union:s}=this;if(i&&!e.length)return[kn(!1)];if(this.skip(r,n))return;const o=e.filter(a=>!this.skip(r,a)).map(a=>a.predicate);return s&&o.length>1?Od(o):o}queueFilter(e){if(this.cross){const n=e.active?.source;return r=>r.active?.source!==n}return null}}function k1e(t){return new C1e(t)}class C1e{_uri;_ipc;constructor({uri:e="http://localhost:3000/",ipc:n=void 0}={}){this._uri=e,this._ipc=n}async query(e){const n=fetch(this._uri,{method:"POST",mode:"cors",credentials:"omit",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}),r=await n;if(!r.ok)throw new Error(`Query failed with HTTP status ${r.status}: ${await r.text()}`);return e.type==="exec"?n:e.type==="arrow"?dT(await r.arrayBuffer(),this._ipc):r.json()}}function Tr(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(f){try{h(r.next(f))}catch(p){o(p)}}function l(f){try{h(r.throw(f))}catch(p){o(p)}}function h(f){f.done?s(f.value):i(f.value).then(a,l)}h((r=r.apply(t,e||[])).next())})}function Cj(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Jr(t){return this instanceof Jr?(this.v=t,this):new Jr(t)}function jp(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),i,s=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",o),i[Symbol.asyncIterator]=function(){return this},i;function o(b){return function(x){return Promise.resolve(x).then(b,p)}}function a(b,x){r[b]&&(i[b]=function(k){return new Promise(function(T,I){s.push([b,k,T,I])>1||l(b,k)})},x&&(i[b]=x(i[b])))}function l(b,x){try{h(r[b](x))}catch(k){g(s[0][3],k)}}function h(b){b.value instanceof Jr?Promise.resolve(b.value.v).then(f,p):g(s[0][2],b)}function f(b){l("next",b)}function p(b){l("throw",b)}function g(b,x){b(x),s.shift(),s.length&&l(s[0][0],s[0][1])}}function i5(t){var e,n;return e={},r("next"),r("throw",function(i){throw i}),r("return"),e[Symbol.iterator]=function(){return this},e;function r(i,s){e[i]=t[i]?function(o){return(n=!n)?{value:Jr(t[i](o)),done:!1}:s?s(o):o}:s}}function vb(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof Cj=="function"?Cj(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(s){n[s]=t[s]&&function(o){return new Promise(function(a,l){o=t[s](o),i(a,l,o.done,o.value)})}}function i(s,o,a,l){Promise.resolve(l).then(function(h){s({value:h,done:a})},o)}}const A1e=new TextDecoder("utf-8"),H7=t=>A1e.decode(t),E1e=new TextEncoder,Y$=t=>E1e.encode(t),T1e=t=>typeof t=="number",VK=t=>typeof t=="boolean",$a=t=>typeof t=="function",Cc=t=>t!=null&&Object(t)===t,Lb=t=>Cc(t)&&$a(t.then),CC=t=>Cc(t)&&$a(t[Symbol.iterator]),G2=t=>Cc(t)&&$a(t[Symbol.asyncIterator]),K7=t=>Cc(t)&&Cc(t.schema),qK=t=>Cc(t)&&"done"in t&&"value"in t,ZK=t=>Cc(t)&&$a(t.stat)&&T1e(t.fd),XK=t=>Cc(t)&&H$(t.body),lD=t=>"_getDOMStream"in t&&"_getNodeStream"in t,P1e=t=>Cc(t)&&$a(t.abort)&&$a(t.getWriter)&&!lD(t),H$=t=>Cc(t)&&$a(t.cancel)&&$a(t.getReader)&&!lD(t),D1e=t=>Cc(t)&&$a(t.end)&&$a(t.write)&&VK(t.writable)&&!lD(t),WK=t=>Cc(t)&&$a(t.read)&&$a(t.pipe)&&VK(t.readable)&&!lD(t),I1e=t=>Cc(t)&&$a(t.clear)&&$a(t.bytes)&&$a(t.position)&&$a(t.setPosition)&&$a(t.capacity)&&$a(t.getBufferIdentifier)&&$a(t.createLong),K$=typeof SharedArrayBuffer<"u"?SharedArrayBuffer:ArrayBuffer;function M1e(t){const e=t[0]?[t[0]]:[];let n,r,i,s;for(let o,a,l=0,h=0,f=t.length;++l<f;){if(o=e[h],a=t[l],!o||!a||o.buffer!==a.buffer||a.byteOffset<o.byteOffset){a&&(e[++h]=a);continue}if({byteOffset:n,byteLength:i}=o,{byteOffset:r,byteLength:s}=a,n+i<r||r+s<n){a&&(e[++h]=a);continue}e[h]=new Uint8Array(o.buffer,n,r-n+s)}return e}function Aj(t,e,n=0,r=e.byteLength){const i=t.byteLength,s=new Uint8Array(t.buffer,t.byteOffset,i),o=new Uint8Array(e.buffer,e.byteOffset,Math.min(r,i));return s.set(o,n),t}function um(t,e){const n=M1e(t),r=n.reduce((f,p)=>f+p.byteLength,0);let i,s,o,a=0,l=-1;const h=Math.min(e||Number.POSITIVE_INFINITY,r);for(const f=n.length;++l<f;){if(i=n[l],s=i.subarray(0,Math.min(i.length,h-a)),h<=a+s.length){s.length<i.length?n[l]=i.subarray(s.length):s.length===i.length&&l++,o?Aj(o,s,a):o=s;break}Aj(o||(o=new Uint8Array(h)),s,a),a+=s.length}return[o||new Uint8Array(0),n.slice(l),r-(o?o.byteLength:0)]}function Ts(t,e){let n=qK(e)?e.value:e;return n instanceof t?t===Uint8Array?new t(n.buffer,n.byteOffset,n.byteLength):n:n?(typeof n=="string"&&(n=Y$(n)),n instanceof ArrayBuffer?new t(n):n instanceof K$?new t(n):I1e(n)?Ts(t,n.bytes()):ArrayBuffer.isView(n)?n.byteLength<=0?new t(0):new t(n.buffer,n.byteOffset,n.byteLength/t.BYTES_PER_ELEMENT):t.from(n)):new t(0)}const TS=t=>Ts(Int32Array,t),Ej=t=>Ts(BigInt64Array,t),Di=t=>Ts(Uint8Array,t),J7=t=>(t.next(),t);function*R1e(t,e){const n=function*(i){yield i},r=typeof e=="string"||ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof K$?n(e):CC(e)?e:n(e);return yield*J7((function*(i){let s=null;do s=i.next(yield Ts(t,s));while(!s.done)})(r[Symbol.iterator]())),new t}const F1e=t=>R1e(Uint8Array,t);function GK(t,e){return jp(this,arguments,function*(){if(Lb(e))return yield Jr(yield Jr(yield*i5(vb(GK(t,yield Jr(e))))));const r=function(o){return jp(this,arguments,function*(){yield yield Jr(yield Jr(o))})},i=function(o){return jp(this,arguments,function*(){yield Jr(yield*i5(vb(J7((function*(a){let l=null;do l=a.next(yield l?.value);while(!l.done)})(o[Symbol.iterator]())))))})},s=typeof e=="string"||ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof K$?r(e):CC(e)?i(e):G2(e)?e:r(e);return yield Jr(yield*i5(vb(J7((function(o){return jp(this,arguments,function*(){let a=null;do a=yield Jr(o.next(yield yield Jr(Ts(t,a))));while(!a.done)})})(s[Symbol.asyncIterator]()))))),yield Jr(new t)})}const L1e=t=>GK(Uint8Array,t);function YK(t,e,n){if(t!==0){n=n.slice(0,e);for(let r=-1,i=n.length;++r<i;)n[r]+=t}return n.subarray(0,e)}function $1e(t,e){let n=0;const r=t.length;if(r!==e.length)return!1;if(r>0)do if(t[n]!==e[n])return!1;while(++n<r);return!0}const tf={fromIterable(t){return zE(B1e(t))},fromAsyncIterable(t){return zE(N1e(t))},fromDOMStream(t){return zE(z1e(t))},fromNodeStream(t){return zE(j1e(t))},toDOMStream(t,e){throw new Error('"toDOMStream" not available in this environment')},toNodeStream(t,e){throw new Error('"toNodeStream" not available in this environment')}},zE=t=>(t.next(),t);function*B1e(t){let e,n=!1,r=[],i,s,o,a=0;function l(){return s==="peek"?um(r,o)[0]:([i,r,a]=um(r,o),i)}({cmd:s,size:o}=(yield null)||{cmd:"read",size:0});const h=F1e(t)[Symbol.iterator]();try{do if({done:e,value:i}=Number.isNaN(o-a)?h.next():h.next(o-a),!e&&i.byteLength>0&&(r.push(i),a+=i.byteLength),e||o<=a)do({cmd:s,size:o}=yield l());while(o<a);while(!e)}catch(f){(n=!0)&&typeof h.throw=="function"&&h.throw(f)}finally{n===!1&&typeof h.return=="function"&&h.return(null)}return null}function N1e(t){return jp(this,arguments,function*(){let n,r=!1,i=[],s,o,a,l=0;function h(){return o==="peek"?um(i,a)[0]:([s,i,l]=um(i,a),s)}({cmd:o,size:a}=(yield yield Jr(null))||{cmd:"read",size:0});const f=L1e(t)[Symbol.asyncIterator]();try{do if({done:n,value:s}=Number.isNaN(a-l)?yield Jr(f.next()):yield Jr(f.next(a-l)),!n&&s.byteLength>0&&(i.push(s),l+=s.byteLength),n||a<=l)do({cmd:o,size:a}=yield yield Jr(h()));while(a<l);while(!n)}catch(p){(r=!0)&&typeof f.throw=="function"&&(yield Jr(f.throw(p)))}finally{r===!1&&typeof f.return=="function"&&(yield Jr(f.return(new Uint8Array(0))))}return yield Jr(null)})}function z1e(t){return jp(this,arguments,function*(){let n=!1,r=!1,i=[],s,o,a,l=0;function h(){return o==="peek"?um(i,a)[0]:([s,i,l]=um(i,a),s)}({cmd:o,size:a}=(yield yield Jr(null))||{cmd:"read",size:0});const f=new Q1e(t);try{do if({done:n,value:s}=Number.isNaN(a-l)?yield Jr(f.read()):yield Jr(f.read(a-l)),!n&&s.byteLength>0&&(i.push(Di(s)),l+=s.byteLength),n||a<=l)do({cmd:o,size:a}=yield yield Jr(h()));while(a<l);while(!n)}catch(p){(r=!0)&&(yield Jr(f.cancel(p)))}finally{r===!1?yield Jr(f.cancel()):t.locked&&f.releaseLock()}return yield Jr(null)})}class Q1e{constructor(e){this.source=e,this.reader=null,this.reader=this.source.getReader(),this.reader.closed.catch(()=>{})}get closed(){return this.reader?this.reader.closed.catch(()=>{}):Promise.resolve()}releaseLock(){this.reader&&this.reader.releaseLock(),this.reader=null}cancel(e){return Tr(this,void 0,void 0,function*(){const{reader:n,source:r}=this;n&&(yield n.cancel(e).catch(()=>{})),r&&r.locked&&this.releaseLock()})}read(e){return Tr(this,void 0,void 0,function*(){if(e===0)return{done:this.reader==null,value:new Uint8Array(0)};const n=yield this.reader.read();return!n.done&&(n.value=Di(n)),n})}}const iM=(t,e)=>{const n=i=>r([e,i]);let r;return[e,n,new Promise(i=>(r=i)&&t.once(e,n))]};function j1e(t){return jp(this,arguments,function*(){const n=[];let r="error",i=!1,s=null,o,a,l=0,h=[],f;function p(){return o==="peek"?um(h,a)[0]:([f,h,l]=um(h,a),f)}if({cmd:o,size:a}=(yield yield Jr(null))||{cmd:"read",size:0},t.isTTY)return yield yield Jr(new Uint8Array(0)),yield Jr(null);try{n[0]=iM(t,"end"),n[1]=iM(t,"error");do{if(n[2]=iM(t,"readable"),[r,s]=yield Jr(Promise.race(n.map(b=>b[2]))),r==="error")break;if((i=r==="end")||(Number.isFinite(a-l)?(f=Di(t.read(a-l)),f.byteLength<a-l&&(f=Di(t.read()))):f=Di(t.read()),f.byteLength>0&&(h.push(f),l+=f.byteLength)),i||a<=l)do({cmd:o,size:a}=yield yield Jr(p()));while(a<l)}while(!i)}finally{yield Jr(g(n,r==="error"?s:null))}return yield Jr(null);function g(b,x){return f=h=null,new Promise((k,T)=>{for(const[I,M]of b)t.off(I,M);try{const I=t.destroy;I&&I.call(t,x),x=void 0}catch(I){x=I||x}finally{x!=null?T(x):k()}})}})}var sa;(function(t){t[t.V1=0]="V1",t[t.V2=1]="V2",t[t.V3=2]="V3",t[t.V4=3]="V4",t[t.V5=4]="V5"})(sa||(sa={}));var ou;(function(t){t[t.Sparse=0]="Sparse",t[t.Dense=1]="Dense"})(ou||(ou={}));var Jl;(function(t){t[t.HALF=0]="HALF",t[t.SINGLE=1]="SINGLE",t[t.DOUBLE=2]="DOUBLE"})(Jl||(Jl={}));var _f;(function(t){t[t.DAY=0]="DAY",t[t.MILLISECOND=1]="MILLISECOND"})(_f||(_f={}));var _r;(function(t){t[t.SECOND=0]="SECOND",t[t.MILLISECOND=1]="MILLISECOND",t[t.MICROSECOND=2]="MICROSECOND",t[t.NANOSECOND=3]="NANOSECOND"})(_r||(_r={}));var cm;(function(t){t[t.YEAR_MONTH=0]="YEAR_MONTH",t[t.DAY_TIME=1]="DAY_TIME",t[t.MONTH_DAY_NANO=2]="MONTH_DAY_NANO"})(cm||(cm={}));const sM=2,Mp=4,Mg=4,Os=4,by=new Int32Array(2),Tj=new Float32Array(by.buffer),Pj=new Float64Array(by.buffer),QE=new Uint16Array(new Uint8Array([1,0]).buffer)[0]===1;var eF;(function(t){t[t.UTF8_BYTES=1]="UTF8_BYTES",t[t.UTF16_STRING=2]="UTF16_STRING"})(eF||(eF={}));let Jw=class HK{constructor(e){this.bytes_=e,this.position_=0,this.text_decoder_=new TextDecoder}static allocate(e){return new HK(new Uint8Array(e))}clear(){this.position_=0}bytes(){return this.bytes_}position(){return this.position_}setPosition(e){this.position_=e}capacity(){return this.bytes_.length}readInt8(e){return this.readUint8(e)<<24>>24}readUint8(e){return this.bytes_[e]}readInt16(e){return this.readUint16(e)<<16>>16}readUint16(e){return this.bytes_[e]|this.bytes_[e+1]<<8}readInt32(e){return this.bytes_[e]|this.bytes_[e+1]<<8|this.bytes_[e+2]<<16|this.bytes_[e+3]<<24}readUint32(e){return this.readInt32(e)>>>0}readInt64(e){return BigInt.asIntN(64,BigInt(this.readUint32(e))+(BigInt(this.readUint32(e+4))<<BigInt(32)))}readUint64(e){return BigInt.asUintN(64,BigInt(this.readUint32(e))+(BigInt(this.readUint32(e+4))<<BigInt(32)))}readFloat32(e){return by[0]=this.readInt32(e),Tj[0]}readFloat64(e){return by[QE?0:1]=this.readInt32(e),by[QE?1:0]=this.readInt32(e+4),Pj[0]}writeInt8(e,n){this.bytes_[e]=n}writeUint8(e,n){this.bytes_[e]=n}writeInt16(e,n){this.bytes_[e]=n,this.bytes_[e+1]=n>>8}writeUint16(e,n){this.bytes_[e]=n,this.bytes_[e+1]=n>>8}writeInt32(e,n){this.bytes_[e]=n,this.bytes_[e+1]=n>>8,this.bytes_[e+2]=n>>16,this.bytes_[e+3]=n>>24}writeUint32(e,n){this.bytes_[e]=n,this.bytes_[e+1]=n>>8,this.bytes_[e+2]=n>>16,this.bytes_[e+3]=n>>24}writeInt64(e,n){this.writeInt32(e,Number(BigInt.asIntN(32,n))),this.writeInt32(e+4,Number(BigInt.asIntN(32,n>>BigInt(32))))}writeUint64(e,n){this.writeUint32(e,Number(BigInt.asUintN(32,n))),this.writeUint32(e+4,Number(BigInt.asUintN(32,n>>BigInt(32))))}writeFloat32(e,n){Tj[0]=n,this.writeInt32(e,by[0])}writeFloat64(e,n){Pj[0]=n,this.writeInt32(e,by[QE?0:1]),this.writeInt32(e+4,by[QE?1:0])}getBufferIdentifier(){if(this.bytes_.length<this.position_+Mp+Mg)throw new Error("FlatBuffers: ByteBuffer is too short to contain an identifier.");let e="";for(let n=0;n<Mg;n++)e+=String.fromCharCode(this.readInt8(this.position_+Mp+n));return e}__offset(e,n){const r=e-this.readInt32(e);return n<this.readInt16(r)?this.readInt16(r+n):0}__union(e,n){return e.bb_pos=n+this.readInt32(n),e.bb=this,e}__string(e,n){e+=this.readInt32(e);const r=this.readInt32(e);e+=Mp;const i=this.bytes_.subarray(e,e+r);return n===eF.UTF8_BYTES?i:this.text_decoder_.decode(i)}__union_with_string(e,n){return typeof e=="string"?this.__string(n):this.__union(e,n)}__indirect(e){return e+this.readInt32(e)}__vector(e){return e+this.readInt32(e)+Mp}__vector_len(e){return this.readInt32(e+this.readInt32(e))}__has_identifier(e){if(e.length!=Mg)throw new Error("FlatBuffers: file identifier must be length "+Mg);for(let n=0;n<Mg;n++)if(e.charCodeAt(n)!=this.readInt8(this.position()+Mp+n))return!1;return!0}createScalarList(e,n){const r=[];for(let i=0;i<n;++i){const s=e(i);s!==null&&r.push(s)}return r}createObjList(e,n){const r=[];for(let i=0;i<n;++i){const s=e(i);s!==null&&r.push(s.unpack())}return r}},KK=class JK{constructor(e){this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1,this.string_maps=null,this.text_encoder=new TextEncoder;let n;e?n=e:n=1024,this.bb=Jw.allocate(n),this.space=n}clear(){this.bb.clear(),this.space=this.bb.capacity(),this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1,this.string_maps=null}forceDefaults(e){this.force_defaults=e}dataBuffer(){return this.bb}asUint8Array(){return this.bb.bytes().subarray(this.bb.position(),this.bb.position()+this.offset())}prep(e,n){e>this.minalign&&(this.minalign=e);const r=~(this.bb.capacity()-this.space+n)+1&e-1;for(;this.space<r+e+n;){const i=this.bb.capacity();this.bb=JK.growByteBuffer(this.bb),this.space+=this.bb.capacity()-i}this.pad(r)}pad(e){for(let n=0;n<e;n++)this.bb.writeInt8(--this.space,0)}writeInt8(e){this.bb.writeInt8(this.space-=1,e)}writeInt16(e){this.bb.writeInt16(this.space-=2,e)}writeInt32(e){this.bb.writeInt32(this.space-=4,e)}writeInt64(e){this.bb.writeInt64(this.space-=8,e)}writeFloat32(e){this.bb.writeFloat32(this.space-=4,e)}writeFloat64(e){this.bb.writeFloat64(this.space-=8,e)}addInt8(e){this.prep(1,0),this.writeInt8(e)}addInt16(e){this.prep(2,0),this.writeInt16(e)}addInt32(e){this.prep(4,0),this.writeInt32(e)}addInt64(e){this.prep(8,0),this.writeInt64(e)}addFloat32(e){this.prep(4,0),this.writeFloat32(e)}addFloat64(e){this.prep(8,0),this.writeFloat64(e)}addFieldInt8(e,n,r){(this.force_defaults||n!=r)&&(this.addInt8(n),this.slot(e))}addFieldInt16(e,n,r){(this.force_defaults||n!=r)&&(this.addInt16(n),this.slot(e))}addFieldInt32(e,n,r){(this.force_defaults||n!=r)&&(this.addInt32(n),this.slot(e))}addFieldInt64(e,n,r){(this.force_defaults||n!==r)&&(this.addInt64(n),this.slot(e))}addFieldFloat32(e,n,r){(this.force_defaults||n!=r)&&(this.addFloat32(n),this.slot(e))}addFieldFloat64(e,n,r){(this.force_defaults||n!=r)&&(this.addFloat64(n),this.slot(e))}addFieldOffset(e,n,r){(this.force_defaults||n!=r)&&(this.addOffset(n),this.slot(e))}addFieldStruct(e,n,r){n!=r&&(this.nested(n),this.slot(e))}nested(e){if(e!=this.offset())throw new TypeError("FlatBuffers: struct must be serialized inline.")}notNested(){if(this.isNested)throw new TypeError("FlatBuffers: object serialization must not be nested.")}slot(e){this.vtable!==null&&(this.vtable[e]=this.offset())}offset(){return this.bb.capacity()-this.space}static growByteBuffer(e){const n=e.capacity();if(n&3221225472)throw new Error("FlatBuffers: cannot grow buffer beyond 2 gigabytes.");const r=n<<1,i=Jw.allocate(r);return i.setPosition(r-n),i.bytes().set(e.bytes(),r-n),i}addOffset(e){this.prep(Mp,0),this.writeInt32(this.offset()-e+Mp)}startObject(e){this.notNested(),this.vtable==null&&(this.vtable=[]),this.vtable_in_use=e;for(let n=0;n<e;n++)this.vtable[n]=0;this.isNested=!0,this.object_start=this.offset()}endObject(){if(this.vtable==null||!this.isNested)throw new Error("FlatBuffers: endObject called without startObject");this.addInt32(0);const e=this.offset();let n=this.vtable_in_use-1;for(;n>=0&&this.vtable[n]==0;n--);const r=n+1;for(;n>=0;n--)this.addInt16(this.vtable[n]!=0?e-this.vtable[n]:0);const i=2;this.addInt16(e-this.object_start);const s=(r+i)*sM;this.addInt16(s);let o=0;const a=this.space;e:for(n=0;n<this.vtables.length;n++){const l=this.bb.capacity()-this.vtables[n];if(s==this.bb.readInt16(l)){for(let h=sM;h<s;h+=sM)if(this.bb.readInt16(a+h)!=this.bb.readInt16(l+h))continue e;o=this.vtables[n];break}}return o?(this.space=this.bb.capacity()-e,this.bb.writeInt32(this.space,o-e)):(this.vtables.push(this.offset()),this.bb.writeInt32(this.bb.capacity()-e,this.offset()-e)),this.isNested=!1,e}finish(e,n,r){const i=r?Os:0;if(n){const s=n;if(this.prep(this.minalign,Mp+Mg+i),s.length!=Mg)throw new TypeError("FlatBuffers: file identifier must be length "+Mg);for(let o=Mg-1;o>=0;o--)this.writeInt8(s.charCodeAt(o))}this.prep(this.minalign,Mp+i),this.addOffset(e),i&&this.addInt32(this.bb.capacity()-this.space),this.bb.setPosition(this.space)}finishSizePrefixed(e,n){this.finish(e,n,!0)}requiredField(e,n){const r=this.bb.capacity()-e,i=r-this.bb.readInt32(r);if(!(n<this.bb.readInt16(i)&&this.bb.readInt16(i+n)!=0))throw new TypeError("FlatBuffers: field "+n+" must be set")}startVector(e,n,r){this.notNested(),this.vector_num_elems=n,this.prep(Mp,e*n),this.prep(r,e*n)}endVector(){return this.writeInt32(this.vector_num_elems),this.offset()}createSharedString(e){if(!e)return 0;if(this.string_maps||(this.string_maps=new Map),this.string_maps.has(e))return this.string_maps.get(e);const n=this.createString(e);return this.string_maps.set(e,n),n}createString(e){if(e==null)return 0;let n;return e instanceof Uint8Array?n=e:n=this.text_encoder.encode(e),this.addInt8(0),this.startVector(1,n.length,1),this.bb.setPosition(this.space-=n.length),this.bb.bytes().set(n,this.space),this.endVector()}createByteVector(e){return e==null?0:(this.startVector(1,e.length,1),this.bb.setPosition(this.space-=e.length),this.bb.bytes().set(e,this.space),this.endVector())}createObjectOffset(e){return e===null?0:typeof e=="string"?this.createString(e):e.pack(this)}createObjectOffsetList(e){const n=[];for(let r=0;r<e.length;++r){const i=e[r];if(i!==null)n.push(this.createObjectOffset(i));else throw new TypeError("FlatBuffers: Argument for createObjectOffsetList cannot contain null.")}return n}createStructOffsetList(e,n){return n(this,e.length),this.createObjectOffsetList(e.slice().reverse()),this.endVector()}};var bT;(function(t){t[t.BUFFER=0]="BUFFER"})(bT||(bT={}));var _T;(function(t){t[t.LZ4_FRAME=0]="LZ4_FRAME",t[t.ZSTD=1]="ZSTD"})(_T||(_T={}));class _y{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsBodyCompression(e,n){return(n||new _y).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsBodyCompression(e,n){return e.setPosition(e.position()+Os),(n||new _y).__init(e.readInt32(e.position())+e.position(),e)}codec(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt8(this.bb_pos+e):_T.LZ4_FRAME}method(){const e=this.bb.__offset(this.bb_pos,6);return e?this.bb.readInt8(this.bb_pos+e):bT.BUFFER}static startBodyCompression(e){e.startObject(2)}static addCodec(e,n){e.addFieldInt8(0,n,_T.LZ4_FRAME)}static addMethod(e,n){e.addFieldInt8(1,n,bT.BUFFER)}static endBodyCompression(e){return e.endObject()}static createBodyCompression(e,n,r){return _y.startBodyCompression(e),_y.addCodec(e,n),_y.addMethod(e,r),_y.endBodyCompression(e)}}let eJ=class{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}offset(){return this.bb.readInt64(this.bb_pos)}length(){return this.bb.readInt64(this.bb_pos+8)}static sizeOf(){return 16}static createBuffer(e,n,r){return e.prep(8,16),e.writeInt64(BigInt(r??0)),e.writeInt64(BigInt(n??0)),e.offset()}},tJ=class{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}length(){return this.bb.readInt64(this.bb_pos)}nullCount(){return this.bb.readInt64(this.bb_pos+8)}static sizeOf(){return 16}static createFieldNode(e,n,r){return e.prep(8,16),e.writeInt64(BigInt(r??0)),e.writeInt64(BigInt(n??0)),e.offset()}},Og=class tF{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsRecordBatch(e,n){return(n||new tF).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsRecordBatch(e,n){return e.setPosition(e.position()+Os),(n||new tF).__init(e.readInt32(e.position())+e.position(),e)}length(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt64(this.bb_pos+e):BigInt("0")}nodes(e,n){const r=this.bb.__offset(this.bb_pos,6);return r?(n||new tJ).__init(this.bb.__vector(this.bb_pos+r)+e*16,this.bb):null}nodesLength(){const e=this.bb.__offset(this.bb_pos,6);return e?this.bb.__vector_len(this.bb_pos+e):0}buffers(e,n){const r=this.bb.__offset(this.bb_pos,8);return r?(n||new eJ).__init(this.bb.__vector(this.bb_pos+r)+e*16,this.bb):null}buffersLength(){const e=this.bb.__offset(this.bb_pos,8);return e?this.bb.__vector_len(this.bb_pos+e):0}compression(e){const n=this.bb.__offset(this.bb_pos,10);return n?(e||new _y).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}static startRecordBatch(e){e.startObject(4)}static addLength(e,n){e.addFieldInt64(0,n,BigInt("0"))}static addNodes(e,n){e.addFieldOffset(1,n,0)}static startNodesVector(e,n){e.startVector(16,n,8)}static addBuffers(e,n){e.addFieldOffset(2,n,0)}static startBuffersVector(e,n){e.startVector(16,n,8)}static addCompression(e,n){e.addFieldOffset(3,n,0)}static endRecordBatch(e){return e.endObject()}},Ix=class nF{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsDictionaryBatch(e,n){return(n||new nF).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsDictionaryBatch(e,n){return e.setPosition(e.position()+Os),(n||new nF).__init(e.readInt32(e.position())+e.position(),e)}id(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt64(this.bb_pos+e):BigInt("0")}data(e){const n=this.bb.__offset(this.bb_pos,6);return n?(e||new Og).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}isDelta(){const e=this.bb.__offset(this.bb_pos,8);return e?!!this.bb.readInt8(this.bb_pos+e):!1}static startDictionaryBatch(e){e.startObject(3)}static addId(e,n){e.addFieldInt64(0,n,BigInt("0"))}static addData(e,n){e.addFieldOffset(1,n,0)}static addIsDelta(e,n){e.addFieldInt8(2,+n,0)}static endDictionaryBatch(e){return e.endObject()}};var e2;(function(t){t[t.Little=0]="Little",t[t.Big=1]="Big"})(e2||(e2={}));var xT;(function(t){t[t.DenseArray=0]="DenseArray"})(xT||(xT={}));class lh{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsInt(e,n){return(n||new lh).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsInt(e,n){return e.setPosition(e.position()+Os),(n||new lh).__init(e.readInt32(e.position())+e.position(),e)}bitWidth(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt32(this.bb_pos+e):0}isSigned(){const e=this.bb.__offset(this.bb_pos,6);return e?!!this.bb.readInt8(this.bb_pos+e):!1}static startInt(e){e.startObject(2)}static addBitWidth(e,n){e.addFieldInt32(0,n,0)}static addIsSigned(e,n){e.addFieldInt8(1,+n,0)}static endInt(e){return e.endObject()}static createInt(e,n,r){return lh.startInt(e),lh.addBitWidth(e,n),lh.addIsSigned(e,r),lh.endInt(e)}}class Rg{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsDictionaryEncoding(e,n){return(n||new Rg).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsDictionaryEncoding(e,n){return e.setPosition(e.position()+Os),(n||new Rg).__init(e.readInt32(e.position())+e.position(),e)}id(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt64(this.bb_pos+e):BigInt("0")}indexType(e){const n=this.bb.__offset(this.bb_pos,6);return n?(e||new lh).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}isOrdered(){const e=this.bb.__offset(this.bb_pos,8);return e?!!this.bb.readInt8(this.bb_pos+e):!1}dictionaryKind(){const e=this.bb.__offset(this.bb_pos,10);return e?this.bb.readInt16(this.bb_pos+e):xT.DenseArray}static startDictionaryEncoding(e){e.startObject(4)}static addId(e,n){e.addFieldInt64(0,n,BigInt("0"))}static addIndexType(e,n){e.addFieldOffset(1,n,0)}static addIsOrdered(e,n){e.addFieldInt8(2,+n,0)}static addDictionaryKind(e,n){e.addFieldInt16(3,n,xT.DenseArray)}static endDictionaryEncoding(e){return e.endObject()}}class Na{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsKeyValue(e,n){return(n||new Na).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsKeyValue(e,n){return e.setPosition(e.position()+Os),(n||new Na).__init(e.readInt32(e.position())+e.position(),e)}key(e){const n=this.bb.__offset(this.bb_pos,4);return n?this.bb.__string(this.bb_pos+n,e):null}value(e){const n=this.bb.__offset(this.bb_pos,6);return n?this.bb.__string(this.bb_pos+n,e):null}static startKeyValue(e){e.startObject(2)}static addKey(e,n){e.addFieldOffset(0,n,0)}static addValue(e,n){e.addFieldOffset(1,n,0)}static endKeyValue(e){return e.endObject()}static createKeyValue(e,n,r){return Na.startKeyValue(e),Na.addKey(e,n),Na.addValue(e,r),Na.endKeyValue(e)}}let Dj=class o3{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsBinary(e,n){return(n||new o3).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsBinary(e,n){return e.setPosition(e.position()+Os),(n||new o3).__init(e.readInt32(e.position())+e.position(),e)}static startBinary(e){e.startObject(0)}static endBinary(e){return e.endObject()}static createBinary(e){return o3.startBinary(e),o3.endBinary(e)}},Ij=class a3{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsBool(e,n){return(n||new a3).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsBool(e,n){return e.setPosition(e.position()+Os),(n||new a3).__init(e.readInt32(e.position())+e.position(),e)}static startBool(e){e.startObject(0)}static endBool(e){return e.endObject()}static createBool(e){return a3.startBool(e),a3.endBool(e)}},s5=class Mx{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsDate(e,n){return(n||new Mx).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsDate(e,n){return e.setPosition(e.position()+Os),(n||new Mx).__init(e.readInt32(e.position())+e.position(),e)}unit(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt16(this.bb_pos+e):_f.MILLISECOND}static startDate(e){e.startObject(1)}static addUnit(e,n){e.addFieldInt16(0,n,_f.MILLISECOND)}static endDate(e){return e.endObject()}static createDate(e,n){return Mx.startDate(e),Mx.addUnit(e,n),Mx.endDate(e)}},Rx=class vy{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsDecimal(e,n){return(n||new vy).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsDecimal(e,n){return e.setPosition(e.position()+Os),(n||new vy).__init(e.readInt32(e.position())+e.position(),e)}precision(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt32(this.bb_pos+e):0}scale(){const e=this.bb.__offset(this.bb_pos,6);return e?this.bb.readInt32(this.bb_pos+e):0}bitWidth(){const e=this.bb.__offset(this.bb_pos,8);return e?this.bb.readInt32(this.bb_pos+e):128}static startDecimal(e){e.startObject(3)}static addPrecision(e,n){e.addFieldInt32(0,n,0)}static addScale(e,n){e.addFieldInt32(1,n,0)}static addBitWidth(e,n){e.addFieldInt32(2,n,128)}static endDecimal(e){return e.endObject()}static createDecimal(e,n,r,i){return vy.startDecimal(e),vy.addPrecision(e,n),vy.addScale(e,r),vy.addBitWidth(e,i),vy.endDecimal(e)}},o5=class Fx{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsDuration(e,n){return(n||new Fx).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsDuration(e,n){return e.setPosition(e.position()+Os),(n||new Fx).__init(e.readInt32(e.position())+e.position(),e)}unit(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt16(this.bb_pos+e):_r.MILLISECOND}static startDuration(e){e.startObject(1)}static addUnit(e,n){e.addFieldInt16(0,n,_r.MILLISECOND)}static endDuration(e){return e.endObject()}static createDuration(e,n){return Fx.startDuration(e),Fx.addUnit(e,n),Fx.endDuration(e)}},a5=class Lx{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsFixedSizeBinary(e,n){return(n||new Lx).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsFixedSizeBinary(e,n){return e.setPosition(e.position()+Os),(n||new Lx).__init(e.readInt32(e.position())+e.position(),e)}byteWidth(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt32(this.bb_pos+e):0}static startFixedSizeBinary(e){e.startObject(1)}static addByteWidth(e,n){e.addFieldInt32(0,n,0)}static endFixedSizeBinary(e){return e.endObject()}static createFixedSizeBinary(e,n){return Lx.startFixedSizeBinary(e),Lx.addByteWidth(e,n),Lx.endFixedSizeBinary(e)}},l5=class $x{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsFixedSizeList(e,n){return(n||new $x).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsFixedSizeList(e,n){return e.setPosition(e.position()+Os),(n||new $x).__init(e.readInt32(e.position())+e.position(),e)}listSize(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt32(this.bb_pos+e):0}static startFixedSizeList(e){e.startObject(1)}static addListSize(e,n){e.addFieldInt32(0,n,0)}static endFixedSizeList(e){return e.endObject()}static createFixedSizeList(e,n){return $x.startFixedSizeList(e),$x.addListSize(e,n),$x.endFixedSizeList(e)}};class Rp{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsFloatingPoint(e,n){return(n||new Rp).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsFloatingPoint(e,n){return e.setPosition(e.position()+Os),(n||new Rp).__init(e.readInt32(e.position())+e.position(),e)}precision(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt16(this.bb_pos+e):Jl.HALF}static startFloatingPoint(e){e.startObject(1)}static addPrecision(e,n){e.addFieldInt16(0,n,Jl.HALF)}static endFloatingPoint(e){return e.endObject()}static createFloatingPoint(e,n){return Rp.startFloatingPoint(e),Rp.addPrecision(e,n),Rp.endFloatingPoint(e)}}class Fp{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsInterval(e,n){return(n||new Fp).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsInterval(e,n){return e.setPosition(e.position()+Os),(n||new Fp).__init(e.readInt32(e.position())+e.position(),e)}unit(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt16(this.bb_pos+e):cm.YEAR_MONTH}static startInterval(e){e.startObject(1)}static addUnit(e,n){e.addFieldInt16(0,n,cm.YEAR_MONTH)}static endInterval(e){return e.endObject()}static createInterval(e,n){return Fp.startInterval(e),Fp.addUnit(e,n),Fp.endInterval(e)}}let Mj=class l3{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsLargeBinary(e,n){return(n||new l3).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsLargeBinary(e,n){return e.setPosition(e.position()+Os),(n||new l3).__init(e.readInt32(e.position())+e.position(),e)}static startLargeBinary(e){e.startObject(0)}static endLargeBinary(e){return e.endObject()}static createLargeBinary(e){return l3.startLargeBinary(e),l3.endLargeBinary(e)}},Rj=class u3{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsLargeUtf8(e,n){return(n||new u3).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsLargeUtf8(e,n){return e.setPosition(e.position()+Os),(n||new u3).__init(e.readInt32(e.position())+e.position(),e)}static startLargeUtf8(e){e.startObject(0)}static endLargeUtf8(e){return e.endObject()}static createLargeUtf8(e){return u3.startLargeUtf8(e),u3.endLargeUtf8(e)}},Fj=class c3{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsList(e,n){return(n||new c3).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsList(e,n){return e.setPosition(e.position()+Os),(n||new c3).__init(e.readInt32(e.position())+e.position(),e)}static startList(e){e.startObject(0)}static endList(e){return e.endObject()}static createList(e){return c3.startList(e),c3.endList(e)}},u5=class Bx{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsMap(e,n){return(n||new Bx).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsMap(e,n){return e.setPosition(e.position()+Os),(n||new Bx).__init(e.readInt32(e.position())+e.position(),e)}keysSorted(){const e=this.bb.__offset(this.bb_pos,4);return e?!!this.bb.readInt8(this.bb_pos+e):!1}static startMap(e){e.startObject(1)}static addKeysSorted(e,n){e.addFieldInt8(0,+n,0)}static endMap(e){return e.endObject()}static createMap(e,n){return Bx.startMap(e),Bx.addKeysSorted(e,n),Bx.endMap(e)}},Lj=class h3{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsNull(e,n){return(n||new h3).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsNull(e,n){return e.setPosition(e.position()+Os),(n||new h3).__init(e.readInt32(e.position())+e.position(),e)}static startNull(e){e.startObject(0)}static endNull(e){return e.endObject()}static createNull(e){return h3.startNull(e),h3.endNull(e)}};class Kv{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsStruct_(e,n){return(n||new Kv).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsStruct_(e,n){return e.setPosition(e.position()+Os),(n||new Kv).__init(e.readInt32(e.position())+e.position(),e)}static startStruct_(e){e.startObject(0)}static endStruct_(e){return e.endObject()}static createStruct_(e){return Kv.startStruct_(e),Kv.endStruct_(e)}}class sf{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsTime(e,n){return(n||new sf).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsTime(e,n){return e.setPosition(e.position()+Os),(n||new sf).__init(e.readInt32(e.position())+e.position(),e)}unit(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt16(this.bb_pos+e):_r.MILLISECOND}bitWidth(){const e=this.bb.__offset(this.bb_pos,6);return e?this.bb.readInt32(this.bb_pos+e):32}static startTime(e){e.startObject(2)}static addUnit(e,n){e.addFieldInt16(0,n,_r.MILLISECOND)}static addBitWidth(e,n){e.addFieldInt32(1,n,32)}static endTime(e){return e.endObject()}static createTime(e,n,r){return sf.startTime(e),sf.addUnit(e,n),sf.addBitWidth(e,r),sf.endTime(e)}}class of{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsTimestamp(e,n){return(n||new of).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsTimestamp(e,n){return e.setPosition(e.position()+Os),(n||new of).__init(e.readInt32(e.position())+e.position(),e)}unit(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt16(this.bb_pos+e):_r.SECOND}timezone(e){const n=this.bb.__offset(this.bb_pos,6);return n?this.bb.__string(this.bb_pos+n,e):null}static startTimestamp(e){e.startObject(2)}static addUnit(e,n){e.addFieldInt16(0,n,_r.SECOND)}static addTimezone(e,n){e.addFieldOffset(1,n,0)}static endTimestamp(e){return e.endObject()}static createTimestamp(e,n,r){return of.startTimestamp(e),of.addUnit(e,n),of.addTimezone(e,r),of.endTimestamp(e)}}class uc{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsUnion(e,n){return(n||new uc).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsUnion(e,n){return e.setPosition(e.position()+Os),(n||new uc).__init(e.readInt32(e.position())+e.position(),e)}mode(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt16(this.bb_pos+e):ou.Sparse}typeIds(e){const n=this.bb.__offset(this.bb_pos,6);return n?this.bb.readInt32(this.bb.__vector(this.bb_pos+n)+e*4):0}typeIdsLength(){const e=this.bb.__offset(this.bb_pos,6);return e?this.bb.__vector_len(this.bb_pos+e):0}typeIdsArray(){const e=this.bb.__offset(this.bb_pos,6);return e?new Int32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+e),this.bb.__vector_len(this.bb_pos+e)):null}static startUnion(e){e.startObject(2)}static addMode(e,n){e.addFieldInt16(0,n,ou.Sparse)}static addTypeIds(e,n){e.addFieldOffset(1,n,0)}static createTypeIdsVector(e,n){e.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)e.addInt32(n[r]);return e.endVector()}static startTypeIdsVector(e,n){e.startVector(4,n,4)}static endUnion(e){return e.endObject()}static createUnion(e,n,r){return uc.startUnion(e),uc.addMode(e,n),uc.addTypeIds(e,r),uc.endUnion(e)}}let $j=class f3{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsUtf8(e,n){return(n||new f3).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsUtf8(e,n){return e.setPosition(e.position()+Os),(n||new f3).__init(e.readInt32(e.position())+e.position(),e)}static startUtf8(e){e.startObject(0)}static endUtf8(e){return e.endObject()}static createUtf8(e){return f3.startUtf8(e),f3.endUtf8(e)}};var ro;(function(t){t[t.NONE=0]="NONE",t[t.Null=1]="Null",t[t.Int=2]="Int",t[t.FloatingPoint=3]="FloatingPoint",t[t.Binary=4]="Binary",t[t.Utf8=5]="Utf8",t[t.Bool=6]="Bool",t[t.Decimal=7]="Decimal",t[t.Date=8]="Date",t[t.Time=9]="Time",t[t.Timestamp=10]="Timestamp",t[t.Interval=11]="Interval",t[t.List=12]="List",t[t.Struct_=13]="Struct_",t[t.Union=14]="Union",t[t.FixedSizeBinary=15]="FixedSizeBinary",t[t.FixedSizeList=16]="FixedSizeList",t[t.Map=17]="Map",t[t.Duration=18]="Duration",t[t.LargeBinary=19]="LargeBinary",t[t.LargeUtf8=20]="LargeUtf8",t[t.LargeList=21]="LargeList",t[t.RunEndEncoded=22]="RunEndEncoded"})(ro||(ro={}));let Wh=class c5{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsField(e,n){return(n||new c5).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsField(e,n){return e.setPosition(e.position()+Os),(n||new c5).__init(e.readInt32(e.position())+e.position(),e)}name(e){const n=this.bb.__offset(this.bb_pos,4);return n?this.bb.__string(this.bb_pos+n,e):null}nullable(){const e=this.bb.__offset(this.bb_pos,6);return e?!!this.bb.readInt8(this.bb_pos+e):!1}typeType(){const e=this.bb.__offset(this.bb_pos,8);return e?this.bb.readUint8(this.bb_pos+e):ro.NONE}type(e){const n=this.bb.__offset(this.bb_pos,10);return n?this.bb.__union(e,this.bb_pos+n):null}dictionary(e){const n=this.bb.__offset(this.bb_pos,12);return n?(e||new Rg).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}children(e,n){const r=this.bb.__offset(this.bb_pos,14);return r?(n||new c5).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+e*4),this.bb):null}childrenLength(){const e=this.bb.__offset(this.bb_pos,14);return e?this.bb.__vector_len(this.bb_pos+e):0}customMetadata(e,n){const r=this.bb.__offset(this.bb_pos,16);return r?(n||new Na).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+e*4),this.bb):null}customMetadataLength(){const e=this.bb.__offset(this.bb_pos,16);return e?this.bb.__vector_len(this.bb_pos+e):0}static startField(e){e.startObject(7)}static addName(e,n){e.addFieldOffset(0,n,0)}static addNullable(e,n){e.addFieldInt8(1,+n,0)}static addTypeType(e,n){e.addFieldInt8(2,n,ro.NONE)}static addType(e,n){e.addFieldOffset(3,n,0)}static addDictionary(e,n){e.addFieldOffset(4,n,0)}static addChildren(e,n){e.addFieldOffset(5,n,0)}static createChildrenVector(e,n){e.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)e.addOffset(n[r]);return e.endVector()}static startChildrenVector(e,n){e.startVector(4,n,4)}static addCustomMetadata(e,n){e.addFieldOffset(6,n,0)}static createCustomMetadataVector(e,n){e.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)e.addOffset(n[r]);return e.endVector()}static startCustomMetadataVector(e,n){e.startVector(4,n,4)}static endField(e){return e.endObject()}},Ap=class vg{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsSchema(e,n){return(n||new vg).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsSchema(e,n){return e.setPosition(e.position()+Os),(n||new vg).__init(e.readInt32(e.position())+e.position(),e)}endianness(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt16(this.bb_pos+e):e2.Little}fields(e,n){const r=this.bb.__offset(this.bb_pos,6);return r?(n||new Wh).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+e*4),this.bb):null}fieldsLength(){const e=this.bb.__offset(this.bb_pos,6);return e?this.bb.__vector_len(this.bb_pos+e):0}customMetadata(e,n){const r=this.bb.__offset(this.bb_pos,8);return r?(n||new Na).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+e*4),this.bb):null}customMetadataLength(){const e=this.bb.__offset(this.bb_pos,8);return e?this.bb.__vector_len(this.bb_pos+e):0}features(e){const n=this.bb.__offset(this.bb_pos,10);return n?this.bb.readInt64(this.bb.__vector(this.bb_pos+n)+e*8):BigInt(0)}featuresLength(){const e=this.bb.__offset(this.bb_pos,10);return e?this.bb.__vector_len(this.bb_pos+e):0}static startSchema(e){e.startObject(4)}static addEndianness(e,n){e.addFieldInt16(0,n,e2.Little)}static addFields(e,n){e.addFieldOffset(1,n,0)}static createFieldsVector(e,n){e.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)e.addOffset(n[r]);return e.endVector()}static startFieldsVector(e,n){e.startVector(4,n,4)}static addCustomMetadata(e,n){e.addFieldOffset(2,n,0)}static createCustomMetadataVector(e,n){e.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)e.addOffset(n[r]);return e.endVector()}static startCustomMetadataVector(e,n){e.startVector(4,n,4)}static addFeatures(e,n){e.addFieldOffset(3,n,0)}static createFeaturesVector(e,n){e.startVector(8,n.length,8);for(let r=n.length-1;r>=0;r--)e.addInt64(n[r]);return e.endVector()}static startFeaturesVector(e,n){e.startVector(8,n,8)}static endSchema(e){return e.endObject()}static finishSchemaBuffer(e,n){e.finish(n)}static finishSizePrefixedSchemaBuffer(e,n){e.finish(n,void 0,!0)}static createSchema(e,n,r,i,s){return vg.startSchema(e),vg.addEndianness(e,n),vg.addFields(e,r),vg.addCustomMetadata(e,i),vg.addFeatures(e,s),vg.endSchema(e)}};var es;(function(t){t[t.NONE=0]="NONE",t[t.Schema=1]="Schema",t[t.DictionaryBatch=2]="DictionaryBatch",t[t.RecordBatch=3]="RecordBatch",t[t.Tensor=4]="Tensor",t[t.SparseTensor=5]="SparseTensor"})(es||(es={}));var Qe;(function(t){t[t.NONE=0]="NONE",t[t.Null=1]="Null",t[t.Int=2]="Int",t[t.Float=3]="Float",t[t.Binary=4]="Binary",t[t.Utf8=5]="Utf8",t[t.Bool=6]="Bool",t[t.Decimal=7]="Decimal",t[t.Date=8]="Date",t[t.Time=9]="Time",t[t.Timestamp=10]="Timestamp",t[t.Interval=11]="Interval",t[t.List=12]="List",t[t.Struct=13]="Struct",t[t.Union=14]="Union",t[t.FixedSizeBinary=15]="FixedSizeBinary",t[t.FixedSizeList=16]="FixedSizeList",t[t.Map=17]="Map",t[t.Duration=18]="Duration",t[t.LargeBinary=19]="LargeBinary",t[t.LargeUtf8=20]="LargeUtf8",t[t.Dictionary=-1]="Dictionary",t[t.Int8=-2]="Int8",t[t.Int16=-3]="Int16",t[t.Int32=-4]="Int32",t[t.Int64=-5]="Int64",t[t.Uint8=-6]="Uint8",t[t.Uint16=-7]="Uint16",t[t.Uint32=-8]="Uint32",t[t.Uint64=-9]="Uint64",t[t.Float16=-10]="Float16",t[t.Float32=-11]="Float32",t[t.Float64=-12]="Float64",t[t.DateDay=-13]="DateDay",t[t.DateMillisecond=-14]="DateMillisecond",t[t.TimestampSecond=-15]="TimestampSecond",t[t.TimestampMillisecond=-16]="TimestampMillisecond",t[t.TimestampMicrosecond=-17]="TimestampMicrosecond",t[t.TimestampNanosecond=-18]="TimestampNanosecond",t[t.TimeSecond=-19]="TimeSecond",t[t.TimeMillisecond=-20]="TimeMillisecond",t[t.TimeMicrosecond=-21]="TimeMicrosecond",t[t.TimeNanosecond=-22]="TimeNanosecond",t[t.DenseUnion=-23]="DenseUnion",t[t.SparseUnion=-24]="SparseUnion",t[t.IntervalDayTime=-25]="IntervalDayTime",t[t.IntervalYearMonth=-26]="IntervalYearMonth",t[t.DurationSecond=-27]="DurationSecond",t[t.DurationMillisecond=-28]="DurationMillisecond",t[t.DurationMicrosecond=-29]="DurationMicrosecond",t[t.DurationNanosecond=-30]="DurationNanosecond"})(Qe||(Qe={}));var Sg;(function(t){t[t.OFFSET=0]="OFFSET",t[t.DATA=1]="DATA",t[t.VALIDITY=2]="VALIDITY",t[t.TYPE=3]="TYPE"})(Sg||(Sg={}));const U1e=void 0;function hk(t){if(t===null)return"null";if(t===U1e)return"undefined";switch(typeof t){case"number":return`${t}`;case"bigint":return`${t}`;case"string":return`"${t}"`}return typeof t[Symbol.toPrimitive]=="function"?t[Symbol.toPrimitive]("string"):ArrayBuffer.isView(t)?t instanceof BigInt64Array||t instanceof BigUint64Array?`[${[...t].map(e=>hk(e))}]`:`[${t}]`:ArrayBuffer.isView(t)?`[${t}]`:JSON.stringify(t,(e,n)=>typeof n=="bigint"?`${n}`:n)}function Hs(t){if(typeof t=="bigint"&&(t<Number.MIN_SAFE_INTEGER||t>Number.MAX_SAFE_INTEGER))throw new TypeError(`${t} is not safe to convert to a number.`);return Number(t)}function nJ(t,e){return Hs(t/e)+Hs(t%e)/Hs(e)}const V1e=Symbol.for("isArrowBigNum");function $d(t,...e){return e.length===0?Object.setPrototypeOf(Ts(this.TypedArray,t),this.constructor.prototype):Object.setPrototypeOf(new this.TypedArray(t,...e),this.constructor.prototype)}$d.prototype[V1e]=!0;$d.prototype.toJSON=function(){return`"${dk(this)}"`};$d.prototype.valueOf=function(t){return rJ(this,t)};$d.prototype.toString=function(){return dk(this)};$d.prototype[Symbol.toPrimitive]=function(t="default"){switch(t){case"number":return rJ(this);case"string":return dk(this);case"default":return X1e(this)}return dk(this)};function pw(...t){return $d.apply(this,t)}function mw(...t){return $d.apply(this,t)}function fk(...t){return $d.apply(this,t)}Object.setPrototypeOf(pw.prototype,Object.create(Int32Array.prototype));Object.setPrototypeOf(mw.prototype,Object.create(Uint32Array.prototype));Object.setPrototypeOf(fk.prototype,Object.create(Uint32Array.prototype));Object.assign(pw.prototype,$d.prototype,{constructor:pw,signed:!0,TypedArray:Int32Array,BigIntArray:BigInt64Array});Object.assign(mw.prototype,$d.prototype,{constructor:mw,signed:!1,TypedArray:Uint32Array,BigIntArray:BigUint64Array});Object.assign(fk.prototype,$d.prototype,{constructor:fk,signed:!0,TypedArray:Uint32Array,BigIntArray:BigUint64Array});const q1e=BigInt(4294967296)*BigInt(4294967296),Z1e=q1e-BigInt(1);function rJ(t,e){const{buffer:n,byteOffset:r,byteLength:i,signed:s}=t,o=new BigUint64Array(n,r,i/8),a=s&&o.at(-1)&BigInt(1)<<BigInt(63);let l=BigInt(0),h=0;if(a){for(const f of o)l|=(f^Z1e)*(BigInt(1)<<BigInt(64*h++));l*=BigInt(-1),l-=BigInt(1)}else for(const f of o)l|=f*(BigInt(1)<<BigInt(64*h++));if(typeof e=="number"){const f=BigInt(Math.pow(10,e)),p=l/f,g=l%f;return Hs(p)+Hs(g)/Hs(f)}return Hs(l)}function dk(t){if(t.byteLength===8)return`${new t.BigIntArray(t.buffer,t.byteOffset,1)[0]}`;if(!t.signed)return oM(t);let e=new Uint16Array(t.buffer,t.byteOffset,t.byteLength/2);if(new Int16Array([e.at(-1)])[0]>=0)return oM(t);e=e.slice();let r=1;for(let s=0;s<e.length;s++){const o=e[s],a=~o+r;e[s]=a,r&=o===0?1:0}return`-${oM(e)}`}function X1e(t){return t.byteLength===8?new t.BigIntArray(t.buffer,t.byteOffset,1)[0]:dk(t)}function oM(t){let e="";const n=new Uint32Array(2);let r=new Uint16Array(t.buffer,t.byteOffset,t.byteLength/2);const i=new Uint32Array((r=new Uint16Array(r).reverse()).buffer);let s=-1;const o=r.length-1;do{for(n[0]=r[s=0];s<o;)r[s++]=n[1]=n[0]/10,n[0]=(n[0]-n[1]*10<<16)+r[s];r[s]=n[1]=n[0]/10,n[0]=n[0]-n[1]*10,e=`${n[0]}${e}`}while(i[0]||i[1]||i[2]||i[3]);return e??"0"}class J${static new(e,n){switch(n){case!0:return new pw(e);case!1:return new mw(e)}switch(e.constructor){case Int8Array:case Int16Array:case Int32Array:case BigInt64Array:return new pw(e)}return e.byteLength===16?new fk(e):new mw(e)}static signed(e){return new pw(e)}static unsigned(e){return new mw(e)}static decimal(e){return new fk(e)}constructor(e,n){return J$.new(e,n)}}var iJ,sJ,oJ,aJ,lJ,uJ,cJ,hJ,fJ,dJ,pJ,mJ,gJ,yJ,vJ,bJ,_J,xJ,wJ,OJ,SJ,kJ;class Xn{static isNull(e){return e?.typeId===Qe.Null}static isInt(e){return e?.typeId===Qe.Int}static isFloat(e){return e?.typeId===Qe.Float}static isBinary(e){return e?.typeId===Qe.Binary}static isLargeBinary(e){return e?.typeId===Qe.LargeBinary}static isUtf8(e){return e?.typeId===Qe.Utf8}static isLargeUtf8(e){return e?.typeId===Qe.LargeUtf8}static isBool(e){return e?.typeId===Qe.Bool}static isDecimal(e){return e?.typeId===Qe.Decimal}static isDate(e){return e?.typeId===Qe.Date}static isTime(e){return e?.typeId===Qe.Time}static isTimestamp(e){return e?.typeId===Qe.Timestamp}static isInterval(e){return e?.typeId===Qe.Interval}static isDuration(e){return e?.typeId===Qe.Duration}static isList(e){return e?.typeId===Qe.List}static isStruct(e){return e?.typeId===Qe.Struct}static isUnion(e){return e?.typeId===Qe.Union}static isFixedSizeBinary(e){return e?.typeId===Qe.FixedSizeBinary}static isFixedSizeList(e){return e?.typeId===Qe.FixedSizeList}static isMap(e){return e?.typeId===Qe.Map}static isDictionary(e){return e?.typeId===Qe.Dictionary}static isDenseUnion(e){return Xn.isUnion(e)&&e.mode===ou.Dense}static isSparseUnion(e){return Xn.isUnion(e)&&e.mode===ou.Sparse}constructor(e){this.typeId=e}}iJ=Symbol.toStringTag;Xn[iJ]=(t=>(t.children=null,t.ArrayType=Array,t.OffsetArrayType=Int32Array,t[Symbol.toStringTag]="DataType"))(Xn.prototype);let s1=class extends Xn{constructor(){super(Qe.Null)}toString(){return"Null"}};sJ=Symbol.toStringTag;s1[sJ]=(t=>t[Symbol.toStringTag]="Null")(s1.prototype);class $b extends Xn{constructor(e,n){super(Qe.Int),this.isSigned=e,this.bitWidth=n}get ArrayType(){switch(this.bitWidth){case 8:return this.isSigned?Int8Array:Uint8Array;case 16:return this.isSigned?Int16Array:Uint16Array;case 32:return this.isSigned?Int32Array:Uint32Array;case 64:return this.isSigned?BigInt64Array:BigUint64Array}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}toString(){return`${this.isSigned?"I":"Ui"}nt${this.bitWidth}`}}oJ=Symbol.toStringTag;$b[oJ]=(t=>(t.isSigned=null,t.bitWidth=null,t[Symbol.toStringTag]="Int"))($b.prototype);class pk extends $b{constructor(){super(!0,32)}get ArrayType(){return Int32Array}}Object.defineProperty(pk.prototype,"ArrayType",{value:Int32Array});class wT extends Xn{constructor(e){super(Qe.Float),this.precision=e}get ArrayType(){switch(this.precision){case Jl.HALF:return Uint16Array;case Jl.SINGLE:return Float32Array;case Jl.DOUBLE:return Float64Array}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}toString(){return`Float${this.precision<<5||16}`}}aJ=Symbol.toStringTag;wT[aJ]=(t=>(t.precision=null,t[Symbol.toStringTag]="Float"))(wT.prototype);class OT extends Xn{constructor(){super(Qe.Binary)}toString(){return"Binary"}}lJ=Symbol.toStringTag;OT[lJ]=(t=>(t.ArrayType=Uint8Array,t[Symbol.toStringTag]="Binary"))(OT.prototype);class ST extends Xn{constructor(){super(Qe.LargeBinary)}toString(){return"LargeBinary"}}uJ=Symbol.toStringTag;ST[uJ]=(t=>(t.ArrayType=Uint8Array,t.OffsetArrayType=BigInt64Array,t[Symbol.toStringTag]="LargeBinary"))(ST.prototype);class kT extends Xn{constructor(){super(Qe.Utf8)}toString(){return"Utf8"}}cJ=Symbol.toStringTag;kT[cJ]=(t=>(t.ArrayType=Uint8Array,t[Symbol.toStringTag]="Utf8"))(kT.prototype);class CT extends Xn{constructor(){super(Qe.LargeUtf8)}toString(){return"LargeUtf8"}}hJ=Symbol.toStringTag;CT[hJ]=(t=>(t.ArrayType=Uint8Array,t.OffsetArrayType=BigInt64Array,t[Symbol.toStringTag]="LargeUtf8"))(CT.prototype);let AT=class extends Xn{constructor(){super(Qe.Bool)}toString(){return"Bool"}};fJ=Symbol.toStringTag;AT[fJ]=(t=>(t.ArrayType=Uint8Array,t[Symbol.toStringTag]="Bool"))(AT.prototype);class ET extends Xn{constructor(e,n,r=128){super(Qe.Decimal),this.scale=e,this.precision=n,this.bitWidth=r}toString(){return`Decimal[${this.precision}e${this.scale>0?"+":""}${this.scale}]`}}dJ=Symbol.toStringTag;ET[dJ]=(t=>(t.scale=null,t.precision=null,t.ArrayType=Uint32Array,t[Symbol.toStringTag]="Decimal"))(ET.prototype);class TT extends Xn{constructor(e){super(Qe.Date),this.unit=e}toString(){return`Date${(this.unit+1)*32}<${_f[this.unit]}>`}get ArrayType(){return this.unit===_f.DAY?Int32Array:BigInt64Array}}pJ=Symbol.toStringTag;TT[pJ]=(t=>(t.unit=null,t[Symbol.toStringTag]="Date"))(TT.prototype);class PT extends Xn{constructor(e,n){super(Qe.Time),this.unit=e,this.bitWidth=n}toString(){return`Time${this.bitWidth}<${_r[this.unit]}>`}get ArrayType(){switch(this.bitWidth){case 32:return Int32Array;case 64:return BigInt64Array}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}}mJ=Symbol.toStringTag;PT[mJ]=(t=>(t.unit=null,t.bitWidth=null,t[Symbol.toStringTag]="Time"))(PT.prototype);class DT extends Xn{constructor(e,n){super(Qe.Timestamp),this.unit=e,this.timezone=n}toString(){return`Timestamp<${_r[this.unit]}${this.timezone?`, ${this.timezone}`:""}>`}}gJ=Symbol.toStringTag;DT[gJ]=(t=>(t.unit=null,t.timezone=null,t.ArrayType=BigInt64Array,t[Symbol.toStringTag]="Timestamp"))(DT.prototype);class IT extends Xn{constructor(e){super(Qe.Interval),this.unit=e}toString(){return`Interval<${cm[this.unit]}>`}}yJ=Symbol.toStringTag;IT[yJ]=(t=>(t.unit=null,t.ArrayType=Int32Array,t[Symbol.toStringTag]="Interval"))(IT.prototype);class MT extends Xn{constructor(e){super(Qe.Duration),this.unit=e}toString(){return`Duration<${_r[this.unit]}>`}}vJ=Symbol.toStringTag;MT[vJ]=(t=>(t.unit=null,t.ArrayType=BigInt64Array,t[Symbol.toStringTag]="Duration"))(MT.prototype);class RT extends Xn{constructor(e){super(Qe.List),this.children=[e]}toString(){return`List<${this.valueType}>`}get valueType(){return this.children[0].type}get valueField(){return this.children[0]}get ArrayType(){return this.valueType.ArrayType}}bJ=Symbol.toStringTag;RT[bJ]=(t=>(t.children=null,t[Symbol.toStringTag]="List"))(RT.prototype);class Pu extends Xn{constructor(e){super(Qe.Struct),this.children=e}toString(){return`Struct<{${this.children.map(e=>`${e.name}:${e.type}`).join(", ")}}>`}}_J=Symbol.toStringTag;Pu[_J]=(t=>(t.children=null,t[Symbol.toStringTag]="Struct"))(Pu.prototype);class FT extends Xn{constructor(e,n,r){super(Qe.Union),this.mode=e,this.children=r,this.typeIds=n=Int32Array.from(n),this.typeIdToChildIndex=n.reduce((i,s,o)=>(i[s]=o)&&i||i,Object.create(null))}toString(){return`${this[Symbol.toStringTag]}<${this.children.map(e=>`${e.type}`).join(" | ")}>`}}xJ=Symbol.toStringTag;FT[xJ]=(t=>(t.mode=null,t.typeIds=null,t.children=null,t.typeIdToChildIndex=null,t.ArrayType=Int8Array,t[Symbol.toStringTag]="Union"))(FT.prototype);class LT extends Xn{constructor(e){super(Qe.FixedSizeBinary),this.byteWidth=e}toString(){return`FixedSizeBinary[${this.byteWidth}]`}}wJ=Symbol.toStringTag;LT[wJ]=(t=>(t.byteWidth=null,t.ArrayType=Uint8Array,t[Symbol.toStringTag]="FixedSizeBinary"))(LT.prototype);class $T extends Xn{constructor(e,n){super(Qe.FixedSizeList),this.listSize=e,this.children=[n]}get valueType(){return this.children[0].type}get valueField(){return this.children[0]}get ArrayType(){return this.valueType.ArrayType}toString(){return`FixedSizeList[${this.listSize}]<${this.valueType}>`}}OJ=Symbol.toStringTag;$T[OJ]=(t=>(t.children=null,t.listSize=null,t[Symbol.toStringTag]="FixedSizeList"))($T.prototype);class BT extends Xn{constructor(e,n=!1){var r,i,s;if(super(Qe.Map),this.children=[e],this.keysSorted=n,e&&(e.name="entries",!((r=e?.type)===null||r===void 0)&&r.children)){const o=(i=e?.type)===null||i===void 0?void 0:i.children[0];o&&(o.name="key");const a=(s=e?.type)===null||s===void 0?void 0:s.children[1];a&&(a.name="value")}}get keyType(){return this.children[0].type.children[0].type}get valueType(){return this.children[0].type.children[1].type}get childType(){return this.children[0].type}toString(){return`Map<{${this.children[0].type.children.map(e=>`${e.name}:${e.type}`).join(", ")}}>`}}SJ=Symbol.toStringTag;BT[SJ]=(t=>(t.children=null,t.keysSorted=null,t[Symbol.toStringTag]="Map_"))(BT.prototype);const W1e=(t=>()=>++t)(-1);class t2 extends Xn{constructor(e,n,r,i){super(Qe.Dictionary),this.indices=n,this.dictionary=e,this.isOrdered=i||!1,this.id=r==null?W1e():Hs(r)}get children(){return this.dictionary.children}get valueType(){return this.dictionary}get ArrayType(){return this.dictionary.ArrayType}toString(){return`Dictionary<${this.indices}, ${this.dictionary}>`}}kJ=Symbol.toStringTag;t2[kJ]=(t=>(t.id=null,t.indices=null,t.isOrdered=null,t.dictionary=null,t[Symbol.toStringTag]="Dictionary"))(t2.prototype);function kg(t){const e=t;switch(t.typeId){case Qe.Decimal:return t.bitWidth/32;case Qe.Interval:return 1+e.unit;case Qe.FixedSizeList:return e.listSize;case Qe.FixedSizeBinary:return e.byteWidth;default:return 1}}class ci{visitMany(e,...n){return e.map((r,i)=>this.visit(r,...n.map(s=>s[i])))}visit(...e){return this.getVisitFn(e[0],!1).apply(this,e)}getVisitFn(e,n=!0){return G1e(this,e,n)}getVisitFnByTypeId(e,n=!0){return Nx(this,e,n)}visitNull(e,...n){return null}visitBool(e,...n){return null}visitInt(e,...n){return null}visitFloat(e,...n){return null}visitUtf8(e,...n){return null}visitLargeUtf8(e,...n){return null}visitBinary(e,...n){return null}visitLargeBinary(e,...n){return null}visitFixedSizeBinary(e,...n){return null}visitDate(e,...n){return null}visitTimestamp(e,...n){return null}visitTime(e,...n){return null}visitDecimal(e,...n){return null}visitList(e,...n){return null}visitStruct(e,...n){return null}visitUnion(e,...n){return null}visitDictionary(e,...n){return null}visitInterval(e,...n){return null}visitDuration(e,...n){return null}visitFixedSizeList(e,...n){return null}visitMap(e,...n){return null}}function G1e(t,e,n=!0){return typeof e=="number"?Nx(t,e,n):typeof e=="string"&&e in Qe?Nx(t,Qe[e],n):e&&e instanceof Xn?Nx(t,Bj(e),n):e?.type&&e.type instanceof Xn?Nx(t,Bj(e.type),n):Nx(t,Qe.NONE,n)}function Nx(t,e,n=!0){let r=null;switch(e){case Qe.Null:r=t.visitNull;break;case Qe.Bool:r=t.visitBool;break;case Qe.Int:r=t.visitInt;break;case Qe.Int8:r=t.visitInt8||t.visitInt;break;case Qe.Int16:r=t.visitInt16||t.visitInt;break;case Qe.Int32:r=t.visitInt32||t.visitInt;break;case Qe.Int64:r=t.visitInt64||t.visitInt;break;case Qe.Uint8:r=t.visitUint8||t.visitInt;break;case Qe.Uint16:r=t.visitUint16||t.visitInt;break;case Qe.Uint32:r=t.visitUint32||t.visitInt;break;case Qe.Uint64:r=t.visitUint64||t.visitInt;break;case Qe.Float:r=t.visitFloat;break;case Qe.Float16:r=t.visitFloat16||t.visitFloat;break;case Qe.Float32:r=t.visitFloat32||t.visitFloat;break;case Qe.Float64:r=t.visitFloat64||t.visitFloat;break;case Qe.Utf8:r=t.visitUtf8;break;case Qe.LargeUtf8:r=t.visitLargeUtf8;break;case Qe.Binary:r=t.visitBinary;break;case Qe.LargeBinary:r=t.visitLargeBinary;break;case Qe.FixedSizeBinary:r=t.visitFixedSizeBinary;break;case Qe.Date:r=t.visitDate;break;case Qe.DateDay:r=t.visitDateDay||t.visitDate;break;case Qe.DateMillisecond:r=t.visitDateMillisecond||t.visitDate;break;case Qe.Timestamp:r=t.visitTimestamp;break;case Qe.TimestampSecond:r=t.visitTimestampSecond||t.visitTimestamp;break;case Qe.TimestampMillisecond:r=t.visitTimestampMillisecond||t.visitTimestamp;break;case Qe.TimestampMicrosecond:r=t.visitTimestampMicrosecond||t.visitTimestamp;break;case Qe.TimestampNanosecond:r=t.visitTimestampNanosecond||t.visitTimestamp;break;case Qe.Time:r=t.visitTime;break;case Qe.TimeSecond:r=t.visitTimeSecond||t.visitTime;break;case Qe.TimeMillisecond:r=t.visitTimeMillisecond||t.visitTime;break;case Qe.TimeMicrosecond:r=t.visitTimeMicrosecond||t.visitTime;break;case Qe.TimeNanosecond:r=t.visitTimeNanosecond||t.visitTime;break;case Qe.Decimal:r=t.visitDecimal;break;case Qe.List:r=t.visitList;break;case Qe.Struct:r=t.visitStruct;break;case Qe.Union:r=t.visitUnion;break;case Qe.DenseUnion:r=t.visitDenseUnion||t.visitUnion;break;case Qe.SparseUnion:r=t.visitSparseUnion||t.visitUnion;break;case Qe.Dictionary:r=t.visitDictionary;break;case Qe.Interval:r=t.visitInterval;break;case Qe.IntervalDayTime:r=t.visitIntervalDayTime||t.visitInterval;break;case Qe.IntervalYearMonth:r=t.visitIntervalYearMonth||t.visitInterval;break;case Qe.Duration:r=t.visitDuration;break;case Qe.DurationSecond:r=t.visitDurationSecond||t.visitDuration;break;case Qe.DurationMillisecond:r=t.visitDurationMillisecond||t.visitDuration;break;case Qe.DurationMicrosecond:r=t.visitDurationMicrosecond||t.visitDuration;break;case Qe.DurationNanosecond:r=t.visitDurationNanosecond||t.visitDuration;break;case Qe.FixedSizeList:r=t.visitFixedSizeList;break;case Qe.Map:r=t.visitMap;break}if(typeof r=="function")return r;if(!n)return()=>null;throw new Error(`Unrecognized type '${Qe[e]}'`)}function Bj(t){switch(t.typeId){case Qe.Null:return Qe.Null;case Qe.Int:{const{bitWidth:e,isSigned:n}=t;switch(e){case 8:return n?Qe.Int8:Qe.Uint8;case 16:return n?Qe.Int16:Qe.Uint16;case 32:return n?Qe.Int32:Qe.Uint32;case 64:return n?Qe.Int64:Qe.Uint64}return Qe.Int}case Qe.Float:switch(t.precision){case Jl.HALF:return Qe.Float16;case Jl.SINGLE:return Qe.Float32;case Jl.DOUBLE:return Qe.Float64}return Qe.Float;case Qe.Binary:return Qe.Binary;case Qe.LargeBinary:return Qe.LargeBinary;case Qe.Utf8:return Qe.Utf8;case Qe.LargeUtf8:return Qe.LargeUtf8;case Qe.Bool:return Qe.Bool;case Qe.Decimal:return Qe.Decimal;case Qe.Time:switch(t.unit){case _r.SECOND:return Qe.TimeSecond;case _r.MILLISECOND:return Qe.TimeMillisecond;case _r.MICROSECOND:return Qe.TimeMicrosecond;case _r.NANOSECOND:return Qe.TimeNanosecond}return Qe.Time;case Qe.Timestamp:switch(t.unit){case _r.SECOND:return Qe.TimestampSecond;case _r.MILLISECOND:return Qe.TimestampMillisecond;case _r.MICROSECOND:return Qe.TimestampMicrosecond;case _r.NANOSECOND:return Qe.TimestampNanosecond}return Qe.Timestamp;case Qe.Date:switch(t.unit){case _f.DAY:return Qe.DateDay;case _f.MILLISECOND:return Qe.DateMillisecond}return Qe.Date;case Qe.Interval:switch(t.unit){case cm.DAY_TIME:return Qe.IntervalDayTime;case cm.YEAR_MONTH:return Qe.IntervalYearMonth}return Qe.Interval;case Qe.Duration:switch(t.unit){case _r.SECOND:return Qe.DurationSecond;case _r.MILLISECOND:return Qe.DurationMillisecond;case _r.MICROSECOND:return Qe.DurationMicrosecond;case _r.NANOSECOND:return Qe.DurationNanosecond}return Qe.Duration;case Qe.Map:return Qe.Map;case Qe.List:return Qe.List;case Qe.Struct:return Qe.Struct;case Qe.Union:switch(t.mode){case ou.Dense:return Qe.DenseUnion;case ou.Sparse:return Qe.SparseUnion}return Qe.Union;case Qe.FixedSizeBinary:return Qe.FixedSizeBinary;case Qe.FixedSizeList:return Qe.FixedSizeList;case Qe.Dictionary:return Qe.Dictionary}throw new Error(`Unrecognized type '${Qe[t.typeId]}'`)}ci.prototype.visitInt8=null;ci.prototype.visitInt16=null;ci.prototype.visitInt32=null;ci.prototype.visitInt64=null;ci.prototype.visitUint8=null;ci.prototype.visitUint16=null;ci.prototype.visitUint32=null;ci.prototype.visitUint64=null;ci.prototype.visitFloat16=null;ci.prototype.visitFloat32=null;ci.prototype.visitFloat64=null;ci.prototype.visitDateDay=null;ci.prototype.visitDateMillisecond=null;ci.prototype.visitTimestampSecond=null;ci.prototype.visitTimestampMillisecond=null;ci.prototype.visitTimestampMicrosecond=null;ci.prototype.visitTimestampNanosecond=null;ci.prototype.visitTimeSecond=null;ci.prototype.visitTimeMillisecond=null;ci.prototype.visitTimeMicrosecond=null;ci.prototype.visitTimeNanosecond=null;ci.prototype.visitDenseUnion=null;ci.prototype.visitSparseUnion=null;ci.prototype.visitIntervalDayTime=null;ci.prototype.visitIntervalYearMonth=null;ci.prototype.visitDuration=null;ci.prototype.visitDurationSecond=null;ci.prototype.visitDurationMillisecond=null;ci.prototype.visitDurationMicrosecond=null;ci.prototype.visitDurationNanosecond=null;const CJ=new Float64Array(1),Ox=new Uint32Array(CJ.buffer);function AJ(t){const e=(t&31744)>>10,n=(t&1023)/1024,r=Math.pow(-1,(t&32768)>>15);switch(e){case 31:return r*(n?Number.NaN:1/0);case 0:return r*(n?6103515625e-14*n:0)}return r*Math.pow(2,e-15)*(1+n)}function Y1e(t){if(t!==t)return 32256;CJ[0]=t;const e=(Ox[1]&2147483648)>>16&65535;let n=Ox[1]&2146435072,r=0;return n>=1089470464?Ox[0]>0?n=31744:(n=(n&2080374784)>>16,r=(Ox[1]&1048575)>>10):n<=1056964608?(r=1048576+(Ox[1]&1048575),r=1048576+(r<<(n>>20)-998)>>21,n=0):(n=n-1056964608>>10,r=(Ox[1]&1048575)+512>>10),e|n|r&65535}class xr extends ci{}function kr(t){return(e,n,r)=>{if(e.setValid(n,r!=null))return t(e,n,r)}}const H1e=(t,e,n)=>{t[e]=Math.floor(n/864e5)},EJ=(t,e,n,r)=>{if(n+1<e.length){const i=Hs(e[n]),s=Hs(e[n+1]);t.set(r.subarray(0,s-i),i)}},K1e=({offset:t,values:e},n,r)=>{const i=t+n;r?e[i>>3]|=1<<i%8:e[i>>3]&=~(1<<i%8)},g0=({values:t},e,n)=>{t[e]=n},eB=({values:t},e,n)=>{t[e]=n},TJ=({values:t},e,n)=>{t[e]=Y1e(n)},J1e=(t,e,n)=>{switch(t.type.precision){case Jl.HALF:return TJ(t,e,n);case Jl.SINGLE:case Jl.DOUBLE:return eB(t,e,n)}},PJ=({values:t},e,n)=>{H1e(t,e,n.valueOf())},DJ=({values:t},e,n)=>{t[e]=BigInt(n)},eve=({stride:t,values:e},n,r)=>{e.set(r.subarray(0,t),t*n)},IJ=({values:t,valueOffsets:e},n,r)=>EJ(t,e,n,r),MJ=({values:t,valueOffsets:e},n,r)=>EJ(t,e,n,Y$(r)),tve=(t,e,n)=>{t.type.unit===_f.DAY?PJ(t,e,n):DJ(t,e,n)},RJ=({values:t},e,n)=>{t[e]=BigInt(n/1e3)},FJ=({values:t},e,n)=>{t[e]=BigInt(n)},LJ=({values:t},e,n)=>{t[e]=BigInt(n*1e3)},$J=({values:t},e,n)=>{t[e]=BigInt(n*1e6)},nve=(t,e,n)=>{switch(t.type.unit){case _r.SECOND:return RJ(t,e,n);case _r.MILLISECOND:return FJ(t,e,n);case _r.MICROSECOND:return LJ(t,e,n);case _r.NANOSECOND:return $J(t,e,n)}},BJ=({values:t},e,n)=>{t[e]=n},NJ=({values:t},e,n)=>{t[e]=n},zJ=({values:t},e,n)=>{t[e]=n},QJ=({values:t},e,n)=>{t[e]=n},rve=(t,e,n)=>{switch(t.type.unit){case _r.SECOND:return BJ(t,e,n);case _r.MILLISECOND:return NJ(t,e,n);case _r.MICROSECOND:return zJ(t,e,n);case _r.NANOSECOND:return QJ(t,e,n)}},ive=({values:t,stride:e},n,r)=>{t.set(r.subarray(0,e),e*n)},sve=(t,e,n)=>{const r=t.children[0],i=t.valueOffsets,s=xf.getVisitFn(r);if(Array.isArray(n))for(let o=-1,a=i[e],l=i[e+1];a<l;)s(r,a++,n[++o]);else for(let o=-1,a=i[e],l=i[e+1];a<l;)s(r,a++,n.get(++o))},ove=(t,e,n)=>{const r=t.children[0],{valueOffsets:i}=t,s=xf.getVisitFn(r);let{[e]:o,[e+1]:a}=i;const l=n instanceof Map?n.entries():Object.entries(n);for(const h of l)if(s(r,o,h),++o>=a)break},ave=(t,e)=>(n,r,i,s)=>r&&n(r,t,e[s]),lve=(t,e)=>(n,r,i,s)=>r&&n(r,t,e.get(s)),uve=(t,e)=>(n,r,i,s)=>r&&n(r,t,e.get(i.name)),cve=(t,e)=>(n,r,i,s)=>r&&n(r,t,e[i.name]),hve=(t,e,n)=>{const r=t.type.children.map(s=>xf.getVisitFn(s.type)),i=n instanceof Map?uve(e,n):n instanceof bs?lve(e,n):Array.isArray(n)?ave(e,n):cve(e,n);t.type.children.forEach((s,o)=>i(r[o],t.children[o],s,o))},fve=(t,e,n)=>{t.type.mode===ou.Dense?jJ(t,e,n):UJ(t,e,n)},jJ=(t,e,n)=>{const r=t.type.typeIdToChildIndex[t.typeIds[e]],i=t.children[r];xf.visit(i,t.valueOffsets[e],n)},UJ=(t,e,n)=>{const r=t.type.typeIdToChildIndex[t.typeIds[e]],i=t.children[r];xf.visit(i,e,n)},dve=(t,e,n)=>{var r;(r=t.dictionary)===null||r===void 0||r.set(t.values[e],n)},pve=(t,e,n)=>{t.type.unit===cm.DAY_TIME?VJ(t,e,n):qJ(t,e,n)},VJ=({values:t},e,n)=>{t.set(n.subarray(0,2),2*e)},qJ=({values:t},e,n)=>{t[e]=n[0]*12+n[1]%12},ZJ=({values:t},e,n)=>{t[e]=n},XJ=({values:t},e,n)=>{t[e]=n},WJ=({values:t},e,n)=>{t[e]=n},GJ=({values:t},e,n)=>{t[e]=n},mve=(t,e,n)=>{switch(t.type.unit){case _r.SECOND:return ZJ(t,e,n);case _r.MILLISECOND:return XJ(t,e,n);case _r.MICROSECOND:return WJ(t,e,n);case _r.NANOSECOND:return GJ(t,e,n)}},gve=(t,e,n)=>{const{stride:r}=t,i=t.children[0],s=xf.getVisitFn(i);if(Array.isArray(n))for(let o=-1,a=e*r;++o<r;)s(i,a+o,n[o]);else for(let o=-1,a=e*r;++o<r;)s(i,a+o,n.get(o))};xr.prototype.visitBool=kr(K1e);xr.prototype.visitInt=kr(g0);xr.prototype.visitInt8=kr(g0);xr.prototype.visitInt16=kr(g0);xr.prototype.visitInt32=kr(g0);xr.prototype.visitInt64=kr(g0);xr.prototype.visitUint8=kr(g0);xr.prototype.visitUint16=kr(g0);xr.prototype.visitUint32=kr(g0);xr.prototype.visitUint64=kr(g0);xr.prototype.visitFloat=kr(J1e);xr.prototype.visitFloat16=kr(TJ);xr.prototype.visitFloat32=kr(eB);xr.prototype.visitFloat64=kr(eB);xr.prototype.visitUtf8=kr(MJ);xr.prototype.visitLargeUtf8=kr(MJ);xr.prototype.visitBinary=kr(IJ);xr.prototype.visitLargeBinary=kr(IJ);xr.prototype.visitFixedSizeBinary=kr(eve);xr.prototype.visitDate=kr(tve);xr.prototype.visitDateDay=kr(PJ);xr.prototype.visitDateMillisecond=kr(DJ);xr.prototype.visitTimestamp=kr(nve);xr.prototype.visitTimestampSecond=kr(RJ);xr.prototype.visitTimestampMillisecond=kr(FJ);xr.prototype.visitTimestampMicrosecond=kr(LJ);xr.prototype.visitTimestampNanosecond=kr($J);xr.prototype.visitTime=kr(rve);xr.prototype.visitTimeSecond=kr(BJ);xr.prototype.visitTimeMillisecond=kr(NJ);xr.prototype.visitTimeMicrosecond=kr(zJ);xr.prototype.visitTimeNanosecond=kr(QJ);xr.prototype.visitDecimal=kr(ive);xr.prototype.visitList=kr(sve);xr.prototype.visitStruct=kr(hve);xr.prototype.visitUnion=kr(fve);xr.prototype.visitDenseUnion=kr(jJ);xr.prototype.visitSparseUnion=kr(UJ);xr.prototype.visitDictionary=kr(dve);xr.prototype.visitInterval=kr(pve);xr.prototype.visitIntervalDayTime=kr(VJ);xr.prototype.visitIntervalYearMonth=kr(qJ);xr.prototype.visitDuration=kr(mve);xr.prototype.visitDurationSecond=kr(ZJ);xr.prototype.visitDurationMillisecond=kr(XJ);xr.prototype.visitDurationMicrosecond=kr(WJ);xr.prototype.visitDurationNanosecond=kr(GJ);xr.prototype.visitFixedSizeList=kr(gve);xr.prototype.visitMap=kr(ove);const xf=new xr,ld=Symbol.for("parent"),gw=Symbol.for("rowIndex");class tB{constructor(e,n){return this[ld]=e,this[gw]=n,new Proxy(this,new vve)}toArray(){return Object.values(this.toJSON())}toJSON(){const e=this[gw],n=this[ld],r=n.type.children,i={};for(let s=-1,o=r.length;++s<o;)i[r[s].name]=Ac.visit(n.children[s],e);return i}toString(){return`{${[...this].map(([e,n])=>`${hk(e)}: ${hk(n)}`).join(", ")}}`}[Symbol.for("nodejs.util.inspect.custom")](){return this.toString()}[Symbol.iterator](){return new yve(this[ld],this[gw])}}class yve{constructor(e,n){this.childIndex=0,this.children=e.children,this.rowIndex=n,this.childFields=e.type.children,this.numChildren=this.childFields.length}[Symbol.iterator](){return this}next(){const e=this.childIndex;return e<this.numChildren?(this.childIndex=e+1,{done:!1,value:[this.childFields[e].name,Ac.visit(this.children[e],this.rowIndex)]}):{done:!0,value:null}}}Object.defineProperties(tB.prototype,{[Symbol.toStringTag]:{enumerable:!1,configurable:!1,value:"Row"},[ld]:{writable:!0,enumerable:!1,configurable:!1,value:null},[gw]:{writable:!0,enumerable:!1,configurable:!1,value:-1}});class vve{isExtensible(){return!1}deleteProperty(){return!1}preventExtensions(){return!0}ownKeys(e){return e[ld].type.children.map(n=>n.name)}has(e,n){return e[ld].type.children.findIndex(r=>r.name===n)!==-1}getOwnPropertyDescriptor(e,n){if(e[ld].type.children.findIndex(r=>r.name===n)!==-1)return{writable:!0,enumerable:!0,configurable:!0}}get(e,n){if(Reflect.has(e,n))return e[n];const r=e[ld].type.children.findIndex(i=>i.name===n);if(r!==-1){const i=Ac.visit(e[ld].children[r],e[gw]);return Reflect.set(e,n,i),i}}set(e,n,r){const i=e[ld].type.children.findIndex(s=>s.name===n);return i!==-1?(xf.visit(e[ld].children[i],e[gw],r),Reflect.set(e,n,r)):Reflect.has(e,n)||typeof n=="symbol"?Reflect.set(e,n,r):!1}}class fr extends ci{}function wr(t){return(e,n)=>e.getValid(n)?t(e,n):null}const bve=(t,e)=>864e5*t[e],_ve=(t,e)=>null,YJ=(t,e,n)=>{if(n+1>=e.length)return null;const r=Hs(e[n]),i=Hs(e[n+1]);return t.subarray(r,i)},xve=({offset:t,values:e},n)=>{const r=t+n;return(e[r>>3]&1<<r%8)!==0},HJ=({values:t},e)=>bve(t,e),KJ=({values:t},e)=>Hs(t[e]),O1=({stride:t,values:e},n)=>e[t*n],wve=({stride:t,values:e},n)=>AJ(e[t*n]),JJ=({values:t},e)=>t[e],Ove=({stride:t,values:e},n)=>e.subarray(t*n,t*(n+1)),eee=({values:t,valueOffsets:e},n)=>YJ(t,e,n),tee=({values:t,valueOffsets:e},n)=>{const r=YJ(t,e,n);return r!==null?H7(r):null},Sve=({values:t},e)=>t[e],kve=({type:t,values:e},n)=>t.precision!==Jl.HALF?e[n]:AJ(e[n]),Cve=(t,e)=>t.type.unit===_f.DAY?HJ(t,e):KJ(t,e),nee=({values:t},e)=>1e3*Hs(t[e]),ree=({values:t},e)=>Hs(t[e]),iee=({values:t},e)=>nJ(t[e],BigInt(1e3)),see=({values:t},e)=>nJ(t[e],BigInt(1e6)),Ave=(t,e)=>{switch(t.type.unit){case _r.SECOND:return nee(t,e);case _r.MILLISECOND:return ree(t,e);case _r.MICROSECOND:return iee(t,e);case _r.NANOSECOND:return see(t,e)}},oee=({values:t},e)=>t[e],aee=({values:t},e)=>t[e],lee=({values:t},e)=>t[e],uee=({values:t},e)=>t[e],Eve=(t,e)=>{switch(t.type.unit){case _r.SECOND:return oee(t,e);case _r.MILLISECOND:return aee(t,e);case _r.MICROSECOND:return lee(t,e);case _r.NANOSECOND:return uee(t,e)}},Tve=({values:t,stride:e},n)=>J$.decimal(t.subarray(e*n,e*(n+1))),Pve=(t,e)=>{const{valueOffsets:n,stride:r,children:i}=t,{[e*r]:s,[e*r+1]:o}=n,l=i[0].slice(s,o-s);return new bs([l])},Dve=(t,e)=>{const{valueOffsets:n,children:r}=t,{[e]:i,[e+1]:s}=n,o=r[0];return new nB(o.slice(i,s-i))},Ive=(t,e)=>new tB(t,e),Mve=(t,e)=>t.type.mode===ou.Dense?cee(t,e):hee(t,e),cee=(t,e)=>{const n=t.type.typeIdToChildIndex[t.typeIds[e]],r=t.children[n];return Ac.visit(r,t.valueOffsets[e])},hee=(t,e)=>{const n=t.type.typeIdToChildIndex[t.typeIds[e]],r=t.children[n];return Ac.visit(r,e)},Rve=(t,e)=>{var n;return(n=t.dictionary)===null||n===void 0?void 0:n.get(t.values[e])},Fve=(t,e)=>t.type.unit===cm.DAY_TIME?fee(t,e):dee(t,e),fee=({values:t},e)=>t.subarray(2*e,2*(e+1)),dee=({values:t},e)=>{const n=t[e],r=new Int32Array(2);return r[0]=Math.trunc(n/12),r[1]=Math.trunc(n%12),r},pee=({values:t},e)=>t[e],mee=({values:t},e)=>t[e],gee=({values:t},e)=>t[e],yee=({values:t},e)=>t[e],Lve=(t,e)=>{switch(t.type.unit){case _r.SECOND:return pee(t,e);case _r.MILLISECOND:return mee(t,e);case _r.MICROSECOND:return gee(t,e);case _r.NANOSECOND:return yee(t,e)}},$ve=(t,e)=>{const{stride:n,children:r}=t,s=r[0].slice(e*n,n);return new bs([s])};fr.prototype.visitNull=wr(_ve);fr.prototype.visitBool=wr(xve);fr.prototype.visitInt=wr(Sve);fr.prototype.visitInt8=wr(O1);fr.prototype.visitInt16=wr(O1);fr.prototype.visitInt32=wr(O1);fr.prototype.visitInt64=wr(JJ);fr.prototype.visitUint8=wr(O1);fr.prototype.visitUint16=wr(O1);fr.prototype.visitUint32=wr(O1);fr.prototype.visitUint64=wr(JJ);fr.prototype.visitFloat=wr(kve);fr.prototype.visitFloat16=wr(wve);fr.prototype.visitFloat32=wr(O1);fr.prototype.visitFloat64=wr(O1);fr.prototype.visitUtf8=wr(tee);fr.prototype.visitLargeUtf8=wr(tee);fr.prototype.visitBinary=wr(eee);fr.prototype.visitLargeBinary=wr(eee);fr.prototype.visitFixedSizeBinary=wr(Ove);fr.prototype.visitDate=wr(Cve);fr.prototype.visitDateDay=wr(HJ);fr.prototype.visitDateMillisecond=wr(KJ);fr.prototype.visitTimestamp=wr(Ave);fr.prototype.visitTimestampSecond=wr(nee);fr.prototype.visitTimestampMillisecond=wr(ree);fr.prototype.visitTimestampMicrosecond=wr(iee);fr.prototype.visitTimestampNanosecond=wr(see);fr.prototype.visitTime=wr(Eve);fr.prototype.visitTimeSecond=wr(oee);fr.prototype.visitTimeMillisecond=wr(aee);fr.prototype.visitTimeMicrosecond=wr(lee);fr.prototype.visitTimeNanosecond=wr(uee);fr.prototype.visitDecimal=wr(Tve);fr.prototype.visitList=wr(Pve);fr.prototype.visitStruct=wr(Ive);fr.prototype.visitUnion=wr(Mve);fr.prototype.visitDenseUnion=wr(cee);fr.prototype.visitSparseUnion=wr(hee);fr.prototype.visitDictionary=wr(Rve);fr.prototype.visitInterval=wr(Fve);fr.prototype.visitIntervalDayTime=wr(fee);fr.prototype.visitIntervalYearMonth=wr(dee);fr.prototype.visitDuration=wr(Lve);fr.prototype.visitDurationSecond=wr(pee);fr.prototype.visitDurationMillisecond=wr(mee);fr.prototype.visitDurationMicrosecond=wr(gee);fr.prototype.visitDurationNanosecond=wr(yee);fr.prototype.visitFixedSizeList=wr($ve);fr.prototype.visitMap=wr(Dve);const Ac=new fr,zx=Symbol.for("keys"),yw=Symbol.for("vals"),Qx=Symbol.for("kKeysAsStrings"),rF=Symbol.for("_kKeysAsStrings");class nB{constructor(e){return this[zx]=new bs([e.children[0]]).memoize(),this[yw]=e.children[1],new Proxy(this,new Nve)}get[Qx](){return this[rF]||(this[rF]=Array.from(this[zx].toArray(),String))}[Symbol.iterator](){return new Bve(this[zx],this[yw])}get size(){return this[zx].length}toArray(){return Object.values(this.toJSON())}toJSON(){const e=this[zx],n=this[yw],r={};for(let i=-1,s=e.length;++i<s;)r[e.get(i)]=Ac.visit(n,i);return r}toString(){return`{${[...this].map(([e,n])=>`${hk(e)}: ${hk(n)}`).join(", ")}}`}[Symbol.for("nodejs.util.inspect.custom")](){return this.toString()}}class Bve{constructor(e,n){this.keys=e,this.vals=n,this.keyIndex=0,this.numKeys=e.length}[Symbol.iterator](){return this}next(){const e=this.keyIndex;return e===this.numKeys?{done:!0,value:null}:(this.keyIndex++,{done:!1,value:[this.keys.get(e),Ac.visit(this.vals,e)]})}}class Nve{isExtensible(){return!1}deleteProperty(){return!1}preventExtensions(){return!0}ownKeys(e){return e[Qx]}has(e,n){return e[Qx].includes(n)}getOwnPropertyDescriptor(e,n){if(e[Qx].indexOf(n)!==-1)return{writable:!0,enumerable:!0,configurable:!0}}get(e,n){if(Reflect.has(e,n))return e[n];const r=e[Qx].indexOf(n);if(r!==-1){const i=Ac.visit(Reflect.get(e,yw),r);return Reflect.set(e,n,i),i}}set(e,n,r){const i=e[Qx].indexOf(n);return i!==-1?(xf.visit(Reflect.get(e,yw),i,r),Reflect.set(e,n,r)):Reflect.has(e,n)?Reflect.set(e,n,r):!1}}Object.defineProperties(nB.prototype,{[Symbol.toStringTag]:{enumerable:!1,configurable:!1,value:"Row"},[zx]:{writable:!0,enumerable:!1,configurable:!1,value:null},[yw]:{writable:!0,enumerable:!1,configurable:!1,value:null},[rF]:{writable:!0,enumerable:!1,configurable:!1,value:null}});let Nj;function vee(t,e,n,r){const{length:i=0}=t;let s=typeof e!="number"?0:e,o=typeof n!="number"?i:n;return s<0&&(s=(s%i+i)%i),o<0&&(o=(o%i+i)%i),o<s&&(Nj=s,s=o,o=Nj),o>i&&(o=i),r?r(t,s,o):[s,o]}const rB=(t,e)=>t<0?e+t:t,zj=t=>t!==t;function Y2(t){if(typeof t!=="object"||t===null)return zj(t)?zj:n=>n===t;if(t instanceof Date){const n=t.valueOf();return r=>r instanceof Date?r.valueOf()===n:!1}return ArrayBuffer.isView(t)?n=>n?$1e(t,n):!1:t instanceof Map?Qve(t):Array.isArray(t)?zve(t):t instanceof bs?jve(t):Uve(t,!0)}function zve(t){const e=[];for(let n=-1,r=t.length;++n<r;)e[n]=Y2(t[n]);return uD(e)}function Qve(t){let e=-1;const n=[];for(const r of t.values())n[++e]=Y2(r);return uD(n)}function jve(t){const e=[];for(let n=-1,r=t.length;++n<r;)e[n]=Y2(t.get(n));return uD(e)}function Uve(t,e=!1){const n=Object.keys(t);if(!e&&n.length===0)return()=>!1;const r=[];for(let i=-1,s=n.length;++i<s;)r[i]=Y2(t[n[i]]);return uD(r,n)}function uD(t,e){return n=>{if(!n||typeof n!="object")return!1;switch(n.constructor){case Array:return Vve(t,n);case Map:return Qj(t,n,n.keys());case nB:case tB:case Object:case void 0:return Qj(t,n,e||Object.keys(n))}return n instanceof bs?qve(t,n):!1}}function Vve(t,e){const n=t.length;if(e.length!==n)return!1;for(let r=-1;++r<n;)if(!t[r](e[r]))return!1;return!0}function qve(t,e){const n=t.length;if(e.length!==n)return!1;for(let r=-1;++r<n;)if(!t[r](e.get(r)))return!1;return!0}function Qj(t,e,n){const r=n[Symbol.iterator](),i=e instanceof Map?e.keys():Object.keys(e)[Symbol.iterator](),s=e instanceof Map?e.values():Object.values(e)[Symbol.iterator]();let o=0;const a=t.length;let l=s.next(),h=r.next(),f=i.next();for(;o<a&&!h.done&&!f.done&&!l.done&&!(h.value!==f.value||!t[o](l.value));++o,h=r.next(),f=i.next(),l=s.next());return o===a&&h.done&&f.done&&l.done?!0:(r.return&&r.return(),i.return&&i.return(),s.return&&s.return(),!1)}function bee(t,e,n,r){return(n&1<<r)!==0}function Zve(t,e,n,r){return(n&1<<r)>>r}function NT(t,e,n){const r=n.byteLength+7&-8;if(t>0||n.byteLength<r){const i=new Uint8Array(r);return i.set(t%8===0?n.subarray(t>>3):zT(new iB(n,t,e,null,bee)).subarray(0,r)),i}return n}function zT(t){const e=[];let n=0,r=0,i=0;for(const o of t)o&&(i|=1<<r),++r===8&&(e[n++]=i,i=r=0);(n===0||r>0)&&(e[n++]=i);const s=new Uint8Array(e.length+7&-8);return s.set(e),s}class iB{constructor(e,n,r,i,s){this.bytes=e,this.length=r,this.context=i,this.get=s,this.bit=n%8,this.byteIndex=n>>3,this.byte=e[this.byteIndex++],this.index=0}next(){return this.index<this.length?(this.bit===8&&(this.bit=0,this.byte=this.bytes[this.byteIndex++]),{value:this.get(this.context,this.index++,this.byte,this.bit++)}):{done:!0,value:null}}[Symbol.iterator](){return this}}function iF(t,e,n){if(n-e<=0)return 0;if(n-e<8){let s=0;for(const o of new iB(t,e,n-e,t,Zve))s+=o;return s}const r=n>>3<<3,i=e+(e%8===0?0:8-e%8);return iF(t,e,i)+iF(t,r,n)+Xve(t,i>>3,r-i>>3)}function Xve(t,e,n){let r=0,i=Math.trunc(e);const s=new DataView(t.buffer,t.byteOffset,t.byteLength),o=n===void 0?t.byteLength:i+n;for(;o-i>=4;)r+=aM(s.getUint32(i)),i+=4;for(;o-i>=2;)r+=aM(s.getUint16(i)),i+=2;for(;o-i>=1;)r+=aM(s.getUint8(i)),i+=1;return r}function aM(t){let e=Math.trunc(t);return e=e-(e>>>1&1431655765),e=(e&858993459)+(e>>>2&858993459),(e+(e>>>4)&252645135)*16843009>>>24}const Wve=-1;class As{get typeId(){return this.type.typeId}get ArrayType(){return this.type.ArrayType}get buffers(){return[this.valueOffsets,this.values,this.nullBitmap,this.typeIds]}get nullable(){if(this._nullCount!==0){const{type:e}=this;return Xn.isSparseUnion(e)?this.children.some(n=>n.nullable):Xn.isDenseUnion(e)?this.children.some(n=>n.nullable):this.nullBitmap&&this.nullBitmap.byteLength>0}return!0}get byteLength(){let e=0;const{valueOffsets:n,values:r,nullBitmap:i,typeIds:s}=this;return n&&(e+=n.byteLength),r&&(e+=r.byteLength),i&&(e+=i.byteLength),s&&(e+=s.byteLength),this.children.reduce((o,a)=>o+a.byteLength,e)}get nullCount(){if(Xn.isUnion(this.type))return this.children.reduce((r,i)=>r+i.nullCount,0);let e=this._nullCount,n;return e<=Wve&&(n=this.nullBitmap)&&(this._nullCount=e=n.length===0?0:this.length-iF(n,this.offset,this.offset+this.length)),e}constructor(e,n,r,i,s,o=[],a){this.type=e,this.children=o,this.dictionary=a,this.offset=Math.floor(Math.max(n||0,0)),this.length=Math.floor(Math.max(r||0,0)),this._nullCount=Math.floor(Math.max(i||0,-1));let l;s instanceof As?(this.stride=s.stride,this.values=s.values,this.typeIds=s.typeIds,this.nullBitmap=s.nullBitmap,this.valueOffsets=s.valueOffsets):(this.stride=kg(e),s&&((l=s[0])&&(this.valueOffsets=l),(l=s[1])&&(this.values=l),(l=s[2])&&(this.nullBitmap=l),(l=s[3])&&(this.typeIds=l)))}getValid(e){const{type:n}=this;if(Xn.isUnion(n)){const r=n,i=this.children[r.typeIdToChildIndex[this.typeIds[e]]],s=r.mode===ou.Dense?this.valueOffsets[e]:e;return i.getValid(s)}if(this.nullable&&this.nullCount>0){const r=this.offset+e;return(this.nullBitmap[r>>3]&1<<r%8)!==0}return!0}setValid(e,n){let r;const{type:i}=this;if(Xn.isUnion(i)){const s=i,o=this.children[s.typeIdToChildIndex[this.typeIds[e]]],a=s.mode===ou.Dense?this.valueOffsets[e]:e;r=o.getValid(a),o.setValid(a,n)}else{let{nullBitmap:s}=this;const{offset:o,length:a}=this,l=o+e,h=1<<l%8,f=l>>3;(!s||s.byteLength<=f)&&(s=new Uint8Array((o+a+63&-64)>>3).fill(255),this.nullCount>0?(s.set(NT(o,a,this.nullBitmap),0),Object.assign(this,{nullBitmap:s})):Object.assign(this,{nullBitmap:s,_nullCount:0}));const p=s[f];r=(p&h)!==0,s[f]=n?p|h:p&~h}return r!==!!n&&(this._nullCount=this.nullCount+(n?-1:1)),n}clone(e=this.type,n=this.offset,r=this.length,i=this._nullCount,s=this,o=this.children){return new As(e,n,r,i,s,o,this.dictionary)}slice(e,n){const{stride:r,typeId:i,children:s}=this,o=+(this._nullCount===0)-1,a=i===16?r:1,l=this._sliceBuffers(e,n,r,i);return this.clone(this.type,this.offset+e,n,o,l,s.length===0||this.valueOffsets?s:this._sliceChildren(s,a*e,a*n))}_changeLengthAndBackfillNullBitmap(e){if(this.typeId===Qe.Null)return this.clone(this.type,0,e,0);const{length:n,nullCount:r}=this,i=new Uint8Array((e+63&-64)>>3).fill(255,0,n>>3);i[n>>3]=(1<<n-(n&-8))-1,r>0&&i.set(NT(this.offset,n,this.nullBitmap),0);const s=this.buffers;return s[Sg.VALIDITY]=i,this.clone(this.type,0,e,r+(e-n),s)}_sliceBuffers(e,n,r,i){let s;const{buffers:o}=this;return(s=o[Sg.TYPE])&&(o[Sg.TYPE]=s.subarray(e,e+n)),(s=o[Sg.OFFSET])&&(o[Sg.OFFSET]=s.subarray(e,e+n+1))||(s=o[Sg.DATA])&&(o[Sg.DATA]=i===6?s:s.subarray(r*e,r*(e+n))),o}_sliceChildren(e,n,r){return e.map(i=>i.slice(n,r))}}As.prototype.children=Object.freeze([]);class F3 extends ci{visit(e){return this.getVisitFn(e.type).call(this,e)}visitNull(e){const{["type"]:n,["offset"]:r=0,["length"]:i=0}=e;return new As(n,r,i,i)}visitBool(e){const{["type"]:n,["offset"]:r=0}=e,i=Di(e.nullBitmap),s=Ts(n.ArrayType,e.data),{["length"]:o=s.length>>3,["nullCount"]:a=e.nullBitmap?-1:0}=e;return new As(n,r,o,a,[void 0,s,i])}visitInt(e){const{["type"]:n,["offset"]:r=0}=e,i=Di(e.nullBitmap),s=Ts(n.ArrayType,e.data),{["length"]:o=s.length,["nullCount"]:a=e.nullBitmap?-1:0}=e;return new As(n,r,o,a,[void 0,s,i])}visitFloat(e){const{["type"]:n,["offset"]:r=0}=e,i=Di(e.nullBitmap),s=Ts(n.ArrayType,e.data),{["length"]:o=s.length,["nullCount"]:a=e.nullBitmap?-1:0}=e;return new As(n,r,o,a,[void 0,s,i])}visitUtf8(e){const{["type"]:n,["offset"]:r=0}=e,i=Di(e.data),s=Di(e.nullBitmap),o=TS(e.valueOffsets),{["length"]:a=o.length-1,["nullCount"]:l=e.nullBitmap?-1:0}=e;return new As(n,r,a,l,[o,i,s])}visitLargeUtf8(e){const{["type"]:n,["offset"]:r=0}=e,i=Di(e.data),s=Di(e.nullBitmap),o=Ej(e.valueOffsets),{["length"]:a=o.length-1,["nullCount"]:l=e.nullBitmap?-1:0}=e;return new As(n,r,a,l,[o,i,s])}visitBinary(e){const{["type"]:n,["offset"]:r=0}=e,i=Di(e.data),s=Di(e.nullBitmap),o=TS(e.valueOffsets),{["length"]:a=o.length-1,["nullCount"]:l=e.nullBitmap?-1:0}=e;return new As(n,r,a,l,[o,i,s])}visitLargeBinary(e){const{["type"]:n,["offset"]:r=0}=e,i=Di(e.data),s=Di(e.nullBitmap),o=Ej(e.valueOffsets),{["length"]:a=o.length-1,["nullCount"]:l=e.nullBitmap?-1:0}=e;return new As(n,r,a,l,[o,i,s])}visitFixedSizeBinary(e){const{["type"]:n,["offset"]:r=0}=e,i=Di(e.nullBitmap),s=Ts(n.ArrayType,e.data),{["length"]:o=s.length/kg(n),["nullCount"]:a=e.nullBitmap?-1:0}=e;return new As(n,r,o,a,[void 0,s,i])}visitDate(e){const{["type"]:n,["offset"]:r=0}=e,i=Di(e.nullBitmap),s=Ts(n.ArrayType,e.data),{["length"]:o=s.length/kg(n),["nullCount"]:a=e.nullBitmap?-1:0}=e;return new As(n,r,o,a,[void 0,s,i])}visitTimestamp(e){const{["type"]:n,["offset"]:r=0}=e,i=Di(e.nullBitmap),s=Ts(n.ArrayType,e.data),{["length"]:o=s.length/kg(n),["nullCount"]:a=e.nullBitmap?-1:0}=e;return new As(n,r,o,a,[void 0,s,i])}visitTime(e){const{["type"]:n,["offset"]:r=0}=e,i=Di(e.nullBitmap),s=Ts(n.ArrayType,e.data),{["length"]:o=s.length/kg(n),["nullCount"]:a=e.nullBitmap?-1:0}=e;return new As(n,r,o,a,[void 0,s,i])}visitDecimal(e){const{["type"]:n,["offset"]:r=0}=e,i=Di(e.nullBitmap),s=Ts(n.ArrayType,e.data),{["length"]:o=s.length/kg(n),["nullCount"]:a=e.nullBitmap?-1:0}=e;return new As(n,r,o,a,[void 0,s,i])}visitList(e){const{["type"]:n,["offset"]:r=0,["child"]:i}=e,s=Di(e.nullBitmap),o=TS(e.valueOffsets),{["length"]:a=o.length-1,["nullCount"]:l=e.nullBitmap?-1:0}=e;return new As(n,r,a,l,[o,void 0,s],[i])}visitStruct(e){const{["type"]:n,["offset"]:r=0,["children"]:i=[]}=e,s=Di(e.nullBitmap),{length:o=i.reduce((l,{length:h})=>Math.max(l,h),0),nullCount:a=e.nullBitmap?-1:0}=e;return new As(n,r,o,a,[void 0,void 0,s],i)}visitUnion(e){const{["type"]:n,["offset"]:r=0,["children"]:i=[]}=e,s=Ts(n.ArrayType,e.typeIds),{["length"]:o=s.length,["nullCount"]:a=-1}=e;if(Xn.isSparseUnion(n))return new As(n,r,o,a,[void 0,void 0,void 0,s],i);const l=TS(e.valueOffsets);return new As(n,r,o,a,[l,void 0,void 0,s],i)}visitDictionary(e){const{["type"]:n,["offset"]:r=0}=e,i=Di(e.nullBitmap),s=Ts(n.indices.ArrayType,e.data),{["dictionary"]:o=new bs([new F3().visit({type:n.dictionary})])}=e,{["length"]:a=s.length,["nullCount"]:l=e.nullBitmap?-1:0}=e;return new As(n,r,a,l,[void 0,s,i],[],o)}visitInterval(e){const{["type"]:n,["offset"]:r=0}=e,i=Di(e.nullBitmap),s=Ts(n.ArrayType,e.data),{["length"]:o=s.length/kg(n),["nullCount"]:a=e.nullBitmap?-1:0}=e;return new As(n,r,o,a,[void 0,s,i])}visitDuration(e){const{["type"]:n,["offset"]:r=0}=e,i=Di(e.nullBitmap),s=Ts(n.ArrayType,e.data),{["length"]:o=s.length,["nullCount"]:a=e.nullBitmap?-1:0}=e;return new As(n,r,o,a,[void 0,s,i])}visitFixedSizeList(e){const{["type"]:n,["offset"]:r=0,["child"]:i=new F3().visit({type:n.valueType})}=e,s=Di(e.nullBitmap),{["length"]:o=i.length/kg(n),["nullCount"]:a=e.nullBitmap?-1:0}=e;return new As(n,r,o,a,[void 0,void 0,s],[i])}visitMap(e){const{["type"]:n,["offset"]:r=0,["child"]:i=new F3().visit({type:n.childType})}=e,s=Di(e.nullBitmap),o=TS(e.valueOffsets),{["length"]:a=o.length-1,["nullCount"]:l=e.nullBitmap?-1:0}=e;return new As(n,r,a,l,[o,void 0,s],[i])}}const Gve=new F3;function pi(t){return Gve.visit(t)}class jj{constructor(e=0,n){this.numChunks=e,this.getChunkIterator=n,this.chunkIndex=0,this.chunkIterator=this.getChunkIterator(0)}next(){for(;this.chunkIndex<this.numChunks;){const e=this.chunkIterator.next();if(!e.done)return e;++this.chunkIndex<this.numChunks&&(this.chunkIterator=this.getChunkIterator(this.chunkIndex))}return{done:!0,value:null}}[Symbol.iterator](){return this}}function Yve(t){return t.some(e=>e.nullable)}function _ee(t){return t.reduce((e,n)=>e+n.nullCount,0)}function xee(t){return t.reduce((e,n,r)=>(e[r+1]=e[r]+n.length,e),new Uint32Array(t.length+1))}function wee(t,e,n,r){const i=[];for(let s=-1,o=t.length;++s<o;){const a=t[s],l=e[s],{length:h}=a;if(l>=r)break;if(n>=l+h)continue;if(l>=n&&l+h<=r){i.push(a);continue}const f=Math.max(0,n-l),p=Math.min(r-l,h);i.push(a.slice(f,p-f))}return i.length===0&&i.push(t[0].slice(0,0)),i}function sB(t,e,n,r){let i=0,s=0,o=e.length-1;do{if(i>=o-1)return n<e[o]?r(t,i,n-e[i]):null;s=i+Math.trunc((o-i)*.5),n<e[s]?o=s:i=s}while(i<o)}function oB(t,e){return t.getValid(e)}function QT(t){function e(n,r,i){return t(n[r],i)}return function(n){const r=this.data;return sB(r,this._offsets,n,e)}}function Oee(t){let e;function n(r,i,s){return t(r[i],s,e)}return function(r,i){const s=this.data;e=i;const o=sB(s,this._offsets,r,n);return e=void 0,o}}function See(t){let e;function n(r,i,s){let o=s,a=0,l=0;for(let h=i-1,f=r.length;++h<f;){const p=r[h];if(~(a=t(p,e,o)))return l+a;o=0,l+=p.length}return-1}return function(r,i){e=r;const s=this.data,o=typeof i!="number"?n(s,0,0):sB(s,this._offsets,i,n);return e=void 0,o}}class dr extends ci{}function Hve(t,e){return e===null&&t.length>0?0:-1}function Kve(t,e){const{nullBitmap:n}=t;if(!n||t.nullCount<=0)return-1;let r=0;for(const i of new iB(n,t.offset+(e||0),t.length,n,bee)){if(!i)return r;++r}return-1}function Ar(t,e,n){if(e===void 0)return-1;if(e===null)switch(t.typeId){case Qe.Union:break;case Qe.Dictionary:break;default:return Kve(t,n)}const r=Ac.getVisitFn(t),i=Y2(e);for(let s=(n||0)-1,o=t.length;++s<o;)if(i(r(t,s)))return s;return-1}function kee(t,e,n){const r=Ac.getVisitFn(t),i=Y2(e);for(let s=(n||0)-1,o=t.length;++s<o;)if(i(r(t,s)))return s;return-1}dr.prototype.visitNull=Hve;dr.prototype.visitBool=Ar;dr.prototype.visitInt=Ar;dr.prototype.visitInt8=Ar;dr.prototype.visitInt16=Ar;dr.prototype.visitInt32=Ar;dr.prototype.visitInt64=Ar;dr.prototype.visitUint8=Ar;dr.prototype.visitUint16=Ar;dr.prototype.visitUint32=Ar;dr.prototype.visitUint64=Ar;dr.prototype.visitFloat=Ar;dr.prototype.visitFloat16=Ar;dr.prototype.visitFloat32=Ar;dr.prototype.visitFloat64=Ar;dr.prototype.visitUtf8=Ar;dr.prototype.visitLargeUtf8=Ar;dr.prototype.visitBinary=Ar;dr.prototype.visitLargeBinary=Ar;dr.prototype.visitFixedSizeBinary=Ar;dr.prototype.visitDate=Ar;dr.prototype.visitDateDay=Ar;dr.prototype.visitDateMillisecond=Ar;dr.prototype.visitTimestamp=Ar;dr.prototype.visitTimestampSecond=Ar;dr.prototype.visitTimestampMillisecond=Ar;dr.prototype.visitTimestampMicrosecond=Ar;dr.prototype.visitTimestampNanosecond=Ar;dr.prototype.visitTime=Ar;dr.prototype.visitTimeSecond=Ar;dr.prototype.visitTimeMillisecond=Ar;dr.prototype.visitTimeMicrosecond=Ar;dr.prototype.visitTimeNanosecond=Ar;dr.prototype.visitDecimal=Ar;dr.prototype.visitList=Ar;dr.prototype.visitStruct=Ar;dr.prototype.visitUnion=Ar;dr.prototype.visitDenseUnion=kee;dr.prototype.visitSparseUnion=kee;dr.prototype.visitDictionary=Ar;dr.prototype.visitInterval=Ar;dr.prototype.visitIntervalDayTime=Ar;dr.prototype.visitIntervalYearMonth=Ar;dr.prototype.visitDuration=Ar;dr.prototype.visitDurationSecond=Ar;dr.prototype.visitDurationMillisecond=Ar;dr.prototype.visitDurationMicrosecond=Ar;dr.prototype.visitDurationNanosecond=Ar;dr.prototype.visitFixedSizeList=Ar;dr.prototype.visitMap=Ar;const jT=new dr;class pr extends ci{}function Or(t){const{type:e}=t;if(t.nullCount===0&&t.stride===1&&(Xn.isInt(e)&&e.bitWidth!==64||Xn.isTime(e)&&e.bitWidth!==64||Xn.isFloat(e)&&e.precision!==Jl.HALF))return new jj(t.data.length,r=>{const i=t.data[r];return i.values.subarray(0,i.length)[Symbol.iterator]()});let n=0;return new jj(t.data.length,r=>{const s=t.data[r].length,o=t.slice(n,n+s);return n+=s,new Jve(o)})}class Jve{constructor(e){this.vector=e,this.index=0}next(){return this.index<this.vector.length?{value:this.vector.get(this.index++)}:{done:!0,value:null}}[Symbol.iterator](){return this}}pr.prototype.visitNull=Or;pr.prototype.visitBool=Or;pr.prototype.visitInt=Or;pr.prototype.visitInt8=Or;pr.prototype.visitInt16=Or;pr.prototype.visitInt32=Or;pr.prototype.visitInt64=Or;pr.prototype.visitUint8=Or;pr.prototype.visitUint16=Or;pr.prototype.visitUint32=Or;pr.prototype.visitUint64=Or;pr.prototype.visitFloat=Or;pr.prototype.visitFloat16=Or;pr.prototype.visitFloat32=Or;pr.prototype.visitFloat64=Or;pr.prototype.visitUtf8=Or;pr.prototype.visitLargeUtf8=Or;pr.prototype.visitBinary=Or;pr.prototype.visitLargeBinary=Or;pr.prototype.visitFixedSizeBinary=Or;pr.prototype.visitDate=Or;pr.prototype.visitDateDay=Or;pr.prototype.visitDateMillisecond=Or;pr.prototype.visitTimestamp=Or;pr.prototype.visitTimestampSecond=Or;pr.prototype.visitTimestampMillisecond=Or;pr.prototype.visitTimestampMicrosecond=Or;pr.prototype.visitTimestampNanosecond=Or;pr.prototype.visitTime=Or;pr.prototype.visitTimeSecond=Or;pr.prototype.visitTimeMillisecond=Or;pr.prototype.visitTimeMicrosecond=Or;pr.prototype.visitTimeNanosecond=Or;pr.prototype.visitDecimal=Or;pr.prototype.visitList=Or;pr.prototype.visitStruct=Or;pr.prototype.visitUnion=Or;pr.prototype.visitDenseUnion=Or;pr.prototype.visitSparseUnion=Or;pr.prototype.visitDictionary=Or;pr.prototype.visitInterval=Or;pr.prototype.visitIntervalDayTime=Or;pr.prototype.visitIntervalYearMonth=Or;pr.prototype.visitDuration=Or;pr.prototype.visitDurationSecond=Or;pr.prototype.visitDurationMillisecond=Or;pr.prototype.visitDurationMicrosecond=Or;pr.prototype.visitDurationNanosecond=Or;pr.prototype.visitFixedSizeList=Or;pr.prototype.visitMap=Or;const aB=new pr;var Cee;const Aee={},Eee={};class bs{constructor(e){var n,r,i;const s=e[0]instanceof bs?e.flatMap(a=>a.data):e;if(s.length===0||s.some(a=>!(a instanceof As)))throw new TypeError("Vector constructor expects an Array of Data instances.");const o=(n=s[0])===null||n===void 0?void 0:n.type;switch(s.length){case 0:this._offsets=[0];break;case 1:{const{get:a,set:l,indexOf:h}=Aee[o.typeId],f=s[0];this.isValid=p=>oB(f,p),this.get=p=>a(f,p),this.set=(p,g)=>l(f,p,g),this.indexOf=p=>h(f,p),this._offsets=[0,f.length];break}default:Object.setPrototypeOf(this,Eee[o.typeId]),this._offsets=xee(s);break}this.data=s,this.type=o,this.stride=kg(o),this.numChildren=(i=(r=o.children)===null||r===void 0?void 0:r.length)!==null&&i!==void 0?i:0,this.length=this._offsets.at(-1)}get byteLength(){return this.data.reduce((e,n)=>e+n.byteLength,0)}get nullable(){return Yve(this.data)}get nullCount(){return _ee(this.data)}get ArrayType(){return this.type.ArrayType}get[Symbol.toStringTag](){return`${this.VectorName}<${this.type[Symbol.toStringTag]}>`}get VectorName(){return`${Qe[this.type.typeId]}Vector`}isValid(e){return!1}get(e){return null}at(e){return this.get(rB(e,this.length))}set(e,n){}indexOf(e,n){return-1}includes(e,n){return this.indexOf(e,n)>-1}[Symbol.iterator](){return aB.visit(this)}concat(...e){return new bs(this.data.concat(e.flatMap(n=>n.data).flat(Number.POSITIVE_INFINITY)))}slice(e,n){return new bs(vee(this,e,n,({data:r,_offsets:i},s,o)=>wee(r,i,s,o)))}toJSON(){return[...this]}toArray(){const{type:e,data:n,length:r,stride:i,ArrayType:s}=this;switch(e.typeId){case Qe.Int:case Qe.Float:case Qe.Decimal:case Qe.Time:case Qe.Timestamp:switch(n.length){case 0:return new s;case 1:return n[0].values.subarray(0,r*i);default:return n.reduce((o,{values:a,length:l})=>(o.array.set(a.subarray(0,l*i),o.offset),o.offset+=l*i,o),{array:new s(r*i),offset:0}).array}}return[...this]}toString(){return`[${[...this].join(",")}]`}getChild(e){var n;return this.getChildAt((n=this.type.children)===null||n===void 0?void 0:n.findIndex(r=>r.name===e))}getChildAt(e){return e>-1&&e<this.numChildren?new bs(this.data.map(({children:n})=>n[e])):null}get isMemoized(){return Xn.isDictionary(this.type)?this.data[0].dictionary.isMemoized:!1}memoize(){if(Xn.isDictionary(this.type)){const e=new UT(this.data[0].dictionary),n=this.data.map(r=>{const i=r.clone();return i.dictionary=e,i});return new bs(n)}return new UT(this)}unmemoize(){if(Xn.isDictionary(this.type)&&this.isMemoized){const e=this.data[0].dictionary.unmemoize(),n=this.data.map(r=>{const i=r.clone();return i.dictionary=e,i});return new bs(n)}return this}}Cee=Symbol.toStringTag;bs[Cee]=(t=>{t.type=Xn.prototype,t.data=[],t.length=0,t.stride=1,t.numChildren=0,t._offsets=new Uint32Array([0]),t[Symbol.isConcatSpreadable]=!0;const e=Object.keys(Qe).map(n=>Qe[n]).filter(n=>typeof n=="number"&&n!==Qe.NONE);for(const n of e){const r=Ac.getVisitFnByTypeId(n),i=xf.getVisitFnByTypeId(n),s=jT.getVisitFnByTypeId(n);Aee[n]={get:r,set:i,indexOf:s},Eee[n]=Object.create(t,{isValid:{value:QT(oB)},get:{value:QT(Ac.getVisitFnByTypeId(n))},set:{value:Oee(xf.getVisitFnByTypeId(n))},indexOf:{value:See(jT.getVisitFnByTypeId(n))}})}return"Vector"})(bs.prototype);class UT extends bs{constructor(e){super(e.data);const n=this.get,r=this.set,i=this.slice,s=new Array(this.length);Object.defineProperty(this,"get",{value(o){const a=s[o];if(a!==void 0)return a;const l=n.call(this,o);return s[o]=l,l}}),Object.defineProperty(this,"set",{value(o,a){r.call(this,o,a),s[o]=a}}),Object.defineProperty(this,"slice",{value:(o,a)=>new UT(i.call(this,o,a))}),Object.defineProperty(this,"isMemoized",{value:!0}),Object.defineProperty(this,"unmemoize",{value:()=>new bs(this.data)}),Object.defineProperty(this,"memoize",{value:()=>this})}}class sF{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}offset(){return this.bb.readInt64(this.bb_pos)}metaDataLength(){return this.bb.readInt32(this.bb_pos+8)}bodyLength(){return this.bb.readInt64(this.bb_pos+16)}static sizeOf(){return 24}static createBlock(e,n,r,i){return e.prep(8,24),e.writeInt64(BigInt(i??0)),e.pad(4),e.writeInt32(r),e.writeInt64(BigInt(n??0)),e.offset()}}class ih{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsFooter(e,n){return(n||new ih).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsFooter(e,n){return e.setPosition(e.position()+Os),(n||new ih).__init(e.readInt32(e.position())+e.position(),e)}version(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt16(this.bb_pos+e):sa.V1}schema(e){const n=this.bb.__offset(this.bb_pos,6);return n?(e||new Ap).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}dictionaries(e,n){const r=this.bb.__offset(this.bb_pos,8);return r?(n||new sF).__init(this.bb.__vector(this.bb_pos+r)+e*24,this.bb):null}dictionariesLength(){const e=this.bb.__offset(this.bb_pos,8);return e?this.bb.__vector_len(this.bb_pos+e):0}recordBatches(e,n){const r=this.bb.__offset(this.bb_pos,10);return r?(n||new sF).__init(this.bb.__vector(this.bb_pos+r)+e*24,this.bb):null}recordBatchesLength(){const e=this.bb.__offset(this.bb_pos,10);return e?this.bb.__vector_len(this.bb_pos+e):0}customMetadata(e,n){const r=this.bb.__offset(this.bb_pos,12);return r?(n||new Na).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+e*4),this.bb):null}customMetadataLength(){const e=this.bb.__offset(this.bb_pos,12);return e?this.bb.__vector_len(this.bb_pos+e):0}static startFooter(e){e.startObject(5)}static addVersion(e,n){e.addFieldInt16(0,n,sa.V1)}static addSchema(e,n){e.addFieldOffset(1,n,0)}static addDictionaries(e,n){e.addFieldOffset(2,n,0)}static startDictionariesVector(e,n){e.startVector(24,n,8)}static addRecordBatches(e,n){e.addFieldOffset(3,n,0)}static startRecordBatchesVector(e,n){e.startVector(24,n,8)}static addCustomMetadata(e,n){e.addFieldOffset(4,n,0)}static createCustomMetadataVector(e,n){e.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)e.addOffset(n[r]);return e.endVector()}static startCustomMetadataVector(e,n){e.startVector(4,n,4)}static endFooter(e){return e.endObject()}static finishFooterBuffer(e,n){e.finish(n)}static finishSizePrefixedFooterBuffer(e,n){e.finish(n,void 0,!0)}}let Ro=class Rv{constructor(e=[],n,r,i=sa.V5){this.fields=e||[],this.metadata=n||new Map,r||(r=oF(this.fields)),this.dictionaries=r,this.metadataVersion=i}get[Symbol.toStringTag](){return"Schema"}get names(){return this.fields.map(e=>e.name)}toString(){return`Schema<{ ${this.fields.map((e,n)=>`${n}: ${e}`).join(", ")} }>`}select(e){const n=new Set(e),r=this.fields.filter(i=>n.has(i.name));return new Rv(r,this.metadata)}selectAt(e){const n=e.map(r=>this.fields[r]).filter(Boolean);return new Rv(n,this.metadata)}assign(...e){const n=e[0]instanceof Rv?e[0]:Array.isArray(e[0])?new Rv(e[0]):new Rv(e),r=[...this.fields],i=jE(jE(new Map,this.metadata),n.metadata),s=n.fields.filter(a=>{const l=r.findIndex(h=>h.name===a.name);return~l?(r[l]=a.clone({metadata:jE(jE(new Map,r[l].metadata),a.metadata)}))&&!1:!0}),o=oF(s,new Map);return new Rv([...r,...s],i,new Map([...this.dictionaries,...o]))}};Ro.prototype.fields=null;Ro.prototype.metadata=null;Ro.prototype.dictionaries=null;class bo{static new(...e){let[n,r,i,s]=e;return e[0]&&typeof e[0]=="object"&&({name:n}=e[0],r===void 0&&(r=e[0].type),i===void 0&&(i=e[0].nullable),s===void 0&&(s=e[0].metadata)),new bo(`${n}`,r,i,s)}constructor(e,n,r=!1,i){this.name=e,this.type=n,this.nullable=r,this.metadata=i||new Map}get typeId(){return this.type.typeId}get[Symbol.toStringTag](){return"Field"}toString(){return`${this.name}: ${this.type}`}clone(...e){let[n,r,i,s]=e;return!e[0]||typeof e[0]!="object"?[n=this.name,r=this.type,i=this.nullable,s=this.metadata]=e:{name:n=this.name,type:r=this.type,nullable:i=this.nullable,metadata:s=this.metadata}=e[0],bo.new(n,r,i,s)}}bo.prototype.type=null;bo.prototype.name=null;bo.prototype.nullable=null;bo.prototype.metadata=null;function jE(t,e){return new Map([...t||new Map,...e||new Map])}function oF(t,e=new Map){for(let n=-1,r=t.length;++n<r;){const s=t[n].type;if(Xn.isDictionary(s)){if(!e.has(s.id))e.set(s.id,s.dictionary);else if(e.get(s.id)!==s.dictionary)throw new Error("Cannot create Schema containing two different dictionaries with the same Id")}s.children&&s.children.length>0&&oF(s.children,e)}return e}var ebe=KK,tbe=Jw;class mk{static decode(e){e=new tbe(Di(e));const n=ih.getRootAsFooter(e),r=Ro.decode(n.schema(),new Map,n.version());return new nbe(r,n)}static encode(e){const n=new ebe,r=Ro.encode(n,e.schema);ih.startRecordBatchesVector(n,e.numRecordBatches);for(const o of[...e.recordBatches()].slice().reverse())o1.encode(n,o);const i=n.endVector();ih.startDictionariesVector(n,e.numDictionaries);for(const o of[...e.dictionaryBatches()].slice().reverse())o1.encode(n,o);const s=n.endVector();return ih.startFooter(n),ih.addSchema(n,r),ih.addVersion(n,sa.V5),ih.addRecordBatches(n,i),ih.addDictionaries(n,s),ih.finishFooterBuffer(n,ih.endFooter(n)),n.asUint8Array()}get numRecordBatches(){return this._recordBatches.length}get numDictionaries(){return this._dictionaryBatches.length}constructor(e,n=sa.V5,r,i){this.schema=e,this.version=n,r&&(this._recordBatches=r),i&&(this._dictionaryBatches=i)}*recordBatches(){for(let e,n=-1,r=this.numRecordBatches;++n<r;)(e=this.getRecordBatch(n))&&(yield e)}*dictionaryBatches(){for(let e,n=-1,r=this.numDictionaries;++n<r;)(e=this.getDictionaryBatch(n))&&(yield e)}getRecordBatch(e){return e>=0&&e<this.numRecordBatches&&this._recordBatches[e]||null}getDictionaryBatch(e){return e>=0&&e<this.numDictionaries&&this._dictionaryBatches[e]||null}}class nbe extends mk{get numRecordBatches(){return this._footer.recordBatchesLength()}get numDictionaries(){return this._footer.dictionariesLength()}constructor(e,n){super(e,n.version()),this._footer=n}getRecordBatch(e){if(e>=0&&e<this.numRecordBatches){const n=this._footer.recordBatches(e);if(n)return o1.decode(n)}return null}getDictionaryBatch(e){if(e>=0&&e<this.numDictionaries){const n=this._footer.dictionaries(e);if(n)return o1.decode(n)}return null}}class o1{static decode(e){return new o1(e.metaDataLength(),e.bodyLength(),e.offset())}static encode(e,n){const{metaDataLength:r}=n,i=BigInt(n.offset),s=BigInt(n.bodyLength);return sF.createBlock(e,i,r,s)}constructor(e,n,r){this.metaDataLength=e,this.offset=Hs(r),this.bodyLength=Hs(n)}}const Lo=Object.freeze({done:!0,value:void 0});class Uj{constructor(e){this._json=e}get schema(){return this._json.schema}get batches(){return this._json.batches||[]}get dictionaries(){return this._json.dictionaries||[]}}class lB{tee(){return this._getDOMStream().tee()}pipe(e,n){return this._getNodeStream().pipe(e,n)}pipeTo(e,n){return this._getDOMStream().pipeTo(e,n)}pipeThrough(e,n){return this._getDOMStream().pipeThrough(e,n)}_getDOMStream(){return this._DOMStream||(this._DOMStream=this.toDOMStream())}_getNodeStream(){return this._nodeStream||(this._nodeStream=this.toNodeStream())}}class rbe extends lB{constructor(){super(),this._values=[],this.resolvers=[],this._closedPromise=new Promise(e=>this._closedPromiseResolve=e)}get closed(){return this._closedPromise}cancel(e){return Tr(this,void 0,void 0,function*(){yield this.return(e)})}write(e){this._ensureOpen()&&(this.resolvers.length<=0?this._values.push(e):this.resolvers.shift().resolve({done:!1,value:e}))}abort(e){this._closedPromiseResolve&&(this.resolvers.length<=0?this._error={error:e}:this.resolvers.shift().reject({done:!0,value:e}))}close(){if(this._closedPromiseResolve){const{resolvers:e}=this;for(;e.length>0;)e.shift().resolve(Lo);this._closedPromiseResolve(),this._closedPromiseResolve=void 0}}[Symbol.asyncIterator](){return this}toDOMStream(e){return tf.toDOMStream(this._closedPromiseResolve||this._error?this:this._values,e)}toNodeStream(e){return tf.toNodeStream(this._closedPromiseResolve||this._error?this:this._values,e)}throw(e){return Tr(this,void 0,void 0,function*(){return yield this.abort(e),Lo})}return(e){return Tr(this,void 0,void 0,function*(){return yield this.close(),Lo})}read(e){return Tr(this,void 0,void 0,function*(){return(yield this.next(e,"read")).value})}peek(e){return Tr(this,void 0,void 0,function*(){return(yield this.next(e,"peek")).value})}next(...e){return this._values.length>0?Promise.resolve({done:!1,value:this._values.shift()}):this._error?Promise.reject({done:!0,value:this._error.error}):this._closedPromiseResolve?new Promise((n,r)=>{this.resolvers.push({resolve:n,reject:r})}):Promise.resolve(Lo)}_ensureOpen(){if(this._closedPromiseResolve)return!0;throw new Error("AsyncQueue is closed")}}class h5 extends rbe{write(e){if((e=Di(e)).byteLength>0)return super.write(e)}toString(e=!1){return e?H7(this.toUint8Array(!0)):this.toUint8Array(!1).then(H7)}toUint8Array(e=!1){return e?um(this._values)[0]:Tr(this,void 0,void 0,function*(){var n,r,i,s;const o=[];let a=0;try{for(var l=!0,h=vb(this),f;f=yield h.next(),n=f.done,!n;l=!0){s=f.value,l=!1;const p=s;o.push(p),a+=p.byteLength}}catch(p){r={error:p}}finally{try{!l&&!n&&(i=h.return)&&(yield i.call(h))}finally{if(r)throw r.error}}return um(o,a)[0]})}}class VT{constructor(e){e&&(this.source=new ibe(tf.fromIterable(e)))}[Symbol.iterator](){return this}next(e){return this.source.next(e)}throw(e){return this.source.throw(e)}return(e){return this.source.return(e)}peek(e){return this.source.peek(e)}read(e){return this.source.read(e)}}class n2{constructor(e){e instanceof n2?this.source=e.source:e instanceof h5?this.source=new Ev(tf.fromAsyncIterable(e)):WK(e)?this.source=new Ev(tf.fromNodeStream(e)):H$(e)?this.source=new Ev(tf.fromDOMStream(e)):XK(e)?this.source=new Ev(tf.fromDOMStream(e.body)):CC(e)?this.source=new Ev(tf.fromIterable(e)):Lb(e)?this.source=new Ev(tf.fromAsyncIterable(e)):G2(e)&&(this.source=new Ev(tf.fromAsyncIterable(e)))}[Symbol.asyncIterator](){return this}next(e){return this.source.next(e)}throw(e){return this.source.throw(e)}return(e){return this.source.return(e)}get closed(){return this.source.closed}cancel(e){return this.source.cancel(e)}peek(e){return this.source.peek(e)}read(e){return this.source.read(e)}}class ibe{constructor(e){this.source=e}cancel(e){this.return(e)}peek(e){return this.next(e,"peek").value}read(e){return this.next(e,"read").value}next(e,n="read"){return this.source.next({cmd:n,size:e})}throw(e){return Object.create(this.source.throw&&this.source.throw(e)||Lo)}return(e){return Object.create(this.source.return&&this.source.return(e)||Lo)}}class Ev{constructor(e){this.source=e,this._closedPromise=new Promise(n=>this._closedPromiseResolve=n)}cancel(e){return Tr(this,void 0,void 0,function*(){yield this.return(e)})}get closed(){return this._closedPromise}read(e){return Tr(this,void 0,void 0,function*(){return(yield this.next(e,"read")).value})}peek(e){return Tr(this,void 0,void 0,function*(){return(yield this.next(e,"peek")).value})}next(e){return Tr(this,arguments,void 0,function*(n,r="read"){return yield this.source.next({cmd:r,size:n})})}throw(e){return Tr(this,void 0,void 0,function*(){const n=this.source.throw&&(yield this.source.throw(e))||Lo;return this._closedPromiseResolve&&this._closedPromiseResolve(),this._closedPromiseResolve=void 0,Object.create(n)})}return(e){return Tr(this,void 0,void 0,function*(){const n=this.source.return&&(yield this.source.return(e))||Lo;return this._closedPromiseResolve&&this._closedPromiseResolve(),this._closedPromiseResolve=void 0,Object.create(n)})}}class Vj extends VT{constructor(e,n){super(),this.position=0,this.buffer=Di(e),this.size=n===void 0?this.buffer.byteLength:n}readInt32(e){const{buffer:n,byteOffset:r}=this.readAt(e,4);return new DataView(n,r).getInt32(0,!0)}seek(e){return this.position=Math.min(e,this.size),e<this.size}read(e){const{buffer:n,size:r,position:i}=this;return n&&i<r?(typeof e!="number"&&(e=Number.POSITIVE_INFINITY),this.position=Math.min(r,i+Math.min(r-i,e)),n.subarray(i,this.position)):null}readAt(e,n){const r=this.buffer,i=Math.min(this.size,e+n);return r?r.subarray(e,i):new Uint8Array(n)}close(){this.buffer&&(this.buffer=null)}throw(e){return this.close(),{done:!0,value:e}}return(e){return this.close(),{done:!0,value:e}}}class qT extends n2{constructor(e,n){super(),this.position=0,this._handle=e,typeof n=="number"?this.size=n:this._pending=Tr(this,void 0,void 0,function*(){this.size=(yield e.stat()).size,delete this._pending})}readInt32(e){return Tr(this,void 0,void 0,function*(){const{buffer:n,byteOffset:r}=yield this.readAt(e,4);return new DataView(n,r).getInt32(0,!0)})}seek(e){return Tr(this,void 0,void 0,function*(){return this._pending&&(yield this._pending),this.position=Math.min(e,this.size),e<this.size})}read(e){return Tr(this,void 0,void 0,function*(){this._pending&&(yield this._pending);const{_handle:n,size:r,position:i}=this;if(n&&i<r){typeof e!="number"&&(e=Number.POSITIVE_INFINITY);let s=i,o=0,a=0;const l=Math.min(r,s+Math.min(r-s,e)),h=new Uint8Array(Math.max(0,(this.position=l)-s));for(;(s+=a)<l&&(o+=a)<h.byteLength;)({bytesRead:a}=yield n.read(h,o,h.byteLength-o,s));return h}return null})}readAt(e,n){return Tr(this,void 0,void 0,function*(){this._pending&&(yield this._pending);const{_handle:r,size:i}=this;if(r&&e+n<i){const s=Math.min(i,e+n),o=new Uint8Array(s-e);return(yield r.read(o,0,n,e)).buffer}return new Uint8Array(n)})}close(){return Tr(this,void 0,void 0,function*(){const e=this._handle;this._handle=null,e&&(yield e.close())})}throw(e){return Tr(this,void 0,void 0,function*(){return yield this.close(),{done:!0,value:e}})}return(e){return Tr(this,void 0,void 0,function*(){return yield this.close(),{done:!0,value:e}})}}const sbe=65536;function Gx(t){return t<0&&(t=4294967295+t+1),`0x${t.toString(16)}`}const r2=8,uB=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8];class Tee{constructor(e){this.buffer=e}high(){return this.buffer[1]}low(){return this.buffer[0]}_times(e){const n=new Uint32Array([this.buffer[1]>>>16,this.buffer[1]&65535,this.buffer[0]>>>16,this.buffer[0]&65535]),r=new Uint32Array([e.buffer[1]>>>16,e.buffer[1]&65535,e.buffer[0]>>>16,e.buffer[0]&65535]);let i=n[3]*r[3];this.buffer[0]=i&65535;let s=i>>>16;return i=n[2]*r[3],s+=i,i=n[3]*r[2]>>>0,s+=i,this.buffer[0]+=s<<16,this.buffer[1]=s>>>0<i?sbe:0,this.buffer[1]+=s>>>16,this.buffer[1]+=n[1]*r[3]+n[2]*r[2]+n[3]*r[1],this.buffer[1]+=n[0]*r[3]+n[1]*r[2]+n[2]*r[1]+n[3]*r[0]<<16,this}_plus(e){const n=this.buffer[0]+e.buffer[0]>>>0;this.buffer[1]+=e.buffer[1],n<this.buffer[0]>>>0&&++this.buffer[1],this.buffer[0]=n}lessThan(e){return this.buffer[1]<e.buffer[1]||this.buffer[1]===e.buffer[1]&&this.buffer[0]<e.buffer[0]}equals(e){return this.buffer[1]===e.buffer[1]&&this.buffer[0]==e.buffer[0]}greaterThan(e){return e.lessThan(this)}hex(){return`${Gx(this.buffer[1])} ${Gx(this.buffer[0])}`}}class Es extends Tee{times(e){return this._times(e),this}plus(e){return this._plus(e),this}static from(e,n=new Uint32Array(2)){return Es.fromString(typeof e=="string"?e:e.toString(),n)}static fromNumber(e,n=new Uint32Array(2)){return Es.fromString(e.toString(),n)}static fromString(e,n=new Uint32Array(2)){const r=e.length,i=new Es(n);for(let s=0;s<r;){const o=r2<r-s?r2:r-s,a=new Es(new Uint32Array([Number.parseInt(e.slice(s,s+o),10),0])),l=new Es(new Uint32Array([uB[o],0]));i.times(l),i.plus(a),s+=o}return i}static convertArray(e){const n=new Uint32Array(e.length*2);for(let r=-1,i=e.length;++r<i;)Es.from(e[r],new Uint32Array(n.buffer,n.byteOffset+2*r*4,2));return n}static multiply(e,n){return new Es(new Uint32Array(e.buffer)).times(n)}static add(e,n){return new Es(new Uint32Array(e.buffer)).plus(n)}}class nc extends Tee{negate(){return this.buffer[0]=~this.buffer[0]+1,this.buffer[1]=~this.buffer[1],this.buffer[0]==0&&++this.buffer[1],this}times(e){return this._times(e),this}plus(e){return this._plus(e),this}lessThan(e){const n=this.buffer[1]<<0,r=e.buffer[1]<<0;return n<r||n===r&&this.buffer[0]<e.buffer[0]}static from(e,n=new Uint32Array(2)){return nc.fromString(typeof e=="string"?e:e.toString(),n)}static fromNumber(e,n=new Uint32Array(2)){return nc.fromString(e.toString(),n)}static fromString(e,n=new Uint32Array(2)){const r=e.startsWith("-"),i=e.length,s=new nc(n);for(let o=r?1:0;o<i;){const a=r2<i-o?r2:i-o,l=new nc(new Uint32Array([Number.parseInt(e.slice(o,o+a),10),0])),h=new nc(new Uint32Array([uB[a],0]));s.times(h),s.plus(l),o+=a}return r?s.negate():s}static convertArray(e){const n=new Uint32Array(e.length*2);for(let r=-1,i=e.length;++r<i;)nc.from(e[r],new Uint32Array(n.buffer,n.byteOffset+2*r*4,2));return n}static multiply(e,n){return new nc(new Uint32Array(e.buffer)).times(n)}static add(e,n){return new nc(new Uint32Array(e.buffer)).plus(n)}}class Ep{constructor(e){this.buffer=e}high(){return new nc(new Uint32Array(this.buffer.buffer,this.buffer.byteOffset+8,2))}low(){return new nc(new Uint32Array(this.buffer.buffer,this.buffer.byteOffset,2))}negate(){return this.buffer[0]=~this.buffer[0]+1,this.buffer[1]=~this.buffer[1],this.buffer[2]=~this.buffer[2],this.buffer[3]=~this.buffer[3],this.buffer[0]==0&&++this.buffer[1],this.buffer[1]==0&&++this.buffer[2],this.buffer[2]==0&&++this.buffer[3],this}times(e){const n=new Es(new Uint32Array([this.buffer[3],0])),r=new Es(new Uint32Array([this.buffer[2],0])),i=new Es(new Uint32Array([this.buffer[1],0])),s=new Es(new Uint32Array([this.buffer[0],0])),o=new Es(new Uint32Array([e.buffer[3],0])),a=new Es(new Uint32Array([e.buffer[2],0])),l=new Es(new Uint32Array([e.buffer[1],0])),h=new Es(new Uint32Array([e.buffer[0],0]));let f=Es.multiply(s,h);this.buffer[0]=f.low();const p=new Es(new Uint32Array([f.high(),0]));return f=Es.multiply(i,h),p.plus(f),f=Es.multiply(s,l),p.plus(f),this.buffer[1]=p.low(),this.buffer[3]=p.lessThan(f)?1:0,this.buffer[2]=p.high(),new Es(new Uint32Array(this.buffer.buffer,this.buffer.byteOffset+8,2)).plus(Es.multiply(r,h)).plus(Es.multiply(i,l)).plus(Es.multiply(s,a)),this.buffer[3]+=Es.multiply(n,h).plus(Es.multiply(r,l)).plus(Es.multiply(i,a)).plus(Es.multiply(s,o)).low(),this}plus(e){const n=new Uint32Array(4);return n[3]=this.buffer[3]+e.buffer[3]>>>0,n[2]=this.buffer[2]+e.buffer[2]>>>0,n[1]=this.buffer[1]+e.buffer[1]>>>0,n[0]=this.buffer[0]+e.buffer[0]>>>0,n[0]<this.buffer[0]>>>0&&++n[1],n[1]<this.buffer[1]>>>0&&++n[2],n[2]<this.buffer[2]>>>0&&++n[3],this.buffer[3]=n[3],this.buffer[2]=n[2],this.buffer[1]=n[1],this.buffer[0]=n[0],this}hex(){return`${Gx(this.buffer[3])} ${Gx(this.buffer[2])} ${Gx(this.buffer[1])} ${Gx(this.buffer[0])}`}static multiply(e,n){return new Ep(new Uint32Array(e.buffer)).times(n)}static add(e,n){return new Ep(new Uint32Array(e.buffer)).plus(n)}static from(e,n=new Uint32Array(4)){return Ep.fromString(typeof e=="string"?e:e.toString(),n)}static fromNumber(e,n=new Uint32Array(4)){return Ep.fromString(e.toString(),n)}static fromString(e,n=new Uint32Array(4)){const r=e.startsWith("-"),i=e.length,s=new Ep(n);for(let o=r?1:0;o<i;){const a=r2<i-o?r2:i-o,l=new Ep(new Uint32Array([Number.parseInt(e.slice(o,o+a),10),0,0,0])),h=new Ep(new Uint32Array([uB[a],0,0,0]));s.times(h),s.plus(l),o+=a}return r?s.negate():s}static convertArray(e){const n=new Uint32Array(e.length*4);for(let r=-1,i=e.length;++r<i;)Ep.from(e[r],new Uint32Array(n.buffer,n.byteOffset+16*r,4));return n}}class Pee extends ci{constructor(e,n,r,i,s=sa.V5){super(),this.nodesIndex=-1,this.buffersIndex=-1,this.bytes=e,this.nodes=n,this.buffers=r,this.dictionaries=i,this.metadataVersion=s}visit(e){return super.visit(e instanceof bo?e.type:e)}visitNull(e,{length:n}=this.nextFieldNode()){return pi({type:e,length:n})}visitBool(e,{length:n,nullCount:r}=this.nextFieldNode()){return pi({type:e,length:n,nullCount:r,nullBitmap:this.readNullBitmap(e,r),data:this.readData(e)})}visitInt(e,{length:n,nullCount:r}=this.nextFieldNode()){return pi({type:e,length:n,nullCount:r,nullBitmap:this.readNullBitmap(e,r),data:this.readData(e)})}visitFloat(e,{length:n,nullCount:r}=this.nextFieldNode()){return pi({type:e,length:n,nullCount:r,nullBitmap:this.readNullBitmap(e,r),data:this.readData(e)})}visitUtf8(e,{length:n,nullCount:r}=this.nextFieldNode()){return pi({type:e,length:n,nullCount:r,nullBitmap:this.readNullBitmap(e,r),valueOffsets:this.readOffsets(e),data:this.readData(e)})}visitLargeUtf8(e,{length:n,nullCount:r}=this.nextFieldNode()){return pi({type:e,length:n,nullCount:r,nullBitmap:this.readNullBitmap(e,r),valueOffsets:this.readOffsets(e),data:this.readData(e)})}visitBinary(e,{length:n,nullCount:r}=this.nextFieldNode()){return pi({type:e,length:n,nullCount:r,nullBitmap:this.readNullBitmap(e,r),valueOffsets:this.readOffsets(e),data:this.readData(e)})}visitLargeBinary(e,{length:n,nullCount:r}=this.nextFieldNode()){return pi({type:e,length:n,nullCount:r,nullBitmap:this.readNullBitmap(e,r),valueOffsets:this.readOffsets(e),data:this.readData(e)})}visitFixedSizeBinary(e,{length:n,nullCount:r}=this.nextFieldNode()){return pi({type:e,length:n,nullCount:r,nullBitmap:this.readNullBitmap(e,r),data:this.readData(e)})}visitDate(e,{length:n,nullCount:r}=this.nextFieldNode()){return pi({type:e,length:n,nullCount:r,nullBitmap:this.readNullBitmap(e,r),data:this.readData(e)})}visitTimestamp(e,{length:n,nullCount:r}=this.nextFieldNode()){return pi({type:e,length:n,nullCount:r,nullBitmap:this.readNullBitmap(e,r),data:this.readData(e)})}visitTime(e,{length:n,nullCount:r}=this.nextFieldNode()){return pi({type:e,length:n,nullCount:r,nullBitmap:this.readNullBitmap(e,r),data:this.readData(e)})}visitDecimal(e,{length:n,nullCount:r}=this.nextFieldNode()){return pi({type:e,length:n,nullCount:r,nullBitmap:this.readNullBitmap(e,r),data:this.readData(e)})}visitList(e,{length:n,nullCount:r}=this.nextFieldNode()){return pi({type:e,length:n,nullCount:r,nullBitmap:this.readNullBitmap(e,r),valueOffsets:this.readOffsets(e),child:this.visit(e.children[0])})}visitStruct(e,{length:n,nullCount:r}=this.nextFieldNode()){return pi({type:e,length:n,nullCount:r,nullBitmap:this.readNullBitmap(e,r),children:this.visitMany(e.children)})}visitUnion(e,{length:n,nullCount:r}=this.nextFieldNode()){return this.metadataVersion<sa.V5&&this.readNullBitmap(e,r),e.mode===ou.Sparse?this.visitSparseUnion(e,{length:n,nullCount:r}):this.visitDenseUnion(e,{length:n,nullCount:r})}visitDenseUnion(e,{length:n,nullCount:r}=this.nextFieldNode()){return pi({type:e,length:n,nullCount:r,typeIds:this.readTypeIds(e),valueOffsets:this.readOffsets(e),children:this.visitMany(e.children)})}visitSparseUnion(e,{length:n,nullCount:r}=this.nextFieldNode()){return pi({type:e,length:n,nullCount:r,typeIds:this.readTypeIds(e),children:this.visitMany(e.children)})}visitDictionary(e,{length:n,nullCount:r}=this.nextFieldNode()){return pi({type:e,length:n,nullCount:r,nullBitmap:this.readNullBitmap(e,r),data:this.readData(e.indices),dictionary:this.readDictionary(e)})}visitInterval(e,{length:n,nullCount:r}=this.nextFieldNode()){return pi({type:e,length:n,nullCount:r,nullBitmap:this.readNullBitmap(e,r),data:this.readData(e)})}visitDuration(e,{length:n,nullCount:r}=this.nextFieldNode()){return pi({type:e,length:n,nullCount:r,nullBitmap:this.readNullBitmap(e,r),data:this.readData(e)})}visitFixedSizeList(e,{length:n,nullCount:r}=this.nextFieldNode()){return pi({type:e,length:n,nullCount:r,nullBitmap:this.readNullBitmap(e,r),child:this.visit(e.children[0])})}visitMap(e,{length:n,nullCount:r}=this.nextFieldNode()){return pi({type:e,length:n,nullCount:r,nullBitmap:this.readNullBitmap(e,r),valueOffsets:this.readOffsets(e),child:this.visit(e.children[0])})}nextFieldNode(){return this.nodes[++this.nodesIndex]}nextBufferRange(){return this.buffers[++this.buffersIndex]}readNullBitmap(e,n,r=this.nextBufferRange()){return n>0&&this.readData(e,r)||new Uint8Array(0)}readOffsets(e,n){return this.readData(e,n)}readTypeIds(e,n){return this.readData(e,n)}readData(e,{length:n,offset:r}=this.nextBufferRange()){return this.bytes.subarray(r,r+n)}readDictionary(e){return this.dictionaries.get(e.id)}}class obe extends Pee{constructor(e,n,r,i,s){super(new Uint8Array(0),n,r,i,s),this.sources=e}readNullBitmap(e,n,{offset:r}=this.nextBufferRange()){return n<=0?new Uint8Array(0):zT(this.sources[r])}readOffsets(e,{offset:n}=this.nextBufferRange()){return Ts(Uint8Array,Ts(e.OffsetArrayType,this.sources[n]))}readTypeIds(e,{offset:n}=this.nextBufferRange()){return Ts(Uint8Array,Ts(e.ArrayType,this.sources[n]))}readData(e,{offset:n}=this.nextBufferRange()){const{sources:r}=this;return Xn.isTimestamp(e)||(Xn.isInt(e)||Xn.isTime(e))&&e.bitWidth===64||Xn.isDuration(e)||Xn.isDate(e)&&e.unit===_f.MILLISECOND?Ts(Uint8Array,nc.convertArray(r[n])):Xn.isDecimal(e)?Ts(Uint8Array,Ep.convertArray(r[n])):Xn.isBinary(e)||Xn.isLargeBinary(e)||Xn.isFixedSizeBinary(e)?abe(r[n]):Xn.isBool(e)?zT(r[n]):Xn.isUtf8(e)||Xn.isLargeUtf8(e)?Y$(r[n].join("")):Ts(Uint8Array,Ts(e.ArrayType,r[n].map(i=>+i)))}}function abe(t){const e=t.join(""),n=new Uint8Array(e.length/2);for(let r=0;r<e.length;r+=2)n[r>>1]=Number.parseInt(e.slice(r,r+2),16);return n}class mr extends ci{compareSchemas(e,n){return e===n||n instanceof e.constructor&&this.compareManyFields(e.fields,n.fields)}compareManyFields(e,n){return e===n||Array.isArray(e)&&Array.isArray(n)&&e.length===n.length&&e.every((r,i)=>this.compareFields(r,n[i]))}compareFields(e,n){return e===n||n instanceof e.constructor&&e.name===n.name&&e.nullable===n.nullable&&this.visit(e.type,n.type)}}function Uu(t,e){return e instanceof t.constructor}function o_(t,e){return t===e||Uu(t,e)}function y0(t,e){return t===e||Uu(t,e)&&t.bitWidth===e.bitWidth&&t.isSigned===e.isSigned}function cD(t,e){return t===e||Uu(t,e)&&t.precision===e.precision}function lbe(t,e){return t===e||Uu(t,e)&&t.byteWidth===e.byteWidth}function cB(t,e){return t===e||Uu(t,e)&&t.unit===e.unit}function AC(t,e){return t===e||Uu(t,e)&&t.unit===e.unit&&t.timezone===e.timezone}function EC(t,e){return t===e||Uu(t,e)&&t.unit===e.unit&&t.bitWidth===e.bitWidth}function ube(t,e){return t===e||Uu(t,e)&&t.children.length===e.children.length&&a1.compareManyFields(t.children,e.children)}function cbe(t,e){return t===e||Uu(t,e)&&t.children.length===e.children.length&&a1.compareManyFields(t.children,e.children)}function hB(t,e){return t===e||Uu(t,e)&&t.mode===e.mode&&t.typeIds.every((n,r)=>n===e.typeIds[r])&&a1.compareManyFields(t.children,e.children)}function hbe(t,e){return t===e||Uu(t,e)&&t.id===e.id&&t.isOrdered===e.isOrdered&&a1.visit(t.indices,e.indices)&&a1.visit(t.dictionary,e.dictionary)}function fB(t,e){return t===e||Uu(t,e)&&t.unit===e.unit}function TC(t,e){return t===e||Uu(t,e)&&t.unit===e.unit}function fbe(t,e){return t===e||Uu(t,e)&&t.listSize===e.listSize&&t.children.length===e.children.length&&a1.compareManyFields(t.children,e.children)}function dbe(t,e){return t===e||Uu(t,e)&&t.keysSorted===e.keysSorted&&t.children.length===e.children.length&&a1.compareManyFields(t.children,e.children)}mr.prototype.visitNull=o_;mr.prototype.visitBool=o_;mr.prototype.visitInt=y0;mr.prototype.visitInt8=y0;mr.prototype.visitInt16=y0;mr.prototype.visitInt32=y0;mr.prototype.visitInt64=y0;mr.prototype.visitUint8=y0;mr.prototype.visitUint16=y0;mr.prototype.visitUint32=y0;mr.prototype.visitUint64=y0;mr.prototype.visitFloat=cD;mr.prototype.visitFloat16=cD;mr.prototype.visitFloat32=cD;mr.prototype.visitFloat64=cD;mr.prototype.visitUtf8=o_;mr.prototype.visitLargeUtf8=o_;mr.prototype.visitBinary=o_;mr.prototype.visitLargeBinary=o_;mr.prototype.visitFixedSizeBinary=lbe;mr.prototype.visitDate=cB;mr.prototype.visitDateDay=cB;mr.prototype.visitDateMillisecond=cB;mr.prototype.visitTimestamp=AC;mr.prototype.visitTimestampSecond=AC;mr.prototype.visitTimestampMillisecond=AC;mr.prototype.visitTimestampMicrosecond=AC;mr.prototype.visitTimestampNanosecond=AC;mr.prototype.visitTime=EC;mr.prototype.visitTimeSecond=EC;mr.prototype.visitTimeMillisecond=EC;mr.prototype.visitTimeMicrosecond=EC;mr.prototype.visitTimeNanosecond=EC;mr.prototype.visitDecimal=o_;mr.prototype.visitList=ube;mr.prototype.visitStruct=cbe;mr.prototype.visitUnion=hB;mr.prototype.visitDenseUnion=hB;mr.prototype.visitSparseUnion=hB;mr.prototype.visitDictionary=hbe;mr.prototype.visitInterval=fB;mr.prototype.visitIntervalDayTime=fB;mr.prototype.visitIntervalYearMonth=fB;mr.prototype.visitDuration=TC;mr.prototype.visitDurationSecond=TC;mr.prototype.visitDurationMillisecond=TC;mr.prototype.visitDurationMicrosecond=TC;mr.prototype.visitDurationNanosecond=TC;mr.prototype.visitFixedSizeList=fbe;mr.prototype.visitMap=dbe;const a1=new mr;function aF(t,e){return a1.compareSchemas(t,e)}function lM(t,e){return pbe(t,e.map(n=>n.data.concat()))}function pbe(t,e){const n=[...t.fields],r=[],i={numBatches:e.reduce((p,g)=>Math.max(p,g.length),0)};let s=0,o=0,a=-1;const l=e.length;let h,f=[];for(;i.numBatches-- >0;){for(o=Number.POSITIVE_INFINITY,a=-1;++a<l;)f[a]=h=e[a].shift(),o=Math.min(o,h?h.length:o);Number.isFinite(o)&&(f=mbe(n,o,f,e,i),o>0&&(r[s++]=pi({type:new Pu(n),length:o,nullCount:0,children:f.slice()})))}return[t=t.assign(n),r.map(p=>new cc(t,p))]}function mbe(t,e,n,r,i){var s;const o=(e+63&-64)>>3;for(let a=-1,l=r.length;++a<l;){const h=n[a],f=h?.length;if(f>=e)f===e?n[a]=h:(n[a]=h.slice(0,e),i.numBatches=Math.max(i.numBatches,r[a].unshift(h.slice(e,f-e))));else{const p=t[a];t[a]=p.clone({nullable:!0}),n[a]=(s=h?._changeLengthAndBackfillNullBitmap(e))!==null&&s!==void 0?s:pi({type:p.type,length:e,nullCount:e,nullBitmap:new Uint8Array(o)})}}return n}var Dee;let l1=class Fv{constructor(...e){var n,r;if(e.length===0)return this.batches=[],this.schema=new Ro([]),this._offsets=[0],this;let i,s;e[0]instanceof Ro&&(i=e.shift()),e.at(-1)instanceof Uint32Array&&(s=e.pop());const o=l=>{if(l){if(l instanceof cc)return[l];if(l instanceof Fv)return l.batches;if(l instanceof As){if(l.type instanceof Pu)return[new cc(new Ro(l.type.children),l)]}else{if(Array.isArray(l))return l.flatMap(h=>o(h));if(typeof l[Symbol.iterator]=="function")return[...l].flatMap(h=>o(h));if(typeof l=="object"){const h=Object.keys(l),f=h.map(b=>new bs([l[b]])),p=i??new Ro(h.map((b,x)=>new bo(String(b),f[x].type,f[x].nullable))),[,g]=lM(p,f);return g.length===0?[new cc(l)]:g}}}return[]},a=e.flatMap(l=>o(l));if(i=(r=i??((n=a[0])===null||n===void 0?void 0:n.schema))!==null&&r!==void 0?r:new Ro([]),!(i instanceof Ro))throw new TypeError("Table constructor expects a [Schema, RecordBatch[]] pair.");for(const l of a){if(!(l instanceof cc))throw new TypeError("Table constructor expects a [Schema, RecordBatch[]] pair.");if(!aF(i,l.schema))throw new TypeError("Table and inner RecordBatch schemas must be equivalent.")}this.schema=i,this.batches=a,this._offsets=s??xee(this.data)}get data(){return this.batches.map(({data:e})=>e)}get numCols(){return this.schema.fields.length}get numRows(){return this.data.reduce((e,n)=>e+n.length,0)}get nullCount(){return this._nullCount===-1&&(this._nullCount=_ee(this.data)),this._nullCount}isValid(e){return!1}get(e){return null}at(e){return this.get(rB(e,this.numRows))}set(e,n){}indexOf(e,n){return-1}[Symbol.iterator](){return this.batches.length>0?aB.visit(new bs(this.data)):new Array(0)[Symbol.iterator]()}toArray(){return[...this]}toString(){return`[
  ${this.toArray().join(`,
  `)}
]`}concat(...e){const n=this.schema,r=this.data.concat(e.flatMap(({data:i})=>i));return new Fv(n,r.map(i=>new cc(n,i)))}slice(e,n){const r=this.schema;[e,n]=vee({length:this.numRows},e,n);const i=wee(this.data,this._offsets,e,n);return new Fv(r,i.map(s=>new cc(r,s)))}getChild(e){return this.getChildAt(this.schema.fields.findIndex(n=>n.name===e))}getChildAt(e){if(e>-1&&e<this.schema.fields.length){const n=this.data.map(r=>r.children[e]);if(n.length===0){const{type:r}=this.schema.fields[e],i=pi({type:r,length:0,nullCount:0});n.push(i._changeLengthAndBackfillNullBitmap(this.numRows))}return new bs(n)}return null}setChild(e,n){var r;return this.setChildAt((r=this.schema.fields)===null||r===void 0?void 0:r.findIndex(i=>i.name===e),n)}setChildAt(e,n){let r=this.schema,i=[...this.batches];if(e>-1&&e<this.numCols){n||(n=new bs([pi({type:new s1,length:this.numRows})]));const s=r.fields.slice(),o=s[e].clone({type:n.type}),a=this.schema.fields.map((l,h)=>this.getChildAt(h));[s[e],a[e]]=[o,n],[r,i]=lM(r,a)}return new Fv(r,i)}select(e){const n=this.schema.fields.reduce((r,i,s)=>r.set(i.name,s),new Map);return this.selectAt(e.map(r=>n.get(r)).filter(r=>r>-1))}selectAt(e){const n=this.schema.selectAt(e),r=this.batches.map(i=>i.selectAt(e));return new Fv(n,r)}assign(e){const n=this.schema.fields,[r,i]=e.schema.fields.reduce((a,l,h)=>{const[f,p]=a,g=n.findIndex(b=>b.name===l.name);return~g?p[g]=h:f.push(h),a},[[],[]]),s=this.schema.assign(e.schema),o=[...n.map((a,l)=>[l,i[l]]).map(([a,l])=>l===void 0?this.getChildAt(a):e.getChildAt(l)),...r.map(a=>e.getChildAt(a))].filter(Boolean);return new Fv(...lM(s,o))}};Dee=Symbol.toStringTag;l1[Dee]=(t=>(t.schema=null,t.batches=[],t._offsets=new Uint32Array([0]),t._nullCount=-1,t[Symbol.isConcatSpreadable]=!0,t.isValid=QT(oB),t.get=QT(Ac.getVisitFn(Qe.Struct)),t.set=Oee(xf.getVisitFn(Qe.Struct)),t.indexOf=See(jT.getVisitFn(Qe.Struct)),"Table"))(l1.prototype);var Iee;let cc=class d3{constructor(...e){switch(e.length){case 2:{if([this.schema]=e,!(this.schema instanceof Ro))throw new TypeError("RecordBatch constructor expects a [Schema, Data] pair.");if([,this.data=pi({nullCount:0,type:new Pu(this.schema.fields),children:this.schema.fields.map(n=>pi({type:n.type,nullCount:0}))})]=e,!(this.data instanceof As))throw new TypeError("RecordBatch constructor expects a [Schema, Data] pair.");[this.schema,this.data]=qj(this.schema,this.data.children);break}case 1:{const[n]=e,{fields:r,children:i,length:s}=Object.keys(n).reduce((l,h,f)=>(l.children[f]=n[h],l.length=Math.max(l.length,n[h].length),l.fields[f]=bo.new({name:h,type:n[h].type,nullable:!0}),l),{length:0,fields:new Array,children:new Array}),o=new Ro(r),a=pi({type:new Pu(r),length:s,children:i,nullCount:0});[this.schema,this.data]=qj(o,a.children,s);break}default:throw new TypeError("RecordBatch constructor expects an Object mapping names to child Data, or a [Schema, Data] pair.")}}get dictionaries(){return this._dictionaries||(this._dictionaries=Mee(this.schema.fields,this.data.children))}get numCols(){return this.schema.fields.length}get numRows(){return this.data.length}get nullCount(){return this.data.nullCount}isValid(e){return this.data.getValid(e)}get(e){return Ac.visit(this.data,e)}at(e){return this.get(rB(e,this.numRows))}set(e,n){return xf.visit(this.data,e,n)}indexOf(e,n){return jT.visit(this.data,e,n)}[Symbol.iterator](){return aB.visit(new bs([this.data]))}toArray(){return[...this]}concat(...e){return new l1(this.schema,[this,...e])}slice(e,n){const[r]=new bs([this.data]).slice(e,n).data;return new d3(this.schema,r)}getChild(e){var n;return this.getChildAt((n=this.schema.fields)===null||n===void 0?void 0:n.findIndex(r=>r.name===e))}getChildAt(e){return e>-1&&e<this.schema.fields.length?new bs([this.data.children[e]]):null}setChild(e,n){var r;return this.setChildAt((r=this.schema.fields)===null||r===void 0?void 0:r.findIndex(i=>i.name===e),n)}setChildAt(e,n){let r=this.schema,i=this.data;if(e>-1&&e<this.numCols){n||(n=new bs([pi({type:new s1,length:this.numRows})]));const s=r.fields.slice(),o=i.children.slice(),a=s[e].clone({type:n.type});[s[e],o[e]]=[a,n.data[0]],r=new Ro(s,new Map(this.schema.metadata)),i=pi({type:new Pu(s),children:o})}return new d3(r,i)}select(e){const n=this.schema.select(e),r=new Pu(n.fields),i=[];for(const s of e){const o=this.schema.fields.findIndex(a=>a.name===s);~o&&(i[o]=this.data.children[o])}return new d3(n,pi({type:r,length:this.numRows,children:i}))}selectAt(e){const n=this.schema.selectAt(e),r=e.map(s=>this.data.children[s]).filter(Boolean),i=pi({type:new Pu(n.fields),length:this.numRows,children:r});return new d3(n,i)}};Iee=Symbol.toStringTag;cc[Iee]=(t=>(t._nullCount=-1,t[Symbol.isConcatSpreadable]=!0,"RecordBatch"))(cc.prototype);function qj(t,e,n=e.reduce((r,i)=>Math.max(r,i.length),0)){var r;const i=[...t.fields],s=[...e],o=(n+63&-64)>>3;for(const[a,l]of t.fields.entries()){const h=e[a];(!h||h.length!==n)&&(i[a]=l.clone({nullable:!0}),s[a]=(r=h?._changeLengthAndBackfillNullBitmap(n))!==null&&r!==void 0?r:pi({type:l.type,length:n,nullCount:n,nullBitmap:new Uint8Array(o)}))}return[t.assign(i),pi({type:new Pu(i),length:n,children:s})]}function Mee(t,e,n=new Map){var r,i;if(((r=t?.length)!==null&&r!==void 0?r:0)>0&&t?.length===e?.length)for(let s=-1,o=t.length;++s<o;){const{type:a}=t[s],l=e[s];for(const h of[l,...((i=l?.dictionary)===null||i===void 0?void 0:i.data)||[]])Mee(a.children,h?.children,n);if(Xn.isDictionary(a)){const{id:h}=a;if(!n.has(h))l?.dictionary&&n.set(h,l.dictionary);else if(n.get(h)!==l.dictionary)throw new Error("Cannot create Schema containing two different dictionaries with the same Id")}}return n}class dB extends cc{constructor(e){const n=e.fields.map(i=>pi({type:i.type})),r=pi({type:new Pu(e.fields),nullCount:0,children:n});super(e,r)}}let yy=class xp{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsMessage(e,n){return(n||new xp).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsMessage(e,n){return e.setPosition(e.position()+Os),(n||new xp).__init(e.readInt32(e.position())+e.position(),e)}version(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt16(this.bb_pos+e):sa.V1}headerType(){const e=this.bb.__offset(this.bb_pos,6);return e?this.bb.readUint8(this.bb_pos+e):es.NONE}header(e){const n=this.bb.__offset(this.bb_pos,8);return n?this.bb.__union(e,this.bb_pos+n):null}bodyLength(){const e=this.bb.__offset(this.bb_pos,10);return e?this.bb.readInt64(this.bb_pos+e):BigInt("0")}customMetadata(e,n){const r=this.bb.__offset(this.bb_pos,12);return r?(n||new Na).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+e*4),this.bb):null}customMetadataLength(){const e=this.bb.__offset(this.bb_pos,12);return e?this.bb.__vector_len(this.bb_pos+e):0}static startMessage(e){e.startObject(5)}static addVersion(e,n){e.addFieldInt16(0,n,sa.V1)}static addHeaderType(e,n){e.addFieldInt8(1,n,es.NONE)}static addHeader(e,n){e.addFieldOffset(2,n,0)}static addBodyLength(e,n){e.addFieldInt64(3,n,BigInt("0"))}static addCustomMetadata(e,n){e.addFieldOffset(4,n,0)}static createCustomMetadataVector(e,n){e.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)e.addOffset(n[r]);return e.endVector()}static startCustomMetadataVector(e,n){e.startVector(4,n,4)}static endMessage(e){return e.endObject()}static finishMessageBuffer(e,n){e.finish(n)}static finishSizePrefixedMessageBuffer(e,n){e.finish(n,void 0,!0)}static createMessage(e,n,r,i,s,o){return xp.startMessage(e),xp.addVersion(e,n),xp.addHeaderType(e,r),xp.addHeader(e,i),xp.addBodyLength(e,s),xp.addCustomMetadata(e,o),xp.endMessage(e)}};class gbe extends ci{visit(e,n){return e==null||n==null?void 0:super.visit(e,n)}visitNull(e,n){return Lj.startNull(n),Lj.endNull(n)}visitInt(e,n){return lh.startInt(n),lh.addBitWidth(n,e.bitWidth),lh.addIsSigned(n,e.isSigned),lh.endInt(n)}visitFloat(e,n){return Rp.startFloatingPoint(n),Rp.addPrecision(n,e.precision),Rp.endFloatingPoint(n)}visitBinary(e,n){return Dj.startBinary(n),Dj.endBinary(n)}visitLargeBinary(e,n){return Mj.startLargeBinary(n),Mj.endLargeBinary(n)}visitBool(e,n){return Ij.startBool(n),Ij.endBool(n)}visitUtf8(e,n){return $j.startUtf8(n),$j.endUtf8(n)}visitLargeUtf8(e,n){return Rj.startLargeUtf8(n),Rj.endLargeUtf8(n)}visitDecimal(e,n){return Rx.startDecimal(n),Rx.addScale(n,e.scale),Rx.addPrecision(n,e.precision),Rx.addBitWidth(n,e.bitWidth),Rx.endDecimal(n)}visitDate(e,n){return s5.startDate(n),s5.addUnit(n,e.unit),s5.endDate(n)}visitTime(e,n){return sf.startTime(n),sf.addUnit(n,e.unit),sf.addBitWidth(n,e.bitWidth),sf.endTime(n)}visitTimestamp(e,n){const r=e.timezone&&n.createString(e.timezone)||void 0;return of.startTimestamp(n),of.addUnit(n,e.unit),r!==void 0&&of.addTimezone(n,r),of.endTimestamp(n)}visitInterval(e,n){return Fp.startInterval(n),Fp.addUnit(n,e.unit),Fp.endInterval(n)}visitDuration(e,n){return o5.startDuration(n),o5.addUnit(n,e.unit),o5.endDuration(n)}visitList(e,n){return Fj.startList(n),Fj.endList(n)}visitStruct(e,n){return Kv.startStruct_(n),Kv.endStruct_(n)}visitUnion(e,n){uc.startTypeIdsVector(n,e.typeIds.length);const r=uc.createTypeIdsVector(n,e.typeIds);return uc.startUnion(n),uc.addMode(n,e.mode),uc.addTypeIds(n,r),uc.endUnion(n)}visitDictionary(e,n){const r=this.visit(e.indices,n);return Rg.startDictionaryEncoding(n),Rg.addId(n,BigInt(e.id)),Rg.addIsOrdered(n,e.isOrdered),r!==void 0&&Rg.addIndexType(n,r),Rg.endDictionaryEncoding(n)}visitFixedSizeBinary(e,n){return a5.startFixedSizeBinary(n),a5.addByteWidth(n,e.byteWidth),a5.endFixedSizeBinary(n)}visitFixedSizeList(e,n){return l5.startFixedSizeList(n),l5.addListSize(n,e.listSize),l5.endFixedSizeList(n)}visitMap(e,n){return u5.startMap(n),u5.addKeysSorted(n,e.keysSorted),u5.endMap(n)}}const uM=new gbe;function ybe(t,e=new Map){return new Ro(bbe(t,e),f5(t.metadata),e)}function Ree(t){return new wh(t.count,Fee(t.columns),Lee(t.columns))}function vbe(t){return new hm(Ree(t.data),t.id,t.isDelta)}function bbe(t,e){return(t.fields||[]).filter(Boolean).map(n=>bo.fromJSON(n,e))}function Zj(t,e){return(t.children||[]).filter(Boolean).map(n=>bo.fromJSON(n,e))}function Fee(t){return(t||[]).reduce((e,n)=>[...e,new u1(n.count,_be(n.VALIDITY)),...Fee(n.children)],[])}function Lee(t,e=[]){for(let n=-1,r=(t||[]).length;++n<r;){const i=t[n];i.VALIDITY&&e.push(new Up(e.length,i.VALIDITY.length)),i.TYPE_ID&&e.push(new Up(e.length,i.TYPE_ID.length)),i.OFFSET&&e.push(new Up(e.length,i.OFFSET.length)),i.DATA&&e.push(new Up(e.length,i.DATA.length)),e=Lee(i.children,e)}return e}function _be(t){return(t||[]).reduce((e,n)=>e+ +(n===0),0)}function xbe(t,e){let n,r,i,s,o,a;return!e||!(s=t.dictionary)?(o=Wj(t,Zj(t,e)),i=new bo(t.name,o,t.nullable,f5(t.metadata))):e.has(n=s.id)?(r=(r=s.indexType)?Xj(r):new pk,a=new t2(e.get(n),r,n,s.isOrdered),i=new bo(t.name,a,t.nullable,f5(t.metadata))):(r=(r=s.indexType)?Xj(r):new pk,e.set(n,o=Wj(t,Zj(t,e))),a=new t2(o,r,n,s.isOrdered),i=new bo(t.name,a,t.nullable,f5(t.metadata))),i||null}function f5(t=[]){return new Map(t.map(({key:e,value:n})=>[e,n]))}function Xj(t){return new $b(t.isSigned,t.bitWidth)}function Wj(t,e){const n=t.type.name;switch(n){case"NONE":return new s1;case"null":return new s1;case"binary":return new OT;case"largebinary":return new ST;case"utf8":return new kT;case"largeutf8":return new CT;case"bool":return new AT;case"list":return new RT((e||[])[0]);case"struct":return new Pu(e||[]);case"struct_":return new Pu(e||[])}switch(n){case"int":{const r=t.type;return new $b(r.isSigned,r.bitWidth)}case"floatingpoint":{const r=t.type;return new wT(Jl[r.precision])}case"decimal":{const r=t.type;return new ET(r.scale,r.precision,r.bitWidth)}case"date":{const r=t.type;return new TT(_f[r.unit])}case"time":{const r=t.type;return new PT(_r[r.unit],r.bitWidth)}case"timestamp":{const r=t.type;return new DT(_r[r.unit],r.timezone)}case"interval":{const r=t.type;return new IT(cm[r.unit])}case"duration":{const r=t.type;return new MT(_r[r.unit])}case"union":{const r=t.type,[i,...s]=(r.mode+"").toLowerCase(),o=i.toUpperCase()+s.join("");return new FT(ou[o],r.typeIds||[],e||[])}case"fixedsizebinary":{const r=t.type;return new LT(r.byteWidth)}case"fixedsizelist":{const r=t.type;return new $T(r.listSize,(e||[])[0])}case"map":{const r=t.type;return new BT((e||[])[0],r.keysSorted)}}throw new Error(`Unrecognized type: "${n}"`)}var wbe=KK,Obe=Jw;class Du{static fromJSON(e,n){const r=new Du(0,sa.V5,n);return r._createHeader=Sbe(e,n),r}static decode(e){e=new Obe(Di(e));const n=yy.getRootAsMessage(e),r=n.bodyLength(),i=n.version(),s=n.headerType(),o=new Du(r,i,s);return o._createHeader=kbe(n,s),o}static encode(e){const n=new wbe;let r=-1;return e.isSchema()?r=Ro.encode(n,e.header()):e.isRecordBatch()?r=wh.encode(n,e.header()):e.isDictionaryBatch()&&(r=hm.encode(n,e.header())),yy.startMessage(n),yy.addVersion(n,sa.V5),yy.addHeader(n,r),yy.addHeaderType(n,e.headerType),yy.addBodyLength(n,BigInt(e.bodyLength)),yy.finishMessageBuffer(n,yy.endMessage(n)),n.asUint8Array()}static from(e,n=0){if(e instanceof Ro)return new Du(0,sa.V5,es.Schema,e);if(e instanceof wh)return new Du(n,sa.V5,es.RecordBatch,e);if(e instanceof hm)return new Du(n,sa.V5,es.DictionaryBatch,e);throw new Error(`Unrecognized Message header: ${e}`)}get type(){return this.headerType}get version(){return this._version}get headerType(){return this._headerType}get bodyLength(){return this._bodyLength}header(){return this._createHeader()}isSchema(){return this.headerType===es.Schema}isRecordBatch(){return this.headerType===es.RecordBatch}isDictionaryBatch(){return this.headerType===es.DictionaryBatch}constructor(e,n,r,i){this._version=n,this._headerType=r,this.body=new Uint8Array(0),i&&(this._createHeader=()=>i),this._bodyLength=Hs(e)}}class wh{get nodes(){return this._nodes}get length(){return this._length}get buffers(){return this._buffers}constructor(e,n,r){this._nodes=n,this._buffers=r,this._length=Hs(e)}}class hm{get id(){return this._id}get data(){return this._data}get isDelta(){return this._isDelta}get length(){return this.data.length}get nodes(){return this.data.nodes}get buffers(){return this.data.buffers}constructor(e,n,r=!1){this._data=e,this._isDelta=r,this._id=Hs(n)}}class Up{constructor(e,n){this.offset=Hs(e),this.length=Hs(n)}}class u1{constructor(e,n){this.length=Hs(e),this.nullCount=Hs(n)}}function Sbe(t,e){return(()=>{switch(e){case es.Schema:return Ro.fromJSON(t);case es.RecordBatch:return wh.fromJSON(t);case es.DictionaryBatch:return hm.fromJSON(t)}throw new Error(`Unrecognized Message type: { name: ${es[e]}, type: ${e} }`)})}function kbe(t,e){return(()=>{switch(e){case es.Schema:return Ro.decode(t.header(new Ap),new Map,t.version());case es.RecordBatch:return wh.decode(t.header(new Og),t.version());case es.DictionaryBatch:return hm.decode(t.header(new Ix),t.version())}throw new Error(`Unrecognized Message type: { name: ${es[e]}, type: ${e} }`)})}bo.encode=Lbe;bo.decode=Rbe;bo.fromJSON=xbe;Ro.encode=Fbe;Ro.decode=Cbe;Ro.fromJSON=ybe;wh.encode=$be;wh.decode=Abe;wh.fromJSON=Ree;hm.encode=Bbe;hm.decode=Ebe;hm.fromJSON=vbe;u1.encode=Nbe;u1.decode=Pbe;Up.encode=zbe;Up.decode=Tbe;function Cbe(t,e=new Map,n=sa.V5){const r=Mbe(t,e);return new Ro(r,d5(t),e,n)}function Abe(t,e=sa.V5){if(t.compression()!==null)throw new Error("Record batch compression not implemented");return new wh(t.length(),Dbe(t),Ibe(t,e))}function Ebe(t,e=sa.V5){return new hm(wh.decode(t.data(),e),t.id(),t.isDelta())}function Tbe(t){return new Up(t.offset(),t.length())}function Pbe(t){return new u1(t.length(),t.nullCount())}function Dbe(t){const e=[];for(let n,r=-1,i=-1,s=t.nodesLength();++r<s;)(n=t.nodes(r))&&(e[++i]=u1.decode(n));return e}function Ibe(t,e){const n=[];for(let r,i=-1,s=-1,o=t.buffersLength();++i<o;)(r=t.buffers(i))&&(e<sa.V4&&(r.bb_pos+=8*(i+1)),n[++s]=Up.decode(r));return n}function Mbe(t,e){const n=[];for(let r,i=-1,s=-1,o=t.fieldsLength();++i<o;)(r=t.fields(i))&&(n[++s]=bo.decode(r,e));return n}function Gj(t,e){const n=[];for(let r,i=-1,s=-1,o=t.childrenLength();++i<o;)(r=t.children(i))&&(n[++s]=bo.decode(r,e));return n}function Rbe(t,e){let n,r,i,s,o,a;return!e||!(a=t.dictionary())?(i=Hj(t,Gj(t,e)),r=new bo(t.name(),i,t.nullable(),d5(t))):e.has(n=Hs(a.id()))?(s=(s=a.indexType())?Yj(s):new pk,o=new t2(e.get(n),s,n,a.isOrdered()),r=new bo(t.name(),o,t.nullable(),d5(t))):(s=(s=a.indexType())?Yj(s):new pk,e.set(n,i=Hj(t,Gj(t,e))),o=new t2(i,s,n,a.isOrdered()),r=new bo(t.name(),o,t.nullable(),d5(t))),r||null}function d5(t){const e=new Map;if(t)for(let n,r,i=-1,s=Math.trunc(t.customMetadataLength());++i<s;)(n=t.customMetadata(i))&&(r=n.key())!=null&&e.set(r,n.value());return e}function Yj(t){return new $b(t.isSigned(),t.bitWidth())}function Hj(t,e){const n=t.typeType();switch(n){case ro.NONE:return new s1;case ro.Null:return new s1;case ro.Binary:return new OT;case ro.LargeBinary:return new ST;case ro.Utf8:return new kT;case ro.LargeUtf8:return new CT;case ro.Bool:return new AT;case ro.List:return new RT((e||[])[0]);case ro.Struct_:return new Pu(e||[])}switch(n){case ro.Int:{const r=t.type(new lh);return new $b(r.isSigned(),r.bitWidth())}case ro.FloatingPoint:{const r=t.type(new Rp);return new wT(r.precision())}case ro.Decimal:{const r=t.type(new Rx);return new ET(r.scale(),r.precision(),r.bitWidth())}case ro.Date:{const r=t.type(new s5);return new TT(r.unit())}case ro.Time:{const r=t.type(new sf);return new PT(r.unit(),r.bitWidth())}case ro.Timestamp:{const r=t.type(new of);return new DT(r.unit(),r.timezone())}case ro.Interval:{const r=t.type(new Fp);return new IT(r.unit())}case ro.Duration:{const r=t.type(new o5);return new MT(r.unit())}case ro.Union:{const r=t.type(new uc);return new FT(r.mode(),r.typeIdsArray()||[],e||[])}case ro.FixedSizeBinary:{const r=t.type(new a5);return new LT(r.byteWidth())}case ro.FixedSizeList:{const r=t.type(new l5);return new $T(r.listSize(),(e||[])[0])}case ro.Map:{const r=t.type(new u5);return new BT((e||[])[0],r.keysSorted())}}throw new Error(`Unrecognized type: "${ro[n]}" (${n})`)}function Fbe(t,e){const n=e.fields.map(s=>bo.encode(t,s));Ap.startFieldsVector(t,n.length);const r=Ap.createFieldsVector(t,n),i=e.metadata&&e.metadata.size>0?Ap.createCustomMetadataVector(t,[...e.metadata].map(([s,o])=>{const a=t.createString(`${s}`),l=t.createString(`${o}`);return Na.startKeyValue(t),Na.addKey(t,a),Na.addValue(t,l),Na.endKeyValue(t)})):-1;return Ap.startSchema(t),Ap.addFields(t,r),Ap.addEndianness(t,Qbe?e2.Little:e2.Big),i!==-1&&Ap.addCustomMetadata(t,i),Ap.endSchema(t)}function Lbe(t,e){let n=-1,r=-1,i=-1;const s=e.type;let o=e.typeId;Xn.isDictionary(s)?(o=s.dictionary.typeId,i=uM.visit(s,t),r=uM.visit(s.dictionary,t)):r=uM.visit(s,t);const a=(s.children||[]).map(f=>bo.encode(t,f)),l=Wh.createChildrenVector(t,a),h=e.metadata&&e.metadata.size>0?Wh.createCustomMetadataVector(t,[...e.metadata].map(([f,p])=>{const g=t.createString(`${f}`),b=t.createString(`${p}`);return Na.startKeyValue(t),Na.addKey(t,g),Na.addValue(t,b),Na.endKeyValue(t)})):-1;return e.name&&(n=t.createString(e.name)),Wh.startField(t),Wh.addType(t,r),Wh.addTypeType(t,o),Wh.addChildren(t,l),Wh.addNullable(t,!!e.nullable),n!==-1&&Wh.addName(t,n),i!==-1&&Wh.addDictionary(t,i),h!==-1&&Wh.addCustomMetadata(t,h),Wh.endField(t)}function $be(t,e){const n=e.nodes||[],r=e.buffers||[];Og.startNodesVector(t,n.length);for(const o of n.slice().reverse())u1.encode(t,o);const i=t.endVector();Og.startBuffersVector(t,r.length);for(const o of r.slice().reverse())Up.encode(t,o);const s=t.endVector();return Og.startRecordBatch(t),Og.addLength(t,BigInt(e.length)),Og.addNodes(t,i),Og.addBuffers(t,s),Og.endRecordBatch(t)}function Bbe(t,e){const n=wh.encode(t,e.data);return Ix.startDictionaryBatch(t),Ix.addId(t,BigInt(e.id)),Ix.addIsDelta(t,e.isDelta),Ix.addData(t,n),Ix.endDictionaryBatch(t)}function Nbe(t,e){return tJ.createFieldNode(t,BigInt(e.length),BigInt(e.nullCount))}function zbe(t,e){return eJ.createBuffer(t,BigInt(e.offset),BigInt(e.length))}const Qbe=(()=>{const t=new ArrayBuffer(2);return new DataView(t).setInt16(0,256,!0),new Int16Array(t)[0]===256})(),pB=t=>`Expected ${es[t]} Message in stream, but was null or length 0.`,mB=t=>`Header pointer of flatbuffer-encoded ${es[t]} Message is null or length 0.`,$ee=(t,e)=>`Expected to read ${t} metadata bytes, but only read ${e}.`,Bee=(t,e)=>`Expected to read ${t} bytes for message body, but only read ${e}.`;class Nee{constructor(e){this.source=e instanceof VT?e:new VT(e)}[Symbol.iterator](){return this}next(){let e;return(e=this.readMetadataLength()).done||e.value===-1&&(e=this.readMetadataLength()).done||(e=this.readMetadata(e.value)).done?Lo:e}throw(e){return this.source.throw(e)}return(e){return this.source.return(e)}readMessage(e){let n;if((n=this.next()).done)return null;if(e!=null&&n.value.headerType!==e)throw new Error(pB(e));return n.value}readMessageBody(e){if(e<=0)return new Uint8Array(0);const n=Di(this.source.read(e));if(n.byteLength<e)throw new Error(Bee(e,n.byteLength));return n.byteOffset%8===0&&n.byteOffset+n.byteLength<=n.buffer.byteLength?n:n.slice()}readSchema(e=!1){const n=es.Schema,r=this.readMessage(n),i=r?.header();if(e&&!i)throw new Error(mB(n));return i}readMetadataLength(){const e=this.source.read(hD),n=e&&new Jw(e),r=n?.readInt32(0)||0;return{done:r===0,value:r}}readMetadata(e){const n=this.source.read(e);if(!n)return Lo;if(n.byteLength<e)throw new Error($ee(e,n.byteLength));return{done:!1,value:Du.decode(n)}}}class jbe{constructor(e,n){this.source=e instanceof n2?e:ZK(e)?new qT(e,n):new n2(e)}[Symbol.asyncIterator](){return this}next(){return Tr(this,void 0,void 0,function*(){let e;return(e=yield this.readMetadataLength()).done||e.value===-1&&(e=yield this.readMetadataLength()).done||(e=yield this.readMetadata(e.value)).done?Lo:e})}throw(e){return Tr(this,void 0,void 0,function*(){return yield this.source.throw(e)})}return(e){return Tr(this,void 0,void 0,function*(){return yield this.source.return(e)})}readMessage(e){return Tr(this,void 0,void 0,function*(){let n;if((n=yield this.next()).done)return null;if(e!=null&&n.value.headerType!==e)throw new Error(pB(e));return n.value})}readMessageBody(e){return Tr(this,void 0,void 0,function*(){if(e<=0)return new Uint8Array(0);const n=Di(yield this.source.read(e));if(n.byteLength<e)throw new Error(Bee(e,n.byteLength));return n.byteOffset%8===0&&n.byteOffset+n.byteLength<=n.buffer.byteLength?n:n.slice()})}readSchema(){return Tr(this,arguments,void 0,function*(e=!1){const n=es.Schema,r=yield this.readMessage(n),i=r?.header();if(e&&!i)throw new Error(mB(n));return i})}readMetadataLength(){return Tr(this,void 0,void 0,function*(){const e=yield this.source.read(hD),n=e&&new Jw(e),r=n?.readInt32(0)||0;return{done:r===0,value:r}})}readMetadata(e){return Tr(this,void 0,void 0,function*(){const n=yield this.source.read(e);if(!n)return Lo;if(n.byteLength<e)throw new Error($ee(e,n.byteLength));return{done:!1,value:Du.decode(n)}})}}class Ube extends Nee{constructor(e){super(new Uint8Array(0)),this._schema=!1,this._body=[],this._batchIndex=0,this._dictionaryIndex=0,this._json=e instanceof Uj?e:new Uj(e)}next(){const{_json:e}=this;if(!this._schema)return this._schema=!0,{done:!1,value:Du.fromJSON(e.schema,es.Schema)};if(this._dictionaryIndex<e.dictionaries.length){const n=e.dictionaries[this._dictionaryIndex++];return this._body=n.data.columns,{done:!1,value:Du.fromJSON(n,es.DictionaryBatch)}}if(this._batchIndex<e.batches.length){const n=e.batches[this._batchIndex++];return this._body=n.columns,{done:!1,value:Du.fromJSON(n,es.RecordBatch)}}return this._body=[],Lo}readMessageBody(e){return n(this._body);function n(r){return(r||[]).reduce((i,s)=>[...i,...s.VALIDITY&&[s.VALIDITY]||[],...s.TYPE_ID&&[s.TYPE_ID]||[],...s.OFFSET&&[s.OFFSET]||[],...s.DATA&&[s.DATA]||[],...n(s.children)],[])}}readMessage(e){let n;if((n=this.next()).done)return null;if(e!=null&&n.value.headerType!==e)throw new Error(pB(e));return n.value}readSchema(){const e=es.Schema,n=this.readMessage(e),r=n?.header();if(!n||!r)throw new Error(mB(e));return r}}const hD=4,lF="ARROW1",gk=new Uint8Array(lF.length);for(let t=0;t<lF.length;t+=1)gk[t]=lF.codePointAt(t);function gB(t,e=0){for(let n=-1,r=gk.length;++n<r;)if(gk[n]!==t[e+n])return!1;return!0}const PC=gk.length,zee=PC+hD,Vbe=PC*2+hD;class df extends lB{constructor(e){super(),this._impl=e}get closed(){return this._impl.closed}get schema(){return this._impl.schema}get autoDestroy(){return this._impl.autoDestroy}get dictionaries(){return this._impl.dictionaries}get numDictionaries(){return this._impl.numDictionaries}get numRecordBatches(){return this._impl.numRecordBatches}get footer(){return this._impl.isFile()?this._impl.footer:null}isSync(){return this._impl.isSync()}isAsync(){return this._impl.isAsync()}isFile(){return this._impl.isFile()}isStream(){return this._impl.isStream()}next(){return this._impl.next()}throw(e){return this._impl.throw(e)}return(e){return this._impl.return(e)}cancel(){return this._impl.cancel()}reset(e){return this._impl.reset(e),this._DOMStream=void 0,this._nodeStream=void 0,this}open(e){const n=this._impl.open(e);return Lb(n)?n.then(()=>this):this}readRecordBatch(e){return this._impl.isFile()?this._impl.readRecordBatch(e):null}[Symbol.iterator](){return this._impl[Symbol.iterator]()}[Symbol.asyncIterator](){return this._impl[Symbol.asyncIterator]()}toDOMStream(){return tf.toDOMStream(this.isSync()?{[Symbol.iterator]:()=>this}:{[Symbol.asyncIterator]:()=>this})}toNodeStream(){return tf.toNodeStream(this.isSync()?{[Symbol.iterator]:()=>this}:{[Symbol.asyncIterator]:()=>this},{objectMode:!0})}static throughNode(e){throw new Error('"throughNode" not available in this environment')}static throughDOM(e,n){throw new Error('"throughDOM" not available in this environment')}static from(e){return e instanceof df?e:K7(e)?Wbe(e):ZK(e)?Hbe(e):Lb(e)?Tr(this,void 0,void 0,function*(){return yield df.from(yield e)}):XK(e)||H$(e)||WK(e)||G2(e)?Ybe(new n2(e)):Gbe(new VT(e))}static readAll(e){return e instanceof df?e.isSync()?Kj(e):Jj(e):K7(e)||ArrayBuffer.isView(e)||CC(e)||qK(e)?Kj(e):Jj(e)}}class ZT extends df{constructor(e){super(e),this._impl=e}readAll(){return[...this]}[Symbol.iterator](){return this._impl[Symbol.iterator]()}[Symbol.asyncIterator](){return jp(this,arguments,function*(){yield Jr(yield*i5(vb(this[Symbol.iterator]())))})}}class XT extends df{constructor(e){super(e),this._impl=e}readAll(){return Tr(this,void 0,void 0,function*(){var e,n,r,i;const s=new Array;try{for(var o=!0,a=vb(this),l;l=yield a.next(),e=l.done,!e;o=!0){i=l.value,o=!1;const h=i;s.push(h)}}catch(h){n={error:h}}finally{try{!o&&!e&&(r=a.return)&&(yield r.call(a))}finally{if(n)throw n.error}}return s})}[Symbol.iterator](){throw new Error("AsyncRecordBatchStreamReader is not Iterable")}[Symbol.asyncIterator](){return this._impl[Symbol.asyncIterator]()}}class Qee extends ZT{constructor(e){super(e),this._impl=e}}class qbe extends XT{constructor(e){super(e),this._impl=e}}class jee{get numDictionaries(){return this._dictionaryIndex}get numRecordBatches(){return this._recordBatchIndex}constructor(e=new Map){this.closed=!1,this.autoDestroy=!0,this._dictionaryIndex=0,this._recordBatchIndex=0,this.dictionaries=e}isSync(){return!1}isAsync(){return!1}isFile(){return!1}isStream(){return!1}reset(e){return this._dictionaryIndex=0,this._recordBatchIndex=0,this.schema=e,this.dictionaries=new Map,this}_loadRecordBatch(e,n){const r=this._loadVectors(e,n,this.schema.fields),i=pi({type:new Pu(this.schema.fields),length:e.length,children:r});return new cc(this.schema,i)}_loadDictionaryBatch(e,n){const{id:r,isDelta:i}=e,{dictionaries:s,schema:o}=this,a=s.get(r),l=o.dictionaries.get(r),h=this._loadVectors(e.data,n,[l]);return(a&&i?a.concat(new bs(h)):new bs(h)).memoize()}_loadVectors(e,n,r){return new Pee(n,e.nodes,e.buffers,this.dictionaries,this.schema.metadataVersion).visitMany(r)}}class WT extends jee{constructor(e,n){super(n),this._reader=K7(e)?new Ube(this._handle=e):new Nee(this._handle=e)}isSync(){return!0}isStream(){return!0}[Symbol.iterator](){return this}cancel(){!this.closed&&(this.closed=!0)&&(this.reset()._reader.return(),this._reader=null,this.dictionaries=null)}open(e){return this.closed||(this.autoDestroy=Vee(this,e),this.schema||(this.schema=this._reader.readSchema())||this.cancel()),this}throw(e){return!this.closed&&this.autoDestroy&&(this.closed=!0)?this.reset()._reader.throw(e):Lo}return(e){return!this.closed&&this.autoDestroy&&(this.closed=!0)?this.reset()._reader.return(e):Lo}next(){if(this.closed)return Lo;let e;const{_reader:n}=this;for(;e=this._readNextMessageAndValidate();)if(e.isSchema())this.reset(e.header());else if(e.isRecordBatch()){this._recordBatchIndex++;const r=e.header(),i=n.readMessageBody(e.bodyLength);return{done:!1,value:this._loadRecordBatch(r,i)}}else if(e.isDictionaryBatch()){this._dictionaryIndex++;const r=e.header(),i=n.readMessageBody(e.bodyLength),s=this._loadDictionaryBatch(r,i);this.dictionaries.set(r.id,s)}return this.schema&&this._recordBatchIndex===0?(this._recordBatchIndex++,{done:!1,value:new dB(this.schema)}):this.return()}_readNextMessageAndValidate(e){return this._reader.readMessage(e)}}class GT extends jee{constructor(e,n){super(n),this._reader=new jbe(this._handle=e)}isAsync(){return!0}isStream(){return!0}[Symbol.asyncIterator](){return this}cancel(){return Tr(this,void 0,void 0,function*(){!this.closed&&(this.closed=!0)&&(yield this.reset()._reader.return(),this._reader=null,this.dictionaries=null)})}open(e){return Tr(this,void 0,void 0,function*(){return this.closed||(this.autoDestroy=Vee(this,e),this.schema||(this.schema=yield this._reader.readSchema())||(yield this.cancel())),this})}throw(e){return Tr(this,void 0,void 0,function*(){return!this.closed&&this.autoDestroy&&(this.closed=!0)?yield this.reset()._reader.throw(e):Lo})}return(e){return Tr(this,void 0,void 0,function*(){return!this.closed&&this.autoDestroy&&(this.closed=!0)?yield this.reset()._reader.return(e):Lo})}next(){return Tr(this,void 0,void 0,function*(){if(this.closed)return Lo;let e;const{_reader:n}=this;for(;e=yield this._readNextMessageAndValidate();)if(e.isSchema())yield this.reset(e.header());else if(e.isRecordBatch()){this._recordBatchIndex++;const r=e.header(),i=yield n.readMessageBody(e.bodyLength);return{done:!1,value:this._loadRecordBatch(r,i)}}else if(e.isDictionaryBatch()){this._dictionaryIndex++;const r=e.header(),i=yield n.readMessageBody(e.bodyLength),s=this._loadDictionaryBatch(r,i);this.dictionaries.set(r.id,s)}return this.schema&&this._recordBatchIndex===0?(this._recordBatchIndex++,{done:!1,value:new dB(this.schema)}):yield this.return()})}_readNextMessageAndValidate(e){return Tr(this,void 0,void 0,function*(){return yield this._reader.readMessage(e)})}}class Uee extends WT{get footer(){return this._footer}get numDictionaries(){return this._footer?this._footer.numDictionaries:0}get numRecordBatches(){return this._footer?this._footer.numRecordBatches:0}constructor(e,n){super(e instanceof Vj?e:new Vj(e),n)}isSync(){return!0}isFile(){return!0}open(e){if(!this.closed&&!this._footer){this.schema=(this._footer=this._readFooter()).schema;for(const n of this._footer.dictionaryBatches())n&&this._readDictionaryBatch(this._dictionaryIndex++)}return super.open(e)}readRecordBatch(e){var n;if(this.closed)return null;this._footer||this.open();const r=(n=this._footer)===null||n===void 0?void 0:n.getRecordBatch(e);if(r&&this._handle.seek(r.offset)){const i=this._reader.readMessage(es.RecordBatch);if(i?.isRecordBatch()){const s=i.header(),o=this._reader.readMessageBody(i.bodyLength);return this._loadRecordBatch(s,o)}}return null}_readDictionaryBatch(e){var n;const r=(n=this._footer)===null||n===void 0?void 0:n.getDictionaryBatch(e);if(r&&this._handle.seek(r.offset)){const i=this._reader.readMessage(es.DictionaryBatch);if(i?.isDictionaryBatch()){const s=i.header(),o=this._reader.readMessageBody(i.bodyLength),a=this._loadDictionaryBatch(s,o);this.dictionaries.set(s.id,a)}}}_readFooter(){const{_handle:e}=this,n=e.size-zee,r=e.readInt32(n),i=e.readAt(n-r,r);return mk.decode(i)}_readNextMessageAndValidate(e){var n;if(this._footer||this.open(),this._footer&&this._recordBatchIndex<this.numRecordBatches){const r=(n=this._footer)===null||n===void 0?void 0:n.getRecordBatch(this._recordBatchIndex);if(r&&this._handle.seek(r.offset))return this._reader.readMessage(e)}return null}}class Zbe extends GT{get footer(){return this._footer}get numDictionaries(){return this._footer?this._footer.numDictionaries:0}get numRecordBatches(){return this._footer?this._footer.numRecordBatches:0}constructor(e,...n){const r=typeof n[0]!="number"?n.shift():void 0,i=n[0]instanceof Map?n.shift():void 0;super(e instanceof qT?e:new qT(e,r),i)}isFile(){return!0}isAsync(){return!0}open(e){const n=Object.create(null,{open:{get:()=>super.open}});return Tr(this,void 0,void 0,function*(){if(!this.closed&&!this._footer){this.schema=(this._footer=yield this._readFooter()).schema;for(const r of this._footer.dictionaryBatches())r&&(yield this._readDictionaryBatch(this._dictionaryIndex++))}return yield n.open.call(this,e)})}readRecordBatch(e){return Tr(this,void 0,void 0,function*(){var n;if(this.closed)return null;this._footer||(yield this.open());const r=(n=this._footer)===null||n===void 0?void 0:n.getRecordBatch(e);if(r&&(yield this._handle.seek(r.offset))){const i=yield this._reader.readMessage(es.RecordBatch);if(i?.isRecordBatch()){const s=i.header(),o=yield this._reader.readMessageBody(i.bodyLength);return this._loadRecordBatch(s,o)}}return null})}_readDictionaryBatch(e){return Tr(this,void 0,void 0,function*(){var n;const r=(n=this._footer)===null||n===void 0?void 0:n.getDictionaryBatch(e);if(r&&(yield this._handle.seek(r.offset))){const i=yield this._reader.readMessage(es.DictionaryBatch);if(i?.isDictionaryBatch()){const s=i.header(),o=yield this._reader.readMessageBody(i.bodyLength),a=this._loadDictionaryBatch(s,o);this.dictionaries.set(s.id,a)}}})}_readFooter(){return Tr(this,void 0,void 0,function*(){const{_handle:e}=this;e._pending&&(yield e._pending);const n=e.size-zee,r=yield e.readInt32(n),i=yield e.readAt(n-r,r);return mk.decode(i)})}_readNextMessageAndValidate(e){return Tr(this,void 0,void 0,function*(){if(this._footer||(yield this.open()),this._footer&&this._recordBatchIndex<this.numRecordBatches){const n=this._footer.getRecordBatch(this._recordBatchIndex);if(n&&(yield this._handle.seek(n.offset)))return yield this._reader.readMessage(e)}return null})}}class Xbe extends WT{constructor(e,n){super(e,n)}_loadVectors(e,n,r){return new obe(n,e.nodes,e.buffers,this.dictionaries,this.schema.metadataVersion).visitMany(r)}}function Vee(t,e){return e&&typeof e.autoDestroy=="boolean"?e.autoDestroy:t.autoDestroy}function*Kj(t){const e=df.from(t);try{if(!e.open({autoDestroy:!1}).closed)do yield e;while(!e.reset().open().closed)}finally{e.cancel()}}function Jj(t){return jp(this,arguments,function*(){const n=yield Jr(df.from(t));try{if(!(yield Jr(n.open({autoDestroy:!1}))).closed)do yield yield Jr(n);while(!(yield Jr(n.reset().open())).closed)}finally{yield Jr(n.cancel())}})}function Wbe(t){return new ZT(new Xbe(t))}function Gbe(t){const e=t.peek(PC+7&-8);return e&&e.byteLength>=4?gB(e)?new Qee(new Uee(t.read())):new ZT(new WT(t)):new ZT(new WT((function*(){})()))}function Ybe(t){return Tr(this,void 0,void 0,function*(){const e=yield t.peek(PC+7&-8);return e&&e.byteLength>=4?gB(e)?new Qee(new Uee(yield t.read())):new XT(new GT(t)):new XT(new GT((function(){return jp(this,arguments,function*(){})})()))})}function Hbe(t){return Tr(this,void 0,void 0,function*(){const{size:e}=yield t.stat(),n=new qT(t,e);return e>=Vbe&&gB(yield n.readAt(0,PC+7&-8))?new qbe(new Zbe(n)):new XT(new GT(n))})}class No extends ci{static assemble(...e){const n=i=>i.flatMap(s=>Array.isArray(s)?n(s):s instanceof cc?s.data.children:s.data),r=new No;return r.visitMany(n(e)),r}constructor(){super(),this._byteLength=0,this._nodes=[],this._buffers=[],this._bufferRegions=[]}visit(e){if(e instanceof bs)return this.visitMany(e.data),this;const{type:n}=e;if(!Xn.isDictionary(n)){const{length:r}=e;if(r>2147483647)throw new RangeError("Cannot write arrays larger than 2^31 - 1 in length");if(Xn.isUnion(n))this.nodes.push(new u1(r,0));else{const{nullCount:i}=e;Xn.isNull(n)||Sd.call(this,i<=0?new Uint8Array(0):NT(e.offset,r,e.nullBitmap)),this.nodes.push(new u1(r,i))}}return super.visit(e)}visitNull(e){return this}visitDictionary(e){return this.visit(e.clone(e.type.indices))}get nodes(){return this._nodes}get buffers(){return this._buffers}get byteLength(){return this._byteLength}get bufferRegions(){return this._bufferRegions}}function Sd(t){const e=t.byteLength+7&-8;return this.buffers.push(t),this.bufferRegions.push(new Up(this._byteLength,e)),this._byteLength+=e,this}function Kbe(t){var e;const{type:n,length:r,typeIds:i,valueOffsets:s}=t;if(Sd.call(this,i),n.mode===ou.Sparse)return uF.call(this,t);if(n.mode===ou.Dense){if(t.offset<=0)return Sd.call(this,s),uF.call(this,t);{const o=new Int32Array(r),a=Object.create(null),l=Object.create(null);for(let h,f,p=-1;++p<r;)(h=i[p])!==void 0&&((f=a[h])===void 0&&(f=a[h]=s[p]),o[p]=s[p]-f,l[h]=((e=l[h])!==null&&e!==void 0?e:0)+1);Sd.call(this,o),this.visitMany(t.children.map((h,f)=>{const p=n.typeIds[f],g=a[p],b=l[p];return h.slice(g,Math.min(r,b))}))}}return this}function Jbe(t){let e;return t.nullCount>=t.length?Sd.call(this,new Uint8Array(0)):(e=t.values)instanceof Uint8Array?Sd.call(this,NT(t.offset,t.length,e)):Sd.call(this,zT(t.values))}function v0(t){return Sd.call(this,t.values.subarray(0,t.length*t.stride))}function fD(t){const{length:e,values:n,valueOffsets:r}=t,i=Hs(r[0]),s=Hs(r[e]),o=Math.min(s-i,n.byteLength-i);return Sd.call(this,YK(-i,e+1,r)),Sd.call(this,n.subarray(i,i+o)),this}function yB(t){const{length:e,valueOffsets:n}=t;if(n){const{[0]:r,[e]:i}=n;return Sd.call(this,YK(-r,e+1,n)),this.visit(t.children[0].slice(r,i-r))}return this.visit(t.children[0])}function uF(t){return this.visitMany(t.type.children.map((e,n)=>t.children[n]).filter(Boolean))[0]}No.prototype.visitBool=Jbe;No.prototype.visitInt=v0;No.prototype.visitFloat=v0;No.prototype.visitUtf8=fD;No.prototype.visitLargeUtf8=fD;No.prototype.visitBinary=fD;No.prototype.visitLargeBinary=fD;No.prototype.visitFixedSizeBinary=v0;No.prototype.visitDate=v0;No.prototype.visitTimestamp=v0;No.prototype.visitTime=v0;No.prototype.visitDecimal=v0;No.prototype.visitList=yB;No.prototype.visitStruct=uF;No.prototype.visitUnion=Kbe;No.prototype.visitInterval=v0;No.prototype.visitDuration=v0;No.prototype.visitFixedSizeList=yB;No.prototype.visitMap=yB;class qee extends lB{static throughNode(e){throw new Error('"throughNode" not available in this environment')}static throughDOM(e,n){throw new Error('"throughDOM" not available in this environment')}constructor(e){super(),this._position=0,this._started=!1,this._sink=new h5,this._schema=null,this._dictionaryBlocks=[],this._recordBatchBlocks=[],this._seenDictionaries=new Map,this._dictionaryDeltaOffsets=new Map,Cc(e)||(e={autoDestroy:!0,writeLegacyIpcFormat:!1}),this._autoDestroy=typeof e.autoDestroy=="boolean"?e.autoDestroy:!0,this._writeLegacyIpcFormat=typeof e.writeLegacyIpcFormat=="boolean"?e.writeLegacyIpcFormat:!1}toString(e=!1){return this._sink.toString(e)}toUint8Array(e=!1){return this._sink.toUint8Array(e)}writeAll(e){return Lb(e)?e.then(n=>this.writeAll(n)):G2(e)?xB(this,e):_B(this,e)}get closed(){return this._sink.closed}[Symbol.asyncIterator](){return this._sink[Symbol.asyncIterator]()}toDOMStream(e){return this._sink.toDOMStream(e)}toNodeStream(e){return this._sink.toNodeStream(e)}close(){return this.reset()._sink.close()}abort(e){return this.reset()._sink.abort(e)}finish(){return this._autoDestroy?this.close():this.reset(this._sink,this._schema),this}reset(e=this._sink,n=null){return e===this._sink||e instanceof h5?this._sink=e:(this._sink=new h5,e&&P1e(e)?this.toDOMStream({type:"bytes"}).pipeTo(e):e&&D1e(e)&&this.toNodeStream({objectMode:!1}).pipe(e)),this._started&&this._schema&&this._writeFooter(this._schema),this._started=!1,this._dictionaryBlocks=[],this._recordBatchBlocks=[],this._seenDictionaries=new Map,this._dictionaryDeltaOffsets=new Map,(!n||!aF(n,this._schema))&&(n==null?(this._position=0,this._schema=null):(this._started=!0,this._schema=n,this._writeSchema(n))),this}write(e){let n=null;if(this._sink){if(e==null)return this.finish()&&void 0;if(e instanceof l1&&!(n=e.schema))return this.finish()&&void 0;if(e instanceof cc&&!(n=e.schema))return this.finish()&&void 0}else throw new Error("RecordBatchWriter is closed");if(n&&!aF(n,this._schema)){if(this._started&&this._autoDestroy)return this.close();this.reset(this._sink,n)}e instanceof cc?e instanceof dB||this._writeRecordBatch(e):e instanceof l1?this.writeAll(e.batches):CC(e)&&this.writeAll(e)}_writeMessage(e,n=8){const r=n-1,i=Du.encode(e),s=i.byteLength,o=this._writeLegacyIpcFormat?4:8,a=s+o+r&~r,l=a-s-o;return e.headerType===es.RecordBatch?this._recordBatchBlocks.push(new o1(a,e.bodyLength,this._position)):e.headerType===es.DictionaryBatch&&this._dictionaryBlocks.push(new o1(a,e.bodyLength,this._position)),this._writeLegacyIpcFormat||this._write(Int32Array.of(-1)),this._write(Int32Array.of(a-o)),s>0&&this._write(i),this._writePadding(l)}_write(e){if(this._started){const n=Di(e);n&&n.byteLength>0&&(this._sink.write(n),this._position+=n.byteLength)}return this}_writeSchema(e){return this._writeMessage(Du.from(e))}_writeFooter(e){return this._writeLegacyIpcFormat?this._write(Int32Array.of(0)):this._write(Int32Array.of(-1,0))}_writeMagic(){return this._write(gk)}_writePadding(e){return e>0?this._write(new Uint8Array(e)):this}_writeRecordBatch(e){const{byteLength:n,nodes:r,bufferRegions:i,buffers:s}=No.assemble(e),o=new wh(e.numRows,r,i),a=Du.from(o,n);return this._writeDictionaries(e)._writeMessage(a)._writeBodyBuffers(s)}_writeDictionaryBatch(e,n,r=!1){const{byteLength:i,nodes:s,bufferRegions:o,buffers:a}=No.assemble(new bs([e])),l=new wh(e.length,s,o),h=new hm(l,n,r),f=Du.from(h,i);return this._writeMessage(f)._writeBodyBuffers(a)}_writeBodyBuffers(e){let n,r,i;for(let s=-1,o=e.length;++s<o;)(n=e[s])&&(r=n.byteLength)>0&&(this._write(n),(i=(r+7&-8)-r)>0&&this._writePadding(i));return this}_writeDictionaries(e){var n,r;for(const[i,s]of e.dictionaries){const o=(n=s?.data)!==null&&n!==void 0?n:[],a=this._seenDictionaries.get(i),l=(r=this._dictionaryDeltaOffsets.get(i))!==null&&r!==void 0?r:0;if(!a||a.data[0]!==o[0])for(const[h,f]of o.entries())this._writeDictionaryBatch(f,i,h>0);else if(l<o.length)for(const h of o.slice(l))this._writeDictionaryBatch(h,i,!0);this._seenDictionaries.set(i,s),this._dictionaryDeltaOffsets.set(i,o.length)}return this}}class vB extends qee{static writeAll(e,n){const r=new vB(n);return Lb(e)?e.then(i=>r.writeAll(i)):G2(e)?xB(r,e):_B(r,e)}}class bB extends qee{static writeAll(e){const n=new bB;return Lb(e)?e.then(r=>n.writeAll(r)):G2(e)?xB(n,e):_B(n,e)}constructor(){super(),this._autoDestroy=!0}_writeSchema(e){return this._writeMagic()._writePadding(2)}_writeDictionaryBatch(e,n,r=!1){if(!r&&this._seenDictionaries.has(n))throw new Error("The Arrow File format does not support replacement dictionaries. ");return super._writeDictionaryBatch(e,n,r)}_writeFooter(e){const n=mk.encode(new mk(e,sa.V5,this._recordBatchBlocks,this._dictionaryBlocks));return super._writeFooter(e)._write(n)._write(Int32Array.of(n.byteLength))._writeMagic()}}function _B(t,e){let n=e;e instanceof l1&&(n=e.batches,t.reset(void 0,e.schema));for(const r of n)t.write(r);return t.finish()}function xB(t,e){return Tr(this,void 0,void 0,function*(){var n,r,i,s,o,a,l;try{for(n=!0,r=vb(e);i=yield r.next(),s=i.done,!s;n=!0){l=i.value,n=!1;const h=l;t.write(h)}}catch(h){o={error:h}}finally{try{!n&&!s&&(a=r.return)&&(yield a.call(r))}finally{if(o)throw o.error}}return t.finish()})}function e_e(t,e="stream"){return(e==="stream"?vB:bB).writeAll(t).toUint8Array(!0)}var t_e=Object.create,Zee=Object.defineProperty,n_e=Object.getOwnPropertyDescriptor,r_e=Object.getOwnPropertyNames,i_e=Object.getPrototypeOf,s_e=Object.prototype.hasOwnProperty,o_e=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),a_e=(t,e,n,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of r_e(e))!s_e.call(t,i)&&i!==n&&Zee(t,i,{get:()=>e[i],enumerable:!(r=n_e(e,i))||r.enumerable});return t},l_e=(t,e,n)=>(n=t!=null?t_e(i_e(t)):{},a_e(!t||!t.__esModule?Zee(n,"default",{value:t,enumerable:!0}):n,t)),u_e=o_e((t,e)=>{e.exports=Worker}),c_e=(t=>(t[t.UNDEFINED=0]="UNDEFINED",t[t.AUTOMATIC=1]="AUTOMATIC",t[t.READ_ONLY=2]="READ_ONLY",t[t.READ_WRITE=3]="READ_WRITE",t))(c_e||{}),h_e=(t=>(t[t.IDENTIFIER=0]="IDENTIFIER",t[t.NUMERIC_CONSTANT=1]="NUMERIC_CONSTANT",t[t.STRING_CONSTANT=2]="STRING_CONSTANT",t[t.OPERATOR=3]="OPERATOR",t[t.KEYWORD=4]="KEYWORD",t[t.COMMENT=5]="COMMENT",t))(h_e||{}),f_e=(t=>(t[t.NONE=0]="NONE",t[t.DEBUG=1]="DEBUG",t[t.INFO=2]="INFO",t[t.WARNING=3]="WARNING",t[t.ERROR=4]="ERROR",t))(f_e||{}),d_e=(t=>(t[t.NONE=0]="NONE",t[t.CONNECT=1]="CONNECT",t[t.DISCONNECT=2]="DISCONNECT",t[t.OPEN=3]="OPEN",t[t.QUERY=4]="QUERY",t[t.INSTANTIATE=5]="INSTANTIATE",t))(d_e||{}),p_e=(t=>(t[t.NONE=0]="NONE",t[t.OK=1]="OK",t[t.ERROR=2]="ERROR",t[t.START=3]="START",t[t.RUN=4]="RUN",t[t.CAPTURE=5]="CAPTURE",t))(p_e||{}),m_e=(t=>(t[t.NONE=0]="NONE",t[t.WEB_WORKER=1]="WEB_WORKER",t[t.NODE_WORKER=2]="NODE_WORKER",t[t.BINDINGS=3]="BINDINGS",t[t.ASYNC_DUCKDB=4]="ASYNC_DUCKDB",t))(m_e||{}),Xee=class{log(e){}},Wee=class{constructor(e=2){this.level=e}log(e){e.level>=this.level&&console.log(e)}},g_e=(t=>(t[t.SUCCESS=0]="SUCCESS",t[t.MAX_ARROW_ERROR=255]="MAX_ARROW_ERROR",t[t.DUCKDB_WASM_RETRY=256]="DUCKDB_WASM_RETRY",t))(g_e||{}),y_e=class{constructor(e,n){this._bindings=e,this._conn=n}get bindings(){return this._bindings}async close(){return this._bindings.disconnect(this._conn)}useUnsafe(e){return e(this._bindings,this._conn)}async query(e){this._bindings.logger.log({timestamp:new Date,level:2,origin:4,topic:4,event:4,value:e});let n=await this._bindings.runQuery(this._conn,e),r=df.from(n);return console.assert(r.isSync(),"Reader is not sync"),console.assert(r.isFile(),"Reader is not file"),new l1(r)}async send(e,n=!1){this._bindings.logger.log({timestamp:new Date,level:2,origin:4,topic:4,event:4,value:e});let r=await this._bindings.startPendingQuery(this._conn,e,n);for(;r==null;)r=await this._bindings.pollPendingQuery(this._conn);let i=new Gee(this._bindings,this._conn,r),s=await df.from(i);return console.assert(s.isAsync()),console.assert(s.isStream()),s}async cancelSent(){return await this._bindings.cancelPendingQuery(this._conn)}async getTableNames(e){return await this._bindings.getTableNames(this._conn,e)}async prepare(e){let n=await this._bindings.createPrepared(this._conn,e);return new v_e(this._bindings,this._conn,n)}async insertArrowTable(e,n){let r=e_e(e,"stream");await this.insertArrowFromIPCStream(r,n)}async insertArrowFromIPCStream(e,n){await this._bindings.insertArrowFromIPCStream(this._conn,e,n)}async insertCSVFromPath(e,n){await this._bindings.insertCSVFromPath(this._conn,e,n)}async insertJSONFromPath(e,n){await this._bindings.insertJSONFromPath(this._conn,e,n)}},Gee=class{constructor(e,n,r){this.db=e,this.conn=n,this.header=r,this._first=!0,this._depleted=!1,this._inFlight=null}async next(){if(this._first)return this._first=!1,{done:!1,value:this.header};if(this._depleted)return{done:!0,value:null};let e=null;for(this._inFlight!=null&&(e=await this._inFlight,this._inFlight=null);e==null;)e=await this.db.fetchQueryResults(this.conn);return this._depleted=e.length==0,this._depleted||(this._inFlight=this.db.fetchQueryResults(this.conn)),{done:this._depleted,value:e}}[Symbol.asyncIterator](){return this}},v_e=class{constructor(e,n,r){this.bindings=e,this.connectionId=n,this.statementId=r}async close(){await this.bindings.closePrepared(this.connectionId,this.statementId)}async query(...e){let n=await this.bindings.runPrepared(this.connectionId,this.statementId,e),r=df.from(n);return console.assert(r.isSync()),console.assert(r.isFile()),new l1(r)}async send(...e){let n=await this.bindings.sendPrepared(this.connectionId,this.statementId,e),r=new Gee(this.bindings,this.connectionId,n),i=await df.from(r);return console.assert(i.isAsync()),console.assert(i.isStream()),i}},b_e=(t=>(t.CANCEL_PENDING_QUERY="CANCEL_PENDING_QUERY",t.CLOSE_PREPARED="CLOSE_PREPARED",t.COLLECT_FILE_STATISTICS="COLLECT_FILE_STATISTICS",t.REGISTER_OPFS_FILE_NAME="REGISTER_OPFS_FILE_NAME",t.CONNECT="CONNECT",t.COPY_FILE_TO_BUFFER="COPY_FILE_TO_BUFFER",t.COPY_FILE_TO_PATH="COPY_FILE_TO_PATH",t.CREATE_PREPARED="CREATE_PREPARED",t.DISCONNECT="DISCONNECT",t.DROP_FILE="DROP_FILE",t.DROP_FILES="DROP_FILES",t.EXPORT_FILE_STATISTICS="EXPORT_FILE_STATISTICS",t.FETCH_QUERY_RESULTS="FETCH_QUERY_RESULTS",t.FLUSH_FILES="FLUSH_FILES",t.GET_FEATURE_FLAGS="GET_FEATURE_FLAGS",t.GET_TABLE_NAMES="GET_TABLE_NAMES",t.GET_VERSION="GET_VERSION",t.GLOB_FILE_INFOS="GLOB_FILE_INFOS",t.INSERT_ARROW_FROM_IPC_STREAM="INSERT_ARROW_FROM_IPC_STREAM",t.INSERT_CSV_FROM_PATH="IMPORT_CSV_FROM_PATH",t.INSERT_JSON_FROM_PATH="IMPORT_JSON_FROM_PATH",t.INSTANTIATE="INSTANTIATE",t.OPEN="OPEN",t.PING="PING",t.POLL_PENDING_QUERY="POLL_PENDING_QUERY",t.REGISTER_FILE_BUFFER="REGISTER_FILE_BUFFER",t.REGISTER_FILE_HANDLE="REGISTER_FILE_HANDLE",t.REGISTER_FILE_URL="REGISTER_FILE_URL",t.RESET="RESET",t.RUN_PREPARED="RUN_PREPARED",t.RUN_QUERY="RUN_QUERY",t.SEND_PREPARED="SEND_PREPARED",t.START_PENDING_QUERY="START_PENDING_QUERY",t.TOKENIZE="TOKENIZE",t))(b_e||{}),__e=(t=>(t.CONNECTION_INFO="CONNECTION_INFO",t.ERROR="ERROR",t.FEATURE_FLAGS="FEATURE_FLAGS",t.FILE_BUFFER="FILE_BUFFER",t.FILE_INFOS="FILE_INFOS",t.FILE_SIZE="FILE_SIZE",t.FILE_STATISTICS="FILE_STATISTICS",t.INSTANTIATE_PROGRESS="INSTANTIATE_PROGRESS",t.LOG="LOG",t.PROGRESS_UPDATE="PROGRESS_UPDATE",t.OK="OK",t.PREPARED_STATEMENT_ID="PREPARED_STATEMENT_ID",t.QUERY_PLAN="QUERY_PLAN",t.QUERY_RESULT="QUERY_RESULT",t.QUERY_RESULT_CHUNK="QUERY_RESULT_CHUNK",t.QUERY_RESULT_HEADER="QUERY_RESULT_HEADER",t.QUERY_RESULT_HEADER_OR_NULL="QUERY_RESULT_HEADER_OR_NULL",t.REGISTERED_FILE="REGISTERED_FILE",t.SCRIPT_TOKENS="SCRIPT_TOKENS",t.SUCCESS="SUCCESS",t.TABLE_NAMES="TABLE_NAMES",t.VERSION_STRING="VERSION_STRING",t))(__e||{}),Bi=class{constructor(e,n){this.promiseResolver=()=>{},this.promiseRejecter=()=>{},this.type=e,this.data=n,this.promise=new Promise((r,i)=>{this.promiseResolver=r,this.promiseRejecter=i})}};function p5(t){switch(t.typeId){case Qe.Binary:return{sqlType:"binary"};case Qe.Bool:return{sqlType:"bool"};case Qe.Date:return{sqlType:"date"};case Qe.DateDay:return{sqlType:"date32[d]"};case Qe.DateMillisecond:return{sqlType:"date64[ms]"};case Qe.Decimal:{let e=t;return{sqlType:"decimal",precision:e.precision,scale:e.scale}}case Qe.Float:return{sqlType:"float"};case Qe.Float16:return{sqlType:"float16"};case Qe.Float32:return{sqlType:"float32"};case Qe.Float64:return{sqlType:"float64"};case Qe.Int:return{sqlType:"int32"};case Qe.Int16:return{sqlType:"int16"};case Qe.Int32:return{sqlType:"int32"};case Qe.Int64:return{sqlType:"int64"};case Qe.Uint16:return{sqlType:"uint16"};case Qe.Uint32:return{sqlType:"uint32"};case Qe.Uint64:return{sqlType:"uint64"};case Qe.Uint8:return{sqlType:"uint8"};case Qe.IntervalDayTime:return{sqlType:"interval[dt]"};case Qe.IntervalYearMonth:return{sqlType:"interval[m]"};case Qe.List:return{sqlType:"list",valueType:p5(t.valueType)};case Qe.FixedSizeBinary:return{sqlType:"fixedsizebinary",byteWidth:t.byteWidth};case Qe.Null:return{sqlType:"null"};case Qe.Utf8:return{sqlType:"utf8"};case Qe.Struct:return{sqlType:"struct",fields:t.children.map(e=>cF(e.name,e.type))};case Qe.Map:{let e=t;return{sqlType:"map",keyType:p5(e.keyType),valueType:p5(e.valueType)}}case Qe.Time:return{sqlType:"time[s]"};case Qe.TimeMicrosecond:return{sqlType:"time[us]"};case Qe.TimeMillisecond:return{sqlType:"time[ms]"};case Qe.TimeNanosecond:return{sqlType:"time[ns]"};case Qe.TimeSecond:return{sqlType:"time[s]"};case Qe.Timestamp:return{sqlType:"timestamp",timezone:t.timezone||void 0};case Qe.TimestampSecond:return{sqlType:"timestamp[s]",timezone:t.timezone||void 0};case Qe.TimestampMicrosecond:return{sqlType:"timestamp[us]",timezone:t.timezone||void 0};case Qe.TimestampNanosecond:return{sqlType:"timestamp[ns]",timezone:t.timezone||void 0};case Qe.TimestampMillisecond:return{sqlType:"timestamp[ms]",timezone:t.timezone||void 0}}throw new Error("unsupported arrow type: ".concat(t.toString()))}function cF(t,e){let n=p5(e);return n.name=t,n}var x_e=new TextEncoder,Yee=class{constructor(e,n=null){this._onInstantiationProgress=[],this._onExecutionProgress=[],this._worker=null,this._workerShutdownPromise=null,this._workerShutdownResolver=()=>{},this._nextMessageId=0,this._pendingRequests=new Map,this._logger=e,this._onMessageHandler=this.onMessage.bind(this),this._onErrorHandler=this.onError.bind(this),this._onCloseHandler=this.onClose.bind(this),n!=null&&this.attach(n)}get logger(){return this._logger}attach(e){this._worker=e,this._worker.addEventListener("message",this._onMessageHandler),this._worker.addEventListener("error",this._onErrorHandler),this._worker.addEventListener("close",this._onCloseHandler),this._workerShutdownPromise=new Promise((n,r)=>{this._workerShutdownResolver=n})}detach(){this._worker&&(this._worker.removeEventListener("message",this._onMessageHandler),this._worker.removeEventListener("error",this._onErrorHandler),this._worker.removeEventListener("close",this._onCloseHandler),this._worker=null,this._workerShutdownResolver(null),this._workerShutdownPromise=null,this._workerShutdownResolver=()=>{})}async terminate(){this._worker&&(this._worker.terminate(),this._worker=null,this._workerShutdownPromise=null,this._workerShutdownResolver=()=>{})}async postTask(e,n=[]){if(!this._worker){console.error("cannot send a message since the worker is not set!");return}let r=this._nextMessageId++;return this._pendingRequests.set(r,e),this._worker.postMessage({messageId:r,type:e.type,data:e.data},n),await e.promise}onMessage(e){var n;let r=e.data;switch(r.type){case"PROGRESS_UPDATE":{for(let s of this._onExecutionProgress)s(r.data);return}case"LOG":{this._logger.log(r.data);return}case"INSTANTIATE_PROGRESS":{for(let s of this._onInstantiationProgress)s(r.data);return}}let i=this._pendingRequests.get(r.requestId);if(!i){console.warn("unassociated response: [".concat(r.requestId,", ").concat(r.type.toString(),"]"));return}if(this._pendingRequests.delete(r.requestId),r.type=="ERROR"){let s=new Error(r.data.message);s.name=r.data.name,(n=Object.getOwnPropertyDescriptor(s,"stack"))!=null&&n.writable&&(s.stack=r.data.stack),i.promiseRejecter(s);return}switch(i.type){case"CLOSE_PREPARED":case"COLLECT_FILE_STATISTICS":case"REGISTER_OPFS_FILE_NAME":case"COPY_FILE_TO_PATH":case"DISCONNECT":case"DROP_FILE":case"DROP_FILES":case"FLUSH_FILES":case"INSERT_ARROW_FROM_IPC_STREAM":case"IMPORT_CSV_FROM_PATH":case"IMPORT_JSON_FROM_PATH":case"OPEN":case"PING":case"REGISTER_FILE_BUFFER":case"REGISTER_FILE_HANDLE":case"REGISTER_FILE_URL":case"RESET":if(r.type=="OK"){i.promiseResolver(r.data);return}break;case"INSTANTIATE":if(this._onInstantiationProgress=[],r.type=="OK"){i.promiseResolver(r.data);return}break;case"GLOB_FILE_INFOS":if(r.type=="FILE_INFOS"){i.promiseResolver(r.data);return}break;case"GET_VERSION":if(r.type=="VERSION_STRING"){i.promiseResolver(r.data);return}break;case"GET_FEATURE_FLAGS":if(r.type=="FEATURE_FLAGS"){i.promiseResolver(r.data);return}break;case"GET_TABLE_NAMES":if(r.type=="TABLE_NAMES"){i.promiseResolver(r.data);return}break;case"TOKENIZE":if(r.type=="SCRIPT_TOKENS"){i.promiseResolver(r.data);return}break;case"COPY_FILE_TO_BUFFER":if(r.type=="FILE_BUFFER"){i.promiseResolver(r.data);return}break;case"EXPORT_FILE_STATISTICS":if(r.type=="FILE_STATISTICS"){i.promiseResolver(r.data);return}break;case"CONNECT":if(r.type=="CONNECTION_INFO"){i.promiseResolver(r.data);return}break;case"RUN_PREPARED":case"RUN_QUERY":if(r.type=="QUERY_RESULT"){i.promiseResolver(r.data);return}break;case"SEND_PREPARED":if(r.type=="QUERY_RESULT_HEADER"){i.promiseResolver(r.data);return}break;case"START_PENDING_QUERY":if(r.type=="QUERY_RESULT_HEADER_OR_NULL"){i.promiseResolver(r.data);return}break;case"POLL_PENDING_QUERY":if(r.type=="QUERY_RESULT_HEADER_OR_NULL"){i.promiseResolver(r.data);return}break;case"CANCEL_PENDING_QUERY":if(this._onInstantiationProgress=[],r.type=="SUCCESS"){i.promiseResolver(r.data);return}break;case"FETCH_QUERY_RESULTS":if(r.type=="QUERY_RESULT_CHUNK"){i.promiseResolver(r.data);return}break;case"CREATE_PREPARED":if(r.type=="PREPARED_STATEMENT_ID"){i.promiseResolver(r.data);return}break}i.promiseRejecter(new Error("unexpected response type: ".concat(r.type.toString())))}onError(e){console.error(e),console.error("error in duckdb worker: ".concat(e.message)),this._pendingRequests.clear()}onClose(){if(this._workerShutdownResolver(null),this._pendingRequests.size!=0){console.warn("worker terminated with ".concat(this._pendingRequests.size," pending requests"));return}this._pendingRequests.clear()}async reset(){let e=new Bi("RESET",null);return await this.postTask(e)}async ping(){let e=new Bi("PING",null);await this.postTask(e)}async dropFile(e){let n=new Bi("DROP_FILE",e);return await this.postTask(n)}async dropFiles(){let e=new Bi("DROP_FILES",null);return await this.postTask(e)}async flushFiles(){let e=new Bi("FLUSH_FILES",null);return await this.postTask(e)}async instantiate(e,n=null,r=i=>{}){this._onInstantiationProgress.push(r);let i=new Bi("INSTANTIATE",[e,n]);return await this.postTask(i)}async getVersion(){let e=new Bi("GET_VERSION",null);return await this.postTask(e)}async getFeatureFlags(){let e=new Bi("GET_FEATURE_FLAGS",null);return await this.postTask(e)}async open(e){let n=new Bi("OPEN",e);await this.postTask(n)}async tokenize(e){let n=new Bi("TOKENIZE",e);return await this.postTask(n)}async connectInternal(){let e=new Bi("CONNECT",null);return await this.postTask(e)}async connect(){let e=await this.connectInternal();return new y_e(this,e)}async disconnect(e){let n=new Bi("DISCONNECT",e);await this.postTask(n)}async runQuery(e,n){let r=new Bi("RUN_QUERY",[e,n]);return await this.postTask(r)}async startPendingQuery(e,n,r=!1){let i=new Bi("START_PENDING_QUERY",[e,n,r]);return await this.postTask(i)}async pollPendingQuery(e){let n=new Bi("POLL_PENDING_QUERY",e);return await this.postTask(n)}async cancelPendingQuery(e){let n=new Bi("CANCEL_PENDING_QUERY",e);return await this.postTask(n)}async fetchQueryResults(e){let n=new Bi("FETCH_QUERY_RESULTS",e);return await this.postTask(n)}async getTableNames(e,n){let r=new Bi("GET_TABLE_NAMES",[e,n]);return await this.postTask(r)}async createPrepared(e,n){let r=new Bi("CREATE_PREPARED",[e,n]);return await this.postTask(r)}async closePrepared(e,n){let r=new Bi("CLOSE_PREPARED",[e,n]);await this.postTask(r)}async runPrepared(e,n,r){let i=new Bi("RUN_PREPARED",[e,n,r]);return await this.postTask(i)}async sendPrepared(e,n,r){let i=new Bi("SEND_PREPARED",[e,n,r]);return await this.postTask(i)}async globFiles(e){let n=new Bi("GLOB_FILE_INFOS",e);return await this.postTask(n)}async registerFileText(e,n){let r=x_e.encode(n);await this.registerFileBuffer(e,r)}async registerFileURL(e,n,r,i){n===void 0&&(n=e);let s=new Bi("REGISTER_FILE_URL",[e,n,r,i]);await this.postTask(s)}async registerEmptyFileBuffer(e){}async registerFileBuffer(e,n){let r=new Bi("REGISTER_FILE_BUFFER",[e,n]);await this.postTask(r,[n.buffer])}async registerFileHandle(e,n,r,i){let s=new Bi("REGISTER_FILE_HANDLE",[e,n,r,i]);await this.postTask(s,[])}async registerOPFSFileName(e){let n=new Bi("REGISTER_OPFS_FILE_NAME",[e]);await this.postTask(n,[])}async collectFileStatistics(e,n){let r=new Bi("COLLECT_FILE_STATISTICS",[e,n]);await this.postTask(r,[])}async exportFileStatistics(e){let n=new Bi("EXPORT_FILE_STATISTICS",e);return await this.postTask(n,[])}async copyFileToBuffer(e){let n=new Bi("COPY_FILE_TO_BUFFER",e);return await this.postTask(n)}async copyFileToPath(e,n){let r=new Bi("COPY_FILE_TO_PATH",[e,n]);await this.postTask(r)}async insertArrowFromIPCStream(e,n,r){if(n.length==0)return;let i=new Bi("INSERT_ARROW_FROM_IPC_STREAM",[e,n,r]);await this.postTask(i,[n.buffer])}async insertCSVFromPath(e,n,r){if(r.columns!==void 0){let s=[];for(let o in r.columns){let a=r.columns[o];s.push(cF(o,a))}r.columnsFlat=s,delete r.columns}let i=new Bi("IMPORT_CSV_FROM_PATH",[e,n,r]);await this.postTask(i)}async insertJSONFromPath(e,n,r){if(r.columns!==void 0){let s=[];for(let o in r.columns){let a=r.columns[o];s.push(cF(o,a))}r.columnsFlat=s,delete r.columns}let i=new Bi("IMPORT_JSON_FROM_PATH",[e,n,r]);await this.postTask(i)}};function w_e(){let t=new TextDecoder;return e=>(typeof SharedArrayBuffer<"u"&&e.buffer instanceof SharedArrayBuffer&&(e=new Uint8Array(e)),t.decode(e))}w_e();var O_e=(t=>(t[t.BUFFER=0]="BUFFER",t[t.NODE_FS=1]="NODE_FS",t[t.BROWSER_FILEREADER=2]="BROWSER_FILEREADER",t[t.BROWSER_FSACCESS=3]="BROWSER_FSACCESS",t[t.HTTP=4]="HTTP",t[t.S3=5]="S3",t))(O_e||{}),S_e=async()=>WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,5,3,1,0,1,10,14,1,12,0,65,0,65,0,65,0,252,10,0,0,11])),k_e=async()=>WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,8,1,6,0,6,64,25,11,11])),C_e=async()=>WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,5,1,96,0,1,123,3,2,1,0,10,10,1,8,0,65,0,253,15,253,98,11])),A_e=()=>(async t=>{try{return typeof MessageChannel<"u"&&new MessageChannel().port1.postMessage(new SharedArrayBuffer(1)),WebAssembly.validate(t)}catch{return!1}})(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,5,4,1,3,1,1,10,11,1,9,0,65,0,254,16,2,0,26,11])),wB={name:"@duckdb/duckdb-wasm",version:"1.30.0"},E_e=wB.name,T_e=wB.version,OB=wB.version.split(".");OB[0];OB[1];OB[2];var P_e=()=>typeof navigator>"u";function D_e(){let t="https://cdn.jsdelivr.net/npm/".concat(E_e,"@").concat(T_e,"/dist/");return{mvp:{mainModule:"".concat(t,"duckdb-mvp.wasm"),mainWorker:"".concat(t,"duckdb-browser-mvp.worker.js")},eh:{mainModule:"".concat(t,"duckdb-eh.wasm"),mainWorker:"".concat(t,"duckdb-browser-eh.worker.js")}}}var cM=null,hM=null,fM=null,dM=null,pM=null;async function I_e(){return cM==null&&(cM=typeof BigInt64Array<"u"),hM==null&&(hM=await k_e()),fM==null&&(fM=await A_e()),dM==null&&(dM=await C_e()),pM==null&&(pM=await S_e()),{bigInt64Array:cM,crossOriginIsolated:P_e()||globalThis.crossOriginIsolated||!1,wasmExceptions:hM,wasmSIMD:dM,wasmThreads:fM,wasmBulkMemory:pM}}async function Hee(t){let e=await I_e();if(e.wasmExceptions){if(e.wasmSIMD&&e.wasmThreads&&e.crossOriginIsolated&&t.coi)return{mainModule:t.coi.mainModule,mainWorker:t.coi.mainWorker,pthreadWorker:t.coi.pthreadWorker};if(t.eh)return{mainModule:t.eh.mainModule,mainWorker:t.eh.mainWorker,pthreadWorker:null}}return{mainModule:t.mvp.mainModule,mainWorker:t.mvp.mainWorker,pthreadWorker:null}}l_e(u_e());function M_e(t={}){return new R_e(t)}class R_e{_ipc;_options;_db;_con;_config;_loadPromise;constructor(e={}){const{ipc:n,duckdb:r,connection:i,config:s,...o}=e;this._ipc=n,this._options=o,this._db=r,this._con=i,this._config=s}async getDuckDB(){return this._db||await eU(this),this._db}async getConnection(){return this._con||await eU(this),this._con}async query(e){const{type:n,sql:r}=e,i=await this.getConnection(),s=await F_e(i,r);return n==="exec"?void 0:n==="arrow"?dT(s,this._ipc):dT(s).toArray()}}function F_e(t,e){return new Promise((n,r)=>{t.useUnsafe(async(i,s)=>{try{const o=await i.runQuery(s,e);n(o)}catch(o){r(o)}})})}function eU(t){return t._loadPromise||(t._loadPromise=(t._db?Promise.resolve(t._db):L_e(t._options).then(e=>t._db=e)).then(e=>t._config!=null?e.open(t._config).then(()=>e):e).then(e=>e.connect()).then(e=>t._con=e)),t._loadPromise}async function L_e({log:t=!1}={}){const e=D_e(),n=await Hee(e),r=URL.createObjectURL(new Blob([`importScripts("${n.mainWorker}");`],{type:"text/javascript"})),i=new Worker(r),s=t?new Wee:new Xee,o=new Yee(s,i);return await o.instantiate(n.mainModule,n.pthreadWorker),URL.revokeObjectURL(r),o}function Kee(t){switch(t){case"BIGINT":case"HUGEINT":case"INTEGER":case"SMALLINT":case"TINYINT":case"UBIGINT":case"UINTEGER":case"USMALLINT":case"UTINYINT":case"DOUBLE":case"FLOAT":case"REAL":return"number";case"DATE":case"TIMESTAMP":case"TIMESTAMPTZ":case"TIMESTAMP WITH TIME ZONE":case"TIME":case"TIMESTAMP_NS":return"date";case"BOOLEAN":return"boolean";case"VARCHAR":case"UUID":case"JSON":return"string";case"ARRAY":case"LIST":return"array";case"BLOB":case"STRUCT":case"MAP":case"GEOMETRY":return"object";default:if(t.startsWith("ENUM"))return"string";if(t.startsWith("DECIMAL"))return"number";if(t.startsWith("STRUCT")||t.startsWith("MAP"))return"object";if(t.endsWith("]"))return"array";throw new Error(`Unsupported type: ${t}`)}}const $_e="count",B_e="nulls",N_e="max",z_e="min",Q_e="distinct",j_e={[$_e]:Mo,[Q_e]:t=>Mo(t).distinct(),[N_e]:OC,[z_e]:Yw,[B_e]:t=>Mo().where(Kp(t))};function U_e({table:t,column:e,stats:n}){return Vn.from(t).select(Array.from(n,r=>({[r]:j_e[r](e)})))}async function V_e(t,e){return e.length===1&&e[0].column==="*"?Z_e(t,e[0].table):(await Promise.all(e.map(n=>q_e(t,n)))).filter(n=>n!==void 0)}async function q_e(t,{table:e,column:n,stats:r}){const i=Vn.from({source:e}).select({column:n}).groupby(Cd(n)&&aD(n)?ir`ALL`:[]),[s]=Array.from(await t.query(Vn.describe(i))),o={table:e,column:`${n}`,sqlType:s.column_type,type:Kee(s.column_type),nullable:s.null==="YES"};if(!r?.length)return o;const[a]=await t.query(U_e({table:e,column:n,stats:r}),{persist:!0});return Object.assign(o,a)}async function Z_e(t,e){return Array.from(await t.query(`DESC ${xK(e)}`)).map(r=>({table:e,column:r.column_name,sqlType:r.column_type,type:Kee(r.column_type),nullable:r.null==="YES"}))}const X_e=t=>t;function Jee(t){const e=t-1;return e*e*e+1}function ete(t,{delay:e=0,duration:n=400,easing:r=X_e}={}){const i=+getComputedStyle(t).opacity;return{delay:e,duration:n,easing:r,css:s=>`opacity: ${s*i}`}}function p3(t,{delay:e=0,duration:n=400,easing:r=Jee,axis:i="y"}={}){const s=getComputedStyle(t),o=+s.opacity,a=i==="y"?"height":"width",l=parseFloat(s[a]),h=i==="y"?["top","bottom"]:["left","right"],f=h.map(I=>`${I[0].toUpperCase()}${I.slice(1)}`),p=parseFloat(s[`padding${f[0]}`]),g=parseFloat(s[`padding${f[1]}`]),b=parseFloat(s[`margin${f[0]}`]),x=parseFloat(s[`margin${f[1]}`]),k=parseFloat(s[`border${f[0]}Width`]),T=parseFloat(s[`border${f[1]}Width`]);return{delay:e,duration:n,easing:r,css:I=>`overflow: hidden;opacity: ${Math.min(I*20,1)*o};${a}: ${I*l}px;padding-${h[0]}: ${I*p}px;padding-${h[1]}: ${I*g}px;margin-${h[0]}: ${I*b}px;margin-${h[1]}: ${I*x}px;border-${h[0]}-width: ${I*k}px;border-${h[1]}-width: ${I*T}px;min-${a}: 0`}}function W_e(t,{delay:e=0,duration:n=400,easing:r=Jee,start:i=0,opacity:s=0}={}){const o=getComputedStyle(t),a=+o.opacity,l=o.transform==="none"?"":o.transform,h=1-i,f=a*(1-s);return{delay:e,duration:n,easing:r,css:(p,g)=>`
			transform: ${l} scale(${1-h*g});
			opacity: ${a-f*g}
		`}}var G_e=gt("<button> </button>");function SB(t,e){Ln(e,!0);var n=G_e();n.__click=()=>{e.disabled||e.onClick?.()};var r=je(n,!0);Be(n),on(()=>{Hi(n,1,`px-2 h-8 w-24 rounded-md text-white text-sm select-none ${e.disabled?"bg-gray-300 dark:text-gray-500 dark:bg-gray-700":"bg-blue-500"}`),n.disabled=e.disabled,Pr(r,e.label)}),Re(t,n),$n()}Js(["click"]);var Y_e=/[\u1680\u2000-\u200A\u202F\u205F\u3000]/,H_e=/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u08A0-\u08B4\u08B6-\u08BD\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312E\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FEA\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF4A\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC03-\uDC37\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDF00-\uDF19]|\uD806[\uDCA0-\uDCDF\uDCFF\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE83\uDE86-\uDE89\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50\uDF93-\uDF9F\uDFE0\uDFE1]|\uD821[\uDC00-\uDFEC]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00-\uDD1E\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]/,K_e=/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0300-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u0483-\u0487\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u05D0-\u05EA\u05F0-\u05F2\u0610-\u061A\u0620-\u0669\u066E-\u06D3\u06D5-\u06DC\u06DF-\u06E8\u06EA-\u06FC\u06FF\u0710-\u074A\u074D-\u07B1\u07C0-\u07F5\u07FA\u0800-\u082D\u0840-\u085B\u0860-\u086A\u08A0-\u08B4\u08B6-\u08BD\u08D4-\u08E1\u08E3-\u0963\u0966-\u096F\u0971-\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BC-\u09C4\u09C7\u09C8\u09CB-\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E3\u09E6-\u09F1\u09FC\u0A01-\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A59-\u0A5C\u0A5E\u0A66-\u0A75\u0A81-\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABC-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AD0\u0AE0-\u0AE3\u0AE6-\u0AEF\u0AF9-\u0AFF\u0B01-\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3C-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B5C\u0B5D\u0B5F-\u0B63\u0B66-\u0B6F\u0B71\u0B82\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD0\u0BD7\u0BE6-\u0BEF\u0C00-\u0C03\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C58-\u0C5A\u0C60-\u0C63\u0C66-\u0C6F\u0C80-\u0C83\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBC-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CDE\u0CE0-\u0CE3\u0CE6-\u0CEF\u0CF1\u0CF2\u0D00-\u0D03\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D44\u0D46-\u0D48\u0D4A-\u0D4E\u0D54-\u0D57\u0D5F-\u0D63\u0D66-\u0D6F\u0D7A-\u0D7F\u0D82\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2\u0DF3\u0E01-\u0E3A\u0E40-\u0E4E\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB9\u0EBB-\u0EBD\u0EC0-\u0EC4\u0EC6\u0EC8-\u0ECD\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F18\u0F19\u0F20-\u0F29\u0F35\u0F37\u0F39\u0F3E-\u0F47\u0F49-\u0F6C\u0F71-\u0F84\u0F86-\u0F97\u0F99-\u0FBC\u0FC6\u1000-\u1049\u1050-\u109D\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u135D-\u135F\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1714\u1720-\u1734\u1740-\u1753\u1760-\u176C\u176E-\u1770\u1772\u1773\u1780-\u17D3\u17D7\u17DC\u17DD\u17E0-\u17E9\u180B-\u180D\u1810-\u1819\u1820-\u1877\u1880-\u18AA\u18B0-\u18F5\u1900-\u191E\u1920-\u192B\u1930-\u193B\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19D9\u1A00-\u1A1B\u1A20-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AA7\u1AB0-\u1ABD\u1B00-\u1B4B\u1B50-\u1B59\u1B6B-\u1B73\u1B80-\u1BF3\u1C00-\u1C37\u1C40-\u1C49\u1C4D-\u1C7D\u1C80-\u1C88\u1CD0-\u1CD2\u1CD4-\u1CF9\u1D00-\u1DF9\u1DFB-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u203F\u2040\u2054\u2071\u207F\u2090-\u209C\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D7F-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2DE0-\u2DFF\u2E2F\u3005-\u3007\u3021-\u302F\u3031-\u3035\u3038-\u303C\u3041-\u3096\u3099\u309A\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312E\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FEA\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66F\uA674-\uA67D\uA67F-\uA6F1\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA827\uA840-\uA873\uA880-\uA8C5\uA8D0-\uA8D9\uA8E0-\uA8F7\uA8FB\uA8FD\uA900-\uA92D\uA930-\uA953\uA960-\uA97C\uA980-\uA9C0\uA9CF-\uA9D9\uA9E0-\uA9FE\uAA00-\uAA36\uAA40-\uAA4D\uAA50-\uAA59\uAA60-\uAA76\uAA7A-\uAAC2\uAADB-\uAADD\uAAE0-\uAAEF\uAAF2-\uAAF6\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABEA\uABEC\uABED\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE00-\uFE0F\uFE20-\uFE2F\uFE33\uFE34\uFE4D-\uFE4F\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF3F\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDDFD\uDE80-\uDE9C\uDEA0-\uDED0\uDEE0\uDF00-\uDF1F\uDF2D-\uDF4A\uDF50-\uDF7A\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCA0-\uDCA9\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00-\uDE03\uDE05\uDE06\uDE0C-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE38-\uDE3A\uDE3F\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE6\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC00-\uDC46\uDC66-\uDC6F\uDC7F-\uDCBA\uDCD0-\uDCE8\uDCF0-\uDCF9\uDD00-\uDD34\uDD36-\uDD3F\uDD50-\uDD73\uDD76\uDD80-\uDDC4\uDDCA-\uDDCC\uDDD0-\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE37\uDE3E\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEEA\uDEF0-\uDEF9\uDF00-\uDF03\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3C-\uDF44\uDF47\uDF48\uDF4B-\uDF4D\uDF50\uDF57\uDF5D-\uDF63\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC00-\uDC4A\uDC50-\uDC59\uDC80-\uDCC5\uDCC7\uDCD0-\uDCD9\uDD80-\uDDB5\uDDB8-\uDDC0\uDDD8-\uDDDD\uDE00-\uDE40\uDE44\uDE50-\uDE59\uDE80-\uDEB7\uDEC0-\uDEC9\uDF00-\uDF19\uDF1D-\uDF2B\uDF30-\uDF39]|\uD806[\uDCA0-\uDCE9\uDCFF\uDE00-\uDE3E\uDE47\uDE50-\uDE83\uDE86-\uDE99\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC36\uDC38-\uDC40\uDC50-\uDC59\uDC72-\uDC8F\uDC92-\uDCA7\uDCA9-\uDCB6\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD36\uDD3A\uDD3C\uDD3D\uDD3F-\uDD47\uDD50-\uDD59]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE60-\uDE69\uDED0-\uDEED\uDEF0-\uDEF4\uDF00-\uDF36\uDF40-\uDF43\uDF50-\uDF59\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50-\uDF7E\uDF8F-\uDF9F\uDFE0\uDFE1]|\uD821[\uDC00-\uDFEC]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00-\uDD1E\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99\uDC9D\uDC9E]|\uD834[\uDD65-\uDD69\uDD6D-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB\uDFCE-\uDFFF]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD838[\uDC00-\uDC06\uDC08-\uDC18\uDC1B-\uDC21\uDC23\uDC24\uDC26-\uDC2A]|\uD83A[\uDC00-\uDCC4\uDCD0-\uDCD6\uDD00-\uDD4A\uDD50-\uDD59]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uDB40[\uDD00-\uDDEF]/,mM={Space_Separator:Y_e,ID_Start:H_e,ID_Continue:K_e},ra={isSpaceSeparator(t){return typeof t=="string"&&mM.Space_Separator.test(t)},isIdStartChar(t){return typeof t=="string"&&(t>="a"&&t<="z"||t>="A"&&t<="Z"||t==="$"||t==="_"||mM.ID_Start.test(t))},isIdContinueChar(t){return typeof t=="string"&&(t>="a"&&t<="z"||t>="A"&&t<="Z"||t>="0"&&t<="9"||t==="$"||t==="_"||t==="â"||t==="â"||mM.ID_Continue.test(t))},isDigit(t){return typeof t=="string"&&/[0-9]/.test(t)},isHexDigit(t){return typeof t=="string"&&/[0-9A-Fa-f]/.test(t)}};let hF,Iu,Fg,YT,c1,kd,Ka,kB,L3;var J_e=function(e,n){hF=String(e),Iu="start",Fg=[],YT=0,c1=1,kd=0,Ka=void 0,kB=void 0,L3=void 0;do Ka=exe(),rxe[Iu]();while(Ka.type!=="eof");return typeof n=="function"?fF({"":L3},"",n):L3};function fF(t,e,n){const r=t[e];if(r!=null&&typeof r=="object")if(Array.isArray(r))for(let i=0;i<r.length;i++){const s=String(i),o=fF(r,s,n);o===void 0?delete r[s]:Object.defineProperty(r,s,{value:o,writable:!0,enumerable:!0,configurable:!0})}else for(const i in r){const s=fF(r,i,n);s===void 0?delete r[i]:Object.defineProperty(r,i,{value:s,writable:!0,enumerable:!0,configurable:!0})}return n.call(t,e,r)}let ri,qr,m3,bg,_i;function exe(){for(ri="default",qr="",m3=!1,bg=1;;){_i=Gg();const t=tte[ri]();if(t)return t}}function Gg(){if(hF[YT])return String.fromCodePoint(hF.codePointAt(YT))}function Mt(){const t=Gg();return t===`
`?(c1++,kd=0):t?kd+=t.length:kd++,t&&(YT+=t.length),t}const tte={default(){switch(_i){case"	":case"\v":case"\f":case" ":case"Â ":case"\uFEFF":case`
`:case"\r":case"\u2028":case"\u2029":Mt();return;case"/":Mt(),ri="comment";return;case void 0:return Mt(),fo("eof")}if(ra.isSpaceSeparator(_i)){Mt();return}return tte[Iu]()},comment(){switch(_i){case"*":Mt(),ri="multiLineComment";return;case"/":Mt(),ri="singleLineComment";return}throw po(Mt())},multiLineComment(){switch(_i){case"*":Mt(),ri="multiLineCommentAsterisk";return;case void 0:throw po(Mt())}Mt()},multiLineCommentAsterisk(){switch(_i){case"*":Mt();return;case"/":Mt(),ri="default";return;case void 0:throw po(Mt())}Mt(),ri="multiLineComment"},singleLineComment(){switch(_i){case`
`:case"\r":case"\u2028":case"\u2029":Mt(),ri="default";return;case void 0:return Mt(),fo("eof")}Mt()},value(){switch(_i){case"{":case"[":return fo("punctuator",Mt());case"n":return Mt(),Tv("ull"),fo("null",null);case"t":return Mt(),Tv("rue"),fo("boolean",!0);case"f":return Mt(),Tv("alse"),fo("boolean",!1);case"-":case"+":Mt()==="-"&&(bg=-1),ri="sign";return;case".":qr=Mt(),ri="decimalPointLeading";return;case"0":qr=Mt(),ri="zero";return;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":qr=Mt(),ri="decimalInteger";return;case"I":return Mt(),Tv("nfinity"),fo("numeric",1/0);case"N":return Mt(),Tv("aN"),fo("numeric",NaN);case'"':case"'":m3=Mt()==='"',qr="",ri="string";return}throw po(Mt())},identifierNameStartEscape(){if(_i!=="u")throw po(Mt());Mt();const t=dF();switch(t){case"$":case"_":break;default:if(!ra.isIdStartChar(t))throw tU();break}qr+=t,ri="identifierName"},identifierName(){switch(_i){case"$":case"_":case"â":case"â":qr+=Mt();return;case"\\":Mt(),ri="identifierNameEscape";return}if(ra.isIdContinueChar(_i)){qr+=Mt();return}return fo("identifier",qr)},identifierNameEscape(){if(_i!=="u")throw po(Mt());Mt();const t=dF();switch(t){case"$":case"_":case"â":case"â":break;default:if(!ra.isIdContinueChar(t))throw tU();break}qr+=t,ri="identifierName"},sign(){switch(_i){case".":qr=Mt(),ri="decimalPointLeading";return;case"0":qr=Mt(),ri="zero";return;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":qr=Mt(),ri="decimalInteger";return;case"I":return Mt(),Tv("nfinity"),fo("numeric",bg*(1/0));case"N":return Mt(),Tv("aN"),fo("numeric",NaN)}throw po(Mt())},zero(){switch(_i){case".":qr+=Mt(),ri="decimalPoint";return;case"e":case"E":qr+=Mt(),ri="decimalExponent";return;case"x":case"X":qr+=Mt(),ri="hexadecimal";return}return fo("numeric",bg*0)},decimalInteger(){switch(_i){case".":qr+=Mt(),ri="decimalPoint";return;case"e":case"E":qr+=Mt(),ri="decimalExponent";return}if(ra.isDigit(_i)){qr+=Mt();return}return fo("numeric",bg*Number(qr))},decimalPointLeading(){if(ra.isDigit(_i)){qr+=Mt(),ri="decimalFraction";return}throw po(Mt())},decimalPoint(){switch(_i){case"e":case"E":qr+=Mt(),ri="decimalExponent";return}if(ra.isDigit(_i)){qr+=Mt(),ri="decimalFraction";return}return fo("numeric",bg*Number(qr))},decimalFraction(){switch(_i){case"e":case"E":qr+=Mt(),ri="decimalExponent";return}if(ra.isDigit(_i)){qr+=Mt();return}return fo("numeric",bg*Number(qr))},decimalExponent(){switch(_i){case"+":case"-":qr+=Mt(),ri="decimalExponentSign";return}if(ra.isDigit(_i)){qr+=Mt(),ri="decimalExponentInteger";return}throw po(Mt())},decimalExponentSign(){if(ra.isDigit(_i)){qr+=Mt(),ri="decimalExponentInteger";return}throw po(Mt())},decimalExponentInteger(){if(ra.isDigit(_i)){qr+=Mt();return}return fo("numeric",bg*Number(qr))},hexadecimal(){if(ra.isHexDigit(_i)){qr+=Mt(),ri="hexadecimalInteger";return}throw po(Mt())},hexadecimalInteger(){if(ra.isHexDigit(_i)){qr+=Mt();return}return fo("numeric",bg*Number(qr))},string(){switch(_i){case"\\":Mt(),qr+=txe();return;case'"':if(m3)return Mt(),fo("string",qr);qr+=Mt();return;case"'":if(!m3)return Mt(),fo("string",qr);qr+=Mt();return;case`
`:case"\r":throw po(Mt());case"\u2028":case"\u2029":ixe(_i);break;case void 0:throw po(Mt())}qr+=Mt()},start(){switch(_i){case"{":case"[":return fo("punctuator",Mt())}ri="value"},beforePropertyName(){switch(_i){case"$":case"_":qr=Mt(),ri="identifierName";return;case"\\":Mt(),ri="identifierNameStartEscape";return;case"}":return fo("punctuator",Mt());case'"':case"'":m3=Mt()==='"',ri="string";return}if(ra.isIdStartChar(_i)){qr+=Mt(),ri="identifierName";return}throw po(Mt())},afterPropertyName(){if(_i===":")return fo("punctuator",Mt());throw po(Mt())},beforePropertyValue(){ri="value"},afterPropertyValue(){switch(_i){case",":case"}":return fo("punctuator",Mt())}throw po(Mt())},beforeArrayValue(){if(_i==="]")return fo("punctuator",Mt());ri="value"},afterArrayValue(){switch(_i){case",":case"]":return fo("punctuator",Mt())}throw po(Mt())},end(){throw po(Mt())}};function fo(t,e){return{type:t,value:e,line:c1,column:kd}}function Tv(t){for(const e of t){if(Gg()!==e)throw po(Mt());Mt()}}function txe(){switch(Gg()){case"b":return Mt(),"\b";case"f":return Mt(),"\f";case"n":return Mt(),`
`;case"r":return Mt(),"\r";case"t":return Mt(),"	";case"v":return Mt(),"\v";case"0":if(Mt(),ra.isDigit(Gg()))throw po(Mt());return"\0";case"x":return Mt(),nxe();case"u":return Mt(),dF();case`
`:case"\u2028":case"\u2029":return Mt(),"";case"\r":return Mt(),Gg()===`
`&&Mt(),"";case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":throw po(Mt());case void 0:throw po(Mt())}return Mt()}function nxe(){let t="",e=Gg();if(!ra.isHexDigit(e)||(t+=Mt(),e=Gg(),!ra.isHexDigit(e)))throw po(Mt());return t+=Mt(),String.fromCodePoint(parseInt(t,16))}function dF(){let t="",e=4;for(;e-- >0;){const n=Gg();if(!ra.isHexDigit(n))throw po(Mt());t+=Mt()}return String.fromCodePoint(parseInt(t,16))}const rxe={start(){if(Ka.type==="eof")throw Pv();gM()},beforePropertyName(){switch(Ka.type){case"identifier":case"string":kB=Ka.value,Iu="afterPropertyName";return;case"punctuator":UE();return;case"eof":throw Pv()}},afterPropertyName(){if(Ka.type==="eof")throw Pv();Iu="beforePropertyValue"},beforePropertyValue(){if(Ka.type==="eof")throw Pv();gM()},beforeArrayValue(){if(Ka.type==="eof")throw Pv();if(Ka.type==="punctuator"&&Ka.value==="]"){UE();return}gM()},afterPropertyValue(){if(Ka.type==="eof")throw Pv();switch(Ka.value){case",":Iu="beforePropertyName";return;case"}":UE()}},afterArrayValue(){if(Ka.type==="eof")throw Pv();switch(Ka.value){case",":Iu="beforeArrayValue";return;case"]":UE()}},end(){}};function gM(){let t;switch(Ka.type){case"punctuator":switch(Ka.value){case"{":t={};break;case"[":t=[];break}break;case"null":case"boolean":case"numeric":case"string":t=Ka.value;break}if(L3===void 0)L3=t;else{const e=Fg[Fg.length-1];Array.isArray(e)?e.push(t):Object.defineProperty(e,kB,{value:t,writable:!0,enumerable:!0,configurable:!0})}if(t!==null&&typeof t=="object")Fg.push(t),Array.isArray(t)?Iu="beforeArrayValue":Iu="beforePropertyName";else{const e=Fg[Fg.length-1];e==null?Iu="end":Array.isArray(e)?Iu="afterArrayValue":Iu="afterPropertyValue"}}function UE(){Fg.pop();const t=Fg[Fg.length-1];t==null?Iu="end":Array.isArray(t)?Iu="afterArrayValue":Iu="afterPropertyValue"}function po(t){return HT(t===void 0?`JSON5: invalid end of input at ${c1}:${kd}`:`JSON5: invalid character '${nte(t)}' at ${c1}:${kd}`)}function Pv(){return HT(`JSON5: invalid end of input at ${c1}:${kd}`)}function tU(){return kd-=5,HT(`JSON5: invalid identifier character at ${c1}:${kd}`)}function ixe(t){console.warn(`JSON5: '${nte(t)}' in strings is not valid ECMAScript; consider escaping`)}function nte(t){const e={"'":"\\'",'"':'\\"',"\\":"\\\\","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","	":"\\t","\v":"\\v","\0":"\\0","\u2028":"\\u2028","\u2029":"\\u2029"};if(e[t])return e[t];if(t<" "){const n=t.charCodeAt(0).toString(16);return"\\x"+("00"+n).substring(n.length)}return t}function HT(t){const e=new SyntaxError(t);return e.lineNumber=c1,e.columnNumber=kd,e}var sxe=function(e,n,r){const i=[];let s="",o,a,l="",h;if(n!=null&&typeof n=="object"&&!Array.isArray(n)&&(r=n.space,h=n.quote,n=n.replacer),typeof n=="function")a=n;else if(Array.isArray(n)){o=[];for(const k of n){let T;typeof k=="string"?T=k:(typeof k=="number"||k instanceof String||k instanceof Number)&&(T=String(k)),T!==void 0&&o.indexOf(T)<0&&o.push(T)}}return r instanceof Number?r=Number(r):r instanceof String&&(r=String(r)),typeof r=="number"?r>0&&(r=Math.min(10,Math.floor(r)),l="          ".substr(0,r)):typeof r=="string"&&(l=r.substr(0,10)),f("",{"":e});function f(k,T){let I=T[k];switch(I!=null&&(typeof I.toJSON5=="function"?I=I.toJSON5(k):typeof I.toJSON=="function"&&(I=I.toJSON(k))),a&&(I=a.call(T,k,I)),I instanceof Number?I=Number(I):I instanceof String?I=String(I):I instanceof Boolean&&(I=I.valueOf()),I){case null:return"null";case!0:return"true";case!1:return"false"}if(typeof I=="string")return p(I);if(typeof I=="number")return String(I);if(typeof I=="object")return Array.isArray(I)?x(I):g(I)}function p(k){const T={"'":.1,'"':.2},I={"'":"\\'",'"':'\\"',"\\":"\\\\","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","	":"\\t","\v":"\\v","\0":"\\0","\u2028":"\\u2028","\u2029":"\\u2029"};let M="";for(let j=0;j<k.length;j++){const Q=k[j];switch(Q){case"'":case'"':T[Q]++,M+=Q;continue;case"\0":if(ra.isDigit(k[j+1])){M+="\\x00";continue}}if(I[Q]){M+=I[Q];continue}if(Q<" "){let Z=Q.charCodeAt(0).toString(16);M+="\\x"+("00"+Z).substring(Z.length);continue}M+=Q}const B=h||Object.keys(T).reduce((j,Q)=>T[j]<T[Q]?j:Q);return M=M.replace(new RegExp(B,"g"),I[B]),B+M+B}function g(k){if(i.indexOf(k)>=0)throw TypeError("Converting circular structure to JSON5");i.push(k);let T=s;s=s+l;let I=o||Object.keys(k),M=[];for(const j of I){const Q=f(j,k);if(Q!==void 0){let Z=b(j)+":";l!==""&&(Z+=" "),Z+=Q,M.push(Z)}}let B;if(M.length===0)B="{}";else{let j;if(l==="")j=M.join(","),B="{"+j+"}";else{let Q=`,
`+s;j=M.join(Q),B=`{
`+s+j+`,
`+T+"}"}}return i.pop(),s=T,B}function b(k){if(k.length===0)return p(k);const T=String.fromCodePoint(k.codePointAt(0));if(!ra.isIdStartChar(T))return p(k);for(let I=T.length;I<k.length;I++)if(!ra.isIdContinueChar(String.fromCodePoint(k.codePointAt(I))))return p(k);return k}function x(k){if(i.indexOf(k)>=0)throw TypeError("Converting circular structure to JSON5");i.push(k);let T=s;s=s+l;let I=[];for(let B=0;B<k.length;B++){const j=f(String(B),k);I.push(j!==void 0?j:"null")}let M;if(I.length===0)M="[]";else if(l==="")M="["+I.join(",")+"]";else{let B=`,
`+s,j=I.join(B);M=`[
`+s+j+`,
`+T+"]"}return i.pop(),s=T,M}};const oxe={parse:J_e,stringify:sxe};var i2=oxe;let pF=[],rte=[];(()=>{let t="lc,34,7n,7,7b,19,,,,2,,2,,,20,b,1c,l,g,,2t,7,2,6,2,2,,4,z,,u,r,2j,b,1m,9,9,,o,4,,9,,3,,5,17,3,3b,f,,w,1j,,,,4,8,4,,3,7,a,2,t,,1m,,,,2,4,8,,9,,a,2,q,,2,2,1l,,4,2,4,2,2,3,3,,u,2,3,,b,2,1l,,4,5,,2,4,,k,2,m,6,,,1m,,,2,,4,8,,7,3,a,2,u,,1n,,,,c,,9,,14,,3,,1l,3,5,3,,4,7,2,b,2,t,,1m,,2,,2,,3,,5,2,7,2,b,2,s,2,1l,2,,,2,4,8,,9,,a,2,t,,20,,4,,2,3,,,8,,29,,2,7,c,8,2q,,2,9,b,6,22,2,r,,,,,,1j,e,,5,,2,5,b,,10,9,,2u,4,,6,,2,2,2,p,2,4,3,g,4,d,,2,2,6,,f,,jj,3,qa,3,t,3,t,2,u,2,1s,2,,7,8,,2,b,9,,19,3,3b,2,y,,3a,3,4,2,9,,6,3,63,2,2,,1m,,,7,,,,,2,8,6,a,2,,1c,h,1r,4,1c,7,,,5,,14,9,c,2,w,4,2,2,,3,1k,,,2,3,,,3,1m,8,2,2,48,3,,d,,7,4,,6,,3,2,5i,1m,,5,ek,,5f,x,2da,3,3x,,2o,w,fe,6,2x,2,n9w,4,,a,w,2,28,2,7k,,3,,4,,p,2,5,,47,2,q,i,d,,12,8,p,b,1a,3,1c,,2,4,2,2,13,,1v,6,2,2,2,2,c,,8,,1b,,1f,,,3,2,2,5,2,,,16,2,8,,6m,,2,,4,,fn4,,kh,g,g,g,a6,2,gt,,6a,,45,5,1ae,3,,2,5,4,14,3,4,,4l,2,fx,4,ar,2,49,b,4w,,1i,f,1k,3,1d,4,2,2,1x,3,10,5,,8,1q,,c,2,1g,9,a,4,2,,2n,3,2,,,2,6,,4g,,3,8,l,2,1l,2,,,,,m,,e,7,3,5,5f,8,2,3,,,n,,29,,2,6,,,2,,,2,,2,6j,,2,4,6,2,,2,r,2,2d,8,2,,,2,2y,,,,2,6,,,2t,3,2,4,,5,77,9,,2,6t,,a,2,,,4,,40,4,2,2,4,,w,a,14,6,2,4,8,,9,6,2,3,1a,d,,2,ba,7,,6,,,2a,m,2,7,,2,,2,3e,6,3,,,2,,7,,,20,2,3,,,,9n,2,f0b,5,1n,7,t4,,1r,4,29,,f5k,2,43q,,,3,4,5,8,8,2,7,u,4,44,3,1iz,1j,4,1e,8,,e,,m,5,,f,11s,7,,h,2,7,,2,,5,79,7,c5,4,15s,7,31,7,240,5,gx7k,2o,3k,6o".split(",").map(e=>e?parseInt(e,36):1);for(let e=0,n=0;e<t.length;e++)(e%2?rte:pF).push(n=n+t[e])})();function axe(t){if(t<768)return!1;for(let e=0,n=pF.length;;){let r=e+n>>1;if(t<pF[r])n=r;else if(t>=rte[r])e=r+1;else return!0;if(e==n)return!1}}function nU(t){return t>=127462&&t<=127487}const rU=8205;function lxe(t,e,n=!0,r=!0){return(n?ite:uxe)(t,e,r)}function ite(t,e,n){if(e==t.length)return e;e&&ste(t.charCodeAt(e))&&ote(t.charCodeAt(e-1))&&e--;let r=yM(t,e);for(e+=iU(r);e<t.length;){let i=yM(t,e);if(r==rU||i==rU||n&&axe(i))e+=iU(i),r=i;else if(nU(i)){let s=0,o=e-2;for(;o>=0&&nU(yM(t,o));)s++,o-=2;if(s%2==0)break;e+=2}else break}return e}function uxe(t,e,n){for(;e>0;){let r=ite(t,e-2,n);if(r<e)return r;e--}return 0}function yM(t,e){let n=t.charCodeAt(e);if(!ote(n)||e+1==t.length)return n;let r=t.charCodeAt(e+1);return ste(r)?(n-55296<<10)+(r-56320)+65536:n}function ste(t){return t>=56320&&t<57344}function ote(t){return t>=55296&&t<56320}function iU(t){return t<65536?1:2}let ts=class ate{lineAt(e){if(e<0||e>this.length)throw new RangeError(`Invalid position ${e} in document of length ${this.length}`);return this.lineInner(e,!1,1,0)}line(e){if(e<1||e>this.lines)throw new RangeError(`Invalid line number ${e} in ${this.lines}-line document`);return this.lineInner(e,!0,1,0)}replace(e,n,r){[e,n]=s2(this,e,n);let i=[];return this.decompose(0,e,i,2),r.length&&r.decompose(0,r.length,i,3),this.decompose(n,this.length,i,1),Lp.from(i,this.length-(n-e)+r.length)}append(e){return this.replace(this.length,this.length,e)}slice(e,n=this.length){[e,n]=s2(this,e,n);let r=[];return this.decompose(e,n,r,0),Lp.from(r,n-e)}eq(e){if(e==this)return!0;if(e.length!=this.length||e.lines!=this.lines)return!1;let n=this.scanIdentical(e,1),r=this.length-this.scanIdentical(e,-1),i=new $3(this),s=new $3(e);for(let o=n,a=n;;){if(i.next(o),s.next(o),o=0,i.lineBreak!=s.lineBreak||i.done!=s.done||i.value!=s.value)return!1;if(a+=i.value.length,i.done||a>=r)return!0}}iter(e=1){return new $3(this,e)}iterRange(e,n=this.length){return new lte(this,e,n)}iterLines(e,n){let r;if(e==null)r=this.iter();else{n==null&&(n=this.lines+1);let i=this.line(e).from;r=this.iterRange(i,Math.max(i,n==this.lines+1?this.length:n<=1?0:this.line(n-1).to))}return new ute(r)}toString(){return this.sliceString(0)}toJSON(){let e=[];return this.flatten(e),e}constructor(){}static of(e){if(e.length==0)throw new RangeError("A document must have at least one line");return e.length==1&&!e[0]?ate.empty:e.length<=32?new ia(e):Lp.from(ia.split(e,[]))}};class ia extends ts{constructor(e,n=cxe(e)){super(),this.text=e,this.length=n}get lines(){return this.text.length}get children(){return null}lineInner(e,n,r,i){for(let s=0;;s++){let o=this.text[s],a=i+o.length;if((n?r:a)>=e)return new hxe(i,a,r,o);i=a+1,r++}}decompose(e,n,r,i){let s=e<=0&&n>=this.length?this:new ia(sU(this.text,e,n),Math.min(n,this.length)-Math.max(0,e));if(i&1){let o=r.pop(),a=m5(s.text,o.text.slice(),0,s.length);if(a.length<=32)r.push(new ia(a,o.length+s.length));else{let l=a.length>>1;r.push(new ia(a.slice(0,l)),new ia(a.slice(l)))}}else r.push(s)}replace(e,n,r){if(!(r instanceof ia))return super.replace(e,n,r);[e,n]=s2(this,e,n);let i=m5(this.text,m5(r.text,sU(this.text,0,e)),n),s=this.length+r.length-(n-e);return i.length<=32?new ia(i,s):Lp.from(ia.split(i,[]),s)}sliceString(e,n=this.length,r=`
`){[e,n]=s2(this,e,n);let i="";for(let s=0,o=0;s<=n&&o<this.text.length;o++){let a=this.text[o],l=s+a.length;s>e&&o&&(i+=r),e<l&&n>s&&(i+=a.slice(Math.max(0,e-s),n-s)),s=l+1}return i}flatten(e){for(let n of this.text)e.push(n)}scanIdentical(){return 0}static split(e,n){let r=[],i=-1;for(let s of e)r.push(s),i+=s.length+1,r.length==32&&(n.push(new ia(r,i)),r=[],i=-1);return i>-1&&n.push(new ia(r,i)),n}}class Lp extends ts{constructor(e,n){super(),this.children=e,this.length=n,this.lines=0;for(let r of e)this.lines+=r.lines}lineInner(e,n,r,i){for(let s=0;;s++){let o=this.children[s],a=i+o.length,l=r+o.lines-1;if((n?l:a)>=e)return o.lineInner(e,n,r,i);i=a+1,r=l+1}}decompose(e,n,r,i){for(let s=0,o=0;o<=n&&s<this.children.length;s++){let a=this.children[s],l=o+a.length;if(e<=l&&n>=o){let h=i&((o<=e?1:0)|(l>=n?2:0));o>=e&&l<=n&&!h?r.push(a):a.decompose(e-o,n-o,r,h)}o=l+1}}replace(e,n,r){if([e,n]=s2(this,e,n),r.lines<this.lines)for(let i=0,s=0;i<this.children.length;i++){let o=this.children[i],a=s+o.length;if(e>=s&&n<=a){let l=o.replace(e-s,n-s,r),h=this.lines-o.lines+l.lines;if(l.lines<h>>4&&l.lines>h>>6){let f=this.children.slice();return f[i]=l,new Lp(f,this.length-(n-e)+r.length)}return super.replace(s,a,l)}s=a+1}return super.replace(e,n,r)}sliceString(e,n=this.length,r=`
`){[e,n]=s2(this,e,n);let i="";for(let s=0,o=0;s<this.children.length&&o<=n;s++){let a=this.children[s],l=o+a.length;o>e&&s&&(i+=r),e<l&&n>o&&(i+=a.sliceString(e-o,n-o,r)),o=l+1}return i}flatten(e){for(let n of this.children)n.flatten(e)}scanIdentical(e,n){if(!(e instanceof Lp))return 0;let r=0,[i,s,o,a]=n>0?[0,0,this.children.length,e.children.length]:[this.children.length-1,e.children.length-1,-1,-1];for(;;i+=n,s+=n){if(i==o||s==a)return r;let l=this.children[i],h=e.children[s];if(l!=h)return r+l.scanIdentical(h,n);r+=l.length+1}}static from(e,n=e.reduce((r,i)=>r+i.length+1,-1)){let r=0;for(let b of e)r+=b.lines;if(r<32){let b=[];for(let x of e)x.flatten(b);return new ia(b,n)}let i=Math.max(32,r>>5),s=i<<1,o=i>>1,a=[],l=0,h=-1,f=[];function p(b){let x;if(b.lines>s&&b instanceof Lp)for(let k of b.children)p(k);else b.lines>o&&(l>o||!l)?(g(),a.push(b)):b instanceof ia&&l&&(x=f[f.length-1])instanceof ia&&b.lines+x.lines<=32?(l+=b.lines,h+=b.length+1,f[f.length-1]=new ia(x.text.concat(b.text),x.length+1+b.length)):(l+b.lines>i&&g(),l+=b.lines,h+=b.length+1,f.push(b))}function g(){l!=0&&(a.push(f.length==1?f[0]:Lp.from(f,h)),h=-1,l=f.length=0)}for(let b of e)p(b);return g(),a.length==1?a[0]:new Lp(a,n)}}ts.empty=new ia([""],0);function cxe(t){let e=-1;for(let n of t)e+=n.length+1;return e}function m5(t,e,n=0,r=1e9){for(let i=0,s=0,o=!0;s<t.length&&i<=r;s++){let a=t[s],l=i+a.length;l>=n&&(l>r&&(a=a.slice(0,r-i)),i<n&&(a=a.slice(n-i)),o?(e[e.length-1]+=a,o=!1):e.push(a)),i=l+1}return e}function sU(t,e,n){return m5(t,[""],e,n)}class $3{constructor(e,n=1){this.dir=n,this.done=!1,this.lineBreak=!1,this.value="",this.nodes=[e],this.offsets=[n>0?1:(e instanceof ia?e.text.length:e.children.length)<<1]}nextInner(e,n){for(this.done=this.lineBreak=!1;;){let r=this.nodes.length-1,i=this.nodes[r],s=this.offsets[r],o=s>>1,a=i instanceof ia?i.text.length:i.children.length;if(o==(n>0?a:0)){if(r==0)return this.done=!0,this.value="",this;n>0&&this.offsets[r-1]++,this.nodes.pop(),this.offsets.pop()}else if((s&1)==(n>0?0:1)){if(this.offsets[r]+=n,e==0)return this.lineBreak=!0,this.value=`
`,this;e--}else if(i instanceof ia){let l=i.text[o+(n<0?-1:0)];if(this.offsets[r]+=n,l.length>Math.max(0,e))return this.value=e==0?l:n>0?l.slice(e):l.slice(0,l.length-e),this;e-=l.length}else{let l=i.children[o+(n<0?-1:0)];e>l.length?(e-=l.length,this.offsets[r]+=n):(n<0&&this.offsets[r]--,this.nodes.push(l),this.offsets.push(n>0?1:(l instanceof ia?l.text.length:l.children.length)<<1))}}}next(e=0){return e<0&&(this.nextInner(-e,-this.dir),e=this.value.length),this.nextInner(e,this.dir)}}class lte{constructor(e,n,r){this.value="",this.done=!1,this.cursor=new $3(e,n>r?-1:1),this.pos=n>r?e.length:0,this.from=Math.min(n,r),this.to=Math.max(n,r)}nextInner(e,n){if(n<0?this.pos<=this.from:this.pos>=this.to)return this.value="",this.done=!0,this;e+=Math.max(0,n<0?this.pos-this.to:this.from-this.pos);let r=n<0?this.pos-this.from:this.to-this.pos;e>r&&(e=r),r-=e;let{value:i}=this.cursor.next(e);return this.pos+=(i.length+e)*n,this.value=i.length<=r?i:n<0?i.slice(i.length-r):i.slice(0,r),this.done=!this.value,this}next(e=0){return e<0?e=Math.max(e,this.from-this.pos):e>0&&(e=Math.min(e,this.to-this.pos)),this.nextInner(e,this.cursor.dir)}get lineBreak(){return this.cursor.lineBreak&&this.value!=""}}class ute{constructor(e){this.inner=e,this.afterBreak=!0,this.value="",this.done=!1}next(e=0){let{done:n,lineBreak:r,value:i}=this.inner.next(e);return n&&this.afterBreak?(this.value="",this.afterBreak=!1):n?(this.done=!0,this.value=""):r?this.afterBreak?this.value="":(this.afterBreak=!0,this.next()):(this.value=i,this.afterBreak=!1),this}get lineBreak(){return!1}}typeof Symbol<"u"&&(ts.prototype[Symbol.iterator]=function(){return this.iter()},$3.prototype[Symbol.iterator]=lte.prototype[Symbol.iterator]=ute.prototype[Symbol.iterator]=function(){return this});let hxe=class{constructor(e,n,r,i){this.from=e,this.to=n,this.number=r,this.text=i}get length(){return this.to-this.from}};function s2(t,e,n){return e=Math.max(0,Math.min(t.length,e)),[e,Math.max(e,Math.min(t.length,n))]}function bl(t,e,n=!0,r=!0){return lxe(t,e,n,r)}function fxe(t){return t>=56320&&t<57344}function dxe(t){return t>=55296&&t<56320}function hc(t,e){let n=t.charCodeAt(e);if(!dxe(n)||e+1==t.length)return n;let r=t.charCodeAt(e+1);return fxe(r)?(n-55296<<10)+(r-56320)+65536:n}function CB(t){return t<=65535?String.fromCharCode(t):(t-=65536,String.fromCharCode((t>>10)+55296,(t&1023)+56320))}function $p(t){return t<65536?1:2}const mF=/\r\n?|\n/;var yl=(function(t){return t[t.Simple=0]="Simple",t[t.TrackDel=1]="TrackDel",t[t.TrackBefore=2]="TrackBefore",t[t.TrackAfter=3]="TrackAfter",t})(yl||(yl={}));class Jp{constructor(e){this.sections=e}get length(){let e=0;for(let n=0;n<this.sections.length;n+=2)e+=this.sections[n];return e}get newLength(){let e=0;for(let n=0;n<this.sections.length;n+=2){let r=this.sections[n+1];e+=r<0?this.sections[n]:r}return e}get empty(){return this.sections.length==0||this.sections.length==2&&this.sections[1]<0}iterGaps(e){for(let n=0,r=0,i=0;n<this.sections.length;){let s=this.sections[n++],o=this.sections[n++];o<0?(e(r,i,s),i+=s):i+=o,r+=s}}iterChangedRanges(e,n=!1){gF(this,e,n)}get invertedDesc(){let e=[];for(let n=0;n<this.sections.length;){let r=this.sections[n++],i=this.sections[n++];i<0?e.push(r,i):e.push(i,r)}return new Jp(e)}composeDesc(e){return this.empty?e:e.empty?this:cte(this,e)}mapDesc(e,n=!1){return e.empty?this:yF(this,e,n)}mapPos(e,n=-1,r=yl.Simple){let i=0,s=0;for(let o=0;o<this.sections.length;){let a=this.sections[o++],l=this.sections[o++],h=i+a;if(l<0){if(h>e)return s+(e-i);s+=a}else{if(r!=yl.Simple&&h>=e&&(r==yl.TrackDel&&i<e&&h>e||r==yl.TrackBefore&&i<e||r==yl.TrackAfter&&h>e))return null;if(h>e||h==e&&n<0&&!a)return e==i||n<0?s:s+l;s+=l}i=h}if(e>i)throw new RangeError(`Position ${e} is out of range for changeset of length ${i}`);return s}touchesRange(e,n=e){for(let r=0,i=0;r<this.sections.length&&i<=n;){let s=this.sections[r++],o=this.sections[r++],a=i+s;if(o>=0&&i<=n&&a>=e)return i<e&&a>n?"cover":!0;i=a}return!1}toString(){let e="";for(let n=0;n<this.sections.length;){let r=this.sections[n++],i=this.sections[n++];e+=(e?" ":"")+r+(i>=0?":"+i:"")}return e}toJSON(){return this.sections}static fromJSON(e){if(!Array.isArray(e)||e.length%2||e.some(n=>typeof n!="number"))throw new RangeError("Invalid JSON representation of ChangeDesc");return new Jp(e)}static create(e){return new Jp(e)}}class Ba extends Jp{constructor(e,n){super(e),this.inserted=n}apply(e){if(this.length!=e.length)throw new RangeError("Applying change set to a document with the wrong length");return gF(this,(n,r,i,s,o)=>e=e.replace(i,i+(r-n),o),!1),e}mapDesc(e,n=!1){return yF(this,e,n,!0)}invert(e){let n=this.sections.slice(),r=[];for(let i=0,s=0;i<n.length;i+=2){let o=n[i],a=n[i+1];if(a>=0){n[i]=a,n[i+1]=o;let l=i>>1;for(;r.length<l;)r.push(ts.empty);r.push(o?e.slice(s,s+o):ts.empty)}s+=o}return new Ba(n,r)}compose(e){return this.empty?e:e.empty?this:cte(this,e,!0)}map(e,n=!1){return e.empty?this:yF(this,e,n,!0)}iterChanges(e,n=!1){gF(this,e,n)}get desc(){return Jp.create(this.sections)}filter(e){let n=[],r=[],i=[],s=new yk(this);e:for(let o=0,a=0;;){let l=o==e.length?1e9:e[o++];for(;a<l||a==l&&s.len==0;){if(s.done)break e;let f=Math.min(s.len,l-a);Zl(i,f,-1);let p=s.ins==-1?-1:s.off==0?s.ins:0;Zl(n,f,p),p>0&&Py(r,n,s.text),s.forward(f),a+=f}let h=e[o++];for(;a<h;){if(s.done)break e;let f=Math.min(s.len,h-a);Zl(n,f,-1),Zl(i,f,s.ins==-1?-1:s.off==0?s.ins:0),s.forward(f),a+=f}}return{changes:new Ba(n,r),filtered:Jp.create(i)}}toJSON(){let e=[];for(let n=0;n<this.sections.length;n+=2){let r=this.sections[n],i=this.sections[n+1];i<0?e.push(r):i==0?e.push([r]):e.push([r].concat(this.inserted[n>>1].toJSON()))}return e}static of(e,n,r){let i=[],s=[],o=0,a=null;function l(f=!1){if(!f&&!i.length)return;o<n&&Zl(i,n-o,-1);let p=new Ba(i,s);a=a?a.compose(p.map(a)):p,i=[],s=[],o=0}function h(f){if(Array.isArray(f))for(let p of f)h(p);else if(f instanceof Ba){if(f.length!=n)throw new RangeError(`Mismatched change set length (got ${f.length}, expected ${n})`);l(),a=a?a.compose(f.map(a)):f}else{let{from:p,to:g=p,insert:b}=f;if(p>g||p<0||g>n)throw new RangeError(`Invalid change range ${p} to ${g} (in doc of length ${n})`);let x=b?typeof b=="string"?ts.of(b.split(r||mF)):b:ts.empty,k=x.length;if(p==g&&k==0)return;p<o&&l(),p>o&&Zl(i,p-o,-1),Zl(i,g-p,k),Py(s,i,x),o=g}}return h(e),l(!a),a}static empty(e){return new Ba(e?[e,-1]:[],[])}static fromJSON(e){if(!Array.isArray(e))throw new RangeError("Invalid JSON representation of ChangeSet");let n=[],r=[];for(let i=0;i<e.length;i++){let s=e[i];if(typeof s=="number")n.push(s,-1);else{if(!Array.isArray(s)||typeof s[0]!="number"||s.some((o,a)=>a&&typeof o!="string"))throw new RangeError("Invalid JSON representation of ChangeSet");if(s.length==1)n.push(s[0],0);else{for(;r.length<i;)r.push(ts.empty);r[i]=ts.of(s.slice(1)),n.push(s[0],r[i].length)}}}return new Ba(n,r)}static createSet(e,n){return new Ba(e,n)}}function Zl(t,e,n,r=!1){if(e==0&&n<=0)return;let i=t.length-2;i>=0&&n<=0&&n==t[i+1]?t[i]+=e:i>=0&&e==0&&t[i]==0?t[i+1]+=n:r?(t[i]+=e,t[i+1]+=n):t.push(e,n)}function Py(t,e,n){if(n.length==0)return;let r=e.length-2>>1;if(r<t.length)t[t.length-1]=t[t.length-1].append(n);else{for(;t.length<r;)t.push(ts.empty);t.push(n)}}function gF(t,e,n){let r=t.inserted;for(let i=0,s=0,o=0;o<t.sections.length;){let a=t.sections[o++],l=t.sections[o++];if(l<0)i+=a,s+=a;else{let h=i,f=s,p=ts.empty;for(;h+=a,f+=l,l&&r&&(p=p.append(r[o-2>>1])),!(n||o==t.sections.length||t.sections[o+1]<0);)a=t.sections[o++],l=t.sections[o++];e(i,h,s,f,p),i=h,s=f}}}function yF(t,e,n,r=!1){let i=[],s=r?[]:null,o=new yk(t),a=new yk(e);for(let l=-1;;){if(o.done&&a.len||a.done&&o.len)throw new Error("Mismatched change set lengths");if(o.ins==-1&&a.ins==-1){let h=Math.min(o.len,a.len);Zl(i,h,-1),o.forward(h),a.forward(h)}else if(a.ins>=0&&(o.ins<0||l==o.i||o.off==0&&(a.len<o.len||a.len==o.len&&!n))){let h=a.len;for(Zl(i,a.ins,-1);h;){let f=Math.min(o.len,h);o.ins>=0&&l<o.i&&o.len<=f&&(Zl(i,0,o.ins),s&&Py(s,i,o.text),l=o.i),o.forward(f),h-=f}a.next()}else if(o.ins>=0){let h=0,f=o.len;for(;f;)if(a.ins==-1){let p=Math.min(f,a.len);h+=p,f-=p,a.forward(p)}else if(a.ins==0&&a.len<f)f-=a.len,a.next();else break;Zl(i,h,l<o.i?o.ins:0),s&&l<o.i&&Py(s,i,o.text),l=o.i,o.forward(o.len-f)}else{if(o.done&&a.done)return s?Ba.createSet(i,s):Jp.create(i);throw new Error("Mismatched change set lengths")}}}function cte(t,e,n=!1){let r=[],i=n?[]:null,s=new yk(t),o=new yk(e);for(let a=!1;;){if(s.done&&o.done)return i?Ba.createSet(r,i):Jp.create(r);if(s.ins==0)Zl(r,s.len,0,a),s.next();else if(o.len==0&&!o.done)Zl(r,0,o.ins,a),i&&Py(i,r,o.text),o.next();else{if(s.done||o.done)throw new Error("Mismatched change set lengths");{let l=Math.min(s.len2,o.len),h=r.length;if(s.ins==-1){let f=o.ins==-1?-1:o.off?0:o.ins;Zl(r,l,f,a),i&&f&&Py(i,r,o.text)}else o.ins==-1?(Zl(r,s.off?0:s.len,l,a),i&&Py(i,r,s.textBit(l))):(Zl(r,s.off?0:s.len,o.off?0:o.ins,a),i&&!o.off&&Py(i,r,o.text));a=(s.ins>l||o.ins>=0&&o.len>l)&&(a||r.length>h),s.forward2(l),o.forward(l)}}}}class yk{constructor(e){this.set=e,this.i=0,this.next()}next(){let{sections:e}=this.set;this.i<e.length?(this.len=e[this.i++],this.ins=e[this.i++]):(this.len=0,this.ins=-2),this.off=0}get done(){return this.ins==-2}get len2(){return this.ins<0?this.len:this.ins}get text(){let{inserted:e}=this.set,n=this.i-2>>1;return n>=e.length?ts.empty:e[n]}textBit(e){let{inserted:n}=this.set,r=this.i-2>>1;return r>=n.length&&!e?ts.empty:n[r].slice(this.off,e==null?void 0:this.off+e)}forward(e){e==this.len?this.next():(this.len-=e,this.off+=e)}forward2(e){this.ins==-1?this.forward(e):e==this.ins?this.next():(this.ins-=e,this.off+=e)}}class Jv{constructor(e,n,r){this.from=e,this.to=n,this.flags=r}get anchor(){return this.flags&32?this.to:this.from}get head(){return this.flags&32?this.from:this.to}get empty(){return this.from==this.to}get assoc(){return this.flags&8?-1:this.flags&16?1:0}get bidiLevel(){let e=this.flags&7;return e==7?null:e}get goalColumn(){let e=this.flags>>6;return e==16777215?void 0:e}map(e,n=-1){let r,i;return this.empty?r=i=e.mapPos(this.from,n):(r=e.mapPos(this.from,1),i=e.mapPos(this.to,-1)),r==this.from&&i==this.to?this:new Jv(r,i,this.flags)}extend(e,n=e){if(e<=this.anchor&&n>=this.anchor)return kt.range(e,n);let r=Math.abs(e-this.anchor)>Math.abs(n-this.anchor)?e:n;return kt.range(this.anchor,r)}eq(e,n=!1){return this.anchor==e.anchor&&this.head==e.head&&(!n||!this.empty||this.assoc==e.assoc)}toJSON(){return{anchor:this.anchor,head:this.head}}static fromJSON(e){if(!e||typeof e.anchor!="number"||typeof e.head!="number")throw new RangeError("Invalid JSON representation for SelectionRange");return kt.range(e.anchor,e.head)}static create(e,n,r){return new Jv(e,n,r)}}class kt{constructor(e,n){this.ranges=e,this.mainIndex=n}map(e,n=-1){return e.empty?this:kt.create(this.ranges.map(r=>r.map(e,n)),this.mainIndex)}eq(e,n=!1){if(this.ranges.length!=e.ranges.length||this.mainIndex!=e.mainIndex)return!1;for(let r=0;r<this.ranges.length;r++)if(!this.ranges[r].eq(e.ranges[r],n))return!1;return!0}get main(){return this.ranges[this.mainIndex]}asSingle(){return this.ranges.length==1?this:new kt([this.main],0)}addRange(e,n=!0){return kt.create([e].concat(this.ranges),n?0:this.mainIndex+1)}replaceRange(e,n=this.mainIndex){let r=this.ranges.slice();return r[n]=e,kt.create(r,this.mainIndex)}toJSON(){return{ranges:this.ranges.map(e=>e.toJSON()),main:this.mainIndex}}static fromJSON(e){if(!e||!Array.isArray(e.ranges)||typeof e.main!="number"||e.main>=e.ranges.length)throw new RangeError("Invalid JSON representation for EditorSelection");return new kt(e.ranges.map(n=>Jv.fromJSON(n)),e.main)}static single(e,n=e){return new kt([kt.range(e,n)],0)}static create(e,n=0){if(e.length==0)throw new RangeError("A selection needs at least one range");for(let r=0,i=0;i<e.length;i++){let s=e[i];if(s.empty?s.from<=r:s.from<r)return kt.normalized(e.slice(),n);r=s.to}return new kt(e,n)}static cursor(e,n=0,r,i){return Jv.create(e,e,(n==0?0:n<0?8:16)|(r==null?7:Math.min(6,r))|(i??16777215)<<6)}static range(e,n,r,i){let s=(r??16777215)<<6|(i==null?7:Math.min(6,i));return n<e?Jv.create(n,e,48|s):Jv.create(e,n,(n>e?8:0)|s)}static normalized(e,n=0){let r=e[n];e.sort((i,s)=>i.from-s.from),n=e.indexOf(r);for(let i=1;i<e.length;i++){let s=e[i],o=e[i-1];if(s.empty?s.from<=o.to:s.from<o.to){let a=o.from,l=Math.max(s.to,o.to);i<=n&&n--,e.splice(--i,2,s.anchor>s.head?kt.range(l,a):kt.range(a,l))}}return new kt(e,n)}}function hte(t,e){for(let n of t.ranges)if(n.to>e)throw new RangeError("Selection points outside of document")}let AB=0;class Rn{constructor(e,n,r,i,s){this.combine=e,this.compareInput=n,this.compare=r,this.isStatic=i,this.id=AB++,this.default=e([]),this.extensions=typeof s=="function"?s(this):s}get reader(){return this}static define(e={}){return new Rn(e.combine||(n=>n),e.compareInput||((n,r)=>n===r),e.compare||(e.combine?(n,r)=>n===r:EB),!!e.static,e.enables)}of(e){return new g5([],this,0,e)}compute(e,n){if(this.isStatic)throw new Error("Can't compute a static facet");return new g5(e,this,1,n)}computeN(e,n){if(this.isStatic)throw new Error("Can't compute a static facet");return new g5(e,this,2,n)}from(e,n){return n||(n=r=>r),this.compute([e],r=>n(r.field(e)))}}function EB(t,e){return t==e||t.length==e.length&&t.every((n,r)=>n===e[r])}class g5{constructor(e,n,r,i){this.dependencies=e,this.facet=n,this.type=r,this.value=i,this.id=AB++}dynamicSlot(e){var n;let r=this.value,i=this.facet.compareInput,s=this.id,o=e[s]>>1,a=this.type==2,l=!1,h=!1,f=[];for(let p of this.dependencies)p=="doc"?l=!0:p=="selection"?h=!0:(((n=e[p.id])!==null&&n!==void 0?n:1)&1)==0&&f.push(e[p.id]);return{create(p){return p.values[o]=r(p),1},update(p,g){if(l&&g.docChanged||h&&(g.docChanged||g.selection)||vF(p,f)){let b=r(p);if(a?!oU(b,p.values[o],i):!i(b,p.values[o]))return p.values[o]=b,1}return 0},reconfigure:(p,g)=>{let b,x=g.config.address[s];if(x!=null){let k=JT(g,x);if(this.dependencies.every(T=>T instanceof Rn?g.facet(T)===p.facet(T):T instanceof Aa?g.field(T,!1)==p.field(T,!1):!0)||(a?oU(b=r(p),k,i):i(b=r(p),k)))return p.values[o]=k,0}else b=r(p);return p.values[o]=b,1}}}}function oU(t,e,n){if(t.length!=e.length)return!1;for(let r=0;r<t.length;r++)if(!n(t[r],e[r]))return!1;return!0}function vF(t,e){let n=!1;for(let r of e)B3(t,r)&1&&(n=!0);return n}function pxe(t,e,n){let r=n.map(l=>t[l.id]),i=n.map(l=>l.type),s=r.filter(l=>!(l&1)),o=t[e.id]>>1;function a(l){let h=[];for(let f=0;f<r.length;f++){let p=JT(l,r[f]);if(i[f]==2)for(let g of p)h.push(g);else h.push(p)}return e.combine(h)}return{create(l){for(let h of r)B3(l,h);return l.values[o]=a(l),1},update(l,h){if(!vF(l,s))return 0;let f=a(l);return e.compare(f,l.values[o])?0:(l.values[o]=f,1)},reconfigure(l,h){let f=vF(l,r),p=h.config.facets[e.id],g=h.facet(e);if(p&&!f&&EB(n,p))return l.values[o]=g,0;let b=a(l);return e.compare(b,g)?(l.values[o]=g,0):(l.values[o]=b,1)}}}const VE=Rn.define({static:!0});class Aa{constructor(e,n,r,i,s){this.id=e,this.createF=n,this.updateF=r,this.compareF=i,this.spec=s,this.provides=void 0}static define(e){let n=new Aa(AB++,e.create,e.update,e.compare||((r,i)=>r===i),e);return e.provide&&(n.provides=e.provide(n)),n}create(e){let n=e.facet(VE).find(r=>r.field==this);return(n?.create||this.createF)(e)}slot(e){let n=e[this.id]>>1;return{create:r=>(r.values[n]=this.create(r),1),update:(r,i)=>{let s=r.values[n],o=this.updateF(s,i);return this.compareF(s,o)?0:(r.values[n]=o,1)},reconfigure:(r,i)=>{let s=r.facet(VE),o=i.facet(VE),a;return(a=s.find(l=>l.field==this))&&a!=o.find(l=>l.field==this)?(r.values[n]=a.create(r),1):i.config.address[this.id]!=null?(r.values[n]=i.field(this),0):(r.values[n]=this.create(r),1)}}}init(e){return[this,VE.of({field:this,create:e})]}get extension(){return this}}const jv={lowest:4,low:3,default:2,high:1,highest:0};function PS(t){return e=>new fte(e,t)}const b0={highest:PS(jv.highest),high:PS(jv.high),default:PS(jv.default),low:PS(jv.low),lowest:PS(jv.lowest)};class fte{constructor(e,n){this.inner=e,this.prec=n}}class dD{of(e){return new bF(this,e)}reconfigure(e){return dD.reconfigure.of({compartment:this,extension:e})}get(e){return e.config.compartments.get(this)}}class bF{constructor(e,n){this.compartment=e,this.inner=n}}class KT{constructor(e,n,r,i,s,o){for(this.base=e,this.compartments=n,this.dynamicSlots=r,this.address=i,this.staticValues=s,this.facets=o,this.statusTemplate=[];this.statusTemplate.length<r.length;)this.statusTemplate.push(0)}staticFacet(e){let n=this.address[e.id];return n==null?e.default:this.staticValues[n>>1]}static resolve(e,n,r){let i=[],s=Object.create(null),o=new Map;for(let g of mxe(e,n,o))g instanceof Aa?i.push(g):(s[g.facet.id]||(s[g.facet.id]=[])).push(g);let a=Object.create(null),l=[],h=[];for(let g of i)a[g.id]=h.length<<1,h.push(b=>g.slot(b));let f=r?.config.facets;for(let g in s){let b=s[g],x=b[0].facet,k=f&&f[g]||[];if(b.every(T=>T.type==0))if(a[x.id]=l.length<<1|1,EB(k,b))l.push(r.facet(x));else{let T=x.combine(b.map(I=>I.value));l.push(r&&x.compare(T,r.facet(x))?r.facet(x):T)}else{for(let T of b)T.type==0?(a[T.id]=l.length<<1|1,l.push(T.value)):(a[T.id]=h.length<<1,h.push(I=>T.dynamicSlot(I)));a[x.id]=h.length<<1,h.push(T=>pxe(T,x,b))}}let p=h.map(g=>g(a));return new KT(e,o,p,a,l,s)}}function mxe(t,e,n){let r=[[],[],[],[],[]],i=new Map;function s(o,a){let l=i.get(o);if(l!=null){if(l<=a)return;let h=r[l].indexOf(o);h>-1&&r[l].splice(h,1),o instanceof bF&&n.delete(o.compartment)}if(i.set(o,a),Array.isArray(o))for(let h of o)s(h,a);else if(o instanceof bF){if(n.has(o.compartment))throw new RangeError("Duplicate use of compartment in extensions");let h=e.get(o.compartment)||o.inner;n.set(o.compartment,h),s(h,a)}else if(o instanceof fte)s(o.inner,o.prec);else if(o instanceof Aa)r[a].push(o),o.provides&&s(o.provides,a);else if(o instanceof g5)r[a].push(o),o.facet.extensions&&s(o.facet.extensions,jv.default);else{let h=o.extension;if(!h)throw new Error(`Unrecognized extension value in extension set (${o}). This sometimes happens because multiple instances of @codemirror/state are loaded, breaking instanceof checks.`);s(h,a)}}return s(t,jv.default),r.reduce((o,a)=>o.concat(a))}function B3(t,e){if(e&1)return 2;let n=e>>1,r=t.status[n];if(r==4)throw new Error("Cyclic dependency between fields and/or facets");if(r&2)return r;t.status[n]=4;let i=t.computeSlot(t,t.config.dynamicSlots[n]);return t.status[n]=2|i}function JT(t,e){return e&1?t.config.staticValues[e>>1]:t.values[e>>1]}const dte=Rn.define(),_F=Rn.define({combine:t=>t.some(e=>e),static:!0}),pte=Rn.define({combine:t=>t.length?t[0]:void 0,static:!0}),mte=Rn.define(),gte=Rn.define(),yte=Rn.define(),vte=Rn.define({combine:t=>t.length?t[0]:!1});class _0{constructor(e,n){this.type=e,this.value=n}static define(){return new gxe}}class gxe{of(e){return new _0(this,e)}}class yxe{constructor(e){this.map=e}of(e){return new Yr(this,e)}}class Yr{constructor(e,n){this.type=e,this.value=n}map(e){let n=this.type.map(this.value,e);return n===void 0?void 0:n==this.value?this:new Yr(this.type,n)}is(e){return this.type==e}static define(e={}){return new yxe(e.map||(n=>n))}static mapEffects(e,n){if(!e.length)return e;let r=[];for(let i of e){let s=i.map(n);s&&r.push(s)}return r}}Yr.reconfigure=Yr.define();Yr.appendConfig=Yr.define();class Sa{constructor(e,n,r,i,s,o){this.startState=e,this.changes=n,this.selection=r,this.effects=i,this.annotations=s,this.scrollIntoView=o,this._doc=null,this._state=null,r&&hte(r,n.newLength),s.some(a=>a.type==Sa.time)||(this.annotations=s.concat(Sa.time.of(Date.now())))}static create(e,n,r,i,s,o){return new Sa(e,n,r,i,s,o)}get newDoc(){return this._doc||(this._doc=this.changes.apply(this.startState.doc))}get newSelection(){return this.selection||this.startState.selection.map(this.changes)}get state(){return this._state||this.startState.applyTransaction(this),this._state}annotation(e){for(let n of this.annotations)if(n.type==e)return n.value}get docChanged(){return!this.changes.empty}get reconfigured(){return this.startState.config!=this.state.config}isUserEvent(e){let n=this.annotation(Sa.userEvent);return!!(n&&(n==e||n.length>e.length&&n.slice(0,e.length)==e&&n[e.length]=="."))}}Sa.time=_0.define();Sa.userEvent=_0.define();Sa.addToHistory=_0.define();Sa.remote=_0.define();function vxe(t,e){let n=[];for(let r=0,i=0;;){let s,o;if(r<t.length&&(i==e.length||e[i]>=t[r]))s=t[r++],o=t[r++];else if(i<e.length)s=e[i++],o=e[i++];else return n;!n.length||n[n.length-1]<s?n.push(s,o):n[n.length-1]<o&&(n[n.length-1]=o)}}function bte(t,e,n){var r;let i,s,o;return n?(i=e.changes,s=Ba.empty(e.changes.length),o=t.changes.compose(e.changes)):(i=e.changes.map(t.changes),s=t.changes.mapDesc(e.changes,!0),o=t.changes.compose(i)),{changes:o,selection:e.selection?e.selection.map(s):(r=t.selection)===null||r===void 0?void 0:r.map(i),effects:Yr.mapEffects(t.effects,i).concat(Yr.mapEffects(e.effects,s)),annotations:t.annotations.length?t.annotations.concat(e.annotations):e.annotations,scrollIntoView:t.scrollIntoView||e.scrollIntoView}}function xF(t,e,n){let r=e.selection,i=vw(e.annotations);return e.userEvent&&(i=i.concat(Sa.userEvent.of(e.userEvent))),{changes:e.changes instanceof Ba?e.changes:Ba.of(e.changes||[],n,t.facet(pte)),selection:r&&(r instanceof kt?r:kt.single(r.anchor,r.head)),effects:vw(e.effects),annotations:i,scrollIntoView:!!e.scrollIntoView}}function _te(t,e,n){let r=xF(t,e.length?e[0]:{},t.doc.length);e.length&&e[0].filter===!1&&(n=!1);for(let s=1;s<e.length;s++){e[s].filter===!1&&(n=!1);let o=!!e[s].sequential;r=bte(r,xF(t,e[s],o?r.changes.newLength:t.doc.length),o)}let i=Sa.create(t,r.changes,r.selection,r.effects,r.annotations,r.scrollIntoView);return _xe(n?bxe(i):i)}function bxe(t){let e=t.startState,n=!0;for(let i of e.facet(mte)){let s=i(t);if(s===!1){n=!1;break}Array.isArray(s)&&(n=n===!0?s:vxe(n,s))}if(n!==!0){let i,s;if(n===!1)s=t.changes.invertedDesc,i=Ba.empty(e.doc.length);else{let o=t.changes.filter(n);i=o.changes,s=o.filtered.mapDesc(o.changes).invertedDesc}t=Sa.create(e,i,t.selection&&t.selection.map(s),Yr.mapEffects(t.effects,s),t.annotations,t.scrollIntoView)}let r=e.facet(gte);for(let i=r.length-1;i>=0;i--){let s=r[i](t);s instanceof Sa?t=s:Array.isArray(s)&&s.length==1&&s[0]instanceof Sa?t=s[0]:t=_te(e,vw(s),!1)}return t}function _xe(t){let e=t.startState,n=e.facet(yte),r=t;for(let i=n.length-1;i>=0;i--){let s=n[i](t);s&&Object.keys(s).length&&(r=bte(r,xF(e,s,t.changes.newLength),!0))}return r==t?t:Sa.create(e,t.changes,t.selection,r.effects,r.annotations,r.scrollIntoView)}const xxe=[];function vw(t){return t==null?xxe:Array.isArray(t)?t:[t]}var So=(function(t){return t[t.Word=0]="Word",t[t.Space=1]="Space",t[t.Other=2]="Other",t})(So||(So={}));const wxe=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;let wF;try{wF=new RegExp("[\\p{Alphabetic}\\p{Number}_]","u")}catch{}function Oxe(t){if(wF)return wF.test(t);for(let e=0;e<t.length;e++){let n=t[e];if(/\w/.test(n)||n>"Â"&&(n.toUpperCase()!=n.toLowerCase()||wxe.test(n)))return!0}return!1}function Sxe(t){return e=>{if(!/\S/.test(e))return So.Space;if(Oxe(e))return So.Word;for(let n=0;n<t.length;n++)if(e.indexOf(t[n])>-1)return So.Word;return So.Other}}class Xi{constructor(e,n,r,i,s,o){this.config=e,this.doc=n,this.selection=r,this.values=i,this.status=e.statusTemplate.slice(),this.computeSlot=s,o&&(o._state=this);for(let a=0;a<this.config.dynamicSlots.length;a++)B3(this,a<<1);this.computeSlot=null}field(e,n=!0){let r=this.config.address[e.id];if(r==null){if(n)throw new RangeError("Field is not present in this state");return}return B3(this,r),JT(this,r)}update(...e){return _te(this,e,!0)}applyTransaction(e){let n=this.config,{base:r,compartments:i}=n;for(let a of e.effects)a.is(dD.reconfigure)?(n&&(i=new Map,n.compartments.forEach((l,h)=>i.set(h,l)),n=null),i.set(a.value.compartment,a.value.extension)):a.is(Yr.reconfigure)?(n=null,r=a.value):a.is(Yr.appendConfig)&&(n=null,r=vw(r).concat(a.value));let s;n?s=e.startState.values.slice():(n=KT.resolve(r,i,this),s=new Xi(n,this.doc,this.selection,n.dynamicSlots.map(()=>null),(l,h)=>h.reconfigure(l,this),null).values);let o=e.startState.facet(_F)?e.newSelection:e.newSelection.asSingle();new Xi(n,e.newDoc,o,s,(a,l)=>l.update(a,e),e)}replaceSelection(e){return typeof e=="string"&&(e=this.toText(e)),this.changeByRange(n=>({changes:{from:n.from,to:n.to,insert:e},range:kt.cursor(n.from+e.length)}))}changeByRange(e){let n=this.selection,r=e(n.ranges[0]),i=this.changes(r.changes),s=[r.range],o=vw(r.effects);for(let a=1;a<n.ranges.length;a++){let l=e(n.ranges[a]),h=this.changes(l.changes),f=h.map(i);for(let g=0;g<a;g++)s[g]=s[g].map(f);let p=i.mapDesc(h,!0);s.push(l.range.map(p)),i=i.compose(f),o=Yr.mapEffects(o,f).concat(Yr.mapEffects(vw(l.effects),p))}return{changes:i,selection:kt.create(s,n.mainIndex),effects:o}}changes(e=[]){return e instanceof Ba?e:Ba.of(e,this.doc.length,this.facet(Xi.lineSeparator))}toText(e){return ts.of(e.split(this.facet(Xi.lineSeparator)||mF))}sliceDoc(e=0,n=this.doc.length){return this.doc.sliceString(e,n,this.lineBreak)}facet(e){let n=this.config.address[e.id];return n==null?e.default:(B3(this,n),JT(this,n))}toJSON(e){let n={doc:this.sliceDoc(),selection:this.selection.toJSON()};if(e)for(let r in e){let i=e[r];i instanceof Aa&&this.config.address[i.id]!=null&&(n[r]=i.spec.toJSON(this.field(e[r]),this))}return n}static fromJSON(e,n={},r){if(!e||typeof e.doc!="string")throw new RangeError("Invalid JSON representation for EditorState");let i=[];if(r){for(let s in r)if(Object.prototype.hasOwnProperty.call(e,s)){let o=r[s],a=e[s];i.push(o.init(l=>o.spec.fromJSON(a,l)))}}return Xi.create({doc:e.doc,selection:kt.fromJSON(e.selection),extensions:n.extensions?i.concat([n.extensions]):i})}static create(e={}){let n=KT.resolve(e.extensions||[],new Map),r=e.doc instanceof ts?e.doc:ts.of((e.doc||"").split(n.staticFacet(Xi.lineSeparator)||mF)),i=e.selection?e.selection instanceof kt?e.selection:kt.single(e.selection.anchor,e.selection.head):kt.single(0);return hte(i,r.length),n.staticFacet(_F)||(i=i.asSingle()),new Xi(n,r,i,n.dynamicSlots.map(()=>null),(s,o)=>o.create(s),null)}get tabSize(){return this.facet(Xi.tabSize)}get lineBreak(){return this.facet(Xi.lineSeparator)||`
`}get readOnly(){return this.facet(vte)}phrase(e,...n){for(let r of this.facet(Xi.phrases))if(Object.prototype.hasOwnProperty.call(r,e)){e=r[e];break}return n.length&&(e=e.replace(/\$(\$|\d*)/g,(r,i)=>{if(i=="$")return"$";let s=+(i||1);return!s||s>n.length?r:n[s-1]})),e}languageDataAt(e,n,r=-1){let i=[];for(let s of this.facet(dte))for(let o of s(this,n,r))Object.prototype.hasOwnProperty.call(o,e)&&i.push(o[e]);return i}charCategorizer(e){return Sxe(this.languageDataAt("wordChars",e).join(""))}wordAt(e){let{text:n,from:r,length:i}=this.doc.lineAt(e),s=this.charCategorizer(e),o=e-r,a=e-r;for(;o>0;){let l=bl(n,o,!1);if(s(n.slice(l,o))!=So.Word)break;o=l}for(;a<i;){let l=bl(n,a);if(s(n.slice(a,l))!=So.Word)break;a=l}return o==a?null:kt.range(o+r,a+r)}}Xi.allowMultipleSelections=_F;Xi.tabSize=Rn.define({combine:t=>t.length?t[0]:4});Xi.lineSeparator=pte;Xi.readOnly=vte;Xi.phrases=Rn.define({compare(t,e){let n=Object.keys(t),r=Object.keys(e);return n.length==r.length&&n.every(i=>t[i]==e[i])}});Xi.languageData=dte;Xi.changeFilter=mte;Xi.transactionFilter=gte;Xi.transactionExtender=yte;dD.reconfigure=Yr.define();function x0(t,e,n={}){let r={};for(let i of t)for(let s of Object.keys(i)){let o=i[s],a=r[s];if(a===void 0)r[s]=o;else if(!(a===o||o===void 0))if(Object.hasOwnProperty.call(n,s))r[s]=n[s](a,o);else throw new Error("Config merge conflict for field "+s)}for(let i in e)r[i]===void 0&&(r[i]=e[i]);return r}class Bb{eq(e){return this==e}range(e,n=e){return OF.create(e,n,this)}}Bb.prototype.startSide=Bb.prototype.endSide=0;Bb.prototype.point=!1;Bb.prototype.mapMode=yl.TrackDel;let OF=class xte{constructor(e,n,r){this.from=e,this.to=n,this.value=r}static create(e,n,r){return new xte(e,n,r)}};function SF(t,e){return t.from-e.from||t.value.startSide-e.value.startSide}class TB{constructor(e,n,r,i){this.from=e,this.to=n,this.value=r,this.maxPoint=i}get length(){return this.to[this.to.length-1]}findIndex(e,n,r,i=0){let s=r?this.to:this.from;for(let o=i,a=s.length;;){if(o==a)return o;let l=o+a>>1,h=s[l]-e||(r?this.value[l].endSide:this.value[l].startSide)-n;if(l==o)return h>=0?o:a;h>=0?a=l:o=l+1}}between(e,n,r,i){for(let s=this.findIndex(n,-1e9,!0),o=this.findIndex(r,1e9,!1,s);s<o;s++)if(i(this.from[s]+e,this.to[s]+e,this.value[s])===!1)return!1}map(e,n){let r=[],i=[],s=[],o=-1,a=-1;for(let l=0;l<this.value.length;l++){let h=this.value[l],f=this.from[l]+e,p=this.to[l]+e,g,b;if(f==p){let x=n.mapPos(f,h.startSide,h.mapMode);if(x==null||(g=b=x,h.startSide!=h.endSide&&(b=n.mapPos(f,h.endSide),b<g)))continue}else if(g=n.mapPos(f,h.startSide),b=n.mapPos(p,h.endSide),g>b||g==b&&h.startSide>0&&h.endSide<=0)continue;(b-g||h.endSide-h.startSide)<0||(o<0&&(o=g),h.point&&(a=Math.max(a,b-g)),r.push(h),i.push(g-o),s.push(b-o))}return{mapped:r.length?new TB(i,s,r,a):null,pos:o}}}class as{constructor(e,n,r,i){this.chunkPos=e,this.chunk=n,this.nextLayer=r,this.maxPoint=i}static create(e,n,r,i){return new as(e,n,r,i)}get length(){let e=this.chunk.length-1;return e<0?0:Math.max(this.chunkEnd(e),this.nextLayer.length)}get size(){if(this.isEmpty)return 0;let e=this.nextLayer.size;for(let n of this.chunk)e+=n.value.length;return e}chunkEnd(e){return this.chunkPos[e]+this.chunk[e].length}update(e){let{add:n=[],sort:r=!1,filterFrom:i=0,filterTo:s=this.length}=e,o=e.filter;if(n.length==0&&!o)return this;if(r&&(n=n.slice().sort(SF)),this.isEmpty)return n.length?as.of(n):this;let a=new wte(this,null,-1).goto(0),l=0,h=[],f=new h1;for(;a.value||l<n.length;)if(l<n.length&&(a.from-n[l].from||a.startSide-n[l].value.startSide)>=0){let p=n[l++];f.addInner(p.from,p.to,p.value)||h.push(p)}else a.rangeIndex==1&&a.chunkIndex<this.chunk.length&&(l==n.length||this.chunkEnd(a.chunkIndex)<n[l].from)&&(!o||i>this.chunkEnd(a.chunkIndex)||s<this.chunkPos[a.chunkIndex])&&f.addChunk(this.chunkPos[a.chunkIndex],this.chunk[a.chunkIndex])?a.nextChunk():((!o||i>a.to||s<a.from||o(a.from,a.to,a.value))&&(f.addInner(a.from,a.to,a.value)||h.push(OF.create(a.from,a.to,a.value))),a.next());return f.finishInner(this.nextLayer.isEmpty&&!h.length?as.empty:this.nextLayer.update({add:h,filter:o,filterFrom:i,filterTo:s}))}map(e){if(e.empty||this.isEmpty)return this;let n=[],r=[],i=-1;for(let o=0;o<this.chunk.length;o++){let a=this.chunkPos[o],l=this.chunk[o],h=e.touchesRange(a,a+l.length);if(h===!1)i=Math.max(i,l.maxPoint),n.push(l),r.push(e.mapPos(a));else if(h===!0){let{mapped:f,pos:p}=l.map(a,e);f&&(i=Math.max(i,f.maxPoint),n.push(f),r.push(p))}}let s=this.nextLayer.map(e);return n.length==0?s:new as(r,n,s||as.empty,i)}between(e,n,r){if(!this.isEmpty){for(let i=0;i<this.chunk.length;i++){let s=this.chunkPos[i],o=this.chunk[i];if(n>=s&&e<=s+o.length&&o.between(s,e-s,n-s,r)===!1)return}this.nextLayer.between(e,n,r)}}iter(e=0){return vk.from([this]).goto(e)}get isEmpty(){return this.nextLayer==this}static iter(e,n=0){return vk.from(e).goto(n)}static compare(e,n,r,i,s=-1){let o=e.filter(p=>p.maxPoint>0||!p.isEmpty&&p.maxPoint>=s),a=n.filter(p=>p.maxPoint>0||!p.isEmpty&&p.maxPoint>=s),l=aU(o,a,r),h=new DS(o,l,s),f=new DS(a,l,s);r.iterGaps((p,g,b)=>lU(h,p,f,g,b,i)),r.empty&&r.length==0&&lU(h,0,f,0,0,i)}static eq(e,n,r=0,i){i==null&&(i=999999999);let s=e.filter(f=>!f.isEmpty&&n.indexOf(f)<0),o=n.filter(f=>!f.isEmpty&&e.indexOf(f)<0);if(s.length!=o.length)return!1;if(!s.length)return!0;let a=aU(s,o),l=new DS(s,a,0).goto(r),h=new DS(o,a,0).goto(r);for(;;){if(l.to!=h.to||!kF(l.active,h.active)||l.point&&(!h.point||!l.point.eq(h.point)))return!1;if(l.to>i)return!0;l.next(),h.next()}}static spans(e,n,r,i,s=-1){let o=new DS(e,null,s).goto(n),a=n,l=o.openStart;for(;;){let h=Math.min(o.to,r);if(o.point){let f=o.activeForPoint(o.to),p=o.pointFrom<n?f.length+1:o.point.startSide<0?f.length:Math.min(f.length,l);i.point(a,h,o.point,f,p,o.pointRank),l=Math.min(o.openEnd(h),f.length)}else h>a&&(i.span(a,h,o.active,l),l=o.openEnd(h));if(o.to>r)return l+(o.point&&o.to>r?1:0);a=o.to,o.next()}}static of(e,n=!1){let r=new h1;for(let i of e instanceof OF?[e]:n?kxe(e):e)r.add(i.from,i.to,i.value);return r.finish()}static join(e){if(!e.length)return as.empty;let n=e[e.length-1];for(let r=e.length-2;r>=0;r--)for(let i=e[r];i!=as.empty;i=i.nextLayer)n=new as(i.chunkPos,i.chunk,n,Math.max(i.maxPoint,n.maxPoint));return n}}as.empty=new as([],[],null,-1);function kxe(t){if(t.length>1)for(let e=t[0],n=1;n<t.length;n++){let r=t[n];if(SF(e,r)>0)return t.slice().sort(SF);e=r}return t}as.empty.nextLayer=as.empty;class h1{finishChunk(e){this.chunks.push(new TB(this.from,this.to,this.value,this.maxPoint)),this.chunkPos.push(this.chunkStart),this.chunkStart=-1,this.setMaxPoint=Math.max(this.setMaxPoint,this.maxPoint),this.maxPoint=-1,e&&(this.from=[],this.to=[],this.value=[])}constructor(){this.chunks=[],this.chunkPos=[],this.chunkStart=-1,this.last=null,this.lastFrom=-1e9,this.lastTo=-1e9,this.from=[],this.to=[],this.value=[],this.maxPoint=-1,this.setMaxPoint=-1,this.nextLayer=null}add(e,n,r){this.addInner(e,n,r)||(this.nextLayer||(this.nextLayer=new h1)).add(e,n,r)}addInner(e,n,r){let i=e-this.lastTo||r.startSide-this.last.endSide;if(i<=0&&(e-this.lastFrom||r.startSide-this.last.startSide)<0)throw new Error("Ranges must be added sorted by `from` position and `startSide`");return i<0?!1:(this.from.length==250&&this.finishChunk(!0),this.chunkStart<0&&(this.chunkStart=e),this.from.push(e-this.chunkStart),this.to.push(n-this.chunkStart),this.last=r,this.lastFrom=e,this.lastTo=n,this.value.push(r),r.point&&(this.maxPoint=Math.max(this.maxPoint,n-e)),!0)}addChunk(e,n){if((e-this.lastTo||n.value[0].startSide-this.last.endSide)<0)return!1;this.from.length&&this.finishChunk(!0),this.setMaxPoint=Math.max(this.setMaxPoint,n.maxPoint),this.chunks.push(n),this.chunkPos.push(e);let r=n.value.length-1;return this.last=n.value[r],this.lastFrom=n.from[r]+e,this.lastTo=n.to[r]+e,!0}finish(){return this.finishInner(as.empty)}finishInner(e){if(this.from.length&&this.finishChunk(!1),this.chunks.length==0)return e;let n=as.create(this.chunkPos,this.chunks,this.nextLayer?this.nextLayer.finishInner(e):e,this.setMaxPoint);return this.from=null,n}}function aU(t,e,n){let r=new Map;for(let s of t)for(let o=0;o<s.chunk.length;o++)s.chunk[o].maxPoint<=0&&r.set(s.chunk[o],s.chunkPos[o]);let i=new Set;for(let s of e)for(let o=0;o<s.chunk.length;o++){let a=r.get(s.chunk[o]);a!=null&&(n?n.mapPos(a):a)==s.chunkPos[o]&&!n?.touchesRange(a,a+s.chunk[o].length)&&i.add(s.chunk[o])}return i}class wte{constructor(e,n,r,i=0){this.layer=e,this.skip=n,this.minPoint=r,this.rank=i}get startSide(){return this.value?this.value.startSide:0}get endSide(){return this.value?this.value.endSide:0}goto(e,n=-1e9){return this.chunkIndex=this.rangeIndex=0,this.gotoInner(e,n,!1),this}gotoInner(e,n,r){for(;this.chunkIndex<this.layer.chunk.length;){let i=this.layer.chunk[this.chunkIndex];if(!(this.skip&&this.skip.has(i)||this.layer.chunkEnd(this.chunkIndex)<e||i.maxPoint<this.minPoint))break;this.chunkIndex++,r=!1}if(this.chunkIndex<this.layer.chunk.length){let i=this.layer.chunk[this.chunkIndex].findIndex(e-this.layer.chunkPos[this.chunkIndex],n,!0);(!r||this.rangeIndex<i)&&this.setRangeIndex(i)}this.next()}forward(e,n){(this.to-e||this.endSide-n)<0&&this.gotoInner(e,n,!0)}next(){for(;;)if(this.chunkIndex==this.layer.chunk.length){this.from=this.to=1e9,this.value=null;break}else{let e=this.layer.chunkPos[this.chunkIndex],n=this.layer.chunk[this.chunkIndex],r=e+n.from[this.rangeIndex];if(this.from=r,this.to=e+n.to[this.rangeIndex],this.value=n.value[this.rangeIndex],this.setRangeIndex(this.rangeIndex+1),this.minPoint<0||this.value.point&&this.to-this.from>=this.minPoint)break}}setRangeIndex(e){if(e==this.layer.chunk[this.chunkIndex].value.length){if(this.chunkIndex++,this.skip)for(;this.chunkIndex<this.layer.chunk.length&&this.skip.has(this.layer.chunk[this.chunkIndex]);)this.chunkIndex++;this.rangeIndex=0}else this.rangeIndex=e}nextChunk(){this.chunkIndex++,this.rangeIndex=0,this.next()}compare(e){return this.from-e.from||this.startSide-e.startSide||this.rank-e.rank||this.to-e.to||this.endSide-e.endSide}}class vk{constructor(e){this.heap=e}static from(e,n=null,r=-1){let i=[];for(let s=0;s<e.length;s++)for(let o=e[s];!o.isEmpty;o=o.nextLayer)o.maxPoint>=r&&i.push(new wte(o,n,r,s));return i.length==1?i[0]:new vk(i)}get startSide(){return this.value?this.value.startSide:0}goto(e,n=-1e9){for(let r of this.heap)r.goto(e,n);for(let r=this.heap.length>>1;r>=0;r--)vM(this.heap,r);return this.next(),this}forward(e,n){for(let r of this.heap)r.forward(e,n);for(let r=this.heap.length>>1;r>=0;r--)vM(this.heap,r);(this.to-e||this.value.endSide-n)<0&&this.next()}next(){if(this.heap.length==0)this.from=this.to=1e9,this.value=null,this.rank=-1;else{let e=this.heap[0];this.from=e.from,this.to=e.to,this.value=e.value,this.rank=e.rank,e.value&&e.next(),vM(this.heap,0)}}}function vM(t,e){for(let n=t[e];;){let r=(e<<1)+1;if(r>=t.length)break;let i=t[r];if(r+1<t.length&&i.compare(t[r+1])>=0&&(i=t[r+1],r++),n.compare(i)<0)break;t[r]=n,t[e]=i,e=r}}class DS{constructor(e,n,r){this.minPoint=r,this.active=[],this.activeTo=[],this.activeRank=[],this.minActive=-1,this.point=null,this.pointFrom=0,this.pointRank=0,this.to=-1e9,this.endSide=0,this.openStart=-1,this.cursor=vk.from(e,n,r)}goto(e,n=-1e9){return this.cursor.goto(e,n),this.active.length=this.activeTo.length=this.activeRank.length=0,this.minActive=-1,this.to=e,this.endSide=n,this.openStart=-1,this.next(),this}forward(e,n){for(;this.minActive>-1&&(this.activeTo[this.minActive]-e||this.active[this.minActive].endSide-n)<0;)this.removeActive(this.minActive);this.cursor.forward(e,n)}removeActive(e){qE(this.active,e),qE(this.activeTo,e),qE(this.activeRank,e),this.minActive=uU(this.active,this.activeTo)}addActive(e){let n=0,{value:r,to:i,rank:s}=this.cursor;for(;n<this.activeRank.length&&(s-this.activeRank[n]||i-this.activeTo[n])>0;)n++;ZE(this.active,n,r),ZE(this.activeTo,n,i),ZE(this.activeRank,n,s),e&&ZE(e,n,this.cursor.from),this.minActive=uU(this.active,this.activeTo)}next(){let e=this.to,n=this.point;this.point=null;let r=this.openStart<0?[]:null;for(;;){let i=this.minActive;if(i>-1&&(this.activeTo[i]-this.cursor.from||this.active[i].endSide-this.cursor.startSide)<0){if(this.activeTo[i]>e){this.to=this.activeTo[i],this.endSide=this.active[i].endSide;break}this.removeActive(i),r&&qE(r,i)}else if(this.cursor.value)if(this.cursor.from>e){this.to=this.cursor.from,this.endSide=this.cursor.startSide;break}else{let s=this.cursor.value;if(!s.point)this.addActive(r),this.cursor.next();else if(n&&this.cursor.to==this.to&&this.cursor.from<this.cursor.to)this.cursor.next();else{this.point=s,this.pointFrom=this.cursor.from,this.pointRank=this.cursor.rank,this.to=this.cursor.to,this.endSide=s.endSide,this.cursor.next(),this.forward(this.to,this.endSide);break}}else{this.to=this.endSide=1e9;break}}if(r){this.openStart=0;for(let i=r.length-1;i>=0&&r[i]<e;i--)this.openStart++}}activeForPoint(e){if(!this.active.length)return this.active;let n=[];for(let r=this.active.length-1;r>=0&&!(this.activeRank[r]<this.pointRank);r--)(this.activeTo[r]>e||this.activeTo[r]==e&&this.active[r].endSide>=this.point.endSide)&&n.push(this.active[r]);return n.reverse()}openEnd(e){let n=0;for(let r=this.activeTo.length-1;r>=0&&this.activeTo[r]>e;r--)n++;return n}}function lU(t,e,n,r,i,s){t.goto(e),n.goto(r);let o=r+i,a=r,l=r-e;for(;;){let h=t.to+l-n.to,f=h||t.endSide-n.endSide,p=f<0?t.to+l:n.to,g=Math.min(p,o);if(t.point||n.point?t.point&&n.point&&(t.point==n.point||t.point.eq(n.point))&&kF(t.activeForPoint(t.to),n.activeForPoint(n.to))||s.comparePoint(a,g,t.point,n.point):g>a&&!kF(t.active,n.active)&&s.compareRange(a,g,t.active,n.active),p>o)break;(h||t.openEnd!=n.openEnd)&&s.boundChange&&s.boundChange(p),a=p,f<=0&&t.next(),f>=0&&n.next()}}function kF(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!=e[n]&&!t[n].eq(e[n]))return!1;return!0}function qE(t,e){for(let n=e,r=t.length-1;n<r;n++)t[n]=t[n+1];t.pop()}function ZE(t,e,n){for(let r=t.length-1;r>=e;r--)t[r+1]=t[r];t[e]=n}function uU(t,e){let n=-1,r=1e9;for(let i=0;i<e.length;i++)(e[i]-r||t[i].endSide-t[n].endSide)<0&&(n=i,r=e[i]);return n}function Ad(t,e,n=t.length){let r=0;for(let i=0;i<n&&i<t.length;)t.charCodeAt(i)==9?(r+=e-r%e,i++):(r++,i=bl(t,i));return r}function CF(t,e,n,r){for(let i=0,s=0;;){if(s>=e)return i;if(i==t.length)break;s+=t.charCodeAt(i)==9?n-s%n:1,i=bl(t,i)}return r===!0?-1:t.length}const AF="Í¼",cU=typeof Symbol>"u"?"__"+AF:Symbol.for(AF),EF=typeof Symbol>"u"?"__styleSet"+Math.floor(Math.random()*1e8):Symbol("styleSet"),hU=typeof globalThis<"u"?globalThis:typeof window<"u"?window:{};class f1{constructor(e,n){this.rules=[];let{finish:r}=n||{};function i(o){return/^@/.test(o)?[o]:o.split(/,\s*/)}function s(o,a,l,h){let f=[],p=/^@(\w+)\b/.exec(o[0]),g=p&&p[1]=="keyframes";if(p&&a==null)return l.push(o[0]+";");for(let b in a){let x=a[b];if(/&/.test(b))s(b.split(/,\s*/).map(k=>o.map(T=>k.replace(/&/,T))).reduce((k,T)=>k.concat(T)),x,l);else if(x&&typeof x=="object"){if(!p)throw new RangeError("The value of a property ("+b+") should be a primitive value.");s(i(b),x,f,g)}else x!=null&&f.push(b.replace(/_.*/,"").replace(/[A-Z]/g,k=>"-"+k.toLowerCase())+": "+x+";")}(f.length||g)&&l.push((r&&!p&&!h?o.map(r):o).join(", ")+" {"+f.join(" ")+"}")}for(let o in e)s(i(o),e[o],this.rules)}getRules(){return this.rules.join(`
`)}static newName(){let e=hU[cU]||1;return hU[cU]=e+1,AF+e.toString(36)}static mount(e,n,r){let i=e[EF],s=r&&r.nonce;i?s&&i.setNonce(s):i=new Cxe(e,s),i.mount(Array.isArray(n)?n:[n],e)}}let fU=new Map;class Cxe{constructor(e,n){let r=e.ownerDocument||e,i=r.defaultView;if(!e.head&&e.adoptedStyleSheets&&i.CSSStyleSheet){let s=fU.get(r);if(s)return e[EF]=s;this.sheet=new i.CSSStyleSheet,fU.set(r,this)}else this.styleTag=r.createElement("style"),n&&this.styleTag.setAttribute("nonce",n);this.modules=[],e[EF]=this}mount(e,n){let r=this.sheet,i=0,s=0;for(let o=0;o<e.length;o++){let a=e[o],l=this.modules.indexOf(a);if(l<s&&l>-1&&(this.modules.splice(l,1),s--,l=-1),l==-1){if(this.modules.splice(s++,0,a),r)for(let h=0;h<a.rules.length;h++)r.insertRule(a.rules[h],i++)}else{for(;s<l;)i+=this.modules[s++].rules.length;i+=a.rules.length,s++}}if(r)n.adoptedStyleSheets.indexOf(this.sheet)<0&&(n.adoptedStyleSheets=[this.sheet,...n.adoptedStyleSheets]);else{let o="";for(let l=0;l<this.modules.length;l++)o+=this.modules[l].getRules()+`
`;this.styleTag.textContent=o;let a=n.head||n;this.styleTag.parentNode!=a&&a.insertBefore(this.styleTag,a.firstChild)}}setNonce(e){this.styleTag&&this.styleTag.getAttribute("nonce")!=e&&this.styleTag.setAttribute("nonce",e)}}var d1={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},bk={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},Axe=typeof navigator<"u"&&/Mac/.test(navigator.platform),Exe=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var gl=0;gl<10;gl++)d1[48+gl]=d1[96+gl]=String(gl);for(var gl=1;gl<=24;gl++)d1[gl+111]="F"+gl;for(var gl=65;gl<=90;gl++)d1[gl]=String.fromCharCode(gl+32),bk[gl]=String.fromCharCode(gl);for(var bM in d1)bk.hasOwnProperty(bM)||(bk[bM]=d1[bM]);function Txe(t){var e=Axe&&t.metaKey&&t.shiftKey&&!t.ctrlKey&&!t.altKey||Exe&&t.shiftKey&&t.key&&t.key.length==1||t.key=="Unidentified",n=!e&&t.key||(t.shiftKey?bk:d1)[t.keyCode]||t.key||"Unidentified";return n=="Esc"&&(n="Escape"),n=="Del"&&(n="Delete"),n=="Left"&&(n="ArrowLeft"),n=="Up"&&(n="ArrowUp"),n=="Right"&&(n="ArrowRight"),n=="Down"&&(n="ArrowDown"),n}function Xs(){var t=arguments[0];typeof t=="string"&&(t=document.createElement(t));var e=1,n=arguments[1];if(n&&typeof n=="object"&&n.nodeType==null&&!Array.isArray(n)){for(var r in n)if(Object.prototype.hasOwnProperty.call(n,r)){var i=n[r];typeof i=="string"?t.setAttribute(r,i):i!=null&&(t[r]=i)}e++}for(;e<arguments.length;e++)Ote(t,arguments[e]);return t}function Ote(t,e){if(typeof e=="string")t.appendChild(document.createTextNode(e));else if(e!=null)if(e.nodeType!=null)t.appendChild(e);else if(Array.isArray(e))for(var n=0;n<e.length;n++)Ote(t,e[n]);else throw new RangeError("Unsupported child node: "+e)}let Au=typeof navigator<"u"?navigator:{userAgent:"",vendor:"",platform:""},TF=typeof document<"u"?document:{documentElement:{style:{}}};const PF=/Edge\/(\d+)/.exec(Au.userAgent),Ste=/MSIE \d/.test(Au.userAgent),DF=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(Au.userAgent),pD=!!(Ste||DF||PF),dU=!pD&&/gecko\/(\d+)/i.test(Au.userAgent),_M=!pD&&/Chrome\/(\d+)/.exec(Au.userAgent),Pxe="webkitFontSmoothing"in TF.documentElement.style,IF=!pD&&/Apple Computer/.test(Au.vendor),pU=IF&&(/Mobile\/\w+/.test(Au.userAgent)||Au.maxTouchPoints>2);var wn={mac:pU||/Mac/.test(Au.platform),windows:/Win/.test(Au.platform),linux:/Linux|X11/.test(Au.platform),ie:pD,ie_version:Ste?TF.documentMode||6:DF?+DF[1]:PF?+PF[1]:0,gecko:dU,gecko_version:dU?+(/Firefox\/(\d+)/.exec(Au.userAgent)||[0,0])[1]:0,chrome:!!_M,chrome_version:_M?+_M[1]:0,ios:pU,android:/Android\b/.test(Au.userAgent),webkit_version:Pxe?+(/\bAppleWebKit\/(\d+)/.exec(Au.userAgent)||[0,0])[1]:0,safari:IF,safari_version:IF?+(/\bVersion\/(\d+(\.\d+)?)/.exec(Au.userAgent)||[0,0])[1]:0,tabSize:TF.documentElement.style.tabSize!=null?"tab-size":"-moz-tab-size"};function _k(t){let e;return t.nodeType==11?e=t.getSelection?t:t.ownerDocument:e=t,e.getSelection()}function MF(t,e){return e?t==e||t.contains(e.nodeType!=1?e.parentNode:e):!1}function y5(t,e){if(!e.anchorNode)return!1;try{return MF(t,e.anchorNode)}catch{return!1}}function xk(t){return t.nodeType==3?zb(t,0,t.nodeValue.length).getClientRects():t.nodeType==1?t.getClientRects():[]}function N3(t,e,n,r){return n?mU(t,e,n,r,-1)||mU(t,e,n,r,1):!1}function Nb(t){for(var e=0;;e++)if(t=t.previousSibling,!t)return e}function e6(t){return t.nodeType==1&&/^(DIV|P|LI|UL|OL|BLOCKQUOTE|DD|DT|H\d|SECTION|PRE)$/.test(t.nodeName)}function mU(t,e,n,r,i){for(;;){if(t==n&&e==r)return!0;if(e==(i<0?0:fm(t))){if(t.nodeName=="DIV")return!1;let s=t.parentNode;if(!s||s.nodeType!=1)return!1;e=Nb(t)+(i<0?0:1),t=s}else if(t.nodeType==1){if(t=t.childNodes[e+(i<0?-1:0)],t.nodeType==1&&t.contentEditable=="false")return!1;e=i<0?fm(t):0}else return!1}}function fm(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function mD(t,e){let n=e?t.left:t.right;return{left:n,right:n,top:t.top,bottom:t.bottom}}function Dxe(t){let e=t.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:t.innerWidth,top:0,bottom:t.innerHeight}}function kte(t,e){let n=e.width/t.offsetWidth,r=e.height/t.offsetHeight;return(n>.995&&n<1.005||!isFinite(n)||Math.abs(e.width-t.offsetWidth)<1)&&(n=1),(r>.995&&r<1.005||!isFinite(r)||Math.abs(e.height-t.offsetHeight)<1)&&(r=1),{scaleX:n,scaleY:r}}function Ixe(t,e,n,r,i,s,o,a){let l=t.ownerDocument,h=l.defaultView||window;for(let f=t,p=!1;f&&!p;)if(f.nodeType==1){let g,b=f==l.body,x=1,k=1;if(b)g=Dxe(h);else{if(/^(fixed|sticky)$/.test(getComputedStyle(f).position)&&(p=!0),f.scrollHeight<=f.clientHeight&&f.scrollWidth<=f.clientWidth){f=f.assignedSlot||f.parentNode;continue}let M=f.getBoundingClientRect();({scaleX:x,scaleY:k}=kte(f,M)),g={left:M.left,right:M.left+f.clientWidth*x,top:M.top,bottom:M.top+f.clientHeight*k}}let T=0,I=0;if(i=="nearest")e.top<g.top?(I=e.top-(g.top+o),n>0&&e.bottom>g.bottom+I&&(I=e.bottom-g.bottom+o)):e.bottom>g.bottom&&(I=e.bottom-g.bottom+o,n<0&&e.top-I<g.top&&(I=e.top-(g.top+o)));else{let M=e.bottom-e.top,B=g.bottom-g.top;I=(i=="center"&&M<=B?e.top+M/2-B/2:i=="start"||i=="center"&&n<0?e.top-o:e.bottom-B+o)-g.top}if(r=="nearest"?e.left<g.left?(T=e.left-(g.left+s),n>0&&e.right>g.right+T&&(T=e.right-g.right+s)):e.right>g.right&&(T=e.right-g.right+s,n<0&&e.left<g.left+T&&(T=e.left-(g.left+s))):T=(r=="center"?e.left+(e.right-e.left)/2-(g.right-g.left)/2:r=="start"==a?e.left-s:e.right-(g.right-g.left)+s)-g.left,T||I)if(b)h.scrollBy(T,I);else{let M=0,B=0;if(I){let j=f.scrollTop;f.scrollTop+=I/k,B=(f.scrollTop-j)*k}if(T){let j=f.scrollLeft;f.scrollLeft+=T/x,M=(f.scrollLeft-j)*x}e={left:e.left-M,top:e.top-B,right:e.right-M,bottom:e.bottom-B},M&&Math.abs(M-T)<1&&(r="nearest"),B&&Math.abs(B-I)<1&&(i="nearest")}if(b)break;(e.top<g.top||e.bottom>g.bottom||e.left<g.left||e.right>g.right)&&(e={left:Math.max(e.left,g.left),right:Math.min(e.right,g.right),top:Math.max(e.top,g.top),bottom:Math.min(e.bottom,g.bottom)}),f=f.assignedSlot||f.parentNode}else if(f.nodeType==11)f=f.host;else break}function Mxe(t){let e=t.ownerDocument,n,r;for(let i=t.parentNode;i&&!(i==e.body||n&&r);)if(i.nodeType==1)!r&&i.scrollHeight>i.clientHeight&&(r=i),!n&&i.scrollWidth>i.clientWidth&&(n=i),i=i.assignedSlot||i.parentNode;else if(i.nodeType==11)i=i.host;else break;return{x:n,y:r}}class Rxe{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}eq(e){return this.anchorNode==e.anchorNode&&this.anchorOffset==e.anchorOffset&&this.focusNode==e.focusNode&&this.focusOffset==e.focusOffset}setRange(e){let{anchorNode:n,focusNode:r}=e;this.set(n,Math.min(e.anchorOffset,n?fm(n):0),r,Math.min(e.focusOffset,r?fm(r):0))}set(e,n,r,i){this.anchorNode=e,this.anchorOffset=n,this.focusNode=r,this.focusOffset=i}}let Lv=null;wn.safari&&wn.safari_version>=26&&(Lv=!1);function Cte(t){if(t.setActive)return t.setActive();if(Lv)return t.focus(Lv);let e=[];for(let n=t;n&&(e.push(n,n.scrollTop,n.scrollLeft),n!=n.ownerDocument);n=n.parentNode);if(t.focus(Lv==null?{get preventScroll(){return Lv={preventScroll:!0},!0}}:void 0),!Lv){Lv=!1;for(let n=0;n<e.length;){let r=e[n++],i=e[n++],s=e[n++];r.scrollTop!=i&&(r.scrollTop=i),r.scrollLeft!=s&&(r.scrollLeft=s)}}}let gU;function zb(t,e,n=e){let r=gU||(gU=document.createRange());return r.setEnd(t,n),r.setStart(t,e),r}function bw(t,e,n,r){let i={key:e,code:e,keyCode:n,which:n,cancelable:!0};r&&({altKey:i.altKey,ctrlKey:i.ctrlKey,shiftKey:i.shiftKey,metaKey:i.metaKey}=r);let s=new KeyboardEvent("keydown",i);s.synthetic=!0,t.dispatchEvent(s);let o=new KeyboardEvent("keyup",i);return o.synthetic=!0,t.dispatchEvent(o),s.defaultPrevented||o.defaultPrevented}function Fxe(t){for(;t;){if(t&&(t.nodeType==9||t.nodeType==11&&t.host))return t;t=t.assignedSlot||t.parentNode}return null}function Ate(t){for(;t.attributes.length;)t.removeAttributeNode(t.attributes[0])}function Lxe(t,e){let n=e.focusNode,r=e.focusOffset;if(!n||e.anchorNode!=n||e.anchorOffset!=r)return!1;for(r=Math.min(r,fm(n));;)if(r){if(n.nodeType!=1)return!1;let i=n.childNodes[r-1];i.contentEditable=="false"?r--:(n=i,r=fm(n))}else{if(n==t)return!0;r=Nb(n),n=n.parentNode}}function Ete(t){return t.scrollTop>Math.max(1,t.scrollHeight-t.clientHeight-4)}function Tte(t,e){for(let n=t,r=e;;){if(n.nodeType==3&&r>0)return{node:n,offset:r};if(n.nodeType==1&&r>0){if(n.contentEditable=="false")return null;n=n.childNodes[r-1],r=fm(n)}else if(n.parentNode&&!e6(n))r=Nb(n),n=n.parentNode;else return null}}function Pte(t,e){for(let n=t,r=e;;){if(n.nodeType==3&&r<n.nodeValue.length)return{node:n,offset:r};if(n.nodeType==1&&r<n.childNodes.length){if(n.contentEditable=="false")return null;n=n.childNodes[r],r=0}else if(n.parentNode&&!e6(n))r=Nb(n)+1,n=n.parentNode;else return null}}class Wl{constructor(e,n,r=!0){this.node=e,this.offset=n,this.precise=r}static before(e,n){return new Wl(e.parentNode,Nb(e),n)}static after(e,n){return new Wl(e.parentNode,Nb(e)+1,n)}}const PB=[];class Ns{constructor(){this.parent=null,this.dom=null,this.flags=2}get overrideDOMText(){return null}get posAtStart(){return this.parent?this.parent.posBefore(this):0}get posAtEnd(){return this.posAtStart+this.length}posBefore(e){let n=this.posAtStart;for(let r of this.children){if(r==e)return n;n+=r.length+r.breakAfter}throw new RangeError("Invalid child in posBefore")}posAfter(e){return this.posBefore(e)+e.length}sync(e,n){if(this.flags&2){let r=this.dom,i=null,s;for(let o of this.children){if(o.flags&7){if(!o.dom&&(s=i?i.nextSibling:r.firstChild)){let a=Ns.get(s);(!a||!a.parent&&a.canReuseDOM(o))&&o.reuseDOM(s)}o.sync(e,n),o.flags&=-8}if(s=i?i.nextSibling:r.firstChild,n&&!n.written&&n.node==r&&s!=o.dom&&(n.written=!0),o.dom.parentNode==r)for(;s&&s!=o.dom;)s=yU(s);else r.insertBefore(o.dom,s);i=o.dom}for(s=i?i.nextSibling:r.firstChild,s&&n&&n.node==r&&(n.written=!0);s;)s=yU(s)}else if(this.flags&1)for(let r of this.children)r.flags&7&&(r.sync(e,n),r.flags&=-8)}reuseDOM(e){}localPosFromDOM(e,n){let r;if(e==this.dom)r=this.dom.childNodes[n];else{let i=fm(e)==0?0:n==0?-1:1;for(;;){let s=e.parentNode;if(s==this.dom)break;i==0&&s.firstChild!=s.lastChild&&(e==s.firstChild?i=-1:i=1),e=s}i<0?r=e:r=e.nextSibling}if(r==this.dom.firstChild)return 0;for(;r&&!Ns.get(r);)r=r.nextSibling;if(!r)return this.length;for(let i=0,s=0;;i++){let o=this.children[i];if(o.dom==r)return s;s+=o.length+o.breakAfter}}domBoundsAround(e,n,r=0){let i=-1,s=-1,o=-1,a=-1;for(let l=0,h=r,f=r;l<this.children.length;l++){let p=this.children[l],g=h+p.length;if(h<e&&g>n)return p.domBoundsAround(e,n,h);if(g>=e&&i==-1&&(i=l,s=h),h>n&&p.dom.parentNode==this.dom){o=l,a=f;break}f=g,h=g+p.breakAfter}return{from:s,to:a<0?r+this.length:a,startDOM:(i?this.children[i-1].dom.nextSibling:null)||this.dom.firstChild,endDOM:o<this.children.length&&o>=0?this.children[o].dom:null}}markDirty(e=!1){this.flags|=2,this.markParentsDirty(e)}markParentsDirty(e){for(let n=this.parent;n;n=n.parent){if(e&&(n.flags|=2),n.flags&1)return;n.flags|=1,e=!1}}setParent(e){this.parent!=e&&(this.parent=e,this.flags&7&&this.markParentsDirty(!0))}setDOM(e){this.dom!=e&&(this.dom&&(this.dom.cmView=null),this.dom=e,e.cmView=this)}get rootView(){for(let e=this;;){let n=e.parent;if(!n)return e;e=n}}replaceChildren(e,n,r=PB){this.markDirty();for(let i=e;i<n;i++){let s=this.children[i];s.parent==this&&r.indexOf(s)<0&&s.destroy()}r.length<250?this.children.splice(e,n-e,...r):this.children=[].concat(this.children.slice(0,e),r,this.children.slice(n));for(let i=0;i<r.length;i++)r[i].setParent(this)}ignoreMutation(e){return!1}ignoreEvent(e){return!1}childCursor(e=this.length){return new Dte(this.children,e,this.children.length)}childPos(e,n=1){return this.childCursor().findPos(e,n)}toString(){let e=this.constructor.name.replace("View","");return e+(this.children.length?"("+this.children.join()+")":this.length?"["+(e=="Text"?this.text:this.length)+"]":"")+(this.breakAfter?"#":"")}static get(e){return e.cmView}get isEditable(){return!0}get isWidget(){return!1}get isHidden(){return!1}merge(e,n,r,i,s,o){return!1}become(e){return!1}canReuseDOM(e){return e.constructor==this.constructor&&!((this.flags|e.flags)&8)}getSide(){return 0}destroy(){for(let e of this.children)e.parent==this&&e.destroy();this.parent=null}}Ns.prototype.breakAfter=0;function yU(t){let e=t.nextSibling;return t.parentNode.removeChild(t),e}class Dte{constructor(e,n,r){this.children=e,this.pos=n,this.i=r,this.off=0}findPos(e,n=1){for(;;){if(e>this.pos||e==this.pos&&(n>0||this.i==0||this.children[this.i-1].breakAfter))return this.off=e-this.pos,this;let r=this.children[--this.i];this.pos-=r.length+r.breakAfter}}}function Ite(t,e,n,r,i,s,o,a,l){let{children:h}=t,f=h.length?h[e]:null,p=s.length?s[s.length-1]:null,g=p?p.breakAfter:o;if(!(e==r&&f&&!o&&!g&&s.length<2&&f.merge(n,i,s.length?p:null,n==0,a,l))){if(r<h.length){let b=h[r];b&&(i<b.length||b.breakAfter&&p?.breakAfter)?(e==r&&(b=b.split(i),i=0),!g&&p&&b.merge(0,i,p,!0,0,l)?s[s.length-1]=b:((i||b.children.length&&!b.children[0].length)&&b.merge(0,i,null,!1,0,l),s.push(b))):b?.breakAfter&&(p?p.breakAfter=1:o=1),r++}for(f&&(f.breakAfter=o,n>0&&(!o&&s.length&&f.merge(n,f.length,s[0],!1,a,0)?f.breakAfter=s.shift().breakAfter:(n<f.length||f.children.length&&f.children[f.children.length-1].length==0)&&f.merge(n,f.length,null,!1,a,0),e++));e<r&&s.length;)if(h[r-1].become(s[s.length-1]))r--,s.pop(),l=s.length?0:a;else if(h[e].become(s[0]))e++,s.shift(),a=s.length?0:l;else break;!s.length&&e&&r<h.length&&!h[e-1].breakAfter&&h[r].merge(0,0,h[e-1],!1,a,l)&&e--,(e<r||s.length)&&t.replaceChildren(e,r,s)}}function Mte(t,e,n,r,i,s){let o=t.childCursor(),{i:a,off:l}=o.findPos(n,1),{i:h,off:f}=o.findPos(e,-1),p=e-n;for(let g of r)p+=g.length;t.length+=p,Ite(t,h,f,a,l,r,0,i,s)}const $xe=256;class Ed extends Ns{constructor(e){super(),this.text=e}get length(){return this.text.length}createDOM(e){this.setDOM(e||document.createTextNode(this.text))}sync(e,n){this.dom||this.createDOM(),this.dom.nodeValue!=this.text&&(n&&n.node==this.dom&&(n.written=!0),this.dom.nodeValue=this.text)}reuseDOM(e){e.nodeType==3&&this.createDOM(e)}merge(e,n,r){return this.flags&8||r&&(!(r instanceof Ed)||this.length-(n-e)+r.length>$xe||r.flags&8)?!1:(this.text=this.text.slice(0,e)+(r?r.text:"")+this.text.slice(n),this.markDirty(),!0)}split(e){let n=new Ed(this.text.slice(e));return this.text=this.text.slice(0,e),this.markDirty(),n.flags|=this.flags&8,n}localPosFromDOM(e,n){return e==this.dom?n:n?this.text.length:0}domAtPos(e){return new Wl(this.dom,e)}domBoundsAround(e,n,r){return{from:r,to:r+this.length,startDOM:this.dom,endDOM:this.dom.nextSibling}}coordsAt(e,n){return Bxe(this.dom,e,n)}}class l0 extends Ns{constructor(e,n=[],r=0){super(),this.mark=e,this.children=n,this.length=r;for(let i of n)i.setParent(this)}setAttrs(e){if(Ate(e),this.mark.class&&(e.className=this.mark.class),this.mark.attrs)for(let n in this.mark.attrs)e.setAttribute(n,this.mark.attrs[n]);return e}canReuseDOM(e){return super.canReuseDOM(e)&&!((this.flags|e.flags)&8)}reuseDOM(e){e.nodeName==this.mark.tagName.toUpperCase()&&(this.setDOM(e),this.flags|=6)}sync(e,n){this.dom?this.flags&4&&this.setAttrs(this.dom):this.setDOM(this.setAttrs(document.createElement(this.mark.tagName))),super.sync(e,n)}merge(e,n,r,i,s,o){return r&&(!(r instanceof l0&&r.mark.eq(this.mark))||e&&s<=0||n<this.length&&o<=0)?!1:(Mte(this,e,n,r?r.children.slice():[],s-1,o-1),this.markDirty(),!0)}split(e){let n=[],r=0,i=-1,s=0;for(let a of this.children){let l=r+a.length;l>e&&n.push(r<e?a.split(e-r):a),i<0&&r>=e&&(i=s),r=l,s++}let o=this.length-e;return this.length=e,i>-1&&(this.children.length=i,this.markDirty()),new l0(this.mark,n,o)}domAtPos(e){return Rte(this,e)}coordsAt(e,n){return Lte(this,e,n)}}function Bxe(t,e,n){let r=t.nodeValue.length;e>r&&(e=r);let i=e,s=e,o=0;e==0&&n<0||e==r&&n>=0?wn.chrome||wn.gecko||(e?(i--,o=1):s<r&&(s++,o=-1)):n<0?i--:s<r&&s++;let a=zb(t,i,s).getClientRects();if(!a.length)return null;let l=a[(o?o<0:n>=0)?0:a.length-1];return wn.safari&&!o&&l.width==0&&(l=Array.prototype.find.call(a,h=>h.width)||l),o?mD(l,o<0):l||null}class zg extends Ns{static create(e,n,r){return new zg(e,n,r)}constructor(e,n,r){super(),this.widget=e,this.length=n,this.side=r,this.prevWidget=null}split(e){let n=zg.create(this.widget,this.length-e,this.side);return this.length-=e,n}sync(e){(!this.dom||!this.widget.updateDOM(this.dom,e))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.widget.editable||(this.dom.contentEditable="false"))}getSide(){return this.side}merge(e,n,r,i,s,o){return r&&(!(r instanceof zg)||!this.widget.compare(r.widget)||e>0&&s<=0||n<this.length&&o<=0)?!1:(this.length=e+(r?r.length:0)+(this.length-n),!0)}become(e){return e instanceof zg&&e.side==this.side&&this.widget.constructor==e.widget.constructor?(this.widget.compare(e.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get overrideDOMText(){if(this.length==0)return ts.empty;let e=this;for(;e.parent;)e=e.parent;let{view:n}=e,r=n&&n.state.doc,i=this.posAtStart;return r?r.slice(i,i+this.length):ts.empty}domAtPos(e){return(this.length?e==0:this.side>0)?Wl.before(this.dom):Wl.after(this.dom,e==this.length)}domBoundsAround(){return null}coordsAt(e,n){let r=this.widget.coordsAt(this.dom,e,n);if(r)return r;let i=this.dom.getClientRects(),s=null;if(!i.length)return null;let o=this.side?this.side<0:e>0;for(let a=o?i.length-1:0;s=i[a],!(e>0?a==0:a==i.length-1||s.top<s.bottom);a+=o?-1:1);return mD(s,!o)}get isEditable(){return!1}get isWidget(){return!0}get isHidden(){return this.widget.isHidden}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}}class o2 extends Ns{constructor(e){super(),this.side=e}get length(){return 0}merge(){return!1}become(e){return e instanceof o2&&e.side==this.side}split(){return new o2(this.side)}sync(){if(!this.dom){let e=document.createElement("img");e.className="cm-widgetBuffer",e.setAttribute("aria-hidden","true"),this.setDOM(e)}}getSide(){return this.side}domAtPos(e){return this.side>0?Wl.before(this.dom):Wl.after(this.dom)}localPosFromDOM(){return 0}domBoundsAround(){return null}coordsAt(e){return this.dom.getBoundingClientRect()}get overrideDOMText(){return ts.empty}get isHidden(){return!0}}Ed.prototype.children=zg.prototype.children=o2.prototype.children=PB;function Rte(t,e){let n=t.dom,{children:r}=t,i=0;for(let s=0;i<r.length;i++){let o=r[i],a=s+o.length;if(!(a==s&&o.getSide()<=0)){if(e>s&&e<a&&o.dom.parentNode==n)return o.domAtPos(e-s);if(e<=s)break;s=a}}for(let s=i;s>0;s--){let o=r[s-1];if(o.dom.parentNode==n)return o.domAtPos(o.length)}for(let s=i;s<r.length;s++){let o=r[s];if(o.dom.parentNode==n)return o.domAtPos(0)}return new Wl(n,0)}function Fte(t,e,n){let r,{children:i}=t;n>0&&e instanceof l0&&i.length&&(r=i[i.length-1])instanceof l0&&r.mark.eq(e.mark)?Fte(r,e.children[0],n-1):(i.push(e),e.setParent(t)),t.length+=e.length}function Lte(t,e,n){let r=null,i=-1,s=null,o=-1;function a(h,f){for(let p=0,g=0;p<h.children.length&&g<=f;p++){let b=h.children[p],x=g+b.length;x>=f&&(b.children.length?a(b,f-g):(!s||s.isHidden&&(n>0||zxe(s,b)))&&(x>f||g==x&&b.getSide()>0)?(s=b,o=f-g):(g<f||g==x&&b.getSide()<0&&!b.isHidden)&&(r=b,i=f-g)),g=x}}a(t,e);let l=(n<0?r:s)||r||s;return l?l.coordsAt(Math.max(0,l==r?i:o),n):Nxe(t)}function Nxe(t){let e=t.dom.lastChild;if(!e)return t.dom.getBoundingClientRect();let n=xk(e);return n[n.length-1]||null}function zxe(t,e){let n=t.coordsAt(0,1),r=e.coordsAt(0,1);return n&&r&&r.top<n.bottom}function RF(t,e){for(let n in t)n=="class"&&e.class?e.class+=" "+t.class:n=="style"&&e.style?e.style+=";"+t.style:e[n]=t[n];return e}const vU=Object.create(null);function t6(t,e,n){if(t==e)return!0;t||(t=vU),e||(e=vU);let r=Object.keys(t),i=Object.keys(e);if(r.length-(n&&r.indexOf(n)>-1?1:0)!=i.length-(n&&i.indexOf(n)>-1?1:0))return!1;for(let s of r)if(s!=n&&(i.indexOf(s)==-1||t[s]!==e[s]))return!1;return!0}function FF(t,e,n){let r=!1;if(e)for(let i in e)n&&i in n||(r=!0,i=="style"?t.style.cssText="":t.removeAttribute(i));if(n)for(let i in n)e&&e[i]==n[i]||(r=!0,i=="style"?t.style.cssText=n[i]:t.setAttribute(i,n[i]));return r}function Qxe(t){let e=Object.create(null);for(let n=0;n<t.attributes.length;n++){let r=t.attributes[n];e[r.name]=r.value}return e}class a_{eq(e){return!1}updateDOM(e,n){return!1}compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}get estimatedHeight(){return-1}get lineBreaks(){return 0}ignoreEvent(e){return!0}coordsAt(e,n,r){return null}get isHidden(){return!1}get editable(){return!1}destroy(e){}}var Fu=(function(t){return t[t.Text=0]="Text",t[t.WidgetBefore=1]="WidgetBefore",t[t.WidgetAfter=2]="WidgetAfter",t[t.WidgetRange=3]="WidgetRange",t})(Fu||(Fu={}));class Sr extends Bb{constructor(e,n,r,i){super(),this.startSide=e,this.endSide=n,this.widget=r,this.spec=i}get heightRelevant(){return!1}static mark(e){return new DC(e)}static widget(e){let n=Math.max(-1e4,Math.min(1e4,e.side||0)),r=!!e.block;return n+=r&&!e.inlineOrder?n>0?3e8:-4e8:n>0?1e8:-1e8,new p1(e,n,n,r,e.widget||null,!1)}static replace(e){let n=!!e.block,r,i;if(e.isBlockGap)r=-5e8,i=4e8;else{let{start:s,end:o}=$te(e,n);r=(s?n?-3e8:-1:5e8)-1,i=(o?n?2e8:1:-6e8)+1}return new p1(e,r,i,n,e.widget||null,!0)}static line(e){return new IC(e)}static set(e,n=!1){return as.of(e,n)}hasHeight(){return this.widget?this.widget.estimatedHeight>-1:!1}}Sr.none=as.empty;class DC extends Sr{constructor(e){let{start:n,end:r}=$te(e);super(n?-1:5e8,r?1:-6e8,null,e),this.tagName=e.tagName||"span",this.class=e.class||"",this.attrs=e.attributes||null}eq(e){var n,r;return this==e||e instanceof DC&&this.tagName==e.tagName&&(this.class||((n=this.attrs)===null||n===void 0?void 0:n.class))==(e.class||((r=e.attrs)===null||r===void 0?void 0:r.class))&&t6(this.attrs,e.attrs,"class")}range(e,n=e){if(e>=n)throw new RangeError("Mark decorations may not be empty");return super.range(e,n)}}DC.prototype.point=!1;class IC extends Sr{constructor(e){super(-2e8,-2e8,null,e)}eq(e){return e instanceof IC&&this.spec.class==e.spec.class&&t6(this.spec.attributes,e.spec.attributes)}range(e,n=e){if(n!=e)throw new RangeError("Line decoration ranges must be zero-length");return super.range(e,n)}}IC.prototype.mapMode=yl.TrackBefore;IC.prototype.point=!0;class p1 extends Sr{constructor(e,n,r,i,s,o){super(n,r,s,e),this.block=i,this.isReplace=o,this.mapMode=i?n<=0?yl.TrackBefore:yl.TrackAfter:yl.TrackDel}get type(){return this.startSide!=this.endSide?Fu.WidgetRange:this.startSide<=0?Fu.WidgetBefore:Fu.WidgetAfter}get heightRelevant(){return this.block||!!this.widget&&(this.widget.estimatedHeight>=5||this.widget.lineBreaks>0)}eq(e){return e instanceof p1&&jxe(this.widget,e.widget)&&this.block==e.block&&this.startSide==e.startSide&&this.endSide==e.endSide}range(e,n=e){if(this.isReplace&&(e>n||e==n&&this.startSide>0&&this.endSide<=0))throw new RangeError("Invalid range for replacement decoration");if(!this.isReplace&&n!=e)throw new RangeError("Widget decorations can only have zero-length ranges");return super.range(e,n)}}p1.prototype.point=!0;function $te(t,e=!1){let{inclusiveStart:n,inclusiveEnd:r}=t;return n==null&&(n=t.inclusive),r==null&&(r=t.inclusive),{start:n??e,end:r??e}}function jxe(t,e){return t==e||!!(t&&e&&t.compare(e))}function v5(t,e,n,r=0){let i=n.length-1;i>=0&&n[i]+r>=t?n[i]=Math.max(n[i],e):n.push(t,e)}class wa extends Ns{constructor(){super(...arguments),this.children=[],this.length=0,this.prevAttrs=void 0,this.attrs=null,this.breakAfter=0}merge(e,n,r,i,s,o){if(r){if(!(r instanceof wa))return!1;this.dom||r.transferDOM(this)}return i&&this.setDeco(r?r.attrs:null),Mte(this,e,n,r?r.children.slice():[],s,o),!0}split(e){let n=new wa;if(n.breakAfter=this.breakAfter,this.length==0)return n;let{i:r,off:i}=this.childPos(e);i&&(n.append(this.children[r].split(i),0),this.children[r].merge(i,this.children[r].length,null,!1,0,0),r++);for(let s=r;s<this.children.length;s++)n.append(this.children[s],0);for(;r>0&&this.children[r-1].length==0;)this.children[--r].destroy();return this.children.length=r,this.markDirty(),this.length=e,n}transferDOM(e){this.dom&&(this.markDirty(),e.setDOM(this.dom),e.prevAttrs=this.prevAttrs===void 0?this.attrs:this.prevAttrs,this.prevAttrs=void 0,this.dom=null)}setDeco(e){t6(this.attrs,e)||(this.dom&&(this.prevAttrs=this.attrs,this.markDirty()),this.attrs=e)}append(e,n){Fte(this,e,n)}addLineDeco(e){let n=e.spec.attributes,r=e.spec.class;n&&(this.attrs=RF(n,this.attrs||{})),r&&(this.attrs=RF({class:r},this.attrs||{}))}domAtPos(e){return Rte(this,e)}reuseDOM(e){e.nodeName=="DIV"&&(this.setDOM(e),this.flags|=6)}sync(e,n){var r;this.dom?this.flags&4&&(Ate(this.dom),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0):(this.setDOM(document.createElement("div")),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0),this.prevAttrs!==void 0&&(FF(this.dom,this.prevAttrs,this.attrs),this.dom.classList.add("cm-line"),this.prevAttrs=void 0),super.sync(e,n);let i=this.dom.lastChild;for(;i&&Ns.get(i)instanceof l0;)i=i.lastChild;if(!i||!this.length||i.nodeName!="BR"&&((r=Ns.get(i))===null||r===void 0?void 0:r.isEditable)==!1&&(!wn.ios||!this.children.some(s=>s instanceof Ed))){let s=document.createElement("BR");s.cmIgnore=!0,this.dom.appendChild(s)}}measureTextSize(){if(this.children.length==0||this.length>20)return null;let e=0,n;for(let r of this.children){if(!(r instanceof Ed)||/[^ -~]/.test(r.text))return null;let i=xk(r.dom);if(i.length!=1)return null;e+=i[0].width,n=i[0].height}return e?{lineHeight:this.dom.getBoundingClientRect().height,charWidth:e/this.length,textHeight:n}:null}coordsAt(e,n){let r=Lte(this,e,n);if(!this.children.length&&r&&this.parent){let{heightOracle:i}=this.parent.view.viewState,s=r.bottom-r.top;if(Math.abs(s-i.lineHeight)<2&&i.textHeight<s){let o=(s-i.textHeight)/2;return{top:r.top+o,bottom:r.bottom-o,left:r.left,right:r.left}}}return r}become(e){return e instanceof wa&&this.children.length==0&&e.children.length==0&&t6(this.attrs,e.attrs)&&this.breakAfter==e.breakAfter}covers(){return!0}static find(e,n){for(let r=0,i=0;r<e.children.length;r++){let s=e.children[r],o=i+s.length;if(o>=n){if(s instanceof wa)return s;if(o>n)break}i=o+s.breakAfter}return null}}class Yg extends Ns{constructor(e,n,r){super(),this.widget=e,this.length=n,this.deco=r,this.breakAfter=0,this.prevWidget=null}merge(e,n,r,i,s,o){return r&&(!(r instanceof Yg)||!this.widget.compare(r.widget)||e>0&&s<=0||n<this.length&&o<=0)?!1:(this.length=e+(r?r.length:0)+(this.length-n),!0)}domAtPos(e){return e==0?Wl.before(this.dom):Wl.after(this.dom,e==this.length)}split(e){let n=this.length-e;this.length=e;let r=new Yg(this.widget,n,this.deco);return r.breakAfter=this.breakAfter,r}get children(){return PB}sync(e){(!this.dom||!this.widget.updateDOM(this.dom,e))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.widget.editable||(this.dom.contentEditable="false"))}get overrideDOMText(){return this.parent?this.parent.view.state.doc.slice(this.posAtStart,this.posAtEnd):ts.empty}domBoundsAround(){return null}become(e){return e instanceof Yg&&e.widget.constructor==this.widget.constructor?(e.widget.compare(this.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,this.deco=e.deco,this.breakAfter=e.breakAfter,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get isEditable(){return!1}get isWidget(){return!0}coordsAt(e,n){let r=this.widget.coordsAt(this.dom,e,n);return r||(this.widget instanceof LF?null:mD(this.dom.getBoundingClientRect(),this.length?e==0:n<=0))}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}covers(e){let{startSide:n,endSide:r}=this.deco;return n==r?!1:e<0?n<0:r>0}}class LF extends a_{constructor(e){super(),this.height=e}toDOM(){let e=document.createElement("div");return e.className="cm-gap",this.updateDOM(e),e}eq(e){return e.height==this.height}updateDOM(e){return e.style.height=this.height+"px",!0}get editable(){return!0}get estimatedHeight(){return this.height}ignoreEvent(){return!1}}class z3{constructor(e,n,r,i){this.doc=e,this.pos=n,this.end=r,this.disallowBlockEffectsFor=i,this.content=[],this.curLine=null,this.breakAtStart=0,this.pendingBuffer=0,this.bufferMarks=[],this.atCursorPos=!0,this.openStart=-1,this.openEnd=-1,this.text="",this.textOff=0,this.cursor=e.iter(),this.skip=n}posCovered(){if(this.content.length==0)return!this.breakAtStart&&this.doc.lineAt(this.pos).from!=this.pos;let e=this.content[this.content.length-1];return!(e.breakAfter||e instanceof Yg&&e.deco.endSide<0)}getLine(){return this.curLine||(this.content.push(this.curLine=new wa),this.atCursorPos=!0),this.curLine}flushBuffer(e=this.bufferMarks){this.pendingBuffer&&(this.curLine.append(XE(new o2(-1),e),e.length),this.pendingBuffer=0)}addBlockWidget(e){this.flushBuffer(),this.curLine=null,this.content.push(e)}finish(e){this.pendingBuffer&&e<=this.bufferMarks.length?this.flushBuffer():this.pendingBuffer=0,!this.posCovered()&&!(e&&this.content.length&&this.content[this.content.length-1]instanceof Yg)&&this.getLine()}buildText(e,n,r){for(;e>0;){if(this.textOff==this.text.length){let{value:o,lineBreak:a,done:l}=this.cursor.next(this.skip);if(this.skip=0,l)throw new Error("Ran out of text content when drawing inline views");if(a){this.posCovered()||this.getLine(),this.content.length?this.content[this.content.length-1].breakAfter=1:this.breakAtStart=1,this.flushBuffer(),this.curLine=null,this.atCursorPos=!0,e--;continue}else this.text=o,this.textOff=0}let i=Math.min(this.text.length-this.textOff,e),s=Math.min(i,512);this.flushBuffer(n.slice(n.length-r)),this.getLine().append(XE(new Ed(this.text.slice(this.textOff,this.textOff+s)),n),r),this.atCursorPos=!0,this.textOff+=s,e-=s,r=i<=s?0:n.length}}span(e,n,r,i){this.buildText(n-e,r,i),this.pos=n,this.openStart<0&&(this.openStart=i)}point(e,n,r,i,s,o){if(this.disallowBlockEffectsFor[o]&&r instanceof p1){if(r.block)throw new RangeError("Block decorations may not be specified via plugins");if(n>this.doc.lineAt(this.pos).to)throw new RangeError("Decorations that replace line breaks may not be specified via plugins")}let a=n-e;if(r instanceof p1)if(r.block)r.startSide>0&&!this.posCovered()&&this.getLine(),this.addBlockWidget(new Yg(r.widget||a2.block,a,r));else{let l=zg.create(r.widget||a2.inline,a,a?0:r.startSide),h=this.atCursorPos&&!l.isEditable&&s<=i.length&&(e<n||r.startSide>0),f=!l.isEditable&&(e<n||s>i.length||r.startSide<=0),p=this.getLine();this.pendingBuffer==2&&!h&&!l.isEditable&&(this.pendingBuffer=0),this.flushBuffer(i),h&&(p.append(XE(new o2(1),i),s),s=i.length+Math.max(0,s-i.length)),p.append(XE(l,i),s),this.atCursorPos=f,this.pendingBuffer=f?e<n||s>i.length?1:2:0,this.pendingBuffer&&(this.bufferMarks=i.slice())}else this.doc.lineAt(this.pos).from==this.pos&&this.getLine().addLineDeco(r);a&&(this.textOff+a<=this.text.length?this.textOff+=a:(this.skip+=a-(this.text.length-this.textOff),this.text="",this.textOff=0),this.pos=n),this.openStart<0&&(this.openStart=s)}static build(e,n,r,i,s){let o=new z3(e,n,r,s);return o.openEnd=as.spans(i,n,r,o),o.openStart<0&&(o.openStart=o.openEnd),o.finish(o.openEnd),o}}function XE(t,e){for(let n of e)t=new l0(n,[t],t.length);return t}class a2 extends a_{constructor(e){super(),this.tag=e}eq(e){return e.tag==this.tag}toDOM(){return document.createElement(this.tag)}updateDOM(e){return e.nodeName.toLowerCase()==this.tag}get isHidden(){return!0}}a2.inline=new a2("span");a2.block=new a2("div");var vo=(function(t){return t[t.LTR=0]="LTR",t[t.RTL=1]="RTL",t})(vo||(vo={}));const Qb=vo.LTR,DB=vo.RTL;function Bte(t){let e=[];for(let n=0;n<t.length;n++)e.push(1<<+t[n]);return e}const Uxe=Bte("88888888888888888888888888888888888666888888787833333333337888888000000000000000000000000008888880000000000000000000000000088888888888888888888888888888888888887866668888088888663380888308888800000000000000000000000800000000000000000000000000000008"),Vxe=Bte("4444448826627288999999999992222222222222222222222222222222222222222222222229999999999999999999994444444444644222822222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222999999949999999229989999223333333333"),$F=Object.create(null),vp=[];for(let t of["()","[]","{}"]){let e=t.charCodeAt(0),n=t.charCodeAt(1);$F[e]=n,$F[n]=-e}function Nte(t){return t<=247?Uxe[t]:1424<=t&&t<=1524?2:1536<=t&&t<=1785?Vxe[t-1536]:1774<=t&&t<=2220?4:8192<=t&&t<=8204?256:64336<=t&&t<=65023?4:1}const qxe=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\ufb50-\ufdff]/;class Dy{get dir(){return this.level%2?DB:Qb}constructor(e,n,r){this.from=e,this.to=n,this.level=r}side(e,n){return this.dir==n==e?this.to:this.from}forward(e,n){return e==(this.dir==n)}static find(e,n,r,i){let s=-1;for(let o=0;o<e.length;o++){let a=e[o];if(a.from<=n&&a.to>=n){if(a.level==r)return o;(s<0||(i!=0?i<0?a.from<n:a.to>n:e[s].level>a.level))&&(s=o)}}if(s<0)throw new RangeError("Index out of range");return s}}function zte(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++){let r=t[n],i=e[n];if(r.from!=i.from||r.to!=i.to||r.direction!=i.direction||!zte(r.inner,i.inner))return!1}return!0}const Gs=[];function Zxe(t,e,n,r,i){for(let s=0;s<=r.length;s++){let o=s?r[s-1].to:e,a=s<r.length?r[s].from:n,l=s?256:i;for(let h=o,f=l,p=l;h<a;h++){let g=Nte(t.charCodeAt(h));g==512?g=f:g==8&&p==4&&(g=16),Gs[h]=g==4?2:g,g&7&&(p=g),f=g}for(let h=o,f=l,p=l;h<a;h++){let g=Gs[h];if(g==128)h<a-1&&f==Gs[h+1]&&f&24?g=Gs[h]=f:Gs[h]=256;else if(g==64){let b=h+1;for(;b<a&&Gs[b]==64;)b++;let x=h&&f==8||b<n&&Gs[b]==8?p==1?1:8:256;for(let k=h;k<b;k++)Gs[k]=x;h=b-1}else g==8&&p==1&&(Gs[h]=1);f=g,g&7&&(p=g)}}}function Xxe(t,e,n,r,i){let s=i==1?2:1;for(let o=0,a=0,l=0;o<=r.length;o++){let h=o?r[o-1].to:e,f=o<r.length?r[o].from:n;for(let p=h,g,b,x;p<f;p++)if(b=$F[g=t.charCodeAt(p)])if(b<0){for(let k=a-3;k>=0;k-=3)if(vp[k+1]==-b){let T=vp[k+2],I=T&2?i:T&4?T&1?s:i:0;I&&(Gs[p]=Gs[vp[k]]=I),a=k;break}}else{if(vp.length==189)break;vp[a++]=p,vp[a++]=g,vp[a++]=l}else if((x=Gs[p])==2||x==1){let k=x==i;l=k?0:1;for(let T=a-3;T>=0;T-=3){let I=vp[T+2];if(I&2)break;if(k)vp[T+2]|=2;else{if(I&4)break;vp[T+2]|=4}}}}}function Wxe(t,e,n,r){for(let i=0,s=r;i<=n.length;i++){let o=i?n[i-1].to:t,a=i<n.length?n[i].from:e;for(let l=o;l<a;){let h=Gs[l];if(h==256){let f=l+1;for(;;)if(f==a){if(i==n.length)break;f=n[i++].to,a=i<n.length?n[i].from:e}else if(Gs[f]==256)f++;else break;let p=s==1,g=(f<e?Gs[f]:r)==1,b=p==g?p?1:2:r;for(let x=f,k=i,T=k?n[k-1].to:t;x>l;)x==T&&(x=n[--k].from,T=k?n[k-1].to:t),Gs[--x]=b;l=f}else s=h,l++}}}function BF(t,e,n,r,i,s,o){let a=r%2?2:1;if(r%2==i%2)for(let l=e,h=0;l<n;){let f=!0,p=!1;if(h==s.length||l<s[h].from){let k=Gs[l];k!=a&&(f=!1,p=k==16)}let g=!f&&a==1?[]:null,b=f?r:r+1,x=l;e:for(;;)if(h<s.length&&x==s[h].from){if(p)break e;let k=s[h];if(!f)for(let T=k.to,I=h+1;;){if(T==n)break e;if(I<s.length&&s[I].from==T)T=s[I++].to;else{if(Gs[T]==a)break e;break}}if(h++,g)g.push(k);else{k.from>l&&o.push(new Dy(l,k.from,b));let T=k.direction==Qb!=!(b%2);NF(t,T?r+1:r,i,k.inner,k.from,k.to,o),l=k.to}x=k.to}else{if(x==n||(f?Gs[x]!=a:Gs[x]==a))break;x++}g?BF(t,l,x,r+1,i,g,o):l<x&&o.push(new Dy(l,x,b)),l=x}else for(let l=n,h=s.length;l>e;){let f=!0,p=!1;if(!h||l>s[h-1].to){let k=Gs[l-1];k!=a&&(f=!1,p=k==16)}let g=!f&&a==1?[]:null,b=f?r:r+1,x=l;e:for(;;)if(h&&x==s[h-1].to){if(p)break e;let k=s[--h];if(!f)for(let T=k.from,I=h;;){if(T==e)break e;if(I&&s[I-1].to==T)T=s[--I].from;else{if(Gs[T-1]==a)break e;break}}if(g)g.push(k);else{k.to<l&&o.push(new Dy(k.to,l,b));let T=k.direction==Qb!=!(b%2);NF(t,T?r+1:r,i,k.inner,k.from,k.to,o),l=k.from}x=k.from}else{if(x==e||(f?Gs[x-1]!=a:Gs[x-1]==a))break;x--}g?BF(t,x,l,r+1,i,g,o):x<l&&o.push(new Dy(x,l,b)),l=x}}function NF(t,e,n,r,i,s,o){let a=e%2?2:1;Zxe(t,i,s,r,a),Xxe(t,i,s,r,a),Wxe(i,s,r,a),BF(t,i,s,e,n,r,o)}function Gxe(t,e,n){if(!t)return[new Dy(0,0,e==DB?1:0)];if(e==Qb&&!n.length&&!qxe.test(t))return Qte(t.length);if(n.length)for(;t.length>Gs.length;)Gs[Gs.length]=256;let r=[],i=e==Qb?0:1;return NF(t,i,i,n,0,t.length,r),r}function Qte(t){return[new Dy(0,t,0)]}let jte="";function Yxe(t,e,n,r,i){var s;let o=r.head-t.from,a=Dy.find(e,o,(s=r.bidiLevel)!==null&&s!==void 0?s:-1,r.assoc),l=e[a],h=l.side(i,n);if(o==h){let g=a+=i?1:-1;if(g<0||g>=e.length)return null;l=e[a=g],o=l.side(!i,n),h=l.side(i,n)}let f=bl(t.text,o,l.forward(i,n));(f<l.from||f>l.to)&&(f=h),jte=t.text.slice(Math.min(o,f),Math.max(o,f));let p=a==(i?e.length-1:0)?null:e[a+(i?1:-1)];return p&&f==h&&p.level+(i?0:1)<l.level?kt.cursor(p.side(!i,n)+t.from,p.forward(i,n)?1:-1,p.level):kt.cursor(f+t.from,l.forward(i,n)?-1:1,l.level)}function Hxe(t,e,n){for(let r=e;r<n;r++){let i=Nte(t.charCodeAt(r));if(i==1)return Qb;if(i==2||i==4)return DB}return Qb}const Ute=Rn.define(),Vte=Rn.define(),qte=Rn.define(),Zte=Rn.define(),zF=Rn.define(),Xte=Rn.define(),Wte=Rn.define(),IB=Rn.define(),MB=Rn.define(),Gte=Rn.define({combine:t=>t.some(e=>e)}),Yte=Rn.define({combine:t=>t.some(e=>e)}),Hte=Rn.define();class _w{constructor(e,n="nearest",r="nearest",i=5,s=5,o=!1){this.range=e,this.y=n,this.x=r,this.yMargin=i,this.xMargin=s,this.isSnapshot=o}map(e){return e.empty?this:new _w(this.range.map(e),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}clip(e){return this.range.to<=e.doc.length?this:new _w(kt.cursor(e.doc.length),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}}const WE=Yr.define({map:(t,e)=>t.map(e)}),Kte=Yr.define();function Mu(t,e,n){let r=t.facet(Zte);r.length?r[0](e):window.onerror&&window.onerror(String(e),n,void 0,void 0,e)||(n?console.error(n+":",e):console.error(e))}const Lg=Rn.define({combine:t=>t.length?t[0]:!0});let Kxe=0;const Yx=Rn.define({combine(t){return t.filter((e,n)=>{for(let r=0;r<n;r++)if(t[r].plugin==e.plugin)return!1;return!0})}});class Ca{constructor(e,n,r,i,s){this.id=e,this.create=n,this.domEventHandlers=r,this.domEventObservers=i,this.baseExtensions=s(this),this.extension=this.baseExtensions.concat(Yx.of({plugin:this,arg:void 0}))}of(e){return this.baseExtensions.concat(Yx.of({plugin:this,arg:e}))}static define(e,n){const{eventHandlers:r,eventObservers:i,provide:s,decorations:o}=n||{};return new Ca(Kxe++,e,r,i,a=>{let l=[];return o&&l.push(wk.of(h=>{let f=h.plugin(a);return f?o(f):Sr.none})),s&&l.push(s(a)),l})}static fromClass(e,n){return Ca.define((r,i)=>new e(r,i),n)}}class xM{constructor(e){this.spec=e,this.mustUpdate=null,this.value=null}get plugin(){return this.spec&&this.spec.plugin}update(e){if(this.value){if(this.mustUpdate){let n=this.mustUpdate;if(this.mustUpdate=null,this.value.update)try{this.value.update(n)}catch(r){if(Mu(n.state,r,"CodeMirror plugin crashed"),this.value.destroy)try{this.value.destroy()}catch{}this.deactivate()}}}else if(this.spec)try{this.value=this.spec.plugin.create(e,this.spec.arg)}catch(n){Mu(e.state,n,"CodeMirror plugin crashed"),this.deactivate()}return this}destroy(e){var n;if(!((n=this.value)===null||n===void 0)&&n.destroy)try{this.value.destroy()}catch(r){Mu(e.state,r,"CodeMirror plugin crashed")}}deactivate(){this.spec=this.value=null}}const Jte=Rn.define(),RB=Rn.define(),wk=Rn.define(),ene=Rn.define(),MC=Rn.define(),tne=Rn.define();function bU(t,e){let n=t.state.facet(tne);if(!n.length)return n;let r=n.map(s=>s instanceof Function?s(t):s),i=[];return as.spans(r,e.from,e.to,{point(){},span(s,o,a,l){let h=s-e.from,f=o-e.from,p=i;for(let g=a.length-1;g>=0;g--,l--){let b=a[g].spec.bidiIsolate,x;if(b==null&&(b=Hxe(e.text,h,f)),l>0&&p.length&&(x=p[p.length-1]).to==h&&x.direction==b)x.to=f,p=x.inner;else{let k={from:h,to:f,direction:b,inner:[]};p.push(k),p=k.inner}}}}),i}const nne=Rn.define();function FB(t){let e=0,n=0,r=0,i=0;for(let s of t.state.facet(nne)){let o=s(t);o&&(o.left!=null&&(e=Math.max(e,o.left)),o.right!=null&&(n=Math.max(n,o.right)),o.top!=null&&(r=Math.max(r,o.top)),o.bottom!=null&&(i=Math.max(i,o.bottom)))}return{left:e,right:n,top:r,bottom:i}}const g3=Rn.define();class pf{constructor(e,n,r,i){this.fromA=e,this.toA=n,this.fromB=r,this.toB=i}join(e){return new pf(Math.min(this.fromA,e.fromA),Math.max(this.toA,e.toA),Math.min(this.fromB,e.fromB),Math.max(this.toB,e.toB))}addToSet(e){let n=e.length,r=this;for(;n>0;n--){let i=e[n-1];if(!(i.fromA>r.toA)){if(i.toA<r.fromA)break;r=r.join(i),e.splice(n-1,1)}}return e.splice(n,0,r),e}static extendWithRanges(e,n){if(n.length==0)return e;let r=[];for(let i=0,s=0,o=0,a=0;;i++){let l=i==e.length?null:e[i],h=o-a,f=l?l.fromB:1e9;for(;s<n.length&&n[s]<f;){let p=n[s],g=n[s+1],b=Math.max(a,p),x=Math.min(f,g);if(b<=x&&new pf(b+h,x+h,b,x).addToSet(r),g>f)break;s+=2}if(!l)return r;new pf(l.fromA,l.toA,l.fromB,l.toB).addToSet(r),o=l.toA,a=l.toB}}}class n6{constructor(e,n,r){this.view=e,this.state=n,this.transactions=r,this.flags=0,this.startState=e.state,this.changes=Ba.empty(this.startState.doc.length);for(let s of r)this.changes=this.changes.compose(s.changes);let i=[];this.changes.iterChangedRanges((s,o,a,l)=>i.push(new pf(s,o,a,l))),this.changedRanges=i}static create(e,n,r){return new n6(e,n,r)}get viewportChanged(){return(this.flags&4)>0}get viewportMoved(){return(this.flags&8)>0}get heightChanged(){return(this.flags&2)>0}get geometryChanged(){return this.docChanged||(this.flags&18)>0}get focusChanged(){return(this.flags&1)>0}get docChanged(){return!this.changes.empty}get selectionSet(){return this.transactions.some(e=>e.selection)}get empty(){return this.flags==0&&this.transactions.length==0}}class _U extends Ns{get length(){return this.view.state.doc.length}constructor(e){super(),this.view=e,this.decorations=[],this.dynamicDecorationMap=[!1],this.domChanged=null,this.hasComposition=null,this.markedForComposition=new Set,this.editContextFormatting=Sr.none,this.lastCompositionAfterCursor=!1,this.minWidth=0,this.minWidthFrom=0,this.minWidthTo=0,this.impreciseAnchor=null,this.impreciseHead=null,this.forceSelection=!1,this.lastUpdate=Date.now(),this.setDOM(e.contentDOM),this.children=[new wa],this.children[0].setParent(this),this.updateDeco(),this.updateInner([new pf(0,0,0,e.state.doc.length)],0,null)}update(e){var n;let r=e.changedRanges;this.minWidth>0&&r.length&&(r.every(({fromA:h,toA:f})=>f<this.minWidthFrom||h>this.minWidthTo)?(this.minWidthFrom=e.changes.mapPos(this.minWidthFrom,1),this.minWidthTo=e.changes.mapPos(this.minWidthTo,1)):this.minWidth=this.minWidthFrom=this.minWidthTo=0),this.updateEditContextFormatting(e);let i=-1;this.view.inputState.composing>=0&&!this.view.observer.editContext&&(!((n=this.domChanged)===null||n===void 0)&&n.newSel?i=this.domChanged.newSel.head:!swe(e.changes,this.hasComposition)&&!e.selectionSet&&(i=e.state.selection.main.head));let s=i>-1?ewe(this.view,e.changes,i):null;if(this.domChanged=null,this.hasComposition){this.markedForComposition.clear();let{from:h,to:f}=this.hasComposition;r=new pf(h,f,e.changes.mapPos(h,-1),e.changes.mapPos(f,1)).addToSet(r.slice())}this.hasComposition=s?{from:s.range.fromB,to:s.range.toB}:null,(wn.ie||wn.chrome)&&!s&&e&&e.state.doc.lines!=e.startState.doc.lines&&(this.forceSelection=!0);let o=this.decorations,a=this.updateDeco(),l=rwe(o,a,e.changes);return r=pf.extendWithRanges(r,l),!(this.flags&7)&&r.length==0?!1:(this.updateInner(r,e.startState.doc.length,s),e.transactions.length&&(this.lastUpdate=Date.now()),!0)}updateInner(e,n,r){this.view.viewState.mustMeasureContent=!0,this.updateChildren(e,n,r);let{observer:i}=this.view;i.ignore(()=>{this.dom.style.height=this.view.viewState.contentHeight/this.view.scaleY+"px",this.dom.style.flexBasis=this.minWidth?this.minWidth+"px":"";let o=wn.chrome||wn.ios?{node:i.selectionRange.focusNode,written:!1}:void 0;this.sync(this.view,o),this.flags&=-8,o&&(o.written||i.selectionRange.focusNode!=o.node)&&(this.forceSelection=!0),this.dom.style.height=""}),this.markedForComposition.forEach(o=>o.flags&=-9);let s=[];if(this.view.viewport.from||this.view.viewport.to<this.view.state.doc.length)for(let o of this.children)o instanceof Yg&&o.widget instanceof LF&&s.push(o.dom);i.updateGaps(s)}updateChildren(e,n,r){let i=r?r.range.addToSet(e.slice()):e,s=this.childCursor(n);for(let o=i.length-1;;o--){let a=o>=0?i[o]:null;if(!a)break;let{fromA:l,toA:h,fromB:f,toB:p}=a,g,b,x,k;if(r&&r.range.fromB<p&&r.range.toB>f){let j=z3.build(this.view.state.doc,f,r.range.fromB,this.decorations,this.dynamicDecorationMap),Q=z3.build(this.view.state.doc,r.range.toB,p,this.decorations,this.dynamicDecorationMap);b=j.breakAtStart,x=j.openStart,k=Q.openEnd;let Z=this.compositionView(r);Q.breakAtStart?Z.breakAfter=1:Q.content.length&&Z.merge(Z.length,Z.length,Q.content[0],!1,Q.openStart,0)&&(Z.breakAfter=Q.content[0].breakAfter,Q.content.shift()),j.content.length&&Z.merge(0,0,j.content[j.content.length-1],!0,0,j.openEnd)&&j.content.pop(),g=j.content.concat(Z).concat(Q.content)}else({content:g,breakAtStart:b,openStart:x,openEnd:k}=z3.build(this.view.state.doc,f,p,this.decorations,this.dynamicDecorationMap));let{i:T,off:I}=s.findPos(h,1),{i:M,off:B}=s.findPos(l,-1);Ite(this,M,B,T,I,g,b,x,k)}r&&this.fixCompositionDOM(r)}updateEditContextFormatting(e){this.editContextFormatting=this.editContextFormatting.map(e.changes);for(let n of e.transactions)for(let r of n.effects)r.is(Kte)&&(this.editContextFormatting=r.value)}compositionView(e){let n=new Ed(e.text.nodeValue);n.flags|=8;for(let{deco:i}of e.marks)n=new l0(i,[n],n.length);let r=new wa;return r.append(n,0),r}fixCompositionDOM(e){let n=(s,o)=>{o.flags|=8|(o.children.some(l=>l.flags&7)?1:0),this.markedForComposition.add(o);let a=Ns.get(s);a&&a!=o&&(a.dom=null),o.setDOM(s)},r=this.childPos(e.range.fromB,1),i=this.children[r.i];n(e.line,i);for(let s=e.marks.length-1;s>=-1;s--)r=i.childPos(r.off,1),i=i.children[r.i],n(s>=0?e.marks[s].node:e.text,i)}updateSelection(e=!1,n=!1){(e||!this.view.observer.selectionRange.focusNode)&&this.view.observer.readSelectionRange();let r=this.view.root.activeElement,i=r==this.dom,s=!i&&!(this.view.state.facet(Lg)||this.dom.tabIndex>-1)&&y5(this.dom,this.view.observer.selectionRange)&&!(r&&this.dom.contains(r));if(!(i||n||s))return;let o=this.forceSelection;this.forceSelection=!1;let a=this.view.state.selection.main,l=this.moveToLine(this.domAtPos(a.anchor)),h=a.empty?l:this.moveToLine(this.domAtPos(a.head));if(wn.gecko&&a.empty&&!this.hasComposition&&Jxe(l)){let p=document.createTextNode("");this.view.observer.ignore(()=>l.node.insertBefore(p,l.node.childNodes[l.offset]||null)),l=h=new Wl(p,0),o=!0}let f=this.view.observer.selectionRange;(o||!f.focusNode||(!N3(l.node,l.offset,f.anchorNode,f.anchorOffset)||!N3(h.node,h.offset,f.focusNode,f.focusOffset))&&!this.suppressWidgetCursorChange(f,a))&&(this.view.observer.ignore(()=>{wn.android&&wn.chrome&&this.dom.contains(f.focusNode)&&iwe(f.focusNode,this.dom)&&(this.dom.blur(),this.dom.focus({preventScroll:!0}));let p=_k(this.view.root);if(p)if(a.empty){if(wn.gecko){let g=twe(l.node,l.offset);if(g&&g!=3){let b=(g==1?Tte:Pte)(l.node,l.offset);b&&(l=new Wl(b.node,b.offset))}}p.collapse(l.node,l.offset),a.bidiLevel!=null&&p.caretBidiLevel!==void 0&&(p.caretBidiLevel=a.bidiLevel)}else if(p.extend){p.collapse(l.node,l.offset);try{p.extend(h.node,h.offset)}catch{}}else{let g=document.createRange();a.anchor>a.head&&([l,h]=[h,l]),g.setEnd(h.node,h.offset),g.setStart(l.node,l.offset),p.removeAllRanges(),p.addRange(g)}s&&this.view.root.activeElement==this.dom&&(this.dom.blur(),r&&r.focus())}),this.view.observer.setSelectionRange(l,h)),this.impreciseAnchor=l.precise?null:new Wl(f.anchorNode,f.anchorOffset),this.impreciseHead=h.precise?null:new Wl(f.focusNode,f.focusOffset)}suppressWidgetCursorChange(e,n){return this.hasComposition&&n.empty&&N3(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset)&&this.posFromDOM(e.focusNode,e.focusOffset)==n.head}enforceCursorAssoc(){if(this.hasComposition)return;let{view:e}=this,n=e.state.selection.main,r=_k(e.root),{anchorNode:i,anchorOffset:s}=e.observer.selectionRange;if(!r||!n.empty||!n.assoc||!r.modify)return;let o=wa.find(this,n.head);if(!o)return;let a=o.posAtStart;if(n.head==a||n.head==a+o.length)return;let l=this.coordsAt(n.head,-1),h=this.coordsAt(n.head,1);if(!l||!h||l.bottom>h.top)return;let f=this.domAtPos(n.head+n.assoc);r.collapse(f.node,f.offset),r.modify("move",n.assoc<0?"forward":"backward","lineboundary"),e.observer.readSelectionRange();let p=e.observer.selectionRange;e.docView.posFromDOM(p.anchorNode,p.anchorOffset)!=n.from&&r.collapse(i,s)}moveToLine(e){let n=this.dom,r;if(e.node!=n)return e;for(let i=e.offset;!r&&i<n.childNodes.length;i++){let s=Ns.get(n.childNodes[i]);s instanceof wa&&(r=s.domAtPos(0))}for(let i=e.offset-1;!r&&i>=0;i--){let s=Ns.get(n.childNodes[i]);s instanceof wa&&(r=s.domAtPos(s.length))}return r?new Wl(r.node,r.offset,!0):e}nearest(e){for(let n=e;n;){let r=Ns.get(n);if(r&&r.rootView==this)return r;n=n.parentNode}return null}posFromDOM(e,n){let r=this.nearest(e);if(!r)throw new RangeError("Trying to find position for a DOM position outside of the document");return r.localPosFromDOM(e,n)+r.posAtStart}domAtPos(e){let{i:n,off:r}=this.childCursor().findPos(e,-1);for(;n<this.children.length-1;){let i=this.children[n];if(r<i.length||i instanceof wa)break;n++,r=0}return this.children[n].domAtPos(r)}coordsAt(e,n){let r=null,i=0;for(let s=this.length,o=this.children.length-1;o>=0;o--){let a=this.children[o],l=s-a.breakAfter,h=l-a.length;if(l<e)break;if(h<=e&&(h<e||a.covers(-1))&&(l>e||a.covers(1))&&(!r||a instanceof wa&&!(r instanceof wa&&n>=0)))r=a,i=h;else if(r&&h==e&&l==e&&a instanceof Yg&&Math.abs(n)<2){if(a.deco.startSide<0)break;o&&(r=null)}s=h}return r?r.coordsAt(e-i,n):null}coordsForChar(e){let{i:n,off:r}=this.childPos(e,1),i=this.children[n];if(!(i instanceof wa))return null;for(;i.children.length;){let{i:a,off:l}=i.childPos(r,1);for(;;a++){if(a==i.children.length)return null;if((i=i.children[a]).length)break}r=l}if(!(i instanceof Ed))return null;let s=bl(i.text,r);if(s==r)return null;let o=zb(i.dom,r,s).getClientRects();for(let a=0;a<o.length;a++){let l=o[a];if(a==o.length-1||l.top<l.bottom&&l.left<l.right)return l}return null}measureVisibleLineHeights(e){let n=[],{from:r,to:i}=e,s=this.view.contentDOM.clientWidth,o=s>Math.max(this.view.scrollDOM.clientWidth,this.minWidth)+1,a=-1,l=this.view.textDirection==vo.LTR;for(let h=0,f=0;f<this.children.length;f++){let p=this.children[f],g=h+p.length;if(g>i)break;if(h>=r){let b=p.dom.getBoundingClientRect();if(n.push(b.height),o){let x=p.dom.lastChild,k=x?xk(x):[];if(k.length){let T=k[k.length-1],I=l?T.right-b.left:b.right-T.left;I>a&&(a=I,this.minWidth=s,this.minWidthFrom=h,this.minWidthTo=g)}}}h=g+p.breakAfter}return n}textDirectionAt(e){let{i:n}=this.childPos(e,1);return getComputedStyle(this.children[n].dom).direction=="rtl"?vo.RTL:vo.LTR}measureTextSize(){for(let s of this.children)if(s instanceof wa){let o=s.measureTextSize();if(o)return o}let e=document.createElement("div"),n,r,i;return e.className="cm-line",e.style.width="99999px",e.style.position="absolute",e.textContent="abc def ghi jkl mno pqr stu",this.view.observer.ignore(()=>{this.dom.appendChild(e);let s=xk(e.firstChild)[0];n=e.getBoundingClientRect().height,r=s?s.width/27:7,i=s?s.height:n,e.remove()}),{lineHeight:n,charWidth:r,textHeight:i}}childCursor(e=this.length){let n=this.children.length;return n&&(e-=this.children[--n].length),new Dte(this.children,e,n)}computeBlockGapDeco(){let e=[],n=this.view.viewState;for(let r=0,i=0;;i++){let s=i==n.viewports.length?null:n.viewports[i],o=s?s.from-1:this.length;if(o>r){let a=(n.lineBlockAt(o).bottom-n.lineBlockAt(r).top)/this.view.scaleY;e.push(Sr.replace({widget:new LF(a),block:!0,inclusive:!0,isBlockGap:!0}).range(r,o))}if(!s)break;r=s.to+1}return Sr.set(e)}updateDeco(){let e=1,n=this.view.state.facet(wk).map(s=>(this.dynamicDecorationMap[e++]=typeof s=="function")?s(this.view):s),r=!1,i=this.view.state.facet(ene).map((s,o)=>{let a=typeof s=="function";return a&&(r=!0),a?s(this.view):s});for(i.length&&(this.dynamicDecorationMap[e++]=r,n.push(as.join(i))),this.decorations=[this.editContextFormatting,...n,this.computeBlockGapDeco(),this.view.viewState.lineGapDeco];e<this.decorations.length;)this.dynamicDecorationMap[e++]=!1;return this.decorations}scrollIntoView(e){if(e.isSnapshot){let h=this.view.viewState.lineBlockAt(e.range.head);this.view.scrollDOM.scrollTop=h.top-e.yMargin,this.view.scrollDOM.scrollLeft=e.xMargin;return}for(let h of this.view.state.facet(Hte))try{if(h(this.view,e.range,e))return!0}catch(f){Mu(this.view.state,f,"scroll handler")}let{range:n}=e,r=this.coordsAt(n.head,n.empty?n.assoc:n.head>n.anchor?-1:1),i;if(!r)return;!n.empty&&(i=this.coordsAt(n.anchor,n.anchor>n.head?-1:1))&&(r={left:Math.min(r.left,i.left),top:Math.min(r.top,i.top),right:Math.max(r.right,i.right),bottom:Math.max(r.bottom,i.bottom)});let s=FB(this.view),o={left:r.left-s.left,top:r.top-s.top,right:r.right+s.right,bottom:r.bottom+s.bottom},{offsetWidth:a,offsetHeight:l}=this.view.scrollDOM;Ixe(this.view.scrollDOM,o,n.head<n.anchor?-1:1,e.x,e.y,Math.max(Math.min(e.xMargin,a),-a),Math.max(Math.min(e.yMargin,l),-l),this.view.textDirection==vo.LTR)}lineHasWidget(e){let{i:n}=this.childCursor().findPos(e);if(n==this.children.length)return!1;let r=i=>i instanceof zg||i.children.some(r);return r(this.children[n])}}function Jxe(t){return t.node.nodeType==1&&t.node.firstChild&&(t.offset==0||t.node.childNodes[t.offset-1].contentEditable=="false")&&(t.offset==t.node.childNodes.length||t.node.childNodes[t.offset].contentEditable=="false")}function rne(t,e){let n=t.observer.selectionRange;if(!n.focusNode)return null;let r=Tte(n.focusNode,n.focusOffset),i=Pte(n.focusNode,n.focusOffset),s=r||i;if(i&&r&&i.node!=r.node){let a=Ns.get(i.node);if(!a||a instanceof Ed&&a.text!=i.node.nodeValue)s=i;else if(t.docView.lastCompositionAfterCursor){let l=Ns.get(r.node);!l||l instanceof Ed&&l.text!=r.node.nodeValue||(s=i)}}if(t.docView.lastCompositionAfterCursor=s!=r,!s)return null;let o=e-s.offset;return{from:o,to:o+s.node.nodeValue.length,node:s.node}}function ewe(t,e,n){let r=rne(t,n);if(!r)return null;let{node:i,from:s,to:o}=r,a=i.nodeValue;if(/[\n\r]/.test(a)||t.state.doc.sliceString(r.from,r.to)!=a)return null;let l=e.invertedDesc,h=new pf(l.mapPos(s),l.mapPos(o),s,o),f=[];for(let p=i.parentNode;;p=p.parentNode){let g=Ns.get(p);if(g instanceof l0)f.push({node:p,deco:g.mark});else{if(g instanceof wa||p.nodeName=="DIV"&&p.parentNode==t.contentDOM)return{range:h,text:i,marks:f,line:p};if(p!=t.contentDOM)f.push({node:p,deco:new DC({inclusive:!0,attributes:Qxe(p),tagName:p.tagName.toLowerCase()})});else return null}}}function twe(t,e){return t.nodeType!=1?0:(e&&t.childNodes[e-1].contentEditable=="false"?1:0)|(e<t.childNodes.length&&t.childNodes[e].contentEditable=="false"?2:0)}let nwe=class{constructor(){this.changes=[]}compareRange(e,n){v5(e,n,this.changes)}comparePoint(e,n){v5(e,n,this.changes)}boundChange(e){v5(e,e,this.changes)}};function rwe(t,e,n){let r=new nwe;return as.compare(t,e,n,r),r.changes}function iwe(t,e){for(let n=t;n&&n!=e;n=n.assignedSlot||n.parentNode)if(n.nodeType==1&&n.contentEditable=="false")return!0;return!1}function swe(t,e){let n=!1;return e&&t.iterChangedRanges((r,i)=>{r<e.to&&i>e.from&&(n=!0)}),n}function owe(t,e,n=1){let r=t.charCategorizer(e),i=t.doc.lineAt(e),s=e-i.from;if(i.length==0)return kt.cursor(e);s==0?n=1:s==i.length&&(n=-1);let o=s,a=s;n<0?o=bl(i.text,s,!1):a=bl(i.text,s);let l=r(i.text.slice(o,a));for(;o>0;){let h=bl(i.text,o,!1);if(r(i.text.slice(h,o))!=l)break;o=h}for(;a<i.length;){let h=bl(i.text,a);if(r(i.text.slice(a,h))!=l)break;a=h}return kt.range(o+i.from,a+i.from)}function awe(t,e){return e.left>t?e.left-t:Math.max(0,t-e.right)}function lwe(t,e){return e.top>t?e.top-t:Math.max(0,t-e.bottom)}function wM(t,e){return t.top<e.bottom-1&&t.bottom>e.top+1}function xU(t,e){return e<t.top?{top:e,left:t.left,right:t.right,bottom:t.bottom}:t}function wU(t,e){return e>t.bottom?{top:t.top,left:t.left,right:t.right,bottom:e}:t}function QF(t,e,n){let r,i,s,o,a=!1,l,h,f,p;for(let x=t.firstChild;x;x=x.nextSibling){let k=xk(x);for(let T=0;T<k.length;T++){let I=k[T];i&&wM(i,I)&&(I=xU(wU(I,i.bottom),i.top));let M=awe(e,I),B=lwe(n,I);if(M==0&&B==0)return x.nodeType==3?OU(x,e,n):QF(x,e,n);(!r||o>B||o==B&&s>M)&&(r=x,i=I,s=M,o=B,a=M?e<I.left?T>0:T<k.length-1:!0),M==0?n>I.bottom&&(!f||f.bottom<I.bottom)?(l=x,f=I):n<I.top&&(!p||p.top>I.top)&&(h=x,p=I):f&&wM(f,I)?f=wU(f,I.bottom):p&&wM(p,I)&&(p=xU(p,I.top))}}if(f&&f.bottom>=n?(r=l,i=f):p&&p.top<=n&&(r=h,i=p),!r)return{node:t,offset:0};let g=Math.max(i.left,Math.min(i.right,e));if(r.nodeType==3)return OU(r,g,n);if(a&&r.contentEditable!="false")return QF(r,g,n);let b=Array.prototype.indexOf.call(t.childNodes,r)+(e>=(i.left+i.right)/2?1:0);return{node:t,offset:b}}function OU(t,e,n){let r=t.nodeValue.length,i=-1,s=1e9,o=0;for(let a=0;a<r;a++){let l=zb(t,a,a+1).getClientRects();for(let h=0;h<l.length;h++){let f=l[h];if(f.top==f.bottom)continue;o||(o=e-f.left);let p=(f.top>n?f.top-n:n-f.bottom)-1;if(f.left-1<=e&&f.right+1>=e&&p<s){let g=e>=(f.left+f.right)/2,b=g;if((wn.chrome||wn.gecko)&&zb(t,a).getBoundingClientRect().left==f.right&&(b=!g),p<=0)return{node:t,offset:a+(b?1:0)};i=a+(b?1:0),s=p}}}return{node:t,offset:i>-1?i:o>0?t.nodeValue.length:0}}function ine(t,e,n,r=-1){var i,s;let o=t.contentDOM.getBoundingClientRect(),a=o.top+t.viewState.paddingTop,l,{docHeight:h}=t.viewState,{x:f,y:p}=e,g=p-a;if(g<0)return 0;if(g>h)return t.state.doc.length;for(let j=t.viewState.heightOracle.textHeight/2,Q=!1;l=t.elementAtHeight(g),l.type!=Fu.Text;)for(;g=r>0?l.bottom+j:l.top-j,!(g>=0&&g<=h);){if(Q)return n?null:0;Q=!0,r=-r}p=a+g;let b=l.from;if(b<t.viewport.from)return t.viewport.from==0?0:n?null:SU(t,o,l,f,p);if(b>t.viewport.to)return t.viewport.to==t.state.doc.length?t.state.doc.length:n?null:SU(t,o,l,f,p);let x=t.dom.ownerDocument,k=t.root.elementFromPoint?t.root:x,T=k.elementFromPoint(f,p);T&&!t.contentDOM.contains(T)&&(T=null),T||(f=Math.max(o.left+1,Math.min(o.right-1,f)),T=k.elementFromPoint(f,p),T&&!t.contentDOM.contains(T)&&(T=null));let I,M=-1;if(T&&((i=t.docView.nearest(T))===null||i===void 0?void 0:i.isEditable)!=!1){if(x.caretPositionFromPoint){let j=x.caretPositionFromPoint(f,p);j&&({offsetNode:I,offset:M}=j)}else if(x.caretRangeFromPoint){let j=x.caretRangeFromPoint(f,p);j&&({startContainer:I,startOffset:M}=j)}I&&(!t.contentDOM.contains(I)||wn.safari&&uwe(I,M,f)||wn.chrome&&cwe(I,M,f))&&(I=void 0),I&&(M=Math.min(fm(I),M))}if(!I||!t.docView.dom.contains(I)){let j=wa.find(t.docView,b);if(!j)return g>l.top+l.height/2?l.to:l.from;({node:I,offset:M}=QF(j.dom,f,p))}let B=t.docView.nearest(I);if(!B)return null;if(B.isWidget&&((s=B.dom)===null||s===void 0?void 0:s.nodeType)==1){let j=B.dom.getBoundingClientRect();return e.y<j.top||e.y<=j.bottom&&e.x<=(j.left+j.right)/2?B.posAtStart:B.posAtEnd}else return B.localPosFromDOM(I,M)+B.posAtStart}function SU(t,e,n,r,i){let s=Math.round((r-e.left)*t.defaultCharacterWidth);if(t.lineWrapping&&n.height>t.defaultLineHeight*1.5){let a=t.viewState.heightOracle.textHeight,l=Math.floor((i-n.top-(t.defaultLineHeight-a)*.5)/a);s+=l*t.viewState.heightOracle.lineLength}let o=t.state.sliceDoc(n.from,n.to);return n.from+CF(o,s,t.state.tabSize)}function sne(t,e,n){let r,i=t;if(t.nodeType!=3||e!=(r=t.nodeValue.length))return!1;for(;;){let s=i.nextSibling;if(s){if(s.nodeName=="BR")break;return!1}else{let o=i.parentNode;if(!o||o.nodeName=="DIV")break;i=o}}return zb(t,r-1,r).getBoundingClientRect().right>n}function uwe(t,e,n){return sne(t,e,n)}function cwe(t,e,n){if(e!=0)return sne(t,e,n);for(let i=t;;){let s=i.parentNode;if(!s||s.nodeType!=1||s.firstChild!=i)return!1;if(s.classList.contains("cm-line"))break;i=s}let r=t.nodeType==1?t.getBoundingClientRect():zb(t,0,Math.max(t.nodeValue.length,1)).getBoundingClientRect();return n-r.left>5}function jF(t,e,n){let r=t.lineBlockAt(e);if(Array.isArray(r.type)){let i;for(let s of r.type){if(s.from>e)break;if(!(s.to<e)){if(s.from<e&&s.to>e)return s;(!i||s.type==Fu.Text&&(i.type!=s.type||(n<0?s.from<e:s.to>e)))&&(i=s)}}return i||r}return r}function hwe(t,e,n,r){let i=jF(t,e.head,e.assoc||-1),s=!r||i.type!=Fu.Text||!(t.lineWrapping||i.widgetLineBreaks)?null:t.coordsAtPos(e.assoc<0&&e.head>i.from?e.head-1:e.head);if(s){let o=t.dom.getBoundingClientRect(),a=t.textDirectionAt(i.from),l=t.posAtCoords({x:n==(a==vo.LTR)?o.right-1:o.left+1,y:(s.top+s.bottom)/2});if(l!=null)return kt.cursor(l,n?-1:1)}return kt.cursor(n?i.to:i.from,n?-1:1)}function kU(t,e,n,r){let i=t.state.doc.lineAt(e.head),s=t.bidiSpans(i),o=t.textDirectionAt(i.from);for(let a=e,l=null;;){let h=Yxe(i,s,o,a,n),f=jte;if(!h){if(i.number==(n?t.state.doc.lines:1))return a;f=`
`,i=t.state.doc.line(i.number+(n?1:-1)),s=t.bidiSpans(i),h=t.visualLineSide(i,!n)}if(l){if(!l(f))return a}else{if(!r)return h;l=r(f)}a=h}}function fwe(t,e,n){let r=t.state.charCategorizer(e),i=r(n);return s=>{let o=r(s);return i==So.Space&&(i=o),i==o}}function dwe(t,e,n,r){let i=e.head,s=n?1:-1;if(i==(n?t.state.doc.length:0))return kt.cursor(i,e.assoc);let o=e.goalColumn,a,l=t.contentDOM.getBoundingClientRect(),h=t.coordsAtPos(i,e.assoc||-1),f=t.documentTop;if(h)o==null&&(o=h.left-l.left),a=s<0?h.top:h.bottom;else{let b=t.viewState.lineBlockAt(i);o==null&&(o=Math.min(l.right-l.left,t.defaultCharacterWidth*(i-b.from))),a=(s<0?b.top:b.bottom)+f}let p=l.left+o,g=r??t.viewState.heightOracle.textHeight>>1;for(let b=0;;b+=10){let x=a+(g+b)*s,k=ine(t,{x:p,y:x},!1,s);if(x<l.top||x>l.bottom||(s<0?k<i:k>i)){let T=t.docView.coordsForChar(k),I=!T||x<T.top?-1:1;return kt.cursor(k,I,void 0,o)}}}function Q3(t,e,n){for(;;){let r=0;for(let i of t)i.between(e-1,e+1,(s,o,a)=>{if(e>s&&e<o){let l=r||n||(e-s<o-e?-1:1);e=l<0?s:o,r=l}});if(!r)return e}}function one(t,e){let n=null;for(let r=0;r<e.ranges.length;r++){let i=e.ranges[r],s=null;if(i.empty){let o=Q3(t,i.from,0);o!=i.from&&(s=kt.cursor(o,-1))}else{let o=Q3(t,i.from,-1),a=Q3(t,i.to,1);(o!=i.from||a!=i.to)&&(s=kt.range(i.from==i.anchor?o:a,i.from==i.head?o:a))}s&&(n||(n=e.ranges.slice()),n[r]=s)}return n?kt.create(n,e.mainIndex):e}function OM(t,e,n){let r=Q3(t.state.facet(MC).map(i=>i(t)),n.from,e.head>n.from?-1:1);return r==n.from?n:kt.cursor(r,r<n.from?1:-1)}const y3="ï¿¿";class pwe{constructor(e,n){this.points=e,this.text="",this.lineSeparator=n.facet(Xi.lineSeparator)}append(e){this.text+=e}lineBreak(){this.text+=y3}readRange(e,n){if(!e)return this;let r=e.parentNode;for(let i=e;;){this.findPointBefore(r,i);let s=this.text.length;this.readNode(i);let o=i.nextSibling;if(o==n)break;let a=Ns.get(i),l=Ns.get(o);(a&&l?a.breakAfter:(a?a.breakAfter:e6(i))||e6(o)&&(i.nodeName!="BR"||i.cmIgnore)&&this.text.length>s)&&!gwe(o,n)&&this.lineBreak(),i=o}return this.findPointBefore(r,n),this}readTextNode(e){let n=e.nodeValue;for(let r of this.points)r.node==e&&(r.pos=this.text.length+Math.min(r.offset,n.length));for(let r=0,i=this.lineSeparator?null:/\r\n?|\n/g;;){let s=-1,o=1,a;if(this.lineSeparator?(s=n.indexOf(this.lineSeparator,r),o=this.lineSeparator.length):(a=i.exec(n))&&(s=a.index,o=a[0].length),this.append(n.slice(r,s<0?n.length:s)),s<0)break;if(this.lineBreak(),o>1)for(let l of this.points)l.node==e&&l.pos>this.text.length&&(l.pos-=o-1);r=s+o}}readNode(e){if(e.cmIgnore)return;let n=Ns.get(e),r=n&&n.overrideDOMText;if(r!=null){this.findPointInside(e,r.length);for(let i=r.iter();!i.next().done;)i.lineBreak?this.lineBreak():this.append(i.value)}else e.nodeType==3?this.readTextNode(e):e.nodeName=="BR"?e.nextSibling&&this.lineBreak():e.nodeType==1&&this.readRange(e.firstChild,null)}findPointBefore(e,n){for(let r of this.points)r.node==e&&e.childNodes[r.offset]==n&&(r.pos=this.text.length)}findPointInside(e,n){for(let r of this.points)(e.nodeType==3?r.node==e:e.contains(r.node))&&(r.pos=this.text.length+(mwe(e,r.node,r.offset)?n:0))}}function mwe(t,e,n){for(;;){if(!e||n<fm(e))return!1;if(e==t)return!0;n=Nb(e)+1,e=e.parentNode}}function gwe(t,e){let n;for(;!(t==e||!t);t=t.nextSibling){let r=Ns.get(t);if(!(r?.isWidget||t.cmIgnore))return!1;r&&(n||(n=[])).push(r)}if(n)for(let r of n){let i=r.overrideDOMText;if(i?.length)return!1}return!0}class CU{constructor(e,n){this.node=e,this.offset=n,this.pos=-1}}class ywe{constructor(e,n,r,i){this.typeOver=i,this.bounds=null,this.text="",this.domChanged=n>-1;let{impreciseHead:s,impreciseAnchor:o}=e.docView;if(e.state.readOnly&&n>-1)this.newSel=null;else if(n>-1&&(this.bounds=e.docView.domBoundsAround(n,r,0))){let a=s||o?[]:bwe(e),l=new pwe(a,e.state);l.readRange(this.bounds.startDOM,this.bounds.endDOM),this.text=l.text,this.newSel=_we(a,this.bounds.from)}else{let a=e.observer.selectionRange,l=s&&s.node==a.focusNode&&s.offset==a.focusOffset||!MF(e.contentDOM,a.focusNode)?e.state.selection.main.head:e.docView.posFromDOM(a.focusNode,a.focusOffset),h=o&&o.node==a.anchorNode&&o.offset==a.anchorOffset||!MF(e.contentDOM,a.anchorNode)?e.state.selection.main.anchor:e.docView.posFromDOM(a.anchorNode,a.anchorOffset),f=e.viewport;if((wn.ios||wn.chrome)&&e.state.selection.main.empty&&l!=h&&(f.from>0||f.to<e.state.doc.length)){let p=Math.min(l,h),g=Math.max(l,h),b=f.from-p,x=f.to-g;(b==0||b==1||p==0)&&(x==0||x==-1||g==e.state.doc.length)&&(l=0,h=e.state.doc.length)}this.newSel=kt.single(h,l)}}}function ane(t,e){let n,{newSel:r}=e,i=t.state.selection.main,s=t.inputState.lastKeyTime>Date.now()-100?t.inputState.lastKeyCode:-1;if(e.bounds){let{from:o,to:a}=e.bounds,l=i.from,h=null;(s===8||wn.android&&e.text.length<a-o)&&(l=i.to,h="end");let f=lne(t.state.doc.sliceString(o,a,y3),e.text,l-o,h);f&&(wn.chrome&&s==13&&f.toB==f.from+2&&e.text.slice(f.from,f.toB)==y3+y3&&f.toB--,n={from:o+f.from,to:o+f.toA,insert:ts.of(e.text.slice(f.from,f.toB).split(y3))})}else r&&(!t.hasFocus&&t.state.facet(Lg)||r.main.eq(i))&&(r=null);if(!n&&!r)return!1;if(!n&&e.typeOver&&!i.empty&&r&&r.main.empty?n={from:i.from,to:i.to,insert:t.state.doc.slice(i.from,i.to)}:(wn.mac||wn.android)&&n&&n.from==n.to&&n.from==i.head-1&&/^\. ?$/.test(n.insert.toString())&&t.contentDOM.getAttribute("autocorrect")=="off"?(r&&n.insert.length==2&&(r=kt.single(r.main.anchor-1,r.main.head-1)),n={from:n.from,to:n.to,insert:ts.of([n.insert.toString().replace("."," ")])}):n&&n.from>=i.from&&n.to<=i.to&&(n.from!=i.from||n.to!=i.to)&&i.to-i.from-(n.to-n.from)<=4?n={from:i.from,to:i.to,insert:t.state.doc.slice(i.from,n.from).append(n.insert).append(t.state.doc.slice(n.to,i.to))}:t.state.doc.lineAt(i.from).to<i.to&&t.docView.lineHasWidget(i.to)&&t.inputState.insertingTextAt>Date.now()-50?n={from:i.from,to:i.to,insert:t.state.toText(t.inputState.insertingText)}:wn.chrome&&n&&n.from==n.to&&n.from==i.head&&n.insert.toString()==`
 `&&t.lineWrapping&&(r&&(r=kt.single(r.main.anchor-1,r.main.head-1)),n={from:i.from,to:i.to,insert:ts.of([" "])}),n)return LB(t,n,r,s);if(r&&!r.main.eq(i)){let o=!1,a="select";return t.inputState.lastSelectionTime>Date.now()-50&&(t.inputState.lastSelectionOrigin=="select"&&(o=!0),a=t.inputState.lastSelectionOrigin,a=="select.pointer"&&(r=one(t.state.facet(MC).map(l=>l(t)),r))),t.dispatch({selection:r,scrollIntoView:o,userEvent:a}),!0}else return!1}function LB(t,e,n,r=-1){if(wn.ios&&t.inputState.flushIOSKey(e))return!0;let i=t.state.selection.main;if(wn.android&&(e.to==i.to&&(e.from==i.from||e.from==i.from-1&&t.state.sliceDoc(e.from,i.from)==" ")&&e.insert.length==1&&e.insert.lines==2&&bw(t.contentDOM,"Enter",13)||(e.from==i.from-1&&e.to==i.to&&e.insert.length==0||r==8&&e.insert.length<e.to-e.from&&e.to>i.head)&&bw(t.contentDOM,"Backspace",8)||e.from==i.from&&e.to==i.to+1&&e.insert.length==0&&bw(t.contentDOM,"Delete",46)))return!0;let s=e.insert.toString();t.inputState.composing>=0&&t.inputState.composing++;let o,a=()=>o||(o=vwe(t,e,n));return t.state.facet(Xte).some(l=>l(t,e.from,e.to,s,a))||t.dispatch(a()),!0}function vwe(t,e,n){let r,i=t.state,s=i.selection.main,o=-1;if(e.from==e.to&&e.from<s.from||e.from>s.to){let l=e.from<s.from?-1:1,h=l<0?s.from:s.to,f=Q3(i.facet(MC).map(p=>p(t)),h,l);e.from==f&&(o=f)}if(o>-1)r={changes:e,selection:kt.cursor(e.from+e.insert.length,-1)};else if(e.from>=s.from&&e.to<=s.to&&e.to-e.from>=(s.to-s.from)/3&&(!n||n.main.empty&&n.main.from==e.from+e.insert.length)&&t.inputState.composing<0){let l=s.from<e.from?i.sliceDoc(s.from,e.from):"",h=s.to>e.to?i.sliceDoc(e.to,s.to):"";r=i.replaceSelection(t.state.toText(l+e.insert.sliceString(0,void 0,t.state.lineBreak)+h))}else{let l=i.changes(e),h=n&&n.main.to<=l.newLength?n.main:void 0;if(i.selection.ranges.length>1&&t.inputState.composing>=0&&e.to<=s.to+10&&e.to>=s.to-10){let f=t.state.sliceDoc(e.from,e.to),p,g=n&&rne(t,n.main.head);if(g){let k=e.insert.length-(e.to-e.from);p={from:g.from,to:g.to-k}}else p=t.state.doc.lineAt(s.head);let b=s.to-e.to,x=s.to-s.from;r=i.changeByRange(k=>{if(k.from==s.from&&k.to==s.to)return{changes:l,range:h||k.map(l)};let T=k.to-b,I=T-f.length;if(k.to-k.from!=x||t.state.sliceDoc(I,T)!=f||k.to>=p.from&&k.from<=p.to)return{range:k};let M=i.changes({from:I,to:T,insert:e.insert}),B=k.to-s.to;return{changes:M,range:h?kt.range(Math.max(0,h.anchor+B),Math.max(0,h.head+B)):k.map(M)}})}else r={changes:l,selection:h&&i.selection.replaceRange(h)}}let a="input.type";return(t.composing||t.inputState.compositionPendingChange&&t.inputState.compositionEndedAt>Date.now()-50)&&(t.inputState.compositionPendingChange=!1,a+=".compose",t.inputState.compositionFirstChange&&(a+=".start",t.inputState.compositionFirstChange=!1)),i.update(r,{userEvent:a,scrollIntoView:!0})}function lne(t,e,n,r){let i=Math.min(t.length,e.length),s=0;for(;s<i&&t.charCodeAt(s)==e.charCodeAt(s);)s++;if(s==i&&t.length==e.length)return null;let o=t.length,a=e.length;for(;o>0&&a>0&&t.charCodeAt(o-1)==e.charCodeAt(a-1);)o--,a--;if(r=="end"){let l=Math.max(0,s-Math.min(o,a));n-=o+l-s}if(o<s&&t.length<e.length){let l=n<=s&&n>=o?s-n:0;s-=l,a=s+(a-o),o=s}else if(a<s){let l=n<=s&&n>=a?s-n:0;s-=l,o=s+(o-a),a=s}return{from:s,toA:o,toB:a}}function bwe(t){let e=[];if(t.root.activeElement!=t.contentDOM)return e;let{anchorNode:n,anchorOffset:r,focusNode:i,focusOffset:s}=t.observer.selectionRange;return n&&(e.push(new CU(n,r)),(i!=n||s!=r)&&e.push(new CU(i,s))),e}function _we(t,e){if(t.length==0)return null;let n=t[0].pos,r=t.length==2?t[1].pos:n;return n>-1&&r>-1?kt.single(n+e,r+e):null}class xwe{setSelectionOrigin(e){this.lastSelectionOrigin=e,this.lastSelectionTime=Date.now()}constructor(e){this.view=e,this.lastKeyCode=0,this.lastKeyTime=0,this.lastTouchTime=0,this.lastFocusTime=0,this.lastScrollTop=0,this.lastScrollLeft=0,this.pendingIOSKey=void 0,this.tabFocusMode=-1,this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastContextMenu=0,this.scrollHandlers=[],this.handlers=Object.create(null),this.composing=-1,this.compositionFirstChange=null,this.compositionEndedAt=0,this.compositionPendingKey=!1,this.compositionPendingChange=!1,this.insertingText="",this.insertingTextAt=0,this.mouseSelection=null,this.draggedContent=null,this.handleEvent=this.handleEvent.bind(this),this.notifiedFocused=e.hasFocus,wn.safari&&e.contentDOM.addEventListener("input",()=>null),wn.gecko&&$we(e.contentDOM.ownerDocument)}handleEvent(e){!Twe(this.view,e)||this.ignoreDuringComposition(e)||e.type=="keydown"&&this.keydown(e)||(this.view.updateState!=0?Promise.resolve().then(()=>this.runHandlers(e.type,e)):this.runHandlers(e.type,e))}runHandlers(e,n){let r=this.handlers[e];if(r){for(let i of r.observers)i(this.view,n);for(let i of r.handlers){if(n.defaultPrevented)break;if(i(this.view,n)){n.preventDefault();break}}}}ensureHandlers(e){let n=wwe(e),r=this.handlers,i=this.view.contentDOM;for(let s in n)if(s!="scroll"){let o=!n[s].handlers.length,a=r[s];a&&o!=!a.handlers.length&&(i.removeEventListener(s,this.handleEvent),a=null),a||i.addEventListener(s,this.handleEvent,{passive:o})}for(let s in r)s!="scroll"&&!n[s]&&i.removeEventListener(s,this.handleEvent);this.handlers=n}keydown(e){if(this.lastKeyCode=e.keyCode,this.lastKeyTime=Date.now(),e.keyCode==9&&this.tabFocusMode>-1&&(!this.tabFocusMode||Date.now()<=this.tabFocusMode))return!0;if(this.tabFocusMode>0&&e.keyCode!=27&&cne.indexOf(e.keyCode)<0&&(this.tabFocusMode=-1),wn.android&&wn.chrome&&!e.synthetic&&(e.keyCode==13||e.keyCode==8))return this.view.observer.delayAndroidKey(e.key,e.keyCode),!0;let n;return wn.ios&&!e.synthetic&&!e.altKey&&!e.metaKey&&((n=une.find(r=>r.keyCode==e.keyCode))&&!e.ctrlKey||Owe.indexOf(e.key)>-1&&e.ctrlKey&&!e.shiftKey)?(this.pendingIOSKey=n||e,setTimeout(()=>this.flushIOSKey(),250),!0):(e.keyCode!=229&&this.view.observer.forceFlush(),!1)}flushIOSKey(e){let n=this.pendingIOSKey;return!n||n.key=="Enter"&&e&&e.from<e.to&&/^\S+$/.test(e.insert.toString())?!1:(this.pendingIOSKey=void 0,bw(this.view.contentDOM,n.key,n.keyCode,n instanceof KeyboardEvent?n:void 0))}ignoreDuringComposition(e){return!/^key/.test(e.type)||e.synthetic?!1:this.composing>0?!0:wn.safari&&!wn.ios&&this.compositionPendingKey&&Date.now()-this.compositionEndedAt<100?(this.compositionPendingKey=!1,!0):!1}startMouseSelection(e){this.mouseSelection&&this.mouseSelection.destroy(),this.mouseSelection=e}update(e){this.view.observer.update(e),this.mouseSelection&&this.mouseSelection.update(e),this.draggedContent&&e.docChanged&&(this.draggedContent=this.draggedContent.map(e.changes)),e.transactions.length&&(this.lastKeyCode=this.lastSelectionTime=0)}destroy(){this.mouseSelection&&this.mouseSelection.destroy()}}function AU(t,e){return(n,r)=>{try{return e.call(t,r,n)}catch(i){Mu(n.state,i)}}}function wwe(t){let e=Object.create(null);function n(r){return e[r]||(e[r]={observers:[],handlers:[]})}for(let r of t){let i=r.spec,s=i&&i.plugin.domEventHandlers,o=i&&i.plugin.domEventObservers;if(s)for(let a in s){let l=s[a];l&&n(a).handlers.push(AU(r.value,l))}if(o)for(let a in o){let l=o[a];l&&n(a).observers.push(AU(r.value,l))}}for(let r in Td)n(r).handlers.push(Td[r]);for(let r in wf)n(r).observers.push(wf[r]);return e}const une=[{key:"Backspace",keyCode:8,inputType:"deleteContentBackward"},{key:"Enter",keyCode:13,inputType:"insertParagraph"},{key:"Enter",keyCode:13,inputType:"insertLineBreak"},{key:"Delete",keyCode:46,inputType:"deleteContentForward"}],Owe="dthko",cne=[16,17,18,20,91,92,224,225],GE=6;function YE(t){return Math.max(0,t)*.7+8}function Swe(t,e){return Math.max(Math.abs(t.clientX-e.clientX),Math.abs(t.clientY-e.clientY))}class kwe{constructor(e,n,r,i){this.view=e,this.startEvent=n,this.style=r,this.mustSelect=i,this.scrollSpeed={x:0,y:0},this.scrolling=-1,this.lastEvent=n,this.scrollParents=Mxe(e.contentDOM),this.atoms=e.state.facet(MC).map(o=>o(e));let s=e.contentDOM.ownerDocument;s.addEventListener("mousemove",this.move=this.move.bind(this)),s.addEventListener("mouseup",this.up=this.up.bind(this)),this.extend=n.shiftKey,this.multiple=e.state.facet(Xi.allowMultipleSelections)&&Cwe(e,n),this.dragging=Ewe(e,n)&&dne(n)==1?null:!1}start(e){this.dragging===!1&&this.select(e)}move(e){if(e.buttons==0)return this.destroy();if(this.dragging||this.dragging==null&&Swe(this.startEvent,e)<10)return;this.select(this.lastEvent=e);let n=0,r=0,i=0,s=0,o=this.view.win.innerWidth,a=this.view.win.innerHeight;this.scrollParents.x&&({left:i,right:o}=this.scrollParents.x.getBoundingClientRect()),this.scrollParents.y&&({top:s,bottom:a}=this.scrollParents.y.getBoundingClientRect());let l=FB(this.view);e.clientX-l.left<=i+GE?n=-YE(i-e.clientX):e.clientX+l.right>=o-GE&&(n=YE(e.clientX-o)),e.clientY-l.top<=s+GE?r=-YE(s-e.clientY):e.clientY+l.bottom>=a-GE&&(r=YE(e.clientY-a)),this.setScrollSpeed(n,r)}up(e){this.dragging==null&&this.select(this.lastEvent),this.dragging||e.preventDefault(),this.destroy()}destroy(){this.setScrollSpeed(0,0);let e=this.view.contentDOM.ownerDocument;e.removeEventListener("mousemove",this.move),e.removeEventListener("mouseup",this.up),this.view.inputState.mouseSelection=this.view.inputState.draggedContent=null}setScrollSpeed(e,n){this.scrollSpeed={x:e,y:n},e||n?this.scrolling<0&&(this.scrolling=setInterval(()=>this.scroll(),50)):this.scrolling>-1&&(clearInterval(this.scrolling),this.scrolling=-1)}scroll(){let{x:e,y:n}=this.scrollSpeed;e&&this.scrollParents.x&&(this.scrollParents.x.scrollLeft+=e,e=0),n&&this.scrollParents.y&&(this.scrollParents.y.scrollTop+=n,n=0),(e||n)&&this.view.win.scrollBy(e,n),this.dragging===!1&&this.select(this.lastEvent)}select(e){let{view:n}=this,r=one(this.atoms,this.style.get(e,this.extend,this.multiple));(this.mustSelect||!r.eq(n.state.selection,this.dragging===!1))&&this.view.dispatch({selection:r,userEvent:"select.pointer"}),this.mustSelect=!1}update(e){e.transactions.some(n=>n.isUserEvent("input.type"))?this.destroy():this.style.update(e)&&setTimeout(()=>this.select(this.lastEvent),20)}}function Cwe(t,e){let n=t.state.facet(Ute);return n.length?n[0](e):wn.mac?e.metaKey:e.ctrlKey}function Awe(t,e){let n=t.state.facet(Vte);return n.length?n[0](e):wn.mac?!e.altKey:!e.ctrlKey}function Ewe(t,e){let{main:n}=t.state.selection;if(n.empty)return!1;let r=_k(t.root);if(!r||r.rangeCount==0)return!0;let i=r.getRangeAt(0).getClientRects();for(let s=0;s<i.length;s++){let o=i[s];if(o.left<=e.clientX&&o.right>=e.clientX&&o.top<=e.clientY&&o.bottom>=e.clientY)return!0}return!1}function Twe(t,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let n=e.target,r;n!=t.contentDOM;n=n.parentNode)if(!n||n.nodeType==11||(r=Ns.get(n))&&r.ignoreEvent(e))return!1;return!0}const Td=Object.create(null),wf=Object.create(null),hne=wn.ie&&wn.ie_version<15||wn.ios&&wn.webkit_version<604;function Pwe(t){let e=t.dom.parentNode;if(!e)return;let n=e.appendChild(document.createElement("textarea"));n.style.cssText="position: fixed; left: -10000px; top: 10px",n.focus(),setTimeout(()=>{t.focus(),n.remove(),fne(t,n.value)},50)}function gD(t,e,n){for(let r of t.facet(e))n=r(n,t);return n}function fne(t,e){e=gD(t.state,IB,e);let{state:n}=t,r,i=1,s=n.toText(e),o=s.lines==n.selection.ranges.length;if(UF!=null&&n.selection.ranges.every(l=>l.empty)&&UF==s.toString()){let l=-1;r=n.changeByRange(h=>{let f=n.doc.lineAt(h.from);if(f.from==l)return{range:h};l=f.from;let p=n.toText((o?s.line(i++).text:e)+n.lineBreak);return{changes:{from:f.from,insert:p},range:kt.cursor(h.from+p.length)}})}else o?r=n.changeByRange(l=>{let h=s.line(i++);return{changes:{from:l.from,to:l.to,insert:h.text},range:kt.cursor(l.from+h.length)}}):r=n.replaceSelection(s);t.dispatch(r,{userEvent:"input.paste",scrollIntoView:!0})}wf.scroll=t=>{t.inputState.lastScrollTop=t.scrollDOM.scrollTop,t.inputState.lastScrollLeft=t.scrollDOM.scrollLeft};Td.keydown=(t,e)=>(t.inputState.setSelectionOrigin("select"),e.keyCode==27&&t.inputState.tabFocusMode!=0&&(t.inputState.tabFocusMode=Date.now()+2e3),!1);wf.touchstart=(t,e)=>{t.inputState.lastTouchTime=Date.now(),t.inputState.setSelectionOrigin("select.pointer")};wf.touchmove=t=>{t.inputState.setSelectionOrigin("select.pointer")};Td.mousedown=(t,e)=>{if(t.observer.flush(),t.inputState.lastTouchTime>Date.now()-2e3)return!1;let n=null;for(let r of t.state.facet(qte))if(n=r(t,e),n)break;if(!n&&e.button==0&&(n=Mwe(t,e)),n){let r=!t.hasFocus;t.inputState.startMouseSelection(new kwe(t,e,n,r)),r&&t.observer.ignore(()=>{Cte(t.contentDOM);let s=t.root.activeElement;s&&!s.contains(t.contentDOM)&&s.blur()});let i=t.inputState.mouseSelection;if(i)return i.start(e),i.dragging===!1}else t.inputState.setSelectionOrigin("select.pointer");return!1};function EU(t,e,n,r){if(r==1)return kt.cursor(e,n);if(r==2)return owe(t.state,e,n);{let i=wa.find(t.docView,e),s=t.state.doc.lineAt(i?i.posAtEnd:e),o=i?i.posAtStart:s.from,a=i?i.posAtEnd:s.to;return a<t.state.doc.length&&a==s.to&&a++,kt.range(o,a)}}let TU=(t,e,n)=>e>=n.top&&e<=n.bottom&&t>=n.left&&t<=n.right;function Dwe(t,e,n,r){let i=wa.find(t.docView,e);if(!i)return 1;let s=e-i.posAtStart;if(s==0)return 1;if(s==i.length)return-1;let o=i.coordsAt(s,-1);if(o&&TU(n,r,o))return-1;let a=i.coordsAt(s,1);return a&&TU(n,r,a)?1:o&&o.bottom>=r?-1:1}function PU(t,e){let n=t.posAtCoords({x:e.clientX,y:e.clientY},!1);return{pos:n,bias:Dwe(t,n,e.clientX,e.clientY)}}const Iwe=wn.ie&&wn.ie_version<=11;let DU=null,IU=0,MU=0;function dne(t){if(!Iwe)return t.detail;let e=DU,n=MU;return DU=t,MU=Date.now(),IU=!e||n>Date.now()-400&&Math.abs(e.clientX-t.clientX)<2&&Math.abs(e.clientY-t.clientY)<2?(IU+1)%3:1}function Mwe(t,e){let n=PU(t,e),r=dne(e),i=t.state.selection;return{update(s){s.docChanged&&(n.pos=s.changes.mapPos(n.pos),i=i.map(s.changes))},get(s,o,a){let l=PU(t,s),h,f=EU(t,l.pos,l.bias,r);if(n.pos!=l.pos&&!o){let p=EU(t,n.pos,n.bias,r),g=Math.min(p.from,f.from),b=Math.max(p.to,f.to);f=g<f.from?kt.range(g,b):kt.range(b,g)}return o?i.replaceRange(i.main.extend(f.from,f.to)):a&&r==1&&i.ranges.length>1&&(h=Rwe(i,l.pos))?h:a?i.addRange(f):kt.create([f])}}}function Rwe(t,e){for(let n=0;n<t.ranges.length;n++){let{from:r,to:i}=t.ranges[n];if(r<=e&&i>=e)return kt.create(t.ranges.slice(0,n).concat(t.ranges.slice(n+1)),t.mainIndex==n?0:t.mainIndex-(t.mainIndex>n?1:0))}return null}Td.dragstart=(t,e)=>{let{selection:{main:n}}=t.state;if(e.target.draggable){let i=t.docView.nearest(e.target);if(i&&i.isWidget){let s=i.posAtStart,o=s+i.length;(s>=n.to||o<=n.from)&&(n=kt.range(s,o))}}let{inputState:r}=t;return r.mouseSelection&&(r.mouseSelection.dragging=!0),r.draggedContent=n,e.dataTransfer&&(e.dataTransfer.setData("Text",gD(t.state,MB,t.state.sliceDoc(n.from,n.to))),e.dataTransfer.effectAllowed="copyMove"),!1};Td.dragend=t=>(t.inputState.draggedContent=null,!1);function RU(t,e,n,r){if(n=gD(t.state,IB,n),!n)return;let i=t.posAtCoords({x:e.clientX,y:e.clientY},!1),{draggedContent:s}=t.inputState,o=r&&s&&Awe(t,e)?{from:s.from,to:s.to}:null,a={from:i,insert:n},l=t.state.changes(o?[o,a]:a);t.focus(),t.dispatch({changes:l,selection:{anchor:l.mapPos(i,-1),head:l.mapPos(i,1)},userEvent:o?"move.drop":"input.drop"}),t.inputState.draggedContent=null}Td.drop=(t,e)=>{if(!e.dataTransfer)return!1;if(t.state.readOnly)return!0;let n=e.dataTransfer.files;if(n&&n.length){let r=Array(n.length),i=0,s=()=>{++i==n.length&&RU(t,e,r.filter(o=>o!=null).join(t.state.lineBreak),!1)};for(let o=0;o<n.length;o++){let a=new FileReader;a.onerror=s,a.onload=()=>{/[\x00-\x08\x0e-\x1f]{2}/.test(a.result)||(r[o]=a.result),s()},a.readAsText(n[o])}return!0}else{let r=e.dataTransfer.getData("Text");if(r)return RU(t,e,r,!0),!0}return!1};Td.paste=(t,e)=>{if(t.state.readOnly)return!0;t.observer.flush();let n=hne?null:e.clipboardData;return n?(fne(t,n.getData("text/plain")||n.getData("text/uri-list")),!0):(Pwe(t),!1)};function Fwe(t,e){let n=t.dom.parentNode;if(!n)return;let r=n.appendChild(document.createElement("textarea"));r.style.cssText="position: fixed; left: -10000px; top: 10px",r.value=e,r.focus(),r.selectionEnd=e.length,r.selectionStart=0,setTimeout(()=>{r.remove(),t.focus()},50)}function Lwe(t){let e=[],n=[],r=!1;for(let i of t.selection.ranges)i.empty||(e.push(t.sliceDoc(i.from,i.to)),n.push(i));if(!e.length){let i=-1;for(let{from:s}of t.selection.ranges){let o=t.doc.lineAt(s);o.number>i&&(e.push(o.text),n.push({from:o.from,to:Math.min(t.doc.length,o.to+1)})),i=o.number}r=!0}return{text:gD(t,MB,e.join(t.lineBreak)),ranges:n,linewise:r}}let UF=null;Td.copy=Td.cut=(t,e)=>{let{text:n,ranges:r,linewise:i}=Lwe(t.state);if(!n&&!i)return!1;UF=i?n:null,e.type=="cut"&&!t.state.readOnly&&t.dispatch({changes:r,scrollIntoView:!0,userEvent:"delete.cut"});let s=hne?null:e.clipboardData;return s?(s.clearData(),s.setData("text/plain",n),!0):(Fwe(t,n),!1)};const pne=_0.define();function mne(t,e){let n=[];for(let r of t.facet(Wte)){let i=r(t,e);i&&n.push(i)}return n.length?t.update({effects:n,annotations:pne.of(!0)}):null}function gne(t){setTimeout(()=>{let e=t.hasFocus;if(e!=t.inputState.notifiedFocused){let n=mne(t.state,e);n?t.dispatch(n):t.update([])}},10)}wf.focus=t=>{t.inputState.lastFocusTime=Date.now(),!t.scrollDOM.scrollTop&&(t.inputState.lastScrollTop||t.inputState.lastScrollLeft)&&(t.scrollDOM.scrollTop=t.inputState.lastScrollTop,t.scrollDOM.scrollLeft=t.inputState.lastScrollLeft),gne(t)};wf.blur=t=>{t.observer.clearSelectionRange(),gne(t)};wf.compositionstart=wf.compositionupdate=t=>{t.observer.editContext||(t.inputState.compositionFirstChange==null&&(t.inputState.compositionFirstChange=!0),t.inputState.composing<0&&(t.inputState.composing=0))};wf.compositionend=t=>{t.observer.editContext||(t.inputState.composing=-1,t.inputState.compositionEndedAt=Date.now(),t.inputState.compositionPendingKey=!0,t.inputState.compositionPendingChange=t.observer.pendingRecords().length>0,t.inputState.compositionFirstChange=null,wn.chrome&&wn.android?t.observer.flushSoon():t.inputState.compositionPendingChange?Promise.resolve().then(()=>t.observer.flush()):setTimeout(()=>{t.inputState.composing<0&&t.docView.hasComposition&&t.update([])},50))};wf.contextmenu=t=>{t.inputState.lastContextMenu=Date.now()};Td.beforeinput=(t,e)=>{var n,r;if((e.inputType=="insertText"||e.inputType=="insertCompositionText")&&(t.inputState.insertingText=e.data,t.inputState.insertingTextAt=Date.now()),e.inputType=="insertReplacementText"&&t.observer.editContext){let s=(n=e.dataTransfer)===null||n===void 0?void 0:n.getData("text/plain"),o=e.getTargetRanges();if(s&&o.length){let a=o[0],l=t.posAtDOM(a.startContainer,a.startOffset),h=t.posAtDOM(a.endContainer,a.endOffset);return LB(t,{from:l,to:h,insert:t.state.toText(s)},null),!0}}let i;if(wn.chrome&&wn.android&&(i=une.find(s=>s.inputType==e.inputType))&&(t.observer.delayAndroidKey(i.key,i.keyCode),i.key=="Backspace"||i.key=="Delete")){let s=((r=window.visualViewport)===null||r===void 0?void 0:r.height)||0;setTimeout(()=>{var o;(((o=window.visualViewport)===null||o===void 0?void 0:o.height)||0)>s+10&&t.hasFocus&&(t.contentDOM.blur(),t.focus())},100)}return wn.ios&&e.inputType=="deleteContentForward"&&t.observer.flushSoon(),wn.safari&&e.inputType=="insertText"&&t.inputState.composing>=0&&setTimeout(()=>wf.compositionend(t,e),20),!1};const FU=new Set;function $we(t){FU.has(t)||(FU.add(t),t.addEventListener("copy",()=>{}),t.addEventListener("cut",()=>{}))}const LU=["pre-wrap","normal","pre-line","break-spaces"];let l2=!1;function $U(){l2=!1}class Bwe{constructor(e){this.lineWrapping=e,this.doc=ts.empty,this.heightSamples={},this.lineHeight=14,this.charWidth=7,this.textHeight=14,this.lineLength=30}heightForGap(e,n){let r=this.doc.lineAt(n).number-this.doc.lineAt(e).number+1;return this.lineWrapping&&(r+=Math.max(0,Math.ceil((n-e-r*this.lineLength*.5)/this.lineLength))),this.lineHeight*r}heightForLine(e){return this.lineWrapping?(1+Math.max(0,Math.ceil((e-this.lineLength)/Math.max(1,this.lineLength-5))))*this.lineHeight:this.lineHeight}setDoc(e){return this.doc=e,this}mustRefreshForWrapping(e){return LU.indexOf(e)>-1!=this.lineWrapping}mustRefreshForHeights(e){let n=!1;for(let r=0;r<e.length;r++){let i=e[r];i<0?r++:this.heightSamples[Math.floor(i*10)]||(n=!0,this.heightSamples[Math.floor(i*10)]=!0)}return n}refresh(e,n,r,i,s,o){let a=LU.indexOf(e)>-1,l=Math.round(n)!=Math.round(this.lineHeight)||this.lineWrapping!=a;if(this.lineWrapping=a,this.lineHeight=n,this.charWidth=r,this.textHeight=i,this.lineLength=s,l){this.heightSamples={};for(let h=0;h<o.length;h++){let f=o[h];f<0?h++:this.heightSamples[Math.floor(f*10)]=!0}}return l}}class Nwe{constructor(e,n){this.from=e,this.heights=n,this.index=0}get more(){return this.index<this.heights.length}}class Bp{constructor(e,n,r,i,s){this.from=e,this.length=n,this.top=r,this.height=i,this._content=s}get type(){return typeof this._content=="number"?Fu.Text:Array.isArray(this._content)?this._content:this._content.type}get to(){return this.from+this.length}get bottom(){return this.top+this.height}get widget(){return this._content instanceof p1?this._content.widget:null}get widgetLineBreaks(){return typeof this._content=="number"?this._content:0}join(e){let n=(Array.isArray(this._content)?this._content:[this]).concat(Array.isArray(e._content)?e._content:[e]);return new Bp(this.from,this.length+e.length,this.top,this.height+e.height,n)}}var go=(function(t){return t[t.ByPos=0]="ByPos",t[t.ByHeight=1]="ByHeight",t[t.ByPosNoHeight=2]="ByPosNoHeight",t})(go||(go={}));const b5=.001;class Lu{constructor(e,n,r=2){this.length=e,this.height=n,this.flags=r}get outdated(){return(this.flags&2)>0}set outdated(e){this.flags=(e?2:0)|this.flags&-3}setHeight(e){this.height!=e&&(Math.abs(this.height-e)>b5&&(l2=!0),this.height=e)}replace(e,n,r){return Lu.of(r)}decomposeLeft(e,n){n.push(this)}decomposeRight(e,n){n.push(this)}applyChanges(e,n,r,i){let s=this,o=r.doc;for(let a=i.length-1;a>=0;a--){let{fromA:l,toA:h,fromB:f,toB:p}=i[a],g=s.lineAt(l,go.ByPosNoHeight,r.setDoc(n),0,0),b=g.to>=h?g:s.lineAt(h,go.ByPosNoHeight,r,0,0);for(p+=b.to-h,h=b.to;a>0&&g.from<=i[a-1].toA;)l=i[a-1].fromA,f=i[a-1].fromB,a--,l<g.from&&(g=s.lineAt(l,go.ByPosNoHeight,r,0,0));f+=g.from-l,l=g.from;let x=$B.build(r.setDoc(o),e,f,p);s=r6(s,s.replace(l,h,x))}return s.updateHeight(r,0)}static empty(){return new sh(0,0)}static of(e){if(e.length==1)return e[0];let n=0,r=e.length,i=0,s=0;for(;;)if(n==r)if(i>s*2){let a=e[n-1];a.break?e.splice(--n,1,a.left,null,a.right):e.splice(--n,1,a.left,a.right),r+=1+a.break,i-=a.size}else if(s>i*2){let a=e[r];a.break?e.splice(r,1,a.left,null,a.right):e.splice(r,1,a.left,a.right),r+=2+a.break,s-=a.size}else break;else if(i<s){let a=e[n++];a&&(i+=a.size)}else{let a=e[--r];a&&(s+=a.size)}let o=0;return e[n-1]==null?(o=1,n--):e[n]==null&&(o=1,r++),new zwe(Lu.of(e.slice(0,n)),o,Lu.of(e.slice(r)))}}function r6(t,e){return t==e?t:(t.constructor!=e.constructor&&(l2=!0),e)}Lu.prototype.size=1;class yne extends Lu{constructor(e,n,r){super(e,n),this.deco=r}blockAt(e,n,r,i){return new Bp(i,this.length,r,this.height,this.deco||0)}lineAt(e,n,r,i,s){return this.blockAt(0,r,i,s)}forEachLine(e,n,r,i,s,o){e<=s+this.length&&n>=s&&o(this.blockAt(0,r,i,s))}updateHeight(e,n=0,r=!1,i){return i&&i.from<=n&&i.more&&this.setHeight(i.heights[i.index++]),this.outdated=!1,this}toString(){return`block(${this.length})`}}class sh extends yne{constructor(e,n){super(e,n,null),this.collapsed=0,this.widgetHeight=0,this.breaks=0}blockAt(e,n,r,i){return new Bp(i,this.length,r,this.height,this.breaks)}replace(e,n,r){let i=r[0];return r.length==1&&(i instanceof sh||i instanceof ml&&i.flags&4)&&Math.abs(this.length-i.length)<10?(i instanceof ml?i=new sh(i.length,this.height):i.height=this.height,this.outdated||(i.outdated=!1),i):Lu.of(r)}updateHeight(e,n=0,r=!1,i){return i&&i.from<=n&&i.more?this.setHeight(i.heights[i.index++]):(r||this.outdated)&&this.setHeight(Math.max(this.widgetHeight,e.heightForLine(this.length-this.collapsed))+this.breaks*e.lineHeight),this.outdated=!1,this}toString(){return`line(${this.length}${this.collapsed?-this.collapsed:""}${this.widgetHeight?":"+this.widgetHeight:""})`}}class ml extends Lu{constructor(e){super(e,0)}heightMetrics(e,n){let r=e.doc.lineAt(n).number,i=e.doc.lineAt(n+this.length).number,s=i-r+1,o,a=0;if(e.lineWrapping){let l=Math.min(this.height,e.lineHeight*s);o=l/s,this.length>s+1&&(a=(this.height-l)/(this.length-s-1))}else o=this.height/s;return{firstLine:r,lastLine:i,perLine:o,perChar:a}}blockAt(e,n,r,i){let{firstLine:s,lastLine:o,perLine:a,perChar:l}=this.heightMetrics(n,i);if(n.lineWrapping){let h=i+(e<n.lineHeight?0:Math.round(Math.max(0,Math.min(1,(e-r)/this.height))*this.length)),f=n.doc.lineAt(h),p=a+f.length*l,g=Math.max(r,e-p/2);return new Bp(f.from,f.length,g,p,0)}else{let h=Math.max(0,Math.min(o-s,Math.floor((e-r)/a))),{from:f,length:p}=n.doc.line(s+h);return new Bp(f,p,r+a*h,a,0)}}lineAt(e,n,r,i,s){if(n==go.ByHeight)return this.blockAt(e,r,i,s);if(n==go.ByPosNoHeight){let{from:b,to:x}=r.doc.lineAt(e);return new Bp(b,x-b,0,0,0)}let{firstLine:o,perLine:a,perChar:l}=this.heightMetrics(r,s),h=r.doc.lineAt(e),f=a+h.length*l,p=h.number-o,g=i+a*p+l*(h.from-s-p);return new Bp(h.from,h.length,Math.max(i,Math.min(g,i+this.height-f)),f,0)}forEachLine(e,n,r,i,s,o){e=Math.max(e,s),n=Math.min(n,s+this.length);let{firstLine:a,perLine:l,perChar:h}=this.heightMetrics(r,s);for(let f=e,p=i;f<=n;){let g=r.doc.lineAt(f);if(f==e){let x=g.number-a;p+=l*x+h*(e-s-x)}let b=l+h*g.length;o(new Bp(g.from,g.length,p,b,0)),p+=b,f=g.to+1}}replace(e,n,r){let i=this.length-n;if(i>0){let s=r[r.length-1];s instanceof ml?r[r.length-1]=new ml(s.length+i):r.push(null,new ml(i-1))}if(e>0){let s=r[0];s instanceof ml?r[0]=new ml(e+s.length):r.unshift(new ml(e-1),null)}return Lu.of(r)}decomposeLeft(e,n){n.push(new ml(e-1),null)}decomposeRight(e,n){n.push(null,new ml(this.length-e-1))}updateHeight(e,n=0,r=!1,i){let s=n+this.length;if(i&&i.from<=n+this.length&&i.more){let o=[],a=Math.max(n,i.from),l=-1;for(i.from>n&&o.push(new ml(i.from-n-1).updateHeight(e,n));a<=s&&i.more;){let f=e.doc.lineAt(a).length;o.length&&o.push(null);let p=i.heights[i.index++];l==-1?l=p:Math.abs(p-l)>=b5&&(l=-2);let g=new sh(f,p);g.outdated=!1,o.push(g),a+=f+1}a<=s&&o.push(null,new ml(s-a).updateHeight(e,a));let h=Lu.of(o);return(l<0||Math.abs(h.height-this.height)>=b5||Math.abs(l-this.heightMetrics(e,n).perLine)>=b5)&&(l2=!0),r6(this,h)}else(r||this.outdated)&&(this.setHeight(e.heightForGap(n,n+this.length)),this.outdated=!1);return this}toString(){return`gap(${this.length})`}}class zwe extends Lu{constructor(e,n,r){super(e.length+n+r.length,e.height+r.height,n|(e.outdated||r.outdated?2:0)),this.left=e,this.right=r,this.size=e.size+r.size}get break(){return this.flags&1}blockAt(e,n,r,i){let s=r+this.left.height;return e<s?this.left.blockAt(e,n,r,i):this.right.blockAt(e,n,s,i+this.left.length+this.break)}lineAt(e,n,r,i,s){let o=i+this.left.height,a=s+this.left.length+this.break,l=n==go.ByHeight?e<o:e<a,h=l?this.left.lineAt(e,n,r,i,s):this.right.lineAt(e,n,r,o,a);if(this.break||(l?h.to<a:h.from>a))return h;let f=n==go.ByPosNoHeight?go.ByPosNoHeight:go.ByPos;return l?h.join(this.right.lineAt(a,f,r,o,a)):this.left.lineAt(a,f,r,i,s).join(h)}forEachLine(e,n,r,i,s,o){let a=i+this.left.height,l=s+this.left.length+this.break;if(this.break)e<l&&this.left.forEachLine(e,n,r,i,s,o),n>=l&&this.right.forEachLine(e,n,r,a,l,o);else{let h=this.lineAt(l,go.ByPos,r,i,s);e<h.from&&this.left.forEachLine(e,h.from-1,r,i,s,o),h.to>=e&&h.from<=n&&o(h),n>h.to&&this.right.forEachLine(h.to+1,n,r,a,l,o)}}replace(e,n,r){let i=this.left.length+this.break;if(n<i)return this.balanced(this.left.replace(e,n,r),this.right);if(e>this.left.length)return this.balanced(this.left,this.right.replace(e-i,n-i,r));let s=[];e>0&&this.decomposeLeft(e,s);let o=s.length;for(let a of r)s.push(a);if(e>0&&BU(s,o-1),n<this.length){let a=s.length;this.decomposeRight(n,s),BU(s,a)}return Lu.of(s)}decomposeLeft(e,n){let r=this.left.length;if(e<=r)return this.left.decomposeLeft(e,n);n.push(this.left),this.break&&(r++,e>=r&&n.push(null)),e>r&&this.right.decomposeLeft(e-r,n)}decomposeRight(e,n){let r=this.left.length,i=r+this.break;if(e>=i)return this.right.decomposeRight(e-i,n);e<r&&this.left.decomposeRight(e,n),this.break&&e<i&&n.push(null),n.push(this.right)}balanced(e,n){return e.size>2*n.size||n.size>2*e.size?Lu.of(this.break?[e,null,n]:[e,n]):(this.left=r6(this.left,e),this.right=r6(this.right,n),this.setHeight(e.height+n.height),this.outdated=e.outdated||n.outdated,this.size=e.size+n.size,this.length=e.length+this.break+n.length,this)}updateHeight(e,n=0,r=!1,i){let{left:s,right:o}=this,a=n+s.length+this.break,l=null;return i&&i.from<=n+s.length&&i.more?l=s=s.updateHeight(e,n,r,i):s.updateHeight(e,n,r),i&&i.from<=a+o.length&&i.more?l=o=o.updateHeight(e,a,r,i):o.updateHeight(e,a,r),l?this.balanced(s,o):(this.height=this.left.height+this.right.height,this.outdated=!1,this)}toString(){return this.left+(this.break?" ":"-")+this.right}}function BU(t,e){let n,r;t[e]==null&&(n=t[e-1])instanceof ml&&(r=t[e+1])instanceof ml&&t.splice(e-1,3,new ml(n.length+1+r.length))}const Qwe=5;class $B{constructor(e,n){this.pos=e,this.oracle=n,this.nodes=[],this.lineStart=-1,this.lineEnd=-1,this.covering=null,this.writtenTo=e}get isCovered(){return this.covering&&this.nodes[this.nodes.length-1]==this.covering}span(e,n){if(this.lineStart>-1){let r=Math.min(n,this.lineEnd),i=this.nodes[this.nodes.length-1];i instanceof sh?i.length+=r-this.pos:(r>this.pos||!this.isCovered)&&this.nodes.push(new sh(r-this.pos,-1)),this.writtenTo=r,n>r&&(this.nodes.push(null),this.writtenTo++,this.lineStart=-1)}this.pos=n}point(e,n,r){if(e<n||r.heightRelevant){let i=r.widget?r.widget.estimatedHeight:0,s=r.widget?r.widget.lineBreaks:0;i<0&&(i=this.oracle.lineHeight);let o=n-e;r.block?this.addBlock(new yne(o,i,r)):(o||s||i>=Qwe)&&this.addLineDeco(i,s,o)}else n>e&&this.span(e,n);this.lineEnd>-1&&this.lineEnd<this.pos&&(this.lineEnd=this.oracle.doc.lineAt(this.pos).to)}enterLine(){if(this.lineStart>-1)return;let{from:e,to:n}=this.oracle.doc.lineAt(this.pos);this.lineStart=e,this.lineEnd=n,this.writtenTo<e&&((this.writtenTo<e-1||this.nodes[this.nodes.length-1]==null)&&this.nodes.push(this.blankContent(this.writtenTo,e-1)),this.nodes.push(null)),this.pos>e&&this.nodes.push(new sh(this.pos-e,-1)),this.writtenTo=this.pos}blankContent(e,n){let r=new ml(n-e);return this.oracle.doc.lineAt(e).to==n&&(r.flags|=4),r}ensureLine(){this.enterLine();let e=this.nodes.length?this.nodes[this.nodes.length-1]:null;if(e instanceof sh)return e;let n=new sh(0,-1);return this.nodes.push(n),n}addBlock(e){this.enterLine();let n=e.deco;n&&n.startSide>0&&!this.isCovered&&this.ensureLine(),this.nodes.push(e),this.writtenTo=this.pos=this.pos+e.length,n&&n.endSide>0&&(this.covering=e)}addLineDeco(e,n,r){let i=this.ensureLine();i.length+=r,i.collapsed+=r,i.widgetHeight=Math.max(i.widgetHeight,e),i.breaks+=n,this.writtenTo=this.pos=this.pos+r}finish(e){let n=this.nodes.length==0?null:this.nodes[this.nodes.length-1];this.lineStart>-1&&!(n instanceof sh)&&!this.isCovered?this.nodes.push(new sh(0,-1)):(this.writtenTo<this.pos||n==null)&&this.nodes.push(this.blankContent(this.writtenTo,this.pos));let r=e;for(let i of this.nodes)i instanceof sh&&i.updateHeight(this.oracle,r),r+=i?i.length:1;return this.nodes}static build(e,n,r,i){let s=new $B(r,e);return as.spans(n,r,i,s,0),s.finish(r)}}function jwe(t,e,n){let r=new Uwe;return as.compare(t,e,n,r,0),r.changes}class Uwe{constructor(){this.changes=[]}compareRange(){}comparePoint(e,n,r,i){(e<n||r&&r.heightRelevant||i&&i.heightRelevant)&&v5(e,n,this.changes,5)}}function Vwe(t,e){let n=t.getBoundingClientRect(),r=t.ownerDocument,i=r.defaultView||window,s=Math.max(0,n.left),o=Math.min(i.innerWidth,n.right),a=Math.max(0,n.top),l=Math.min(i.innerHeight,n.bottom);for(let h=t.parentNode;h&&h!=r.body;)if(h.nodeType==1){let f=h,p=window.getComputedStyle(f);if((f.scrollHeight>f.clientHeight||f.scrollWidth>f.clientWidth)&&p.overflow!="visible"){let g=f.getBoundingClientRect();s=Math.max(s,g.left),o=Math.min(o,g.right),a=Math.max(a,g.top),l=Math.min(h==t.parentNode?i.innerHeight:l,g.bottom)}h=p.position=="absolute"||p.position=="fixed"?f.offsetParent:f.parentNode}else if(h.nodeType==11)h=h.host;else break;return{left:s-n.left,right:Math.max(s,o)-n.left,top:a-(n.top+e),bottom:Math.max(a,l)-(n.top+e)}}function qwe(t){let e=t.getBoundingClientRect(),n=t.ownerDocument.defaultView||window;return e.left<n.innerWidth&&e.right>0&&e.top<n.innerHeight&&e.bottom>0}function Zwe(t,e){let n=t.getBoundingClientRect();return{left:0,right:n.right-n.left,top:e,bottom:n.bottom-(n.top+e)}}class SM{constructor(e,n,r,i){this.from=e,this.to=n,this.size=r,this.displaySize=i}static same(e,n){if(e.length!=n.length)return!1;for(let r=0;r<e.length;r++){let i=e[r],s=n[r];if(i.from!=s.from||i.to!=s.to||i.size!=s.size)return!1}return!0}draw(e,n){return Sr.replace({widget:new Xwe(this.displaySize*(n?e.scaleY:e.scaleX),n)}).range(this.from,this.to)}}class Xwe extends a_{constructor(e,n){super(),this.size=e,this.vertical=n}eq(e){return e.size==this.size&&e.vertical==this.vertical}toDOM(){let e=document.createElement("div");return this.vertical?e.style.height=this.size+"px":(e.style.width=this.size+"px",e.style.height="2px",e.style.display="inline-block"),e}get estimatedHeight(){return this.vertical?this.size:-1}}class NU{constructor(e){this.state=e,this.pixelViewport={left:0,right:window.innerWidth,top:0,bottom:0},this.inView=!0,this.paddingTop=0,this.paddingBottom=0,this.contentDOMWidth=0,this.contentDOMHeight=0,this.editorHeight=0,this.editorWidth=0,this.scrollTop=0,this.scrolledToBottom=!1,this.scaleX=1,this.scaleY=1,this.scrollAnchorPos=0,this.scrollAnchorHeight=-1,this.scaler=zU,this.scrollTarget=null,this.printing=!1,this.mustMeasureContent=!0,this.defaultTextDirection=vo.LTR,this.visibleRanges=[],this.mustEnforceCursorAssoc=!1;let n=e.facet(RB).some(r=>typeof r!="function"&&r.class=="cm-lineWrapping");this.heightOracle=new Bwe(n),this.stateDeco=e.facet(wk).filter(r=>typeof r!="function"),this.heightMap=Lu.empty().applyChanges(this.stateDeco,ts.empty,this.heightOracle.setDoc(e.doc),[new pf(0,0,0,e.doc.length)]);for(let r=0;r<2&&(this.viewport=this.getViewport(0,null),!!this.updateForViewport());r++);this.updateViewportLines(),this.lineGaps=this.ensureLineGaps([]),this.lineGapDeco=Sr.set(this.lineGaps.map(r=>r.draw(this,!1))),this.computeVisibleRanges()}updateForViewport(){let e=[this.viewport],{main:n}=this.state.selection;for(let r=0;r<=1;r++){let i=r?n.head:n.anchor;if(!e.some(({from:s,to:o})=>i>=s&&i<=o)){let{from:s,to:o}=this.lineBlockAt(i);e.push(new HE(s,o))}}return this.viewports=e.sort((r,i)=>r.from-i.from),this.updateScaler()}updateScaler(){let e=this.scaler;return this.scaler=this.heightMap.height<=7e6?zU:new BB(this.heightOracle,this.heightMap,this.viewports),e.eq(this.scaler)?0:2}updateViewportLines(){this.viewportLines=[],this.heightMap.forEachLine(this.viewport.from,this.viewport.to,this.heightOracle.setDoc(this.state.doc),0,0,e=>{this.viewportLines.push(v3(e,this.scaler))})}update(e,n=null){this.state=e.state;let r=this.stateDeco;this.stateDeco=this.state.facet(wk).filter(f=>typeof f!="function");let i=e.changedRanges,s=pf.extendWithRanges(i,jwe(r,this.stateDeco,e?e.changes:Ba.empty(this.state.doc.length))),o=this.heightMap.height,a=this.scrolledToBottom?null:this.scrollAnchorAt(this.scrollTop);$U(),this.heightMap=this.heightMap.applyChanges(this.stateDeco,e.startState.doc,this.heightOracle.setDoc(this.state.doc),s),(this.heightMap.height!=o||l2)&&(e.flags|=2),a?(this.scrollAnchorPos=e.changes.mapPos(a.from,-1),this.scrollAnchorHeight=a.top):(this.scrollAnchorPos=-1,this.scrollAnchorHeight=o);let l=s.length?this.mapViewport(this.viewport,e.changes):this.viewport;(n&&(n.range.head<l.from||n.range.head>l.to)||!this.viewportIsAppropriate(l))&&(l=this.getViewport(0,n));let h=l.from!=this.viewport.from||l.to!=this.viewport.to;this.viewport=l,e.flags|=this.updateForViewport(),(h||!e.changes.empty||e.flags&2)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(this.mapLineGaps(this.lineGaps,e.changes))),e.flags|=this.computeVisibleRanges(e.changes),n&&(this.scrollTarget=n),!this.mustEnforceCursorAssoc&&e.selectionSet&&e.view.lineWrapping&&e.state.selection.main.empty&&e.state.selection.main.assoc&&!e.state.facet(Yte)&&(this.mustEnforceCursorAssoc=!0)}measure(e){let n=e.contentDOM,r=window.getComputedStyle(n),i=this.heightOracle,s=r.whiteSpace;this.defaultTextDirection=r.direction=="rtl"?vo.RTL:vo.LTR;let o=this.heightOracle.mustRefreshForWrapping(s),a=n.getBoundingClientRect(),l=o||this.mustMeasureContent||this.contentDOMHeight!=a.height;this.contentDOMHeight=a.height,this.mustMeasureContent=!1;let h=0,f=0;if(a.width&&a.height){let{scaleX:j,scaleY:Q}=kte(n,a);(j>.005&&Math.abs(this.scaleX-j)>.005||Q>.005&&Math.abs(this.scaleY-Q)>.005)&&(this.scaleX=j,this.scaleY=Q,h|=16,o=l=!0)}let p=(parseInt(r.paddingTop)||0)*this.scaleY,g=(parseInt(r.paddingBottom)||0)*this.scaleY;(this.paddingTop!=p||this.paddingBottom!=g)&&(this.paddingTop=p,this.paddingBottom=g,h|=18),this.editorWidth!=e.scrollDOM.clientWidth&&(i.lineWrapping&&(l=!0),this.editorWidth=e.scrollDOM.clientWidth,h|=16);let b=e.scrollDOM.scrollTop*this.scaleY;this.scrollTop!=b&&(this.scrollAnchorHeight=-1,this.scrollTop=b),this.scrolledToBottom=Ete(e.scrollDOM);let x=(this.printing?Zwe:Vwe)(n,this.paddingTop),k=x.top-this.pixelViewport.top,T=x.bottom-this.pixelViewport.bottom;this.pixelViewport=x;let I=this.pixelViewport.bottom>this.pixelViewport.top&&this.pixelViewport.right>this.pixelViewport.left;if(I!=this.inView&&(this.inView=I,I&&(l=!0)),!this.inView&&!this.scrollTarget&&!qwe(e.dom))return 0;let M=a.width;if((this.contentDOMWidth!=M||this.editorHeight!=e.scrollDOM.clientHeight)&&(this.contentDOMWidth=a.width,this.editorHeight=e.scrollDOM.clientHeight,h|=16),l){let j=e.docView.measureVisibleLineHeights(this.viewport);if(i.mustRefreshForHeights(j)&&(o=!0),o||i.lineWrapping&&Math.abs(M-this.contentDOMWidth)>i.charWidth){let{lineHeight:Q,charWidth:Z,textHeight:q}=e.docView.measureTextSize();o=Q>0&&i.refresh(s,Q,Z,q,Math.max(5,M/Z),j),o&&(e.docView.minWidth=0,h|=16)}k>0&&T>0?f=Math.max(k,T):k<0&&T<0&&(f=Math.min(k,T)),$U();for(let Q of this.viewports){let Z=Q.from==this.viewport.from?j:e.docView.measureVisibleLineHeights(Q);this.heightMap=(o?Lu.empty().applyChanges(this.stateDeco,ts.empty,this.heightOracle,[new pf(0,0,0,e.state.doc.length)]):this.heightMap).updateHeight(i,0,o,new Nwe(Q.from,Z))}l2&&(h|=2)}let B=!this.viewportIsAppropriate(this.viewport,f)||this.scrollTarget&&(this.scrollTarget.range.head<this.viewport.from||this.scrollTarget.range.head>this.viewport.to);return B&&(h&2&&(h|=this.updateScaler()),this.viewport=this.getViewport(f,this.scrollTarget),h|=this.updateForViewport()),(h&2||B)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(o?[]:this.lineGaps,e)),h|=this.computeVisibleRanges(),this.mustEnforceCursorAssoc&&(this.mustEnforceCursorAssoc=!1,e.docView.enforceCursorAssoc()),h}get visibleTop(){return this.scaler.fromDOM(this.pixelViewport.top)}get visibleBottom(){return this.scaler.fromDOM(this.pixelViewport.bottom)}getViewport(e,n){let r=.5-Math.max(-.5,Math.min(.5,e/1e3/2)),i=this.heightMap,s=this.heightOracle,{visibleTop:o,visibleBottom:a}=this,l=new HE(i.lineAt(o-r*1e3,go.ByHeight,s,0,0).from,i.lineAt(a+(1-r)*1e3,go.ByHeight,s,0,0).to);if(n){let{head:h}=n.range;if(h<l.from||h>l.to){let f=Math.min(this.editorHeight,this.pixelViewport.bottom-this.pixelViewport.top),p=i.lineAt(h,go.ByPos,s,0,0),g;n.y=="center"?g=(p.top+p.bottom)/2-f/2:n.y=="start"||n.y=="nearest"&&h<l.from?g=p.top:g=p.bottom-f,l=new HE(i.lineAt(g-1e3/2,go.ByHeight,s,0,0).from,i.lineAt(g+f+1e3/2,go.ByHeight,s,0,0).to)}}return l}mapViewport(e,n){let r=n.mapPos(e.from,-1),i=n.mapPos(e.to,1);return new HE(this.heightMap.lineAt(r,go.ByPos,this.heightOracle,0,0).from,this.heightMap.lineAt(i,go.ByPos,this.heightOracle,0,0).to)}viewportIsAppropriate({from:e,to:n},r=0){if(!this.inView)return!0;let{top:i}=this.heightMap.lineAt(e,go.ByPos,this.heightOracle,0,0),{bottom:s}=this.heightMap.lineAt(n,go.ByPos,this.heightOracle,0,0),{visibleTop:o,visibleBottom:a}=this;return(e==0||i<=o-Math.max(10,Math.min(-r,250)))&&(n==this.state.doc.length||s>=a+Math.max(10,Math.min(r,250)))&&i>o-2*1e3&&s<a+2*1e3}mapLineGaps(e,n){if(!e.length||n.empty)return e;let r=[];for(let i of e)n.touchesRange(i.from,i.to)||r.push(new SM(n.mapPos(i.from),n.mapPos(i.to),i.size,i.displaySize));return r}ensureLineGaps(e,n){let r=this.heightOracle.lineWrapping,i=r?1e4:2e3,s=i>>1,o=i<<1;if(this.defaultTextDirection!=vo.LTR&&!r)return[];let a=[],l=(f,p,g,b)=>{if(p-f<s)return;let x=this.state.selection.main,k=[x.from];x.empty||k.push(x.to);for(let I of k)if(I>f&&I<p){l(f,I-10,g,b),l(I+10,p,g,b);return}let T=Gwe(e,I=>I.from>=g.from&&I.to<=g.to&&Math.abs(I.from-f)<s&&Math.abs(I.to-p)<s&&!k.some(M=>I.from<M&&I.to>M));if(!T){if(p<g.to&&n&&r&&n.visibleRanges.some(B=>B.from<=p&&B.to>=p)){let B=n.moveToLineBoundary(kt.cursor(p),!1,!0).head;B>f&&(p=B)}let I=this.gapSize(g,f,p,b),M=r||I<2e6?I:2e6;T=new SM(f,p,I,M)}a.push(T)},h=f=>{if(f.length<o||f.type!=Fu.Text)return;let p=Wwe(f.from,f.to,this.stateDeco);if(p.total<o)return;let g=this.scrollTarget?this.scrollTarget.range.head:null,b,x;if(r){let k=i/this.heightOracle.lineLength*this.heightOracle.lineHeight,T,I;if(g!=null){let M=JE(p,g),B=((this.visibleBottom-this.visibleTop)/2+k)/f.height;T=M-B,I=M+B}else T=(this.visibleTop-f.top-k)/f.height,I=(this.visibleBottom-f.top+k)/f.height;b=KE(p,T),x=KE(p,I)}else{let k=p.total*this.heightOracle.charWidth,T=i*this.heightOracle.charWidth,I=0;if(k>2e6)for(let Z of e)Z.from>=f.from&&Z.from<f.to&&Z.size!=Z.displaySize&&Z.from*this.heightOracle.charWidth+I<this.pixelViewport.left&&(I=Z.size-Z.displaySize);let M=this.pixelViewport.left+I,B=this.pixelViewport.right+I,j,Q;if(g!=null){let Z=JE(p,g),q=((B-M)/2+T)/k;j=Z-q,Q=Z+q}else j=(M-T)/k,Q=(B+T)/k;b=KE(p,j),x=KE(p,Q)}b>f.from&&l(f.from,b,f,p),x<f.to&&l(x,f.to,f,p)};for(let f of this.viewportLines)Array.isArray(f.type)?f.type.forEach(h):h(f);return a}gapSize(e,n,r,i){let s=JE(i,r)-JE(i,n);return this.heightOracle.lineWrapping?e.height*s:i.total*this.heightOracle.charWidth*s}updateLineGaps(e){SM.same(e,this.lineGaps)||(this.lineGaps=e,this.lineGapDeco=Sr.set(e.map(n=>n.draw(this,this.heightOracle.lineWrapping))))}computeVisibleRanges(e){let n=this.stateDeco;this.lineGaps.length&&(n=n.concat(this.lineGapDeco));let r=[];as.spans(n,this.viewport.from,this.viewport.to,{span(s,o){r.push({from:s,to:o})},point(){}},20);let i=0;if(r.length!=this.visibleRanges.length)i=12;else for(let s=0;s<r.length&&!(i&8);s++){let o=this.visibleRanges[s],a=r[s];(o.from!=a.from||o.to!=a.to)&&(i|=4,e&&e.mapPos(o.from,-1)==a.from&&e.mapPos(o.to,1)==a.to||(i|=8))}return this.visibleRanges=r,i}lineBlockAt(e){return e>=this.viewport.from&&e<=this.viewport.to&&this.viewportLines.find(n=>n.from<=e&&n.to>=e)||v3(this.heightMap.lineAt(e,go.ByPos,this.heightOracle,0,0),this.scaler)}lineBlockAtHeight(e){return e>=this.viewportLines[0].top&&e<=this.viewportLines[this.viewportLines.length-1].bottom&&this.viewportLines.find(n=>n.top<=e&&n.bottom>=e)||v3(this.heightMap.lineAt(this.scaler.fromDOM(e),go.ByHeight,this.heightOracle,0,0),this.scaler)}scrollAnchorAt(e){let n=this.lineBlockAtHeight(e+8);return n.from>=this.viewport.from||this.viewportLines[0].top-e>200?n:this.viewportLines[0]}elementAtHeight(e){return v3(this.heightMap.blockAt(this.scaler.fromDOM(e),this.heightOracle,0,0),this.scaler)}get docHeight(){return this.scaler.toDOM(this.heightMap.height)}get contentHeight(){return this.docHeight+this.paddingTop+this.paddingBottom}}class HE{constructor(e,n){this.from=e,this.to=n}}function Wwe(t,e,n){let r=[],i=t,s=0;return as.spans(n,t,e,{span(){},point(o,a){o>i&&(r.push({from:i,to:o}),s+=o-i),i=a}},20),i<e&&(r.push({from:i,to:e}),s+=e-i),{total:s,ranges:r}}function KE({total:t,ranges:e},n){if(n<=0)return e[0].from;if(n>=1)return e[e.length-1].to;let r=Math.floor(t*n);for(let i=0;;i++){let{from:s,to:o}=e[i],a=o-s;if(r<=a)return s+r;r-=a}}function JE(t,e){let n=0;for(let{from:r,to:i}of t.ranges){if(e<=i){n+=e-r;break}n+=i-r}return n/t.total}function Gwe(t,e){for(let n of t)if(e(n))return n}const zU={toDOM(t){return t},fromDOM(t){return t},scale:1,eq(t){return t==this}};class BB{constructor(e,n,r){let i=0,s=0,o=0;this.viewports=r.map(({from:a,to:l})=>{let h=n.lineAt(a,go.ByPos,e,0,0).top,f=n.lineAt(l,go.ByPos,e,0,0).bottom;return i+=f-h,{from:a,to:l,top:h,bottom:f,domTop:0,domBottom:0}}),this.scale=(7e6-i)/(n.height-i);for(let a of this.viewports)a.domTop=o+(a.top-s)*this.scale,o=a.domBottom=a.domTop+(a.bottom-a.top),s=a.bottom}toDOM(e){for(let n=0,r=0,i=0;;n++){let s=n<this.viewports.length?this.viewports[n]:null;if(!s||e<s.top)return i+(e-r)*this.scale;if(e<=s.bottom)return s.domTop+(e-s.top);r=s.bottom,i=s.domBottom}}fromDOM(e){for(let n=0,r=0,i=0;;n++){let s=n<this.viewports.length?this.viewports[n]:null;if(!s||e<s.domTop)return r+(e-i)/this.scale;if(e<=s.domBottom)return s.top+(e-s.domTop);r=s.bottom,i=s.domBottom}}eq(e){return e instanceof BB?this.scale==e.scale&&this.viewports.length==e.viewports.length&&this.viewports.every((n,r)=>n.from==e.viewports[r].from&&n.to==e.viewports[r].to):!1}}function v3(t,e){if(e.scale==1)return t;let n=e.toDOM(t.top),r=e.toDOM(t.bottom);return new Bp(t.from,t.length,n,r-n,Array.isArray(t._content)?t._content.map(i=>v3(i,e)):t._content)}const e4=Rn.define({combine:t=>t.join(" ")}),VF=Rn.define({combine:t=>t.indexOf(!0)>-1}),qF=f1.newName(),vne=f1.newName(),bne=f1.newName(),_ne={"&light":"."+vne,"&dark":"."+bne};function ZF(t,e,n){return new f1(e,{finish(r){return/&/.test(r)?r.replace(/&\w*/,i=>{if(i=="&")return t;if(!n||!n[i])throw new RangeError(`Unsupported selector: ${i}`);return n[i]}):t+" "+r}})}const Ywe=ZF("."+qF,{"&":{position:"relative !important",boxSizing:"border-box","&.cm-focused":{outline:"1px dotted #212121"},display:"flex !important",flexDirection:"column"},".cm-scroller":{display:"flex !important",alignItems:"flex-start !important",fontFamily:"monospace",lineHeight:1.4,height:"100%",overflowX:"auto",position:"relative",zIndex:0,overflowAnchor:"none"},".cm-content":{margin:0,flexGrow:2,flexShrink:0,display:"block",whiteSpace:"pre",wordWrap:"normal",boxSizing:"border-box",minHeight:"100%",padding:"4px 0",outline:"none","&[contenteditable=true]":{WebkitUserModify:"read-write-plaintext-only"}},".cm-lineWrapping":{whiteSpace_fallback:"pre-wrap",whiteSpace:"break-spaces",wordBreak:"break-word",overflowWrap:"anywhere",flexShrink:1},"&light .cm-content":{caretColor:"black"},"&dark .cm-content":{caretColor:"white"},".cm-line":{display:"block",padding:"0 2px 0 6px"},".cm-layer":{position:"absolute",left:0,top:0,contain:"size style","& > *":{position:"absolute"}},"&light .cm-selectionBackground":{background:"#d9d9d9"},"&dark .cm-selectionBackground":{background:"#222"},"&light.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#d7d4f0"},"&dark.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#233"},".cm-cursorLayer":{pointerEvents:"none"},"&.cm-focused > .cm-scroller > .cm-cursorLayer":{animation:"steps(1) cm-blink 1.2s infinite"},"@keyframes cm-blink":{"0%":{},"50%":{opacity:0},"100%":{}},"@keyframes cm-blink2":{"0%":{},"50%":{opacity:0},"100%":{}},".cm-cursor, .cm-dropCursor":{borderLeft:"1.2px solid black",marginLeft:"-0.6px",pointerEvents:"none"},".cm-cursor":{display:"none"},"&dark .cm-cursor":{borderLeftColor:"#ddd"},".cm-dropCursor":{position:"absolute"},"&.cm-focused > .cm-scroller > .cm-cursorLayer .cm-cursor":{display:"block"},".cm-iso":{unicodeBidi:"isolate"},".cm-announced":{position:"fixed",top:"-10000px"},"@media print":{".cm-announced":{display:"none"}},"&light .cm-activeLine":{backgroundColor:"#cceeff44"},"&dark .cm-activeLine":{backgroundColor:"#99eeff33"},"&light .cm-specialChar":{color:"red"},"&dark .cm-specialChar":{color:"#f78"},".cm-gutters":{flexShrink:0,display:"flex",height:"100%",boxSizing:"border-box",zIndex:200},".cm-gutters-before":{insetInlineStart:0},".cm-gutters-after":{insetInlineEnd:0},"&light .cm-gutters":{backgroundColor:"#f5f5f5",color:"#6c6c6c",border:"0px solid #ddd","&.cm-gutters-before":{borderRightWidth:"1px"},"&.cm-gutters-after":{borderLeftWidth:"1px"}},"&dark .cm-gutters":{backgroundColor:"#333338",color:"#ccc"},".cm-gutter":{display:"flex !important",flexDirection:"column",flexShrink:0,boxSizing:"border-box",minHeight:"100%",overflow:"hidden"},".cm-gutterElement":{boxSizing:"border-box"},".cm-lineNumbers .cm-gutterElement":{padding:"0 3px 0 5px",minWidth:"20px",textAlign:"right",whiteSpace:"nowrap"},"&light .cm-activeLineGutter":{backgroundColor:"#e2f2ff"},"&dark .cm-activeLineGutter":{backgroundColor:"#222227"},".cm-panels":{boxSizing:"border-box",position:"sticky",left:0,right:0,zIndex:300},"&light .cm-panels":{backgroundColor:"#f5f5f5",color:"black"},"&light .cm-panels-top":{borderBottom:"1px solid #ddd"},"&light .cm-panels-bottom":{borderTop:"1px solid #ddd"},"&dark .cm-panels":{backgroundColor:"#333338",color:"white"},".cm-dialog":{padding:"2px 19px 4px 6px",position:"relative","& label":{fontSize:"80%"}},".cm-dialog-close":{position:"absolute",top:"3px",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",fontSize:"14px",padding:"0"},".cm-tab":{display:"inline-block",overflow:"hidden",verticalAlign:"bottom"},".cm-widgetBuffer":{verticalAlign:"text-top",height:"1em",width:0,display:"inline"},".cm-placeholder":{color:"#888",display:"inline-block",verticalAlign:"top",userSelect:"none"},".cm-highlightSpace":{backgroundImage:"radial-gradient(circle at 50% 55%, #aaa 20%, transparent 5%)",backgroundPosition:"center"},".cm-highlightTab":{backgroundImage:`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="200" height="20"><path stroke="%23888" stroke-width="1" fill="none" d="M1 10H196L190 5M190 15L196 10M197 4L197 16"/></svg>')`,backgroundSize:"auto 100%",backgroundPosition:"right 90%",backgroundRepeat:"no-repeat"},".cm-trailingSpace":{backgroundColor:"#ff332255"},".cm-button":{verticalAlign:"middle",color:"inherit",fontSize:"70%",padding:".2em 1em",borderRadius:"1px"},"&light .cm-button":{backgroundImage:"linear-gradient(#eff1f5, #d9d9df)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#b4b4b4, #d0d3d6)"}},"&dark .cm-button":{backgroundImage:"linear-gradient(#393939, #111)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#111, #333)"}},".cm-textfield":{verticalAlign:"middle",color:"inherit",fontSize:"70%",border:"1px solid silver",padding:".2em .5em"},"&light .cm-textfield":{backgroundColor:"white"},"&dark .cm-textfield":{border:"1px solid #555",backgroundColor:"inherit"}},_ne),Hwe={childList:!0,characterData:!0,subtree:!0,attributes:!0,characterDataOldValue:!0},kM=wn.ie&&wn.ie_version<=11;class Kwe{constructor(e){this.view=e,this.active=!1,this.editContext=null,this.selectionRange=new Rxe,this.selectionChanged=!1,this.delayedFlush=-1,this.resizeTimeout=-1,this.queue=[],this.delayedAndroidKey=null,this.flushingAndroidKey=-1,this.lastChange=0,this.scrollTargets=[],this.intersection=null,this.resizeScroll=null,this.intersecting=!1,this.gapIntersection=null,this.gaps=[],this.printQuery=null,this.parentCheck=-1,this.dom=e.contentDOM,this.observer=new MutationObserver(n=>{for(let r of n)this.queue.push(r);(wn.ie&&wn.ie_version<=11||wn.ios&&e.composing)&&n.some(r=>r.type=="childList"&&r.removedNodes.length||r.type=="characterData"&&r.oldValue.length>r.target.nodeValue.length)?this.flushSoon():this.flush()}),window.EditContext&&wn.android&&e.constructor.EDIT_CONTEXT!==!1&&!(wn.chrome&&wn.chrome_version<126)&&(this.editContext=new e2e(e),e.state.facet(Lg)&&(e.contentDOM.editContext=this.editContext.editContext)),kM&&(this.onCharData=n=>{this.queue.push({target:n.target,type:"characterData",oldValue:n.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),this.onResize=this.onResize.bind(this),this.onPrint=this.onPrint.bind(this),this.onScroll=this.onScroll.bind(this),window.matchMedia&&(this.printQuery=window.matchMedia("print")),typeof ResizeObserver=="function"&&(this.resizeScroll=new ResizeObserver(()=>{var n;((n=this.view.docView)===null||n===void 0?void 0:n.lastUpdate)<Date.now()-75&&this.onResize()}),this.resizeScroll.observe(e.scrollDOM)),this.addWindowListeners(this.win=e.win),this.start(),typeof IntersectionObserver=="function"&&(this.intersection=new IntersectionObserver(n=>{this.parentCheck<0&&(this.parentCheck=setTimeout(this.listenForScroll.bind(this),1e3)),n.length>0&&n[n.length-1].intersectionRatio>0!=this.intersecting&&(this.intersecting=!this.intersecting,this.intersecting!=this.view.inView&&this.onScrollChanged(document.createEvent("Event")))},{threshold:[0,.001]}),this.intersection.observe(this.dom),this.gapIntersection=new IntersectionObserver(n=>{n.length>0&&n[n.length-1].intersectionRatio>0&&this.onScrollChanged(document.createEvent("Event"))},{})),this.listenForScroll(),this.readSelectionRange()}onScrollChanged(e){this.view.inputState.runHandlers("scroll",e),this.intersecting&&this.view.measure()}onScroll(e){this.intersecting&&this.flush(!1),this.editContext&&this.view.requestMeasure(this.editContext.measureReq),this.onScrollChanged(e)}onResize(){this.resizeTimeout<0&&(this.resizeTimeout=setTimeout(()=>{this.resizeTimeout=-1,this.view.requestMeasure()},50))}onPrint(e){(e.type=="change"||!e.type)&&!e.matches||(this.view.viewState.printing=!0,this.view.measure(),setTimeout(()=>{this.view.viewState.printing=!1,this.view.requestMeasure()},500))}updateGaps(e){if(this.gapIntersection&&(e.length!=this.gaps.length||this.gaps.some((n,r)=>n!=e[r]))){this.gapIntersection.disconnect();for(let n of e)this.gapIntersection.observe(n);this.gaps=e}}onSelectionChange(e){let n=this.selectionChanged;if(!this.readSelectionRange()||this.delayedAndroidKey)return;let{view:r}=this,i=this.selectionRange;if(r.state.facet(Lg)?r.root.activeElement!=this.dom:!y5(this.dom,i))return;let s=i.anchorNode&&r.docView.nearest(i.anchorNode);if(s&&s.ignoreEvent(e)){n||(this.selectionChanged=!1);return}(wn.ie&&wn.ie_version<=11||wn.android&&wn.chrome)&&!r.state.selection.main.empty&&i.focusNode&&N3(i.focusNode,i.focusOffset,i.anchorNode,i.anchorOffset)?this.flushSoon():this.flush(!1)}readSelectionRange(){let{view:e}=this,n=_k(e.root);if(!n)return!1;let r=wn.safari&&e.root.nodeType==11&&e.root.activeElement==this.dom&&Jwe(this.view,n)||n;if(!r||this.selectionRange.eq(r))return!1;let i=y5(this.dom,r);return i&&!this.selectionChanged&&e.inputState.lastFocusTime>Date.now()-200&&e.inputState.lastTouchTime<Date.now()-300&&Lxe(this.dom,r)?(this.view.inputState.lastFocusTime=0,e.docView.updateSelection(),!1):(this.selectionRange.setRange(r),i&&(this.selectionChanged=!0),!0)}setSelectionRange(e,n){this.selectionRange.set(e.node,e.offset,n.node,n.offset),this.selectionChanged=!1}clearSelectionRange(){this.selectionRange.set(null,0,null,0)}listenForScroll(){this.parentCheck=-1;let e=0,n=null;for(let r=this.dom;r;)if(r.nodeType==1)!n&&e<this.scrollTargets.length&&this.scrollTargets[e]==r?e++:n||(n=this.scrollTargets.slice(0,e)),n&&n.push(r),r=r.assignedSlot||r.parentNode;else if(r.nodeType==11)r=r.host;else break;if(e<this.scrollTargets.length&&!n&&(n=this.scrollTargets.slice(0,e)),n){for(let r of this.scrollTargets)r.removeEventListener("scroll",this.onScroll);for(let r of this.scrollTargets=n)r.addEventListener("scroll",this.onScroll)}}ignore(e){if(!this.active)return e();try{return this.stop(),e()}finally{this.start(),this.clear()}}start(){this.active||(this.observer.observe(this.dom,Hwe),kM&&this.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.active=!0)}stop(){this.active&&(this.active=!1,this.observer.disconnect(),kM&&this.dom.removeEventListener("DOMCharacterDataModified",this.onCharData))}clear(){this.processRecords(),this.queue.length=0,this.selectionChanged=!1}delayAndroidKey(e,n){var r;if(!this.delayedAndroidKey){let i=()=>{let s=this.delayedAndroidKey;s&&(this.clearDelayedAndroidKey(),this.view.inputState.lastKeyCode=s.keyCode,this.view.inputState.lastKeyTime=Date.now(),!this.flush()&&s.force&&bw(this.dom,s.key,s.keyCode))};this.flushingAndroidKey=this.view.win.requestAnimationFrame(i)}(!this.delayedAndroidKey||e=="Enter")&&(this.delayedAndroidKey={key:e,keyCode:n,force:this.lastChange<Date.now()-50||!!(!((r=this.delayedAndroidKey)===null||r===void 0)&&r.force)})}clearDelayedAndroidKey(){this.win.cancelAnimationFrame(this.flushingAndroidKey),this.delayedAndroidKey=null,this.flushingAndroidKey=-1}flushSoon(){this.delayedFlush<0&&(this.delayedFlush=this.view.win.requestAnimationFrame(()=>{this.delayedFlush=-1,this.flush()}))}forceFlush(){this.delayedFlush>=0&&(this.view.win.cancelAnimationFrame(this.delayedFlush),this.delayedFlush=-1),this.flush()}pendingRecords(){for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}processRecords(){let e=this.pendingRecords();e.length&&(this.queue=[]);let n=-1,r=-1,i=!1;for(let s of e){let o=this.readMutation(s);o&&(o.typeOver&&(i=!0),n==-1?{from:n,to:r}=o:(n=Math.min(o.from,n),r=Math.max(o.to,r)))}return{from:n,to:r,typeOver:i}}readChange(){let{from:e,to:n,typeOver:r}=this.processRecords(),i=this.selectionChanged&&y5(this.dom,this.selectionRange);if(e<0&&!i)return null;e>-1&&(this.lastChange=Date.now()),this.view.inputState.lastFocusTime=0,this.selectionChanged=!1;let s=new ywe(this.view,e,n,r);return this.view.docView.domChanged={newSel:s.newSel?s.newSel.main:null},s}flush(e=!0){if(this.delayedFlush>=0||this.delayedAndroidKey)return!1;e&&this.readSelectionRange();let n=this.readChange();if(!n)return this.view.requestMeasure(),!1;let r=this.view.state,i=ane(this.view,n);return this.view.state==r&&(n.domChanged||n.newSel&&!n.newSel.main.eq(this.view.state.selection.main))&&this.view.update([]),i}readMutation(e){let n=this.view.docView.nearest(e.target);if(!n||n.ignoreMutation(e))return null;if(n.markDirty(e.type=="attributes"),e.type=="attributes"&&(n.flags|=4),e.type=="childList"){let r=QU(n,e.previousSibling||e.target.previousSibling,-1),i=QU(n,e.nextSibling||e.target.nextSibling,1);return{from:r?n.posAfter(r):n.posAtStart,to:i?n.posBefore(i):n.posAtEnd,typeOver:!1}}else return e.type=="characterData"?{from:n.posAtStart,to:n.posAtEnd,typeOver:e.target.nodeValue==e.oldValue}:null}setWindow(e){e!=this.win&&(this.removeWindowListeners(this.win),this.win=e,this.addWindowListeners(this.win))}addWindowListeners(e){e.addEventListener("resize",this.onResize),this.printQuery?this.printQuery.addEventListener?this.printQuery.addEventListener("change",this.onPrint):this.printQuery.addListener(this.onPrint):e.addEventListener("beforeprint",this.onPrint),e.addEventListener("scroll",this.onScroll),e.document.addEventListener("selectionchange",this.onSelectionChange)}removeWindowListeners(e){e.removeEventListener("scroll",this.onScroll),e.removeEventListener("resize",this.onResize),this.printQuery?this.printQuery.removeEventListener?this.printQuery.removeEventListener("change",this.onPrint):this.printQuery.removeListener(this.onPrint):e.removeEventListener("beforeprint",this.onPrint),e.document.removeEventListener("selectionchange",this.onSelectionChange)}update(e){this.editContext&&(this.editContext.update(e),e.startState.facet(Lg)!=e.state.facet(Lg)&&(e.view.contentDOM.editContext=e.state.facet(Lg)?this.editContext.editContext:null))}destroy(){var e,n,r;this.stop(),(e=this.intersection)===null||e===void 0||e.disconnect(),(n=this.gapIntersection)===null||n===void 0||n.disconnect(),(r=this.resizeScroll)===null||r===void 0||r.disconnect();for(let i of this.scrollTargets)i.removeEventListener("scroll",this.onScroll);this.removeWindowListeners(this.win),clearTimeout(this.parentCheck),clearTimeout(this.resizeTimeout),this.win.cancelAnimationFrame(this.delayedFlush),this.win.cancelAnimationFrame(this.flushingAndroidKey),this.editContext&&(this.view.contentDOM.editContext=null,this.editContext.destroy())}}function QU(t,e,n){for(;e;){let r=Ns.get(e);if(r&&r.parent==t)return r;let i=e.parentNode;e=i!=t.dom?i:n>0?e.nextSibling:e.previousSibling}return null}function jU(t,e){let n=e.startContainer,r=e.startOffset,i=e.endContainer,s=e.endOffset,o=t.docView.domAtPos(t.state.selection.main.anchor);return N3(o.node,o.offset,i,s)&&([n,r,i,s]=[i,s,n,r]),{anchorNode:n,anchorOffset:r,focusNode:i,focusOffset:s}}function Jwe(t,e){if(e.getComposedRanges){let i=e.getComposedRanges(t.root)[0];if(i)return jU(t,i)}let n=null;function r(i){i.preventDefault(),i.stopImmediatePropagation(),n=i.getTargetRanges()[0]}return t.contentDOM.addEventListener("beforeinput",r,!0),t.dom.ownerDocument.execCommand("indent"),t.contentDOM.removeEventListener("beforeinput",r,!0),n?jU(t,n):null}class e2e{constructor(e){this.from=0,this.to=0,this.pendingContextChange=null,this.handlers=Object.create(null),this.composing=null,this.resetRange(e.state);let n=this.editContext=new window.EditContext({text:e.state.doc.sliceString(this.from,this.to),selectionStart:this.toContextPos(Math.max(this.from,Math.min(this.to,e.state.selection.main.anchor))),selectionEnd:this.toContextPos(e.state.selection.main.head)});this.handlers.textupdate=r=>{let i=e.state.selection.main,{anchor:s,head:o}=i,a=this.toEditorPos(r.updateRangeStart),l=this.toEditorPos(r.updateRangeEnd);e.inputState.composing>=0&&!this.composing&&(this.composing={contextBase:r.updateRangeStart,editorBase:a,drifted:!1});let h=l-a>r.text.length;a==this.from&&s<this.from?a=s:l==this.to&&s>this.to&&(l=s);let f=lne(e.state.sliceDoc(a,l),r.text,(h?i.from:i.to)-a,h?"end":null);if(!f){let g=kt.single(this.toEditorPos(r.selectionStart),this.toEditorPos(r.selectionEnd));g.main.eq(i)||e.dispatch({selection:g,userEvent:"select"});return}let p={from:f.from+a,to:f.toA+a,insert:ts.of(r.text.slice(f.from,f.toB).split(`
`))};if((wn.mac||wn.android)&&p.from==o-1&&/^\. ?$/.test(r.text)&&e.contentDOM.getAttribute("autocorrect")=="off"&&(p={from:a,to:l,insert:ts.of([r.text.replace("."," ")])}),this.pendingContextChange=p,!e.state.readOnly){let g=this.to-this.from+(p.to-p.from+p.insert.length);LB(e,p,kt.single(this.toEditorPos(r.selectionStart,g),this.toEditorPos(r.selectionEnd,g)))}this.pendingContextChange&&(this.revertPending(e.state),this.setSelection(e.state)),p.from<p.to&&!p.insert.length&&e.inputState.composing>=0&&!/[\\p{Alphabetic}\\p{Number}_]/.test(n.text.slice(Math.max(0,r.updateRangeStart-1),Math.min(n.text.length,r.updateRangeStart+1)))&&this.handlers.compositionend(r)},this.handlers.characterboundsupdate=r=>{let i=[],s=null;for(let o=this.toEditorPos(r.rangeStart),a=this.toEditorPos(r.rangeEnd);o<a;o++){let l=e.coordsForChar(o);s=l&&new DOMRect(l.left,l.top,l.right-l.left,l.bottom-l.top)||s||new DOMRect,i.push(s)}n.updateCharacterBounds(r.rangeStart,i)},this.handlers.textformatupdate=r=>{let i=[];for(let s of r.getTextFormats()){let o=s.underlineStyle,a=s.underlineThickness;if(!/none/i.test(o)&&!/none/i.test(a)){let l=this.toEditorPos(s.rangeStart),h=this.toEditorPos(s.rangeEnd);if(l<h){let f=`text-decoration: underline ${/^[a-z]/.test(o)?o+" ":o=="Dashed"?"dashed ":o=="Squiggle"?"wavy ":""}${/thin/i.test(a)?1:2}px`;i.push(Sr.mark({attributes:{style:f}}).range(l,h))}}}e.dispatch({effects:Kte.of(Sr.set(i))})},this.handlers.compositionstart=()=>{e.inputState.composing<0&&(e.inputState.composing=0,e.inputState.compositionFirstChange=!0)},this.handlers.compositionend=()=>{if(e.inputState.composing=-1,e.inputState.compositionFirstChange=null,this.composing){let{drifted:r}=this.composing;this.composing=null,r&&this.reset(e.state)}};for(let r in this.handlers)n.addEventListener(r,this.handlers[r]);this.measureReq={read:r=>{this.editContext.updateControlBounds(r.contentDOM.getBoundingClientRect());let i=_k(r.root);i&&i.rangeCount&&this.editContext.updateSelectionBounds(i.getRangeAt(0).getBoundingClientRect())}}}applyEdits(e){let n=0,r=!1,i=this.pendingContextChange;return e.changes.iterChanges((s,o,a,l,h)=>{if(r)return;let f=h.length-(o-s);if(i&&o>=i.to)if(i.from==s&&i.to==o&&i.insert.eq(h)){i=this.pendingContextChange=null,n+=f,this.to+=f;return}else i=null,this.revertPending(e.state);if(s+=n,o+=n,o<=this.from)this.from+=f,this.to+=f;else if(s<this.to){if(s<this.from||o>this.to||this.to-this.from+h.length>3e4){r=!0;return}this.editContext.updateText(this.toContextPos(s),this.toContextPos(o),h.toString()),this.to+=f}n+=f}),i&&!r&&this.revertPending(e.state),!r}update(e){let n=this.pendingContextChange,r=e.startState.selection.main;this.composing&&(this.composing.drifted||!e.changes.touchesRange(r.from,r.to)&&e.transactions.some(i=>!i.isUserEvent("input.type")&&i.changes.touchesRange(this.from,this.to)))?(this.composing.drifted=!0,this.composing.editorBase=e.changes.mapPos(this.composing.editorBase)):!this.applyEdits(e)||!this.rangeIsValid(e.state)?(this.pendingContextChange=null,this.reset(e.state)):(e.docChanged||e.selectionSet||n)&&this.setSelection(e.state),(e.geometryChanged||e.docChanged||e.selectionSet)&&e.view.requestMeasure(this.measureReq)}resetRange(e){let{head:n}=e.selection.main;this.from=Math.max(0,n-1e4),this.to=Math.min(e.doc.length,n+1e4)}reset(e){this.resetRange(e),this.editContext.updateText(0,this.editContext.text.length,e.doc.sliceString(this.from,this.to)),this.setSelection(e)}revertPending(e){let n=this.pendingContextChange;this.pendingContextChange=null,this.editContext.updateText(this.toContextPos(n.from),this.toContextPos(n.from+n.insert.length),e.doc.sliceString(n.from,n.to))}setSelection(e){let{main:n}=e.selection,r=this.toContextPos(Math.max(this.from,Math.min(this.to,n.anchor))),i=this.toContextPos(n.head);(this.editContext.selectionStart!=r||this.editContext.selectionEnd!=i)&&this.editContext.updateSelection(r,i)}rangeIsValid(e){let{head:n}=e.selection.main;return!(this.from>0&&n-this.from<500||this.to<e.doc.length&&this.to-n<500||this.to-this.from>1e4*3)}toEditorPos(e,n=this.to-this.from){e=Math.min(e,n);let r=this.composing;return r&&r.drifted?r.editorBase+(e-r.contextBase):e+this.from}toContextPos(e){let n=this.composing;return n&&n.drifted?n.contextBase+(e-n.editorBase):e-this.from}destroy(){for(let e in this.handlers)this.editContext.removeEventListener(e,this.handlers[e])}}class Cn{get state(){return this.viewState.state}get viewport(){return this.viewState.viewport}get visibleRanges(){return this.viewState.visibleRanges}get inView(){return this.viewState.inView}get composing(){return!!this.inputState&&this.inputState.composing>0}get compositionStarted(){return!!this.inputState&&this.inputState.composing>=0}get root(){return this._root}get win(){return this.dom.ownerDocument.defaultView||window}constructor(e={}){var n;this.plugins=[],this.pluginMap=new Map,this.editorAttrs={},this.contentAttrs={},this.bidiCache=[],this.destroyed=!1,this.updateState=2,this.measureScheduled=-1,this.measureRequests=[],this.contentDOM=document.createElement("div"),this.scrollDOM=document.createElement("div"),this.scrollDOM.tabIndex=-1,this.scrollDOM.className="cm-scroller",this.scrollDOM.appendChild(this.contentDOM),this.announceDOM=document.createElement("div"),this.announceDOM.className="cm-announced",this.announceDOM.setAttribute("aria-live","polite"),this.dom=document.createElement("div"),this.dom.appendChild(this.announceDOM),this.dom.appendChild(this.scrollDOM),e.parent&&e.parent.appendChild(this.dom);let{dispatch:r}=e;this.dispatchTransactions=e.dispatchTransactions||r&&(i=>i.forEach(s=>r(s,this)))||(i=>this.update(i)),this.dispatch=this.dispatch.bind(this),this._root=e.root||Fxe(e.parent)||document,this.viewState=new NU(e.state||Xi.create(e)),e.scrollTo&&e.scrollTo.is(WE)&&(this.viewState.scrollTarget=e.scrollTo.value.clip(this.viewState.state)),this.plugins=this.state.facet(Yx).map(i=>new xM(i));for(let i of this.plugins)i.update(this);this.observer=new Kwe(this),this.inputState=new xwe(this),this.inputState.ensureHandlers(this.plugins),this.docView=new _U(this),this.mountStyles(),this.updateAttrs(),this.updateState=0,this.requestMeasure(),!((n=document.fonts)===null||n===void 0)&&n.ready&&document.fonts.ready.then(()=>this.requestMeasure())}dispatch(...e){let n=e.length==1&&e[0]instanceof Sa?e:e.length==1&&Array.isArray(e[0])?e[0]:[this.state.update(...e)];this.dispatchTransactions(n,this)}update(e){if(this.updateState!=0)throw new Error("Calls to EditorView.update are not allowed while an update is in progress");let n=!1,r=!1,i,s=this.state;for(let g of e){if(g.startState!=s)throw new RangeError("Trying to update state with a transaction that doesn't start from the previous state.");s=g.state}if(this.destroyed){this.viewState.state=s;return}let o=this.hasFocus,a=0,l=null;e.some(g=>g.annotation(pne))?(this.inputState.notifiedFocused=o,a=1):o!=this.inputState.notifiedFocused&&(this.inputState.notifiedFocused=o,l=mne(s,o),l||(a=1));let h=this.observer.delayedAndroidKey,f=null;if(h?(this.observer.clearDelayedAndroidKey(),f=this.observer.readChange(),(f&&!this.state.doc.eq(s.doc)||!this.state.selection.eq(s.selection))&&(f=null)):this.observer.clear(),s.facet(Xi.phrases)!=this.state.facet(Xi.phrases))return this.setState(s);i=n6.create(this,s,e),i.flags|=a;let p=this.viewState.scrollTarget;try{this.updateState=2;for(let g of e){if(p&&(p=p.map(g.changes)),g.scrollIntoView){let{main:b}=g.state.selection;p=new _w(b.empty?b:kt.cursor(b.head,b.head>b.anchor?-1:1))}for(let b of g.effects)b.is(WE)&&(p=b.value.clip(this.state))}this.viewState.update(i,p),this.bidiCache=i6.update(this.bidiCache,i.changes),i.empty||(this.updatePlugins(i),this.inputState.update(i)),n=this.docView.update(i),this.state.facet(g3)!=this.styleModules&&this.mountStyles(),r=this.updateAttrs(),this.showAnnouncements(e),this.docView.updateSelection(n,e.some(g=>g.isUserEvent("select.pointer")))}finally{this.updateState=0}if(i.startState.facet(e4)!=i.state.facet(e4)&&(this.viewState.mustMeasureContent=!0),(n||r||p||this.viewState.mustEnforceCursorAssoc||this.viewState.mustMeasureContent)&&this.requestMeasure(),n&&this.docViewUpdate(),!i.empty)for(let g of this.state.facet(zF))try{g(i)}catch(b){Mu(this.state,b,"update listener")}(l||f)&&Promise.resolve().then(()=>{l&&this.state==l.startState&&this.dispatch(l),f&&!ane(this,f)&&h.force&&bw(this.contentDOM,h.key,h.keyCode)})}setState(e){if(this.updateState!=0)throw new Error("Calls to EditorView.setState are not allowed while an update is in progress");if(this.destroyed){this.viewState.state=e;return}this.updateState=2;let n=this.hasFocus;try{for(let r of this.plugins)r.destroy(this);this.viewState=new NU(e),this.plugins=e.facet(Yx).map(r=>new xM(r)),this.pluginMap.clear();for(let r of this.plugins)r.update(this);this.docView.destroy(),this.docView=new _U(this),this.inputState.ensureHandlers(this.plugins),this.mountStyles(),this.updateAttrs(),this.bidiCache=[]}finally{this.updateState=0}n&&this.focus(),this.requestMeasure()}updatePlugins(e){let n=e.startState.facet(Yx),r=e.state.facet(Yx);if(n!=r){let i=[];for(let s of r){let o=n.indexOf(s);if(o<0)i.push(new xM(s));else{let a=this.plugins[o];a.mustUpdate=e,i.push(a)}}for(let s of this.plugins)s.mustUpdate!=e&&s.destroy(this);this.plugins=i,this.pluginMap.clear()}else for(let i of this.plugins)i.mustUpdate=e;for(let i=0;i<this.plugins.length;i++)this.plugins[i].update(this);n!=r&&this.inputState.ensureHandlers(this.plugins)}docViewUpdate(){for(let e of this.plugins){let n=e.value;if(n&&n.docViewUpdate)try{n.docViewUpdate(this)}catch(r){Mu(this.state,r,"doc view update listener")}}}measure(e=!0){if(this.destroyed)return;if(this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.observer.delayedAndroidKey){this.measureScheduled=-1,this.requestMeasure();return}this.measureScheduled=0,e&&this.observer.forceFlush();let n=null,r=this.scrollDOM,i=r.scrollTop*this.scaleY,{scrollAnchorPos:s,scrollAnchorHeight:o}=this.viewState;Math.abs(i-this.viewState.scrollTop)>1&&(o=-1),this.viewState.scrollAnchorHeight=-1;try{for(let a=0;;a++){if(o<0)if(Ete(r))s=-1,o=this.viewState.heightMap.height;else{let b=this.viewState.scrollAnchorAt(i);s=b.from,o=b.top}this.updateState=1;let l=this.viewState.measure(this);if(!l&&!this.measureRequests.length&&this.viewState.scrollTarget==null)break;if(a>5){console.warn(this.measureRequests.length?"Measure loop restarted more than 5 times":"Viewport failed to stabilize");break}let h=[];l&4||([this.measureRequests,h]=[h,this.measureRequests]);let f=h.map(b=>{try{return b.read(this)}catch(x){return Mu(this.state,x),UU}}),p=n6.create(this,this.state,[]),g=!1;p.flags|=l,n?n.flags|=l:n=p,this.updateState=2,p.empty||(this.updatePlugins(p),this.inputState.update(p),this.updateAttrs(),g=this.docView.update(p),g&&this.docViewUpdate());for(let b=0;b<h.length;b++)if(f[b]!=UU)try{let x=h[b];x.write&&x.write(f[b],this)}catch(x){Mu(this.state,x)}if(g&&this.docView.updateSelection(!0),!p.viewportChanged&&this.measureRequests.length==0){if(this.viewState.editorHeight)if(this.viewState.scrollTarget){this.docView.scrollIntoView(this.viewState.scrollTarget),this.viewState.scrollTarget=null,o=-1;continue}else{let x=(s<0?this.viewState.heightMap.height:this.viewState.lineBlockAt(s).top)-o;if(x>1||x<-1){i=i+x,r.scrollTop=i/this.scaleY,o=-1;continue}}break}}}finally{this.updateState=0,this.measureScheduled=-1}if(n&&!n.empty)for(let a of this.state.facet(zF))a(n)}get themeClasses(){return qF+" "+(this.state.facet(VF)?bne:vne)+" "+this.state.facet(e4)}updateAttrs(){let e=VU(this,Jte,{class:"cm-editor"+(this.hasFocus?" cm-focused ":" ")+this.themeClasses}),n={spellcheck:"false",autocorrect:"off",autocapitalize:"off",writingsuggestions:"false",translate:"no",contenteditable:this.state.facet(Lg)?"true":"false",class:"cm-content",style:`${wn.tabSize}: ${this.state.tabSize}`,role:"textbox","aria-multiline":"true"};this.state.readOnly&&(n["aria-readonly"]="true"),VU(this,RB,n);let r=this.observer.ignore(()=>{let i=FF(this.contentDOM,this.contentAttrs,n),s=FF(this.dom,this.editorAttrs,e);return i||s});return this.editorAttrs=e,this.contentAttrs=n,r}showAnnouncements(e){let n=!0;for(let r of e)for(let i of r.effects)if(i.is(Cn.announce)){n&&(this.announceDOM.textContent=""),n=!1;let s=this.announceDOM.appendChild(document.createElement("div"));s.textContent=i.value}}mountStyles(){this.styleModules=this.state.facet(g3);let e=this.state.facet(Cn.cspNonce);f1.mount(this.root,this.styleModules.concat(Ywe).reverse(),e?{nonce:e}:void 0)}readMeasured(){if(this.updateState==2)throw new Error("Reading the editor layout isn't allowed during an update");this.updateState==0&&this.measureScheduled>-1&&this.measure(!1)}requestMeasure(e){if(this.measureScheduled<0&&(this.measureScheduled=this.win.requestAnimationFrame(()=>this.measure())),e){if(this.measureRequests.indexOf(e)>-1)return;if(e.key!=null){for(let n=0;n<this.measureRequests.length;n++)if(this.measureRequests[n].key===e.key){this.measureRequests[n]=e;return}}this.measureRequests.push(e)}}plugin(e){let n=this.pluginMap.get(e);return(n===void 0||n&&n.plugin!=e)&&this.pluginMap.set(e,n=this.plugins.find(r=>r.plugin==e)||null),n&&n.update(this).value}get documentTop(){return this.contentDOM.getBoundingClientRect().top+this.viewState.paddingTop}get documentPadding(){return{top:this.viewState.paddingTop,bottom:this.viewState.paddingBottom}}get scaleX(){return this.viewState.scaleX}get scaleY(){return this.viewState.scaleY}elementAtHeight(e){return this.readMeasured(),this.viewState.elementAtHeight(e)}lineBlockAtHeight(e){return this.readMeasured(),this.viewState.lineBlockAtHeight(e)}get viewportLineBlocks(){return this.viewState.viewportLines}lineBlockAt(e){return this.viewState.lineBlockAt(e)}get contentHeight(){return this.viewState.contentHeight}moveByChar(e,n,r){return OM(this,e,kU(this,e,n,r))}moveByGroup(e,n){return OM(this,e,kU(this,e,n,r=>fwe(this,e.head,r)))}visualLineSide(e,n){let r=this.bidiSpans(e),i=this.textDirectionAt(e.from),s=r[n?r.length-1:0];return kt.cursor(s.side(n,i)+e.from,s.forward(!n,i)?1:-1)}moveToLineBoundary(e,n,r=!0){return hwe(this,e,n,r)}moveVertically(e,n,r){return OM(this,e,dwe(this,e,n,r))}domAtPos(e){return this.docView.domAtPos(e)}posAtDOM(e,n=0){return this.docView.posFromDOM(e,n)}posAtCoords(e,n=!0){return this.readMeasured(),ine(this,e,n)}coordsAtPos(e,n=1){this.readMeasured();let r=this.docView.coordsAt(e,n);if(!r||r.left==r.right)return r;let i=this.state.doc.lineAt(e),s=this.bidiSpans(i),o=s[Dy.find(s,e-i.from,-1,n)];return mD(r,o.dir==vo.LTR==n>0)}coordsForChar(e){return this.readMeasured(),this.docView.coordsForChar(e)}get defaultCharacterWidth(){return this.viewState.heightOracle.charWidth}get defaultLineHeight(){return this.viewState.heightOracle.lineHeight}get textDirection(){return this.viewState.defaultTextDirection}textDirectionAt(e){return!this.state.facet(Gte)||e<this.viewport.from||e>this.viewport.to?this.textDirection:(this.readMeasured(),this.docView.textDirectionAt(e))}get lineWrapping(){return this.viewState.heightOracle.lineWrapping}bidiSpans(e){if(e.length>t2e)return Qte(e.length);let n=this.textDirectionAt(e.from),r;for(let s of this.bidiCache)if(s.from==e.from&&s.dir==n&&(s.fresh||zte(s.isolates,r=bU(this,e))))return s.order;r||(r=bU(this,e));let i=Gxe(e.text,n,r);return this.bidiCache.push(new i6(e.from,e.to,n,r,!0,i)),i}get hasFocus(){var e;return(this.dom.ownerDocument.hasFocus()||wn.safari&&((e=this.inputState)===null||e===void 0?void 0:e.lastContextMenu)>Date.now()-3e4)&&this.root.activeElement==this.contentDOM}focus(){this.observer.ignore(()=>{Cte(this.contentDOM),this.docView.updateSelection()})}setRoot(e){this._root!=e&&(this._root=e,this.observer.setWindow((e.nodeType==9?e:e.ownerDocument).defaultView||window),this.mountStyles())}destroy(){this.root.activeElement==this.contentDOM&&this.contentDOM.blur();for(let e of this.plugins)e.destroy(this);this.plugins=[],this.inputState.destroy(),this.docView.destroy(),this.dom.remove(),this.observer.destroy(),this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.destroyed=!0}static scrollIntoView(e,n={}){return WE.of(new _w(typeof e=="number"?kt.cursor(e):e,n.y,n.x,n.yMargin,n.xMargin))}scrollSnapshot(){let{scrollTop:e,scrollLeft:n}=this.scrollDOM,r=this.viewState.scrollAnchorAt(e);return WE.of(new _w(kt.cursor(r.from),"start","start",r.top-e,n,!0))}setTabFocusMode(e){e==null?this.inputState.tabFocusMode=this.inputState.tabFocusMode<0?0:-1:typeof e=="boolean"?this.inputState.tabFocusMode=e?0:-1:this.inputState.tabFocusMode!=0&&(this.inputState.tabFocusMode=Date.now()+e)}static domEventHandlers(e){return Ca.define(()=>({}),{eventHandlers:e})}static domEventObservers(e){return Ca.define(()=>({}),{eventObservers:e})}static theme(e,n){let r=f1.newName(),i=[e4.of(r),g3.of(ZF(`.${r}`,e))];return n&&n.dark&&i.push(VF.of(!0)),i}static baseTheme(e){return b0.lowest(g3.of(ZF("."+qF,e,_ne)))}static findFromDOM(e){var n;let r=e.querySelector(".cm-content"),i=r&&Ns.get(r)||Ns.get(e);return((n=i?.rootView)===null||n===void 0?void 0:n.view)||null}}Cn.styleModule=g3;Cn.inputHandler=Xte;Cn.clipboardInputFilter=IB;Cn.clipboardOutputFilter=MB;Cn.scrollHandler=Hte;Cn.focusChangeEffect=Wte;Cn.perLineTextDirection=Gte;Cn.exceptionSink=Zte;Cn.updateListener=zF;Cn.editable=Lg;Cn.mouseSelectionStyle=qte;Cn.dragMovesSelection=Vte;Cn.clickAddsSelectionRange=Ute;Cn.decorations=wk;Cn.outerDecorations=ene;Cn.atomicRanges=MC;Cn.bidiIsolatedRanges=tne;Cn.scrollMargins=nne;Cn.darkTheme=VF;Cn.cspNonce=Rn.define({combine:t=>t.length?t[0]:""});Cn.contentAttributes=RB;Cn.editorAttributes=Jte;Cn.lineWrapping=Cn.contentAttributes.of({class:"cm-lineWrapping"});Cn.announce=Yr.define();const t2e=4096,UU={};class i6{constructor(e,n,r,i,s,o){this.from=e,this.to=n,this.dir=r,this.isolates=i,this.fresh=s,this.order=o}static update(e,n){if(n.empty&&!e.some(s=>s.fresh))return e;let r=[],i=e.length?e[e.length-1].dir:vo.LTR;for(let s=Math.max(0,e.length-10);s<e.length;s++){let o=e[s];o.dir==i&&!n.touchesRange(o.from,o.to)&&r.push(new i6(n.mapPos(o.from,1),n.mapPos(o.to,-1),o.dir,o.isolates,!1,o.order))}return r}}function VU(t,e,n){for(let r=t.state.facet(e),i=r.length-1;i>=0;i--){let s=r[i],o=typeof s=="function"?s(t):s;o&&RF(o,n)}return n}const n2e=wn.mac?"mac":wn.windows?"win":wn.linux?"linux":"key";function r2e(t,e){const n=t.split(/-(?!$)/);let r=n[n.length-1];r=="Space"&&(r=" ");let i,s,o,a;for(let l=0;l<n.length-1;++l){const h=n[l];if(/^(cmd|meta|m)$/i.test(h))a=!0;else if(/^a(lt)?$/i.test(h))i=!0;else if(/^(c|ctrl|control)$/i.test(h))s=!0;else if(/^s(hift)?$/i.test(h))o=!0;else if(/^mod$/i.test(h))e=="mac"?a=!0:s=!0;else throw new Error("Unrecognized modifier name: "+h)}return i&&(r="Alt-"+r),s&&(r="Ctrl-"+r),a&&(r="Meta-"+r),o&&(r="Shift-"+r),r}function t4(t,e,n){return e.altKey&&(t="Alt-"+t),e.ctrlKey&&(t="Ctrl-"+t),e.metaKey&&(t="Meta-"+t),n!==!1&&e.shiftKey&&(t="Shift-"+t),t}const i2e=b0.default(Cn.domEventHandlers({keydown(t,e){return wne(xne(e.state),t,e,"editor")}})),RC=Rn.define({enables:i2e}),qU=new WeakMap;function xne(t){let e=t.facet(RC),n=qU.get(e);return n||qU.set(e,n=a2e(e.reduce((r,i)=>r.concat(i),[]))),n}function s2e(t,e,n){return wne(xne(t.state),e,t,n)}let ky=null;const o2e=4e3;function a2e(t,e=n2e){let n=Object.create(null),r=Object.create(null),i=(o,a)=>{let l=r[o];if(l==null)r[o]=a;else if(l!=a)throw new Error("Key binding "+o+" is used both as a regular binding and as a multi-stroke prefix")},s=(o,a,l,h,f)=>{var p,g;let b=n[o]||(n[o]=Object.create(null)),x=a.split(/ (?!$)/).map(I=>r2e(I,e));for(let I=1;I<x.length;I++){let M=x.slice(0,I).join(" ");i(M,!0),b[M]||(b[M]={preventDefault:!0,stopPropagation:!1,run:[B=>{let j=ky={view:B,prefix:M,scope:o};return setTimeout(()=>{ky==j&&(ky=null)},o2e),!0}]})}let k=x.join(" ");i(k,!1);let T=b[k]||(b[k]={preventDefault:!1,stopPropagation:!1,run:((g=(p=b._any)===null||p===void 0?void 0:p.run)===null||g===void 0?void 0:g.slice())||[]});l&&T.run.push(l),h&&(T.preventDefault=!0),f&&(T.stopPropagation=!0)};for(let o of t){let a=o.scope?o.scope.split(" "):["editor"];if(o.any)for(let h of a){let f=n[h]||(n[h]=Object.create(null));f._any||(f._any={preventDefault:!1,stopPropagation:!1,run:[]});let{any:p}=o;for(let g in f)f[g].run.push(b=>p(b,XF))}let l=o[e]||o.key;if(l)for(let h of a)s(h,l,o.run,o.preventDefault,o.stopPropagation),o.shift&&s(h,"Shift-"+l,o.shift,o.preventDefault,o.stopPropagation)}return n}let XF=null;function wne(t,e,n,r){XF=e;let i=Txe(e),s=hc(i,0),o=$p(s)==i.length&&i!=" ",a="",l=!1,h=!1,f=!1;ky&&ky.view==n&&ky.scope==r&&(a=ky.prefix+" ",cne.indexOf(e.keyCode)<0&&(h=!0,ky=null));let p=new Set,g=T=>{if(T){for(let I of T.run)if(!p.has(I)&&(p.add(I),I(n)))return T.stopPropagation&&(f=!0),!0;T.preventDefault&&(T.stopPropagation&&(f=!0),h=!0)}return!1},b=t[r],x,k;return b&&(g(b[a+t4(i,e,!o)])?l=!0:o&&(e.altKey||e.metaKey||e.ctrlKey)&&!(wn.windows&&e.ctrlKey&&e.altKey)&&!(wn.mac&&e.altKey&&!(e.ctrlKey||e.metaKey))&&(x=d1[e.keyCode])&&x!=i?(g(b[a+t4(x,e,!0)])||e.shiftKey&&(k=bk[e.keyCode])!=i&&k!=x&&g(b[a+t4(k,e,!1)]))&&(l=!0):o&&e.shiftKey&&g(b[a+t4(i,e,!0)])&&(l=!0),!l&&g(b._any)&&(l=!0)),h&&(l=!0),l&&f&&e.stopPropagation(),XF=null,l}class FC{constructor(e,n,r,i,s){this.className=e,this.left=n,this.top=r,this.width=i,this.height=s}draw(){let e=document.createElement("div");return e.className=this.className,this.adjust(e),e}update(e,n){return n.className!=this.className?!1:(this.adjust(e),!0)}adjust(e){e.style.left=this.left+"px",e.style.top=this.top+"px",this.width!=null&&(e.style.width=this.width+"px"),e.style.height=this.height+"px"}eq(e){return this.left==e.left&&this.top==e.top&&this.width==e.width&&this.height==e.height&&this.className==e.className}static forRange(e,n,r){if(r.empty){let i=e.coordsAtPos(r.head,r.assoc||1);if(!i)return[];let s=One(e);return[new FC(n,i.left-s.left,i.top-s.top,null,i.bottom-i.top)]}else return l2e(e,n,r)}}function One(t){let e=t.scrollDOM.getBoundingClientRect();return{left:(t.textDirection==vo.LTR?e.left:e.right-t.scrollDOM.clientWidth*t.scaleX)-t.scrollDOM.scrollLeft*t.scaleX,top:e.top-t.scrollDOM.scrollTop*t.scaleY}}function ZU(t,e,n,r){let i=t.coordsAtPos(e,n*2);if(!i)return r;let s=t.dom.getBoundingClientRect(),o=(i.top+i.bottom)/2,a=t.posAtCoords({x:s.left+1,y:o}),l=t.posAtCoords({x:s.right-1,y:o});return a==null||l==null?r:{from:Math.max(r.from,Math.min(a,l)),to:Math.min(r.to,Math.max(a,l))}}function l2e(t,e,n){if(n.to<=t.viewport.from||n.from>=t.viewport.to)return[];let r=Math.max(n.from,t.viewport.from),i=Math.min(n.to,t.viewport.to),s=t.textDirection==vo.LTR,o=t.contentDOM,a=o.getBoundingClientRect(),l=One(t),h=o.querySelector(".cm-line"),f=h&&window.getComputedStyle(h),p=a.left+(f?parseInt(f.paddingLeft)+Math.min(0,parseInt(f.textIndent)):0),g=a.right-(f?parseInt(f.paddingRight):0),b=jF(t,r,1),x=jF(t,i,-1),k=b.type==Fu.Text?b:null,T=x.type==Fu.Text?x:null;if(k&&(t.lineWrapping||b.widgetLineBreaks)&&(k=ZU(t,r,1,k)),T&&(t.lineWrapping||x.widgetLineBreaks)&&(T=ZU(t,i,-1,T)),k&&T&&k.from==T.from&&k.to==T.to)return M(B(n.from,n.to,k));{let Q=k?B(n.from,null,k):j(b,!1),Z=T?B(null,n.to,T):j(x,!0),q=[];return(k||b).to<(T||x).from-(k&&T?1:0)||b.widgetLineBreaks>1&&Q.bottom+t.defaultLineHeight/2<Z.top?q.push(I(p,Q.bottom,g,Z.top)):Q.bottom<Z.top&&t.elementAtHeight((Q.bottom+Z.top)/2).type==Fu.Text&&(Q.bottom=Z.top=(Q.bottom+Z.top)/2),M(Q).concat(q).concat(M(Z))}function I(Q,Z,q,J){return new FC(e,Q-l.left,Z-l.top,q-Q,J-Z)}function M({top:Q,bottom:Z,horizontal:q}){let J=[];for(let oe=0;oe<q.length;oe+=2)J.push(I(q[oe],Q,q[oe+1],Z));return J}function B(Q,Z,q){let J=1e9,oe=-1e9,me=[];function ae(ge,xe,Se,De,He){let Ue=t.coordsAtPos(ge,ge==q.to?-2:2),yt=t.coordsAtPos(Se,Se==q.from?2:-2);!Ue||!yt||(J=Math.min(Ue.top,yt.top,J),oe=Math.max(Ue.bottom,yt.bottom,oe),He==vo.LTR?me.push(s&&xe?p:Ue.left,s&&De?g:yt.right):me.push(!s&&De?p:yt.left,!s&&xe?g:Ue.right))}let ce=Q??q.from,se=Z??q.to;for(let ge of t.visibleRanges)if(ge.to>ce&&ge.from<se)for(let xe=Math.max(ge.from,ce),Se=Math.min(ge.to,se);;){let De=t.state.doc.lineAt(xe);for(let He of t.bidiSpans(De)){let Ue=He.from+De.from,yt=He.to+De.from;if(Ue>=Se)break;yt>xe&&ae(Math.max(Ue,xe),Q==null&&Ue<=ce,Math.min(yt,Se),Z==null&&yt>=se,He.dir)}if(xe=De.to+1,xe>=Se)break}return me.length==0&&ae(ce,Q==null,se,Z==null,t.textDirection),{top:J,bottom:oe,horizontal:me}}function j(Q,Z){let q=a.top+(Z?Q.top:Q.bottom);return{top:q,bottom:q,horizontal:[]}}}function u2e(t,e){return t.constructor==e.constructor&&t.eq(e)}class c2e{constructor(e,n){this.view=e,this.layer=n,this.drawn=[],this.scaleX=1,this.scaleY=1,this.measureReq={read:this.measure.bind(this),write:this.draw.bind(this)},this.dom=e.scrollDOM.appendChild(document.createElement("div")),this.dom.classList.add("cm-layer"),n.above&&this.dom.classList.add("cm-layer-above"),n.class&&this.dom.classList.add(n.class),this.scale(),this.dom.setAttribute("aria-hidden","true"),this.setOrder(e.state),e.requestMeasure(this.measureReq),n.mount&&n.mount(this.dom,e)}update(e){e.startState.facet(_5)!=e.state.facet(_5)&&this.setOrder(e.state),(this.layer.update(e,this.dom)||e.geometryChanged)&&(this.scale(),e.view.requestMeasure(this.measureReq))}docViewUpdate(e){this.layer.updateOnDocViewUpdate!==!1&&e.requestMeasure(this.measureReq)}setOrder(e){let n=0,r=e.facet(_5);for(;n<r.length&&r[n]!=this.layer;)n++;this.dom.style.zIndex=String((this.layer.above?150:-1)-n)}measure(){return this.layer.markers(this.view)}scale(){let{scaleX:e,scaleY:n}=this.view;(e!=this.scaleX||n!=this.scaleY)&&(this.scaleX=e,this.scaleY=n,this.dom.style.transform=`scale(${1/e}, ${1/n})`)}draw(e){if(e.length!=this.drawn.length||e.some((n,r)=>!u2e(n,this.drawn[r]))){let n=this.dom.firstChild,r=0;for(let i of e)i.update&&n&&i.constructor&&this.drawn[r].constructor&&i.update(n,this.drawn[r])?(n=n.nextSibling,r++):this.dom.insertBefore(i.draw(),n);for(;n;){let i=n.nextSibling;n.remove(),n=i}this.drawn=e,wn.safari&&wn.safari_version>=26&&(this.dom.style.display=this.dom.firstChild?"":"none")}}destroy(){this.layer.destroy&&this.layer.destroy(this.dom,this.view),this.dom.remove()}}const _5=Rn.define();function Sne(t){return[Ca.define(e=>new c2e(e,t)),_5.of(t)]}const Ok=Rn.define({combine(t){return x0(t,{cursorBlinkRate:1200,drawRangeCursor:!0},{cursorBlinkRate:(e,n)=>Math.min(e,n),drawRangeCursor:(e,n)=>e||n})}});function h2e(t={}){return[Ok.of(t),f2e,d2e,p2e,Yte.of(!0)]}function kne(t){return t.startState.facet(Ok)!=t.state.facet(Ok)}const f2e=Sne({above:!0,markers(t){let{state:e}=t,n=e.facet(Ok),r=[];for(let i of e.selection.ranges){let s=i==e.selection.main;if(i.empty||n.drawRangeCursor){let o=s?"cm-cursor cm-cursor-primary":"cm-cursor cm-cursor-secondary",a=i.empty?i:kt.cursor(i.head,i.head>i.anchor?-1:1);for(let l of FC.forRange(t,o,a))r.push(l)}}return r},update(t,e){t.transactions.some(r=>r.selection)&&(e.style.animationName=e.style.animationName=="cm-blink"?"cm-blink2":"cm-blink");let n=kne(t);return n&&XU(t.state,e),t.docChanged||t.selectionSet||n},mount(t,e){XU(e.state,t)},class:"cm-cursorLayer"});function XU(t,e){e.style.animationDuration=t.facet(Ok).cursorBlinkRate+"ms"}const d2e=Sne({above:!1,markers(t){return t.state.selection.ranges.map(e=>e.empty?[]:FC.forRange(t,"cm-selectionBackground",e)).reduce((e,n)=>e.concat(n))},update(t,e){return t.docChanged||t.selectionSet||t.viewportChanged||kne(t)},class:"cm-selectionLayer"}),p2e=b0.highest(Cn.theme({".cm-line":{"& ::selection, &::selection":{backgroundColor:"transparent !important"},caretColor:"transparent !important"},".cm-content":{caretColor:"transparent !important","& :focus":{caretColor:"initial !important","&::selection, & ::selection":{backgroundColor:"Highlight !important"}}}})),Cne=Yr.define({map(t,e){return t==null?null:e.mapPos(t)}}),b3=Aa.define({create(){return null},update(t,e){return t!=null&&(t=e.changes.mapPos(t)),e.effects.reduce((n,r)=>r.is(Cne)?r.value:n,t)}}),m2e=Ca.fromClass(class{constructor(t){this.view=t,this.cursor=null,this.measureReq={read:this.readPos.bind(this),write:this.drawCursor.bind(this)}}update(t){var e;let n=t.state.field(b3);n==null?this.cursor!=null&&((e=this.cursor)===null||e===void 0||e.remove(),this.cursor=null):(this.cursor||(this.cursor=this.view.scrollDOM.appendChild(document.createElement("div")),this.cursor.className="cm-dropCursor"),(t.startState.field(b3)!=n||t.docChanged||t.geometryChanged)&&this.view.requestMeasure(this.measureReq))}readPos(){let{view:t}=this,e=t.state.field(b3),n=e!=null&&t.coordsAtPos(e);if(!n)return null;let r=t.scrollDOM.getBoundingClientRect();return{left:n.left-r.left+t.scrollDOM.scrollLeft*t.scaleX,top:n.top-r.top+t.scrollDOM.scrollTop*t.scaleY,height:n.bottom-n.top}}drawCursor(t){if(this.cursor){let{scaleX:e,scaleY:n}=this.view;t?(this.cursor.style.left=t.left/e+"px",this.cursor.style.top=t.top/n+"px",this.cursor.style.height=t.height/n+"px"):this.cursor.style.left="-100000px"}}destroy(){this.cursor&&this.cursor.remove()}setDropPos(t){this.view.state.field(b3)!=t&&this.view.dispatch({effects:Cne.of(t)})}},{eventObservers:{dragover(t){this.setDropPos(this.view.posAtCoords({x:t.clientX,y:t.clientY}))},dragleave(t){(t.target==this.view.contentDOM||!this.view.contentDOM.contains(t.relatedTarget))&&this.setDropPos(null)},dragend(){this.setDropPos(null)},drop(){this.setDropPos(null)}}});function g2e(){return[b3,m2e]}function WU(t,e,n,r,i){e.lastIndex=0;for(let s=t.iterRange(n,r),o=n,a;!s.next().done;o+=s.value.length)if(!s.lineBreak)for(;a=e.exec(s.value);)i(o+a.index,a)}function y2e(t,e){let n=t.visibleRanges;if(n.length==1&&n[0].from==t.viewport.from&&n[0].to==t.viewport.to)return n;let r=[];for(let{from:i,to:s}of n)i=Math.max(t.state.doc.lineAt(i).from,i-e),s=Math.min(t.state.doc.lineAt(s).to,s+e),r.length&&r[r.length-1].to>=i?r[r.length-1].to=s:r.push({from:i,to:s});return r}class v2e{constructor(e){const{regexp:n,decoration:r,decorate:i,boundary:s,maxLength:o=1e3}=e;if(!n.global)throw new RangeError("The regular expression given to MatchDecorator should have its 'g' flag set");if(this.regexp=n,i)this.addMatch=(a,l,h,f)=>i(f,h,h+a[0].length,a,l);else if(typeof r=="function")this.addMatch=(a,l,h,f)=>{let p=r(a,l,h);p&&f(h,h+a[0].length,p)};else if(r)this.addMatch=(a,l,h,f)=>f(h,h+a[0].length,r);else throw new RangeError("Either 'decorate' or 'decoration' should be provided to MatchDecorator");this.boundary=s,this.maxLength=o}createDeco(e){let n=new h1,r=n.add.bind(n);for(let{from:i,to:s}of y2e(e,this.maxLength))WU(e.state.doc,this.regexp,i,s,(o,a)=>this.addMatch(a,e,o,r));return n.finish()}updateDeco(e,n){let r=1e9,i=-1;return e.docChanged&&e.changes.iterChanges((s,o,a,l)=>{l>=e.view.viewport.from&&a<=e.view.viewport.to&&(r=Math.min(a,r),i=Math.max(l,i))}),e.viewportMoved||i-r>1e3?this.createDeco(e.view):i>-1?this.updateRange(e.view,n.map(e.changes),r,i):n}updateRange(e,n,r,i){for(let s of e.visibleRanges){let o=Math.max(s.from,r),a=Math.min(s.to,i);if(a>=o){let l=e.state.doc.lineAt(o),h=l.to<a?e.state.doc.lineAt(a):l,f=Math.max(s.from,l.from),p=Math.min(s.to,h.to);if(this.boundary){for(;o>l.from;o--)if(this.boundary.test(l.text[o-1-l.from])){f=o;break}for(;a<h.to;a++)if(this.boundary.test(h.text[a-h.from])){p=a;break}}let g=[],b,x=(k,T,I)=>g.push(I.range(k,T));if(l==h)for(this.regexp.lastIndex=f-l.from;(b=this.regexp.exec(l.text))&&b.index<p-l.from;)this.addMatch(b,e,b.index+l.from,x);else WU(e.state.doc,this.regexp,f,p,(k,T)=>this.addMatch(T,e,k,x));n=n.update({filterFrom:f,filterTo:p,filter:(k,T)=>k<f||T>p,add:g})}}return n}}const WF=/x/.unicode!=null?"gu":"g",b2e=new RegExp(`[\0-\b
--ÂÂ­Øâââ\u2028\u2029â­â®â¦â§â©\uFEFFï¿¹-ï¿¼]`,WF),_2e={0:"null",7:"bell",8:"backspace",10:"newline",11:"vertical tab",13:"carriage return",27:"escape",8203:"zero width space",8204:"zero width non-joiner",8205:"zero width joiner",8206:"left-to-right mark",8207:"right-to-left mark",8232:"line separator",8237:"left-to-right override",8238:"right-to-left override",8294:"left-to-right isolate",8295:"right-to-left isolate",8297:"pop directional isolate",8233:"paragraph separator",65279:"zero width no-break space",65532:"object replacement"};let CM=null;function x2e(){var t;if(CM==null&&typeof document<"u"&&document.body){let e=document.body.style;CM=((t=e.tabSize)!==null&&t!==void 0?t:e.MozTabSize)!=null}return CM||!1}const x5=Rn.define({combine(t){let e=x0(t,{render:null,specialChars:b2e,addSpecialChars:null});return(e.replaceTabs=!x2e())&&(e.specialChars=new RegExp("	|"+e.specialChars.source,WF)),e.addSpecialChars&&(e.specialChars=new RegExp(e.specialChars.source+"|"+e.addSpecialChars.source,WF)),e}});function w2e(t={}){return[x5.of(t),O2e()]}let GU=null;function O2e(){return GU||(GU=Ca.fromClass(class{constructor(t){this.view=t,this.decorations=Sr.none,this.decorationCache=Object.create(null),this.decorator=this.makeDecorator(t.state.facet(x5)),this.decorations=this.decorator.createDeco(t)}makeDecorator(t){return new v2e({regexp:t.specialChars,decoration:(e,n,r)=>{let{doc:i}=n.state,s=hc(e[0],0);if(s==9){let o=i.lineAt(r),a=n.state.tabSize,l=Ad(o.text,a,r-o.from);return Sr.replace({widget:new A2e((a-l%a)*this.view.defaultCharacterWidth/this.view.scaleX)})}return this.decorationCache[s]||(this.decorationCache[s]=Sr.replace({widget:new C2e(t,s)}))},boundary:t.replaceTabs?void 0:/[^]/})}update(t){let e=t.state.facet(x5);t.startState.facet(x5)!=e?(this.decorator=this.makeDecorator(e),this.decorations=this.decorator.createDeco(t.view)):this.decorations=this.decorator.updateDeco(t,this.decorations)}},{decorations:t=>t.decorations}))}const S2e="â¢";function k2e(t){return t>=32?S2e:t==10?"â¤":String.fromCharCode(9216+t)}class C2e extends a_{constructor(e,n){super(),this.options=e,this.code=n}eq(e){return e.code==this.code}toDOM(e){let n=k2e(this.code),r=e.state.phrase("Control character")+" "+(_2e[this.code]||"0x"+this.code.toString(16)),i=this.options.render&&this.options.render(this.code,r,n);if(i)return i;let s=document.createElement("span");return s.textContent=n,s.title=r,s.setAttribute("aria-label",r),s.className="cm-specialChar",s}ignoreEvent(){return!1}}class A2e extends a_{constructor(e){super(),this.width=e}eq(e){return e.width==this.width}toDOM(){let e=document.createElement("span");return e.textContent="	",e.className="cm-tab",e.style.width=this.width+"px",e}ignoreEvent(){return!1}}function E2e(){return P2e}const T2e=Sr.line({class:"cm-activeLine"}),P2e=Ca.fromClass(class{constructor(t){this.decorations=this.getDeco(t)}update(t){(t.docChanged||t.selectionSet)&&(this.decorations=this.getDeco(t.view))}getDeco(t){let e=-1,n=[];for(let r of t.state.selection.ranges){let i=t.lineBlockAt(r.head);i.from>e&&(n.push(T2e.range(i.from)),e=i.from)}return Sr.set(n)}},{decorations:t=>t.decorations}),GF=2e3;function D2e(t,e,n){let r=Math.min(e.line,n.line),i=Math.max(e.line,n.line),s=[];if(e.off>GF||n.off>GF||e.col<0||n.col<0){let o=Math.min(e.off,n.off),a=Math.max(e.off,n.off);for(let l=r;l<=i;l++){let h=t.doc.line(l);h.length<=a&&s.push(kt.range(h.from+o,h.to+a))}}else{let o=Math.min(e.col,n.col),a=Math.max(e.col,n.col);for(let l=r;l<=i;l++){let h=t.doc.line(l),f=CF(h.text,o,t.tabSize,!0);if(f<0)s.push(kt.cursor(h.to));else{let p=CF(h.text,a,t.tabSize);s.push(kt.range(h.from+f,h.from+p))}}}return s}function I2e(t,e){let n=t.coordsAtPos(t.viewport.from);return n?Math.round(Math.abs((n.left-e)/t.defaultCharacterWidth)):-1}function YU(t,e){let n=t.posAtCoords({x:e.clientX,y:e.clientY},!1),r=t.state.doc.lineAt(n),i=n-r.from,s=i>GF?-1:i==r.length?I2e(t,e.clientX):Ad(r.text,t.state.tabSize,n-r.from);return{line:r.number,col:s,off:i}}function M2e(t,e){let n=YU(t,e),r=t.state.selection;return n?{update(i){if(i.docChanged){let s=i.changes.mapPos(i.startState.doc.line(n.line).from),o=i.state.doc.lineAt(s);n={line:o.number,col:n.col,off:Math.min(n.off,o.length)},r=r.map(i.changes)}},get(i,s,o){let a=YU(t,i);if(!a)return r;let l=D2e(t.state,n,a);return l.length?o?kt.create(l.concat(r.ranges)):kt.create(l):r}}:null}function R2e(t){let e=(n=>n.altKey&&n.button==0);return Cn.mouseSelectionStyle.of((n,r)=>e(r)?M2e(n,r):null)}const F2e={Alt:[18,t=>!!t.altKey],Control:[17,t=>!!t.ctrlKey],Shift:[16,t=>!!t.shiftKey],Meta:[91,t=>!!t.metaKey]},L2e={style:"cursor: crosshair"};function $2e(t={}){let[e,n]=F2e[t.key||"Alt"],r=Ca.fromClass(class{constructor(i){this.view=i,this.isDown=!1}set(i){this.isDown!=i&&(this.isDown=i,this.view.update([]))}},{eventObservers:{keydown(i){this.set(i.keyCode==e||n(i))},keyup(i){(i.keyCode==e||!n(i))&&this.set(!1)},mousemove(i){this.set(n(i))}}});return[r,Cn.contentAttributes.of(i=>{var s;return!((s=i.plugin(r))===null||s===void 0)&&s.isDown?L2e:null})]}const n4="-10000px";class Ane{constructor(e,n,r,i){this.facet=n,this.createTooltipView=r,this.removeTooltipView=i,this.input=e.state.facet(n),this.tooltips=this.input.filter(o=>o);let s=null;this.tooltipViews=this.tooltips.map(o=>s=r(o,s))}update(e,n){var r;let i=e.state.facet(this.facet),s=i.filter(l=>l);if(i===this.input){for(let l of this.tooltipViews)l.update&&l.update(e);return!1}let o=[],a=n?[]:null;for(let l=0;l<s.length;l++){let h=s[l],f=-1;if(h){for(let p=0;p<this.tooltips.length;p++){let g=this.tooltips[p];g&&g.create==h.create&&(f=p)}if(f<0)o[l]=this.createTooltipView(h,l?o[l-1]:null),a&&(a[l]=!!h.above);else{let p=o[l]=this.tooltipViews[f];a&&(a[l]=n[f]),p.update&&p.update(e)}}}for(let l of this.tooltipViews)o.indexOf(l)<0&&(this.removeTooltipView(l),(r=l.destroy)===null||r===void 0||r.call(l));return n&&(a.forEach((l,h)=>n[h]=l),n.length=a.length),this.input=i,this.tooltips=s,this.tooltipViews=o,!0}}function B2e(t={}){return w5.of(t)}function N2e(t){let e=t.dom.ownerDocument.documentElement;return{top:0,left:0,bottom:e.clientHeight,right:e.clientWidth}}const w5=Rn.define({combine:t=>{var e,n,r;return{position:wn.ios?"absolute":((e=t.find(i=>i.position))===null||e===void 0?void 0:e.position)||"fixed",parent:((n=t.find(i=>i.parent))===null||n===void 0?void 0:n.parent)||null,tooltipSpace:((r=t.find(i=>i.tooltipSpace))===null||r===void 0?void 0:r.tooltipSpace)||N2e}}}),HU=new WeakMap,NB=Ca.fromClass(class{constructor(t){this.view=t,this.above=[],this.inView=!0,this.madeAbsolute=!1,this.lastTransaction=0,this.measureTimeout=-1;let e=t.state.facet(w5);this.position=e.position,this.parent=e.parent,this.classes=t.themeClasses,this.createContainer(),this.measureReq={read:this.readMeasure.bind(this),write:this.writeMeasure.bind(this),key:this},this.resizeObserver=typeof ResizeObserver=="function"?new ResizeObserver(()=>this.measureSoon()):null,this.manager=new Ane(t,zB,(n,r)=>this.createTooltip(n,r),n=>{this.resizeObserver&&this.resizeObserver.unobserve(n.dom),n.dom.remove()}),this.above=this.manager.tooltips.map(n=>!!n.above),this.intersectionObserver=typeof IntersectionObserver=="function"?new IntersectionObserver(n=>{Date.now()>this.lastTransaction-50&&n.length>0&&n[n.length-1].intersectionRatio<1&&this.measureSoon()},{threshold:[1]}):null,this.observeIntersection(),t.win.addEventListener("resize",this.measureSoon=this.measureSoon.bind(this)),this.maybeMeasure()}createContainer(){this.parent?(this.container=document.createElement("div"),this.container.style.position="relative",this.container.className=this.view.themeClasses,this.parent.appendChild(this.container)):this.container=this.view.dom}observeIntersection(){if(this.intersectionObserver){this.intersectionObserver.disconnect();for(let t of this.manager.tooltipViews)this.intersectionObserver.observe(t.dom)}}measureSoon(){this.measureTimeout<0&&(this.measureTimeout=setTimeout(()=>{this.measureTimeout=-1,this.maybeMeasure()},50))}update(t){t.transactions.length&&(this.lastTransaction=Date.now());let e=this.manager.update(t,this.above);e&&this.observeIntersection();let n=e||t.geometryChanged,r=t.state.facet(w5);if(r.position!=this.position&&!this.madeAbsolute){this.position=r.position;for(let i of this.manager.tooltipViews)i.dom.style.position=this.position;n=!0}if(r.parent!=this.parent){this.parent&&this.container.remove(),this.parent=r.parent,this.createContainer();for(let i of this.manager.tooltipViews)this.container.appendChild(i.dom);n=!0}else this.parent&&this.view.themeClasses!=this.classes&&(this.classes=this.container.className=this.view.themeClasses);n&&this.maybeMeasure()}createTooltip(t,e){let n=t.create(this.view),r=e?e.dom:null;if(n.dom.classList.add("cm-tooltip"),t.arrow&&!n.dom.querySelector(".cm-tooltip > .cm-tooltip-arrow")){let i=document.createElement("div");i.className="cm-tooltip-arrow",n.dom.appendChild(i)}return n.dom.style.position=this.position,n.dom.style.top=n4,n.dom.style.left="0px",this.container.insertBefore(n.dom,r),n.mount&&n.mount(this.view),this.resizeObserver&&this.resizeObserver.observe(n.dom),n}destroy(){var t,e,n;this.view.win.removeEventListener("resize",this.measureSoon);for(let r of this.manager.tooltipViews)r.dom.remove(),(t=r.destroy)===null||t===void 0||t.call(r);this.parent&&this.container.remove(),(e=this.resizeObserver)===null||e===void 0||e.disconnect(),(n=this.intersectionObserver)===null||n===void 0||n.disconnect(),clearTimeout(this.measureTimeout)}readMeasure(){let t=1,e=1,n=!1;if(this.position=="fixed"&&this.manager.tooltipViews.length){let{dom:s}=this.manager.tooltipViews[0];if(wn.safari){let o=s.getBoundingClientRect();n=Math.abs(o.top+1e4)>1||Math.abs(o.left)>1}else n=!!s.offsetParent&&s.offsetParent!=this.container.ownerDocument.body}if(n||this.position=="absolute")if(this.parent){let s=this.parent.getBoundingClientRect();s.width&&s.height&&(t=s.width/this.parent.offsetWidth,e=s.height/this.parent.offsetHeight)}else({scaleX:t,scaleY:e}=this.view.viewState);let r=this.view.scrollDOM.getBoundingClientRect(),i=FB(this.view);return{visible:{left:r.left+i.left,top:r.top+i.top,right:r.right-i.right,bottom:r.bottom-i.bottom},parent:this.parent?this.container.getBoundingClientRect():this.view.dom.getBoundingClientRect(),pos:this.manager.tooltips.map((s,o)=>{let a=this.manager.tooltipViews[o];return a.getCoords?a.getCoords(s.pos):this.view.coordsAtPos(s.pos)}),size:this.manager.tooltipViews.map(({dom:s})=>s.getBoundingClientRect()),space:this.view.state.facet(w5).tooltipSpace(this.view),scaleX:t,scaleY:e,makeAbsolute:n}}writeMeasure(t){var e;if(t.makeAbsolute){this.madeAbsolute=!0,this.position="absolute";for(let a of this.manager.tooltipViews)a.dom.style.position="absolute"}let{visible:n,space:r,scaleX:i,scaleY:s}=t,o=[];for(let a=0;a<this.manager.tooltips.length;a++){let l=this.manager.tooltips[a],h=this.manager.tooltipViews[a],{dom:f}=h,p=t.pos[a],g=t.size[a];if(!p||l.clip!==!1&&(p.bottom<=Math.max(n.top,r.top)||p.top>=Math.min(n.bottom,r.bottom)||p.right<Math.max(n.left,r.left)-.1||p.left>Math.min(n.right,r.right)+.1)){f.style.top=n4;continue}let b=l.arrow?h.dom.querySelector(".cm-tooltip-arrow"):null,x=b?7:0,k=g.right-g.left,T=(e=HU.get(h))!==null&&e!==void 0?e:g.bottom-g.top,I=h.offset||Q2e,M=this.view.textDirection==vo.LTR,B=g.width>r.right-r.left?M?r.left:r.right-g.width:M?Math.max(r.left,Math.min(p.left-(b?14:0)+I.x,r.right-k)):Math.min(Math.max(r.left,p.left-k+(b?14:0)-I.x),r.right-k),j=this.above[a];!l.strictSide&&(j?p.top-T-x-I.y<r.top:p.bottom+T+x+I.y>r.bottom)&&j==r.bottom-p.bottom>p.top-r.top&&(j=this.above[a]=!j);let Q=(j?p.top-r.top:r.bottom-p.bottom)-x;if(Q<T&&h.resize!==!1){if(Q<this.view.defaultLineHeight){f.style.top=n4;continue}HU.set(h,T),f.style.height=(T=Q)/s+"px"}else f.style.height&&(f.style.height="");let Z=j?p.top-T-x-I.y:p.bottom+x+I.y,q=B+k;if(h.overlap!==!0)for(let J of o)J.left<q&&J.right>B&&J.top<Z+T&&J.bottom>Z&&(Z=j?J.top-T-2-x:J.bottom+x+2);if(this.position=="absolute"?(f.style.top=(Z-t.parent.top)/s+"px",KU(f,(B-t.parent.left)/i)):(f.style.top=Z/s+"px",KU(f,B/i)),b){let J=p.left+(M?I.x:-I.x)-(B+14-7);b.style.left=J/i+"px"}h.overlap!==!0&&o.push({left:B,top:Z,right:q,bottom:Z+T}),f.classList.toggle("cm-tooltip-above",j),f.classList.toggle("cm-tooltip-below",!j),h.positioned&&h.positioned(t.space)}}maybeMeasure(){if(this.manager.tooltips.length&&(this.view.inView&&this.view.requestMeasure(this.measureReq),this.inView!=this.view.inView&&(this.inView=this.view.inView,!this.inView)))for(let t of this.manager.tooltipViews)t.dom.style.top=n4}},{eventObservers:{scroll(){this.maybeMeasure()}}});function KU(t,e){let n=parseInt(t.style.left,10);(isNaN(n)||Math.abs(e-n)>1)&&(t.style.left=e+"px")}const z2e=Cn.baseTheme({".cm-tooltip":{zIndex:500,boxSizing:"border-box"},"&light .cm-tooltip":{border:"1px solid #bbb",backgroundColor:"#f5f5f5"},"&light .cm-tooltip-section:not(:first-child)":{borderTop:"1px solid #bbb"},"&dark .cm-tooltip":{backgroundColor:"#333338",color:"white"},".cm-tooltip-arrow":{height:"7px",width:"14px",position:"absolute",zIndex:-1,overflow:"hidden","&:before, &:after":{content:"''",position:"absolute",width:0,height:0,borderLeft:"7px solid transparent",borderRight:"7px solid transparent"},".cm-tooltip-above &":{bottom:"-7px","&:before":{borderTop:"7px solid #bbb"},"&:after":{borderTop:"7px solid #f5f5f5",bottom:"1px"}},".cm-tooltip-below &":{top:"-7px","&:before":{borderBottom:"7px solid #bbb"},"&:after":{borderBottom:"7px solid #f5f5f5",top:"1px"}}},"&dark .cm-tooltip .cm-tooltip-arrow":{"&:before":{borderTopColor:"#333338",borderBottomColor:"#333338"},"&:after":{borderTopColor:"transparent",borderBottomColor:"transparent"}}}),Q2e={x:0,y:0},zB=Rn.define({enables:[NB,z2e]}),s6=Rn.define({combine:t=>t.reduce((e,n)=>e.concat(n),[])});class yD{static create(e){return new yD(e)}constructor(e){this.view=e,this.mounted=!1,this.dom=document.createElement("div"),this.dom.classList.add("cm-tooltip-hover"),this.manager=new Ane(e,s6,(n,r)=>this.createHostedView(n,r),n=>n.dom.remove())}createHostedView(e,n){let r=e.create(this.view);return r.dom.classList.add("cm-tooltip-section"),this.dom.insertBefore(r.dom,n?n.dom.nextSibling:this.dom.firstChild),this.mounted&&r.mount&&r.mount(this.view),r}mount(e){for(let n of this.manager.tooltipViews)n.mount&&n.mount(e);this.mounted=!0}positioned(e){for(let n of this.manager.tooltipViews)n.positioned&&n.positioned(e)}update(e){this.manager.update(e)}destroy(){var e;for(let n of this.manager.tooltipViews)(e=n.destroy)===null||e===void 0||e.call(n)}passProp(e){let n;for(let r of this.manager.tooltipViews){let i=r[e];if(i!==void 0){if(n===void 0)n=i;else if(n!==i)return}}return n}get offset(){return this.passProp("offset")}get getCoords(){return this.passProp("getCoords")}get overlap(){return this.passProp("overlap")}get resize(){return this.passProp("resize")}}const j2e=zB.compute([s6],t=>{let e=t.facet(s6);return e.length===0?null:{pos:Math.min(...e.map(n=>n.pos)),end:Math.max(...e.map(n=>{var r;return(r=n.end)!==null&&r!==void 0?r:n.pos})),create:yD.create,above:e[0].above,arrow:e.some(n=>n.arrow)}});class U2e{constructor(e,n,r,i,s){this.view=e,this.source=n,this.field=r,this.setHover=i,this.hoverTime=s,this.hoverTimeout=-1,this.restartTimeout=-1,this.pending=null,this.lastMove={x:0,y:0,target:e.dom,time:0},this.checkHover=this.checkHover.bind(this),e.dom.addEventListener("mouseleave",this.mouseleave=this.mouseleave.bind(this)),e.dom.addEventListener("mousemove",this.mousemove=this.mousemove.bind(this))}update(){this.pending&&(this.pending=null,clearTimeout(this.restartTimeout),this.restartTimeout=setTimeout(()=>this.startHover(),20))}get active(){return this.view.state.field(this.field)}checkHover(){if(this.hoverTimeout=-1,this.active.length)return;let e=Date.now()-this.lastMove.time;e<this.hoverTime?this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime-e):this.startHover()}startHover(){clearTimeout(this.restartTimeout);let{view:e,lastMove:n}=this,r=e.docView.nearest(n.target);if(!r)return;let i,s=1;if(r instanceof zg)i=r.posAtStart;else{if(i=e.posAtCoords(n),i==null)return;let a=e.coordsAtPos(i);if(!a||n.y<a.top||n.y>a.bottom||n.x<a.left-e.defaultCharacterWidth||n.x>a.right+e.defaultCharacterWidth)return;let l=e.bidiSpans(e.state.doc.lineAt(i)).find(f=>f.from<=i&&f.to>=i),h=l&&l.dir==vo.RTL?-1:1;s=n.x<a.left?-h:h}let o=this.source(e,i,s);if(o?.then){let a=this.pending={pos:i};o.then(l=>{this.pending==a&&(this.pending=null,l&&!(Array.isArray(l)&&!l.length)&&e.dispatch({effects:this.setHover.of(Array.isArray(l)?l:[l])}))},l=>Mu(e.state,l,"hover tooltip"))}else o&&!(Array.isArray(o)&&!o.length)&&e.dispatch({effects:this.setHover.of(Array.isArray(o)?o:[o])})}get tooltip(){let e=this.view.plugin(NB),n=e?e.manager.tooltips.findIndex(r=>r.create==yD.create):-1;return n>-1?e.manager.tooltipViews[n]:null}mousemove(e){var n,r;this.lastMove={x:e.clientX,y:e.clientY,target:e.target,time:Date.now()},this.hoverTimeout<0&&(this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime));let{active:i,tooltip:s}=this;if(i.length&&s&&!V2e(s.dom,e)||this.pending){let{pos:o}=i[0]||this.pending,a=(r=(n=i[0])===null||n===void 0?void 0:n.end)!==null&&r!==void 0?r:o;(o==a?this.view.posAtCoords(this.lastMove)!=o:!q2e(this.view,o,a,e.clientX,e.clientY))&&(this.view.dispatch({effects:this.setHover.of([])}),this.pending=null)}}mouseleave(e){clearTimeout(this.hoverTimeout),this.hoverTimeout=-1;let{active:n}=this;if(n.length){let{tooltip:r}=this;r&&r.dom.contains(e.relatedTarget)?this.watchTooltipLeave(r.dom):this.view.dispatch({effects:this.setHover.of([])})}}watchTooltipLeave(e){let n=r=>{e.removeEventListener("mouseleave",n),this.active.length&&!this.view.dom.contains(r.relatedTarget)&&this.view.dispatch({effects:this.setHover.of([])})};e.addEventListener("mouseleave",n)}destroy(){clearTimeout(this.hoverTimeout),this.view.dom.removeEventListener("mouseleave",this.mouseleave),this.view.dom.removeEventListener("mousemove",this.mousemove)}}const r4=4;function V2e(t,e){let{left:n,right:r,top:i,bottom:s}=t.getBoundingClientRect(),o;if(o=t.querySelector(".cm-tooltip-arrow")){let a=o.getBoundingClientRect();i=Math.min(a.top,i),s=Math.max(a.bottom,s)}return e.clientX>=n-r4&&e.clientX<=r+r4&&e.clientY>=i-r4&&e.clientY<=s+r4}function q2e(t,e,n,r,i,s){let o=t.scrollDOM.getBoundingClientRect(),a=t.documentTop+t.documentPadding.top+t.contentHeight;if(o.left>r||o.right<r||o.top>i||Math.min(o.bottom,a)<i)return!1;let l=t.posAtCoords({x:r,y:i},!1);return l>=e&&l<=n}function QB(t,e={}){let n=Yr.define(),r=Aa.define({create(){return[]},update(i,s){if(i.length&&(e.hideOnChange&&(s.docChanged||s.selection)?i=[]:e.hideOn&&(i=i.filter(o=>!e.hideOn(s,o))),s.docChanged)){let o=[];for(let a of i){let l=s.changes.mapPos(a.pos,-1,yl.TrackDel);if(l!=null){let h=Object.assign(Object.create(null),a);h.pos=l,h.end!=null&&(h.end=s.changes.mapPos(h.end)),o.push(h)}}i=o}for(let o of s.effects)o.is(n)&&(i=o.value),o.is(Z2e)&&(i=[]);return i},provide:i=>s6.from(i)});return{active:r,extension:[r,Ca.define(i=>new U2e(i,t,r,n,e.hoverTime||300)),j2e]}}function Ene(t,e){let n=t.plugin(NB);if(!n)return null;let r=n.manager.tooltips.indexOf(e);return r<0?null:n.manager.tooltipViews[r]}const Z2e=Yr.define(),JU=Rn.define({combine(t){let e,n;for(let r of t)e=e||r.topContainer,n=n||r.bottomContainer;return{topContainer:e,bottomContainer:n}}});function Sk(t,e){let n=t.plugin(Tne),r=n?n.specs.indexOf(e):-1;return r>-1?n.panels[r]:null}const Tne=Ca.fromClass(class{constructor(t){this.input=t.state.facet(kk),this.specs=this.input.filter(n=>n),this.panels=this.specs.map(n=>n(t));let e=t.state.facet(JU);this.top=new i4(t,!0,e.topContainer),this.bottom=new i4(t,!1,e.bottomContainer),this.top.sync(this.panels.filter(n=>n.top)),this.bottom.sync(this.panels.filter(n=>!n.top));for(let n of this.panels)n.dom.classList.add("cm-panel"),n.mount&&n.mount()}update(t){let e=t.state.facet(JU);this.top.container!=e.topContainer&&(this.top.sync([]),this.top=new i4(t.view,!0,e.topContainer)),this.bottom.container!=e.bottomContainer&&(this.bottom.sync([]),this.bottom=new i4(t.view,!1,e.bottomContainer)),this.top.syncClasses(),this.bottom.syncClasses();let n=t.state.facet(kk);if(n!=this.input){let r=n.filter(l=>l),i=[],s=[],o=[],a=[];for(let l of r){let h=this.specs.indexOf(l),f;h<0?(f=l(t.view),a.push(f)):(f=this.panels[h],f.update&&f.update(t)),i.push(f),(f.top?s:o).push(f)}this.specs=r,this.panels=i,this.top.sync(s),this.bottom.sync(o);for(let l of a)l.dom.classList.add("cm-panel"),l.mount&&l.mount()}else for(let r of this.panels)r.update&&r.update(t)}destroy(){this.top.sync([]),this.bottom.sync([])}},{provide:t=>Cn.scrollMargins.of(e=>{let n=e.plugin(t);return n&&{top:n.top.scrollMargin(),bottom:n.bottom.scrollMargin()}})});class i4{constructor(e,n,r){this.view=e,this.top=n,this.container=r,this.dom=void 0,this.classes="",this.panels=[],this.syncClasses()}sync(e){for(let n of this.panels)n.destroy&&e.indexOf(n)<0&&n.destroy();this.panels=e,this.syncDOM()}syncDOM(){if(this.panels.length==0){this.dom&&(this.dom.remove(),this.dom=void 0);return}if(!this.dom){this.dom=document.createElement("div"),this.dom.className=this.top?"cm-panels cm-panels-top":"cm-panels cm-panels-bottom",this.dom.style[this.top?"top":"bottom"]="0";let n=this.container||this.view.dom;n.insertBefore(this.dom,this.top?n.firstChild:null)}let e=this.dom.firstChild;for(let n of this.panels)if(n.dom.parentNode==this.dom){for(;e!=n.dom;)e=eV(e);e=e.nextSibling}else this.dom.insertBefore(n.dom,e);for(;e;)e=eV(e)}scrollMargin(){return!this.dom||this.container?0:Math.max(0,this.top?this.dom.getBoundingClientRect().bottom-Math.max(0,this.view.scrollDOM.getBoundingClientRect().top):Math.min(innerHeight,this.view.scrollDOM.getBoundingClientRect().bottom)-this.dom.getBoundingClientRect().top)}syncClasses(){if(!(!this.container||this.classes==this.view.themeClasses)){for(let e of this.classes.split(" "))e&&this.container.classList.remove(e);for(let e of(this.classes=this.view.themeClasses).split(" "))e&&this.container.classList.add(e)}}}function eV(t){let e=t.nextSibling;return t.remove(),e}const kk=Rn.define({enables:Tne});class m1 extends Bb{compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}eq(e){return!1}destroy(e){}}m1.prototype.elementClass="";m1.prototype.toDOM=void 0;m1.prototype.mapMode=yl.TrackBefore;m1.prototype.startSide=m1.prototype.endSide=-1;m1.prototype.point=!0;const O5=Rn.define(),X2e=Rn.define(),S5=Rn.define(),tV=Rn.define({combine:t=>t.some(e=>e)});function W2e(t){return[G2e]}const G2e=Ca.fromClass(class{constructor(t){this.view=t,this.domAfter=null,this.prevViewport=t.viewport,this.dom=document.createElement("div"),this.dom.className="cm-gutters cm-gutters-before",this.dom.setAttribute("aria-hidden","true"),this.dom.style.minHeight=this.view.contentHeight/this.view.scaleY+"px",this.gutters=t.state.facet(S5).map(e=>new rV(t,e)),this.fixed=!t.state.facet(tV);for(let e of this.gutters)e.config.side=="after"?this.getDOMAfter().appendChild(e.dom):this.dom.appendChild(e.dom);this.fixed&&(this.dom.style.position="sticky"),this.syncGutters(!1),t.scrollDOM.insertBefore(this.dom,t.contentDOM)}getDOMAfter(){return this.domAfter||(this.domAfter=document.createElement("div"),this.domAfter.className="cm-gutters cm-gutters-after",this.domAfter.setAttribute("aria-hidden","true"),this.domAfter.style.minHeight=this.view.contentHeight/this.view.scaleY+"px",this.domAfter.style.position=this.fixed?"sticky":"",this.view.scrollDOM.appendChild(this.domAfter)),this.domAfter}update(t){if(this.updateGutters(t)){let e=this.prevViewport,n=t.view.viewport,r=Math.min(e.to,n.to)-Math.max(e.from,n.from);this.syncGutters(r<(n.to-n.from)*.8)}if(t.geometryChanged){let e=this.view.contentHeight/this.view.scaleY+"px";this.dom.style.minHeight=e,this.domAfter&&(this.domAfter.style.minHeight=e)}this.view.state.facet(tV)!=!this.fixed&&(this.fixed=!this.fixed,this.dom.style.position=this.fixed?"sticky":"",this.domAfter&&(this.domAfter.style.position=this.fixed?"sticky":"")),this.prevViewport=t.view.viewport}syncGutters(t){let e=this.dom.nextSibling;t&&(this.dom.remove(),this.domAfter&&this.domAfter.remove());let n=as.iter(this.view.state.facet(O5),this.view.viewport.from),r=[],i=this.gutters.map(s=>new Y2e(s,this.view.viewport,-this.view.documentPadding.top));for(let s of this.view.viewportLineBlocks)if(r.length&&(r=[]),Array.isArray(s.type)){let o=!0;for(let a of s.type)if(a.type==Fu.Text&&o){YF(n,r,a.from);for(let l of i)l.line(this.view,a,r);o=!1}else if(a.widget)for(let l of i)l.widget(this.view,a)}else if(s.type==Fu.Text){YF(n,r,s.from);for(let o of i)o.line(this.view,s,r)}else if(s.widget)for(let o of i)o.widget(this.view,s);for(let s of i)s.finish();t&&(this.view.scrollDOM.insertBefore(this.dom,e),this.domAfter&&this.view.scrollDOM.appendChild(this.domAfter))}updateGutters(t){let e=t.startState.facet(S5),n=t.state.facet(S5),r=t.docChanged||t.heightChanged||t.viewportChanged||!as.eq(t.startState.facet(O5),t.state.facet(O5),t.view.viewport.from,t.view.viewport.to);if(e==n)for(let i of this.gutters)i.update(t)&&(r=!0);else{r=!0;let i=[];for(let s of n){let o=e.indexOf(s);o<0?i.push(new rV(this.view,s)):(this.gutters[o].update(t),i.push(this.gutters[o]))}for(let s of this.gutters)s.dom.remove(),i.indexOf(s)<0&&s.destroy();for(let s of i)s.config.side=="after"?this.getDOMAfter().appendChild(s.dom):this.dom.appendChild(s.dom);this.gutters=i}return r}destroy(){for(let t of this.gutters)t.destroy();this.dom.remove(),this.domAfter&&this.domAfter.remove()}},{provide:t=>Cn.scrollMargins.of(e=>{let n=e.plugin(t);if(!n||n.gutters.length==0||!n.fixed)return null;let r=n.dom.offsetWidth*e.scaleX,i=n.domAfter?n.domAfter.offsetWidth*e.scaleX:0;return e.textDirection==vo.LTR?{left:r,right:i}:{right:r,left:i}})});function nV(t){return Array.isArray(t)?t:[t]}function YF(t,e,n){for(;t.value&&t.from<=n;)t.from==n&&e.push(t.value),t.next()}class Y2e{constructor(e,n,r){this.gutter=e,this.height=r,this.i=0,this.cursor=as.iter(e.markers,n.from)}addElement(e,n,r){let{gutter:i}=this,s=(n.top-this.height)/e.scaleY,o=n.height/e.scaleY;if(this.i==i.elements.length){let a=new Pne(e,o,s,r);i.elements.push(a),i.dom.appendChild(a.dom)}else i.elements[this.i].update(e,o,s,r);this.height=n.bottom,this.i++}line(e,n,r){let i=[];YF(this.cursor,i,n.from),r.length&&(i=i.concat(r));let s=this.gutter.config.lineMarker(e,n,i);s&&i.unshift(s);let o=this.gutter;i.length==0&&!o.config.renderEmptyElements||this.addElement(e,n,i)}widget(e,n){let r=this.gutter.config.widgetMarker(e,n.widget,n),i=r?[r]:null;for(let s of e.state.facet(X2e)){let o=s(e,n.widget,n);o&&(i||(i=[])).push(o)}i&&this.addElement(e,n,i)}finish(){let e=this.gutter;for(;e.elements.length>this.i;){let n=e.elements.pop();e.dom.removeChild(n.dom),n.destroy()}}}class rV{constructor(e,n){this.view=e,this.config=n,this.elements=[],this.spacer=null,this.dom=document.createElement("div"),this.dom.className="cm-gutter"+(this.config.class?" "+this.config.class:"");for(let r in n.domEventHandlers)this.dom.addEventListener(r,i=>{let s=i.target,o;if(s!=this.dom&&this.dom.contains(s)){for(;s.parentNode!=this.dom;)s=s.parentNode;let l=s.getBoundingClientRect();o=(l.top+l.bottom)/2}else o=i.clientY;let a=e.lineBlockAtHeight(o-e.documentTop);n.domEventHandlers[r](e,a,i)&&i.preventDefault()});this.markers=nV(n.markers(e)),n.initialSpacer&&(this.spacer=new Pne(e,0,0,[n.initialSpacer(e)]),this.dom.appendChild(this.spacer.dom),this.spacer.dom.style.cssText+="visibility: hidden; pointer-events: none")}update(e){let n=this.markers;if(this.markers=nV(this.config.markers(e.view)),this.spacer&&this.config.updateSpacer){let i=this.config.updateSpacer(this.spacer.markers[0],e);i!=this.spacer.markers[0]&&this.spacer.update(e.view,0,0,[i])}let r=e.view.viewport;return!as.eq(this.markers,n,r.from,r.to)||(this.config.lineMarkerChange?this.config.lineMarkerChange(e):!1)}destroy(){for(let e of this.elements)e.destroy()}}class Pne{constructor(e,n,r,i){this.height=-1,this.above=0,this.markers=[],this.dom=document.createElement("div"),this.dom.className="cm-gutterElement",this.update(e,n,r,i)}update(e,n,r,i){this.height!=n&&(this.height=n,this.dom.style.height=n+"px"),this.above!=r&&(this.dom.style.marginTop=(this.above=r)?r+"px":""),H2e(this.markers,i)||this.setMarkers(e,i)}setMarkers(e,n){let r="cm-gutterElement",i=this.dom.firstChild;for(let s=0,o=0;;){let a=o,l=s<n.length?n[s++]:null,h=!1;if(l){let f=l.elementClass;f&&(r+=" "+f);for(let p=o;p<this.markers.length;p++)if(this.markers[p].compare(l)){a=p,h=!0;break}}else a=this.markers.length;for(;o<a;){let f=this.markers[o++];if(f.toDOM){f.destroy(i);let p=i.nextSibling;i.remove(),i=p}}if(!l)break;l.toDOM&&(h?i=i.nextSibling:this.dom.insertBefore(l.toDOM(e),i)),h&&o++}this.dom.className=r,this.markers=n}destroy(){this.setMarkers(null,[])}}function H2e(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++)if(!t[n].compare(e[n]))return!1;return!0}const K2e=Rn.define(),J2e=Rn.define(),Hx=Rn.define({combine(t){return x0(t,{formatNumber:String,domEventHandlers:{}},{domEventHandlers(e,n){let r=Object.assign({},e);for(let i in n){let s=r[i],o=n[i];r[i]=s?(a,l,h)=>s(a,l,h)||o(a,l,h):o}return r}})}});class AM extends m1{constructor(e){super(),this.number=e}eq(e){return this.number==e.number}toDOM(){return document.createTextNode(this.number)}}function EM(t,e){return t.state.facet(Hx).formatNumber(e,t.state)}const eOe=S5.compute([Hx],t=>({class:"cm-lineNumbers",renderEmptyElements:!1,markers(e){return e.state.facet(K2e)},lineMarker(e,n,r){return r.some(i=>i.toDOM)?null:new AM(EM(e,e.state.doc.lineAt(n.from).number))},widgetMarker:(e,n,r)=>{for(let i of e.state.facet(J2e)){let s=i(e,n,r);if(s)return s}return null},lineMarkerChange:e=>e.startState.facet(Hx)!=e.state.facet(Hx),initialSpacer(e){return new AM(EM(e,iV(e.state.doc.lines)))},updateSpacer(e,n){let r=EM(n.view,iV(n.view.state.doc.lines));return r==e.number?e:new AM(r)},domEventHandlers:t.facet(Hx).domEventHandlers,side:"before"}));function tOe(t={}){return[Hx.of(t),W2e(),eOe]}function iV(t){let e=9;for(;e<t;)e=e*10+9;return e}const nOe=new class extends m1{constructor(){super(...arguments),this.elementClass="cm-activeLineGutter"}},rOe=O5.compute(["selection"],t=>{let e=[],n=-1;for(let r of t.selection.ranges){let i=t.doc.lineAt(r.head).from;i>n&&(n=i,e.push(nOe.range(i)))}return as.of(e)});function iOe(){return rOe}const Dne=1024;let sOe=0;class af{constructor(e,n){this.from=e,this.to=n}}class Dr{constructor(e={}){this.id=sOe++,this.perNode=!!e.perNode,this.deserialize=e.deserialize||(()=>{throw new Error("This node type doesn't define a deserialize function")}),this.combine=e.combine||null}add(e){if(this.perNode)throw new RangeError("Can't add per-node props to node types");return typeof e!="function"&&(e=za.match(e)),n=>{let r=e(n);return r===void 0?null:[this,r]}}}Dr.closedBy=new Dr({deserialize:t=>t.split(" ")});Dr.openedBy=new Dr({deserialize:t=>t.split(" ")});Dr.group=new Dr({deserialize:t=>t.split(" ")});Dr.isolate=new Dr({deserialize:t=>{if(t&&t!="rtl"&&t!="ltr"&&t!="auto")throw new RangeError("Invalid value for isolate: "+t);return t||"auto"}});Dr.contextHash=new Dr({perNode:!0});Dr.lookAhead=new Dr({perNode:!0});Dr.mounted=new Dr({perNode:!0});class Ck{constructor(e,n,r){this.tree=e,this.overlay=n,this.parser=r}static get(e){return e&&e.props&&e.props[Dr.mounted.id]}}const oOe=Object.create(null);class za{constructor(e,n,r,i=0){this.name=e,this.props=n,this.id=r,this.flags=i}static define(e){let n=e.props&&e.props.length?Object.create(null):oOe,r=(e.top?1:0)|(e.skipped?2:0)|(e.error?4:0)|(e.name==null?8:0),i=new za(e.name||"",n,e.id,r);if(e.props){for(let s of e.props)if(Array.isArray(s)||(s=s(i)),s){if(s[0].perNode)throw new RangeError("Can't store a per-node prop on a node type");n[s[0].id]=s[1]}}return i}prop(e){return this.props[e.id]}get isTop(){return(this.flags&1)>0}get isSkipped(){return(this.flags&2)>0}get isError(){return(this.flags&4)>0}get isAnonymous(){return(this.flags&8)>0}is(e){if(typeof e=="string"){if(this.name==e)return!0;let n=this.prop(Dr.group);return n?n.indexOf(e)>-1:!1}return this.id==e}static match(e){let n=Object.create(null);for(let r in e)for(let i of r.split(" "))n[i]=e[r];return r=>{for(let i=r.prop(Dr.group),s=-1;s<(i?i.length:0);s++){let o=n[s<0?r.name:i[s]];if(o)return o}}}}za.none=new za("",Object.create(null),0,8);class LC{constructor(e){this.types=e;for(let n=0;n<e.length;n++)if(e[n].id!=n)throw new RangeError("Node type ids should correspond to array positions when creating a node set")}extend(...e){let n=[];for(let r of this.types){let i=null;for(let s of e){let o=s(r);if(o){i||(i=Object.assign({},r.props));let a=o[1],l=o[0];l.combine&&l.id in i&&(a=l.combine(i[l.id],a)),i[l.id]=a}}n.push(i?new za(r.name,i,r.id,r.flags):r)}return new LC(n)}}const s4=new WeakMap,sV=new WeakMap;var so;(function(t){t[t.ExcludeBuffers=1]="ExcludeBuffers",t[t.IncludeAnonymous=2]="IncludeAnonymous",t[t.IgnoreMounts=4]="IgnoreMounts",t[t.IgnoreOverlays=8]="IgnoreOverlays"})(so||(so={}));class xs{constructor(e,n,r,i,s){if(this.type=e,this.children=n,this.positions=r,this.length=i,this.props=null,s&&s.length){this.props=Object.create(null);for(let[o,a]of s)this.props[typeof o=="number"?o:o.id]=a}}toString(){let e=Ck.get(this);if(e&&!e.overlay)return e.tree.toString();let n="";for(let r of this.children){let i=r.toString();i&&(n&&(n+=","),n+=i)}return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(n.length?"("+n+")":""):n}cursor(e=0){return new o6(this.topNode,e)}cursorAt(e,n=0,r=0){let i=s4.get(this)||this.topNode,s=new o6(i);return s.moveTo(e,n),s4.set(this,s._tree),s}get topNode(){return new eu(this,0,0,null)}resolve(e,n=0){let r=Ak(s4.get(this)||this.topNode,e,n,!1);return s4.set(this,r),r}resolveInner(e,n=0){let r=Ak(sV.get(this)||this.topNode,e,n,!0);return sV.set(this,r),r}resolveStack(e,n=0){return uOe(this,e,n)}iterate(e){let{enter:n,leave:r,from:i=0,to:s=this.length}=e,o=e.mode||0,a=(o&so.IncludeAnonymous)>0;for(let l=this.cursor(o|so.IncludeAnonymous);;){let h=!1;if(l.from<=s&&l.to>=i&&(!a&&l.type.isAnonymous||n(l)!==!1)){if(l.firstChild())continue;h=!0}for(;h&&r&&(a||!l.type.isAnonymous)&&r(l),!l.nextSibling();){if(!l.parent())return;h=!0}}}prop(e){return e.perNode?this.props?this.props[e.id]:void 0:this.type.prop(e)}get propValues(){let e=[];if(this.props)for(let n in this.props)e.push([+n,this.props[n]]);return e}balance(e={}){return this.children.length<=8?this:VB(za.none,this.children,this.positions,0,this.children.length,0,this.length,(n,r,i)=>new xs(this.type,n,r,i,this.propValues),e.makeTree||((n,r,i)=>new xs(za.none,n,r,i)))}static build(e){return cOe(e)}}xs.empty=new xs(za.none,[],[],0);class jB{constructor(e,n){this.buffer=e,this.index=n}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new jB(this.buffer,this.index)}}class g1{constructor(e,n,r){this.buffer=e,this.length=n,this.set=r}get type(){return za.none}toString(){let e=[];for(let n=0;n<this.buffer.length;)e.push(this.childString(n)),n=this.buffer[n+3];return e.join(",")}childString(e){let n=this.buffer[e],r=this.buffer[e+3],i=this.set.types[n],s=i.name;if(/\W/.test(s)&&!i.isError&&(s=JSON.stringify(s)),e+=4,r==e)return s;let o=[];for(;e<r;)o.push(this.childString(e)),e=this.buffer[e+3];return s+"("+o.join(",")+")"}findChild(e,n,r,i,s){let{buffer:o}=this,a=-1;for(let l=e;l!=n&&!(Ine(s,i,o[l+1],o[l+2])&&(a=l,r>0));l=o[l+3]);return a}slice(e,n,r){let i=this.buffer,s=new Uint16Array(n-e),o=0;for(let a=e,l=0;a<n;){s[l++]=i[a++],s[l++]=i[a++]-r;let h=s[l++]=i[a++]-r;s[l++]=i[a++]-e,o=Math.max(o,h)}return new g1(s,o,this.set)}}function Ine(t,e,n,r){switch(t){case-2:return n<e;case-1:return r>=e&&n<e;case 0:return n<e&&r>e;case 1:return n<=e&&r>e;case 2:return r>e;case 4:return!0}}function Ak(t,e,n,r){for(var i;t.from==t.to||(n<1?t.from>=e:t.from>e)||(n>-1?t.to<=e:t.to<e);){let o=!r&&t instanceof eu&&t.index<0?null:t.parent;if(!o)return t;t=o}let s=r?0:so.IgnoreOverlays;if(r)for(let o=t,a=o.parent;a;o=a,a=o.parent)o instanceof eu&&o.index<0&&((i=a.enter(e,n,s))===null||i===void 0?void 0:i.from)!=o.from&&(t=a);for(;;){let o=t.enter(e,n,s);if(!o)return t;t=o}}class Mne{cursor(e=0){return new o6(this,e)}getChild(e,n=null,r=null){let i=oV(this,e,n,r);return i.length?i[0]:null}getChildren(e,n=null,r=null){return oV(this,e,n,r)}resolve(e,n=0){return Ak(this,e,n,!1)}resolveInner(e,n=0){return Ak(this,e,n,!0)}matchContext(e){return HF(this.parent,e)}enterUnfinishedNodesBefore(e){let n=this.childBefore(e),r=this;for(;n;){let i=n.lastChild;if(!i||i.to!=n.to)break;i.type.isError&&i.from==i.to?(r=n,n=i.prevSibling):n=i}return r}get node(){return this}get next(){return this.parent}}class eu extends Mne{constructor(e,n,r,i){super(),this._tree=e,this.from=n,this.index=r,this._parent=i}get type(){return this._tree.type}get name(){return this._tree.type.name}get to(){return this.from+this._tree.length}nextChild(e,n,r,i,s=0){for(let o=this;;){for(let{children:a,positions:l}=o._tree,h=n>0?a.length:-1;e!=h;e+=n){let f=a[e],p=l[e]+o.from;if(Ine(i,r,p,p+f.length)){if(f instanceof g1){if(s&so.ExcludeBuffers)continue;let g=f.findChild(0,f.buffer.length,n,r-p,i);if(g>-1)return new Vp(new aOe(o,f,e,p),null,g)}else if(s&so.IncludeAnonymous||!f.type.isAnonymous||UB(f)){let g;if(!(s&so.IgnoreMounts)&&(g=Ck.get(f))&&!g.overlay)return new eu(g.tree,p,e,o);let b=new eu(f,p,e,o);return s&so.IncludeAnonymous||!b.type.isAnonymous?b:b.nextChild(n<0?f.children.length-1:0,n,r,i)}}}if(s&so.IncludeAnonymous||!o.type.isAnonymous||(o.index>=0?e=o.index+n:e=n<0?-1:o._parent._tree.children.length,o=o._parent,!o))return null}}get firstChild(){return this.nextChild(0,1,0,4)}get lastChild(){return this.nextChild(this._tree.children.length-1,-1,0,4)}childAfter(e){return this.nextChild(0,1,e,2)}childBefore(e){return this.nextChild(this._tree.children.length-1,-1,e,-2)}enter(e,n,r=0){let i;if(!(r&so.IgnoreOverlays)&&(i=Ck.get(this._tree))&&i.overlay){let s=e-this.from;for(let{from:o,to:a}of i.overlay)if((n>0?o<=s:o<s)&&(n<0?a>=s:a>s))return new eu(i.tree,i.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,e,n,r)}nextSignificantParent(){let e=this;for(;e.type.isAnonymous&&e._parent;)e=e._parent;return e}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}get prevSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}get tree(){return this._tree}toTree(){return this._tree}toString(){return this._tree.toString()}}function oV(t,e,n,r){let i=t.cursor(),s=[];if(!i.firstChild())return s;if(n!=null){for(let o=!1;!o;)if(o=i.type.is(n),!i.nextSibling())return s}for(;;){if(r!=null&&i.type.is(r))return s;if(i.type.is(e)&&s.push(i.node),!i.nextSibling())return r==null?s:[]}}function HF(t,e,n=e.length-1){for(let r=t;n>=0;r=r.parent){if(!r)return!1;if(!r.type.isAnonymous){if(e[n]&&e[n]!=r.name)return!1;n--}}return!0}class aOe{constructor(e,n,r,i){this.parent=e,this.buffer=n,this.index=r,this.start=i}}class Vp extends Mne{get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}constructor(e,n,r){super(),this.context=e,this._parent=n,this.index=r,this.type=e.buffer.set.types[e.buffer.buffer[r]]}child(e,n,r){let{buffer:i}=this.context,s=i.findChild(this.index+4,i.buffer[this.index+3],e,n-this.context.start,r);return s<0?null:new Vp(this.context,this,s)}get firstChild(){return this.child(1,0,4)}get lastChild(){return this.child(-1,0,4)}childAfter(e){return this.child(1,e,2)}childBefore(e){return this.child(-1,e,-2)}enter(e,n,r=0){if(r&so.ExcludeBuffers)return null;let{buffer:i}=this.context,s=i.findChild(this.index+4,i.buffer[this.index+3],n>0?1:-1,e-this.context.start,n);return s<0?null:new Vp(this.context,this,s)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(e){return this._parent?null:this.context.parent.nextChild(this.context.index+e,e,0,4)}get nextSibling(){let{buffer:e}=this.context,n=e.buffer[this.index+3];return n<(this._parent?e.buffer[this._parent.index+3]:e.buffer.length)?new Vp(this.context,this._parent,n):this.externalSibling(1)}get prevSibling(){let{buffer:e}=this.context,n=this._parent?this._parent.index+4:0;return this.index==n?this.externalSibling(-1):new Vp(this.context,this._parent,e.findChild(n,this.index,-1,0,4))}get tree(){return null}toTree(){let e=[],n=[],{buffer:r}=this.context,i=this.index+4,s=r.buffer[this.index+3];if(s>i){let o=r.buffer[this.index+1];e.push(r.slice(i,s,o)),n.push(0)}return new xs(this.type,e,n,this.to-this.from)}toString(){return this.context.buffer.childString(this.index)}}function Rne(t){if(!t.length)return null;let e=0,n=t[0];for(let s=1;s<t.length;s++){let o=t[s];(o.from>n.from||o.to<n.to)&&(n=o,e=s)}let r=n instanceof eu&&n.index<0?null:n.parent,i=t.slice();return r?i[e]=r:i.splice(e,1),new lOe(i,n)}class lOe{constructor(e,n){this.heads=e,this.node=n}get next(){return Rne(this.heads)}}function uOe(t,e,n){let r=t.resolveInner(e,n),i=null;for(let s=r instanceof eu?r:r.context.parent;s;s=s.parent)if(s.index<0){let o=s.parent;(i||(i=[r])).push(o.resolve(e,n)),s=o}else{let o=Ck.get(s.tree);if(o&&o.overlay&&o.overlay[0].from<=e&&o.overlay[o.overlay.length-1].to>=e){let a=new eu(o.tree,o.overlay[0].from+s.from,-1,s);(i||(i=[r])).push(Ak(a,e,n,!1))}}return i?Rne(i):r}class o6{get name(){return this.type.name}constructor(e,n=0){if(this.mode=n,this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,e instanceof eu)this.yieldNode(e);else{this._tree=e.context.parent,this.buffer=e.context;for(let r=e._parent;r;r=r._parent)this.stack.unshift(r.index);this.bufferNode=e,this.yieldBuf(e.index)}}yieldNode(e){return e?(this._tree=e,this.type=e.type,this.from=e.from,this.to=e.to,!0):!1}yieldBuf(e,n){this.index=e;let{start:r,buffer:i}=this.buffer;return this.type=n||i.set.types[i.buffer[e]],this.from=r+i.buffer[e+1],this.to=r+i.buffer[e+2],!0}yield(e){return e?e instanceof eu?(this.buffer=null,this.yieldNode(e)):(this.buffer=e.context,this.yieldBuf(e.index,e.type)):!1}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enterChild(e,n,r){if(!this.buffer)return this.yield(this._tree.nextChild(e<0?this._tree._tree.children.length-1:0,e,n,r,this.mode));let{buffer:i}=this.buffer,s=i.findChild(this.index+4,i.buffer[this.index+3],e,n-this.buffer.start,r);return s<0?!1:(this.stack.push(this.index),this.yieldBuf(s))}firstChild(){return this.enterChild(1,0,4)}lastChild(){return this.enterChild(-1,0,4)}childAfter(e){return this.enterChild(1,e,2)}childBefore(e){return this.enterChild(-1,e,-2)}enter(e,n,r=this.mode){return this.buffer?r&so.ExcludeBuffers?!1:this.enterChild(1,e,n):this.yield(this._tree.enter(e,n,r))}parent(){if(!this.buffer)return this.yieldNode(this.mode&so.IncludeAnonymous?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let e=this.mode&so.IncludeAnonymous?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(e)}sibling(e){if(!this.buffer)return this._tree._parent?this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+e,e,0,4,this.mode)):!1;let{buffer:n}=this.buffer,r=this.stack.length-1;if(e<0){let i=r<0?0:this.stack[r]+4;if(this.index!=i)return this.yieldBuf(n.findChild(i,this.index,-1,0,4))}else{let i=n.buffer[this.index+3];if(i<(r<0?n.buffer.length:n.buffer[this.stack[r]+3]))return this.yieldBuf(i)}return r<0?this.yield(this.buffer.parent.nextChild(this.buffer.index+e,e,0,4,this.mode)):!1}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(e){let n,r,{buffer:i}=this;if(i){if(e>0){if(this.index<i.buffer.buffer.length)return!1}else for(let s=0;s<this.index;s++)if(i.buffer.buffer[s+3]<this.index)return!1;({index:n,parent:r}=i)}else({index:n,_parent:r}=this._tree);for(;r;{index:n,_parent:r}=r)if(n>-1)for(let s=n+e,o=e<0?-1:r._tree.children.length;s!=o;s+=e){let a=r._tree.children[s];if(this.mode&so.IncludeAnonymous||a instanceof g1||!a.type.isAnonymous||UB(a))return!1}return!0}move(e,n){if(n&&this.enterChild(e,0,4))return!0;for(;;){if(this.sibling(e))return!0;if(this.atLastNode(e)||!this.parent())return!1}}next(e=!0){return this.move(1,e)}prev(e=!0){return this.move(-1,e)}moveTo(e,n=0){for(;(this.from==this.to||(n<1?this.from>=e:this.from>e)||(n>-1?this.to<=e:this.to<e))&&this.parent(););for(;this.enterChild(1,e,n););return this}get node(){if(!this.buffer)return this._tree;let e=this.bufferNode,n=null,r=0;if(e&&e.context==this.buffer)e:for(let i=this.index,s=this.stack.length;s>=0;){for(let o=e;o;o=o._parent)if(o.index==i){if(i==this.index)return o;n=o,r=s+1;break e}i=this.stack[--s]}for(let i=r;i<this.stack.length;i++)n=new Vp(this.buffer,n,this.stack[i]);return this.bufferNode=new Vp(this.buffer,n,this.index)}get tree(){return this.buffer?null:this._tree._tree}iterate(e,n){for(let r=0;;){let i=!1;if(this.type.isAnonymous||e(this)!==!1){if(this.firstChild()){r++;continue}this.type.isAnonymous||(i=!0)}for(;;){if(i&&n&&n(this),i=this.type.isAnonymous,!r)return;if(this.nextSibling())break;this.parent(),r--,i=!0}}}matchContext(e){if(!this.buffer)return HF(this.node.parent,e);let{buffer:n}=this.buffer,{types:r}=n.set;for(let i=e.length-1,s=this.stack.length-1;i>=0;s--){if(s<0)return HF(this._tree,e,i);let o=r[n.buffer[this.stack[s]]];if(!o.isAnonymous){if(e[i]&&e[i]!=o.name)return!1;i--}}return!0}}function UB(t){return t.children.some(e=>e instanceof g1||!e.type.isAnonymous||UB(e))}function cOe(t){var e;let{buffer:n,nodeSet:r,maxBufferLength:i=Dne,reused:s=[],minRepeatType:o=r.types.length}=t,a=Array.isArray(n)?new jB(n,n.length):n,l=r.types,h=0,f=0;function p(Q,Z,q,J,oe,me){let{id:ae,start:ce,end:se,size:ge}=a,xe=f,Se=h;if(ge<0)if(a.next(),ge==-1){let We=s[ae];q.push(We),J.push(ce-Q);return}else if(ge==-3){h=ae;return}else if(ge==-4){f=ae;return}else throw new RangeError(`Unrecognized record size: ${ge}`);let De=l[ae],He,Ue,yt=ce-Q;if(se-ce<=i&&(Ue=T(a.pos-Z,oe))){let We=new Uint16Array(Ue.size-Ue.skip),at=a.pos-Ue.size,ut=We.length;for(;a.pos>at;)ut=I(Ue.start,We,ut);He=new g1(We,se-Ue.start,r),yt=Ue.start-Q}else{let We=a.pos-ge;a.next();let at=[],ut=[],wt=ae>=o?ae:-1,ot=0,dt=se;for(;a.pos>We;)wt>=0&&a.id==wt&&a.size>=0?(a.end<=dt-i&&(x(at,ut,ce,ot,a.end,dt,wt,xe,Se),ot=at.length,dt=a.end),a.next()):me>2500?g(ce,We,at,ut):p(ce,We,at,ut,wt,me+1);if(wt>=0&&ot>0&&ot<at.length&&x(at,ut,ce,ot,ce,dt,wt,xe,Se),at.reverse(),ut.reverse(),wt>-1&&ot>0){let Yt=b(De,Se);He=VB(De,at,ut,0,at.length,0,se-ce,Yt,Yt)}else He=k(De,at,ut,se-ce,xe-se,Se)}q.push(He),J.push(yt)}function g(Q,Z,q,J){let oe=[],me=0,ae=-1;for(;a.pos>Z;){let{id:ce,start:se,end:ge,size:xe}=a;if(xe>4)a.next();else{if(ae>-1&&se<ae)break;ae<0&&(ae=ge-i),oe.push(ce,se,ge),me++,a.next()}}if(me){let ce=new Uint16Array(me*4),se=oe[oe.length-2];for(let ge=oe.length-3,xe=0;ge>=0;ge-=3)ce[xe++]=oe[ge],ce[xe++]=oe[ge+1]-se,ce[xe++]=oe[ge+2]-se,ce[xe++]=xe;q.push(new g1(ce,oe[2]-se,r)),J.push(se-Q)}}function b(Q,Z){return(q,J,oe)=>{let me=0,ae=q.length-1,ce,se;if(ae>=0&&(ce=q[ae])instanceof xs){if(!ae&&ce.type==Q&&ce.length==oe)return ce;(se=ce.prop(Dr.lookAhead))&&(me=J[ae]+ce.length+se)}return k(Q,q,J,oe,me,Z)}}function x(Q,Z,q,J,oe,me,ae,ce,se){let ge=[],xe=[];for(;Q.length>J;)ge.push(Q.pop()),xe.push(Z.pop()+q-oe);Q.push(k(r.types[ae],ge,xe,me-oe,ce-me,se)),Z.push(oe-q)}function k(Q,Z,q,J,oe,me,ae){if(me){let ce=[Dr.contextHash,me];ae=ae?[ce].concat(ae):[ce]}if(oe>25){let ce=[Dr.lookAhead,oe];ae=ae?[ce].concat(ae):[ce]}return new xs(Q,Z,q,J,ae)}function T(Q,Z){let q=a.fork(),J=0,oe=0,me=0,ae=q.end-i,ce={size:0,start:0,skip:0};e:for(let se=q.pos-Q;q.pos>se;){let ge=q.size;if(q.id==Z&&ge>=0){ce.size=J,ce.start=oe,ce.skip=me,me+=4,J+=4,q.next();continue}let xe=q.pos-ge;if(ge<0||xe<se||q.start<ae)break;let Se=q.id>=o?4:0,De=q.start;for(q.next();q.pos>xe;){if(q.size<0)if(q.size==-3)Se+=4;else break e;else q.id>=o&&(Se+=4);q.next()}oe=De,J+=ge,me+=Se}return(Z<0||J==Q)&&(ce.size=J,ce.start=oe,ce.skip=me),ce.size>4?ce:void 0}function I(Q,Z,q){let{id:J,start:oe,end:me,size:ae}=a;if(a.next(),ae>=0&&J<o){let ce=q;if(ae>4){let se=a.pos-(ae-4);for(;a.pos>se;)q=I(Q,Z,q)}Z[--q]=ce,Z[--q]=me-Q,Z[--q]=oe-Q,Z[--q]=J}else ae==-3?h=J:ae==-4&&(f=J);return q}let M=[],B=[];for(;a.pos>0;)p(t.start||0,t.bufferStart||0,M,B,-1,0);let j=(e=t.length)!==null&&e!==void 0?e:M.length?B[0]+M[0].length:0;return new xs(l[t.topID],M.reverse(),B.reverse(),j)}const aV=new WeakMap;function k5(t,e){if(!t.isAnonymous||e instanceof g1||e.type!=t)return 1;let n=aV.get(e);if(n==null){n=1;for(let r of e.children){if(r.type!=t||!(r instanceof xs)){n=1;break}n+=k5(t,r)}aV.set(e,n)}return n}function VB(t,e,n,r,i,s,o,a,l){let h=0;for(let x=r;x<i;x++)h+=k5(t,e[x]);let f=Math.ceil(h*1.5/8),p=[],g=[];function b(x,k,T,I,M){for(let B=T;B<I;){let j=B,Q=k[B],Z=k5(t,x[B]);for(B++;B<I;B++){let q=k5(t,x[B]);if(Z+q>=f)break;Z+=q}if(B==j+1){if(Z>f){let q=x[j];b(q.children,q.positions,0,q.children.length,k[j]+M);continue}p.push(x[j])}else{let q=k[B-1]+x[B-1].length-Q;p.push(VB(t,x,k,j,B,Q,q,null,l))}g.push(Q+M-s)}}return b(e,n,r,i,0),(a||l)(p,g,o)}class Fne{constructor(){this.map=new WeakMap}setBuffer(e,n,r){let i=this.map.get(e);i||this.map.set(e,i=new Map),i.set(n,r)}getBuffer(e,n){let r=this.map.get(e);return r&&r.get(n)}set(e,n){e instanceof Vp?this.setBuffer(e.context.buffer,e.index,n):e instanceof eu&&this.map.set(e.tree,n)}get(e){return e instanceof Vp?this.getBuffer(e.context.buffer,e.index):e instanceof eu?this.map.get(e.tree):void 0}cursorSet(e,n){e.buffer?this.setBuffer(e.buffer.buffer,e.index,n):this.map.set(e.tree,n)}cursorGet(e){return e.buffer?this.getBuffer(e.buffer.buffer,e.index):this.map.get(e.tree)}}class Hg{constructor(e,n,r,i,s=!1,o=!1){this.from=e,this.to=n,this.tree=r,this.offset=i,this.open=(s?1:0)|(o?2:0)}get openStart(){return(this.open&1)>0}get openEnd(){return(this.open&2)>0}static addTree(e,n=[],r=!1){let i=[new Hg(0,e.length,e,0,!1,r)];for(let s of n)s.to>e.length&&i.push(s);return i}static applyChanges(e,n,r=128){if(!n.length)return e;let i=[],s=1,o=e.length?e[0]:null;for(let a=0,l=0,h=0;;a++){let f=a<n.length?n[a]:null,p=f?f.fromA:1e9;if(p-l>=r)for(;o&&o.from<p;){let g=o;if(l>=g.from||p<=g.to||h){let b=Math.max(g.from,l)-h,x=Math.min(g.to,p)-h;g=b>=x?null:new Hg(b,x,g.tree,g.offset+h,a>0,!!f)}if(g&&i.push(g),o.to>p)break;o=s<e.length?e[s++]:null}if(!f)break;l=f.toA,h=f.toA-f.toB}return i}}let qB=class{startParse(e,n,r){return typeof e=="string"&&(e=new hOe(e)),r=r?r.length?r.map(i=>new af(i.from,i.to)):[new af(0,0)]:[new af(0,e.length)],this.createParse(e,n||[],r)}parse(e,n,r){let i=this.startParse(e,n,r);for(;;){let s=i.advance();if(s)return s}}};class hOe{constructor(e){this.string=e}get length(){return this.string.length}chunk(e){return this.string.slice(e)}get lineChunks(){return!1}read(e,n){return this.string.slice(e,n)}}function Lne(t){return(e,n,r,i)=>new dOe(e,t,n,r,i)}class lV{constructor(e,n,r,i,s){this.parser=e,this.parse=n,this.overlay=r,this.target=i,this.from=s}}function uV(t){if(!t.length||t.some(e=>e.from>=e.to))throw new RangeError("Invalid inner parse ranges given: "+JSON.stringify(t))}class fOe{constructor(e,n,r,i,s,o,a){this.parser=e,this.predicate=n,this.mounts=r,this.index=i,this.start=s,this.target=o,this.prev=a,this.depth=0,this.ranges=[]}}const KF=new Dr({perNode:!0});class dOe{constructor(e,n,r,i,s){this.nest=n,this.input=r,this.fragments=i,this.ranges=s,this.inner=[],this.innerDone=0,this.baseTree=null,this.stoppedAt=null,this.baseParse=e}advance(){if(this.baseParse){let r=this.baseParse.advance();if(!r)return null;if(this.baseParse=null,this.baseTree=r,this.startInner(),this.stoppedAt!=null)for(let i of this.inner)i.parse.stopAt(this.stoppedAt)}if(this.innerDone==this.inner.length){let r=this.baseTree;return this.stoppedAt!=null&&(r=new xs(r.type,r.children,r.positions,r.length,r.propValues.concat([[KF,this.stoppedAt]]))),r}let e=this.inner[this.innerDone],n=e.parse.advance();if(n){this.innerDone++;let r=Object.assign(Object.create(null),e.target.props);r[Dr.mounted.id]=new Ck(n,e.overlay,e.parser),e.target.props=r}return null}get parsedPos(){if(this.baseParse)return 0;let e=this.input.length;for(let n=this.innerDone;n<this.inner.length;n++)this.inner[n].from<e&&(e=Math.min(e,this.inner[n].parse.parsedPos));return e}stopAt(e){if(this.stoppedAt=e,this.baseParse)this.baseParse.stopAt(e);else for(let n=this.innerDone;n<this.inner.length;n++)this.inner[n].parse.stopAt(e)}startInner(){let e=new gOe(this.fragments),n=null,r=null,i=new o6(new eu(this.baseTree,this.ranges[0].from,0,null),so.IncludeAnonymous|so.IgnoreMounts);e:for(let s,o;;){let a=!0,l;if(this.stoppedAt!=null&&i.from>=this.stoppedAt)a=!1;else if(e.hasNode(i)){if(n){let h=n.mounts.find(f=>f.frag.from<=i.from&&f.frag.to>=i.to&&f.mount.overlay);if(h)for(let f of h.mount.overlay){let p=f.from+h.pos,g=f.to+h.pos;p>=i.from&&g<=i.to&&!n.ranges.some(b=>b.from<g&&b.to>p)&&n.ranges.push({from:p,to:g})}}a=!1}else if(r&&(o=pOe(r.ranges,i.from,i.to)))a=o!=2;else if(!i.type.isAnonymous&&(s=this.nest(i,this.input))&&(i.from<i.to||!s.overlay)){i.tree||(mOe(i),n&&n.depth++,r&&r.depth++);let h=e.findMounts(i.from,s.parser);if(typeof s.overlay=="function")n=new fOe(s.parser,s.overlay,h,this.inner.length,i.from,i.tree,n);else{let f=fV(this.ranges,s.overlay||(i.from<i.to?[new af(i.from,i.to)]:[]));f.length&&uV(f),(f.length||!s.overlay)&&this.inner.push(new lV(s.parser,f.length?s.parser.startParse(this.input,dV(h,f),f):s.parser.startParse(""),s.overlay?s.overlay.map(p=>new af(p.from-i.from,p.to-i.from)):null,i.tree,f.length?f[0].from:i.from)),s.overlay?f.length&&(r={ranges:f,depth:0,prev:r}):a=!1}}else if(n&&(l=n.predicate(i))&&(l===!0&&(l=new af(i.from,i.to)),l.from<l.to)){let h=n.ranges.length-1;h>=0&&n.ranges[h].to==l.from?n.ranges[h]={from:n.ranges[h].from,to:l.to}:n.ranges.push(l)}if(a&&i.firstChild())n&&n.depth++,r&&r.depth++;else for(;!i.nextSibling();){if(!i.parent())break e;if(n&&!--n.depth){let h=fV(this.ranges,n.ranges);h.length&&(uV(h),this.inner.splice(n.index,0,new lV(n.parser,n.parser.startParse(this.input,dV(n.mounts,h),h),n.ranges.map(f=>new af(f.from-n.start,f.to-n.start)),n.target,h[0].from))),n=n.prev}r&&!--r.depth&&(r=r.prev)}}}}function pOe(t,e,n){for(let r of t){if(r.from>=n)break;if(r.to>e)return r.from<=e&&r.to>=n?2:1}return 0}function cV(t,e,n,r,i,s){if(e<n){let o=t.buffer[e+1];r.push(t.slice(e,n,o)),i.push(o-s)}}function mOe(t){let{node:e}=t,n=[],r=e.context.buffer;do n.push(t.index),t.parent();while(!t.tree);let i=t.tree,s=i.children.indexOf(r),o=i.children[s],a=o.buffer,l=[s];function h(f,p,g,b,x,k){let T=n[k],I=[],M=[];cV(o,f,T,I,M,b);let B=a[T+1],j=a[T+2];l.push(I.length);let Q=k?h(T+4,a[T+3],o.set.types[a[T]],B,j-B,k-1):e.toTree();return I.push(Q),M.push(B-b),cV(o,a[T+3],p,I,M,b),new xs(g,I,M,x)}i.children[s]=h(0,a.length,za.none,0,o.length,n.length-1);for(let f of l){let p=t.tree.children[f],g=t.tree.positions[f];t.yield(new eu(p,g+t.from,f,t._tree))}}class hV{constructor(e,n){this.offset=n,this.done=!1,this.cursor=e.cursor(so.IncludeAnonymous|so.IgnoreMounts)}moveTo(e){let{cursor:n}=this,r=e-this.offset;for(;!this.done&&n.from<r;)n.to>=e&&n.enter(r,1,so.IgnoreOverlays|so.ExcludeBuffers)||n.next(!1)||(this.done=!0)}hasNode(e){if(this.moveTo(e.from),!this.done&&this.cursor.from+this.offset==e.from&&this.cursor.tree)for(let n=this.cursor.tree;;){if(n==e.tree)return!0;if(n.children.length&&n.positions[0]==0&&n.children[0]instanceof xs)n=n.children[0];else break}return!1}}let gOe=class{constructor(e){var n;if(this.fragments=e,this.curTo=0,this.fragI=0,e.length){let r=this.curFrag=e[0];this.curTo=(n=r.tree.prop(KF))!==null&&n!==void 0?n:r.to,this.inner=new hV(r.tree,-r.offset)}else this.curFrag=this.inner=null}hasNode(e){for(;this.curFrag&&e.from>=this.curTo;)this.nextFrag();return this.curFrag&&this.curFrag.from<=e.from&&this.curTo>=e.to&&this.inner.hasNode(e)}nextFrag(){var e;if(this.fragI++,this.fragI==this.fragments.length)this.curFrag=this.inner=null;else{let n=this.curFrag=this.fragments[this.fragI];this.curTo=(e=n.tree.prop(KF))!==null&&e!==void 0?e:n.to,this.inner=new hV(n.tree,-n.offset)}}findMounts(e,n){var r;let i=[];if(this.inner){this.inner.cursor.moveTo(e,1);for(let s=this.inner.cursor.node;s;s=s.parent){let o=(r=s.tree)===null||r===void 0?void 0:r.prop(Dr.mounted);if(o&&o.parser==n)for(let a=this.fragI;a<this.fragments.length;a++){let l=this.fragments[a];if(l.from>=s.to)break;l.tree==this.curFrag.tree&&i.push({frag:l,pos:s.from-l.offset,mount:o})}}}return i}};function fV(t,e){let n=null,r=e;for(let i=1,s=0;i<t.length;i++){let o=t[i-1].to,a=t[i].from;for(;s<r.length;s++){let l=r[s];if(l.from>=a)break;l.to<=o||(n||(r=n=e.slice()),l.from<o?(n[s]=new af(l.from,o),l.to>a&&n.splice(s+1,0,new af(a,l.to))):l.to>a?n[s--]=new af(a,l.to):n.splice(s--,1))}}return r}function yOe(t,e,n,r){let i=0,s=0,o=!1,a=!1,l=-1e9,h=[];for(;;){let f=i==t.length?1e9:o?t[i].to:t[i].from,p=s==e.length?1e9:a?e[s].to:e[s].from;if(o!=a){let g=Math.max(l,n),b=Math.min(f,p,r);g<b&&h.push(new af(g,b))}if(l=Math.min(f,p),l==1e9)break;f==l&&(o?(o=!1,i++):o=!0),p==l&&(a?(a=!1,s++):a=!0)}return h}function dV(t,e){let n=[];for(let{pos:r,mount:i,frag:s}of t){let o=r+(i.overlay?i.overlay[0].from:0),a=o+i.tree.length,l=Math.max(s.from,o),h=Math.min(s.to,a);if(i.overlay){let f=i.overlay.map(g=>new af(g.from+r,g.to+r)),p=yOe(e,f,l,h);for(let g=0,b=l;;g++){let x=g==p.length,k=x?h:p[g].from;if(k>b&&n.push(new Hg(b,k,i.tree,-o,s.from>=b||s.openStart,s.to<=k||s.openEnd)),x)break;b=p[g].to}}else n.push(new Hg(l,h,i.tree,-o,s.from>=o||s.openStart,s.to<=a||s.openEnd))}return n}let vOe=0;class uh{constructor(e,n,r,i){this.name=e,this.set=n,this.base=r,this.modified=i,this.id=vOe++}toString(){let{name:e}=this;for(let n of this.modified)n.name&&(e=`${n.name}(${e})`);return e}static define(e,n){let r=typeof e=="string"?e:"?";if(e instanceof uh&&(n=e),n?.base)throw new Error("Can not derive from a modified tag");let i=new uh(r,[],null,[]);if(i.set.push(i),n)for(let s of n.set)i.set.push(s);return i}static defineModifier(e){let n=new a6(e);return r=>r.modified.indexOf(n)>-1?r:a6.get(r.base||r,r.modified.concat(n).sort((i,s)=>i.id-s.id))}}let bOe=0;class a6{constructor(e){this.name=e,this.instances=[],this.id=bOe++}static get(e,n){if(!n.length)return e;let r=n[0].instances.find(a=>a.base==e&&_Oe(n,a.modified));if(r)return r;let i=[],s=new uh(e.name,i,e,n);for(let a of n)a.instances.push(s);let o=xOe(n);for(let a of e.set)if(!a.modified.length)for(let l of o)i.push(a6.get(a,l));return s}}function _Oe(t,e){return t.length==e.length&&t.every((n,r)=>n==e[r])}function xOe(t){let e=[[]];for(let n=0;n<t.length;n++)for(let r=0,i=e.length;r<i;r++)e.push(e[r].concat(t[n]));return e.sort((n,r)=>r.length-n.length)}function w0(t){let e=Object.create(null);for(let n in t){let r=t[n];Array.isArray(r)||(r=[r]);for(let i of n.split(" "))if(i){let s=[],o=2,a=i;for(let p=0;;){if(a=="..."&&p>0&&p+3==i.length){o=1;break}let g=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(a);if(!g)throw new RangeError("Invalid path: "+i);if(s.push(g[0]=="*"?"":g[0][0]=='"'?JSON.parse(g[0]):g[0]),p+=g[0].length,p==i.length)break;let b=i[p++];if(p==i.length&&b=="!"){o=0;break}if(b!="/")throw new RangeError("Invalid path: "+i);a=i.slice(p)}let l=s.length-1,h=s[l];if(!h)throw new RangeError("Invalid path: "+i);let f=new Ek(r,o,l>0?s.slice(0,l):null);e[h]=f.sort(e[h])}}return $ne.add(e)}const $ne=new Dr({combine(t,e){let n,r,i;for(;t||e;){if(!t||e&&t.depth>=e.depth?(i=e,e=e.next):(i=t,t=t.next),n&&n.mode==i.mode&&!i.context&&!n.context)continue;let s=new Ek(i.tags,i.mode,i.context);n?n.next=s:r=s,n=s}return r}});let Ek=class{constructor(e,n,r,i){this.tags=e,this.mode=n,this.context=r,this.next=i}get opaque(){return this.mode==0}get inherit(){return this.mode==1}sort(e){return!e||e.depth<this.depth?(this.next=e,this):(e.next=this.sort(e.next),e)}get depth(){return this.context?this.context.length:0}};Ek.empty=new Ek([],2,null);function Bne(t,e){let n=Object.create(null);for(let s of t)if(!Array.isArray(s.tag))n[s.tag.id]=s.class;else for(let o of s.tag)n[o.id]=s.class;let{scope:r,all:i=null}=e||{};return{style:s=>{let o=i;for(let a of s)for(let l of a.set){let h=n[l.id];if(h){o=o?o+" "+h:h;break}}return o},scope:r}}function wOe(t,e){let n=null;for(let r of t){let i=r.style(e);i&&(n=n?n+" "+i:i)}return n}function OOe(t,e,n,r=0,i=t.length){let s=new SOe(r,Array.isArray(e)?e:[e],n);s.highlightRange(t.cursor(),r,i,"",s.highlighters),s.flush(i)}class SOe{constructor(e,n,r){this.at=e,this.highlighters=n,this.span=r,this.class=""}startSpan(e,n){n!=this.class&&(this.flush(e),e>this.at&&(this.at=e),this.class=n)}flush(e){e>this.at&&this.class&&this.span(this.at,e,this.class)}highlightRange(e,n,r,i,s){let{type:o,from:a,to:l}=e;if(a>=r||l<=n)return;o.isTop&&(s=this.highlighters.filter(b=>!b.scope||b.scope(o)));let h=i,f=kOe(e)||Ek.empty,p=wOe(s,f.tags);if(p&&(h&&(h+=" "),h+=p,f.mode==1&&(i+=(i?" ":"")+p)),this.startSpan(Math.max(n,a),h),f.opaque)return;let g=e.tree&&e.tree.prop(Dr.mounted);if(g&&g.overlay){let b=e.node.enter(g.overlay[0].from+a,1),x=this.highlighters.filter(T=>!T.scope||T.scope(g.tree.type)),k=e.firstChild();for(let T=0,I=a;;T++){let M=T<g.overlay.length?g.overlay[T]:null,B=M?M.from+a:l,j=Math.max(n,I),Q=Math.min(r,B);if(j<Q&&k)for(;e.from<Q&&(this.highlightRange(e,j,Q,i,s),this.startSpan(Math.min(Q,e.to),h),!(e.to>=B||!e.nextSibling())););if(!M||B>r)break;I=M.to+a,I>n&&(this.highlightRange(b.cursor(),Math.max(n,M.from+a),Math.min(r,I),"",x),this.startSpan(Math.min(r,I),h))}k&&e.parent()}else if(e.firstChild()){g&&(i="");do if(!(e.to<=n)){if(e.from>=r)break;this.highlightRange(e,n,r,i,s),this.startSpan(Math.min(r,e.to),h)}while(e.nextSibling());e.parent()}}}function kOe(t){let e=t.type.prop($ne);for(;e&&e.context&&!t.matchContext(e.context);)e=e.next;return e||null}const gn=uh.define,o4=gn(),xy=gn(),pV=gn(xy),mV=gn(xy),wy=gn(),a4=gn(wy),TM=gn(wy),wp=gn(),Dv=gn(wp),bp=gn(),_p=gn(),JF=gn(),IS=gn(JF),l4=gn(),be={comment:o4,lineComment:gn(o4),blockComment:gn(o4),docComment:gn(o4),name:xy,variableName:gn(xy),typeName:pV,tagName:gn(pV),propertyName:mV,attributeName:gn(mV),className:gn(xy),labelName:gn(xy),namespace:gn(xy),macroName:gn(xy),literal:wy,string:a4,docString:gn(a4),character:gn(a4),attributeValue:gn(a4),number:TM,integer:gn(TM),float:gn(TM),bool:gn(wy),regexp:gn(wy),escape:gn(wy),color:gn(wy),url:gn(wy),keyword:bp,self:gn(bp),null:gn(bp),atom:gn(bp),unit:gn(bp),modifier:gn(bp),operatorKeyword:gn(bp),controlKeyword:gn(bp),definitionKeyword:gn(bp),moduleKeyword:gn(bp),operator:_p,derefOperator:gn(_p),arithmeticOperator:gn(_p),logicOperator:gn(_p),bitwiseOperator:gn(_p),compareOperator:gn(_p),updateOperator:gn(_p),definitionOperator:gn(_p),typeOperator:gn(_p),controlOperator:gn(_p),punctuation:JF,separator:gn(JF),bracket:IS,angleBracket:gn(IS),squareBracket:gn(IS),paren:gn(IS),brace:gn(IS),content:wp,heading:Dv,heading1:gn(Dv),heading2:gn(Dv),heading3:gn(Dv),heading4:gn(Dv),heading5:gn(Dv),heading6:gn(Dv),contentSeparator:gn(wp),list:gn(wp),quote:gn(wp),emphasis:gn(wp),strong:gn(wp),link:gn(wp),monospace:gn(wp),strikethrough:gn(wp),inserted:gn(),deleted:gn(),changed:gn(),invalid:gn(),meta:l4,documentMeta:gn(l4),annotation:gn(l4),processingInstruction:gn(l4),definition:uh.defineModifier("definition"),constant:uh.defineModifier("constant"),function:uh.defineModifier("function"),standard:uh.defineModifier("standard"),local:uh.defineModifier("local"),special:uh.defineModifier("special")};for(let t in be){let e=be[t];e instanceof uh&&(e.name=t)}Bne([{tag:be.link,class:"tok-link"},{tag:be.heading,class:"tok-heading"},{tag:be.emphasis,class:"tok-emphasis"},{tag:be.strong,class:"tok-strong"},{tag:be.keyword,class:"tok-keyword"},{tag:be.atom,class:"tok-atom"},{tag:be.bool,class:"tok-bool"},{tag:be.url,class:"tok-url"},{tag:be.labelName,class:"tok-labelName"},{tag:be.inserted,class:"tok-inserted"},{tag:be.deleted,class:"tok-deleted"},{tag:be.literal,class:"tok-literal"},{tag:be.string,class:"tok-string"},{tag:be.number,class:"tok-number"},{tag:[be.regexp,be.escape,be.special(be.string)],class:"tok-string2"},{tag:be.variableName,class:"tok-variableName"},{tag:be.local(be.variableName),class:"tok-variableName tok-local"},{tag:be.definition(be.variableName),class:"tok-variableName tok-definition"},{tag:be.special(be.variableName),class:"tok-variableName2"},{tag:be.definition(be.propertyName),class:"tok-propertyName tok-definition"},{tag:be.typeName,class:"tok-typeName"},{tag:be.namespace,class:"tok-namespace"},{tag:be.className,class:"tok-className"},{tag:be.macroName,class:"tok-macroName"},{tag:be.propertyName,class:"tok-propertyName"},{tag:be.operator,class:"tok-operator"},{tag:be.comment,class:"tok-comment"},{tag:be.meta,class:"tok-meta"},{tag:be.invalid,class:"tok-invalid"},{tag:be.punctuation,class:"tok-punctuation"}]);var PM;const eb=new Dr;function ZB(t){return Rn.define({combine:t?e=>e.concat(t):void 0})}const XB=new Dr;class lf{constructor(e,n,r=[],i=""){this.data=e,this.name=i,Xi.prototype.hasOwnProperty("tree")||Object.defineProperty(Xi.prototype,"tree",{get(){return ws(this)}}),this.parser=n,this.extension=[c2.of(this),Xi.languageData.of((s,o,a)=>{let l=gV(s,o,a),h=l.type.prop(eb);if(!h)return[];let f=s.facet(h),p=l.type.prop(XB);if(p){let g=l.resolve(o-l.from,a);for(let b of p)if(b.test(g,s)){let x=s.facet(b.facet);return b.type=="replace"?x:x.concat(f)}}return f})].concat(r)}isActiveAt(e,n,r=-1){return gV(e,n,r).type.prop(eb)==this.data}findRegions(e){let n=e.facet(c2);if(n?.data==this.data)return[{from:0,to:e.doc.length}];if(!n||!n.allowsNesting)return[];let r=[],i=(s,o)=>{if(s.prop(eb)==this.data){r.push({from:o,to:o+s.length});return}let a=s.prop(Dr.mounted);if(a){if(a.tree.prop(eb)==this.data){if(a.overlay)for(let l of a.overlay)r.push({from:l.from+o,to:l.to+o});else r.push({from:o,to:o+s.length});return}else if(a.overlay){let l=r.length;if(i(a.tree,a.overlay[0].from+o),r.length>l)return}}for(let l=0;l<s.children.length;l++){let h=s.children[l];h instanceof xs&&i(h,s.positions[l]+o)}};return i(ws(e),0),r}get allowsNesting(){return!0}}lf.setState=Yr.define();function gV(t,e,n){let r=t.facet(c2),i=ws(t).topNode;if(!r||r.allowsNesting)for(let s=i;s;s=s.enter(e,n,so.ExcludeBuffers))s.type.isTop&&(i=s);return i}class u0 extends lf{constructor(e,n,r){super(e,n,[],r),this.parser=n}static define(e){let n=ZB(e.languageData);return new u0(n,e.parser.configure({props:[eb.add(r=>r.isTop?n:void 0)]}),e.name)}configure(e,n){return new u0(this.data,this.parser.configure(e),n||this.name)}get allowsNesting(){return this.parser.hasWrappers()}}function ws(t){let e=t.field(lf.state,!1);return e?e.tree:xs.empty}class COe{constructor(e){this.doc=e,this.cursorPos=0,this.string="",this.cursor=e.iter()}get length(){return this.doc.length}syncTo(e){return this.string=this.cursor.next(e-this.cursorPos).value,this.cursorPos=e+this.string.length,this.cursorPos-this.string.length}chunk(e){return this.syncTo(e),this.string}get lineChunks(){return!0}read(e,n){let r=this.cursorPos-this.string.length;return e<r||n>=this.cursorPos?this.doc.sliceString(e,n):this.string.slice(e-r,n-r)}}let MS=null;class Tk{constructor(e,n,r=[],i,s,o,a,l){this.parser=e,this.state=n,this.fragments=r,this.tree=i,this.treeLen=s,this.viewport=o,this.skipped=a,this.scheduleOn=l,this.parse=null,this.tempSkipped=[]}static create(e,n,r){return new Tk(e,n,[],xs.empty,0,r,[],null)}startParse(){return this.parser.startParse(new COe(this.state.doc),this.fragments)}work(e,n){return n!=null&&n>=this.state.doc.length&&(n=void 0),this.tree!=xs.empty&&this.isDone(n??this.state.doc.length)?(this.takeTree(),!0):this.withContext(()=>{var r;if(typeof e=="number"){let i=Date.now()+e;e=()=>Date.now()>i}for(this.parse||(this.parse=this.startParse()),n!=null&&(this.parse.stoppedAt==null||this.parse.stoppedAt>n)&&n<this.state.doc.length&&this.parse.stopAt(n);;){let i=this.parse.advance();if(i)if(this.fragments=this.withoutTempSkipped(Hg.addTree(i,this.fragments,this.parse.stoppedAt!=null)),this.treeLen=(r=this.parse.stoppedAt)!==null&&r!==void 0?r:this.state.doc.length,this.tree=i,this.parse=null,this.treeLen<(n??this.state.doc.length))this.parse=this.startParse();else return!0;if(e())return!1}})}takeTree(){let e,n;this.parse&&(e=this.parse.parsedPos)>=this.treeLen&&((this.parse.stoppedAt==null||this.parse.stoppedAt>e)&&this.parse.stopAt(e),this.withContext(()=>{for(;!(n=this.parse.advance()););}),this.treeLen=e,this.tree=n,this.fragments=this.withoutTempSkipped(Hg.addTree(this.tree,this.fragments,!0)),this.parse=null)}withContext(e){let n=MS;MS=this;try{return e()}finally{MS=n}}withoutTempSkipped(e){for(let n;n=this.tempSkipped.pop();)e=yV(e,n.from,n.to);return e}changes(e,n){let{fragments:r,tree:i,treeLen:s,viewport:o,skipped:a}=this;if(this.takeTree(),!e.empty){let l=[];if(e.iterChangedRanges((h,f,p,g)=>l.push({fromA:h,toA:f,fromB:p,toB:g})),r=Hg.applyChanges(r,l),i=xs.empty,s=0,o={from:e.mapPos(o.from,-1),to:e.mapPos(o.to,1)},this.skipped.length){a=[];for(let h of this.skipped){let f=e.mapPos(h.from,1),p=e.mapPos(h.to,-1);f<p&&a.push({from:f,to:p})}}}return new Tk(this.parser,n,r,i,s,o,a,this.scheduleOn)}updateViewport(e){if(this.viewport.from==e.from&&this.viewport.to==e.to)return!1;this.viewport=e;let n=this.skipped.length;for(let r=0;r<this.skipped.length;r++){let{from:i,to:s}=this.skipped[r];i<e.to&&s>e.from&&(this.fragments=yV(this.fragments,i,s),this.skipped.splice(r--,1))}return this.skipped.length>=n?!1:(this.reset(),!0)}reset(){this.parse&&(this.takeTree(),this.parse=null)}skipUntilInView(e,n){this.skipped.push({from:e,to:n})}static getSkippingParser(e){return new class extends qB{createParse(n,r,i){let s=i[0].from,o=i[i.length-1].to;return{parsedPos:s,advance(){let l=MS;if(l){for(let h of i)l.tempSkipped.push(h);e&&(l.scheduleOn=l.scheduleOn?Promise.all([l.scheduleOn,e]):e)}return this.parsedPos=o,new xs(za.none,[],[],o-s)},stoppedAt:null,stopAt(){}}}}}isDone(e){e=Math.min(e,this.state.doc.length);let n=this.fragments;return this.treeLen>=e&&n.length&&n[0].from==0&&n[0].to>=e}static get(){return MS}}function yV(t,e,n){return Hg.applyChanges(t,[{fromA:e,toA:n,fromB:e,toB:n}])}class u2{constructor(e){this.context=e,this.tree=e.tree}apply(e){if(!e.docChanged&&this.tree==this.context.tree)return this;let n=this.context.changes(e.changes,e.state),r=this.context.treeLen==e.startState.doc.length?void 0:Math.max(e.changes.mapPos(this.context.treeLen),n.viewport.to);return n.work(20,r)||n.takeTree(),new u2(n)}static init(e){let n=Math.min(3e3,e.doc.length),r=Tk.create(e.facet(c2).parser,e,{from:0,to:n});return r.work(20,n)||r.takeTree(),new u2(r)}}lf.state=Aa.define({create:u2.init,update(t,e){for(let n of e.effects)if(n.is(lf.setState))return n.value;return e.startState.facet(c2)!=e.state.facet(c2)?u2.init(e.state):t.apply(e)}});let Nne=t=>{let e=setTimeout(()=>t(),500);return()=>clearTimeout(e)};typeof requestIdleCallback<"u"&&(Nne=t=>{let e=-1,n=setTimeout(()=>{e=requestIdleCallback(t,{timeout:400})},100);return()=>e<0?clearTimeout(n):cancelIdleCallback(e)});const DM=typeof navigator<"u"&&(!((PM=navigator.scheduling)===null||PM===void 0)&&PM.isInputPending)?()=>navigator.scheduling.isInputPending():null,AOe=Ca.fromClass(class{constructor(e){this.view=e,this.working=null,this.workScheduled=0,this.chunkEnd=-1,this.chunkBudget=-1,this.work=this.work.bind(this),this.scheduleWork()}update(e){let n=this.view.state.field(lf.state).context;(n.updateViewport(e.view.viewport)||this.view.viewport.to>n.treeLen)&&this.scheduleWork(),(e.docChanged||e.selectionSet)&&(this.view.hasFocus&&(this.chunkBudget+=50),this.scheduleWork()),this.checkAsyncSchedule(n)}scheduleWork(){if(this.working)return;let{state:e}=this.view,n=e.field(lf.state);(n.tree!=n.context.tree||!n.context.isDone(e.doc.length))&&(this.working=Nne(this.work))}work(e){this.working=null;let n=Date.now();if(this.chunkEnd<n&&(this.chunkEnd<0||this.view.hasFocus)&&(this.chunkEnd=n+3e4,this.chunkBudget=3e3),this.chunkBudget<=0)return;let{state:r,viewport:{to:i}}=this.view,s=r.field(lf.state);if(s.tree==s.context.tree&&s.context.isDone(i+1e5))return;let o=Date.now()+Math.min(this.chunkBudget,100,e&&!DM?Math.max(25,e.timeRemaining()-5):1e9),a=s.context.treeLen<i&&r.doc.length>i+1e3,l=s.context.work(()=>DM&&DM()||Date.now()>o,i+(a?0:1e5));this.chunkBudget-=Date.now()-n,(l||this.chunkBudget<=0)&&(s.context.takeTree(),this.view.dispatch({effects:lf.setState.of(new u2(s.context))})),this.chunkBudget>0&&!(l&&!a)&&this.scheduleWork(),this.checkAsyncSchedule(s.context)}checkAsyncSchedule(e){e.scheduleOn&&(this.workScheduled++,e.scheduleOn.then(()=>this.scheduleWork()).catch(n=>Mu(this.view.state,n)).then(()=>this.workScheduled--),e.scheduleOn=null)}destroy(){this.working&&this.working()}isWorking(){return!!(this.working||this.workScheduled>0)}},{eventHandlers:{focus(){this.scheduleWork()}}}),c2=Rn.define({combine(t){return t.length?t[0]:null},enables:t=>[lf.state,AOe,Cn.contentAttributes.compute([t],e=>{let n=e.facet(t);return n&&n.name?{"data-language":n.name}:{}})]});class y1{constructor(e,n=[]){this.language=e,this.support=n,this.extension=[e,n]}}class l6{constructor(e,n,r,i,s,o=void 0){this.name=e,this.alias=n,this.extensions=r,this.filename=i,this.loadFunc=s,this.support=o,this.loading=null}load(){return this.loading||(this.loading=this.loadFunc().then(e=>this.support=e,e=>{throw this.loading=null,e}))}static of(e){let{load:n,support:r}=e;if(!n){if(!r)throw new RangeError("Must pass either 'load' or 'support' to LanguageDescription.of");n=()=>Promise.resolve(r)}return new l6(e.name,(e.alias||[]).concat(e.name).map(i=>i.toLowerCase()),e.extensions||[],e.filename,n,r)}static matchFilename(e,n){for(let i of e)if(i.filename&&i.filename.test(n))return i;let r=/\.([^.]+)$/.exec(n);if(r){for(let i of e)if(i.extensions.indexOf(r[1])>-1)return i}return null}static matchLanguageName(e,n,r=!0){n=n.toLowerCase();for(let i of e)if(i.alias.some(s=>s==n))return i;if(r)for(let i of e)for(let s of i.alias){let o=n.indexOf(s);if(o>-1&&(s.length>2||!/\w/.test(n[o-1])&&!/\w/.test(n[o+s.length])))return i}return null}}const EOe=Rn.define(),$C=Rn.define({combine:t=>{if(!t.length)return"  ";let e=t[0];if(!e||/\S/.test(e)||Array.from(e).some(n=>n!=e[0]))throw new Error("Invalid indent unit: "+JSON.stringify(t[0]));return e}});function u6(t){let e=t.facet($C);return e.charCodeAt(0)==9?t.tabSize*e.length:e.length}function Pk(t,e){let n="",r=t.tabSize,i=t.facet($C)[0];if(i=="	"){for(;e>=r;)n+="	",e-=r;i=" "}for(let s=0;s<e;s++)n+=i;return n}function WB(t,e){t instanceof Xi&&(t=new vD(t));for(let r of t.state.facet(EOe)){let i=r(t,e);if(i!==void 0)return i}let n=ws(t.state);return n.length>=e?TOe(t,n,e):null}class vD{constructor(e,n={}){this.state=e,this.options=n,this.unit=u6(e)}lineAt(e,n=1){let r=this.state.doc.lineAt(e),{simulateBreak:i,simulateDoubleBreak:s}=this.options;return i!=null&&i>=r.from&&i<=r.to?s&&i==e?{text:"",from:e}:(n<0?i<e:i<=e)?{text:r.text.slice(i-r.from),from:i}:{text:r.text.slice(0,i-r.from),from:r.from}:r}textAfterPos(e,n=1){if(this.options.simulateDoubleBreak&&e==this.options.simulateBreak)return"";let{text:r,from:i}=this.lineAt(e,n);return r.slice(e-i,Math.min(r.length,e+100-i))}column(e,n=1){let{text:r,from:i}=this.lineAt(e,n),s=this.countColumn(r,e-i),o=this.options.overrideIndentation?this.options.overrideIndentation(i):-1;return o>-1&&(s+=o-this.countColumn(r,r.search(/\S|$/))),s}countColumn(e,n=e.length){return Ad(e,this.state.tabSize,n)}lineIndent(e,n=1){let{text:r,from:i}=this.lineAt(e,n),s=this.options.overrideIndentation;if(s){let o=s(i);if(o>-1)return o}return this.countColumn(r,r.search(/\S|$/))}get simulatedBreak(){return this.options.simulateBreak||null}}const S1=new Dr;function TOe(t,e,n){let r=e.resolveStack(n),i=e.resolveInner(n,-1).resolve(n,0).enterUnfinishedNodesBefore(n);if(i!=r.node){let s=[];for(let o=i;o&&!(o.from<r.node.from||o.to>r.node.to||o.from==r.node.from&&o.type==r.node.type);o=o.parent)s.push(o);for(let o=s.length-1;o>=0;o--)r={node:s[o],next:r}}return zne(r,t,n)}function zne(t,e,n){for(let r=t;r;r=r.next){let i=DOe(r.node);if(i)return i(GB.create(e,n,r))}return 0}function POe(t){return t.pos==t.options.simulateBreak&&t.options.simulateDoubleBreak}function DOe(t){let e=t.type.prop(S1);if(e)return e;let n=t.firstChild,r;if(n&&(r=n.type.prop(Dr.closedBy))){let i=t.lastChild,s=i&&r.indexOf(i.name)>-1;return o=>Qne(o,!0,1,void 0,s&&!POe(o)?i.from:void 0)}return t.parent==null?IOe:null}function IOe(){return 0}class GB extends vD{constructor(e,n,r){super(e.state,e.options),this.base=e,this.pos=n,this.context=r}get node(){return this.context.node}static create(e,n,r){return new GB(e,n,r)}get textAfter(){return this.textAfterPos(this.pos)}get baseIndent(){return this.baseIndentFor(this.node)}baseIndentFor(e){let n=this.state.doc.lineAt(e.from);for(;;){let r=e.resolve(n.from);for(;r.parent&&r.parent.from==r.from;)r=r.parent;if(MOe(r,e))break;n=this.state.doc.lineAt(r.from)}return this.lineIndent(n.from)}continue(){return zne(this.context.next,this.base,this.pos)}}function MOe(t,e){for(let n=e;n;n=n.parent)if(t==n)return!0;return!1}function ROe(t){let e=t.node,n=e.childAfter(e.from),r=e.lastChild;if(!n)return null;let i=t.options.simulateBreak,s=t.state.doc.lineAt(n.from),o=i==null||i<=s.from?s.to:Math.min(s.to,i);for(let a=n.to;;){let l=e.childAfter(a);if(!l||l==r)return null;if(!l.type.isSkipped){if(l.from>=o)return null;let h=/^ */.exec(s.text.slice(n.to-s.from))[0].length;return{from:n.from,to:n.to+h}}a=l.to}}function FOe({closing:t,align:e=!0,units:n=1}){return r=>Qne(r,e,n,t)}function Qne(t,e,n,r,i){let s=t.textAfter,o=s.match(/^\s*/)[0].length,a=r&&s.slice(o,o+r.length)==r||i==t.pos+o,l=e?ROe(t):null;return l?a?t.column(l.from):t.column(l.to):t.baseIndent+(a?0:t.unit*n)}const LOe=t=>t.baseIndent;function Kg({except:t,units:e=1}={}){return n=>{let r=t&&t.test(n.textAfter);return n.baseIndent+(r?0:e*n.unit)}}const $Oe=200;function BOe(){return Xi.transactionFilter.of(t=>{if(!t.docChanged||!t.isUserEvent("input.type")&&!t.isUserEvent("input.complete"))return t;let e=t.startState.languageDataAt("indentOnInput",t.startState.selection.main.head);if(!e.length)return t;let n=t.newDoc,{head:r}=t.newSelection.main,i=n.lineAt(r);if(r>i.from+$Oe)return t;let s=n.sliceString(i.from,r);if(!e.some(h=>h.test(s)))return t;let{state:o}=t,a=-1,l=[];for(let{head:h}of o.selection.ranges){let f=o.doc.lineAt(h);if(f.from==a)continue;a=f.from;let p=WB(o,f.from);if(p==null)continue;let g=/^\s*/.exec(f.text)[0],b=Pk(o,p);g!=b&&l.push({from:f.from,to:f.from+g.length,insert:b})}return l.length?[t,{changes:l,sequential:!0}]:t})}const NOe=Rn.define(),k1=new Dr;function bD(t){let e=t.firstChild,n=t.lastChild;return e&&e.to<n.from?{from:e.to,to:n.type.isError?t.to:n.from}:null}class BC{constructor(e,n){this.specs=e;let r;function i(a){let l=f1.newName();return(r||(r=Object.create(null)))["."+l]=a,l}const s=typeof n.all=="string"?n.all:n.all?i(n.all):void 0,o=n.scope;this.scope=o instanceof lf?a=>a.prop(eb)==o.data:o?a=>a==o:void 0,this.style=Bne(e.map(a=>({tag:a.tag,class:a.class||i(Object.assign({},a,{tag:null}))})),{all:s}).style,this.module=r?new f1(r):null,this.themeType=n.themeType}static define(e,n){return new BC(e,n||{})}}const e9=Rn.define(),jne=Rn.define({combine(t){return t.length?[t[0]]:null}});function IM(t){let e=t.facet(e9);return e.length?e:t.facet(jne)}function Une(t,e){let n=[QOe],r;return t instanceof BC&&(t.module&&n.push(Cn.styleModule.of(t.module)),r=t.themeType),e?.fallback?n.push(jne.of(t)):r?n.push(e9.computeN([Cn.darkTheme],i=>i.facet(Cn.darkTheme)==(r=="dark")?[t]:[])):n.push(e9.of(t)),n}class zOe{constructor(e){this.markCache=Object.create(null),this.tree=ws(e.state),this.decorations=this.buildDeco(e,IM(e.state)),this.decoratedTo=e.viewport.to}update(e){let n=ws(e.state),r=IM(e.state),i=r!=IM(e.startState),{viewport:s}=e.view,o=e.changes.mapPos(this.decoratedTo,1);n.length<s.to&&!i&&n.type==this.tree.type&&o>=s.to?(this.decorations=this.decorations.map(e.changes),this.decoratedTo=o):(n!=this.tree||e.viewportChanged||i)&&(this.tree=n,this.decorations=this.buildDeco(e.view,r),this.decoratedTo=s.to)}buildDeco(e,n){if(!n||!this.tree.length)return Sr.none;let r=new h1;for(let{from:i,to:s}of e.visibleRanges)OOe(this.tree,n,(o,a,l)=>{r.add(o,a,this.markCache[l]||(this.markCache[l]=Sr.mark({class:l})))},i,s);return r.finish()}}const QOe=b0.high(Ca.fromClass(zOe,{decorations:t=>t.decorations})),jOe=BC.define([{tag:be.meta,color:"#404740"},{tag:be.link,textDecoration:"underline"},{tag:be.heading,textDecoration:"underline",fontWeight:"bold"},{tag:be.emphasis,fontStyle:"italic"},{tag:be.strong,fontWeight:"bold"},{tag:be.strikethrough,textDecoration:"line-through"},{tag:be.keyword,color:"#708"},{tag:[be.atom,be.bool,be.url,be.contentSeparator,be.labelName],color:"#219"},{tag:[be.literal,be.inserted],color:"#164"},{tag:[be.string,be.deleted],color:"#a11"},{tag:[be.regexp,be.escape,be.special(be.string)],color:"#e40"},{tag:be.definition(be.variableName),color:"#00f"},{tag:be.local(be.variableName),color:"#30a"},{tag:[be.typeName,be.namespace],color:"#085"},{tag:be.className,color:"#167"},{tag:[be.special(be.variableName),be.macroName],color:"#256"},{tag:be.definition(be.propertyName),color:"#00c"},{tag:be.comment,color:"#940"},{tag:be.invalid,color:"#f00"}]),UOe=Cn.baseTheme({"&.cm-focused .cm-matchingBracket":{backgroundColor:"#328c8252"},"&.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bb555544"}}),Vne=1e4,qne="()[]{}",Zne=Rn.define({combine(t){return x0(t,{afterCursor:!0,brackets:qne,maxScanDistance:Vne,renderMatch:ZOe})}}),VOe=Sr.mark({class:"cm-matchingBracket"}),qOe=Sr.mark({class:"cm-nonmatchingBracket"});function ZOe(t){let e=[],n=t.matched?VOe:qOe;return e.push(n.range(t.start.from,t.start.to)),t.end&&e.push(n.range(t.end.from,t.end.to)),e}const XOe=Aa.define({create(){return Sr.none},update(t,e){if(!e.docChanged&&!e.selection)return t;let n=[],r=e.state.facet(Zne);for(let i of e.state.selection.ranges){if(!i.empty)continue;let s=qp(e.state,i.head,-1,r)||i.head>0&&qp(e.state,i.head-1,1,r)||r.afterCursor&&(qp(e.state,i.head,1,r)||i.head<e.state.doc.length&&qp(e.state,i.head+1,-1,r));s&&(n=n.concat(r.renderMatch(s,e.state)))}return Sr.set(n,!0)},provide:t=>Cn.decorations.from(t)}),WOe=[XOe,UOe];function GOe(t={}){return[Zne.of(t),WOe]}const Xne=new Dr;function t9(t,e,n){let r=t.prop(e<0?Dr.openedBy:Dr.closedBy);if(r)return r;if(t.name.length==1){let i=n.indexOf(t.name);if(i>-1&&i%2==(e<0?1:0))return[n[i+e]]}return null}function n9(t){let e=t.type.prop(Xne);return e?e(t.node):t}function qp(t,e,n,r={}){let i=r.maxScanDistance||Vne,s=r.brackets||qne,o=ws(t),a=o.resolveInner(e,n);for(let l=a;l;l=l.parent){let h=t9(l.type,n,s);if(h&&l.from<l.to){let f=n9(l);if(f&&(n>0?e>=f.from&&e<f.to:e>f.from&&e<=f.to))return YOe(t,e,n,l,f,h,s)}}return HOe(t,e,n,o,a.type,i,s)}function YOe(t,e,n,r,i,s,o){let a=r.parent,l={from:i.from,to:i.to},h=0,f=a?.cursor();if(f&&(n<0?f.childBefore(r.from):f.childAfter(r.to)))do if(n<0?f.to<=r.from:f.from>=r.to){if(h==0&&s.indexOf(f.type.name)>-1&&f.from<f.to){let p=n9(f);return{start:l,end:p?{from:p.from,to:p.to}:void 0,matched:!0}}else if(t9(f.type,n,o))h++;else if(t9(f.type,-n,o)){if(h==0){let p=n9(f);return{start:l,end:p&&p.from<p.to?{from:p.from,to:p.to}:void 0,matched:!1}}h--}}while(n<0?f.prevSibling():f.nextSibling());return{start:l,matched:!1}}function HOe(t,e,n,r,i,s,o){let a=n<0?t.sliceDoc(e-1,e):t.sliceDoc(e,e+1),l=o.indexOf(a);if(l<0||l%2==0!=n>0)return null;let h={from:n<0?e-1:e,to:n>0?e+1:e},f=t.doc.iterRange(e,n>0?t.doc.length:0),p=0;for(let g=0;!f.next().done&&g<=s;){let b=f.value;n<0&&(g+=b.length);let x=e+g*n;for(let k=n>0?0:b.length-1,T=n>0?b.length:-1;k!=T;k+=n){let I=o.indexOf(b[k]);if(!(I<0||r.resolveInner(x+k,1).type!=i))if(I%2==0==n>0)p++;else{if(p==1)return{start:h,end:{from:x+k,to:x+k+1},matched:I>>1==l>>1};p--}}n>0&&(g+=b.length)}return f.done?{start:h,matched:!1}:null}const KOe=Object.create(null),vV=[za.none],bV=[],_V=Object.create(null),JOe=Object.create(null);for(let[t,e]of[["variable","variableName"],["variable-2","variableName.special"],["string-2","string.special"],["def","variableName.definition"],["tag","tagName"],["attribute","attributeName"],["type","typeName"],["builtin","variableName.standard"],["qualifier","modifier"],["error","invalid"],["header","heading"],["property","propertyName"]])JOe[t]=eSe(KOe,e);function MM(t,e){bV.indexOf(t)>-1||(bV.push(t),console.warn(e))}function eSe(t,e){let n=[];for(let a of e.split(" ")){let l=[];for(let h of a.split(".")){let f=t[h]||be[h];f?typeof f=="function"?l.length?l=l.map(f):MM(h,`Modifier ${h} used at start of tag`):l.length?MM(h,`Tag ${h} used as modifier`):l=Array.isArray(f)?f:[f]:MM(h,`Unknown highlighting tag ${h}`)}for(let h of l)n.push(h)}if(!n.length)return 0;let r=e.replace(/ /g,"_"),i=r+" "+n.map(a=>a.id),s=_V[i];if(s)return s.id;let o=_V[i]=za.define({id:vV.length,name:r,props:[w0({[r]:n})]});return vV.push(o),o.id}vo.RTL,vo.LTR;class YB{constructor(e,n,r,i){this.state=e,this.pos=n,this.explicit=r,this.view=i,this.abortListeners=[],this.abortOnDocChange=!1}tokenBefore(e){let n=ws(this.state).resolveInner(this.pos,-1);for(;n&&e.indexOf(n.name)<0;)n=n.parent;return n?{from:n.from,to:this.pos,text:this.state.sliceDoc(n.from,this.pos),type:n.type}:null}matchBefore(e){let n=this.state.doc.lineAt(this.pos),r=Math.max(n.from,this.pos-250),i=n.text.slice(r-n.from,this.pos-n.from),s=i.search(Gne(e,!1));return s<0?null:{from:r+s,to:this.pos,text:i.slice(s)}}get aborted(){return this.abortListeners==null}addEventListener(e,n,r){e=="abort"&&this.abortListeners&&(this.abortListeners.push(n),r&&r.onDocChange&&(this.abortOnDocChange=!0))}}function xV(t){let e=Object.keys(t).join(""),n=/\w/.test(e);return n&&(e=e.replace(/\w/g,"")),`[${n?"\\w":""}${e.replace(/[^\w\s]/g,"\\$&")}]`}function tSe(t){let e=Object.create(null),n=Object.create(null);for(let{label:i}of t){e[i[0]]=!0;for(let s=1;s<i.length;s++)n[i[s]]=!0}let r=xV(e)+xV(n)+"*$";return[new RegExp("^"+r),new RegExp(r)]}function HB(t){let e=t.map(i=>typeof i=="string"?{label:i}:i),[n,r]=e.every(i=>/^\w+$/.test(i.label))?[/\w*$/,/\w+$/]:tSe(e);return i=>{let s=i.matchBefore(r);return s||i.explicit?{from:s?s.from:i.pos,options:e,validFor:n}:null}}function Wne(t,e){return n=>{for(let r=ws(n.state).resolveInner(n.pos,-1);r;r=r.parent){if(t.indexOf(r.name)>-1)return null;if(r.type.isTop)break}return e(n)}}class wV{constructor(e,n,r,i){this.completion=e,this.source=n,this.match=r,this.score=i}}function bb(t){return t.selection.main.from}function Gne(t,e){var n;let{source:r}=t,i=e&&r[0]!="^",s=r[r.length-1]!="$";return!i&&!s?t:new RegExp(`${i?"^":""}(?:${r})${s?"$":""}`,(n=t.flags)!==null&&n!==void 0?n:t.ignoreCase?"i":"")}const KB=_0.define();function nSe(t,e,n,r){let{main:i}=t.selection,s=n-i.from,o=r-i.from;return{...t.changeByRange(a=>{if(a!=i&&n!=r&&t.sliceDoc(a.from+s,a.from+o)!=t.sliceDoc(n,r))return{range:a};let l=t.toText(e);return{changes:{from:a.from+s,to:r==i.from?a.to:a.from+o,insert:l},range:kt.cursor(a.from+s+l.length)}}),scrollIntoView:!0,userEvent:"input.complete"}}const OV=new WeakMap;function rSe(t){if(!Array.isArray(t))return t;let e=OV.get(t);return e||OV.set(t,e=HB(t)),e}const c6=Yr.define(),Dk=Yr.define();class iSe{constructor(e){this.pattern=e,this.chars=[],this.folded=[],this.any=[],this.precise=[],this.byWord=[],this.score=0,this.matched=[];for(let n=0;n<e.length;){let r=hc(e,n),i=$p(r);this.chars.push(r);let s=e.slice(n,n+i),o=s.toUpperCase();this.folded.push(hc(o==s?s.toLowerCase():o,0)),n+=i}this.astral=e.length!=this.chars.length}ret(e,n){return this.score=e,this.matched=n,this}match(e){if(this.pattern.length==0)return this.ret(-100,[]);if(e.length<this.pattern.length)return null;let{chars:n,folded:r,any:i,precise:s,byWord:o}=this;if(n.length==1){let M=hc(e,0),B=$p(M),j=B==e.length?0:-100;if(M!=n[0])if(M==r[0])j+=-200;else return null;return this.ret(j,[0,B])}let a=e.indexOf(this.pattern);if(a==0)return this.ret(e.length==this.pattern.length?0:-100,[0,this.pattern.length]);let l=n.length,h=0;if(a<0){for(let M=0,B=Math.min(e.length,200);M<B&&h<l;){let j=hc(e,M);(j==n[h]||j==r[h])&&(i[h++]=M),M+=$p(j)}if(h<l)return null}let f=0,p=0,g=!1,b=0,x=-1,k=-1,T=/[a-z]/.test(e),I=!0;for(let M=0,B=Math.min(e.length,200),j=0;M<B&&p<l;){let Q=hc(e,M);a<0&&(f<l&&Q==n[f]&&(s[f++]=M),b<l&&(Q==n[b]||Q==r[b]?(b==0&&(x=M),k=M+1,b++):b=0));let Z,q=Q<255?Q>=48&&Q<=57||Q>=97&&Q<=122?2:Q>=65&&Q<=90?1:0:(Z=CB(Q))!=Z.toLowerCase()?1:Z!=Z.toUpperCase()?2:0;(!M||q==1&&T||j==0&&q!=0)&&(n[p]==Q||r[p]==Q&&(g=!0)?o[p++]=M:o.length&&(I=!1)),j=q,M+=$p(Q)}return p==l&&o[0]==0&&I?this.result(-100+(g?-200:0),o,e):b==l&&x==0?this.ret(-200-e.length+(k==e.length?0:-100),[0,k]):a>-1?this.ret(-700-e.length,[a,a+this.pattern.length]):b==l?this.ret(-900-e.length,[x,k]):p==l?this.result(-100+(g?-200:0)+-700+(I?0:-1100),o,e):n.length==2?null:this.result((i[0]?-700:0)+-200+-1100,i,e)}result(e,n,r){let i=[],s=0;for(let o of n){let a=o+(this.astral?$p(hc(r,o)):1);s&&i[s-1]==o?i[s-1]=a:(i[s++]=o,i[s++]=a)}return this.ret(e-r.length,i)}}class sSe{constructor(e){this.pattern=e,this.matched=[],this.score=0,this.folded=e.toLowerCase()}match(e){if(e.length<this.pattern.length)return null;let n=e.slice(0,this.pattern.length),r=n==this.pattern?0:n.toLowerCase()==this.folded?-200:null;return r==null?null:(this.matched=[0,n.length],this.score=r+(e.length==this.pattern.length?0:-100),this)}}const nl=Rn.define({combine(t){return x0(t,{activateOnTyping:!0,activateOnCompletion:()=>!1,activateOnTypingDelay:100,selectOnOpen:!0,override:null,closeOnBlur:!0,maxRenderedOptions:100,defaultKeymap:!0,tooltipClass:()=>"",optionClass:()=>"",aboveCursor:!1,icons:!0,addToOptions:[],positionInfo:oSe,filterStrict:!1,compareCompletions:(e,n)=>e.label.localeCompare(n.label),interactionDelay:75,updateSyncTime:100},{defaultKeymap:(e,n)=>e&&n,closeOnBlur:(e,n)=>e&&n,icons:(e,n)=>e&&n,tooltipClass:(e,n)=>r=>SV(e(r),n(r)),optionClass:(e,n)=>r=>SV(e(r),n(r)),addToOptions:(e,n)=>e.concat(n),filterStrict:(e,n)=>e||n})}});function SV(t,e){return t?e?t+" "+e:t:e}function oSe(t,e,n,r,i,s){let o=t.textDirection==vo.RTL,a=o,l=!1,h="top",f,p,g=e.left-i.left,b=i.right-e.right,x=r.right-r.left,k=r.bottom-r.top;if(a&&g<Math.min(x,b)?a=!1:!a&&b<Math.min(x,g)&&(a=!0),x<=(a?g:b))f=Math.max(i.top,Math.min(n.top,i.bottom-k))-e.top,p=Math.min(400,a?g:b);else{l=!0,p=Math.min(400,(o?e.right:i.right-e.left)-30);let M=i.bottom-e.bottom;M>=k||M>e.top?f=n.bottom-e.top:(h="bottom",f=e.bottom-n.top)}let T=(e.bottom-e.top)/s.offsetHeight,I=(e.right-e.left)/s.offsetWidth;return{style:`${h}: ${f/T}px; max-width: ${p/I}px`,class:"cm-completionInfo-"+(l?o?"left-narrow":"right-narrow":a?"left":"right")}}function aSe(t){let e=t.addToOptions.slice();return t.icons&&e.push({render(n){let r=document.createElement("div");return r.classList.add("cm-completionIcon"),n.type&&r.classList.add(...n.type.split(/\s+/g).map(i=>"cm-completionIcon-"+i)),r.setAttribute("aria-hidden","true"),r},position:20}),e.push({render(n,r,i,s){let o=document.createElement("span");o.className="cm-completionLabel";let a=n.displayLabel||n.label,l=0;for(let h=0;h<s.length;){let f=s[h++],p=s[h++];f>l&&o.appendChild(document.createTextNode(a.slice(l,f)));let g=o.appendChild(document.createElement("span"));g.appendChild(document.createTextNode(a.slice(f,p))),g.className="cm-completionMatchedText",l=p}return l<a.length&&o.appendChild(document.createTextNode(a.slice(l))),o},position:50},{render(n){if(!n.detail)return null;let r=document.createElement("span");return r.className="cm-completionDetail",r.textContent=n.detail,r},position:80}),e.sort((n,r)=>n.position-r.position).map(n=>n.render)}function RM(t,e,n){if(t<=n)return{from:0,to:t};if(e<0&&(e=0),e<=t>>1){let i=Math.floor(e/n);return{from:i*n,to:(i+1)*n}}let r=Math.floor((t-e)/n);return{from:t-(r+1)*n,to:t-r*n}}class lSe{constructor(e,n,r){this.view=e,this.stateField=n,this.applyCompletion=r,this.info=null,this.infoDestroy=null,this.placeInfoReq={read:()=>this.measureInfo(),write:l=>this.placeInfo(l),key:this},this.space=null,this.currentClass="";let i=e.state.field(n),{options:s,selected:o}=i.open,a=e.state.facet(nl);this.optionContent=aSe(a),this.optionClass=a.optionClass,this.tooltipClass=a.tooltipClass,this.range=RM(s.length,o,a.maxRenderedOptions),this.dom=document.createElement("div"),this.dom.className="cm-tooltip-autocomplete",this.updateTooltipClass(e.state),this.dom.addEventListener("mousedown",l=>{let{options:h}=e.state.field(n).open;for(let f=l.target,p;f&&f!=this.dom;f=f.parentNode)if(f.nodeName=="LI"&&(p=/-(\d+)$/.exec(f.id))&&+p[1]<h.length){this.applyCompletion(e,h[+p[1]]),l.preventDefault();return}}),this.dom.addEventListener("focusout",l=>{let h=e.state.field(this.stateField,!1);h&&h.tooltip&&e.state.facet(nl).closeOnBlur&&l.relatedTarget!=e.contentDOM&&e.dispatch({effects:Dk.of(null)})}),this.showOptions(s,i.id)}mount(){this.updateSel()}showOptions(e,n){this.list&&this.list.remove(),this.list=this.dom.appendChild(this.createListBox(e,n,this.range)),this.list.addEventListener("scroll",()=>{this.info&&this.view.requestMeasure(this.placeInfoReq)})}update(e){var n;let r=e.state.field(this.stateField),i=e.startState.field(this.stateField);if(this.updateTooltipClass(e.state),r!=i){let{options:s,selected:o,disabled:a}=r.open;(!i.open||i.open.options!=s)&&(this.range=RM(s.length,o,e.state.facet(nl).maxRenderedOptions),this.showOptions(s,r.id)),this.updateSel(),a!=((n=i.open)===null||n===void 0?void 0:n.disabled)&&this.dom.classList.toggle("cm-tooltip-autocomplete-disabled",!!a)}}updateTooltipClass(e){let n=this.tooltipClass(e);if(n!=this.currentClass){for(let r of this.currentClass.split(" "))r&&this.dom.classList.remove(r);for(let r of n.split(" "))r&&this.dom.classList.add(r);this.currentClass=n}}positioned(e){this.space=e,this.info&&this.view.requestMeasure(this.placeInfoReq)}updateSel(){let e=this.view.state.field(this.stateField),n=e.open;(n.selected>-1&&n.selected<this.range.from||n.selected>=this.range.to)&&(this.range=RM(n.options.length,n.selected,this.view.state.facet(nl).maxRenderedOptions),this.showOptions(n.options,e.id));let r=this.updateSelectedOption(n.selected);if(r){this.destroyInfo();let{completion:i}=n.options[n.selected],{info:s}=i;if(!s)return;let o=typeof s=="string"?document.createTextNode(s):s(i);if(!o)return;"then"in o?o.then(a=>{a&&this.view.state.field(this.stateField,!1)==e&&this.addInfoPane(a,i)}).catch(a=>Mu(this.view.state,a,"completion info")):(this.addInfoPane(o,i),r.setAttribute("aria-describedby",this.info.id))}}addInfoPane(e,n){this.destroyInfo();let r=this.info=document.createElement("div");if(r.className="cm-tooltip cm-completionInfo",r.id="cm-completionInfo-"+Math.floor(Math.random()*65535).toString(16),e.nodeType!=null)r.appendChild(e),this.infoDestroy=null;else{let{dom:i,destroy:s}=e;r.appendChild(i),this.infoDestroy=s||null}this.dom.appendChild(r),this.view.requestMeasure(this.placeInfoReq)}updateSelectedOption(e){let n=null;for(let r=this.list.firstChild,i=this.range.from;r;r=r.nextSibling,i++)r.nodeName!="LI"||!r.id?i--:i==e?r.hasAttribute("aria-selected")||(r.setAttribute("aria-selected","true"),n=r):r.hasAttribute("aria-selected")&&(r.removeAttribute("aria-selected"),r.removeAttribute("aria-describedby"));return n&&cSe(this.list,n),n}measureInfo(){let e=this.dom.querySelector("[aria-selected]");if(!e||!this.info)return null;let n=this.dom.getBoundingClientRect(),r=this.info.getBoundingClientRect(),i=e.getBoundingClientRect(),s=this.space;if(!s){let o=this.dom.ownerDocument.documentElement;s={left:0,top:0,right:o.clientWidth,bottom:o.clientHeight}}return i.top>Math.min(s.bottom,n.bottom)-10||i.bottom<Math.max(s.top,n.top)+10?null:this.view.state.facet(nl).positionInfo(this.view,n,i,r,s,this.dom)}placeInfo(e){this.info&&(e?(e.style&&(this.info.style.cssText=e.style),this.info.className="cm-tooltip cm-completionInfo "+(e.class||"")):this.info.style.cssText="top: -1e6px")}createListBox(e,n,r){const i=document.createElement("ul");i.id=n,i.setAttribute("role","listbox"),i.setAttribute("aria-expanded","true"),i.setAttribute("aria-label",this.view.state.phrase("Completions")),i.addEventListener("mousedown",o=>{o.target==i&&o.preventDefault()});let s=null;for(let o=r.from;o<r.to;o++){let{completion:a,match:l}=e[o],{section:h}=a;if(h){let g=typeof h=="string"?h:h.name;if(g!=s&&(o>r.from||r.from==0))if(s=g,typeof h!="string"&&h.header)i.appendChild(h.header(h));else{let b=i.appendChild(document.createElement("completion-section"));b.textContent=g}}const f=i.appendChild(document.createElement("li"));f.id=n+"-"+o,f.setAttribute("role","option");let p=this.optionClass(a);p&&(f.className=p);for(let g of this.optionContent){let b=g(a,this.view.state,this.view,l);b&&f.appendChild(b)}}return r.from&&i.classList.add("cm-completionListIncompleteTop"),r.to<e.length&&i.classList.add("cm-completionListIncompleteBottom"),i}destroyInfo(){this.info&&(this.infoDestroy&&this.infoDestroy(),this.info.remove(),this.info=null)}destroy(){this.destroyInfo()}}function uSe(t,e){return n=>new lSe(n,t,e)}function cSe(t,e){let n=t.getBoundingClientRect(),r=e.getBoundingClientRect(),i=n.height/t.offsetHeight;r.top<n.top?t.scrollTop-=(n.top-r.top)/i:r.bottom>n.bottom&&(t.scrollTop+=(r.bottom-n.bottom)/i)}function kV(t){return(t.boost||0)*100+(t.apply?10:0)+(t.info?5:0)+(t.type?1:0)}function hSe(t,e){let n=[],r=null,i=null,s=f=>{n.push(f);let{section:p}=f.completion;if(p){r||(r=[]);let g=typeof p=="string"?p:p.name;r.some(b=>b.name==g)||r.push(typeof p=="string"?{name:g}:p)}},o=e.facet(nl);for(let f of t)if(f.hasResult()){let p=f.result.getMatch;if(f.result.filter===!1)for(let g of f.result.options)s(new wV(g,f.source,p?p(g):[],1e9-n.length));else{let g=e.sliceDoc(f.from,f.to),b,x=o.filterStrict?new sSe(g):new iSe(g);for(let k of f.result.options)if(b=x.match(k.label)){let T=k.displayLabel?p?p(k,b.matched):[]:b.matched,I=b.score+(k.boost||0);if(s(new wV(k,f.source,T,I)),typeof k.section=="object"&&k.section.rank==="dynamic"){let{name:M}=k.section;i||(i=Object.create(null)),i[M]=Math.max(I,i[M]||-1e9)}}}}if(r){let f=Object.create(null),p=0,g=(b,x)=>(b.rank==="dynamic"&&x.rank==="dynamic"?i[x.name]-i[b.name]:0)||(typeof b.rank=="number"?b.rank:1e9)-(typeof x.rank=="number"?x.rank:1e9)||(b.name<x.name?-1:1);for(let b of r.sort(g))p-=1e5,f[b.name]=p;for(let b of n){let{section:x}=b.completion;x&&(b.score+=f[typeof x=="string"?x:x.name])}}let a=[],l=null,h=o.compareCompletions;for(let f of n.sort((p,g)=>g.score-p.score||h(p.completion,g.completion))){let p=f.completion;!l||l.label!=p.label||l.detail!=p.detail||l.type!=null&&p.type!=null&&l.type!=p.type||l.apply!=p.apply||l.boost!=p.boost?a.push(f):kV(f.completion)>kV(l)&&(a[a.length-1]=f),l=f.completion}return a}class Kx{constructor(e,n,r,i,s,o){this.options=e,this.attrs=n,this.tooltip=r,this.timestamp=i,this.selected=s,this.disabled=o}setSelected(e,n){return e==this.selected||e>=this.options.length?this:new Kx(this.options,CV(n,e),this.tooltip,this.timestamp,e,this.disabled)}static build(e,n,r,i,s,o){if(i&&!o&&e.some(h=>h.isPending))return i.setDisabled();let a=hSe(e,n);if(!a.length)return i&&e.some(h=>h.isPending)?i.setDisabled():null;let l=n.facet(nl).selectOnOpen?0:-1;if(i&&i.selected!=l&&i.selected!=-1){let h=i.options[i.selected].completion;for(let f=0;f<a.length;f++)if(a[f].completion==h){l=f;break}}return new Kx(a,CV(r,l),{pos:e.reduce((h,f)=>f.hasResult()?Math.min(h,f.from):h,1e8),create:ySe,above:s.aboveCursor},i?i.timestamp:Date.now(),l,!1)}map(e){return new Kx(this.options,this.attrs,{...this.tooltip,pos:e.mapPos(this.tooltip.pos)},this.timestamp,this.selected,this.disabled)}setDisabled(){return new Kx(this.options,this.attrs,this.tooltip,this.timestamp,this.selected,!0)}}class h6{constructor(e,n,r){this.active=e,this.id=n,this.open=r}static start(){return new h6(mSe,"cm-ac-"+Math.floor(Math.random()*2e6).toString(36),null)}update(e){let{state:n}=e,r=n.facet(nl),s=(r.override||n.languageDataAt("autocomplete",bb(n)).map(rSe)).map(l=>(this.active.find(f=>f.source==l)||new uf(l,this.active.some(f=>f.state!=0)?1:0)).update(e,r));s.length==this.active.length&&s.every((l,h)=>l==this.active[h])&&(s=this.active);let o=this.open,a=e.effects.some(l=>l.is(JB));o&&e.docChanged&&(o=o.map(e.changes)),e.selection||s.some(l=>l.hasResult()&&e.changes.touchesRange(l.from,l.to))||!fSe(s,this.active)||a?o=Kx.build(s,n,this.id,o,r,a):o&&o.disabled&&!s.some(l=>l.isPending)&&(o=null),!o&&s.every(l=>!l.isPending)&&s.some(l=>l.hasResult())&&(s=s.map(l=>l.hasResult()?new uf(l.source,0):l));for(let l of e.effects)l.is(Hne)&&(o=o&&o.setSelected(l.value,this.id));return s==this.active&&o==this.open?this:new h6(s,this.id,o)}get tooltip(){return this.open?this.open.tooltip:null}get attrs(){return this.open?this.open.attrs:this.active.length?dSe:pSe}}function fSe(t,e){if(t==e)return!0;for(let n=0,r=0;;){for(;n<t.length&&!t[n].hasResult();)n++;for(;r<e.length&&!e[r].hasResult();)r++;let i=n==t.length,s=r==e.length;if(i||s)return i==s;if(t[n++].result!=e[r++].result)return!1}}const dSe={"aria-autocomplete":"list"},pSe={};function CV(t,e){let n={"aria-autocomplete":"list","aria-haspopup":"listbox","aria-controls":t};return e>-1&&(n["aria-activedescendant"]=t+"-"+e),n}const mSe=[];function Yne(t,e){if(t.isUserEvent("input.complete")){let r=t.annotation(KB);if(r&&e.activateOnCompletion(r))return 12}let n=t.isUserEvent("input.type");return n&&e.activateOnTyping?5:n?1:t.isUserEvent("delete.backward")?2:t.selection?8:t.docChanged?16:0}class uf{constructor(e,n,r=!1){this.source=e,this.state=n,this.explicit=r}hasResult(){return!1}get isPending(){return this.state==1}update(e,n){let r=Yne(e,n),i=this;(r&8||r&16&&this.touches(e))&&(i=new uf(i.source,0)),r&4&&i.state==0&&(i=new uf(this.source,1)),i=i.updateFor(e,r);for(let s of e.effects)if(s.is(c6))i=new uf(i.source,1,s.value);else if(s.is(Dk))i=new uf(i.source,0);else if(s.is(JB))for(let o of s.value)o.source==i.source&&(i=o);return i}updateFor(e,n){return this.map(e.changes)}map(e){return this}touches(e){return e.changes.touchesRange(bb(e.state))}}class xw extends uf{constructor(e,n,r,i,s,o){super(e,3,n),this.limit=r,this.result=i,this.from=s,this.to=o}hasResult(){return!0}updateFor(e,n){var r;if(!(n&3))return this.map(e.changes);let i=this.result;i.map&&!e.changes.empty&&(i=i.map(i,e.changes));let s=e.changes.mapPos(this.from),o=e.changes.mapPos(this.to,1),a=bb(e.state);if(a>o||!i||n&2&&(bb(e.startState)==this.from||a<this.limit))return new uf(this.source,n&4?1:0);let l=e.changes.mapPos(this.limit);return gSe(i.validFor,e.state,s,o)?new xw(this.source,this.explicit,l,i,s,o):i.update&&(i=i.update(i,s,o,new YB(e.state,a,!1)))?new xw(this.source,this.explicit,l,i,i.from,(r=i.to)!==null&&r!==void 0?r:bb(e.state)):new uf(this.source,1,this.explicit)}map(e){return e.empty?this:(this.result.map?this.result.map(this.result,e):this.result)?new xw(this.source,this.explicit,e.mapPos(this.limit),this.result,e.mapPos(this.from),e.mapPos(this.to,1)):new uf(this.source,0)}touches(e){return e.changes.touchesRange(this.from,this.to)}}function gSe(t,e,n,r){if(!t)return!1;let i=e.sliceDoc(n,r);return typeof t=="function"?t(i,n,r,e):Gne(t,!0).test(i)}const JB=Yr.define({map(t,e){return t.map(n=>n.map(e))}}),Hne=Yr.define(),fc=Aa.define({create(){return h6.start()},update(t,e){return t.update(e)},provide:t=>[zB.from(t,e=>e.tooltip),Cn.contentAttributes.from(t,e=>e.attrs)]});function eN(t,e){const n=e.completion.apply||e.completion.label;let r=t.state.field(fc).active.find(i=>i.source==e.source);return r instanceof xw?(typeof n=="string"?t.dispatch({...nSe(t.state,n,r.from,r.to),annotations:KB.of(e.completion)}):n(t,e.completion,r.from,r.to),!0):!1}const ySe=uSe(fc,eN);function u4(t,e="option"){return n=>{let r=n.state.field(fc,!1);if(!r||!r.open||r.open.disabled||Date.now()-r.open.timestamp<n.state.facet(nl).interactionDelay)return!1;let i=1,s;e=="page"&&(s=Ene(n,r.open.tooltip))&&(i=Math.max(2,Math.floor(s.dom.offsetHeight/s.dom.querySelector("li").offsetHeight)-1));let{length:o}=r.open.options,a=r.open.selected>-1?r.open.selected+i*(t?1:-1):t?0:o-1;return a<0?a=e=="page"?0:o-1:a>=o&&(a=e=="page"?o-1:0),n.dispatch({effects:Hne.of(a)}),!0}}const vSe=t=>{let e=t.state.field(fc,!1);return t.state.readOnly||!e||!e.open||e.open.selected<0||e.open.disabled||Date.now()-e.open.timestamp<t.state.facet(nl).interactionDelay?!1:eN(t,e.open.options[e.open.selected])},FM=t=>t.state.field(fc,!1)?(t.dispatch({effects:c6.of(!0)}),!0):!1,bSe=t=>{let e=t.state.field(fc,!1);return!e||!e.active.some(n=>n.state!=0)?!1:(t.dispatch({effects:Dk.of(null)}),!0)};class _Se{constructor(e,n){this.active=e,this.context=n,this.time=Date.now(),this.updates=[],this.done=void 0}}const xSe=50,wSe=1e3,OSe=Ca.fromClass(class{constructor(t){this.view=t,this.debounceUpdate=-1,this.running=[],this.debounceAccept=-1,this.pendingStart=!1,this.composing=0;for(let e of t.state.field(fc).active)e.isPending&&this.startQuery(e)}update(t){let e=t.state.field(fc),n=t.state.facet(nl);if(!t.selectionSet&&!t.docChanged&&t.startState.field(fc)==e)return;let r=t.transactions.some(s=>{let o=Yne(s,n);return o&8||(s.selection||s.docChanged)&&!(o&3)});for(let s=0;s<this.running.length;s++){let o=this.running[s];if(r||o.context.abortOnDocChange&&t.docChanged||o.updates.length+t.transactions.length>xSe&&Date.now()-o.time>wSe){for(let a of o.context.abortListeners)try{a()}catch(l){Mu(this.view.state,l)}o.context.abortListeners=null,this.running.splice(s--,1)}else o.updates.push(...t.transactions)}this.debounceUpdate>-1&&clearTimeout(this.debounceUpdate),t.transactions.some(s=>s.effects.some(o=>o.is(c6)))&&(this.pendingStart=!0);let i=this.pendingStart?50:n.activateOnTypingDelay;if(this.debounceUpdate=e.active.some(s=>s.isPending&&!this.running.some(o=>o.active.source==s.source))?setTimeout(()=>this.startUpdate(),i):-1,this.composing!=0)for(let s of t.transactions)s.isUserEvent("input.type")?this.composing=2:this.composing==2&&s.selection&&(this.composing=3)}startUpdate(){this.debounceUpdate=-1,this.pendingStart=!1;let{state:t}=this.view,e=t.field(fc);for(let n of e.active)n.isPending&&!this.running.some(r=>r.active.source==n.source)&&this.startQuery(n);this.running.length&&e.open&&e.open.disabled&&(this.debounceAccept=setTimeout(()=>this.accept(),this.view.state.facet(nl).updateSyncTime))}startQuery(t){let{state:e}=this.view,n=bb(e),r=new YB(e,n,t.explicit,this.view),i=new _Se(t,r);this.running.push(i),Promise.resolve(t.source(r)).then(s=>{i.context.aborted||(i.done=s||null,this.scheduleAccept())},s=>{this.view.dispatch({effects:Dk.of(null)}),Mu(this.view.state,s)})}scheduleAccept(){this.running.every(t=>t.done!==void 0)?this.accept():this.debounceAccept<0&&(this.debounceAccept=setTimeout(()=>this.accept(),this.view.state.facet(nl).updateSyncTime))}accept(){var t;this.debounceAccept>-1&&clearTimeout(this.debounceAccept),this.debounceAccept=-1;let e=[],n=this.view.state.facet(nl),r=this.view.state.field(fc);for(let i=0;i<this.running.length;i++){let s=this.running[i];if(s.done===void 0)continue;if(this.running.splice(i--,1),s.done){let a=bb(s.updates.length?s.updates[0].startState:this.view.state),l=Math.min(a,s.done.from+(s.active.explicit?0:1)),h=new xw(s.active.source,s.active.explicit,l,s.done,s.done.from,(t=s.done.to)!==null&&t!==void 0?t:a);for(let f of s.updates)h=h.update(f,n);if(h.hasResult()){e.push(h);continue}}let o=r.active.find(a=>a.source==s.active.source);if(o&&o.isPending)if(s.done==null){let a=new uf(s.active.source,0);for(let l of s.updates)a=a.update(l,n);a.isPending||e.push(a)}else this.startQuery(o)}(e.length||r.open&&r.open.disabled)&&this.view.dispatch({effects:JB.of(e)})}},{eventHandlers:{blur(t){let e=this.view.state.field(fc,!1);if(e&&e.tooltip&&this.view.state.facet(nl).closeOnBlur){let n=e.open&&Ene(this.view,e.open.tooltip);(!n||!n.dom.contains(t.relatedTarget))&&setTimeout(()=>this.view.dispatch({effects:Dk.of(null)}),10)}},compositionstart(){this.composing=1},compositionend(){this.composing==3&&setTimeout(()=>this.view.dispatch({effects:c6.of(!1)}),20),this.composing=0}}}),SSe=typeof navigator=="object"&&/Win/.test(navigator.platform),kSe=b0.highest(Cn.domEventHandlers({keydown(t,e){let n=e.state.field(fc,!1);if(!n||!n.open||n.open.disabled||n.open.selected<0||t.key.length>1||t.ctrlKey&&!(SSe&&t.altKey)||t.metaKey)return!1;let r=n.open.options[n.open.selected],i=n.active.find(o=>o.source==r.source),s=r.completion.commitCharacters||i.result.commitCharacters;return s&&s.indexOf(t.key)>-1&&eN(e,r),!1}})),Kne=Cn.baseTheme({".cm-tooltip.cm-tooltip-autocomplete":{"& > ul":{fontFamily:"monospace",whiteSpace:"nowrap",overflow:"hidden auto",maxWidth_fallback:"700px",maxWidth:"min(700px, 95vw)",minWidth:"250px",maxHeight:"10em",height:"100%",listStyle:"none",margin:0,padding:0,"& > li, & > completion-section":{padding:"1px 3px",lineHeight:1.2},"& > li":{overflowX:"hidden",textOverflow:"ellipsis",cursor:"pointer"},"& > completion-section":{display:"list-item",borderBottom:"1px solid silver",paddingLeft:"0.5em",opacity:.7}}},"&light .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#17c",color:"white"},"&light .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#777"},"&dark .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#347",color:"white"},"&dark .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#444"},".cm-completionListIncompleteTop:before, .cm-completionListIncompleteBottom:after":{content:'"Â·Â·Â·"',opacity:.5,display:"block",textAlign:"center"},".cm-tooltip.cm-completionInfo":{position:"absolute",padding:"3px 9px",width:"max-content",maxWidth:"400px",boxSizing:"border-box",whiteSpace:"pre-line"},".cm-completionInfo.cm-completionInfo-left":{right:"100%"},".cm-completionInfo.cm-completionInfo-right":{left:"100%"},".cm-completionInfo.cm-completionInfo-left-narrow":{right:"30px"},".cm-completionInfo.cm-completionInfo-right-narrow":{left:"30px"},"&light .cm-snippetField":{backgroundColor:"#00000022"},"&dark .cm-snippetField":{backgroundColor:"#ffffff22"},".cm-snippetFieldPosition":{verticalAlign:"text-top",width:0,height:"1.15em",display:"inline-block",margin:"0 -0.7px -.7em",borderLeft:"1.4px dotted #888"},".cm-completionMatchedText":{textDecoration:"underline"},".cm-completionDetail":{marginLeft:"0.5em",fontStyle:"italic"},".cm-completionIcon":{fontSize:"90%",width:".8em",display:"inline-block",textAlign:"center",paddingRight:".6em",opacity:"0.6",boxSizing:"content-box"},".cm-completionIcon-function, .cm-completionIcon-method":{"&:after":{content:"'Æ'"}},".cm-completionIcon-class":{"&:after":{content:"'â'"}},".cm-completionIcon-interface":{"&:after":{content:"'â'"}},".cm-completionIcon-variable":{"&:after":{content:"'ð¥'"}},".cm-completionIcon-constant":{"&:after":{content:"'ð¶'"}},".cm-completionIcon-type":{"&:after":{content:"'ð¡'"}},".cm-completionIcon-enum":{"&:after":{content:"'âª'"}},".cm-completionIcon-property":{"&:after":{content:"'â¡'"}},".cm-completionIcon-keyword":{"&:after":{content:"'ðï¸'"}},".cm-completionIcon-namespace":{"&:after":{content:"'â¢'"}},".cm-completionIcon-text":{"&:after":{content:"'abc'",fontSize:"50%",verticalAlign:"middle"}}});class CSe{constructor(e,n,r,i){this.field=e,this.line=n,this.from=r,this.to=i}}class tN{constructor(e,n,r){this.field=e,this.from=n,this.to=r}map(e){let n=e.mapPos(this.from,-1,yl.TrackDel),r=e.mapPos(this.to,1,yl.TrackDel);return n==null||r==null?null:new tN(this.field,n,r)}}class nN{constructor(e,n){this.lines=e,this.fieldPositions=n}instantiate(e,n){let r=[],i=[n],s=e.doc.lineAt(n),o=/^\s*/.exec(s.text)[0];for(let l of this.lines){if(r.length){let h=o,f=/^\t*/.exec(l)[0].length;for(let p=0;p<f;p++)h+=e.facet($C);i.push(n+h.length-f),l=h+l.slice(f)}r.push(l),n+=l.length+1}let a=this.fieldPositions.map(l=>new tN(l.field,i[l.line]+l.from,i[l.line]+l.to));return{text:r,ranges:a}}static parse(e){let n=[],r=[],i=[],s;for(let o of e.split(/\r\n?|\n/)){for(;s=/[#$]\{(?:(\d+)(?::([^{}]*))?|((?:\\[{}]|[^{}])*))\}/.exec(o);){let a=s[1]?+s[1]:null,l=s[2]||s[3]||"",h=-1,f=l.replace(/\\[{}]/g,p=>p[1]);for(let p=0;p<n.length;p++)(a!=null?n[p].seq==a:f&&n[p].name==f)&&(h=p);if(h<0){let p=0;for(;p<n.length&&(a==null||n[p].seq!=null&&n[p].seq<a);)p++;n.splice(p,0,{seq:a,name:f}),h=p;for(let g of i)g.field>=h&&g.field++}for(let p of i)if(p.line==r.length&&p.from>s.index){let g=s[2]?3+(s[1]||"").length:2;p.from-=g,p.to-=g}i.push(new CSe(h,r.length,s.index,s.index+f.length)),o=o.slice(0,s.index)+l+o.slice(s.index+s[0].length)}o=o.replace(/\\([{}])/g,(a,l,h)=>{for(let f of i)f.line==r.length&&f.from>h&&(f.from--,f.to--);return l}),r.push(o)}return new nN(r,i)}}let ASe=Sr.widget({widget:new class extends a_{toDOM(){let t=document.createElement("span");return t.className="cm-snippetFieldPosition",t}ignoreEvent(){return!1}}}),ESe=Sr.mark({class:"cm-snippetField"});class H2{constructor(e,n){this.ranges=e,this.active=n,this.deco=Sr.set(e.map(r=>(r.from==r.to?ASe:ESe).range(r.from,r.to)),!0)}map(e){let n=[];for(let r of this.ranges){let i=r.map(e);if(!i)return null;n.push(i)}return new H2(n,this.active)}selectionInsideField(e){return e.ranges.every(n=>this.ranges.some(r=>r.field==this.active&&r.from<=n.from&&r.to>=n.to))}}const NC=Yr.define({map(t,e){return t&&t.map(e)}}),TSe=Yr.define(),Ik=Aa.define({create(){return null},update(t,e){for(let n of e.effects){if(n.is(NC))return n.value;if(n.is(TSe)&&t)return new H2(t.ranges,n.value)}return t&&e.docChanged&&(t=t.map(e.changes)),t&&e.selection&&!t.selectionInsideField(e.selection)&&(t=null),t},provide:t=>Cn.decorations.from(t,e=>e?e.deco:Sr.none)});function rN(t,e){return kt.create(t.filter(n=>n.field==e).map(n=>kt.range(n.from,n.to)))}function PSe(t){let e=nN.parse(t);return(n,r,i,s)=>{let{text:o,ranges:a}=e.instantiate(n.state,i),{main:l}=n.state.selection,h={changes:{from:i,to:s==l.from?l.to:s,insert:ts.of(o)},scrollIntoView:!0,annotations:r?[KB.of(r),Sa.userEvent.of("input.complete")]:void 0};if(a.length&&(h.selection=rN(a,0)),a.some(f=>f.field>0)){let f=new H2(a,0),p=h.effects=[NC.of(f)];n.state.field(Ik,!1)===void 0&&p.push(Yr.appendConfig.of([Ik,FSe,LSe,Kne]))}n.dispatch(n.state.update(h))}}function Jne(t){return({state:e,dispatch:n})=>{let r=e.field(Ik,!1);if(!r||t<0&&r.active==0)return!1;let i=r.active+t,s=t>0&&!r.ranges.some(o=>o.field==i+t);return n(e.update({selection:rN(r.ranges,i),effects:NC.of(s?null:new H2(r.ranges,i)),scrollIntoView:!0})),!0}}const DSe=({state:t,dispatch:e})=>t.field(Ik,!1)?(e(t.update({effects:NC.of(null)})),!0):!1,ISe=Jne(1),MSe=Jne(-1),RSe=[{key:"Tab",run:ISe,shift:MSe},{key:"Escape",run:DSe}],AV=Rn.define({combine(t){return t.length?t[0]:RSe}}),FSe=b0.highest(RC.compute([AV],t=>t.facet(AV)));function wu(t,e){return{...e,apply:PSe(t)}}const LSe=Cn.domEventHandlers({mousedown(t,e){let n=e.state.field(Ik,!1),r;if(!n||(r=e.posAtCoords({x:t.clientX,y:t.clientY}))==null)return!1;let i=n.ranges.find(s=>s.from<=r&&s.to>=r);return!i||i.field==n.active?!1:(e.dispatch({selection:rN(n.ranges,i.field),effects:NC.of(n.ranges.some(s=>s.field>i.field)?new H2(n.ranges,i.field):null),scrollIntoView:!0}),!0)}}),Mk={brackets:["(","[","{","'",'"'],before:")]}:;>",stringPrefixes:[]},tb=Yr.define({map(t,e){let n=e.mapPos(t,-1,yl.TrackAfter);return n??void 0}}),iN=new class extends Bb{};iN.startSide=1;iN.endSide=-1;const ere=Aa.define({create(){return as.empty},update(t,e){if(t=t.map(e.changes),e.selection){let n=e.state.doc.lineAt(e.selection.main.head);t=t.update({filter:r=>r>=n.from&&r<=n.to})}for(let n of e.effects)n.is(tb)&&(t=t.update({add:[iN.range(n.value,n.value+1)]}));return t}});function $Se(){return[NSe,ere]}const LM="()[]{}<>Â«Â»Â»Â«ï¼»ï¼½ï½ï½";function tre(t){for(let e=0;e<LM.length;e+=2)if(LM.charCodeAt(e)==t)return LM.charAt(e+1);return CB(t<128?t:t+1)}function nre(t,e){return t.languageDataAt("closeBrackets",e)[0]||Mk}const BSe=typeof navigator=="object"&&/Android\b/.test(navigator.userAgent),NSe=Cn.inputHandler.of((t,e,n,r)=>{if((BSe?t.composing:t.compositionStarted)||t.state.readOnly)return!1;let i=t.state.selection.main;if(r.length>2||r.length==2&&$p(hc(r,0))==1||e!=i.from||n!=i.to)return!1;let s=jSe(t.state,r);return s?(t.dispatch(s),!0):!1}),zSe=({state:t,dispatch:e})=>{if(t.readOnly)return!1;let r=nre(t,t.selection.main.head).brackets||Mk.brackets,i=null,s=t.changeByRange(o=>{if(o.empty){let a=USe(t.doc,o.head);for(let l of r)if(l==a&&_D(t.doc,o.head)==tre(hc(l,0)))return{changes:{from:o.head-l.length,to:o.head+l.length},range:kt.cursor(o.head-l.length)}}return{range:i=o}});return i||e(t.update(s,{scrollIntoView:!0,userEvent:"delete.backward"})),!i},QSe=[{key:"Backspace",run:zSe}];function jSe(t,e){let n=nre(t,t.selection.main.head),r=n.brackets||Mk.brackets;for(let i of r){let s=tre(hc(i,0));if(e==i)return s==i?ZSe(t,i,r.indexOf(i+i+i)>-1,n):VSe(t,i,s,n.before||Mk.before);if(e==s&&rre(t,t.selection.main.from))return qSe(t,i,s)}return null}function rre(t,e){let n=!1;return t.field(ere).between(0,t.doc.length,r=>{r==e&&(n=!0)}),n}function _D(t,e){let n=t.sliceString(e,e+2);return n.slice(0,$p(hc(n,0)))}function USe(t,e){let n=t.sliceString(e-2,e);return $p(hc(n,0))==n.length?n:n.slice(1)}function VSe(t,e,n,r){let i=null,s=t.changeByRange(o=>{if(!o.empty)return{changes:[{insert:e,from:o.from},{insert:n,from:o.to}],effects:tb.of(o.to+e.length),range:kt.range(o.anchor+e.length,o.head+e.length)};let a=_D(t.doc,o.head);return!a||/\s/.test(a)||r.indexOf(a)>-1?{changes:{insert:e+n,from:o.head},effects:tb.of(o.head+e.length),range:kt.cursor(o.head+e.length)}:{range:i=o}});return i?null:t.update(s,{scrollIntoView:!0,userEvent:"input.type"})}function qSe(t,e,n){let r=null,i=t.changeByRange(s=>s.empty&&_D(t.doc,s.head)==n?{changes:{from:s.head,to:s.head+n.length,insert:n},range:kt.cursor(s.head+n.length)}:r={range:s});return r?null:t.update(i,{scrollIntoView:!0,userEvent:"input.type"})}function ZSe(t,e,n,r){let i=r.stringPrefixes||Mk.stringPrefixes,s=null,o=t.changeByRange(a=>{if(!a.empty)return{changes:[{insert:e,from:a.from},{insert:e,from:a.to}],effects:tb.of(a.to+e.length),range:kt.range(a.anchor+e.length,a.head+e.length)};let l=a.head,h=_D(t.doc,l),f;if(h==e){if(EV(t,l))return{changes:{insert:e+e,from:l},effects:tb.of(l+e.length),range:kt.cursor(l+e.length)};if(rre(t,l)){let g=n&&t.sliceDoc(l,l+e.length*3)==e+e+e?e+e+e:e;return{changes:{from:l,to:l+g.length,insert:g},range:kt.cursor(l+g.length)}}}else{if(n&&t.sliceDoc(l-2*e.length,l)==e+e&&(f=TV(t,l-2*e.length,i))>-1&&EV(t,f))return{changes:{insert:e+e+e+e,from:l},effects:tb.of(l+e.length),range:kt.cursor(l+e.length)};if(t.charCategorizer(l)(h)!=So.Word&&TV(t,l,i)>-1&&!XSe(t,l,e,i))return{changes:{insert:e+e,from:l},effects:tb.of(l+e.length),range:kt.cursor(l+e.length)}}return{range:s=a}});return s?null:t.update(o,{scrollIntoView:!0,userEvent:"input.type"})}function EV(t,e){let n=ws(t).resolveInner(e+1);return n.parent&&n.from==e}function XSe(t,e,n,r){let i=ws(t).resolveInner(e,-1),s=r.reduce((o,a)=>Math.max(o,a.length),0);for(let o=0;o<5;o++){let a=t.sliceDoc(i.from,Math.min(i.to,i.from+n.length+s)),l=a.indexOf(n);if(!l||l>-1&&r.indexOf(a.slice(0,l))>-1){let f=i.firstChild;for(;f&&f.from==i.from&&f.to-f.from>n.length+l;){if(t.sliceDoc(f.to-n.length,f.to)==n)return!1;f=f.firstChild}return!0}let h=i.to==e&&i.parent;if(!h)break;i=h}return!1}function TV(t,e,n){let r=t.charCategorizer(e);if(r(t.sliceDoc(e-1,e))!=So.Word)return e;for(let i of n){let s=e-i.length;if(t.sliceDoc(s,e)==i&&r(t.sliceDoc(s-1,s))!=So.Word)return s}return-1}function WSe(t={}){return[kSe,fc,nl.of(t),OSe,GSe,Kne]}const ire=[{key:"Ctrl-Space",run:FM},{mac:"Alt-`",run:FM},{mac:"Alt-i",run:FM},{key:"Escape",run:bSe},{key:"ArrowDown",run:u4(!0)},{key:"ArrowUp",run:u4(!1)},{key:"PageDown",run:u4(!0,"page")},{key:"PageUp",run:u4(!1,"page")},{key:"Enter",run:vSe}],GSe=b0.highest(RC.computeN([nl],t=>t.facet(nl).defaultKeymap?[ire]:[])),YSe=t=>{let{state:e}=t,n=e.doc.lineAt(e.selection.main.from),r=oN(t.state,n.from);return r.line?HSe(t):r.block?JSe(t):!1};function sN(t,e){return({state:n,dispatch:r})=>{if(n.readOnly)return!1;let i=t(e,n);return i?(r(n.update(i)),!0):!1}}const HSe=sN(n3e,0),KSe=sN(sre,0),JSe=sN((t,e)=>sre(t,e,t3e(e)),0);function oN(t,e){let n=t.languageDataAt("commentTokens",e,1);return n.length?n[0]:{}}const RS=50;function e3e(t,{open:e,close:n},r,i){let s=t.sliceDoc(r-RS,r),o=t.sliceDoc(i,i+RS),a=/\s*$/.exec(s)[0].length,l=/^\s*/.exec(o)[0].length,h=s.length-a;if(s.slice(h-e.length,h)==e&&o.slice(l,l+n.length)==n)return{open:{pos:r-a,margin:a&&1},close:{pos:i+l,margin:l&&1}};let f,p;i-r<=2*RS?f=p=t.sliceDoc(r,i):(f=t.sliceDoc(r,r+RS),p=t.sliceDoc(i-RS,i));let g=/^\s*/.exec(f)[0].length,b=/\s*$/.exec(p)[0].length,x=p.length-b-n.length;return f.slice(g,g+e.length)==e&&p.slice(x,x+n.length)==n?{open:{pos:r+g+e.length,margin:/\s/.test(f.charAt(g+e.length))?1:0},close:{pos:i-b-n.length,margin:/\s/.test(p.charAt(x-1))?1:0}}:null}function t3e(t){let e=[];for(let n of t.selection.ranges){let r=t.doc.lineAt(n.from),i=n.to<=r.to?r:t.doc.lineAt(n.to);i.from>r.from&&i.from==n.to&&(i=n.to==r.to+1?r:t.doc.lineAt(n.to-1));let s=e.length-1;s>=0&&e[s].to>r.from?e[s].to=i.to:e.push({from:r.from+/^\s*/.exec(r.text)[0].length,to:i.to})}return e}function sre(t,e,n=e.selection.ranges){let r=n.map(s=>oN(e,s.from).block);if(!r.every(s=>s))return null;let i=n.map((s,o)=>e3e(e,r[o],s.from,s.to));if(t!=2&&!i.every(s=>s))return{changes:e.changes(n.map((s,o)=>i[o]?[]:[{from:s.from,insert:r[o].open+" "},{from:s.to,insert:" "+r[o].close}]))};if(t!=1&&i.some(s=>s)){let s=[];for(let o=0,a;o<i.length;o++)if(a=i[o]){let l=r[o],{open:h,close:f}=a;s.push({from:h.pos-l.open.length,to:h.pos+h.margin},{from:f.pos-f.margin,to:f.pos+l.close.length})}return{changes:s}}return null}function n3e(t,e,n=e.selection.ranges){let r=[],i=-1;for(let{from:s,to:o}of n){let a=r.length,l=1e9,h=oN(e,s).line;if(h){for(let f=s;f<=o;){let p=e.doc.lineAt(f);if(p.from>i&&(s==o||o>p.from)){i=p.from;let g=/^\s*/.exec(p.text)[0].length,b=g==p.length,x=p.text.slice(g,g+h.length)==h?g:-1;g<p.text.length&&g<l&&(l=g),r.push({line:p,comment:x,token:h,indent:g,empty:b,single:!1})}f=p.to+1}if(l<1e9)for(let f=a;f<r.length;f++)r[f].indent<r[f].line.text.length&&(r[f].indent=l);r.length==a+1&&(r[a].single=!0)}}if(t!=2&&r.some(s=>s.comment<0&&(!s.empty||s.single))){let s=[];for(let{line:a,token:l,indent:h,empty:f,single:p}of r)(p||!f)&&s.push({from:a.from+h,insert:l+" "});let o=e.changes(s);return{changes:o,selection:e.selection.map(o,1)}}else if(t!=1&&r.some(s=>s.comment>=0)){let s=[];for(let{line:o,comment:a,token:l}of r)if(a>=0){let h=o.from+a,f=h+l.length;o.text[f-o.from]==" "&&f++,s.push({from:h,to:f})}return{changes:s}}return null}const r9=_0.define(),r3e=_0.define(),i3e=Rn.define(),ore=Rn.define({combine(t){return x0(t,{minDepth:100,newGroupDelay:500,joinToEvent:(e,n)=>n},{minDepth:Math.max,newGroupDelay:Math.min,joinToEvent:(e,n)=>(r,i)=>e(r,i)||n(r,i)})}}),are=Aa.define({create(){return Zp.empty},update(t,e){let n=e.state.facet(ore),r=e.annotation(r9);if(r){let l=vc.fromTransaction(e,r.selection),h=r.side,f=h==0?t.undone:t.done;return l?f=f6(f,f.length,n.minDepth,l):f=cre(f,e.startState.selection),new Zp(h==0?r.rest:f,h==0?f:r.rest)}let i=e.annotation(r3e);if((i=="full"||i=="before")&&(t=t.isolate()),e.annotation(Sa.addToHistory)===!1)return e.changes.empty?t:t.addMapping(e.changes.desc);let s=vc.fromTransaction(e),o=e.annotation(Sa.time),a=e.annotation(Sa.userEvent);return s?t=t.addChanges(s,o,a,n,e):e.selection&&(t=t.addSelection(e.startState.selection,o,a,n.newGroupDelay)),(i=="full"||i=="after")&&(t=t.isolate()),t},toJSON(t){return{done:t.done.map(e=>e.toJSON()),undone:t.undone.map(e=>e.toJSON())}},fromJSON(t){return new Zp(t.done.map(vc.fromJSON),t.undone.map(vc.fromJSON))}});function s3e(t={}){return[are,ore.of(t),Cn.domEventHandlers({beforeinput(e,n){let r=e.inputType=="historyUndo"?lre:e.inputType=="historyRedo"?i9:null;return r?(e.preventDefault(),r(n)):!1}})]}function xD(t,e){return function({state:n,dispatch:r}){if(!e&&n.readOnly)return!1;let i=n.field(are,!1);if(!i)return!1;let s=i.pop(t,n,e);return s?(r(s),!0):!1}}const lre=xD(0,!1),i9=xD(1,!1),o3e=xD(0,!0),a3e=xD(1,!0);class vc{constructor(e,n,r,i,s){this.changes=e,this.effects=n,this.mapped=r,this.startSelection=i,this.selectionsAfter=s}setSelAfter(e){return new vc(this.changes,this.effects,this.mapped,this.startSelection,e)}toJSON(){var e,n,r;return{changes:(e=this.changes)===null||e===void 0?void 0:e.toJSON(),mapped:(n=this.mapped)===null||n===void 0?void 0:n.toJSON(),startSelection:(r=this.startSelection)===null||r===void 0?void 0:r.toJSON(),selectionsAfter:this.selectionsAfter.map(i=>i.toJSON())}}static fromJSON(e){return new vc(e.changes&&Ba.fromJSON(e.changes),[],e.mapped&&Jp.fromJSON(e.mapped),e.startSelection&&kt.fromJSON(e.startSelection),e.selectionsAfter.map(kt.fromJSON))}static fromTransaction(e,n){let r=cf;for(let i of e.startState.facet(i3e)){let s=i(e);s.length&&(r=r.concat(s))}return!r.length&&e.changes.empty?null:new vc(e.changes.invert(e.startState.doc),r,void 0,n||e.startState.selection,cf)}static selection(e){return new vc(void 0,cf,void 0,void 0,e)}}function f6(t,e,n,r){let i=e+1>n+20?e-n-1:0,s=t.slice(i,e);return s.push(r),s}function l3e(t,e){let n=[],r=!1;return t.iterChangedRanges((i,s)=>n.push(i,s)),e.iterChangedRanges((i,s,o,a)=>{for(let l=0;l<n.length;){let h=n[l++],f=n[l++];a>=h&&o<=f&&(r=!0)}}),r}function u3e(t,e){return t.ranges.length==e.ranges.length&&t.ranges.filter((n,r)=>n.empty!=e.ranges[r].empty).length===0}function ure(t,e){return t.length?e.length?t.concat(e):t:e}const cf=[],c3e=200;function cre(t,e){if(t.length){let n=t[t.length-1],r=n.selectionsAfter.slice(Math.max(0,n.selectionsAfter.length-c3e));return r.length&&r[r.length-1].eq(e)?t:(r.push(e),f6(t,t.length-1,1e9,n.setSelAfter(r)))}else return[vc.selection([e])]}function h3e(t){let e=t[t.length-1],n=t.slice();return n[t.length-1]=e.setSelAfter(e.selectionsAfter.slice(0,e.selectionsAfter.length-1)),n}function $M(t,e){if(!t.length)return t;let n=t.length,r=cf;for(;n;){let i=f3e(t[n-1],e,r);if(i.changes&&!i.changes.empty||i.effects.length){let s=t.slice(0,n);return s[n-1]=i,s}else e=i.mapped,n--,r=i.selectionsAfter}return r.length?[vc.selection(r)]:cf}function f3e(t,e,n){let r=ure(t.selectionsAfter.length?t.selectionsAfter.map(a=>a.map(e)):cf,n);if(!t.changes)return vc.selection(r);let i=t.changes.map(e),s=e.mapDesc(t.changes,!0),o=t.mapped?t.mapped.composeDesc(s):s;return new vc(i,Yr.mapEffects(t.effects,e),o,t.startSelection.map(s),r)}const d3e=/^(input\.type|delete)($|\.)/;class Zp{constructor(e,n,r=0,i=void 0){this.done=e,this.undone=n,this.prevTime=r,this.prevUserEvent=i}isolate(){return this.prevTime?new Zp(this.done,this.undone):this}addChanges(e,n,r,i,s){let o=this.done,a=o[o.length-1];return a&&a.changes&&!a.changes.empty&&e.changes&&(!r||d3e.test(r))&&(!a.selectionsAfter.length&&n-this.prevTime<i.newGroupDelay&&i.joinToEvent(s,l3e(a.changes,e.changes))||r=="input.type.compose")?o=f6(o,o.length-1,i.minDepth,new vc(e.changes.compose(a.changes),ure(Yr.mapEffects(e.effects,a.changes),a.effects),a.mapped,a.startSelection,cf)):o=f6(o,o.length,i.minDepth,e),new Zp(o,cf,n,r)}addSelection(e,n,r,i){let s=this.done.length?this.done[this.done.length-1].selectionsAfter:cf;return s.length>0&&n-this.prevTime<i&&r==this.prevUserEvent&&r&&/^select($|\.)/.test(r)&&u3e(s[s.length-1],e)?this:new Zp(cre(this.done,e),this.undone,n,r)}addMapping(e){return new Zp($M(this.done,e),$M(this.undone,e),this.prevTime,this.prevUserEvent)}pop(e,n,r){let i=e==0?this.done:this.undone;if(i.length==0)return null;let s=i[i.length-1],o=s.selectionsAfter[0]||n.selection;if(r&&s.selectionsAfter.length)return n.update({selection:s.selectionsAfter[s.selectionsAfter.length-1],annotations:r9.of({side:e,rest:h3e(i),selection:o}),userEvent:e==0?"select.undo":"select.redo",scrollIntoView:!0});if(s.changes){let a=i.length==1?cf:i.slice(0,i.length-1);return s.mapped&&(a=$M(a,s.mapped)),n.update({changes:s.changes,selection:s.startSelection,effects:s.effects,annotations:r9.of({side:e,rest:a,selection:o}),filter:!1,userEvent:e==0?"undo":"redo",scrollIntoView:!0})}else return null}}Zp.empty=new Zp(cf,cf);const p3e=[{key:"Mod-z",run:lre,preventDefault:!0},{key:"Mod-y",mac:"Mod-Shift-z",run:i9,preventDefault:!0},{linux:"Ctrl-Shift-z",run:i9,preventDefault:!0},{key:"Mod-u",run:o3e,preventDefault:!0},{key:"Alt-u",mac:"Mod-Shift-u",run:a3e,preventDefault:!0}];function K2(t,e){return kt.create(t.ranges.map(e),t.mainIndex)}function Bd(t,e){return t.update({selection:e,scrollIntoView:!0,userEvent:"select"})}function Nd({state:t,dispatch:e},n){let r=K2(t.selection,n);return r.eq(t.selection,!0)?!1:(e(Bd(t,r)),!0)}function wD(t,e){return kt.cursor(e?t.to:t.from)}function hre(t,e){return Nd(t,n=>n.empty?t.moveByChar(n,e):wD(n,e))}function cu(t){return t.textDirectionAt(t.state.selection.main.head)==vo.LTR}const fre=t=>hre(t,!cu(t)),dre=t=>hre(t,cu(t));function pre(t,e){return Nd(t,n=>n.empty?t.moveByGroup(n,e):wD(n,e))}const m3e=t=>pre(t,!cu(t)),g3e=t=>pre(t,cu(t));function y3e(t,e,n){if(e.type.prop(n))return!0;let r=e.to-e.from;return r&&(r>2||/[^\s,.;:]/.test(t.sliceDoc(e.from,e.to)))||e.firstChild}function OD(t,e,n){let r=ws(t).resolveInner(e.head),i=n?Dr.closedBy:Dr.openedBy;for(let l=e.head;;){let h=n?r.childAfter(l):r.childBefore(l);if(!h)break;y3e(t,h,i)?r=h:l=n?h.to:h.from}let s=r.type.prop(i),o,a;return s&&(o=n?qp(t,r.from,1):qp(t,r.to,-1))&&o.matched?a=n?o.end.to:o.end.from:a=n?r.to:r.from,kt.cursor(a,n?-1:1)}const v3e=t=>Nd(t,e=>OD(t.state,e,!cu(t))),b3e=t=>Nd(t,e=>OD(t.state,e,cu(t)));function mre(t,e){return Nd(t,n=>{if(!n.empty)return wD(n,e);let r=t.moveVertically(n,e);return r.head!=n.head?r:t.moveToLineBoundary(n,e)})}const gre=t=>mre(t,!1),yre=t=>mre(t,!0);function vre(t){let e=t.scrollDOM.clientHeight<t.scrollDOM.scrollHeight-2,n=0,r=0,i;if(e){for(let s of t.state.facet(Cn.scrollMargins)){let o=s(t);o?.top&&(n=Math.max(o?.top,n)),o?.bottom&&(r=Math.max(o?.bottom,r))}i=t.scrollDOM.clientHeight-n-r}else i=(t.dom.ownerDocument.defaultView||window).innerHeight;return{marginTop:n,marginBottom:r,selfScroll:e,height:Math.max(t.defaultLineHeight,i-5)}}function bre(t,e){let n=vre(t),{state:r}=t,i=K2(r.selection,o=>o.empty?t.moveVertically(o,e,n.height):wD(o,e));if(i.eq(r.selection))return!1;let s;if(n.selfScroll){let o=t.coordsAtPos(r.selection.main.head),a=t.scrollDOM.getBoundingClientRect(),l=a.top+n.marginTop,h=a.bottom-n.marginBottom;o&&o.top>l&&o.bottom<h&&(s=Cn.scrollIntoView(i.main.head,{y:"start",yMargin:o.top-l}))}return t.dispatch(Bd(r,i),{effects:s}),!0}const PV=t=>bre(t,!1),s9=t=>bre(t,!0);function C1(t,e,n){let r=t.lineBlockAt(e.head),i=t.moveToLineBoundary(e,n);if(i.head==e.head&&i.head!=(n?r.to:r.from)&&(i=t.moveToLineBoundary(e,n,!1)),!n&&i.head==r.from&&r.length){let s=/^\s*/.exec(t.state.sliceDoc(r.from,Math.min(r.from+100,r.to)))[0].length;s&&e.head!=r.from+s&&(i=kt.cursor(r.from+s))}return i}const _3e=t=>Nd(t,e=>C1(t,e,!0)),x3e=t=>Nd(t,e=>C1(t,e,!1)),w3e=t=>Nd(t,e=>C1(t,e,!cu(t))),O3e=t=>Nd(t,e=>C1(t,e,cu(t))),S3e=t=>Nd(t,e=>kt.cursor(t.lineBlockAt(e.head).from,1)),k3e=t=>Nd(t,e=>kt.cursor(t.lineBlockAt(e.head).to,-1));function C3e(t,e,n){let r=!1,i=K2(t.selection,s=>{let o=qp(t,s.head,-1)||qp(t,s.head,1)||s.head>0&&qp(t,s.head-1,1)||s.head<t.doc.length&&qp(t,s.head+1,-1);if(!o||!o.end)return s;r=!0;let a=o.start.from==s.head?o.end.to:o.end.from;return kt.cursor(a)});return r?(e(Bd(t,i)),!0):!1}const A3e=({state:t,dispatch:e})=>C3e(t,e);function Af(t,e){let n=K2(t.state.selection,r=>{let i=e(r);return kt.range(r.anchor,i.head,i.goalColumn,i.bidiLevel||void 0)});return n.eq(t.state.selection)?!1:(t.dispatch(Bd(t.state,n)),!0)}function _re(t,e){return Af(t,n=>t.moveByChar(n,e))}const xre=t=>_re(t,!cu(t)),wre=t=>_re(t,cu(t));function Ore(t,e){return Af(t,n=>t.moveByGroup(n,e))}const E3e=t=>Ore(t,!cu(t)),T3e=t=>Ore(t,cu(t)),P3e=t=>Af(t,e=>OD(t.state,e,!cu(t))),D3e=t=>Af(t,e=>OD(t.state,e,cu(t)));function Sre(t,e){return Af(t,n=>t.moveVertically(n,e))}const kre=t=>Sre(t,!1),Cre=t=>Sre(t,!0);function Are(t,e){return Af(t,n=>t.moveVertically(n,e,vre(t).height))}const DV=t=>Are(t,!1),IV=t=>Are(t,!0),I3e=t=>Af(t,e=>C1(t,e,!0)),M3e=t=>Af(t,e=>C1(t,e,!1)),R3e=t=>Af(t,e=>C1(t,e,!cu(t))),F3e=t=>Af(t,e=>C1(t,e,cu(t))),L3e=t=>Af(t,e=>kt.cursor(t.lineBlockAt(e.head).from)),$3e=t=>Af(t,e=>kt.cursor(t.lineBlockAt(e.head).to)),MV=({state:t,dispatch:e})=>(e(Bd(t,{anchor:0})),!0),RV=({state:t,dispatch:e})=>(e(Bd(t,{anchor:t.doc.length})),!0),FV=({state:t,dispatch:e})=>(e(Bd(t,{anchor:t.selection.main.anchor,head:0})),!0),LV=({state:t,dispatch:e})=>(e(Bd(t,{anchor:t.selection.main.anchor,head:t.doc.length})),!0),B3e=({state:t,dispatch:e})=>(e(t.update({selection:{anchor:0,head:t.doc.length},userEvent:"select"})),!0),N3e=({state:t,dispatch:e})=>{let n=SD(t).map(({from:r,to:i})=>kt.range(r,Math.min(i+1,t.doc.length)));return e(t.update({selection:kt.create(n),userEvent:"select"})),!0},z3e=({state:t,dispatch:e})=>{let n=K2(t.selection,r=>{let i=ws(t),s=i.resolveStack(r.from,1);if(r.empty){let o=i.resolveStack(r.from,-1);o.node.from>=s.node.from&&o.node.to<=s.node.to&&(s=o)}for(let o=s;o;o=o.next){let{node:a}=o;if((a.from<r.from&&a.to>=r.to||a.to>r.to&&a.from<=r.from)&&o.next)return kt.range(a.to,a.from)}return r});return n.eq(t.selection)?!1:(e(Bd(t,n)),!0)};function Ere(t,e){let{state:n}=t,r=n.selection,i=n.selection.ranges.slice();for(let s of n.selection.ranges){let o=n.doc.lineAt(s.head);if(e?o.to<t.state.doc.length:o.from>0)for(let a=s;;){let l=t.moveVertically(a,e);if(l.head<o.from||l.head>o.to){i.some(h=>h.head==l.head)||i.push(l);break}else{if(l.head==a.head)break;a=l}}}return i.length==r.ranges.length?!1:(t.dispatch(Bd(n,kt.create(i,i.length-1))),!0)}const Q3e=t=>Ere(t,!1),j3e=t=>Ere(t,!0),U3e=({state:t,dispatch:e})=>{let n=t.selection,r=null;return n.ranges.length>1?r=kt.create([n.main]):n.main.empty||(r=kt.create([kt.cursor(n.main.head)])),r?(e(Bd(t,r)),!0):!1};function zC(t,e){if(t.state.readOnly)return!1;let n="delete.selection",{state:r}=t,i=r.changeByRange(s=>{let{from:o,to:a}=s;if(o==a){let l=e(s);l<o?(n="delete.backward",l=c4(t,l,!1)):l>o&&(n="delete.forward",l=c4(t,l,!0)),o=Math.min(o,l),a=Math.max(a,l)}else o=c4(t,o,!1),a=c4(t,a,!0);return o==a?{range:s}:{changes:{from:o,to:a},range:kt.cursor(o,o<s.head?-1:1)}});return i.changes.empty?!1:(t.dispatch(r.update(i,{scrollIntoView:!0,userEvent:n,effects:n=="delete.selection"?Cn.announce.of(r.phrase("Selection deleted")):void 0})),!0)}function c4(t,e,n){if(t instanceof Cn)for(let r of t.state.facet(Cn.atomicRanges).map(i=>i(t)))r.between(e,e,(i,s)=>{i<e&&s>e&&(e=n?s:i)});return e}const Tre=(t,e,n)=>zC(t,r=>{let i=r.from,{state:s}=t,o=s.doc.lineAt(i),a,l;if(n&&!e&&i>o.from&&i<o.from+200&&!/[^ \t]/.test(a=o.text.slice(0,i-o.from))){if(a[a.length-1]=="	")return i-1;let h=Ad(a,s.tabSize),f=h%u6(s)||u6(s);for(let p=0;p<f&&a[a.length-1-p]==" ";p++)i--;l=i}else l=bl(o.text,i-o.from,e,e)+o.from,l==i&&o.number!=(e?s.doc.lines:1)?l+=e?1:-1:!e&&/[\ufe00-\ufe0f]/.test(o.text.slice(l-o.from,i-o.from))&&(l=bl(o.text,l-o.from,!1,!1)+o.from);return l}),o9=t=>Tre(t,!1,!0),Pre=t=>Tre(t,!0,!1),Dre=(t,e)=>zC(t,n=>{let r=n.head,{state:i}=t,s=i.doc.lineAt(r),o=i.charCategorizer(r);for(let a=null;;){if(r==(e?s.to:s.from)){r==n.head&&s.number!=(e?i.doc.lines:1)&&(r+=e?1:-1);break}let l=bl(s.text,r-s.from,e)+s.from,h=s.text.slice(Math.min(r,l)-s.from,Math.max(r,l)-s.from),f=o(h);if(a!=null&&f!=a)break;(h!=" "||r!=n.head)&&(a=f),r=l}return r}),Ire=t=>Dre(t,!1),V3e=t=>Dre(t,!0),q3e=t=>zC(t,e=>{let n=t.lineBlockAt(e.head).to;return e.head<n?n:Math.min(t.state.doc.length,e.head+1)}),Z3e=t=>zC(t,e=>{let n=t.moveToLineBoundary(e,!1).head;return e.head>n?n:Math.max(0,e.head-1)}),X3e=t=>zC(t,e=>{let n=t.moveToLineBoundary(e,!0).head;return e.head<n?n:Math.min(t.state.doc.length,e.head+1)}),W3e=({state:t,dispatch:e})=>{if(t.readOnly)return!1;let n=t.changeByRange(r=>({changes:{from:r.from,to:r.to,insert:ts.of(["",""])},range:kt.cursor(r.from)}));return e(t.update(n,{scrollIntoView:!0,userEvent:"input"})),!0},G3e=({state:t,dispatch:e})=>{if(t.readOnly)return!1;let n=t.changeByRange(r=>{if(!r.empty||r.from==0||r.from==t.doc.length)return{range:r};let i=r.from,s=t.doc.lineAt(i),o=i==s.from?i-1:bl(s.text,i-s.from,!1)+s.from,a=i==s.to?i+1:bl(s.text,i-s.from,!0)+s.from;return{changes:{from:o,to:a,insert:t.doc.slice(i,a).append(t.doc.slice(o,i))},range:kt.cursor(a)}});return n.changes.empty?!1:(e(t.update(n,{scrollIntoView:!0,userEvent:"move.character"})),!0)};function SD(t){let e=[],n=-1;for(let r of t.selection.ranges){let i=t.doc.lineAt(r.from),s=t.doc.lineAt(r.to);if(!r.empty&&r.to==s.from&&(s=t.doc.lineAt(r.to-1)),n>=i.number){let o=e[e.length-1];o.to=s.to,o.ranges.push(r)}else e.push({from:i.from,to:s.to,ranges:[r]});n=s.number+1}return e}function Mre(t,e,n){if(t.readOnly)return!1;let r=[],i=[];for(let s of SD(t)){if(n?s.to==t.doc.length:s.from==0)continue;let o=t.doc.lineAt(n?s.to+1:s.from-1),a=o.length+1;if(n){r.push({from:s.to,to:o.to},{from:s.from,insert:o.text+t.lineBreak});for(let l of s.ranges)i.push(kt.range(Math.min(t.doc.length,l.anchor+a),Math.min(t.doc.length,l.head+a)))}else{r.push({from:o.from,to:s.from},{from:s.to,insert:t.lineBreak+o.text});for(let l of s.ranges)i.push(kt.range(l.anchor-a,l.head-a))}}return r.length?(e(t.update({changes:r,scrollIntoView:!0,selection:kt.create(i,t.selection.mainIndex),userEvent:"move.line"})),!0):!1}const Y3e=({state:t,dispatch:e})=>Mre(t,e,!1),H3e=({state:t,dispatch:e})=>Mre(t,e,!0);function Rre(t,e,n){if(t.readOnly)return!1;let r=[];for(let i of SD(t))n?r.push({from:i.from,insert:t.doc.slice(i.from,i.to)+t.lineBreak}):r.push({from:i.to,insert:t.lineBreak+t.doc.slice(i.from,i.to)});return e(t.update({changes:r,scrollIntoView:!0,userEvent:"input.copyline"})),!0}const K3e=({state:t,dispatch:e})=>Rre(t,e,!1),J3e=({state:t,dispatch:e})=>Rre(t,e,!0),eke=t=>{if(t.state.readOnly)return!1;let{state:e}=t,n=e.changes(SD(e).map(({from:i,to:s})=>(i>0?i--:s<e.doc.length&&s++,{from:i,to:s}))),r=K2(e.selection,i=>{let s;if(t.lineWrapping){let o=t.lineBlockAt(i.head),a=t.coordsAtPos(i.head,i.assoc||1);a&&(s=o.bottom+t.documentTop-a.bottom+t.defaultLineHeight/2)}return t.moveVertically(i,!0,s)}).map(n);return t.dispatch({changes:n,selection:r,scrollIntoView:!0,userEvent:"delete.line"}),!0};function tke(t,e){if(/\(\)|\[\]|\{\}/.test(t.sliceDoc(e-1,e+1)))return{from:e,to:e};let n=ws(t).resolveInner(e),r=n.childBefore(e),i=n.childAfter(e),s;return r&&i&&r.to<=e&&i.from>=e&&(s=r.type.prop(Dr.closedBy))&&s.indexOf(i.name)>-1&&t.doc.lineAt(r.to).from==t.doc.lineAt(i.from).from&&!/\S/.test(t.sliceDoc(r.to,i.from))?{from:r.to,to:i.from}:null}const $V=Fre(!1),nke=Fre(!0);function Fre(t){return({state:e,dispatch:n})=>{if(e.readOnly)return!1;let r=e.changeByRange(i=>{let{from:s,to:o}=i,a=e.doc.lineAt(s),l=!t&&s==o&&tke(e,s);t&&(s=o=(o<=a.to?a:e.doc.lineAt(o)).to);let h=new vD(e,{simulateBreak:s,simulateDoubleBreak:!!l}),f=WB(h,s);for(f==null&&(f=Ad(/^\s*/.exec(e.doc.lineAt(s).text)[0],e.tabSize));o<a.to&&/\s/.test(a.text[o-a.from]);)o++;l?{from:s,to:o}=l:s>a.from&&s<a.from+100&&!/\S/.test(a.text.slice(0,s))&&(s=a.from);let p=["",Pk(e,f)];return l&&p.push(Pk(e,h.lineIndent(a.from,-1))),{changes:{from:s,to:o,insert:ts.of(p)},range:kt.cursor(s+1+p[1].length)}});return n(e.update(r,{scrollIntoView:!0,userEvent:"input"})),!0}}function aN(t,e){let n=-1;return t.changeByRange(r=>{let i=[];for(let o=r.from;o<=r.to;){let a=t.doc.lineAt(o);a.number>n&&(r.empty||r.to>a.from)&&(e(a,i,r),n=a.number),o=a.to+1}let s=t.changes(i);return{changes:i,range:kt.range(s.mapPos(r.anchor,1),s.mapPos(r.head,1))}})}const rke=({state:t,dispatch:e})=>{if(t.readOnly)return!1;let n=Object.create(null),r=new vD(t,{overrideIndentation:s=>{let o=n[s];return o??-1}}),i=aN(t,(s,o,a)=>{let l=WB(r,s.from);if(l==null)return;/\S/.test(s.text)||(l=0);let h=/^\s*/.exec(s.text)[0],f=Pk(t,l);(h!=f||a.from<s.from+h.length)&&(n[s.from]=l,o.push({from:s.from,to:s.from+h.length,insert:f}))});return i.changes.empty||e(t.update(i,{userEvent:"indent"})),!0},Lre=({state:t,dispatch:e})=>t.readOnly?!1:(e(t.update(aN(t,(n,r)=>{r.push({from:n.from,insert:t.facet($C)})}),{userEvent:"input.indent"})),!0),$re=({state:t,dispatch:e})=>t.readOnly?!1:(e(t.update(aN(t,(n,r)=>{let i=/^\s*/.exec(n.text)[0];if(!i)return;let s=Ad(i,t.tabSize),o=0,a=Pk(t,Math.max(0,s-u6(t)));for(;o<i.length&&o<a.length&&i.charCodeAt(o)==a.charCodeAt(o);)o++;r.push({from:n.from+o,to:n.from+i.length,insert:a.slice(o)})}),{userEvent:"delete.dedent"})),!0),ike=t=>(t.setTabFocusMode(),!0),ske=({state:t,dispatch:e})=>t.selection.ranges.some(n=>!n.empty)?Lre({state:t,dispatch:e}):(e(t.update(t.replaceSelection("	"),{scrollIntoView:!0,userEvent:"input"})),!0),oke=[{key:"Ctrl-b",run:fre,shift:xre,preventDefault:!0},{key:"Ctrl-f",run:dre,shift:wre},{key:"Ctrl-p",run:gre,shift:kre},{key:"Ctrl-n",run:yre,shift:Cre},{key:"Ctrl-a",run:S3e,shift:L3e},{key:"Ctrl-e",run:k3e,shift:$3e},{key:"Ctrl-d",run:Pre},{key:"Ctrl-h",run:o9},{key:"Ctrl-k",run:q3e},{key:"Ctrl-Alt-h",run:Ire},{key:"Ctrl-o",run:W3e},{key:"Ctrl-t",run:G3e},{key:"Ctrl-v",run:s9}],ake=[{key:"ArrowLeft",run:fre,shift:xre,preventDefault:!0},{key:"Mod-ArrowLeft",mac:"Alt-ArrowLeft",run:m3e,shift:E3e,preventDefault:!0},{mac:"Cmd-ArrowLeft",run:w3e,shift:R3e,preventDefault:!0},{key:"ArrowRight",run:dre,shift:wre,preventDefault:!0},{key:"Mod-ArrowRight",mac:"Alt-ArrowRight",run:g3e,shift:T3e,preventDefault:!0},{mac:"Cmd-ArrowRight",run:O3e,shift:F3e,preventDefault:!0},{key:"ArrowUp",run:gre,shift:kre,preventDefault:!0},{mac:"Cmd-ArrowUp",run:MV,shift:FV},{mac:"Ctrl-ArrowUp",run:PV,shift:DV},{key:"ArrowDown",run:yre,shift:Cre,preventDefault:!0},{mac:"Cmd-ArrowDown",run:RV,shift:LV},{mac:"Ctrl-ArrowDown",run:s9,shift:IV},{key:"PageUp",run:PV,shift:DV},{key:"PageDown",run:s9,shift:IV},{key:"Home",run:x3e,shift:M3e,preventDefault:!0},{key:"Mod-Home",run:MV,shift:FV},{key:"End",run:_3e,shift:I3e,preventDefault:!0},{key:"Mod-End",run:RV,shift:LV},{key:"Enter",run:$V,shift:$V},{key:"Mod-a",run:B3e},{key:"Backspace",run:o9,shift:o9,preventDefault:!0},{key:"Delete",run:Pre,preventDefault:!0},{key:"Mod-Backspace",mac:"Alt-Backspace",run:Ire,preventDefault:!0},{key:"Mod-Delete",mac:"Alt-Delete",run:V3e,preventDefault:!0},{mac:"Mod-Backspace",run:Z3e,preventDefault:!0},{mac:"Mod-Delete",run:X3e,preventDefault:!0}].concat(oke.map(t=>({mac:t.key,run:t.run,shift:t.shift}))),lke=[{key:"Alt-ArrowLeft",mac:"Ctrl-ArrowLeft",run:v3e,shift:P3e},{key:"Alt-ArrowRight",mac:"Ctrl-ArrowRight",run:b3e,shift:D3e},{key:"Alt-ArrowUp",run:Y3e},{key:"Shift-Alt-ArrowUp",run:K3e},{key:"Alt-ArrowDown",run:H3e},{key:"Shift-Alt-ArrowDown",run:J3e},{key:"Mod-Alt-ArrowUp",run:Q3e},{key:"Mod-Alt-ArrowDown",run:j3e},{key:"Escape",run:U3e},{key:"Mod-Enter",run:nke},{key:"Alt-l",mac:"Ctrl-l",run:N3e},{key:"Mod-i",run:z3e,preventDefault:!0},{key:"Mod-[",run:$re},{key:"Mod-]",run:Lre},{key:"Mod-Alt-\\",run:rke},{key:"Shift-Mod-k",run:eke},{key:"Shift-Mod-\\",run:A3e},{key:"Mod-/",run:YSe},{key:"Alt-A",run:KSe},{key:"Ctrl-m",mac:"Shift-Alt-m",run:ike}].concat(ake);class BV{constructor(e,n,r){this.from=e,this.to=n,this.diagnostic=r}}class Uv{constructor(e,n,r){this.diagnostics=e,this.panel=n,this.selected=r}static init(e,n,r){let i=r.facet(Xp).markerFilter;i&&(e=i(e,r));let s=e.slice().sort((b,x)=>b.from-x.from||b.to-x.to),o=new h1,a=[],l=0,h=r.doc.iter(),f=0,p=r.doc.length;for(let b=0;;){let x=b==s.length?null:s[b];if(!x&&!a.length)break;let k,T;if(a.length)k=l,T=a.reduce((B,j)=>Math.min(B,j.to),x&&x.from>k?x.from:1e8);else{if(k=x.from,k>p)break;T=x.to,a.push(x),b++}for(;b<s.length;){let B=s[b];if(B.from==k&&(B.to>B.from||B.to==k))a.push(B),b++,T=Math.min(B.to,T);else{T=Math.min(B.from,T);break}}T=Math.min(T,p);let I=!1;if(a.some(B=>B.from==k&&(B.to==T||T==p))&&(I=k==T,!I&&T-k<10)){let B=k-(f+h.value.length);B>0&&(h.next(B),f=k);for(let j=k;;){if(j>=T){I=!0;break}if(!h.lineBreak&&f+h.value.length>j)break;j=f+h.value.length,f+=h.value.length,h.next()}}let M=Oke(a);if(I)o.add(k,k,Sr.widget({widget:new bke(M),diagnostics:a.slice()}));else{let B=a.reduce((j,Q)=>Q.markClass?j+" "+Q.markClass:j,"");o.add(k,T,Sr.mark({class:"cm-lintRange cm-lintRange-"+M+B,diagnostics:a.slice(),inclusiveEnd:a.some(j=>j.to>T)}))}if(l=T,l==p)break;for(let B=0;B<a.length;B++)a[B].to<=l&&a.splice(B--,1)}let g=o.finish();return new Uv(g,n,h2(g))}}function h2(t,e=null,n=0){let r=null;return t.between(n,1e9,(i,s,{spec:o})=>{if(!(e&&o.diagnostics.indexOf(e)<0))if(!r)r=new BV(i,s,e||o.diagnostics[0]);else{if(o.diagnostics.indexOf(r.diagnostic)<0)return!1;r=new BV(r.from,s,r.diagnostic)}}),r}function uke(t,e){let n=e.pos,r=e.end||n,i=t.state.facet(Xp).hideOn(t,n,r);if(i!=null)return i;let s=t.startState.doc.lineAt(e.pos);return!!(t.effects.some(o=>o.is(lN))||t.changes.touchesRange(s.from,Math.max(s.to,r)))}function Bre(t,e){return t.field(ph,!1)?e:e.concat(Yr.appendConfig.of(jre))}function cke(t,e){return{effects:Bre(t,[lN.of(e)])}}const lN=Yr.define(),uN=Yr.define(),Nre=Yr.define(),ph=Aa.define({create(){return new Uv(Sr.none,null,null)},update(t,e){if(e.docChanged&&t.diagnostics.size){let n=t.diagnostics.map(e.changes),r=null,i=t.panel;if(t.selected){let s=e.changes.mapPos(t.selected.from,1);r=h2(n,t.selected.diagnostic,s)||h2(n,null,s)}!n.size&&i&&e.state.facet(Xp).autoPanel&&(i=null),t=new Uv(n,i,r)}for(let n of e.effects)if(n.is(lN)){let r=e.state.facet(Xp).autoPanel?n.value.length?Rk.open:null:t.panel;t=Uv.init(n.value,r,e.state)}else n.is(uN)?t=new Uv(t.diagnostics,n.value?Rk.open:null,t.selected):n.is(Nre)&&(t=new Uv(t.diagnostics,t.panel,n.value));return t},provide:t=>[kk.from(t,e=>e.panel),Cn.decorations.from(t,e=>e.diagnostics)]}),hke=Sr.mark({class:"cm-lintRange cm-lintRange-active"});function fke(t,e,n){let{diagnostics:r}=t.state.field(ph),i,s=-1,o=-1;r.between(e-(n<0?1:0),e+(n>0?1:0),(l,h,{spec:f})=>{if(e>=l&&e<=h&&(l==h||(e>l||n>0)&&(e<h||n<0)))return i=f.diagnostics,s=l,o=h,!1});let a=t.state.facet(Xp).tooltipFilter;return i&&a&&(i=a(i,t.state)),i?{pos:s,end:o,above:t.state.doc.lineAt(s).to<o,create(){return{dom:dke(t,i)}}}:null}function dke(t,e){return Xs("ul",{class:"cm-tooltip-lint"},e.map(n=>Qre(t,n,!1)))}const pke=t=>{let e=t.state.field(ph,!1);(!e||!e.panel)&&t.dispatch({effects:Bre(t.state,[uN.of(!0)])});let n=Sk(t,Rk.open);return n&&n.dom.querySelector(".cm-panel-lint ul").focus(),!0},NV=t=>{let e=t.state.field(ph,!1);return!e||!e.panel?!1:(t.dispatch({effects:uN.of(!1)}),!0)},mke=t=>{let e=t.state.field(ph,!1);if(!e)return!1;let n=t.state.selection.main,r=e.diagnostics.iter(n.to+1);return!r.value&&(r=e.diagnostics.iter(0),!r.value||r.from==n.from&&r.to==n.to)?!1:(t.dispatch({selection:{anchor:r.from,head:r.to},scrollIntoView:!0}),!0)},gke=[{key:"Mod-Shift-m",run:pke,preventDefault:!0},{key:"F8",run:mke}],yke=Ca.fromClass(class{constructor(t){this.view=t,this.timeout=-1,this.set=!0;let{delay:e}=t.state.facet(Xp);this.lintTime=Date.now()+e,this.run=this.run.bind(this),this.timeout=setTimeout(this.run,e)}run(){clearTimeout(this.timeout);let t=Date.now();if(t<this.lintTime-10)this.timeout=setTimeout(this.run,this.lintTime-t);else{this.set=!1;let{state:e}=this.view,{sources:n}=e.facet(Xp);n.length&&vke(n.map(r=>Promise.resolve(r(this.view))),r=>{this.view.state.doc==e.doc&&this.view.dispatch(cke(this.view.state,r.reduce((i,s)=>i.concat(s))))},r=>{Mu(this.view.state,r)})}}update(t){let e=t.state.facet(Xp);(t.docChanged||e!=t.startState.facet(Xp)||e.needsRefresh&&e.needsRefresh(t))&&(this.lintTime=Date.now()+e.delay,this.set||(this.set=!0,this.timeout=setTimeout(this.run,e.delay)))}force(){this.set&&(this.lintTime=Date.now(),this.run())}destroy(){clearTimeout(this.timeout)}});function vke(t,e,n){let r=[],i=-1;for(let s of t)s.then(o=>{r.push(o),clearTimeout(i),r.length==t.length?e(r):i=setTimeout(()=>e(r),200)},n)}const Xp=Rn.define({combine(t){return{sources:t.map(e=>e.source).filter(e=>e!=null),...x0(t.map(e=>e.config),{delay:750,markerFilter:null,tooltipFilter:null,needsRefresh:null,hideOn:()=>null},{delay:Math.max,markerFilter:zV,tooltipFilter:zV,needsRefresh:(e,n)=>e?n?r=>e(r)||n(r):e:n,hideOn:(e,n)=>e?n?(r,i,s)=>e(r,i,s)||n(r,i,s):e:n,autoPanel:(e,n)=>e||n})}}});function zV(t,e){return t?e?(n,r)=>e(t(n,r),r):t:e}function d6(t,e={}){return[Xp.of({source:t,config:e}),yke,jre]}function zre(t){let e=[];if(t)e:for(let{name:n}of t){for(let r=0;r<n.length;r++){let i=n[r];if(/[a-zA-Z]/.test(i)&&!e.some(s=>s.toLowerCase()==i.toLowerCase())){e.push(i);continue e}}e.push("")}return e}function Qre(t,e,n){var r;let i=n?zre(e.actions):[];return Xs("li",{class:"cm-diagnostic cm-diagnostic-"+e.severity},Xs("span",{class:"cm-diagnosticText"},e.renderMessage?e.renderMessage(t):e.message),(r=e.actions)===null||r===void 0?void 0:r.map((s,o)=>{let a=!1,l=b=>{if(b.preventDefault(),a)return;a=!0;let x=h2(t.state.field(ph).diagnostics,e);x&&s.apply(t,x.from,x.to)},{name:h}=s,f=i[o]?h.indexOf(i[o]):-1,p=f<0?h:[h.slice(0,f),Xs("u",h.slice(f,f+1)),h.slice(f+1)],g=s.markClass?" "+s.markClass:"";return Xs("button",{type:"button",class:"cm-diagnosticAction"+g,onclick:l,onmousedown:l,"aria-label":` Action: ${h}${f<0?"":` (access key "${i[o]})"`}.`},p)}),e.source&&Xs("div",{class:"cm-diagnosticSource"},e.source))}class bke extends a_{constructor(e){super(),this.sev=e}eq(e){return e.sev==this.sev}toDOM(){return Xs("span",{class:"cm-lintPoint cm-lintPoint-"+this.sev})}}class QV{constructor(e,n){this.diagnostic=n,this.id="item_"+Math.floor(Math.random()*4294967295).toString(16),this.dom=Qre(e,n,!0),this.dom.id=this.id,this.dom.setAttribute("role","option")}}class Rk{constructor(e){this.view=e,this.items=[];let n=i=>{if(i.keyCode==27)NV(this.view),this.view.focus();else if(i.keyCode==38||i.keyCode==33)this.moveSelection((this.selectedIndex-1+this.items.length)%this.items.length);else if(i.keyCode==40||i.keyCode==34)this.moveSelection((this.selectedIndex+1)%this.items.length);else if(i.keyCode==36)this.moveSelection(0);else if(i.keyCode==35)this.moveSelection(this.items.length-1);else if(i.keyCode==13)this.view.focus();else if(i.keyCode>=65&&i.keyCode<=90&&this.selectedIndex>=0){let{diagnostic:s}=this.items[this.selectedIndex],o=zre(s.actions);for(let a=0;a<o.length;a++)if(o[a].toUpperCase().charCodeAt(0)==i.keyCode){let l=h2(this.view.state.field(ph).diagnostics,s);l&&s.actions[a].apply(e,l.from,l.to)}}else return;i.preventDefault()},r=i=>{for(let s=0;s<this.items.length;s++)this.items[s].dom.contains(i.target)&&this.moveSelection(s)};this.list=Xs("ul",{tabIndex:0,role:"listbox","aria-label":this.view.state.phrase("Diagnostics"),onkeydown:n,onclick:r}),this.dom=Xs("div",{class:"cm-panel-lint"},this.list,Xs("button",{type:"button",name:"close","aria-label":this.view.state.phrase("close"),onclick:()=>NV(this.view)},"Ã")),this.update()}get selectedIndex(){let e=this.view.state.field(ph).selected;if(!e)return-1;for(let n=0;n<this.items.length;n++)if(this.items[n].diagnostic==e.diagnostic)return n;return-1}update(){let{diagnostics:e,selected:n}=this.view.state.field(ph),r=0,i=!1,s=null,o=new Set;for(e.between(0,this.view.state.doc.length,(a,l,{spec:h})=>{for(let f of h.diagnostics){if(o.has(f))continue;o.add(f);let p=-1,g;for(let b=r;b<this.items.length;b++)if(this.items[b].diagnostic==f){p=b;break}p<0?(g=new QV(this.view,f),this.items.splice(r,0,g),i=!0):(g=this.items[p],p>r&&(this.items.splice(r,p-r),i=!0)),n&&g.diagnostic==n.diagnostic?g.dom.hasAttribute("aria-selected")||(g.dom.setAttribute("aria-selected","true"),s=g):g.dom.hasAttribute("aria-selected")&&g.dom.removeAttribute("aria-selected"),r++}});r<this.items.length&&!(this.items.length==1&&this.items[0].diagnostic.from<0);)i=!0,this.items.pop();this.items.length==0&&(this.items.push(new QV(this.view,{from:-1,to:-1,severity:"info",message:this.view.state.phrase("No diagnostics")})),i=!0),s?(this.list.setAttribute("aria-activedescendant",s.id),this.view.requestMeasure({key:this,read:()=>({sel:s.dom.getBoundingClientRect(),panel:this.list.getBoundingClientRect()}),write:({sel:a,panel:l})=>{let h=l.height/this.list.offsetHeight;a.top<l.top?this.list.scrollTop-=(l.top-a.top)/h:a.bottom>l.bottom&&(this.list.scrollTop+=(a.bottom-l.bottom)/h)}})):this.selectedIndex<0&&this.list.removeAttribute("aria-activedescendant"),i&&this.sync()}sync(){let e=this.list.firstChild;function n(){let r=e;e=r.nextSibling,r.remove()}for(let r of this.items)if(r.dom.parentNode==this.list){for(;e!=r.dom;)n();e=r.dom.nextSibling}else this.list.insertBefore(r.dom,e);for(;e;)n()}moveSelection(e){if(this.selectedIndex<0)return;let n=this.view.state.field(ph),r=h2(n.diagnostics,this.items[e].diagnostic);r&&this.view.dispatch({selection:{anchor:r.from,head:r.to},scrollIntoView:!0,effects:Nre.of(r)})}static open(e){return new Rk(e)}}function _ke(t,e='viewBox="0 0 40 40"'){return`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" ${e}>${encodeURIComponent(t)}</svg>')`}function h4(t){return _ke(`<path d="m0 2.5 l2 -1.5 l1 0 l2 1.5 l1 0" stroke="${t}" fill="none" stroke-width=".7"/>`,'width="6" height="3"')}const xke=Cn.baseTheme({".cm-diagnostic":{padding:"3px 6px 3px 8px",marginLeft:"-1px",display:"block",whiteSpace:"pre-wrap"},".cm-diagnostic-error":{borderLeft:"5px solid #d11"},".cm-diagnostic-warning":{borderLeft:"5px solid orange"},".cm-diagnostic-info":{borderLeft:"5px solid #999"},".cm-diagnostic-hint":{borderLeft:"5px solid #66d"},".cm-diagnosticAction":{font:"inherit",border:"none",padding:"2px 4px",backgroundColor:"#444",color:"white",borderRadius:"3px",marginLeft:"8px",cursor:"pointer"},".cm-diagnosticSource":{fontSize:"70%",opacity:.7},".cm-lintRange":{backgroundPosition:"left bottom",backgroundRepeat:"repeat-x",paddingBottom:"0.7px"},".cm-lintRange-error":{backgroundImage:h4("#d11")},".cm-lintRange-warning":{backgroundImage:h4("orange")},".cm-lintRange-info":{backgroundImage:h4("#999")},".cm-lintRange-hint":{backgroundImage:h4("#66d")},".cm-lintRange-active":{backgroundColor:"#ffdd9980"},".cm-tooltip-lint":{padding:0,margin:0},".cm-lintPoint":{position:"relative","&:after":{content:'""',position:"absolute",bottom:0,left:"-2px",borderLeft:"3px solid transparent",borderRight:"3px solid transparent",borderBottom:"4px solid #d11"}},".cm-lintPoint-warning":{"&:after":{borderBottomColor:"orange"}},".cm-lintPoint-info":{"&:after":{borderBottomColor:"#999"}},".cm-lintPoint-hint":{"&:after":{borderBottomColor:"#66d"}},".cm-panel.cm-panel-lint":{position:"relative","& ul":{maxHeight:"100px",overflowY:"auto","& [aria-selected]":{backgroundColor:"#ddd","& u":{textDecoration:"underline"}},"&:focus [aria-selected]":{background_fallback:"#bdf",backgroundColor:"Highlight",color_fallback:"white",color:"HighlightText"},"& u":{textDecoration:"none"},padding:0,margin:0},"& [name=close]":{position:"absolute",top:"0",right:"2px",background:"inherit",border:"none",font:"inherit",padding:0,margin:0}}});function wke(t){return t=="error"?4:t=="warning"?3:t=="info"?2:1}function Oke(t){let e="hint",n=1;for(let r of t){let i=wke(r.severity);i>n&&(n=i,e=r.severity)}return e}const jre=[ph,Cn.decorations.compute([ph],t=>{let{selected:e,panel:n}=t.field(ph);return!e||!n||e.from==e.to?Sr.none:Sr.set([hke.range(e.from,e.to)])}),QB(fke,{hideOn:uke}),xke],jV=typeof String.prototype.normalize=="function"?t=>t.normalize("NFKD"):t=>t;class f2{constructor(e,n,r=0,i=e.length,s,o){this.test=o,this.value={from:0,to:0},this.done=!1,this.matches=[],this.buffer="",this.bufferPos=0,this.iter=e.iterRange(r,i),this.bufferStart=r,this.normalize=s?a=>s(jV(a)):jV,this.query=this.normalize(n)}peek(){if(this.bufferPos==this.buffer.length){if(this.bufferStart+=this.buffer.length,this.iter.next(),this.iter.done)return-1;this.bufferPos=0,this.buffer=this.iter.value}return hc(this.buffer,this.bufferPos)}next(){for(;this.matches.length;)this.matches.pop();return this.nextOverlapping()}nextOverlapping(){for(;;){let e=this.peek();if(e<0)return this.done=!0,this;let n=CB(e),r=this.bufferStart+this.bufferPos;this.bufferPos+=$p(e);let i=this.normalize(n);if(i.length)for(let s=0,o=r;;s++){let a=i.charCodeAt(s),l=this.match(a,o,this.bufferPos+this.bufferStart);if(s==i.length-1){if(l)return this.value=l,this;break}o==r&&s<n.length&&n.charCodeAt(s)==a&&o++}}}match(e,n,r){let i=null;for(let s=0;s<this.matches.length;s+=2){let o=this.matches[s],a=!1;this.query.charCodeAt(o)==e&&(o==this.query.length-1?i={from:this.matches[s+1],to:r}:(this.matches[s]++,a=!0)),a||(this.matches.splice(s,2),s-=2)}return this.query.charCodeAt(0)==e&&(this.query.length==1?i={from:n,to:r}:this.matches.push(1,n)),i&&this.test&&!this.test(i.from,i.to,this.buffer,this.bufferStart)&&(i=null),i}}typeof Symbol<"u"&&(f2.prototype[Symbol.iterator]=function(){return this});const Ure={from:-1,to:-1,match:/.*/.exec("")},cN="gm"+(/x/.unicode==null?"":"u");class Vre{constructor(e,n,r,i=0,s=e.length){if(this.text=e,this.to=s,this.curLine="",this.done=!1,this.value=Ure,/\\[sWDnr]|\n|\r|\[\^/.test(n))return new qre(e,n,r,i,s);this.re=new RegExp(n,cN+(r?.ignoreCase?"i":"")),this.test=r?.test,this.iter=e.iter();let o=e.lineAt(i);this.curLineStart=o.from,this.matchPos=p6(e,i),this.getLine(this.curLineStart)}getLine(e){this.iter.next(e),this.iter.lineBreak?this.curLine="":(this.curLine=this.iter.value,this.curLineStart+this.curLine.length>this.to&&(this.curLine=this.curLine.slice(0,this.to-this.curLineStart)),this.iter.next())}nextLine(){this.curLineStart=this.curLineStart+this.curLine.length+1,this.curLineStart>this.to?this.curLine="":this.getLine(0)}next(){for(let e=this.matchPos-this.curLineStart;;){this.re.lastIndex=e;let n=this.matchPos<=this.to&&this.re.exec(this.curLine);if(n){let r=this.curLineStart+n.index,i=r+n[0].length;if(this.matchPos=p6(this.text,i+(r==i?1:0)),r==this.curLineStart+this.curLine.length&&this.nextLine(),(r<i||r>this.value.to)&&(!this.test||this.test(r,i,n)))return this.value={from:r,to:i,match:n},this;e=this.matchPos-this.curLineStart}else if(this.curLineStart+this.curLine.length<this.to)this.nextLine(),e=0;else return this.done=!0,this}}}const BM=new WeakMap;class ww{constructor(e,n){this.from=e,this.text=n}get to(){return this.from+this.text.length}static get(e,n,r){let i=BM.get(e);if(!i||i.from>=r||i.to<=n){let a=new ww(n,e.sliceString(n,r));return BM.set(e,a),a}if(i.from==n&&i.to==r)return i;let{text:s,from:o}=i;return o>n&&(s=e.sliceString(n,o)+s,o=n),i.to<r&&(s+=e.sliceString(i.to,r)),BM.set(e,new ww(o,s)),new ww(n,s.slice(n-o,r-o))}}class qre{constructor(e,n,r,i,s){this.text=e,this.to=s,this.done=!1,this.value=Ure,this.matchPos=p6(e,i),this.re=new RegExp(n,cN+(r?.ignoreCase?"i":"")),this.test=r?.test,this.flat=ww.get(e,i,this.chunkEnd(i+5e3))}chunkEnd(e){return e>=this.to?this.to:this.text.lineAt(e).to}next(){for(;;){let e=this.re.lastIndex=this.matchPos-this.flat.from,n=this.re.exec(this.flat.text);if(n&&!n[0]&&n.index==e&&(this.re.lastIndex=e+1,n=this.re.exec(this.flat.text)),n){let r=this.flat.from+n.index,i=r+n[0].length;if((this.flat.to>=this.to||n.index+n[0].length<=this.flat.text.length-10)&&(!this.test||this.test(r,i,n)))return this.value={from:r,to:i,match:n},this.matchPos=p6(this.text,i+(r==i?1:0)),this}if(this.flat.to==this.to)return this.done=!0,this;this.flat=ww.get(this.text,this.flat.from,this.chunkEnd(this.flat.from+this.flat.text.length*2))}}}typeof Symbol<"u"&&(Vre.prototype[Symbol.iterator]=qre.prototype[Symbol.iterator]=function(){return this});function Ske(t){try{return new RegExp(t,cN),!0}catch{return!1}}function p6(t,e){if(e>=t.length)return e;let n=t.lineAt(e),r;for(;e<n.to&&(r=n.text.charCodeAt(e-n.from))>=56320&&r<57344;)e++;return e}function a9(t){let e=String(t.state.doc.lineAt(t.state.selection.main.head).number),n=Xs("input",{class:"cm-textfield",name:"line",value:e}),r=Xs("form",{class:"cm-gotoLine",onkeydown:s=>{s.keyCode==27?(s.preventDefault(),t.dispatch({effects:j3.of(!1)}),t.focus()):s.keyCode==13&&(s.preventDefault(),i())},onsubmit:s=>{s.preventDefault(),i()}},Xs("label",t.state.phrase("Go to line"),": ",n)," ",Xs("button",{class:"cm-button",type:"submit"},t.state.phrase("go")),Xs("button",{name:"close",onclick:()=>{t.dispatch({effects:j3.of(!1)}),t.focus()},"aria-label":t.state.phrase("close"),type:"button"},["Ã"]));function i(){let s=/^([+-])?(\d+)?(:\d+)?(%)?$/.exec(n.value);if(!s)return;let{state:o}=t,a=o.doc.lineAt(o.selection.main.head),[,l,h,f,p]=s,g=f?+f.slice(1):0,b=h?+h:a.number;if(h&&p){let T=b/100;l&&(T=T*(l=="-"?-1:1)+a.number/o.doc.lines),b=Math.round(o.doc.lines*T)}else h&&l&&(b=b*(l=="-"?-1:1)+a.number);let x=o.doc.line(Math.max(1,Math.min(o.doc.lines,b))),k=kt.cursor(x.from+Math.max(0,Math.min(g,x.length)));t.dispatch({effects:[j3.of(!1),Cn.scrollIntoView(k.from,{y:"center"})],selection:k}),t.focus()}return{dom:r}}const j3=Yr.define(),UV=Aa.define({create(){return!0},update(t,e){for(let n of e.effects)n.is(j3)&&(t=n.value);return t},provide:t=>kk.from(t,e=>e?a9:null)}),kke=t=>{let e=Sk(t,a9);if(!e){let n=[j3.of(!0)];t.state.field(UV,!1)==null&&n.push(Yr.appendConfig.of([UV,Cke])),t.dispatch({effects:n}),e=Sk(t,a9)}return e&&e.dom.querySelector("input").select(),!0},Cke=Cn.baseTheme({".cm-panel.cm-gotoLine":{padding:"2px 6px 4px",position:"relative","& label":{fontSize:"80%"},"& [name=close]":{position:"absolute",top:"0",bottom:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:"0"}}}),Ake={highlightWordAroundCursor:!1,minSelectionLength:1,maxMatches:100,wholeWords:!1},Eke=Rn.define({combine(t){return x0(t,Ake,{highlightWordAroundCursor:(e,n)=>e||n,minSelectionLength:Math.min,maxMatches:Math.min})}});function Tke(t){return[Rke,Mke]}const Pke=Sr.mark({class:"cm-selectionMatch"}),Dke=Sr.mark({class:"cm-selectionMatch cm-selectionMatch-main"});function VV(t,e,n,r){return(n==0||t(e.sliceDoc(n-1,n))!=So.Word)&&(r==e.doc.length||t(e.sliceDoc(r,r+1))!=So.Word)}function Ike(t,e,n,r){return t(e.sliceDoc(n,n+1))==So.Word&&t(e.sliceDoc(r-1,r))==So.Word}const Mke=Ca.fromClass(class{constructor(t){this.decorations=this.getDeco(t)}update(t){(t.selectionSet||t.docChanged||t.viewportChanged)&&(this.decorations=this.getDeco(t.view))}getDeco(t){let e=t.state.facet(Eke),{state:n}=t,r=n.selection;if(r.ranges.length>1)return Sr.none;let i=r.main,s,o=null;if(i.empty){if(!e.highlightWordAroundCursor)return Sr.none;let l=n.wordAt(i.head);if(!l)return Sr.none;o=n.charCategorizer(i.head),s=n.sliceDoc(l.from,l.to)}else{let l=i.to-i.from;if(l<e.minSelectionLength||l>200)return Sr.none;if(e.wholeWords){if(s=n.sliceDoc(i.from,i.to),o=n.charCategorizer(i.head),!(VV(o,n,i.from,i.to)&&Ike(o,n,i.from,i.to)))return Sr.none}else if(s=n.sliceDoc(i.from,i.to),!s)return Sr.none}let a=[];for(let l of t.visibleRanges){let h=new f2(n.doc,s,l.from,l.to);for(;!h.next().done;){let{from:f,to:p}=h.value;if((!o||VV(o,n,f,p))&&(i.empty&&f<=i.from&&p>=i.to?a.push(Dke.range(f,p)):(f>=i.to||p<=i.from)&&a.push(Pke.range(f,p)),a.length>e.maxMatches))return Sr.none}}return Sr.set(a)}},{decorations:t=>t.decorations}),Rke=Cn.baseTheme({".cm-selectionMatch":{backgroundColor:"#99ff7780"},".cm-searchMatch .cm-selectionMatch":{backgroundColor:"transparent"}}),Fke=({state:t,dispatch:e})=>{let{selection:n}=t,r=kt.create(n.ranges.map(i=>t.wordAt(i.head)||kt.cursor(i.head)),n.mainIndex);return r.eq(n)?!1:(e(t.update({selection:r})),!0)};function Lke(t,e){let{main:n,ranges:r}=t.selection,i=t.wordAt(n.head),s=i&&i.from==n.from&&i.to==n.to;for(let o=!1,a=new f2(t.doc,e,r[r.length-1].to);;)if(a.next(),a.done){if(o)return null;a=new f2(t.doc,e,0,Math.max(0,r[r.length-1].from-1)),o=!0}else{if(o&&r.some(l=>l.from==a.value.from))continue;if(s){let l=t.wordAt(a.value.from);if(!l||l.from!=a.value.from||l.to!=a.value.to)continue}return a.value}}const $ke=({state:t,dispatch:e})=>{let{ranges:n}=t.selection;if(n.some(s=>s.from===s.to))return Fke({state:t,dispatch:e});let r=t.sliceDoc(n[0].from,n[0].to);if(t.selection.ranges.some(s=>t.sliceDoc(s.from,s.to)!=r))return!1;let i=Lke(t,r);return i?(e(t.update({selection:t.selection.addRange(kt.range(i.from,i.to),!1),effects:Cn.scrollIntoView(i.to)})),!0):!1},J2=Rn.define({combine(t){return x0(t,{top:!1,caseSensitive:!1,literal:!1,regexp:!1,wholeWord:!1,createPanel:e=>new Gke(e),scrollToMatch:e=>Cn.scrollIntoView(e)})}});class Zre{constructor(e){this.search=e.search,this.caseSensitive=!!e.caseSensitive,this.literal=!!e.literal,this.regexp=!!e.regexp,this.replace=e.replace||"",this.valid=!!this.search&&(!this.regexp||Ske(this.search)),this.unquoted=this.unquote(this.search),this.wholeWord=!!e.wholeWord}unquote(e){return this.literal?e:e.replace(/\\([nrt\\])/g,(n,r)=>r=="n"?`
`:r=="r"?"\r":r=="t"?"	":"\\")}eq(e){return this.search==e.search&&this.replace==e.replace&&this.caseSensitive==e.caseSensitive&&this.regexp==e.regexp&&this.wholeWord==e.wholeWord}create(){return this.regexp?new Qke(this):new Nke(this)}getCursor(e,n=0,r){let i=e.doc?e:Xi.create({doc:e});return r==null&&(r=i.doc.length),this.regexp?Ux(this,i,n,r):jx(this,i,n,r)}}class Xre{constructor(e){this.spec=e}}function jx(t,e,n,r){return new f2(e.doc,t.unquoted,n,r,t.caseSensitive?void 0:i=>i.toLowerCase(),t.wholeWord?Bke(e.doc,e.charCategorizer(e.selection.main.head)):void 0)}function Bke(t,e){return(n,r,i,s)=>((s>n||s+i.length<r)&&(s=Math.max(0,n-2),i=t.sliceString(s,Math.min(t.length,r+2))),(e(m6(i,n-s))!=So.Word||e(g6(i,n-s))!=So.Word)&&(e(g6(i,r-s))!=So.Word||e(m6(i,r-s))!=So.Word))}class Nke extends Xre{constructor(e){super(e)}nextMatch(e,n,r){let i=jx(this.spec,e,r,e.doc.length).nextOverlapping();if(i.done){let s=Math.min(e.doc.length,n+this.spec.unquoted.length);i=jx(this.spec,e,0,s).nextOverlapping()}return i.done||i.value.from==n&&i.value.to==r?null:i.value}prevMatchInRange(e,n,r){for(let i=r;;){let s=Math.max(n,i-1e4-this.spec.unquoted.length),o=jx(this.spec,e,s,i),a=null;for(;!o.nextOverlapping().done;)a=o.value;if(a)return a;if(s==n)return null;i-=1e4}}prevMatch(e,n,r){let i=this.prevMatchInRange(e,0,n);return i||(i=this.prevMatchInRange(e,Math.max(0,r-this.spec.unquoted.length),e.doc.length)),i&&(i.from!=n||i.to!=r)?i:null}getReplacement(e){return this.spec.unquote(this.spec.replace)}matchAll(e,n){let r=jx(this.spec,e,0,e.doc.length),i=[];for(;!r.next().done;){if(i.length>=n)return null;i.push(r.value)}return i}highlight(e,n,r,i){let s=jx(this.spec,e,Math.max(0,n-this.spec.unquoted.length),Math.min(r+this.spec.unquoted.length,e.doc.length));for(;!s.next().done;)i(s.value.from,s.value.to)}}function Ux(t,e,n,r){return new Vre(e.doc,t.search,{ignoreCase:!t.caseSensitive,test:t.wholeWord?zke(e.charCategorizer(e.selection.main.head)):void 0},n,r)}function m6(t,e){return t.slice(bl(t,e,!1),e)}function g6(t,e){return t.slice(e,bl(t,e))}function zke(t){return(e,n,r)=>!r[0].length||(t(m6(r.input,r.index))!=So.Word||t(g6(r.input,r.index))!=So.Word)&&(t(g6(r.input,r.index+r[0].length))!=So.Word||t(m6(r.input,r.index+r[0].length))!=So.Word)}class Qke extends Xre{nextMatch(e,n,r){let i=Ux(this.spec,e,r,e.doc.length).next();return i.done&&(i=Ux(this.spec,e,0,n).next()),i.done?null:i.value}prevMatchInRange(e,n,r){for(let i=1;;i++){let s=Math.max(n,r-i*1e4),o=Ux(this.spec,e,s,r),a=null;for(;!o.next().done;)a=o.value;if(a&&(s==n||a.from>s+10))return a;if(s==n)return null}}prevMatch(e,n,r){return this.prevMatchInRange(e,0,n)||this.prevMatchInRange(e,r,e.doc.length)}getReplacement(e){return this.spec.unquote(this.spec.replace).replace(/\$([$&]|\d+)/g,(n,r)=>{if(r=="&")return e.match[0];if(r=="$")return"$";for(let i=r.length;i>0;i--){let s=+r.slice(0,i);if(s>0&&s<e.match.length)return e.match[s]+r.slice(i)}return n})}matchAll(e,n){let r=Ux(this.spec,e,0,e.doc.length),i=[];for(;!r.next().done;){if(i.length>=n)return null;i.push(r.value)}return i}highlight(e,n,r,i){let s=Ux(this.spec,e,Math.max(0,n-250),Math.min(r+250,e.doc.length));for(;!s.next().done;)i(s.value.from,s.value.to)}}const Fk=Yr.define(),hN=Yr.define(),qy=Aa.define({create(t){return new NM(l9(t).create(),null)},update(t,e){for(let n of e.effects)n.is(Fk)?t=new NM(n.value.create(),t.panel):n.is(hN)&&(t=new NM(t.query,n.value?fN:null));return t},provide:t=>kk.from(t,e=>e.panel)});class NM{constructor(e,n){this.query=e,this.panel=n}}const jke=Sr.mark({class:"cm-searchMatch"}),Uke=Sr.mark({class:"cm-searchMatch cm-searchMatch-selected"}),Vke=Ca.fromClass(class{constructor(t){this.view=t,this.decorations=this.highlight(t.state.field(qy))}update(t){let e=t.state.field(qy);(e!=t.startState.field(qy)||t.docChanged||t.selectionSet||t.viewportChanged)&&(this.decorations=this.highlight(e))}highlight({query:t,panel:e}){if(!e||!t.spec.valid)return Sr.none;let{view:n}=this,r=new h1;for(let i=0,s=n.visibleRanges,o=s.length;i<o;i++){let{from:a,to:l}=s[i];for(;i<o-1&&l>s[i+1].from-500;)l=s[++i].to;t.highlight(n.state,a,l,(h,f)=>{let p=n.state.selection.ranges.some(g=>g.from==h&&g.to==f);r.add(h,f,p?Uke:jke)})}return r.finish()}},{decorations:t=>t.decorations});function QC(t){return e=>{let n=e.state.field(qy,!1);return n&&n.query.spec.valid?t(e,n):Yre(e)}}const y6=QC((t,{query:e})=>{let{to:n}=t.state.selection.main,r=e.nextMatch(t.state,n,n);if(!r)return!1;let i=kt.single(r.from,r.to),s=t.state.facet(J2);return t.dispatch({selection:i,effects:[dN(t,r),s.scrollToMatch(i.main,t)],userEvent:"select.search"}),Gre(t),!0}),v6=QC((t,{query:e})=>{let{state:n}=t,{from:r}=n.selection.main,i=e.prevMatch(n,r,r);if(!i)return!1;let s=kt.single(i.from,i.to),o=t.state.facet(J2);return t.dispatch({selection:s,effects:[dN(t,i),o.scrollToMatch(s.main,t)],userEvent:"select.search"}),Gre(t),!0}),qke=QC((t,{query:e})=>{let n=e.matchAll(t.state,1e3);return!n||!n.length?!1:(t.dispatch({selection:kt.create(n.map(r=>kt.range(r.from,r.to))),userEvent:"select.search.matches"}),!0)}),Zke=({state:t,dispatch:e})=>{let n=t.selection;if(n.ranges.length>1||n.main.empty)return!1;let{from:r,to:i}=n.main,s=[],o=0;for(let a=new f2(t.doc,t.sliceDoc(r,i));!a.next().done;){if(s.length>1e3)return!1;a.value.from==r&&(o=s.length),s.push(kt.range(a.value.from,a.value.to))}return e(t.update({selection:kt.create(s,o),userEvent:"select.search.matches"})),!0},qV=QC((t,{query:e})=>{let{state:n}=t,{from:r,to:i}=n.selection.main;if(n.readOnly)return!1;let s=e.nextMatch(n,r,r);if(!s)return!1;let o=s,a=[],l,h,f=[];o.from==r&&o.to==i&&(h=n.toText(e.getReplacement(o)),a.push({from:o.from,to:o.to,insert:h}),o=e.nextMatch(n,o.from,o.to),f.push(Cn.announce.of(n.phrase("replaced match on line $",n.doc.lineAt(r).number)+".")));let p=t.state.changes(a);return o&&(l=kt.single(o.from,o.to).map(p),f.push(dN(t,o)),f.push(n.facet(J2).scrollToMatch(l.main,t))),t.dispatch({changes:p,selection:l,effects:f,userEvent:"input.replace"}),!0}),Xke=QC((t,{query:e})=>{if(t.state.readOnly)return!1;let n=e.matchAll(t.state,1e9).map(i=>{let{from:s,to:o}=i;return{from:s,to:o,insert:e.getReplacement(i)}});if(!n.length)return!1;let r=t.state.phrase("replaced $ matches",n.length)+".";return t.dispatch({changes:n,effects:Cn.announce.of(r),userEvent:"input.replace.all"}),!0});function fN(t){return t.state.facet(J2).createPanel(t)}function l9(t,e){var n,r,i,s,o;let a=t.selection.main,l=a.empty||a.to>a.from+100?"":t.sliceDoc(a.from,a.to);if(e&&!l)return e;let h=t.facet(J2);return new Zre({search:((n=e?.literal)!==null&&n!==void 0?n:h.literal)?l:l.replace(/\n/g,"\\n"),caseSensitive:(r=e?.caseSensitive)!==null&&r!==void 0?r:h.caseSensitive,literal:(i=e?.literal)!==null&&i!==void 0?i:h.literal,regexp:(s=e?.regexp)!==null&&s!==void 0?s:h.regexp,wholeWord:(o=e?.wholeWord)!==null&&o!==void 0?o:h.wholeWord})}function Wre(t){let e=Sk(t,fN);return e&&e.dom.querySelector("[main-field]")}function Gre(t){let e=Wre(t);e&&e==t.root.activeElement&&e.select()}const Yre=t=>{let e=t.state.field(qy,!1);if(e&&e.panel){let n=Wre(t);if(n&&n!=t.root.activeElement){let r=l9(t.state,e.query.spec);r.valid&&t.dispatch({effects:Fk.of(r)}),n.focus(),n.select()}}else t.dispatch({effects:[hN.of(!0),e?Fk.of(l9(t.state,e.query.spec)):Yr.appendConfig.of(Hke)]});return!0},Hre=t=>{let e=t.state.field(qy,!1);if(!e||!e.panel)return!1;let n=Sk(t,fN);return n&&n.dom.contains(t.root.activeElement)&&t.focus(),t.dispatch({effects:hN.of(!1)}),!0},Wke=[{key:"Mod-f",run:Yre,scope:"editor search-panel"},{key:"F3",run:y6,shift:v6,scope:"editor search-panel",preventDefault:!0},{key:"Mod-g",run:y6,shift:v6,scope:"editor search-panel",preventDefault:!0},{key:"Escape",run:Hre,scope:"editor search-panel"},{key:"Mod-Shift-l",run:Zke},{key:"Mod-Alt-g",run:kke},{key:"Mod-d",run:$ke,preventDefault:!0}];class Gke{constructor(e){this.view=e;let n=this.query=e.state.field(qy).query.spec;this.commit=this.commit.bind(this),this.searchField=Xs("input",{value:n.search,placeholder:Hc(e,"Find"),"aria-label":Hc(e,"Find"),class:"cm-textfield",name:"search",form:"","main-field":"true",onchange:this.commit,onkeyup:this.commit}),this.replaceField=Xs("input",{value:n.replace,placeholder:Hc(e,"Replace"),"aria-label":Hc(e,"Replace"),class:"cm-textfield",name:"replace",form:"",onchange:this.commit,onkeyup:this.commit}),this.caseField=Xs("input",{type:"checkbox",name:"case",form:"",checked:n.caseSensitive,onchange:this.commit}),this.reField=Xs("input",{type:"checkbox",name:"re",form:"",checked:n.regexp,onchange:this.commit}),this.wordField=Xs("input",{type:"checkbox",name:"word",form:"",checked:n.wholeWord,onchange:this.commit});function r(i,s,o){return Xs("button",{class:"cm-button",name:i,onclick:s,type:"button"},o)}this.dom=Xs("div",{onkeydown:i=>this.keydown(i),class:"cm-search"},[this.searchField,r("next",()=>y6(e),[Hc(e,"next")]),r("prev",()=>v6(e),[Hc(e,"previous")]),r("select",()=>qke(e),[Hc(e,"all")]),Xs("label",null,[this.caseField,Hc(e,"match case")]),Xs("label",null,[this.reField,Hc(e,"regexp")]),Xs("label",null,[this.wordField,Hc(e,"by word")]),...e.state.readOnly?[]:[Xs("br"),this.replaceField,r("replace",()=>qV(e),[Hc(e,"replace")]),r("replaceAll",()=>Xke(e),[Hc(e,"replace all")])],Xs("button",{name:"close",onclick:()=>Hre(e),"aria-label":Hc(e,"close"),type:"button"},["Ã"])])}commit(){let e=new Zre({search:this.searchField.value,caseSensitive:this.caseField.checked,regexp:this.reField.checked,wholeWord:this.wordField.checked,replace:this.replaceField.value});e.eq(this.query)||(this.query=e,this.view.dispatch({effects:Fk.of(e)}))}keydown(e){s2e(this.view,e,"search-panel")?e.preventDefault():e.keyCode==13&&e.target==this.searchField?(e.preventDefault(),(e.shiftKey?v6:y6)(this.view)):e.keyCode==13&&e.target==this.replaceField&&(e.preventDefault(),qV(this.view))}update(e){for(let n of e.transactions)for(let r of n.effects)r.is(Fk)&&!r.value.eq(this.query)&&this.setQuery(r.value)}setQuery(e){this.query=e,this.searchField.value=e.search,this.replaceField.value=e.replace,this.caseField.checked=e.caseSensitive,this.reField.checked=e.regexp,this.wordField.checked=e.wholeWord}mount(){this.searchField.select()}get pos(){return 80}get top(){return this.view.state.facet(J2).top}}function Hc(t,e){return t.state.phrase(e)}const f4=30,d4=/[\s\.,:;?!]/;function dN(t,{from:e,to:n}){let r=t.state.doc.lineAt(e),i=t.state.doc.lineAt(n).to,s=Math.max(r.from,e-f4),o=Math.min(i,n+f4),a=t.state.sliceDoc(s,o);if(s!=r.from){for(let l=0;l<f4;l++)if(!d4.test(a[l+1])&&d4.test(a[l])){a=a.slice(l);break}}if(o!=i){for(let l=a.length-1;l>a.length-f4;l--)if(!d4.test(a[l-1])&&d4.test(a[l])){a=a.slice(0,l);break}}return Cn.announce.of(`${t.state.phrase("current match")}. ${a} ${t.state.phrase("on line")} ${r.number}.`)}const Yke=Cn.baseTheme({".cm-panel.cm-search":{padding:"2px 6px 4px",position:"relative","& [name=close]":{position:"absolute",top:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:0,margin:0},"& input, & button, & label":{margin:".2em .6em .2em 0"},"& input[type=checkbox]":{marginRight:".2em"},"& label":{fontSize:"80%",whiteSpace:"pre"}},"&light .cm-searchMatch":{backgroundColor:"#ffff0054"},"&dark .cm-searchMatch":{backgroundColor:"#00ffff8a"},"&light .cm-searchMatch-selected":{backgroundColor:"#ff6a0054"},"&dark .cm-searchMatch-selected":{backgroundColor:"#ff00ff8a"}}),Hke=[qy,b0.low(Vke),Yke];class b6{static create(e,n,r,i,s){let o=i+(i<<8)+e+(n<<4)|0;return new b6(e,n,r,o,s,[],[])}constructor(e,n,r,i,s,o,a){this.type=e,this.value=n,this.from=r,this.hash=i,this.end=s,this.children=o,this.positions=a,this.hashProp=[[Dr.contextHash,i]]}addChild(e,n){e.prop(Dr.contextHash)!=this.hash&&(e=new xs(e.type,e.children,e.positions,e.length,this.hashProp)),this.children.push(e),this.positions.push(n)}toTree(e,n=this.end){let r=this.children.length-1;return r>=0&&(n=Math.max(n,this.positions[r]+this.children[r].length+this.from)),new xs(e.types[this.type],this.children,this.positions,n-this.from).balance({makeTree:(i,s,o)=>new xs(za.none,i,s,o,this.hashProp)})}}var sn;(function(t){t[t.Document=1]="Document",t[t.CodeBlock=2]="CodeBlock",t[t.FencedCode=3]="FencedCode",t[t.Blockquote=4]="Blockquote",t[t.HorizontalRule=5]="HorizontalRule",t[t.BulletList=6]="BulletList",t[t.OrderedList=7]="OrderedList",t[t.ListItem=8]="ListItem",t[t.ATXHeading1=9]="ATXHeading1",t[t.ATXHeading2=10]="ATXHeading2",t[t.ATXHeading3=11]="ATXHeading3",t[t.ATXHeading4=12]="ATXHeading4",t[t.ATXHeading5=13]="ATXHeading5",t[t.ATXHeading6=14]="ATXHeading6",t[t.SetextHeading1=15]="SetextHeading1",t[t.SetextHeading2=16]="SetextHeading2",t[t.HTMLBlock=17]="HTMLBlock",t[t.LinkReference=18]="LinkReference",t[t.Paragraph=19]="Paragraph",t[t.CommentBlock=20]="CommentBlock",t[t.ProcessingInstructionBlock=21]="ProcessingInstructionBlock",t[t.Escape=22]="Escape",t[t.Entity=23]="Entity",t[t.HardBreak=24]="HardBreak",t[t.Emphasis=25]="Emphasis",t[t.StrongEmphasis=26]="StrongEmphasis",t[t.Link=27]="Link",t[t.Image=28]="Image",t[t.InlineCode=29]="InlineCode",t[t.HTMLTag=30]="HTMLTag",t[t.Comment=31]="Comment",t[t.ProcessingInstruction=32]="ProcessingInstruction",t[t.Autolink=33]="Autolink",t[t.HeaderMark=34]="HeaderMark",t[t.QuoteMark=35]="QuoteMark",t[t.ListMark=36]="ListMark",t[t.LinkMark=37]="LinkMark",t[t.EmphasisMark=38]="EmphasisMark",t[t.CodeMark=39]="CodeMark",t[t.CodeText=40]="CodeText",t[t.CodeInfo=41]="CodeInfo",t[t.LinkTitle=42]="LinkTitle",t[t.LinkLabel=43]="LinkLabel",t[t.URL=44]="URL"})(sn||(sn={}));class Kke{constructor(e,n){this.start=e,this.content=n,this.marks=[],this.parsers=[]}}class Jke{constructor(){this.text="",this.baseIndent=0,this.basePos=0,this.depth=0,this.markers=[],this.pos=0,this.indent=0,this.next=-1}forward(){this.basePos>this.pos&&this.forwardInner()}forwardInner(){let e=this.skipSpace(this.basePos);this.indent=this.countIndent(e,this.pos,this.indent),this.pos=e,this.next=e==this.text.length?-1:this.text.charCodeAt(e)}skipSpace(e){return U3(this.text,e)}reset(e){for(this.text=e,this.baseIndent=this.basePos=this.pos=this.indent=0,this.forwardInner(),this.depth=1;this.markers.length;)this.markers.pop()}moveBase(e){this.basePos=e,this.baseIndent=this.countIndent(e,this.pos,this.indent)}moveBaseColumn(e){this.baseIndent=e,this.basePos=this.findColumn(e)}addMarker(e){this.markers.push(e)}countIndent(e,n=0,r=0){for(let i=n;i<e;i++)r+=this.text.charCodeAt(i)==9?4-r%4:1;return r}findColumn(e){let n=0;for(let r=0;n<this.text.length&&r<e;n++)r+=this.text.charCodeAt(n)==9?4-r%4:1;return n}scrub(){if(!this.baseIndent)return this.text;let e="";for(let n=0;n<this.basePos;n++)e+=" ";return e+this.text.slice(this.basePos)}}function ZV(t,e,n){if(n.pos==n.text.length||t!=e.block&&n.indent>=e.stack[n.depth+1].value+n.baseIndent)return!0;if(n.indent>=n.baseIndent+4)return!1;let r=(t.type==sn.OrderedList?gN:mN)(n,e,!1);return r>0&&(t.type!=sn.BulletList||pN(n,e,!1)<0)&&n.text.charCodeAt(n.pos+r-1)==t.value}const Kre={[sn.Blockquote](t,e,n){return n.next!=62?!1:(n.markers.push(Ni(sn.QuoteMark,e.lineStart+n.pos,e.lineStart+n.pos+1)),n.moveBase(n.pos+(Ef(n.text.charCodeAt(n.pos+1))?2:1)),t.end=e.lineStart+n.text.length,!0)},[sn.ListItem](t,e,n){return n.indent<n.baseIndent+t.value&&n.next>-1?!1:(n.moveBaseColumn(n.baseIndent+t.value),!0)},[sn.OrderedList]:ZV,[sn.BulletList]:ZV,[sn.Document](){return!0}};function Ef(t){return t==32||t==9||t==10||t==13}function U3(t,e=0){for(;e<t.length&&Ef(t.charCodeAt(e));)e++;return e}function XV(t,e,n){for(;e>n&&Ef(t.charCodeAt(e-1));)e--;return e}function Jre(t){if(t.next!=96&&t.next!=126)return-1;let e=t.pos+1;for(;e<t.text.length&&t.text.charCodeAt(e)==t.next;)e++;if(e<t.pos+3)return-1;if(t.next==96){for(let n=e;n<t.text.length;n++)if(t.text.charCodeAt(n)==96)return-1}return e}function eie(t){return t.next!=62?-1:t.text.charCodeAt(t.pos+1)==32?2:1}function pN(t,e,n){if(t.next!=42&&t.next!=45&&t.next!=95)return-1;let r=1;for(let i=t.pos+1;i<t.text.length;i++){let s=t.text.charCodeAt(i);if(s==t.next)r++;else if(!Ef(s))return-1}return n&&t.next==45&&rie(t)>-1&&t.depth==e.stack.length&&e.parser.leafBlockParsers.indexOf(aie.SetextHeading)>-1||r<3?-1:1}function tie(t,e){for(let n=t.stack.length-1;n>=0;n--)if(t.stack[n].type==e)return!0;return!1}function mN(t,e,n){return(t.next==45||t.next==43||t.next==42)&&(t.pos==t.text.length-1||Ef(t.text.charCodeAt(t.pos+1)))&&(!n||tie(e,sn.BulletList)||t.skipSpace(t.pos+2)<t.text.length)?1:-1}function gN(t,e,n){let r=t.pos,i=t.next;for(;i>=48&&i<=57;){r++;if(r==t.text.length)return-1;i=t.text.charCodeAt(r)}return r==t.pos||r>t.pos+9||i!=46&&i!=41||r<t.text.length-1&&!Ef(t.text.charCodeAt(r+1))||n&&!tie(e,sn.OrderedList)&&(t.skipSpace(r+1)==t.text.length||r>t.pos+1||t.next!=49)?-1:r+1-t.pos}function nie(t){if(t.next!=35)return-1;let e=t.pos+1;for(;e<t.text.length&&t.text.charCodeAt(e)==35;)e++;if(e<t.text.length&&t.text.charCodeAt(e)!=32)return-1;let n=e-t.pos;return n>6?-1:n}function rie(t){if(t.next!=45&&t.next!=61||t.indent>=t.baseIndent+4)return-1;let e=t.pos+1;for(;e<t.text.length&&t.text.charCodeAt(e)==t.next;)e++;let n=e;for(;e<t.text.length&&Ef(t.text.charCodeAt(e));)e++;return e==t.text.length?n:-1}const u9=/^[ \t]*$/,iie=/-->/,sie=/\?>/,c9=[[/^<(?:script|pre|style)(?:\s|>|$)/i,/<\/(?:script|pre|style)>/i],[/^\s*<!--/,iie],[/^\s*<\?/,sie],[/^\s*<![A-Z]/,/>/],[/^\s*<!\[CDATA\[/,/\]\]>/],[/^\s*<\/?(?:address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h1|h2|h3|h4|h5|h6|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul)(?:\s|\/?>|$)/i,u9],[/^\s*(?:<\/[a-z][\w-]*\s*>|<[a-z][\w-]*(\s+[a-z:_][\w-.]*(?:\s*=\s*(?:[^\s"'=<>`]+|'[^']*'|"[^"]*"))?)*\s*>)\s*$/i,u9]];function oie(t,e,n){if(t.next!=60)return-1;let r=t.text.slice(t.pos);for(let i=0,s=c9.length-(n?1:0);i<s;i++)if(c9[i][0].test(r))return i;return-1}function WV(t,e){let n=t.countIndent(e,t.pos,t.indent),r=t.countIndent(t.skipSpace(e),e,n);return r>=n+5?n+1:r}function Iv(t,e,n){let r=t.length-1;r>=0&&t[r].to==e&&t[r].type==sn.CodeText?t[r].to=n:t.push(Ni(sn.CodeText,e,n))}const p4={LinkReference:void 0,IndentedCode(t,e){let n=e.baseIndent+4;if(e.indent<n)return!1;let r=e.findColumn(n),i=t.lineStart+r,s=t.lineStart+e.text.length,o=[],a=[];for(Iv(o,i,s);t.nextLine()&&e.depth>=t.stack.length;)if(e.pos==e.text.length){Iv(a,t.lineStart-1,t.lineStart);for(let l of e.markers)a.push(l)}else{if(e.indent<n)break;{if(a.length){for(let h of a)h.type==sn.CodeText?Iv(o,h.from,h.to):o.push(h);a=[]}Iv(o,t.lineStart-1,t.lineStart);for(let h of e.markers)o.push(h);s=t.lineStart+e.text.length;let l=t.lineStart+e.findColumn(e.baseIndent+4);l<s&&Iv(o,l,s)}}return a.length&&(a=a.filter(l=>l.type!=sn.CodeText),a.length&&(e.markers=a.concat(e.markers))),t.addNode(t.buffer.writeElements(o,-i).finish(sn.CodeBlock,s-i),i),!0},FencedCode(t,e){let n=Jre(e);if(n<0)return!1;let r=t.lineStart+e.pos,i=e.next,s=n-e.pos,o=e.skipSpace(n),a=XV(e.text,e.text.length,o),l=[Ni(sn.CodeMark,r,r+s)];o<a&&l.push(Ni(sn.CodeInfo,t.lineStart+o,t.lineStart+a));for(let h=!0;t.nextLine()&&e.depth>=t.stack.length;h=!1){let f=e.pos;if(e.indent-e.baseIndent<4)for(;f<e.text.length&&e.text.charCodeAt(f)==i;)f++;if(f-e.pos>=s&&e.skipSpace(f)==e.text.length){for(let p of e.markers)l.push(p);l.push(Ni(sn.CodeMark,t.lineStart+e.pos,t.lineStart+f)),t.nextLine();break}else{h||Iv(l,t.lineStart-1,t.lineStart);for(let b of e.markers)l.push(b);let p=t.lineStart+e.basePos,g=t.lineStart+e.text.length;p<g&&Iv(l,p,g)}}return t.addNode(t.buffer.writeElements(l,-r).finish(sn.FencedCode,t.prevLineEnd()-r),r),!0},Blockquote(t,e){let n=eie(e);return n<0?!1:(t.startContext(sn.Blockquote,e.pos),t.addNode(sn.QuoteMark,t.lineStart+e.pos,t.lineStart+e.pos+1),e.moveBase(e.pos+n),null)},HorizontalRule(t,e){if(pN(e,t,!1)<0)return!1;let n=t.lineStart+e.pos;return t.nextLine(),t.addNode(sn.HorizontalRule,n),!0},BulletList(t,e){let n=mN(e,t,!1);if(n<0)return!1;t.block.type!=sn.BulletList&&t.startContext(sn.BulletList,e.basePos,e.next);let r=WV(e,e.pos+1);return t.startContext(sn.ListItem,e.basePos,r-e.baseIndent),t.addNode(sn.ListMark,t.lineStart+e.pos,t.lineStart+e.pos+n),e.moveBaseColumn(r),null},OrderedList(t,e){let n=gN(e,t,!1);if(n<0)return!1;t.block.type!=sn.OrderedList&&t.startContext(sn.OrderedList,e.basePos,e.text.charCodeAt(e.pos+n-1));let r=WV(e,e.pos+n);return t.startContext(sn.ListItem,e.basePos,r-e.baseIndent),t.addNode(sn.ListMark,t.lineStart+e.pos,t.lineStart+e.pos+n),e.moveBaseColumn(r),null},ATXHeading(t,e){let n=nie(e);if(n<0)return!1;let r=e.pos,i=t.lineStart+r,s=XV(e.text,e.text.length,r),o=s;for(;o>r&&e.text.charCodeAt(o-1)==e.next;)o--;(o==s||o==r||!Ef(e.text.charCodeAt(o-1)))&&(o=e.text.length);let a=t.buffer.write(sn.HeaderMark,0,n).writeElements(t.parser.parseInline(e.text.slice(r+n+1,o),i+n+1),-i);o<e.text.length&&a.write(sn.HeaderMark,o-r,s-r);let l=a.finish(sn.ATXHeading1-1+n,e.text.length-r);return t.nextLine(),t.addNode(l,i),!0},HTMLBlock(t,e){let n=oie(e,t,!1);if(n<0)return!1;let r=t.lineStart+e.pos,i=c9[n][1],s=[],o=i!=u9;for(;!i.test(e.text)&&t.nextLine();){if(e.depth<t.stack.length){o=!1;break}for(let h of e.markers)s.push(h)}o&&t.nextLine();let a=i==iie?sn.CommentBlock:i==sie?sn.ProcessingInstructionBlock:sn.HTMLBlock,l=t.prevLineEnd();return t.addNode(t.buffer.writeElements(s,-r).finish(a,l-r),r),!0},SetextHeading:void 0};class eCe{constructor(e){this.stage=0,this.elts=[],this.pos=0,this.start=e.start,this.advance(e.content)}nextLine(e,n,r){if(this.stage==-1)return!1;let i=r.content+`
`+n.scrub(),s=this.advance(i);return s>-1&&s<i.length?this.complete(e,r,s):!1}finish(e,n){return(this.stage==2||this.stage==3)&&U3(n.content,this.pos)==n.content.length?this.complete(e,n,n.content.length):!1}complete(e,n,r){return e.addLeafElement(n,Ni(sn.LinkReference,this.start,this.start+r,this.elts)),!0}nextStage(e){return e?(this.pos=e.to-this.start,this.elts.push(e),this.stage++,!0):(e===!1&&(this.stage=-1),!1)}advance(e){for(;;){if(this.stage==-1)return-1;if(this.stage==0){if(!this.nextStage(gie(e,this.pos,this.start,!0)))return-1;if(e.charCodeAt(this.pos)!=58)return this.stage=-1;this.elts.push(Ni(sn.LinkMark,this.pos+this.start,this.pos+this.start+1)),this.pos++}else if(this.stage==1){if(!this.nextStage(pie(e,U3(e,this.pos),this.start)))return-1}else if(this.stage==2){let n=U3(e,this.pos),r=0;if(n>this.pos){let i=mie(e,n,this.start);if(i){let s=zM(e,i.to-this.start);s>0&&(this.nextStage(i),r=s)}}return r||(r=zM(e,this.pos)),r>0&&r<e.length?r:-1}else return zM(e,this.pos)}}}function zM(t,e){for(;e<t.length;e++){let n=t.charCodeAt(e);if(n==10)break;if(!Ef(n))return-1}return e}class tCe{nextLine(e,n,r){let i=n.depth<e.stack.length?-1:rie(n),s=n.next;if(i<0)return!1;let o=Ni(sn.HeaderMark,e.lineStart+n.pos,e.lineStart+i);return e.nextLine(),e.addLeafElement(r,Ni(s==61?sn.SetextHeading1:sn.SetextHeading2,r.start,e.prevLineEnd(),[...e.parser.parseInline(r.content,r.start),o])),!0}finish(){return!1}}const aie={LinkReference(t,e){return e.content.charCodeAt(0)==91?new eCe(e):null},SetextHeading(){return new tCe}},nCe=[(t,e)=>nie(e)>=0,(t,e)=>Jre(e)>=0,(t,e)=>eie(e)>=0,(t,e)=>mN(e,t,!0)>=0,(t,e)=>gN(e,t,!0)>=0,(t,e)=>pN(e,t,!0)>=0,(t,e)=>oie(e,t,!0)>=0],rCe={text:"",end:0};class iCe{constructor(e,n,r,i){this.parser=e,this.input=n,this.ranges=i,this.line=new Jke,this.atEnd=!1,this.reusePlaceholders=new Map,this.stoppedAt=null,this.rangeI=0,this.to=i[i.length-1].to,this.lineStart=this.absoluteLineStart=this.absoluteLineEnd=i[0].from,this.block=b6.create(sn.Document,0,this.lineStart,0,0),this.stack=[this.block],this.fragments=r.length?new aCe(r,n):null,this.readLine()}get parsedPos(){return this.absoluteLineStart}advance(){if(this.stoppedAt!=null&&this.absoluteLineStart>this.stoppedAt)return this.finish();let{line:e}=this;for(;;){for(let r=0;;){let i=e.depth<this.stack.length?this.stack[this.stack.length-1]:null;for(;r<e.markers.length&&(!i||e.markers[r].from<i.end);){let s=e.markers[r++];this.addNode(s.type,s.from,s.to)}if(!i)break;this.finishContext()}if(e.pos<e.text.length)break;if(!this.nextLine())return this.finish()}if(this.fragments&&this.reuseFragment(e.basePos))return null;e:for(;;){for(let r of this.parser.blockParsers)if(r){let i=r(this,e);if(i!=!1){if(i==!0)return null;e.forward();continue e}}break}let n=new Kke(this.lineStart+e.pos,e.text.slice(e.pos));for(let r of this.parser.leafBlockParsers)if(r){let i=r(this,n);i&&n.parsers.push(i)}e:for(;this.nextLine()&&e.pos!=e.text.length;){if(e.indent<e.baseIndent+4){for(let r of this.parser.endLeafBlock)if(r(this,e,n))break e}for(let r of n.parsers)if(r.nextLine(this,e,n))return null;n.content+=`
`+e.scrub();for(let r of e.markers)n.marks.push(r)}return this.finishLeaf(n),null}stopAt(e){if(this.stoppedAt!=null&&this.stoppedAt<e)throw new RangeError("Can't move stoppedAt forward");this.stoppedAt=e}reuseFragment(e){if(!this.fragments.moveTo(this.absoluteLineStart+e,this.absoluteLineStart)||!this.fragments.matches(this.block.hash))return!1;let n=this.fragments.takeNodes(this);return n?(this.absoluteLineStart+=n,this.lineStart=yie(this.absoluteLineStart,this.ranges),this.moveRangeI(),this.absoluteLineStart<this.to?(this.lineStart++,this.absoluteLineStart++,this.readLine()):(this.atEnd=!0,this.readLine()),!0):!1}get depth(){return this.stack.length}parentType(e=this.depth-1){return this.parser.nodeSet.types[this.stack[e].type]}nextLine(){return this.lineStart+=this.line.text.length,this.absoluteLineEnd>=this.to?(this.absoluteLineStart=this.absoluteLineEnd,this.atEnd=!0,this.readLine(),!1):(this.lineStart++,this.absoluteLineStart=this.absoluteLineEnd+1,this.moveRangeI(),this.readLine(),!0)}peekLine(){return this.scanLine(this.absoluteLineEnd+1).text}moveRangeI(){for(;this.rangeI<this.ranges.length-1&&this.absoluteLineStart>=this.ranges[this.rangeI].to;)this.rangeI++,this.absoluteLineStart=Math.max(this.absoluteLineStart,this.ranges[this.rangeI].from)}scanLine(e){let n=rCe;if(n.end=e,e>=this.to)n.text="";else if(n.text=this.lineChunkAt(e),n.end+=n.text.length,this.ranges.length>1){let r=this.absoluteLineStart,i=this.rangeI;for(;this.ranges[i].to<n.end;){i++;let s=this.ranges[i].from,o=this.lineChunkAt(s);n.end=s+o.length,n.text=n.text.slice(0,this.ranges[i-1].to-r)+o,r=n.end-n.text.length}}return n}readLine(){let{line:e}=this,{text:n,end:r}=this.scanLine(this.absoluteLineStart);for(this.absoluteLineEnd=r,e.reset(n);e.depth<this.stack.length;e.depth++){let i=this.stack[e.depth],s=this.parser.skipContextMarkup[i.type];if(!s)throw new Error("Unhandled block context "+sn[i.type]);let o=this.line.markers.length;if(!s(i,this,e)){this.line.markers.length>o&&(i.end=this.line.markers[this.line.markers.length-1].to);break}e.forward()}}lineChunkAt(e){let n=this.input.chunk(e),r;if(this.input.lineChunks)r=n==`
`?"":n;else{let i=n.indexOf(`
`);r=i<0?n:n.slice(0,i)}return e+r.length>this.to?r.slice(0,this.to-e):r}prevLineEnd(){return this.atEnd?this.lineStart:this.lineStart-1}startContext(e,n,r=0){this.block=b6.create(e,r,this.lineStart+n,this.block.hash,this.lineStart+this.line.text.length),this.stack.push(this.block)}startComposite(e,n,r=0){this.startContext(this.parser.getNodeType(e),n,r)}addNode(e,n,r){typeof e=="number"&&(e=new xs(this.parser.nodeSet.types[e],d2,d2,(r??this.prevLineEnd())-n)),this.block.addChild(e,n-this.block.from)}addElement(e){this.block.addChild(e.toTree(this.parser.nodeSet),e.from-this.block.from)}addLeafElement(e,n){this.addNode(this.buffer.writeElements(f9(n.children,e.marks),-n.from).finish(n.type,n.to-n.from),n.from)}finishContext(){let e=this.stack.pop(),n=this.stack[this.stack.length-1];n.addChild(e.toTree(this.parser.nodeSet),e.from-n.from),this.block=n}finish(){for(;this.stack.length>1;)this.finishContext();return this.addGaps(this.block.toTree(this.parser.nodeSet,this.lineStart))}addGaps(e){return this.ranges.length>1?lie(this.ranges,0,e.topNode,this.ranges[0].from,this.reusePlaceholders):e}finishLeaf(e){for(let r of e.parsers)if(r.finish(this,e))return;let n=f9(this.parser.parseInline(e.content,e.start),e.marks);this.addNode(this.buffer.writeElements(n,-e.start).finish(sn.Paragraph,e.content.length),e.start)}elt(e,n,r,i){return typeof e=="string"?Ni(this.parser.getNodeType(e),n,r,i):new hie(e,n)}get buffer(){return new cie(this.parser.nodeSet)}}function lie(t,e,n,r,i){let s=t[e].to,o=[],a=[],l=n.from+r;function h(f,p){for(;p?f>=s:f>s;){let g=t[e+1].from-s;r+=g,f+=g,e++,s=t[e].to}}for(let f=n.firstChild;f;f=f.nextSibling){h(f.from+r,!0);let p=f.from+r,g,b=i.get(f.tree);b?g=b:f.to+r>s?(g=lie(t,e,f,r,i),h(f.to+r,!1)):g=f.toTree(),o.push(g),a.push(p-l)}return h(n.to+r,!1),new xs(n.type,o,a,n.to+r-l,n.tree?n.tree.propValues:void 0)}class kD extends qB{constructor(e,n,r,i,s,o,a,l,h){super(),this.nodeSet=e,this.blockParsers=n,this.leafBlockParsers=r,this.blockNames=i,this.endLeafBlock=s,this.skipContextMarkup=o,this.inlineParsers=a,this.inlineNames=l,this.wrappers=h,this.nodeTypes=Object.create(null);for(let f of e.types)this.nodeTypes[f.name]=f.id}createParse(e,n,r){let i=new iCe(this,e,n,r);for(let s of this.wrappers)i=s(i,e,n,r);return i}configure(e){let n=h9(e);if(!n)return this;let{nodeSet:r,skipContextMarkup:i}=this,s=this.blockParsers.slice(),o=this.leafBlockParsers.slice(),a=this.blockNames.slice(),l=this.inlineParsers.slice(),h=this.inlineNames.slice(),f=this.endLeafBlock.slice(),p=this.wrappers;if(FS(n.defineNodes)){i=Object.assign({},i);let g=r.types.slice(),b;for(let x of n.defineNodes){let{name:k,block:T,composite:I,style:M}=typeof x=="string"?{name:x}:x;if(g.some(Q=>Q.name==k))continue;I&&(i[g.length]=(Q,Z,q)=>I(Z,q,Q.value));let B=g.length,j=I?["Block","BlockContext"]:T?B>=sn.ATXHeading1&&B<=sn.SetextHeading2?["Block","LeafBlock","Heading"]:["Block","LeafBlock"]:void 0;g.push(za.define({id:B,name:k,props:j&&[[Dr.group,j]]})),M&&(b||(b={}),Array.isArray(M)||M instanceof uh?b[k]=M:Object.assign(b,M))}r=new LC(g),b&&(r=r.extend(w0(b)))}if(FS(n.props)&&(r=r.extend(...n.props)),FS(n.remove))for(let g of n.remove){let b=this.blockNames.indexOf(g),x=this.inlineNames.indexOf(g);b>-1&&(s[b]=o[b]=void 0),x>-1&&(l[x]=void 0)}if(FS(n.parseBlock))for(let g of n.parseBlock){let b=a.indexOf(g.name);if(b>-1)s[b]=g.parse,o[b]=g.leaf;else{let x=g.before?m4(a,g.before):g.after?m4(a,g.after)+1:a.length-1;s.splice(x,0,g.parse),o.splice(x,0,g.leaf),a.splice(x,0,g.name)}g.endLeaf&&f.push(g.endLeaf)}if(FS(n.parseInline))for(let g of n.parseInline){let b=h.indexOf(g.name);if(b>-1)l[b]=g.parse;else{let x=g.before?m4(h,g.before):g.after?m4(h,g.after)+1:h.length-1;l.splice(x,0,g.parse),h.splice(x,0,g.name)}}return n.wrap&&(p=p.concat(n.wrap)),new kD(r,s,o,a,f,i,l,h,p)}getNodeType(e){let n=this.nodeTypes[e];if(n==null)throw new RangeError(`Unknown node type '${e}'`);return n}parseInline(e,n){let r=new yN(this,e,n);e:for(let i=n;i<r.end;){let s=r.char(i);for(let o of this.inlineParsers)if(o){let a=o(r,s,i);if(a>=0){i=a;continue e}}i++}return r.resolveMarkers(0)}}function FS(t){return t!=null&&t.length>0}function h9(t){if(!Array.isArray(t))return t;if(t.length==0)return null;let e=h9(t[0]);if(t.length==1)return e;let n=h9(t.slice(1));if(!n||!e)return e||n;let r=(o,a)=>(o||d2).concat(a||d2),i=e.wrap,s=n.wrap;return{props:r(e.props,n.props),defineNodes:r(e.defineNodes,n.defineNodes),parseBlock:r(e.parseBlock,n.parseBlock),parseInline:r(e.parseInline,n.parseInline),remove:r(e.remove,n.remove),wrap:i?s?(o,a,l,h)=>i(s(o,a,l,h),a,l,h):i:s}}function m4(t,e){let n=t.indexOf(e);if(n<0)throw new RangeError(`Position specified relative to unknown parser ${e}`);return n}let uie=[za.none];for(let t=1,e;e=sn[t];t++)uie[t]=za.define({id:t,name:e,props:t>=sn.Escape?[]:[[Dr.group,t in Kre?["Block","BlockContext"]:["Block","LeafBlock"]]],top:e=="Document"});const d2=[];let cie=class{constructor(e){this.nodeSet=e,this.content=[],this.nodes=[]}write(e,n,r,i=0){return this.content.push(e,n,r,4+i*4),this}writeElements(e,n=0){for(let r of e)r.writeTo(this,n);return this}finish(e,n){return xs.build({buffer:this.content,nodeSet:this.nodeSet,reused:this.nodes,topID:e,length:n})}},Lk=class{constructor(e,n,r,i=d2){this.type=e,this.from=n,this.to=r,this.children=i}writeTo(e,n){let r=e.content.length;e.writeElements(this.children,n),e.content.push(this.type,this.from+n,this.to+n,e.content.length+4-r)}toTree(e){return new cie(e).writeElements(this.children,-this.from).finish(this.type,this.to-this.from)}};class hie{constructor(e,n){this.tree=e,this.from=n}get to(){return this.from+this.tree.length}get type(){return this.tree.type.id}get children(){return d2}writeTo(e,n){e.nodes.push(this.tree),e.content.push(e.nodes.length-1,this.from+n,this.to+n,-1)}toTree(){return this.tree}}function Ni(t,e,n,r){return new Lk(t,e,n,r)}const fie={resolve:"Emphasis",mark:"EmphasisMark"},die={resolve:"Emphasis",mark:"EmphasisMark"},Vv={},_6={};class oh{constructor(e,n,r,i){this.type=e,this.from=n,this.to=r,this.side=i}}const GV="!\"#$%&'()*+,-./:;<=>?@[\\]^_`{|}~";let $k=/[!"#$%&'()*+,\-.\/:;<=>?@\[\\\]^_`{|}~\xA1\u2010-\u2027]/;try{$k=new RegExp("[\\p{S}|\\p{P}]","u")}catch{}const QM={Escape(t,e,n){if(e!=92||n==t.end-1)return-1;let r=t.char(n+1);for(let i=0;i<GV.length;i++)if(GV.charCodeAt(i)==r)return t.append(Ni(sn.Escape,n,n+2));return-1},Entity(t,e,n){if(e!=38)return-1;let r=/^(?:#\d+|#x[a-f\d]+|\w+);/i.exec(t.slice(n+1,n+31));return r?t.append(Ni(sn.Entity,n,n+1+r[0].length)):-1},InlineCode(t,e,n){if(e!=96||n&&t.char(n-1)==96)return-1;let r=n+1;for(;r<t.end&&t.char(r)==96;)r++;let i=r-n,s=0;for(;r<t.end;r++)if(t.char(r)==96){if(s++,s==i&&t.char(r+1)!=96)return t.append(Ni(sn.InlineCode,n,r+1,[Ni(sn.CodeMark,n,n+i),Ni(sn.CodeMark,r+1-i,r+1)]))}else s=0;return-1},HTMLTag(t,e,n){if(e!=60||n==t.end-1)return-1;let r=t.slice(n+1,t.end),i=/^(?:[a-z][-\w+.]+:[^\s>]+|[a-z\d.!#$%&'*+/=?^_`{|}~-]+@[a-z\d](?:[a-z\d-]{0,61}[a-z\d])?(?:\.[a-z\d](?:[a-z\d-]{0,61}[a-z\d])?)*)>/i.exec(r);if(i)return t.append(Ni(sn.Autolink,n,n+1+i[0].length,[Ni(sn.LinkMark,n,n+1),Ni(sn.URL,n+1,n+i[0].length),Ni(sn.LinkMark,n+i[0].length,n+1+i[0].length)]));let s=/^!--[^>](?:-[^-]|[^-])*?-->/i.exec(r);if(s)return t.append(Ni(sn.Comment,n,n+1+s[0].length));let o=/^\?[^]*?\?>/.exec(r);if(o)return t.append(Ni(sn.ProcessingInstruction,n,n+1+o[0].length));let a=/^(?:![A-Z][^]*?>|!\[CDATA\[[^]*?\]\]>|\/\s*[a-zA-Z][\w-]*\s*>|\s*[a-zA-Z][\w-]*(\s+[a-zA-Z:_][\w-.:]*(?:\s*=\s*(?:[^\s"'=<>`]+|'[^']*'|"[^"]*"))?)*\s*(\/\s*)?>)/.exec(r);return a?t.append(Ni(sn.HTMLTag,n,n+1+a[0].length)):-1},Emphasis(t,e,n){if(e!=95&&e!=42)return-1;let r=n+1;for(;t.char(r)==e;)r++;let i=t.slice(n-1,n),s=t.slice(r,r+1),o=$k.test(i),a=$k.test(s),l=/\s|^$/.test(i),h=/\s|^$/.test(s),f=!h&&(!a||l||o),p=!l&&(!o||h||a),g=f&&(e==42||!p||o),b=p&&(e==42||!f||a);return t.append(new oh(e==95?fie:die,n,r,(g?1:0)|(b?2:0)))},HardBreak(t,e,n){if(e==92&&t.char(n+1)==10)return t.append(Ni(sn.HardBreak,n,n+2));if(e==32){let r=n+1;for(;t.char(r)==32;)r++;if(t.char(r)==10&&r>=n+2)return t.append(Ni(sn.HardBreak,n,r+1))}return-1},Link(t,e,n){return e==91?t.append(new oh(Vv,n,n+1,1)):-1},Image(t,e,n){return e==33&&t.char(n+1)==91?t.append(new oh(_6,n,n+2,1)):-1},LinkEnd(t,e,n){if(e!=93)return-1;for(let r=t.parts.length-1;r>=0;r--){let i=t.parts[r];if(i instanceof oh&&(i.type==Vv||i.type==_6)){if(!i.side||t.skipSpace(i.to)==n&&!/[(\[]/.test(t.slice(n+1,n+2)))return t.parts[r]=null,-1;let s=t.takeContent(r),o=t.parts[r]=sCe(t,s,i.type==Vv?sn.Link:sn.Image,i.from,n+1);if(i.type==Vv)for(let a=0;a<r;a++){let l=t.parts[a];l instanceof oh&&l.type==Vv&&(l.side=0)}return o.to}}return-1}};function sCe(t,e,n,r,i){let{text:s}=t,o=t.char(i),a=i;if(e.unshift(Ni(sn.LinkMark,r,r+(n==sn.Image?2:1))),e.push(Ni(sn.LinkMark,i-1,i)),o==40){let l=t.skipSpace(i+1),h=pie(s,l-t.offset,t.offset),f;h&&(l=t.skipSpace(h.to),l!=h.to&&(f=mie(s,l-t.offset,t.offset),f&&(l=t.skipSpace(f.to)))),t.char(l)==41&&(e.push(Ni(sn.LinkMark,i,i+1)),a=l+1,h&&e.push(h),f&&e.push(f),e.push(Ni(sn.LinkMark,l,a)))}else if(o==91){let l=gie(s,i-t.offset,t.offset,!1);l&&(e.push(l),a=l.to)}return Ni(n,r,a,e)}function pie(t,e,n){if(t.charCodeAt(e)==60){for(let i=e+1;i<t.length;i++){let s=t.charCodeAt(i);if(s==62)return Ni(sn.URL,e+n,i+1+n);if(s==60||s==10)return!1}return null}else{let i=0,s=e;for(let o=!1;s<t.length;s++){let a=t.charCodeAt(s);if(Ef(a))break;if(o)o=!1;else if(a==40)i++;else if(a==41){if(!i)break;i--}else a==92&&(o=!0)}return s>e?Ni(sn.URL,e+n,s+n):s==t.length?null:!1}}function mie(t,e,n){let r=t.charCodeAt(e);if(r!=39&&r!=34&&r!=40)return!1;let i=r==40?41:r;for(let s=e+1,o=!1;s<t.length;s++){let a=t.charCodeAt(s);if(o)o=!1;else{if(a==i)return Ni(sn.LinkTitle,e+n,s+1+n);a==92&&(o=!0)}}return null}function gie(t,e,n,r){for(let i=!1,s=e+1,o=Math.min(t.length,s+999);s<o;s++){let a=t.charCodeAt(s);if(i)i=!1;else{if(a==93)return r?!1:Ni(sn.LinkLabel,e+n,s+1+n);if(r&&!Ef(a)&&(r=!1),a==91)return!1;a==92&&(i=!0)}}return null}class yN{constructor(e,n,r){this.parser=e,this.text=n,this.offset=r,this.parts=[]}char(e){return e>=this.end?-1:this.text.charCodeAt(e-this.offset)}get end(){return this.offset+this.text.length}slice(e,n){return this.text.slice(e-this.offset,n-this.offset)}append(e){return this.parts.push(e),e.to}addDelimiter(e,n,r,i,s){return this.append(new oh(e,n,r,(i?1:0)|(s?2:0)))}get hasOpenLink(){for(let e=this.parts.length-1;e>=0;e--){let n=this.parts[e];if(n instanceof oh&&(n.type==Vv||n.type==_6))return!0}return!1}addElement(e){return this.append(e)}resolveMarkers(e){for(let r=e;r<this.parts.length;r++){let i=this.parts[r];if(!(i instanceof oh&&i.type.resolve&&i.side&2))continue;let s=i.type==fie||i.type==die,o=i.to-i.from,a,l=r-1;for(;l>=e;l--){let k=this.parts[l];if(k instanceof oh&&k.side&1&&k.type==i.type&&!(s&&(i.side&1||k.side&2)&&(k.to-k.from+o)%3==0&&((k.to-k.from)%3||o%3))){a=k;break}}if(!a)continue;let h=i.type.resolve,f=[],p=a.from,g=i.to;if(s){let k=Math.min(2,a.to-a.from,o);p=a.to-k,g=i.from+k,h=k==1?"Emphasis":"StrongEmphasis"}a.type.mark&&f.push(this.elt(a.type.mark,p,a.to));for(let k=l+1;k<r;k++)this.parts[k]instanceof Lk&&f.push(this.parts[k]),this.parts[k]=null;i.type.mark&&f.push(this.elt(i.type.mark,i.from,g));let b=this.elt(h,p,g,f);this.parts[l]=s&&a.from!=p?new oh(a.type,a.from,p,a.side):null,(this.parts[r]=s&&i.to!=g?new oh(i.type,g,i.to,i.side):null)?this.parts.splice(r,0,b):this.parts[r]=b}let n=[];for(let r=e;r<this.parts.length;r++){let i=this.parts[r];i instanceof Lk&&n.push(i)}return n}findOpeningDelimiter(e){for(let n=this.parts.length-1;n>=0;n--){let r=this.parts[n];if(r instanceof oh&&r.type==e&&r.side&1)return n}return null}takeContent(e){let n=this.resolveMarkers(e);return this.parts.length=e,n}getDelimiterAt(e){let n=this.parts[e];return n instanceof oh?n:null}skipSpace(e){return U3(this.text,e-this.offset)+this.offset}elt(e,n,r,i){return typeof e=="string"?Ni(this.parser.getNodeType(e),n,r,i):new hie(e,n)}}yN.linkStart=Vv;yN.imageStart=_6;function f9(t,e){if(!e.length)return t;if(!t.length)return e;let n=t.slice(),r=0;for(let i of e){for(;r<n.length&&n[r].to<i.to;)r++;if(r<n.length&&n[r].from<i.from){let s=n[r];s instanceof Lk&&(n[r]=new Lk(s.type,s.from,s.to,f9(s.children,[i])))}else n.splice(r++,0,i)}return n}const oCe=[sn.CodeBlock,sn.ListItem,sn.OrderedList,sn.BulletList];let aCe=class{constructor(e,n){this.fragments=e,this.input=n,this.i=0,this.fragment=null,this.fragmentEnd=-1,this.cursor=null,e.length&&(this.fragment=e[this.i++])}nextFragment(){this.fragment=this.i<this.fragments.length?this.fragments[this.i++]:null,this.cursor=null,this.fragmentEnd=-1}moveTo(e,n){for(;this.fragment&&this.fragment.to<=e;)this.nextFragment();if(!this.fragment||this.fragment.from>(e?e-1:0))return!1;if(this.fragmentEnd<0){let s=this.fragment.to;for(;s>0&&this.input.read(s-1,s)!=`
`;)s--;this.fragmentEnd=s?s-1:0}let r=this.cursor;r||(r=this.cursor=this.fragment.tree.cursor(),r.firstChild());let i=e+this.fragment.offset;for(;r.to<=i;)if(!r.parent())return!1;for(;;){if(r.from>=i)return this.fragment.from<=n;if(!r.childAfter(i))return!1}}matches(e){let n=this.cursor.tree;return n&&n.prop(Dr.contextHash)==e}takeNodes(e){let n=this.cursor,r=this.fragment.offset,i=this.fragmentEnd-(this.fragment.openEnd?1:0),s=e.absoluteLineStart,o=s,a=e.block.children.length,l=o,h=a;for(;;){if(n.to-r>i){if(n.type.isAnonymous&&n.firstChild())continue;break}let f=yie(n.from-r,e.ranges);if(n.to-r<=e.ranges[e.rangeI].to)e.addNode(n.tree,f);else{let p=new xs(e.parser.nodeSet.types[sn.Paragraph],[],[],0,e.block.hashProp);e.reusePlaceholders.set(p,n.tree),e.addNode(p,f)}if(n.type.is("Block")&&(oCe.indexOf(n.type.id)<0?(o=n.to-r,a=e.block.children.length):(o=l,a=h,l=n.to-r,h=e.block.children.length)),!n.nextSibling())break}for(;e.block.children.length>a;)e.block.children.pop(),e.block.positions.pop();return o-s}};function yie(t,e){let n=t;for(let r=1;r<e.length;r++){let i=e[r-1].to,s=e[r].from;i<t&&(n-=s-i)}return n}const lCe=w0({"Blockquote/...":be.quote,HorizontalRule:be.contentSeparator,"ATXHeading1/... SetextHeading1/...":be.heading1,"ATXHeading2/... SetextHeading2/...":be.heading2,"ATXHeading3/...":be.heading3,"ATXHeading4/...":be.heading4,"ATXHeading5/...":be.heading5,"ATXHeading6/...":be.heading6,"Comment CommentBlock":be.comment,Escape:be.escape,Entity:be.character,"Emphasis/...":be.emphasis,"StrongEmphasis/...":be.strong,"Link/... Image/...":be.link,"OrderedList/... BulletList/...":be.list,"BlockQuote/...":be.quote,"InlineCode CodeText":be.monospace,"URL Autolink":be.url,"HeaderMark HardBreak QuoteMark ListMark LinkMark EmphasisMark CodeMark":be.processingInstruction,"CodeInfo LinkLabel":be.labelName,LinkTitle:be.string,Paragraph:be.content}),uCe=new kD(new LC(uie).extend(lCe),Object.keys(p4).map(t=>p4[t]),Object.keys(p4).map(t=>aie[t]),Object.keys(p4),nCe,Kre,Object.keys(QM).map(t=>QM[t]),Object.keys(QM),[]);function cCe(t,e,n){let r=[];for(let i=t.firstChild,s=e;;i=i.nextSibling){let o=i?i.from:n;if(o>s&&r.push({from:s,to:o}),!i)break;s=i.to}return r}function hCe(t){let{codeParser:e,htmlParser:n}=t;return{wrap:Lne((i,s)=>{let o=i.type.id;if(e&&(o==sn.CodeBlock||o==sn.FencedCode)){let a="";if(o==sn.FencedCode){let h=i.node.getChild(sn.CodeInfo);h&&(a=s.read(h.from,h.to))}let l=e(a);if(l)return{parser:l,overlay:h=>h.type.id==sn.CodeText}}else if(n&&(o==sn.HTMLBlock||o==sn.HTMLTag||o==sn.CommentBlock))return{parser:n,overlay:cCe(i.node,i.from,i.to)};return null})}}const fCe={resolve:"Strikethrough",mark:"StrikethroughMark"},dCe={defineNodes:[{name:"Strikethrough",style:{"Strikethrough/...":be.strikethrough}},{name:"StrikethroughMark",style:be.processingInstruction}],parseInline:[{name:"Strikethrough",parse(t,e,n){if(e!=126||t.char(n+1)!=126||t.char(n+2)==126)return-1;let r=t.slice(n-1,n),i=t.slice(n+2,n+3),s=/\s|^$/.test(r),o=/\s|^$/.test(i),a=$k.test(r),l=$k.test(i);return t.addDelimiter(fCe,n,n+2,!o&&(!l||s||a),!s&&(!a||o||l))},after:"Emphasis"}]};function V3(t,e,n=0,r,i=0){let s=0,o=!0,a=-1,l=-1,h=!1,f=()=>{r.push(t.elt("TableCell",i+a,i+l,t.parser.parseInline(e.slice(a,l),i+a)))};for(let p=n;p<e.length;p++){let g=e.charCodeAt(p);g==124&&!h?((!o||a>-1)&&s++,o=!1,r&&(a>-1&&f(),r.push(t.elt("TableDelimiter",p+i,p+i+1))),a=l=-1):(h||g!=32&&g!=9)&&(a<0&&(a=p),l=p+1),h=!h&&g==92}return a>-1&&(s++,r&&f()),s}function YV(t,e){for(let n=e;n<t.length;n++){let r=t.charCodeAt(n);if(r==124)return!0;r==92&&n++}return!1}const vie=/^\|?(\s*:?-+:?\s*\|)+(\s*:?-+:?\s*)?$/;class HV{constructor(){this.rows=null}nextLine(e,n,r){if(this.rows==null){this.rows=!1;let i;if((n.next==45||n.next==58||n.next==124)&&vie.test(i=n.text.slice(n.pos))){let s=[];V3(e,r.content,0,s,r.start)==V3(e,i,n.pos)&&(this.rows=[e.elt("TableHeader",r.start,r.start+r.content.length,s),e.elt("TableDelimiter",e.lineStart+n.pos,e.lineStart+n.text.length)])}}else if(this.rows){let i=[];V3(e,n.text,n.pos,i,e.lineStart),this.rows.push(e.elt("TableRow",e.lineStart+n.pos,e.lineStart+n.text.length,i))}return!1}finish(e,n){return this.rows?(e.addLeafElement(n,e.elt("Table",n.start,n.start+n.content.length,this.rows)),!0):!1}}const pCe={defineNodes:[{name:"Table",block:!0},{name:"TableHeader",style:{"TableHeader/...":be.heading}},"TableRow",{name:"TableCell",style:be.content},{name:"TableDelimiter",style:be.processingInstruction}],parseBlock:[{name:"Table",leaf(t,e){return YV(e.content,0)?new HV:null},endLeaf(t,e,n){if(n.parsers.some(i=>i instanceof HV)||!YV(e.text,e.basePos))return!1;let r=t.peekLine();return vie.test(r)&&V3(t,e.text,e.basePos)==V3(t,r,e.basePos)},before:"SetextHeading"}]};class mCe{nextLine(){return!1}finish(e,n){return e.addLeafElement(n,e.elt("Task",n.start,n.start+n.content.length,[e.elt("TaskMarker",n.start,n.start+3),...e.parser.parseInline(n.content.slice(3),n.start+3)])),!0}}const gCe={defineNodes:[{name:"Task",block:!0,style:be.list},{name:"TaskMarker",style:be.atom}],parseBlock:[{name:"TaskList",leaf(t,e){return/^\[[ xX]\][ \t]/.test(e.content)&&t.parentType().name=="ListItem"?new mCe:null},after:"SetextHeading"}]},KV=/(www\.)|(https?:\/\/)|([\w.+-]{1,100}@)|(mailto:|xmpp:)/gy,JV=/[\w-]+(\.[\w-]+)+(\/[^\s<]*)?/gy,yCe=/[\w-]+\.[\w-]+($|\/)/,eq=/[\w.+-]+@[\w-]+(\.[\w.-]+)+/gy,tq=/\/[a-zA-Z\d@.]+/gy;function nq(t,e,n,r){let i=0;for(let s=e;s<n;s++)t[s]==r&&i++;return i}function vCe(t,e){JV.lastIndex=e;let n=JV.exec(t);if(!n||yCe.exec(n[0])[0].indexOf("_")>-1)return-1;let r=e+n[0].length;for(;;){let i=t[r-1],s;if(/[?!.,:*_~]/.test(i)||i==")"&&nq(t,e,r,")")>nq(t,e,r,"("))r--;else if(i==";"&&(s=/&(?:#\d+|#x[a-f\d]+|\w+);$/.exec(t.slice(e,r))))r=e+s.index;else break}return r}function rq(t,e){eq.lastIndex=e;let n=eq.exec(t);if(!n)return-1;let r=n[0][n[0].length-1];return r=="_"||r=="-"?-1:e+n[0].length-(r=="."?1:0)}const bCe={parseInline:[{name:"Autolink",parse(t,e,n){let r=n-t.offset;if(r&&/\w/.test(t.text[r-1]))return-1;KV.lastIndex=r;let i=KV.exec(t.text),s=-1;if(!i)return-1;if(i[1]||i[2]){if(s=vCe(t.text,r+i[0].length),s>-1&&t.hasOpenLink){let o=/([^\[\]]|\[[^\]]*\])*/.exec(t.text.slice(r,s));s=r+o[0].length}}else i[3]?s=rq(t.text,r):(s=rq(t.text,r+i[0].length),s>-1&&i[0]=="xmpp:"&&(tq.lastIndex=s,i=tq.exec(t.text),i&&(s=i.index+i[0].length)));return s<0?-1:(t.addElement(t.elt("URL",n,s+t.offset)),s+t.offset)}}]},_Ce=[pCe,gCe,dCe,bCe];function bie(t,e,n){return(r,i,s)=>{if(i!=t||r.char(s+1)==t)return-1;let o=[r.elt(n,s,s+1)];for(let a=s+1;a<r.end;a++){let l=r.char(a);if(l==t)return r.addElement(r.elt(e,s,a+1,o.concat(r.elt(n,a,a+1))));if(l==92&&o.push(r.elt("Escape",a,a+++2)),Ef(l))break}return-1}}const xCe={defineNodes:[{name:"Superscript",style:be.special(be.content)},{name:"SuperscriptMark",style:be.processingInstruction}],parseInline:[{name:"Superscript",parse:bie(94,"Superscript","SuperscriptMark")}]},wCe={defineNodes:[{name:"Subscript",style:be.special(be.content)},{name:"SubscriptMark",style:be.processingInstruction}],parseInline:[{name:"Subscript",parse:bie(126,"Subscript","SubscriptMark")}]},OCe={defineNodes:[{name:"Emoji",style:be.character}],parseInline:[{name:"Emoji",parse(t,e,n){let r;return e!=58||!(r=/^[a-zA-Z_0-9]+:/.exec(t.slice(n+1,t.end)))?-1:t.addElement(t.elt("Emoji",n,n+1+r[0].length))}}]};var iq={};class x6{constructor(e,n,r,i,s,o,a,l,h,f=0,p){this.p=e,this.stack=n,this.state=r,this.reducePos=i,this.pos=s,this.score=o,this.buffer=a,this.bufferBase=l,this.curContext=h,this.lookAhead=f,this.parent=p}toString(){return`[${this.stack.filter((e,n)=>n%3==0).concat(this.state)}]@${this.pos}${this.score?"!"+this.score:""}`}static start(e,n,r=0){let i=e.parser.context;return new x6(e,[],n,r,r,0,[],0,i?new sq(i,i.start):null,0,null)}get context(){return this.curContext?this.curContext.context:null}pushState(e,n){this.stack.push(this.state,n,this.bufferBase+this.buffer.length),this.state=e}reduce(e){var n;let r=e>>19,i=e&65535,{parser:s}=this.p,o=this.reducePos<this.pos-25;o&&this.setLookAhead(this.pos);let a=s.dynamicPrecedence(i);if(a&&(this.score+=a),r==0){this.pushState(s.getGoto(this.state,i,!0),this.reducePos),i<s.minRepeatTerm&&this.storeNode(i,this.reducePos,this.reducePos,o?8:4,!0),this.reduceContext(i,this.reducePos);return}let l=this.stack.length-(r-1)*3-(e&262144?6:0),h=l?this.stack[l-2]:this.p.ranges[0].from,f=this.reducePos-h;f>=2e3&&!(!((n=this.p.parser.nodeSet.types[i])===null||n===void 0)&&n.isAnonymous)&&(h==this.p.lastBigReductionStart?(this.p.bigReductionCount++,this.p.lastBigReductionSize=f):this.p.lastBigReductionSize<f&&(this.p.bigReductionCount=1,this.p.lastBigReductionStart=h,this.p.lastBigReductionSize=f));let p=l?this.stack[l-1]:0,g=this.bufferBase+this.buffer.length-p;if(i<s.minRepeatTerm||e&131072){let b=s.stateFlag(this.state,1)?this.pos:this.reducePos;this.storeNode(i,h,b,g+4,!0)}if(e&262144)this.state=this.stack[l];else{let b=this.stack[l-3];this.state=s.getGoto(b,i,!0)}for(;this.stack.length>l;)this.stack.pop();this.reduceContext(i,h)}storeNode(e,n,r,i=4,s=!1){if(e==0&&(!this.stack.length||this.stack[this.stack.length-1]<this.buffer.length+this.bufferBase)){let o=this,a=this.buffer.length;if(a==0&&o.parent&&(a=o.bufferBase-o.parent.bufferBase,o=o.parent),a>0&&o.buffer[a-4]==0&&o.buffer[a-1]>-1){if(n==r)return;if(o.buffer[a-2]>=n){o.buffer[a-2]=r;return}}}if(!s||this.pos==r)this.buffer.push(e,n,r,i);else{let o=this.buffer.length;if(o>0&&(this.buffer[o-4]!=0||this.buffer[o-1]<0)){let a=!1;for(let l=o;l>0&&this.buffer[l-2]>r;l-=4)if(this.buffer[l-1]>=0){a=!0;break}if(a)for(;o>0&&this.buffer[o-2]>r;)this.buffer[o]=this.buffer[o-4],this.buffer[o+1]=this.buffer[o-3],this.buffer[o+2]=this.buffer[o-2],this.buffer[o+3]=this.buffer[o-1],o-=4,i>4&&(i-=4)}this.buffer[o]=e,this.buffer[o+1]=n,this.buffer[o+2]=r,this.buffer[o+3]=i}}shift(e,n,r,i){if(e&131072)this.pushState(e&65535,this.pos);else if((e&262144)==0){let s=e,{parser:o}=this.p;(i>this.pos||n<=o.maxNode)&&(this.pos=i,o.stateFlag(s,1)||(this.reducePos=i)),this.pushState(s,r),this.shiftContext(n,r),n<=o.maxNode&&this.buffer.push(n,r,i,4)}else this.pos=i,this.shiftContext(n,r),n<=this.p.parser.maxNode&&this.buffer.push(n,r,i,4)}apply(e,n,r,i){e&65536?this.reduce(e):this.shift(e,n,r,i)}useNode(e,n){let r=this.p.reused.length-1;(r<0||this.p.reused[r]!=e)&&(this.p.reused.push(e),r++);let i=this.pos;this.reducePos=this.pos=i+e.length,this.pushState(n,i),this.buffer.push(r,i,this.reducePos,-1),this.curContext&&this.updateContext(this.curContext.tracker.reuse(this.curContext.context,e,this,this.p.stream.reset(this.pos-e.length)))}split(){let e=this,n=e.buffer.length;for(;n>0&&e.buffer[n-2]>e.reducePos;)n-=4;let r=e.buffer.slice(n),i=e.bufferBase+n;for(;e&&i==e.bufferBase;)e=e.parent;return new x6(this.p,this.stack.slice(),this.state,this.reducePos,this.pos,this.score,r,i,this.curContext,this.lookAhead,e)}recoverByDelete(e,n){let r=e<=this.p.parser.maxNode;r&&this.storeNode(e,this.pos,n,4),this.storeNode(0,this.pos,n,r?8:4),this.pos=this.reducePos=n,this.score-=190}canShift(e){for(let n=new SCe(this);;){let r=this.p.parser.stateSlot(n.state,4)||this.p.parser.hasAction(n.state,e);if(r==0)return!1;if((r&65536)==0)return!0;n.reduce(r)}}recoverByInsert(e){if(this.stack.length>=300)return[];let n=this.p.parser.nextStates(this.state);if(n.length>8||this.stack.length>=120){let i=[];for(let s=0,o;s<n.length;s+=2)(o=n[s+1])!=this.state&&this.p.parser.hasAction(o,e)&&i.push(n[s],o);if(this.stack.length<120)for(let s=0;i.length<8&&s<n.length;s+=2){let o=n[s+1];i.some((a,l)=>l&1&&a==o)||i.push(n[s],o)}n=i}let r=[];for(let i=0;i<n.length&&r.length<4;i+=2){let s=n[i+1];if(s==this.state)continue;let o=this.split();o.pushState(s,this.pos),o.storeNode(0,o.pos,o.pos,4,!0),o.shiftContext(n[i],this.pos),o.reducePos=this.pos,o.score-=200,r.push(o)}return r}forceReduce(){let{parser:e}=this.p,n=e.stateSlot(this.state,5);if((n&65536)==0)return!1;if(!e.validAction(this.state,n)){let r=n>>19,i=n&65535,s=this.stack.length-r*3;if(s<0||e.getGoto(this.stack[s],i,!1)<0){let o=this.findForcedReduction();if(o==null)return!1;n=o}this.storeNode(0,this.pos,this.pos,4,!0),this.score-=100}return this.reducePos=this.pos,this.reduce(n),!0}findForcedReduction(){let{parser:e}=this.p,n=[],r=(i,s)=>{if(!n.includes(i))return n.push(i),e.allActions(i,o=>{if(!(o&393216))if(o&65536){let a=(o>>19)-s;if(a>1){let l=o&65535,h=this.stack.length-a*3;if(h>=0&&e.getGoto(this.stack[h],l,!1)>=0)return a<<19|65536|l}}else{let a=r(o,s+1);if(a!=null)return a}})};return r(this.state,0)}forceAll(){for(;!this.p.parser.stateFlag(this.state,2);)if(!this.forceReduce()){this.storeNode(0,this.pos,this.pos,4,!0);break}return this}get deadEnd(){if(this.stack.length!=3)return!1;let{parser:e}=this.p;return e.data[e.stateSlot(this.state,1)]==65535&&!e.stateSlot(this.state,4)}restart(){this.storeNode(0,this.pos,this.pos,4,!0),this.state=this.stack[0],this.stack.length=0}sameState(e){if(this.state!=e.state||this.stack.length!=e.stack.length)return!1;for(let n=0;n<this.stack.length;n+=3)if(this.stack[n]!=e.stack[n])return!1;return!0}get parser(){return this.p.parser}dialectEnabled(e){return this.p.parser.dialect.flags[e]}shiftContext(e,n){this.curContext&&this.updateContext(this.curContext.tracker.shift(this.curContext.context,e,this,this.p.stream.reset(n)))}reduceContext(e,n){this.curContext&&this.updateContext(this.curContext.tracker.reduce(this.curContext.context,e,this,this.p.stream.reset(n)))}emitContext(){let e=this.buffer.length-1;(e<0||this.buffer[e]!=-3)&&this.buffer.push(this.curContext.hash,this.pos,this.pos,-3)}emitLookAhead(){let e=this.buffer.length-1;(e<0||this.buffer[e]!=-4)&&this.buffer.push(this.lookAhead,this.pos,this.pos,-4)}updateContext(e){if(e!=this.curContext.context){let n=new sq(this.curContext.tracker,e);n.hash!=this.curContext.hash&&this.emitContext(),this.curContext=n}}setLookAhead(e){e>this.lookAhead&&(this.emitLookAhead(),this.lookAhead=e)}close(){this.curContext&&this.curContext.tracker.strict&&this.emitContext(),this.lookAhead>0&&this.emitLookAhead()}}class sq{constructor(e,n){this.tracker=e,this.context=n,this.hash=e.strict?e.hash(n):0}}class SCe{constructor(e){this.start=e,this.state=e.state,this.stack=e.stack,this.base=this.stack.length}reduce(e){let n=e&65535,r=e>>19;r==0?(this.stack==this.start.stack&&(this.stack=this.stack.slice()),this.stack.push(this.state,0,0),this.base+=3):this.base-=(r-1)*3;let i=this.start.p.parser.getGoto(this.stack[this.base-3],n,!0);this.state=i}}class w6{constructor(e,n,r){this.stack=e,this.pos=n,this.index=r,this.buffer=e.buffer,this.index==0&&this.maybeNext()}static create(e,n=e.bufferBase+e.buffer.length){return new w6(e,n,n-e.bufferBase)}maybeNext(){let e=this.stack.parent;e!=null&&(this.index=this.stack.bufferBase-e.bufferBase,this.stack=e,this.buffer=e.buffer)}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}next(){this.index-=4,this.pos-=4,this.index==0&&this.maybeNext()}fork(){return new w6(this.stack,this.pos,this.index)}}function _3(t,e=Uint16Array){if(typeof t!="string")return t;let n=null;for(let r=0,i=0;r<t.length;){let s=0;for(;;){let o=t.charCodeAt(r++),a=!1;if(o==126){s=65535;break}o>=92&&o--,o>=34&&o--;let l=o-32;if(l>=46&&(l-=46,a=!0),s+=l,a)break;s*=46}n?n[i++]=s:n=new e(s)}return n}class C5{constructor(){this.start=-1,this.value=-1,this.end=-1,this.extended=-1,this.lookAhead=0,this.mask=0,this.context=0}}const oq=new C5;class kCe{constructor(e,n){this.input=e,this.ranges=n,this.chunk="",this.chunkOff=0,this.chunk2="",this.chunk2Pos=0,this.next=-1,this.token=oq,this.rangeIndex=0,this.pos=this.chunkPos=n[0].from,this.range=n[0],this.end=n[n.length-1].to,this.readNext()}resolveOffset(e,n){let r=this.range,i=this.rangeIndex,s=this.pos+e;for(;s<r.from;){if(!i)return null;let o=this.ranges[--i];s-=r.from-o.to,r=o}for(;n<0?s>r.to:s>=r.to;){if(i==this.ranges.length-1)return null;let o=this.ranges[++i];s+=o.from-r.to,r=o}return s}clipPos(e){if(e>=this.range.from&&e<this.range.to)return e;for(let n of this.ranges)if(n.to>e)return Math.max(e,n.from);return this.end}peek(e){let n=this.chunkOff+e,r,i;if(n>=0&&n<this.chunk.length)r=this.pos+e,i=this.chunk.charCodeAt(n);else{let s=this.resolveOffset(e,1);if(s==null)return-1;if(r=s,r>=this.chunk2Pos&&r<this.chunk2Pos+this.chunk2.length)i=this.chunk2.charCodeAt(r-this.chunk2Pos);else{let o=this.rangeIndex,a=this.range;for(;a.to<=r;)a=this.ranges[++o];this.chunk2=this.input.chunk(this.chunk2Pos=r),r+this.chunk2.length>a.to&&(this.chunk2=this.chunk2.slice(0,a.to-r)),i=this.chunk2.charCodeAt(0)}}return r>=this.token.lookAhead&&(this.token.lookAhead=r+1),i}acceptToken(e,n=0){let r=n?this.resolveOffset(n,-1):this.pos;if(r==null||r<this.token.start)throw new RangeError("Token end out of bounds");this.token.value=e,this.token.end=r}acceptTokenTo(e,n){this.token.value=e,this.token.end=n}getChunk(){if(this.pos>=this.chunk2Pos&&this.pos<this.chunk2Pos+this.chunk2.length){let{chunk:e,chunkPos:n}=this;this.chunk=this.chunk2,this.chunkPos=this.chunk2Pos,this.chunk2=e,this.chunk2Pos=n,this.chunkOff=this.pos-this.chunkPos}else{this.chunk2=this.chunk,this.chunk2Pos=this.chunkPos;let e=this.input.chunk(this.pos),n=this.pos+e.length;this.chunk=n>this.range.to?e.slice(0,this.range.to-this.pos):e,this.chunkPos=this.pos,this.chunkOff=0}}readNext(){return this.chunkOff>=this.chunk.length&&(this.getChunk(),this.chunkOff==this.chunk.length)?this.next=-1:this.next=this.chunk.charCodeAt(this.chunkOff)}advance(e=1){for(this.chunkOff+=e;this.pos+e>=this.range.to;){if(this.rangeIndex==this.ranges.length-1)return this.setDone();e-=this.range.to-this.pos,this.range=this.ranges[++this.rangeIndex],this.pos=this.range.from}return this.pos+=e,this.pos>=this.token.lookAhead&&(this.token.lookAhead=this.pos+1),this.readNext()}setDone(){return this.pos=this.chunkPos=this.end,this.range=this.ranges[this.rangeIndex=this.ranges.length-1],this.chunk="",this.next=-1}reset(e,n){if(n?(this.token=n,n.start=e,n.lookAhead=e+1,n.value=n.extended=-1):this.token=oq,this.pos!=e){if(this.pos=e,e==this.end)return this.setDone(),this;for(;e<this.range.from;)this.range=this.ranges[--this.rangeIndex];for(;e>=this.range.to;)this.range=this.ranges[++this.rangeIndex];e>=this.chunkPos&&e<this.chunkPos+this.chunk.length?this.chunkOff=e-this.chunkPos:(this.chunk="",this.chunkOff=0),this.readNext()}return this}read(e,n){if(e>=this.chunkPos&&n<=this.chunkPos+this.chunk.length)return this.chunk.slice(e-this.chunkPos,n-this.chunkPos);if(e>=this.chunk2Pos&&n<=this.chunk2Pos+this.chunk2.length)return this.chunk2.slice(e-this.chunk2Pos,n-this.chunk2Pos);if(e>=this.range.from&&n<=this.range.to)return this.input.read(e,n);let r="";for(let i of this.ranges){if(i.from>=n)break;i.to>e&&(r+=this.input.read(Math.max(i.from,e),Math.min(i.to,n)))}return r}}class Ow{constructor(e,n){this.data=e,this.id=n}token(e,n){let{parser:r}=n.p;_ie(this.data,e,n,this.id,r.data,r.tokenPrecTable)}}Ow.prototype.contextual=Ow.prototype.fallback=Ow.prototype.extend=!1;class O6{constructor(e,n,r){this.precTable=n,this.elseToken=r,this.data=typeof e=="string"?_3(e):e}token(e,n){let r=e.pos,i=0;for(;;){let s=e.next<0,o=e.resolveOffset(1,1);if(_ie(this.data,e,n,0,this.data,this.precTable),e.token.value>-1)break;if(this.elseToken==null)return;if(s||i++,o==null)break;e.reset(o,e.token)}i&&(e.reset(r,e.token),e.acceptToken(this.elseToken,i))}}O6.prototype.contextual=Ow.prototype.fallback=Ow.prototype.extend=!1;class Mc{constructor(e,n={}){this.token=e,this.contextual=!!n.contextual,this.fallback=!!n.fallback,this.extend=!!n.extend}}function _ie(t,e,n,r,i,s){let o=0,a=1<<r,{dialect:l}=n.p.parser;e:for(;(a&t[o])!=0;){let h=t[o+1];for(let b=o+3;b<h;b+=2)if((t[b+1]&a)>0){let x=t[b];if(l.allows(x)&&(e.token.value==-1||e.token.value==x||CCe(x,e.token.value,i,s))){e.acceptToken(x);break}}let f=e.next,p=0,g=t[o+2];if(e.next<0&&g>p&&t[h+g*3-3]==65535){o=t[h+g*3-1];continue e}for(;p<g;){let b=p+g>>1,x=h+b+(b<<1),k=t[x],T=t[x+1]||65536;if(f<k)g=b;else if(f>=T)p=b+1;else{o=t[x+2],e.advance();continue e}}break}}function aq(t,e,n){for(let r=e,i;(i=t[r])!=65535;r++)if(i==n)return r-e;return-1}function CCe(t,e,n,r){let i=aq(n,r,e);return i<0||aq(n,r,t)<i}const Kc=typeof process<"u"&&iq&&/\bparse\b/.test(iq.LOG);let jM=null;function lq(t,e,n){let r=t.cursor(so.IncludeAnonymous);for(r.moveTo(e);;)if(!(n<0?r.childBefore(e):r.childAfter(e)))for(;;){if((n<0?r.to<e:r.from>e)&&!r.type.isError)return n<0?Math.max(0,Math.min(r.to-1,e-25)):Math.min(t.length,Math.max(r.from+1,e+25));if(n<0?r.prevSibling():r.nextSibling())break;if(!r.parent())return n<0?0:t.length}}class ACe{constructor(e,n){this.fragments=e,this.nodeSet=n,this.i=0,this.fragment=null,this.safeFrom=-1,this.safeTo=-1,this.trees=[],this.start=[],this.index=[],this.nextFragment()}nextFragment(){let e=this.fragment=this.i==this.fragments.length?null:this.fragments[this.i++];if(e){for(this.safeFrom=e.openStart?lq(e.tree,e.from+e.offset,1)-e.offset:e.from,this.safeTo=e.openEnd?lq(e.tree,e.to+e.offset,-1)-e.offset:e.to;this.trees.length;)this.trees.pop(),this.start.pop(),this.index.pop();this.trees.push(e.tree),this.start.push(-e.offset),this.index.push(0),this.nextStart=this.safeFrom}else this.nextStart=1e9}nodeAt(e){if(e<this.nextStart)return null;for(;this.fragment&&this.safeTo<=e;)this.nextFragment();if(!this.fragment)return null;for(;;){let n=this.trees.length-1;if(n<0)return this.nextFragment(),null;let r=this.trees[n],i=this.index[n];if(i==r.children.length){this.trees.pop(),this.start.pop(),this.index.pop();continue}let s=r.children[i],o=this.start[n]+r.positions[i];if(o>e)return this.nextStart=o,null;if(s instanceof xs){if(o==e){if(o<this.safeFrom)return null;let a=o+s.length;if(a<=this.safeTo){let l=s.prop(Dr.lookAhead);if(!l||a+l<this.fragment.to)return s}}this.index[n]++,o+s.length>=Math.max(this.safeFrom,e)&&(this.trees.push(s),this.start.push(o),this.index.push(0))}else this.index[n]++,this.nextStart=o+s.length}}}class ECe{constructor(e,n){this.stream=n,this.tokens=[],this.mainToken=null,this.actions=[],this.tokens=e.tokenizers.map(r=>new C5)}getActions(e){let n=0,r=null,{parser:i}=e.p,{tokenizers:s}=i,o=i.stateSlot(e.state,3),a=e.curContext?e.curContext.hash:0,l=0;for(let h=0;h<s.length;h++){if((1<<h&o)==0)continue;let f=s[h],p=this.tokens[h];if(!(r&&!f.fallback)&&((f.contextual||p.start!=e.pos||p.mask!=o||p.context!=a)&&(this.updateCachedToken(p,f,e),p.mask=o,p.context=a),p.lookAhead>p.end+25&&(l=Math.max(p.lookAhead,l)),p.value!=0)){let g=n;if(p.extended>-1&&(n=this.addActions(e,p.extended,p.end,n)),n=this.addActions(e,p.value,p.end,n),!f.extend&&(r=p,n>g))break}}for(;this.actions.length>n;)this.actions.pop();return l&&e.setLookAhead(l),!r&&e.pos==this.stream.end&&(r=new C5,r.value=e.p.parser.eofTerm,r.start=r.end=e.pos,n=this.addActions(e,r.value,r.end,n)),this.mainToken=r,this.actions}getMainToken(e){if(this.mainToken)return this.mainToken;let n=new C5,{pos:r,p:i}=e;return n.start=r,n.end=Math.min(r+1,i.stream.end),n.value=r==i.stream.end?i.parser.eofTerm:0,n}updateCachedToken(e,n,r){let i=this.stream.clipPos(r.pos);if(n.token(this.stream.reset(i,e),r),e.value>-1){let{parser:s}=r.p;for(let o=0;o<s.specialized.length;o++)if(s.specialized[o]==e.value){let a=s.specializers[o](this.stream.read(e.start,e.end),r);if(a>=0&&r.p.parser.dialect.allows(a>>1)){(a&1)==0?e.value=a>>1:e.extended=a>>1;break}}}else e.value=0,e.end=this.stream.clipPos(i+1)}putAction(e,n,r,i){for(let s=0;s<i;s+=3)if(this.actions[s]==e)return i;return this.actions[i++]=e,this.actions[i++]=n,this.actions[i++]=r,i}addActions(e,n,r,i){let{state:s}=e,{parser:o}=e.p,{data:a}=o;for(let l=0;l<2;l++)for(let h=o.stateSlot(s,l?2:1);;h+=3){if(a[h]==65535)if(a[h+1]==1)h=Tg(a,h+2);else{i==0&&a[h+1]==2&&(i=this.putAction(Tg(a,h+2),n,r,i));break}a[h]==n&&(i=this.putAction(Tg(a,h+1),n,r,i))}return i}}class TCe{constructor(e,n,r,i){this.parser=e,this.input=n,this.ranges=i,this.recovering=0,this.nextStackID=9812,this.minStackPos=0,this.reused=[],this.stoppedAt=null,this.lastBigReductionStart=-1,this.lastBigReductionSize=0,this.bigReductionCount=0,this.stream=new kCe(n,i),this.tokens=new ECe(e,this.stream),this.topTerm=e.top[1];let{from:s}=i[0];this.stacks=[x6.start(this,e.top[0],s)],this.fragments=r.length&&this.stream.end-s>e.bufferLength*4?new ACe(r,e.nodeSet):null}get parsedPos(){return this.minStackPos}advance(){let e=this.stacks,n=this.minStackPos,r=this.stacks=[],i,s;if(this.bigReductionCount>300&&e.length==1){let[o]=e;for(;o.forceReduce()&&o.stack.length&&o.stack[o.stack.length-2]>=this.lastBigReductionStart;);this.bigReductionCount=this.lastBigReductionSize=0}for(let o=0;o<e.length;o++){let a=e[o];for(;;){if(this.tokens.mainToken=null,a.pos>n)r.push(a);else{if(this.advanceStack(a,r,e))continue;{i||(i=[],s=[]),i.push(a);let l=this.tokens.getMainToken(a);s.push(l.value,l.end)}}break}}if(!r.length){let o=i&&DCe(i);if(o)return Kc&&console.log("Finish with "+this.stackID(o)),this.stackToTree(o);if(this.parser.strict)throw Kc&&i&&console.log("Stuck with token "+(this.tokens.mainToken?this.parser.getName(this.tokens.mainToken.value):"none")),new SyntaxError("No parse at "+n);this.recovering||(this.recovering=5)}if(this.recovering&&i){let o=this.stoppedAt!=null&&i[0].pos>this.stoppedAt?i[0]:this.runRecovery(i,s,r);if(o)return Kc&&console.log("Force-finish "+this.stackID(o)),this.stackToTree(o.forceAll())}if(this.recovering){let o=this.recovering==1?1:this.recovering*3;if(r.length>o)for(r.sort((a,l)=>l.score-a.score);r.length>o;)r.pop();r.some(a=>a.reducePos>n)&&this.recovering--}else if(r.length>1){e:for(let o=0;o<r.length-1;o++){let a=r[o];for(let l=o+1;l<r.length;l++){let h=r[l];if(a.sameState(h)||a.buffer.length>500&&h.buffer.length>500)if((a.score-h.score||a.buffer.length-h.buffer.length)>0)r.splice(l--,1);else{r.splice(o--,1);continue e}}}r.length>12&&r.splice(12,r.length-12)}this.minStackPos=r[0].pos;for(let o=1;o<r.length;o++)r[o].pos<this.minStackPos&&(this.minStackPos=r[o].pos);return null}stopAt(e){if(this.stoppedAt!=null&&this.stoppedAt<e)throw new RangeError("Can't move stoppedAt forward");this.stoppedAt=e}advanceStack(e,n,r){let i=e.pos,{parser:s}=this,o=Kc?this.stackID(e)+" -> ":"";if(this.stoppedAt!=null&&i>this.stoppedAt)return e.forceReduce()?e:null;if(this.fragments){let h=e.curContext&&e.curContext.tracker.strict,f=h?e.curContext.hash:0;for(let p=this.fragments.nodeAt(i);p;){let g=this.parser.nodeSet.types[p.type.id]==p.type?s.getGoto(e.state,p.type.id):-1;if(g>-1&&p.length&&(!h||(p.prop(Dr.contextHash)||0)==f))return e.useNode(p,g),Kc&&console.log(o+this.stackID(e)+` (via reuse of ${s.getName(p.type.id)})`),!0;if(!(p instanceof xs)||p.children.length==0||p.positions[0]>0)break;let b=p.children[0];if(b instanceof xs&&p.positions[0]==0)p=b;else break}}let a=s.stateSlot(e.state,4);if(a>0)return e.reduce(a),Kc&&console.log(o+this.stackID(e)+` (via always-reduce ${s.getName(a&65535)})`),!0;if(e.stack.length>=8400)for(;e.stack.length>6e3&&e.forceReduce(););let l=this.tokens.getActions(e);for(let h=0;h<l.length;){let f=l[h++],p=l[h++],g=l[h++],b=h==l.length||!r,x=b?e:e.split(),k=this.tokens.mainToken;if(x.apply(f,p,k?k.start:x.pos,g),Kc&&console.log(o+this.stackID(x)+` (via ${(f&65536)==0?"shift":`reduce of ${s.getName(f&65535)}`} for ${s.getName(p)} @ ${i}${x==e?"":", split"})`),b)return!0;x.pos>i?n.push(x):r.push(x)}return!1}advanceFully(e,n){let r=e.pos;for(;;){if(!this.advanceStack(e,null,null))return!1;if(e.pos>r)return uq(e,n),!0}}runRecovery(e,n,r){let i=null,s=!1;for(let o=0;o<e.length;o++){let a=e[o],l=n[o<<1],h=n[(o<<1)+1],f=Kc?this.stackID(a)+" -> ":"";if(a.deadEnd&&(s||(s=!0,a.restart(),Kc&&console.log(f+this.stackID(a)+" (restarted)"),this.advanceFully(a,r))))continue;let p=a.split(),g=f;for(let b=0;b<10&&p.forceReduce()&&(Kc&&console.log(g+this.stackID(p)+" (via force-reduce)"),!this.advanceFully(p,r));b++)Kc&&(g=this.stackID(p)+" -> ");for(let b of a.recoverByInsert(l))Kc&&console.log(f+this.stackID(b)+" (via recover-insert)"),this.advanceFully(b,r);this.stream.end>a.pos?(h==a.pos&&(h++,l=0),a.recoverByDelete(l,h),Kc&&console.log(f+this.stackID(a)+` (via recover-delete ${this.parser.getName(l)})`),uq(a,r)):(!i||i.score<a.score)&&(i=a)}return i}stackToTree(e){return e.close(),xs.build({buffer:w6.create(e),nodeSet:this.parser.nodeSet,topID:this.topTerm,maxBufferLength:this.parser.bufferLength,reused:this.reused,start:this.ranges[0].from,length:e.pos-this.ranges[0].from,minRepeatType:this.parser.minRepeatTerm})}stackID(e){let n=(jM||(jM=new WeakMap)).get(e);return n||jM.set(e,n=String.fromCodePoint(this.nextStackID++)),n+e}}function uq(t,e){for(let n=0;n<e.length;n++){let r=e[n];if(r.pos==t.pos&&r.sameState(t)){e[n].score<t.score&&(e[n]=t);return}}e.push(t)}class PCe{constructor(e,n,r){this.source=e,this.flags=n,this.disabled=r}allows(e){return!this.disabled||this.disabled[e]==0}}const UM=t=>t;class xie{constructor(e){this.start=e.start,this.shift=e.shift||UM,this.reduce=e.reduce||UM,this.reuse=e.reuse||UM,this.hash=e.hash||(()=>0),this.strict=e.strict!==!1}}class c0 extends qB{constructor(e){if(super(),this.wrappers=[],e.version!=14)throw new RangeError(`Parser version (${e.version}) doesn't match runtime version (14)`);let n=e.nodeNames.split(" ");this.minRepeatTerm=n.length;for(let a=0;a<e.repeatNodeCount;a++)n.push("");let r=Object.keys(e.topRules).map(a=>e.topRules[a][1]),i=[];for(let a=0;a<n.length;a++)i.push([]);function s(a,l,h){i[a].push([l,l.deserialize(String(h))])}if(e.nodeProps)for(let a of e.nodeProps){let l=a[0];typeof l=="string"&&(l=Dr[l]);for(let h=1;h<a.length;){let f=a[h++];if(f>=0)s(f,l,a[h++]);else{let p=a[h+-f];for(let g=-f;g>0;g--)s(a[h++],l,p);h++}}}this.nodeSet=new LC(n.map((a,l)=>za.define({name:l>=this.minRepeatTerm?void 0:a,id:l,props:i[l],top:r.indexOf(l)>-1,error:l==0,skipped:e.skippedNodes&&e.skippedNodes.indexOf(l)>-1}))),e.propSources&&(this.nodeSet=this.nodeSet.extend(...e.propSources)),this.strict=!1,this.bufferLength=Dne;let o=_3(e.tokenData);this.context=e.context,this.specializerSpecs=e.specialized||[],this.specialized=new Uint16Array(this.specializerSpecs.length);for(let a=0;a<this.specializerSpecs.length;a++)this.specialized[a]=this.specializerSpecs[a].term;this.specializers=this.specializerSpecs.map(cq),this.states=_3(e.states,Uint32Array),this.data=_3(e.stateData),this.goto=_3(e.goto),this.maxTerm=e.maxTerm,this.tokenizers=e.tokenizers.map(a=>typeof a=="number"?new Ow(o,a):a),this.topRules=e.topRules,this.dialects=e.dialects||{},this.dynamicPrecedences=e.dynamicPrecedences||null,this.tokenPrecTable=e.tokenPrec,this.termNames=e.termNames||null,this.maxNode=this.nodeSet.types.length-1,this.dialect=this.parseDialect(),this.top=this.topRules[Object.keys(this.topRules)[0]]}createParse(e,n,r){let i=new TCe(this,e,n,r);for(let s of this.wrappers)i=s(i,e,n,r);return i}getGoto(e,n,r=!1){let i=this.goto;if(n>=i[0])return-1;for(let s=i[n+1];;){let o=i[s++],a=o&1,l=i[s++];if(a&&r)return l;for(let h=s+(o>>1);s<h;s++)if(i[s]==e)return l;if(a)return-1}}hasAction(e,n){let r=this.data;for(let i=0;i<2;i++)for(let s=this.stateSlot(e,i?2:1),o;;s+=3){if((o=r[s])==65535)if(r[s+1]==1)o=r[s=Tg(r,s+2)];else{if(r[s+1]==2)return Tg(r,s+2);break}if(o==n||o==0)return Tg(r,s+1)}return 0}stateSlot(e,n){return this.states[e*6+n]}stateFlag(e,n){return(this.stateSlot(e,0)&n)>0}validAction(e,n){return!!this.allActions(e,r=>r==n?!0:null)}allActions(e,n){let r=this.stateSlot(e,4),i=r?n(r):void 0;for(let s=this.stateSlot(e,1);i==null;s+=3){if(this.data[s]==65535)if(this.data[s+1]==1)s=Tg(this.data,s+2);else break;i=n(Tg(this.data,s+1))}return i}nextStates(e){let n=[];for(let r=this.stateSlot(e,1);;r+=3){if(this.data[r]==65535)if(this.data[r+1]==1)r=Tg(this.data,r+2);else break;if((this.data[r+2]&1)==0){let i=this.data[r+1];n.some((s,o)=>o&1&&s==i)||n.push(this.data[r],i)}}return n}configure(e){let n=Object.assign(Object.create(c0.prototype),this);if(e.props&&(n.nodeSet=this.nodeSet.extend(...e.props)),e.top){let r=this.topRules[e.top];if(!r)throw new RangeError(`Invalid top rule name ${e.top}`);n.top=r}return e.tokenizers&&(n.tokenizers=this.tokenizers.map(r=>{let i=e.tokenizers.find(s=>s.from==r);return i?i.to:r})),e.specializers&&(n.specializers=this.specializers.slice(),n.specializerSpecs=this.specializerSpecs.map((r,i)=>{let s=e.specializers.find(a=>a.from==r.external);if(!s)return r;let o=Object.assign(Object.assign({},r),{external:s.to});return n.specializers[i]=cq(o),o})),e.contextTracker&&(n.context=e.contextTracker),e.dialect&&(n.dialect=this.parseDialect(e.dialect)),e.strict!=null&&(n.strict=e.strict),e.wrap&&(n.wrappers=n.wrappers.concat(e.wrap)),e.bufferLength!=null&&(n.bufferLength=e.bufferLength),n}hasWrappers(){return this.wrappers.length>0}getName(e){return this.termNames?this.termNames[e]:String(e<=this.maxNode&&this.nodeSet.types[e].name||e)}get eofTerm(){return this.maxNode+1}get topNode(){return this.nodeSet.types[this.top[1]]}dynamicPrecedence(e){let n=this.dynamicPrecedences;return n==null?0:n[e]||0}parseDialect(e){let n=Object.keys(this.dialects),r=n.map(()=>!1);if(e)for(let s of e.split(" ")){let o=n.indexOf(s);o>=0&&(r[o]=!0)}let i=null;for(let s=0;s<n.length;s++)if(!r[s])for(let o=this.dialects[n[s]],a;(a=this.data[o++])!=65535;)(i||(i=new Uint8Array(this.maxTerm+1)))[a]=1;return new PCe(e,r,i)}static deserialize(e){return new c0(e)}}function Tg(t,e){return t[e]|t[e+1]<<16}function DCe(t){let e=null;for(let n of t){let r=n.p.stoppedAt;(n.pos==n.p.stream.end||r!=null&&n.pos>r)&&n.p.parser.stateFlag(n.state,2)&&(!e||e.score<n.score)&&(e=n)}return e}function cq(t){if(t.external){let e=t.extend?1:0;return(n,r)=>t.external(n,r)<<1|e}return t.get}const ICe=55,MCe=1,RCe=56,FCe=2,LCe=57,$Ce=3,hq=4,BCe=5,vN=6,wie=7,Oie=8,Sie=9,kie=10,NCe=11,zCe=12,QCe=13,VM=58,jCe=14,UCe=15,fq=59,Cie=21,VCe=23,Aie=24,qCe=25,d9=27,Eie=28,ZCe=29,XCe=32,WCe=35,GCe=37,YCe=38,HCe=0,KCe=1,JCe={area:!0,base:!0,br:!0,col:!0,command:!0,embed:!0,frame:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0,menuitem:!0},eAe={dd:!0,li:!0,optgroup:!0,option:!0,p:!0,rp:!0,rt:!0,tbody:!0,td:!0,tfoot:!0,th:!0,tr:!0},dq={dd:{dd:!0,dt:!0},dt:{dd:!0,dt:!0},li:{li:!0},option:{option:!0,optgroup:!0},optgroup:{optgroup:!0},p:{address:!0,article:!0,aside:!0,blockquote:!0,dir:!0,div:!0,dl:!0,fieldset:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,menu:!0,nav:!0,ol:!0,p:!0,pre:!0,section:!0,table:!0,ul:!0},rp:{rp:!0,rt:!0},rt:{rp:!0,rt:!0},tbody:{tbody:!0,tfoot:!0},td:{td:!0,th:!0},tfoot:{tbody:!0},th:{td:!0,th:!0},thead:{tbody:!0,tfoot:!0},tr:{tr:!0}};function tAe(t){return t==45||t==46||t==58||t>=65&&t<=90||t==95||t>=97&&t<=122||t>=161}let pq=null,mq=null,gq=0;function p9(t,e){let n=t.pos+e;if(gq==n&&mq==t)return pq;let r=t.peek(e),i="";for(;tAe(r);)i+=String.fromCharCode(r),r=t.peek(++e);return mq=t,gq=n,pq=i?i.toLowerCase():r==nAe||r==rAe?void 0:null}const Tie=60,S6=62,bN=47,nAe=63,rAe=33,iAe=45;function yq(t,e){this.name=t,this.parent=e}const sAe=[vN,kie,wie,Oie,Sie],oAe=new xie({start:null,shift(t,e,n,r){return sAe.indexOf(e)>-1?new yq(p9(r,1)||"",t):t},reduce(t,e){return e==Cie&&t?t.parent:t},reuse(t,e,n,r){let i=e.type.id;return i==vN||i==GCe?new yq(p9(r,1)||"",t):t},strict:!1}),aAe=new Mc((t,e)=>{if(t.next!=Tie){t.next<0&&e.context&&t.acceptToken(VM);return}t.advance();let n=t.next==bN;n&&t.advance();let r=p9(t,0);if(r===void 0)return;if(!r)return t.acceptToken(n?UCe:jCe);let i=e.context?e.context.name:null;if(n){if(r==i)return t.acceptToken(NCe);if(i&&eAe[i])return t.acceptToken(VM,-2);if(e.dialectEnabled(HCe))return t.acceptToken(zCe);for(let s=e.context;s;s=s.parent)if(s.name==r)return;t.acceptToken(QCe)}else{if(r=="script")return t.acceptToken(wie);if(r=="style")return t.acceptToken(Oie);if(r=="textarea")return t.acceptToken(Sie);if(JCe.hasOwnProperty(r))return t.acceptToken(kie);i&&dq[i]&&dq[i][r]?t.acceptToken(VM,-1):t.acceptToken(vN)}},{contextual:!0}),lAe=new Mc(t=>{for(let e=0,n=0;;n++){if(t.next<0){n&&t.acceptToken(fq);break}if(t.next==iAe)e++;else if(t.next==S6&&e>=2){n>=3&&t.acceptToken(fq,-2);break}else e=0;t.advance()}});function uAe(t){for(;t;t=t.parent)if(t.name=="svg"||t.name=="math")return!0;return!1}const cAe=new Mc((t,e)=>{if(t.next==bN&&t.peek(1)==S6){let n=e.dialectEnabled(KCe)||uAe(e.context);t.acceptToken(n?BCe:hq,2)}else t.next==S6&&t.acceptToken(hq,1)});function _N(t,e,n){let r=2+t.length;return new Mc(i=>{for(let s=0,o=0,a=0;;a++){if(i.next<0){a&&i.acceptToken(e);break}if(s==0&&i.next==Tie||s==1&&i.next==bN||s>=2&&s<r&&i.next==t.charCodeAt(s-2))s++,o++;else if(s==r&&i.next==S6){a>o?i.acceptToken(e,-o):i.acceptToken(n,-(o-2));break}else if((i.next==10||i.next==13)&&a){i.acceptToken(e,1);break}else s=o=0;i.advance()}})}const hAe=_N("script",ICe,MCe),fAe=_N("style",RCe,FCe),dAe=_N("textarea",LCe,$Ce),pAe=w0({"Text RawText IncompleteTag IncompleteCloseTag":be.content,"StartTag StartCloseTag SelfClosingEndTag EndTag":be.angleBracket,TagName:be.tagName,"MismatchedCloseTag/TagName":[be.tagName,be.invalid],AttributeName:be.attributeName,"AttributeValue UnquotedAttributeValue":be.attributeValue,Is:be.definitionOperator,"EntityReference CharacterReference":be.character,Comment:be.blockComment,ProcessingInst:be.processingInstruction,DoctypeDecl:be.documentMeta}),mAe=c0.deserialize({version:14,states:",xOVO!rOOO!ZQ#tO'#CrO!`Q#tO'#C{O!eQ#tO'#DOO!jQ#tO'#DRO!oQ#tO'#DTO!tOaO'#CqO#PObO'#CqO#[OdO'#CqO$kO!rO'#CqOOO`'#Cq'#CqO$rO$fO'#DUO$zQ#tO'#DWO%PQ#tO'#DXOOO`'#Dl'#DlOOO`'#DZ'#DZQVO!rOOO%UQ&rO,59^O%aQ&rO,59gO%lQ&rO,59jO%wQ&rO,59mO&SQ&rO,59oOOOa'#D_'#D_O&_OaO'#CyO&jOaO,59]OOOb'#D`'#D`O&rObO'#C|O&}ObO,59]OOOd'#Da'#DaO'VOdO'#DPO'bOdO,59]OOO`'#Db'#DbO'jO!rO,59]O'qQ#tO'#DSOOO`,59],59]OOOp'#Dc'#DcO'vO$fO,59pOOO`,59p,59pO(OQ#|O,59rO(TQ#|O,59sOOO`-E7X-E7XO(YQ&rO'#CtOOQW'#D['#D[O(hQ&rO1G.xOOOa1G.x1G.xOOO`1G/Z1G/ZO(sQ&rO1G/ROOOb1G/R1G/RO)OQ&rO1G/UOOOd1G/U1G/UO)ZQ&rO1G/XOOO`1G/X1G/XO)fQ&rO1G/ZOOOa-E7]-E7]O)qQ#tO'#CzOOO`1G.w1G.wOOOb-E7^-E7^O)vQ#tO'#C}OOOd-E7_-E7_O){Q#tO'#DQOOO`-E7`-E7`O*QQ#|O,59nOOOp-E7a-E7aOOO`1G/[1G/[OOO`1G/^1G/^OOO`1G/_1G/_O*VQ,UO,59`OOQW-E7Y-E7YOOOa7+$d7+$dOOO`7+$u7+$uOOOb7+$m7+$mOOOd7+$p7+$pOOO`7+$s7+$sO*bQ#|O,59fO*gQ#|O,59iO*lQ#|O,59lOOO`1G/Y1G/YO*qO7[O'#CwO+SOMhO'#CwOOQW1G.z1G.zOOO`1G/Q1G/QOOO`1G/T1G/TOOO`1G/W1G/WOOOO'#D]'#D]O+eO7[O,59cOOQW,59c,59cOOOO'#D^'#D^O+vOMhO,59cOOOO-E7Z-E7ZOOQW1G.}1G.}OOOO-E7[-E7[",stateData:",c~O!_OS~OUSOVPOWQOXROYTO[]O][O^^O_^Oa^Ob^Oc^Od^Oy^O|_O!eZO~OgaO~OgbO~OgcO~OgdO~OgeO~O!XfOPmP![mP~O!YiOQpP![pP~O!ZlORsP![sP~OUSOVPOWQOXROYTOZqO[]O][O^^O_^Oa^Ob^Oc^Od^Oy^O!eZO~O![rO~P#gO!]sO!fuO~OgvO~OgwO~OS|OT}OiyO~OS!POT}OiyO~OS!ROT}OiyO~OS!TOT}OiyO~OS}OT}OiyO~O!XfOPmX![mX~OP!WO![!XO~O!YiOQpX![pX~OQ!ZO![!XO~O!ZlORsX![sX~OR!]O![!XO~O![!XO~P#gOg!_O~O!]sO!f!aO~OS!bO~OS!cO~Oj!dOShXThXihX~OS!fOT!gOiyO~OS!hOT!gOiyO~OS!iOT!gOiyO~OS!jOT!gOiyO~OS!gOT!gOiyO~Og!kO~Og!lO~Og!mO~OS!nO~Ol!qO!a!oO!c!pO~OS!rO~OS!sO~OS!tO~Ob!uOc!uOd!uO!a!wO!b!uO~Ob!xOc!xOd!xO!c!wO!d!xO~Ob!uOc!uOd!uO!a!{O!b!uO~Ob!xOc!xOd!xO!c!{O!d!xO~OT~cbd!ey|!e~",goto:"%q!aPPPPPPPPPPPPPPPPPPPPP!b!hP!nPP!zP!}#Q#T#Z#^#a#g#j#m#s#y!bP!b!bP$P$V$m$s$y%P%V%]%cPPPPPPPP%iX^OX`pXUOX`pezabcde{!O!Q!S!UR!q!dRhUR!XhXVOX`pRkVR!XkXWOX`pRnWR!XnXXOX`pQrXR!XpXYOX`pQ`ORx`Q{aQ!ObQ!QcQ!SdQ!UeZ!e{!O!Q!S!UQ!v!oR!z!vQ!y!pR!|!yQgUR!VgQjVR!YjQmWR![mQpXR!^pQtZR!`tS_O`ToXp",nodeNames:"â  StartCloseTag StartCloseTag StartCloseTag EndTag SelfClosingEndTag StartTag StartTag StartTag StartTag StartTag StartCloseTag StartCloseTag StartCloseTag IncompleteTag IncompleteCloseTag Document Text EntityReference CharacterReference InvalidEntity Element OpenTag TagName Attribute AttributeName Is AttributeValue UnquotedAttributeValue ScriptText CloseTag OpenTag StyleText CloseTag OpenTag TextareaText CloseTag OpenTag CloseTag SelfClosingTag Comment ProcessingInst MismatchedCloseTag CloseTag DoctypeDecl",maxTerm:68,context:oAe,nodeProps:[["closedBy",-10,1,2,3,7,8,9,10,11,12,13,"EndTag",6,"EndTag SelfClosingEndTag",-4,22,31,34,37,"CloseTag"],["openedBy",4,"StartTag StartCloseTag",5,"StartTag",-4,30,33,36,38,"OpenTag"],["group",-10,14,15,18,19,20,21,40,41,42,43,"Entity",17,"Entity TextContent",-3,29,32,35,"TextContent Entity"],["isolate",-11,22,30,31,33,34,36,37,38,39,42,43,"ltr",-3,27,28,40,""]],propSources:[pAe],skippedNodes:[0],repeatNodeCount:9,tokenData:"!<p!aR!YOX$qXY,QYZ,QZ[$q[]&X]^,Q^p$qpq,Qqr-_rs3_sv-_vw3}wxHYx}-_}!OH{!O!P-_!P!Q$q!Q![-_![!]Mz!]!^-_!^!_!$S!_!`!;x!`!a&X!a!c-_!c!}Mz!}#R-_#R#SMz#S#T1k#T#oMz#o#s-_#s$f$q$f%W-_%W%oMz%o%p-_%p&aMz&a&b-_&b1pMz1p4U-_4U4dMz4d4e-_4e$ISMz$IS$I`-_$I`$IbMz$Ib$Kh-_$Kh%#tMz%#t&/x-_&/x&EtMz&Et&FV-_&FV;'SMz;'S;:j!#|;:j;=`3X<%l?&r-_?&r?AhMz?Ah?BY$q?BY?MnMz?MnO$q!Z$|caPlW!b`!dpOX$qXZ&XZ[$q[^&X^p$qpq&Xqr$qrs&}sv$qvw+Pwx(tx!^$q!^!_*V!_!a&X!a#S$q#S#T&X#T;'S$q;'S;=`+z<%lO$q!R&bXaP!b`!dpOr&Xrs&}sv&Xwx(tx!^&X!^!_*V!_;'S&X;'S;=`*y<%lO&Xq'UVaP!dpOv&}wx'kx!^&}!^!_(V!_;'S&};'S;=`(n<%lO&}P'pTaPOv'kw!^'k!_;'S'k;'S;=`(P<%lO'kP(SP;=`<%l'kp([S!dpOv(Vx;'S(V;'S;=`(h<%lO(Vp(kP;=`<%l(Vq(qP;=`<%l&}a({WaP!b`Or(trs'ksv(tw!^(t!^!_)e!_;'S(t;'S;=`*P<%lO(t`)jT!b`Or)esv)ew;'S)e;'S;=`)y<%lO)e`)|P;=`<%l)ea*SP;=`<%l(t!Q*^V!b`!dpOr*Vrs(Vsv*Vwx)ex;'S*V;'S;=`*s<%lO*V!Q*vP;=`<%l*V!R*|P;=`<%l&XW+UYlWOX+PZ[+P^p+Pqr+Psw+Px!^+P!a#S+P#T;'S+P;'S;=`+t<%lO+PW+wP;=`<%l+P!Z+}P;=`<%l$q!a,]`aP!b`!dp!_^OX&XXY,QYZ,QZ]&X]^,Q^p&Xpq,Qqr&Xrs&}sv&Xwx(tx!^&X!^!_*V!_;'S&X;'S;=`*y<%lO&X!_-ljiSaPlW!b`!dpOX$qXZ&XZ[$q[^&X^p$qpq&Xqr-_rs&}sv-_vw/^wx(tx!P-_!P!Q$q!Q!^-_!^!_*V!_!a&X!a#S-_#S#T1k#T#s-_#s$f$q$f;'S-_;'S;=`3X<%l?Ah-_?Ah?BY$q?BY?Mn-_?MnO$q[/ebiSlWOX+PZ[+P^p+Pqr/^sw/^x!P/^!P!Q+P!Q!^/^!a#S/^#S#T0m#T#s/^#s$f+P$f;'S/^;'S;=`1e<%l?Ah/^?Ah?BY+P?BY?Mn/^?MnO+PS0rXiSqr0msw0mx!P0m!Q!^0m!a#s0m$f;'S0m;'S;=`1_<%l?Ah0m?BY?Mn0mS1bP;=`<%l0m[1hP;=`<%l/^!V1vciSaP!b`!dpOq&Xqr1krs&}sv1kvw0mwx(tx!P1k!P!Q&X!Q!^1k!^!_*V!_!a&X!a#s1k#s$f&X$f;'S1k;'S;=`3R<%l?Ah1k?Ah?BY&X?BY?Mn1k?MnO&X!V3UP;=`<%l1k!_3[P;=`<%l-_!Z3hV!ahaP!dpOv&}wx'kx!^&}!^!_(V!_;'S&};'S;=`(n<%lO&}!_4WiiSlWd!ROX5uXZ7SZ[5u[^7S^p5uqr8trs7Sst>]tw8twx7Sx!P8t!P!Q5u!Q!]8t!]!^/^!^!a7S!a#S8t#S#T;{#T#s8t#s$f5u$f;'S8t;'S;=`>V<%l?Ah8t?Ah?BY5u?BY?Mn8t?MnO5u!Z5zblWOX5uXZ7SZ[5u[^7S^p5uqr5urs7Sst+Ptw5uwx7Sx!]5u!]!^7w!^!a7S!a#S5u#S#T7S#T;'S5u;'S;=`8n<%lO5u!R7VVOp7Sqs7St!]7S!]!^7l!^;'S7S;'S;=`7q<%lO7S!R7qOb!R!R7tP;=`<%l7S!Z8OYlWb!ROX+PZ[+P^p+Pqr+Psw+Px!^+P!a#S+P#T;'S+P;'S;=`+t<%lO+P!Z8qP;=`<%l5u!_8{iiSlWOX5uXZ7SZ[5u[^7S^p5uqr8trs7Sst/^tw8twx7Sx!P8t!P!Q5u!Q!]8t!]!^:j!^!a7S!a#S8t#S#T;{#T#s8t#s$f5u$f;'S8t;'S;=`>V<%l?Ah8t?Ah?BY5u?BY?Mn8t?MnO5u!_:sbiSlWb!ROX+PZ[+P^p+Pqr/^sw/^x!P/^!P!Q+P!Q!^/^!a#S/^#S#T0m#T#s/^#s$f+P$f;'S/^;'S;=`1e<%l?Ah/^?Ah?BY+P?BY?Mn/^?MnO+P!V<QciSOp7Sqr;{rs7Sst0mtw;{wx7Sx!P;{!P!Q7S!Q!];{!]!^=]!^!a7S!a#s;{#s$f7S$f;'S;{;'S;=`>P<%l?Ah;{?Ah?BY7S?BY?Mn;{?MnO7S!V=dXiSb!Rqr0msw0mx!P0m!Q!^0m!a#s0m$f;'S0m;'S;=`1_<%l?Ah0m?BY?Mn0m!V>SP;=`<%l;{!_>YP;=`<%l8t!_>dhiSlWOX@OXZAYZ[@O[^AY^p@OqrBwrsAYswBwwxAYx!PBw!P!Q@O!Q!]Bw!]!^/^!^!aAY!a#SBw#S#TE{#T#sBw#s$f@O$f;'SBw;'S;=`HS<%l?AhBw?Ah?BY@O?BY?MnBw?MnO@O!Z@TalWOX@OXZAYZ[@O[^AY^p@Oqr@OrsAYsw@OwxAYx!]@O!]!^Az!^!aAY!a#S@O#S#TAY#T;'S@O;'S;=`Bq<%lO@O!RA]UOpAYq!]AY!]!^Ao!^;'SAY;'S;=`At<%lOAY!RAtOc!R!RAwP;=`<%lAY!ZBRYlWc!ROX+PZ[+P^p+Pqr+Psw+Px!^+P!a#S+P#T;'S+P;'S;=`+t<%lO+P!ZBtP;=`<%l@O!_COhiSlWOX@OXZAYZ[@O[^AY^p@OqrBwrsAYswBwwxAYx!PBw!P!Q@O!Q!]Bw!]!^Dj!^!aAY!a#SBw#S#TE{#T#sBw#s$f@O$f;'SBw;'S;=`HS<%l?AhBw?Ah?BY@O?BY?MnBw?MnO@O!_DsbiSlWc!ROX+PZ[+P^p+Pqr/^sw/^x!P/^!P!Q+P!Q!^/^!a#S/^#S#T0m#T#s/^#s$f+P$f;'S/^;'S;=`1e<%l?Ah/^?Ah?BY+P?BY?Mn/^?MnO+P!VFQbiSOpAYqrE{rsAYswE{wxAYx!PE{!P!QAY!Q!]E{!]!^GY!^!aAY!a#sE{#s$fAY$f;'SE{;'S;=`G|<%l?AhE{?Ah?BYAY?BY?MnE{?MnOAY!VGaXiSc!Rqr0msw0mx!P0m!Q!^0m!a#s0m$f;'S0m;'S;=`1_<%l?Ah0m?BY?Mn0m!VHPP;=`<%lE{!_HVP;=`<%lBw!ZHcW!cxaP!b`Or(trs'ksv(tw!^(t!^!_)e!_;'S(t;'S;=`*P<%lO(t!aIYliSaPlW!b`!dpOX$qXZ&XZ[$q[^&X^p$qpq&Xqr-_rs&}sv-_vw/^wx(tx}-_}!OKQ!O!P-_!P!Q$q!Q!^-_!^!_*V!_!a&X!a#S-_#S#T1k#T#s-_#s$f$q$f;'S-_;'S;=`3X<%l?Ah-_?Ah?BY$q?BY?Mn-_?MnO$q!aK_kiSaPlW!b`!dpOX$qXZ&XZ[$q[^&X^p$qpq&Xqr-_rs&}sv-_vw/^wx(tx!P-_!P!Q$q!Q!^-_!^!_*V!_!`&X!`!aMS!a#S-_#S#T1k#T#s-_#s$f$q$f;'S-_;'S;=`3X<%l?Ah-_?Ah?BY$q?BY?Mn-_?MnO$q!TM_XaP!b`!dp!fQOr&Xrs&}sv&Xwx(tx!^&X!^!_*V!_;'S&X;'S;=`*y<%lO&X!aNZ!ZiSgQaPlW!b`!dpOX$qXZ&XZ[$q[^&X^p$qpq&Xqr-_rs&}sv-_vw/^wx(tx}-_}!OMz!O!PMz!P!Q$q!Q![Mz![!]Mz!]!^-_!^!_*V!_!a&X!a!c-_!c!}Mz!}#R-_#R#SMz#S#T1k#T#oMz#o#s-_#s$f$q$f$}-_$}%OMz%O%W-_%W%oMz%o%p-_%p&aMz&a&b-_&b1pMz1p4UMz4U4dMz4d4e-_4e$ISMz$IS$I`-_$I`$IbMz$Ib$Je-_$Je$JgMz$Jg$Kh-_$Kh%#tMz%#t&/x-_&/x&EtMz&Et&FV-_&FV;'SMz;'S;:j!#|;:j;=`3X<%l?&r-_?&r?AhMz?Ah?BY$q?BY?MnMz?MnO$q!a!$PP;=`<%lMz!R!$ZY!b`!dpOq*Vqr!$yrs(Vsv*Vwx)ex!a*V!a!b!4t!b;'S*V;'S;=`*s<%lO*V!R!%Q]!b`!dpOr*Vrs(Vsv*Vwx)ex}*V}!O!%y!O!f*V!f!g!']!g#W*V#W#X!0`#X;'S*V;'S;=`*s<%lO*V!R!&QX!b`!dpOr*Vrs(Vsv*Vwx)ex}*V}!O!&m!O;'S*V;'S;=`*s<%lO*V!R!&vV!b`!dp!ePOr*Vrs(Vsv*Vwx)ex;'S*V;'S;=`*s<%lO*V!R!'dX!b`!dpOr*Vrs(Vsv*Vwx)ex!q*V!q!r!(P!r;'S*V;'S;=`*s<%lO*V!R!(WX!b`!dpOr*Vrs(Vsv*Vwx)ex!e*V!e!f!(s!f;'S*V;'S;=`*s<%lO*V!R!(zX!b`!dpOr*Vrs(Vsv*Vwx)ex!v*V!v!w!)g!w;'S*V;'S;=`*s<%lO*V!R!)nX!b`!dpOr*Vrs(Vsv*Vwx)ex!{*V!{!|!*Z!|;'S*V;'S;=`*s<%lO*V!R!*bX!b`!dpOr*Vrs(Vsv*Vwx)ex!r*V!r!s!*}!s;'S*V;'S;=`*s<%lO*V!R!+UX!b`!dpOr*Vrs(Vsv*Vwx)ex!g*V!g!h!+q!h;'S*V;'S;=`*s<%lO*V!R!+xY!b`!dpOr!+qrs!,hsv!+qvw!-Swx!.[x!`!+q!`!a!/j!a;'S!+q;'S;=`!0Y<%lO!+qq!,mV!dpOv!,hvx!-Sx!`!,h!`!a!-q!a;'S!,h;'S;=`!.U<%lO!,hP!-VTO!`!-S!`!a!-f!a;'S!-S;'S;=`!-k<%lO!-SP!-kO|PP!-nP;=`<%l!-Sq!-xS!dp|POv(Vx;'S(V;'S;=`(h<%lO(Vq!.XP;=`<%l!,ha!.aX!b`Or!.[rs!-Ssv!.[vw!-Sw!`!.[!`!a!.|!a;'S!.[;'S;=`!/d<%lO!.[a!/TT!b`|POr)esv)ew;'S)e;'S;=`)y<%lO)ea!/gP;=`<%l!.[!R!/sV!b`!dp|POr*Vrs(Vsv*Vwx)ex;'S*V;'S;=`*s<%lO*V!R!0]P;=`<%l!+q!R!0gX!b`!dpOr*Vrs(Vsv*Vwx)ex#c*V#c#d!1S#d;'S*V;'S;=`*s<%lO*V!R!1ZX!b`!dpOr*Vrs(Vsv*Vwx)ex#V*V#V#W!1v#W;'S*V;'S;=`*s<%lO*V!R!1}X!b`!dpOr*Vrs(Vsv*Vwx)ex#h*V#h#i!2j#i;'S*V;'S;=`*s<%lO*V!R!2qX!b`!dpOr*Vrs(Vsv*Vwx)ex#m*V#m#n!3^#n;'S*V;'S;=`*s<%lO*V!R!3eX!b`!dpOr*Vrs(Vsv*Vwx)ex#d*V#d#e!4Q#e;'S*V;'S;=`*s<%lO*V!R!4XX!b`!dpOr*Vrs(Vsv*Vwx)ex#X*V#X#Y!+q#Y;'S*V;'S;=`*s<%lO*V!R!4{Y!b`!dpOr!4trs!5ksv!4tvw!6Vwx!8]x!a!4t!a!b!:]!b;'S!4t;'S;=`!;r<%lO!4tq!5pV!dpOv!5kvx!6Vx!a!5k!a!b!7W!b;'S!5k;'S;=`!8V<%lO!5kP!6YTO!a!6V!a!b!6i!b;'S!6V;'S;=`!7Q<%lO!6VP!6lTO!`!6V!`!a!6{!a;'S!6V;'S;=`!7Q<%lO!6VP!7QOyPP!7TP;=`<%l!6Vq!7]V!dpOv!5kvx!6Vx!`!5k!`!a!7r!a;'S!5k;'S;=`!8V<%lO!5kq!7yS!dpyPOv(Vx;'S(V;'S;=`(h<%lO(Vq!8YP;=`<%l!5ka!8bX!b`Or!8]rs!6Vsv!8]vw!6Vw!a!8]!a!b!8}!b;'S!8];'S;=`!:V<%lO!8]a!9SX!b`Or!8]rs!6Vsv!8]vw!6Vw!`!8]!`!a!9o!a;'S!8];'S;=`!:V<%lO!8]a!9vT!b`yPOr)esv)ew;'S)e;'S;=`)y<%lO)ea!:YP;=`<%l!8]!R!:dY!b`!dpOr!4trs!5ksv!4tvw!6Vwx!8]x!`!4t!`!a!;S!a;'S!4t;'S;=`!;r<%lO!4t!R!;]V!b`!dpyPOr*Vrs(Vsv*Vwx)ex;'S*V;'S;=`*s<%lO*V!R!;uP;=`<%l!4t!V!<TXjSaP!b`!dpOr&Xrs&}sv&Xwx(tx!^&X!^!_*V!_;'S&X;'S;=`*y<%lO&X",tokenizers:[hAe,fAe,dAe,cAe,aAe,lAe,0,1,2,3,4,5],topRules:{Document:[0,16]},dialects:{noMatch:0,selfClosing:515},tokenPrec:517});function Pie(t,e){let n=Object.create(null);for(let r of t.getChildren(Aie)){let i=r.getChild(qCe),s=r.getChild(d9)||r.getChild(Eie);i&&(n[e.read(i.from,i.to)]=s?s.type.id==d9?e.read(s.from+1,s.to-1):e.read(s.from,s.to):"")}return n}function vq(t,e){let n=t.getChild(VCe);return n?e.read(n.from,n.to):" "}function qM(t,e,n){let r;for(let i of n)if(!i.attrs||i.attrs(r||(r=Pie(t.node.parent.firstChild,e))))return{parser:i.parser};return null}function Die(t=[],e=[]){let n=[],r=[],i=[],s=[];for(let a of t)(a.tag=="script"?n:a.tag=="style"?r:a.tag=="textarea"?i:s).push(a);let o=e.length?Object.create(null):null;for(let a of e)(o[a.name]||(o[a.name]=[])).push(a);return Lne((a,l)=>{let h=a.type.id;if(h==ZCe)return qM(a,l,n);if(h==XCe)return qM(a,l,r);if(h==WCe)return qM(a,l,i);if(h==Cie&&s.length){let f=a.node,p=f.firstChild,g=p&&vq(p,l),b;if(g){for(let x of s)if(x.tag==g&&(!x.attrs||x.attrs(b||(b=Pie(p,l))))){let k=f.lastChild,T=k.type.id==YCe?k.from:f.to;if(T>p.to)return{parser:x.parser,overlay:[{from:p.to,to:T}]}}}}if(o&&h==Aie){let f=a.node,p;if(p=f.firstChild){let g=o[l.read(p.from,p.to)];if(g)for(let b of g){if(b.tagName&&b.tagName!=vq(f.parent,l))continue;let x=f.lastChild;if(x.type.id==d9){let k=x.from+1,T=x.lastChild,I=x.to-(T&&T.isError?0:1);if(I>k)return{parser:b.parser,overlay:[{from:k,to:I}]}}else if(x.type.id==Eie)return{parser:b.parser,overlay:[{from:x.from,to:x.to}]}}}}return null})}const gAe=122,bq=1,yAe=123,vAe=124,Iie=2,bAe=125,_Ae=3,xAe=4,Mie=[9,10,11,12,13,32,133,160,5760,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8232,8233,8239,8287,12288],wAe=58,OAe=40,Rie=95,SAe=91,A5=45,kAe=46,CAe=35,AAe=37,EAe=38,TAe=92,PAe=10,DAe=42;function Bk(t){return t>=65&&t<=90||t>=97&&t<=122||t>=161}function xN(t){return t>=48&&t<=57}function _q(t){return xN(t)||t>=97&&t<=102||t>=65&&t<=70}const Fie=(t,e,n)=>(r,i)=>{for(let s=!1,o=0,a=0;;a++){let{next:l}=r;if(Bk(l)||l==A5||l==Rie||s&&xN(l))!s&&(l!=A5||a>0)&&(s=!0),o===a&&l==A5&&o++,r.advance();else if(l==TAe&&r.peek(1)!=PAe){if(r.advance(),_q(r.next)){do r.advance();while(_q(r.next));r.next==32&&r.advance()}else r.next>-1&&r.advance();s=!0}else{s&&r.acceptToken(o==2&&i.canShift(Iie)?e:l==OAe?n:t);break}}},IAe=new Mc(Fie(yAe,Iie,vAe)),MAe=new Mc(Fie(bAe,_Ae,xAe)),RAe=new Mc(t=>{if(Mie.includes(t.peek(-1))){let{next:e}=t;(Bk(e)||e==Rie||e==CAe||e==kAe||e==DAe||e==SAe||e==wAe&&Bk(t.peek(1))||e==A5||e==EAe)&&t.acceptToken(gAe)}}),FAe=new Mc(t=>{if(!Mie.includes(t.peek(-1))){let{next:e}=t;if(e==AAe&&(t.advance(),t.acceptToken(bq)),Bk(e)){do t.advance();while(Bk(t.next)||xN(t.next));t.acceptToken(bq)}}}),LAe=w0({"AtKeyword import charset namespace keyframes media supports":be.definitionKeyword,"from to selector":be.keyword,NamespaceName:be.namespace,KeyframeName:be.labelName,KeyframeRangeName:be.operatorKeyword,TagName:be.tagName,ClassName:be.className,PseudoClassName:be.constant(be.className),IdName:be.labelName,"FeatureName PropertyName":be.propertyName,AttributeName:be.attributeName,NumberLiteral:be.number,KeywordQuery:be.keyword,UnaryQueryOp:be.operatorKeyword,"CallTag ValueName":be.atom,VariableName:be.variableName,Callee:be.operatorKeyword,Unit:be.unit,"UniversalSelector NestingSelector":be.definitionOperator,"MatchOp CompareOp":be.compareOperator,"ChildOp SiblingOp, LogicOp":be.logicOperator,BinOp:be.arithmeticOperator,Important:be.modifier,Comment:be.blockComment,ColorLiteral:be.color,"ParenthesizedContent StringLiteral":be.string,":":be.punctuation,"PseudoOp #":be.derefOperator,"; ,":be.separator,"( )":be.paren,"[ ]":be.squareBracket,"{ }":be.brace}),$Ae={__proto__:null,lang:38,"nth-child":38,"nth-last-child":38,"nth-of-type":38,"nth-last-of-type":38,dir:38,"host-context":38,if:84,url:124,"url-prefix":124,domain:124,regexp:124},BAe={__proto__:null,or:98,and:98,not:106,only:106,layer:170},NAe={__proto__:null,selector:112,layer:166},zAe={__proto__:null,"@import":162,"@media":174,"@charset":178,"@namespace":182,"@keyframes":188,"@supports":200,"@scope":204},QAe={__proto__:null,to:207},jAe=c0.deserialize({version:14,states:"EbQYQdOOO#qQdOOP#xO`OOOOQP'#Cf'#CfOOQP'#Ce'#CeO#}QdO'#ChO$nQaO'#CcO$xQdO'#CkO%TQdO'#DpO%YQdO'#DrO%_QdO'#DuO%_QdO'#DxOOQP'#FV'#FVO&eQhO'#EhOOQS'#FU'#FUOOQS'#Ek'#EkQYQdOOO&lQdO'#EOO&PQhO'#EUO&lQdO'#EWO'aQdO'#EYO'lQdO'#E]O'tQhO'#EcO(VQdO'#EeO(bQaO'#CfO)VQ`O'#D{O)[Q`O'#F`O)gQdO'#F`QOQ`OOP)qO&jO'#CaPOOO)C@t)C@tOOQP'#Cj'#CjOOQP,59S,59SO#}QdO,59SO)|QdO,59VO%TQdO,5:[O%YQdO,5:^O%_QdO,5:aO%_QdO,5:cO%_QdO,5:dO%_QdO'#ErO*XQ`O,58}O*aQdO'#DzOOQS,58},58}OOQP'#Cn'#CnOOQO'#Dn'#DnOOQP,59V,59VO*hQ`O,59VO*mQ`O,59VOOQP'#Dq'#DqOOQP,5:[,5:[OOQO'#Ds'#DsO*rQpO,5:^O+]QaO,5:aO+sQaO,5:dOOQW'#DZ'#DZO,ZQhO'#DdO,xQhO'#FaO'tQhO'#DbO-WQ`O'#DhOOQW'#F['#F[O-]Q`O,5;SO-eQ`O'#DeOOQS-E8i-E8iOOQ['#Cs'#CsO-jQdO'#CtO.QQdO'#CzO.hQdO'#C}O/OQ!pO'#DPO1RQ!jO,5:jOOQO'#DU'#DUO*mQ`O'#DTO1cQ!nO'#FXO3`Q`O'#DVO3eQ`O'#DkOOQ['#FX'#FXO-`Q`O,5:pO3jQ!bO,5:rOOQS'#E['#E[O3rQ`O,5:tO3wQdO,5:tOOQO'#E_'#E_O4PQ`O,5:wO4UQhO,5:}O%_QdO'#DgOOQS,5;P,5;PO-eQ`O,5;PO4^QdO,5;PO4fQdO,5:gO4vQdO'#EtO5TQ`O,5;zO5TQ`O,5;zPOOO'#Ej'#EjP5`O&jO,58{POOO,58{,58{OOQP1G.n1G.nOOQP1G.q1G.qO*hQ`O1G.qO*mQ`O1G.qOOQP1G/v1G/vO5kQpO1G/xO5sQaO1G/{O6ZQaO1G/}O6qQaO1G0OO7XQaO,5;^OOQO-E8p-E8pOOQS1G.i1G.iO7cQ`O,5:fO7hQdO'#DoO7oQdO'#CrOOQP1G/x1G/xO&lQdO1G/xO7vQ!jO'#DZO8UQ!bO,59vO8^QhO,5:OOOQO'#F]'#F]O8XQ!bO,59zO'tQhO,59xO8fQhO'#EvO8sQ`O,5;{O9OQhO,59|O9uQhO'#DiOOQW,5:S,5:SOOQS1G0n1G0nOOQW,5:P,5:PO9|Q!fO'#FYOOQS'#FY'#FYOOQS'#Em'#EmO;^QdO,59`OOQ[,59`,59`O;tQdO,59fOOQ[,59f,59fO<[QdO,59iOOQ[,59i,59iOOQ[,59k,59kO&lQdO,59mO<rQhO'#EQOOQW'#EQ'#EQO=WQ`O1G0UO1[QhO1G0UOOQ[,59o,59oO'tQhO'#DXOOQ[,59q,59qO=]Q#tO,5:VOOQS1G0[1G0[OOQS1G0^1G0^OOQS1G0`1G0`O=hQ`O1G0`O=mQdO'#E`OOQS1G0c1G0cOOQS1G0i1G0iO=xQaO,5:RO-`Q`O1G0kOOQS1G0k1G0kO-eQ`O1G0kO>PQ!fO1G0ROOQO1G0R1G0ROOQO,5;`,5;`O>gQdO,5;`OOQO-E8r-E8rO>tQ`O1G1fPOOO-E8h-E8hPOOO1G.g1G.gOOQP7+$]7+$]OOQP7+%d7+%dO&lQdO7+%dOOQS1G0Q1G0QO?PQaO'#F_O?ZQ`O,5:ZO?`Q!fO'#ElO@^QdO'#FWO@hQ`O,59^O@mQ!bO7+%dO&lQdO1G/bO@uQhO1G/fOOQW1G/j1G/jOOQW1G/d1G/dOAWQhO,5;bOOQO-E8t-E8tOAfQhO'#DZOAtQhO'#F^OBPQ`O'#F^OBUQ`O,5:TOOQS-E8k-E8kOOQ[1G.z1G.zOOQ[1G/Q1G/QOOQ[1G/T1G/TOOQ[1G/X1G/XOBZQdO,5:lOOQS7+%p7+%pOB`Q`O7+%pOBeQhO'#DYOBmQ`O,59sO'tQhO,59sOOQ[1G/q1G/qOBuQ`O1G/qOOQS7+%z7+%zOBzQbO'#DPOOQO'#Eb'#EbOCYQ`O'#EaOOQO'#Ea'#EaOCeQ`O'#EwOCmQdO,5:zOOQS,5:z,5:zOOQ[1G/m1G/mOOQS7+&V7+&VO-`Q`O7+&VOCxQ!fO'#EsO&lQdO'#EsOEPQdO7+%mOOQO7+%m7+%mOOQO1G0z1G0zOEdQ!bO<<IOOElQdO'#EqOEvQ`O,5;yOOQP1G/u1G/uOOQS-E8j-E8jOFOQdO'#EpOFYQ`O,5;rOOQ]1G.x1G.xOOQP<<IO<<IOOFbQdO7+$|OOQO'#D]'#D]OFiQ!bO7+%QOFqQhO'#EoOF{Q`O,5;xO&lQdO,5;xOOQW1G/o1G/oOOQO'#ES'#ESOGTQ`O1G0WOOQS<<I[<<I[O&lQdO,59tOGnQhO1G/_OOQ[1G/_1G/_OGuQ`O1G/_OOQW-E8l-E8lOOQ[7+%]7+%]OOQO,5:{,5:{O=pQdO'#ExOCeQ`O,5;cOOQS,5;c,5;cOOQS-E8u-E8uOOQS1G0f1G0fOOQS<<Iq<<IqOG}Q!fO,5;_OOQS-E8q-E8qOOQO<<IX<<IXOOQPAN>jAN>jOIUQaO,5;]OOQO-E8o-E8oOI`QdO,5;[OOQO-E8n-E8nOOQW<<Hh<<HhOOQW<<Hl<<HlOIjQhO<<HlOI{QhO,5;ZOJWQ`O,5;ZOOQO-E8m-E8mOJ]QdO1G1dOBZQdO'#EuOJgQ`O7+%rOOQW7+%r7+%rOJoQ!bO1G/`OOQ[7+$y7+$yOJzQhO7+$yPKRQ`O'#EnOOQO,5;d,5;dOOQO-E8v-E8vOOQS1G0}1G0}OKWQ`OAN>WO&lQdO1G0uOK]Q`O7+'OOOQO,5;a,5;aOOQO-E8s-E8sOOQW<<I^<<I^OOQ[<<He<<HePOQW,5;Y,5;YOOQWG23rG23rOKeQdO7+&a",stateData:"Kx~O#sOS#tQQ~OW[OZ[O]TO`VOaVOi]OjWOmXO!jYO!mZO!saO!ybO!{cO!}dO#QeO#WfO#YgO#oRO~OQiOW[OZ[O]TO`VOaVOi]OjWOmXO!jYO!mZO!saO!ybO!{cO!}dO#QeO#WfO#YgO#ohO~O#m$SP~P!dO#tmO~O#ooO~O]qO`rOarOjsOmtO!juO!mwO#nvO~OpzO!^xO~P$SOc!QO#o|O#p}O~O#o!RO~O#o!TO~OW[OZ[O]TO`VOaVOjWOmXO!jYO!mZO#oRO~OS!]Oe!YO!V![O!Y!`O#q!XOp$TP~Ok$TP~P&POQ!jOe!cOm!dOp!eOr!mOt!mOz!kO!`!lO#o!bO#p!hO#}!fO~Ot!qO!`!lO#o!pO~Ot!sO#o!sO~OS!]Oe!YO!V![O!Y!`O#q!XO~Oe!vOpzO#Z!xO~O]YX`YX`!pXaYXjYXmYXpYX!^YX!jYX!mYX#nYX~O`!zO~Ok!{O#m$SXo$SX~O#m$SXo$SX~P!dO#u#OO#v#OO#w#QO~Oc#UO#o|O#p}O~OpzO!^xO~Oo$SP~P!dOe#`O~Oe#aO~Ol#bO!h#cO~O]qO`rOarOjsOmtO~Op!ia!^!ia!j!ia!m!ia#n!iad!ia~P*zOp!la!^!la!j!la!m!la#n!lad!la~P*zOR#gOS!]Oe!YOr#gOt#gO!V![O!Y!`O#q#dO#}!fO~O!R#iO!^#jOk$TXp$TX~Oe#mO~Ok#oOpzO~Oe!vO~O]#rO`#rOd#uOi#rOj#rOk#rO~P&lO]#rO`#rOi#rOj#rOk#rOl#wO~P&lO]#rO`#rOi#rOj#rOk#rOo#yO~P&lOP#zOSsXesXksXvsX!VsX!YsX!usX!wsX#qsX!TsXQsX]sX`sXdsXisXjsXmsXpsXrsXtsXzsX!`sX#osX#psX#}sXlsXosX!^sX!qsX#msX~Ov#{O!u#|O!w#}Ok$TP~P'tOe#aOS#{Xk#{Xv#{X!V#{X!Y#{X!u#{X!w#{X#q#{XQ#{X]#{X`#{Xd#{Xi#{Xj#{Xm#{Xp#{Xr#{Xt#{Xz#{X!`#{X#o#{X#p#{X#}#{Xl#{Xo#{X!^#{X!q#{X#m#{X~Oe$RO~Oe$TO~Ok$VOv#{O~Ok$WO~Ot$XO!`!lO~Op$YO~OpzO!R#iO~OpzO#Z$`O~O!q$bOk!oa#m!oao!oa~P&lOk#hX#m#hXo#hX~P!dOk!{O#m$Sao$Sa~O#u#OO#v#OO#w$hO~Ol$jO!h$kO~Op!ii!^!ii!j!ii!m!ii#n!iid!ii~P*zOp!ki!^!ki!j!ki!m!ki#n!kid!ki~P*zOp!li!^!li!j!li!m!li#n!lid!li~P*zOp#fa!^#fa~P$SOo$lO~Od$RP~P%_Od#zP~P&lO`!PXd}X!R}X!T!PX~O`$sO!T$tO~Od$uO!R#iO~Ok#jXp#jX!^#jX~P'tO!^#jOk$Tap$Ta~O!R#iOk!Uap!Ua!^!Uad!Ua`!Ua~OS!]Oe!YO!V![O!Y!`O#q$yO~Od$QP~P9dOv#{OQ#|X]#|X`#|Xd#|Xe#|Xi#|Xj#|Xk#|Xm#|Xp#|Xr#|Xt#|Xz#|X!`#|X#o#|X#p#|X#}#|Xl#|Xo#|X~O]#rO`#rOd%OOi#rOj#rOk#rO~P&lO]#rO`#rOi#rOj#rOk#rOl%PO~P&lO]#rO`#rOi#rOj#rOk#rOo%QO~P&lOe%SOS!tXk!tX!V!tX!Y!tX#q!tX~Ok%TO~Od%YOt%ZO!a%ZO~Ok%[O~Oo%cO#o%^O#}%]O~Od%dO~P$SOv#{O!^%hO!q%jOk!oi#m!oio!oi~P&lOk#ha#m#hao#ha~P!dOk!{O#m$Sio$Si~O!^%mOd$RX~P$SOd%oO~Ov#{OQ#`Xd#`Xe#`Xm#`Xp#`Xr#`Xt#`Xz#`X!^#`X!`#`X#o#`X#p#`X#}#`X~O!^%qOd#zX~P&lOd%sO~Ol%tOv#{O~OR#gOr#gOt#gO#q%vO#}!fO~O!R#iOk#jap#ja!^#ja~O`!PXd}X!R}X!^}X~O!R#iO!^%xOd$QX~O`%zO~Od%{O~O#o%|O~Ok&OO~O`&PO!R#iO~Od&ROk&QO~Od&UO~OP#zOpsX!^sXdsX~O#}%]Op#TX!^#TX~OpzO!^&WO~Oo&[O#o%^O#}%]O~Ov#{OQ#gXe#gXk#gXm#gXp#gXr#gXt#gXz#gX!^#gX!`#gX!q#gX#m#gX#o#gX#p#gX#}#gXo#gX~O!^%hO!q&`Ok!oq#m!oqo!oq~P&lOl&aOv#{O~Od#eX!^#eX~P%_O!^%mOd$Ra~Od#dX!^#dX~P&lO!^%qOd#za~Od&fO~P&lOd&gO!T&hO~Od#cX!^#cX~P9dO!^%xOd$Qa~O]&mOd&oO~OS#bae#ba!V#ba!Y#ba#q#ba~Od&qO~PG]Od&qOk&rO~Ov#{OQ#gae#gak#gam#gap#gar#gat#gaz#ga!^#ga!`#ga!q#ga#m#ga#o#ga#p#ga#}#gao#ga~Od#ea!^#ea~P$SOd#da!^#da~P&lOR#gOr#gOt#gO#q%vO#}%]O~O!R#iOd#ca!^#ca~O`&xO~O!^%xOd$Qi~P&lO]&mOd&|O~Ov#{Od|ik|i~Od&}O~PG]Ok'OO~Od'PO~O!^%xOd$Qq~Od#cq!^#cq~P&lO#s!a#t#}]#}v!m~",goto:"2h$UPPPPP$VP$YP$c$uP$cP%X$cPP%_PPP%e%o%oPPPPP%oPP%oP&]P%oP%o'W%oP't'w'}'}(^'}P'}P'}P'}'}P(m'}(yP(|PP)p)v$c)|$c*SP$cP$c$cP*Y*{+YP$YP+aP+dP$YP$YP$YP+j$YP+m+p+s+z$YP$YPP$YP,P,V,f,|-[-b-l-r-x.O.U.`.f.l.rPPPPPPPPPPP.x/R/w/z0|P1U1u2O2R2U2[RnQ_^OP`kz!{$dq[OPYZ`kuvwxz!v!{#`$d%mqSOPYZ`kuvwxz!v!{#`$d%mQpTR#RqQ!OVR#SrQ#S!QS$Q!i!jR$i#U!V!mac!c!d!e!z#a#c#t#v#x#{$a$k$p$s%h%i%q%u%z&P&d&l&x'Q!U!mac!c!d!e!z#a#c#t#v#x#{$a$k$p$s%h%i%q%u%z&P&d&l&x'QU#g!Y$t&hU%`$Y%b&WR&V%_!V!iac!c!d!e!z#a#c#t#v#x#{$a$k$p$s%h%i%q%u%z&P&d&l&x'QR$S!kQ%W$RR&S%Xk!^]bf!Y![!g#i#j#m$P$R%X%xQ#e!YQ${#mQ%w$tQ&j%xR&w&hQ!ygQ#p!`Q$^!xR%f$`R#n!]!U!mac!c!d!e!z#a#c#t#v#x#{$a$k$p$s%h%i%q%u%z&P&d&l&x'QQ!qdR$X!rQ!PVR#TrQ#S!PR$i#TQ!SWR#VsQ!UXR#WtQ{UQ!wgQ#^yQ#o!_Q$U!nQ$[!uQ$_!yQ%e$^Q&Y%aQ&]%fR&v&XSjPzQ!}kQ$c!{R%k$dZiPkz!{$dR$P!gQ%}%SR&z&mR!rdR!teR$Z!tS%a$Y%bR&t&WV%_$Y%b&WQ#PmR$g#PQ`OSkPzU!a`k$dR$d!{Q$p#aY%p$p%u&d&l'QQ%u$sQ&d%qQ&l%zR'Q&xQ#t!cQ#v!dQ#x!eV$}#t#v#xQ%X$RR&T%XQ%y$zS&k%y&yR&y&lQ%r$pR&e%rQ%n$mR&c%nQyUR#]yQ%i$aR&_%iQ!|jS$e!|$fR$f!}Q&n%}R&{&nQ#k!ZR$x#kQ%b$YR&Z%bQ&X%aR&u&X__OP`kz!{$d^UOP`kz!{$dQ!VYQ!WZQ#XuQ#YvQ#ZwQ#[xQ$]!vQ$m#`R&b%mR$q#aQ!gaQ!oc[#q!c!d!e#t#v#xQ$a!zd$o#a$p$s%q%u%z&d&l&x'QQ$r#cQ%R#{S%g$a%iQ%l$kQ&^%hR&p&P]#s!c!d!e#t#v#xW!Z]b!g$PQ!ufQ#f!YQ#l![Q$v#iQ$w#jQ$z#mS%V$R%XR&i%xQ#h!YQ%w$tR&w&hR$|#mR$n#`QlPR#_zQ!_]Q!nbQ$O!gR%U$P",nodeNames:"â  Unit VariableName VariableName QueryCallee Comment StyleSheet RuleSet UniversalSelector TagSelector TagName NestingSelector ClassSelector . ClassName PseudoClassSelector : :: PseudoClassName PseudoClassName ) ( ArgList ValueName ParenthesizedValue AtKeyword # ; ] [ BracketedValue } { BracedValue ColorLiteral NumberLiteral StringLiteral BinaryExpression BinOp CallExpression Callee IfExpression if ArgList IfBranch KeywordQuery FeatureQuery FeatureName BinaryQuery LogicOp ComparisonQuery CompareOp UnaryQuery UnaryQueryOp ParenthesizedQuery SelectorQuery selector ParenthesizedSelector CallQuery ArgList , CallLiteral CallTag ParenthesizedContent PseudoClassName ArgList IdSelector IdName AttributeSelector AttributeName MatchOp ChildSelector ChildOp DescendantSelector SiblingSelector SiblingOp Block Declaration PropertyName Important ImportStatement import Layer layer LayerName layer MediaStatement media CharsetStatement charset NamespaceStatement namespace NamespaceName KeyframesStatement keyframes KeyframeName KeyframeList KeyframeSelector KeyframeRangeName SupportsStatement supports ScopeStatement scope to AtRule Styles",maxTerm:143,nodeProps:[["isolate",-2,5,36,""],["openedBy",20,"(",28,"[",31,"{"],["closedBy",21,")",29,"]",32,"}"]],propSources:[LAe],skippedNodes:[0,5,106],repeatNodeCount:15,tokenData:"JQ~R!YOX$qX^%i^p$qpq%iqr({rs-ust/itu6Wuv$qvw7Qwx7cxy9Qyz9cz{9h{|:R|}>t}!O?V!O!P?t!P!Q@]!Q![AU![!]BP!]!^B{!^!_C^!_!`DY!`!aDm!a!b$q!b!cEn!c!}$q!}#OG{#O#P$q#P#QH^#Q#R6W#R#o$q#o#pHo#p#q6W#q#rIQ#r#sIc#s#y$q#y#z%i#z$f$q$f$g%i$g#BY$q#BY#BZ%i#BZ$IS$q$IS$I_%i$I_$I|$q$I|$JO%i$JO$JT$q$JT$JU%i$JU$KV$q$KV$KW%i$KW&FU$q&FU&FV%i&FV;'S$q;'S;=`Iz<%lO$q`$tSOy%Qz;'S%Q;'S;=`%c<%lO%Q`%VS!a`Oy%Qz;'S%Q;'S;=`%c<%lO%Q`%fP;=`<%l%Q~%nh#s~OX%QX^'Y^p%Qpq'Yqy%Qz#y%Q#y#z'Y#z$f%Q$f$g'Y$g#BY%Q#BY#BZ'Y#BZ$IS%Q$IS$I_'Y$I_$I|%Q$I|$JO'Y$JO$JT%Q$JT$JU'Y$JU$KV%Q$KV$KW'Y$KW&FU%Q&FU&FV'Y&FV;'S%Q;'S;=`%c<%lO%Q~'ah#s~!a`OX%QX^'Y^p%Qpq'Yqy%Qz#y%Q#y#z'Y#z$f%Q$f$g'Y$g#BY%Q#BY#BZ'Y#BZ$IS%Q$IS$I_'Y$I_$I|%Q$I|$JO'Y$JO$JT%Q$JT$JU'Y$JU$KV%Q$KV$KW'Y$KW&FU%Q&FU&FV'Y&FV;'S%Q;'S;=`%c<%lO%Qj)OUOy%Qz#]%Q#]#^)b#^;'S%Q;'S;=`%c<%lO%Qj)gU!a`Oy%Qz#a%Q#a#b)y#b;'S%Q;'S;=`%c<%lO%Qj*OU!a`Oy%Qz#d%Q#d#e*b#e;'S%Q;'S;=`%c<%lO%Qj*gU!a`Oy%Qz#c%Q#c#d*y#d;'S%Q;'S;=`%c<%lO%Qj+OU!a`Oy%Qz#f%Q#f#g+b#g;'S%Q;'S;=`%c<%lO%Qj+gU!a`Oy%Qz#h%Q#h#i+y#i;'S%Q;'S;=`%c<%lO%Qj,OU!a`Oy%Qz#T%Q#T#U,b#U;'S%Q;'S;=`%c<%lO%Qj,gU!a`Oy%Qz#b%Q#b#c,y#c;'S%Q;'S;=`%c<%lO%Qj-OU!a`Oy%Qz#h%Q#h#i-b#i;'S%Q;'S;=`%c<%lO%Qj-iS!qY!a`Oy%Qz;'S%Q;'S;=`%c<%lO%Q~-xWOY-uZr-urs.bs#O-u#O#P.g#P;'S-u;'S;=`/c<%lO-u~.gOt~~.jRO;'S-u;'S;=`.s;=`O-u~.vXOY-uZr-urs.bs#O-u#O#P.g#P;'S-u;'S;=`/c;=`<%l-u<%lO-u~/fP;=`<%l-uj/nYjYOy%Qz!Q%Q!Q![0^![!c%Q!c!i0^!i#T%Q#T#Z0^#Z;'S%Q;'S;=`%c<%lO%Qj0cY!a`Oy%Qz!Q%Q!Q![1R![!c%Q!c!i1R!i#T%Q#T#Z1R#Z;'S%Q;'S;=`%c<%lO%Qj1WY!a`Oy%Qz!Q%Q!Q![1v![!c%Q!c!i1v!i#T%Q#T#Z1v#Z;'S%Q;'S;=`%c<%lO%Qj1}YrY!a`Oy%Qz!Q%Q!Q![2m![!c%Q!c!i2m!i#T%Q#T#Z2m#Z;'S%Q;'S;=`%c<%lO%Qj2tYrY!a`Oy%Qz!Q%Q!Q![3d![!c%Q!c!i3d!i#T%Q#T#Z3d#Z;'S%Q;'S;=`%c<%lO%Qj3iY!a`Oy%Qz!Q%Q!Q![4X![!c%Q!c!i4X!i#T%Q#T#Z4X#Z;'S%Q;'S;=`%c<%lO%Qj4`YrY!a`Oy%Qz!Q%Q!Q![5O![!c%Q!c!i5O!i#T%Q#T#Z5O#Z;'S%Q;'S;=`%c<%lO%Qj5TY!a`Oy%Qz!Q%Q!Q![5s![!c%Q!c!i5s!i#T%Q#T#Z5s#Z;'S%Q;'S;=`%c<%lO%Qj5zSrY!a`Oy%Qz;'S%Q;'S;=`%c<%lO%Qd6ZUOy%Qz!_%Q!_!`6m!`;'S%Q;'S;=`%c<%lO%Qd6tS!hS!a`Oy%Qz;'S%Q;'S;=`%c<%lO%Qb7VSZQOy%Qz;'S%Q;'S;=`%c<%lO%Q~7fWOY7cZw7cwx.bx#O7c#O#P8O#P;'S7c;'S;=`8z<%lO7c~8RRO;'S7c;'S;=`8[;=`O7c~8_XOY7cZw7cwx.bx#O7c#O#P8O#P;'S7c;'S;=`8z;=`<%l7c<%lO7c~8}P;=`<%l7cj9VSeYOy%Qz;'S%Q;'S;=`%c<%lO%Q~9hOd~n9oUWQvWOy%Qz!_%Q!_!`6m!`;'S%Q;'S;=`%c<%lO%Qj:YWvW!mQOy%Qz!O%Q!O!P:r!P!Q%Q!Q![=w![;'S%Q;'S;=`%c<%lO%Qj:wU!a`Oy%Qz!Q%Q!Q![;Z![;'S%Q;'S;=`%c<%lO%Qj;bY!a`#}YOy%Qz!Q%Q!Q![;Z![!g%Q!g!h<Q!h#X%Q#X#Y<Q#Y;'S%Q;'S;=`%c<%lO%Qj<VY!a`Oy%Qz{%Q{|<u|}%Q}!O<u!O!Q%Q!Q![=^![;'S%Q;'S;=`%c<%lO%Qj<zU!a`Oy%Qz!Q%Q!Q![=^![;'S%Q;'S;=`%c<%lO%Qj=eU!a`#}YOy%Qz!Q%Q!Q![=^![;'S%Q;'S;=`%c<%lO%Qj>O[!a`#}YOy%Qz!O%Q!O!P;Z!P!Q%Q!Q![=w![!g%Q!g!h<Q!h#X%Q#X#Y<Q#Y;'S%Q;'S;=`%c<%lO%Qj>yS!^YOy%Qz;'S%Q;'S;=`%c<%lO%Qj?[WvWOy%Qz!O%Q!O!P:r!P!Q%Q!Q![=w![;'S%Q;'S;=`%c<%lO%Qj?yU]YOy%Qz!Q%Q!Q![;Z![;'S%Q;'S;=`%c<%lO%Q~@bTvWOy%Qz{@q{;'S%Q;'S;=`%c<%lO%Q~@xS!a`#t~Oy%Qz;'S%Q;'S;=`%c<%lO%QjAZ[#}YOy%Qz!O%Q!O!P;Z!P!Q%Q!Q![=w![!g%Q!g!h<Q!h#X%Q#X#Y<Q#Y;'S%Q;'S;=`%c<%lO%QjBUU`YOy%Qz![%Q![!]Bh!];'S%Q;'S;=`%c<%lO%QbBoSaQ!a`Oy%Qz;'S%Q;'S;=`%c<%lO%QjCQSkYOy%Qz;'S%Q;'S;=`%c<%lO%QhCcU!TWOy%Qz!_%Q!_!`Cu!`;'S%Q;'S;=`%c<%lO%QhC|S!TW!a`Oy%Qz;'S%Q;'S;=`%c<%lO%QlDaS!TW!hSOy%Qz;'S%Q;'S;=`%c<%lO%QjDtV!jQ!TWOy%Qz!_%Q!_!`Cu!`!aEZ!a;'S%Q;'S;=`%c<%lO%QbEbS!jQ!a`Oy%Qz;'S%Q;'S;=`%c<%lO%QjEqYOy%Qz}%Q}!OFa!O!c%Q!c!}GO!}#T%Q#T#oGO#o;'S%Q;'S;=`%c<%lO%QjFfW!a`Oy%Qz!c%Q!c!}GO!}#T%Q#T#oGO#o;'S%Q;'S;=`%c<%lO%QjGV[iY!a`Oy%Qz}%Q}!OGO!O!Q%Q!Q![GO![!c%Q!c!}GO!}#T%Q#T#oGO#o;'S%Q;'S;=`%c<%lO%QjHQSmYOy%Qz;'S%Q;'S;=`%c<%lO%QnHcSl^Oy%Qz;'S%Q;'S;=`%c<%lO%QjHtSpYOy%Qz;'S%Q;'S;=`%c<%lO%QjIVSoYOy%Qz;'S%Q;'S;=`%c<%lO%QfIhU!mQOy%Qz!_%Q!_!`6m!`;'S%Q;'S;=`%c<%lO%Q`I}P;=`<%l$q",tokenizers:[RAe,FAe,IAe,MAe,1,2,3,4,new O6("m~RRYZ[z{a~~g~aO#v~~dP!P!Qg~lO#w~~",28,129)],topRules:{StyleSheet:[0,6],Styles:[1,105]},specialized:[{term:124,get:t=>$Ae[t]||-1},{term:125,get:t=>BAe[t]||-1},{term:4,get:t=>NAe[t]||-1},{term:25,get:t=>zAe[t]||-1},{term:123,get:t=>QAe[t]||-1}],tokenPrec:1963});let ZM=null;function XM(){if(!ZM&&typeof document=="object"&&document.body){let{style:t}=document.body,e=[],n=new Set;for(let r in t)r!="cssText"&&r!="cssFloat"&&typeof t[r]=="string"&&(/[A-Z]/.test(r)&&(r=r.replace(/[A-Z]/g,i=>"-"+i.toLowerCase())),n.has(r)||(e.push(r),n.add(r)));ZM=e.sort().map(r=>({type:"property",label:r,apply:r+": "}))}return ZM||[]}const xq=["active","after","any-link","autofill","backdrop","before","checked","cue","default","defined","disabled","empty","enabled","file-selector-button","first","first-child","first-letter","first-line","first-of-type","focus","focus-visible","focus-within","fullscreen","has","host","host-context","hover","in-range","indeterminate","invalid","is","lang","last-child","last-of-type","left","link","marker","modal","not","nth-child","nth-last-child","nth-last-of-type","nth-of-type","only-child","only-of-type","optional","out-of-range","part","placeholder","placeholder-shown","read-only","read-write","required","right","root","scope","selection","slotted","target","target-text","valid","visited","where"].map(t=>({type:"class",label:t})),wq=["above","absolute","activeborder","additive","activecaption","after-white-space","ahead","alias","all","all-scroll","alphabetic","alternate","always","antialiased","appworkspace","asterisks","attr","auto","auto-flow","avoid","avoid-column","avoid-page","avoid-region","axis-pan","background","backwards","baseline","below","bidi-override","blink","block","block-axis","bold","bolder","border","border-box","both","bottom","break","break-all","break-word","bullets","button","button-bevel","buttonface","buttonhighlight","buttonshadow","buttontext","calc","capitalize","caps-lock-indicator","caption","captiontext","caret","cell","center","checkbox","circle","cjk-decimal","clear","clip","close-quote","col-resize","collapse","color","color-burn","color-dodge","column","column-reverse","compact","condensed","contain","content","contents","content-box","context-menu","continuous","copy","counter","counters","cover","crop","cross","crosshair","currentcolor","cursive","cyclic","darken","dashed","decimal","decimal-leading-zero","default","default-button","dense","destination-atop","destination-in","destination-out","destination-over","difference","disc","discard","disclosure-closed","disclosure-open","document","dot-dash","dot-dot-dash","dotted","double","down","e-resize","ease","ease-in","ease-in-out","ease-out","element","ellipse","ellipsis","embed","end","ethiopic-abegede-gez","ethiopic-halehame-aa-er","ethiopic-halehame-gez","ew-resize","exclusion","expanded","extends","extra-condensed","extra-expanded","fantasy","fast","fill","fill-box","fixed","flat","flex","flex-end","flex-start","footnotes","forwards","from","geometricPrecision","graytext","grid","groove","hand","hard-light","help","hidden","hide","higher","highlight","highlighttext","horizontal","hsl","hsla","hue","icon","ignore","inactiveborder","inactivecaption","inactivecaptiontext","infinite","infobackground","infotext","inherit","initial","inline","inline-axis","inline-block","inline-flex","inline-grid","inline-table","inset","inside","intrinsic","invert","italic","justify","keep-all","landscape","large","larger","left","level","lighter","lighten","line-through","linear","linear-gradient","lines","list-item","listbox","listitem","local","logical","loud","lower","lower-hexadecimal","lower-latin","lower-norwegian","lowercase","ltr","luminosity","manipulation","match","matrix","matrix3d","medium","menu","menutext","message-box","middle","min-intrinsic","mix","monospace","move","multiple","multiple_mask_images","multiply","n-resize","narrower","ne-resize","nesw-resize","no-close-quote","no-drop","no-open-quote","no-repeat","none","normal","not-allowed","nowrap","ns-resize","numbers","numeric","nw-resize","nwse-resize","oblique","opacity","open-quote","optimizeLegibility","optimizeSpeed","outset","outside","outside-shape","overlay","overline","padding","padding-box","painted","page","paused","perspective","pinch-zoom","plus-darker","plus-lighter","pointer","polygon","portrait","pre","pre-line","pre-wrap","preserve-3d","progress","push-button","radial-gradient","radio","read-only","read-write","read-write-plaintext-only","rectangle","region","relative","repeat","repeating-linear-gradient","repeating-radial-gradient","repeat-x","repeat-y","reset","reverse","rgb","rgba","ridge","right","rotate","rotate3d","rotateX","rotateY","rotateZ","round","row","row-resize","row-reverse","rtl","run-in","running","s-resize","sans-serif","saturation","scale","scale3d","scaleX","scaleY","scaleZ","screen","scroll","scrollbar","scroll-position","se-resize","self-start","self-end","semi-condensed","semi-expanded","separate","serif","show","single","skew","skewX","skewY","skip-white-space","slide","slider-horizontal","slider-vertical","sliderthumb-horizontal","sliderthumb-vertical","slow","small","small-caps","small-caption","smaller","soft-light","solid","source-atop","source-in","source-out","source-over","space","space-around","space-between","space-evenly","spell-out","square","start","static","status-bar","stretch","stroke","stroke-box","sub","subpixel-antialiased","svg_masks","super","sw-resize","symbolic","symbols","system-ui","table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row","table-row-group","text","text-bottom","text-top","textarea","textfield","thick","thin","threeddarkshadow","threedface","threedhighlight","threedlightshadow","threedshadow","to","top","transform","translate","translate3d","translateX","translateY","translateZ","transparent","ultra-condensed","ultra-expanded","underline","unidirectional-pan","unset","up","upper-latin","uppercase","url","var","vertical","vertical-text","view-box","visible","visibleFill","visiblePainted","visibleStroke","visual","w-resize","wait","wave","wider","window","windowframe","windowtext","words","wrap","wrap-reverse","x-large","x-small","xor","xx-large","xx-small"].map(t=>({type:"keyword",label:t})).concat(["aliceblue","antiquewhite","aqua","aquamarine","azure","beige","bisque","black","blanchedalmond","blue","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgreen","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dodgerblue","firebrick","floralwhite","forestgreen","fuchsia","gainsboro","ghostwhite","gold","goldenrod","gray","grey","green","greenyellow","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgreen","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightsteelblue","lightyellow","lime","limegreen","linen","magenta","maroon","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","navy","oldlace","olive","olivedrab","orange","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","purple","rebeccapurple","red","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","silver","skyblue","slateblue","slategray","snow","springgreen","steelblue","tan","teal","thistle","tomato","turquoise","violet","wheat","white","whitesmoke","yellow","yellowgreen"].map(t=>({type:"constant",label:t}))),UAe=["a","abbr","address","article","aside","b","bdi","bdo","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","dd","del","details","dfn","dialog","div","dl","dt","em","figcaption","figure","footer","form","header","hgroup","h1","h2","h3","h4","h5","h6","hr","html","i","iframe","img","input","ins","kbd","label","legend","li","main","meter","nav","ol","output","p","pre","ruby","section","select","small","source","span","strong","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","tr","u","ul"].map(t=>({type:"type",label:t})),VAe=["@charset","@color-profile","@container","@counter-style","@font-face","@font-feature-values","@font-palette-values","@import","@keyframes","@layer","@media","@namespace","@page","@position-try","@property","@scope","@starting-style","@supports","@view-transition"].map(t=>({type:"keyword",label:t})),gg=/^(\w[\w-]*|-\w[\w-]*|)$/,qAe=/^-(-[\w-]*)?$/;function ZAe(t,e){var n;if((t.name=="("||t.type.isError)&&(t=t.parent||t),t.name!="ArgList")return!1;let r=(n=t.parent)===null||n===void 0?void 0:n.firstChild;return r?.name!="Callee"?!1:e.sliceString(r.from,r.to)=="var"}const Oq=new Fne,XAe=["Declaration"];function WAe(t){for(let e=t;;){if(e.type.isTop)return e;if(!(e=e.parent))return t}}function Lie(t,e,n){if(e.to-e.from>4096){let r=Oq.get(e);if(r)return r;let i=[],s=new Set,o=e.cursor(so.IncludeAnonymous);if(o.firstChild())do for(let a of Lie(t,o.node,n))s.has(a.label)||(s.add(a.label),i.push(a));while(o.nextSibling());return Oq.set(e,i),i}else{let r=[],i=new Set;return e.cursor().iterate(s=>{var o;if(n(s)&&s.matchContext(XAe)&&((o=s.node.nextSibling)===null||o===void 0?void 0:o.name)==":"){let a=t.sliceString(s.from,s.to);i.has(a)||(i.add(a),r.push({label:a,type:"variable"}))}}),r}}const GAe=t=>e=>{let{state:n,pos:r}=e,i=ws(n).resolveInner(r,-1),s=i.type.isError&&i.from==i.to-1&&n.doc.sliceString(i.from,i.to)=="-";if(i.name=="PropertyName"||(s||i.name=="TagName")&&/^(Block|Styles)$/.test(i.resolve(i.to).name))return{from:i.from,options:XM(),validFor:gg};if(i.name=="ValueName")return{from:i.from,options:wq,validFor:gg};if(i.name=="PseudoClassName")return{from:i.from,options:xq,validFor:gg};if(t(i)||(e.explicit||s)&&ZAe(i,n.doc))return{from:t(i)||s?i.from:r,options:Lie(n.doc,WAe(i),t),validFor:qAe};if(i.name=="TagName"){for(let{parent:l}=i;l;l=l.parent)if(l.name=="Block")return{from:i.from,options:XM(),validFor:gg};return{from:i.from,options:UAe,validFor:gg}}if(i.name=="AtKeyword")return{from:i.from,options:VAe,validFor:gg};if(!e.explicit)return null;let o=i.resolve(r),a=o.childBefore(r);return a&&a.name==":"&&o.name=="PseudoClassSelector"?{from:r,options:xq,validFor:gg}:a&&a.name==":"&&o.name=="Declaration"||o.name=="ArgList"?{from:r,options:wq,validFor:gg}:o.name=="Block"||o.name=="Styles"?{from:r,options:XM(),validFor:gg}:null},YAe=GAe(t=>t.name=="VariableName"),k6=u0.define({name:"css",parser:jAe.configure({props:[S1.add({Declaration:Kg()}),k1.add({"Block KeyframeList":bD})]}),languageData:{commentTokens:{block:{open:"/*",close:"*/"}},indentOnInput:/^\s*\}$/,wordChars:"-"}});function HAe(){return new y1(k6,k6.data.of({autocomplete:YAe}))}const KAe=316,JAe=317,Sq=1,eEe=2,tEe=3,nEe=4,rEe=318,iEe=320,sEe=321,oEe=5,aEe=6,lEe=0,m9=[9,10,11,12,13,32,133,160,5760,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8232,8233,8239,8287,12288],$ie=125,uEe=59,g9=47,cEe=42,hEe=43,fEe=45,dEe=60,pEe=44,mEe=63,gEe=46,yEe=91,vEe=new xie({start:!1,shift(t,e){return e==oEe||e==aEe||e==iEe?t:e==sEe},strict:!1}),bEe=new Mc((t,e)=>{let{next:n}=t;(n==$ie||n==-1||e.context)&&t.acceptToken(rEe)},{contextual:!0,fallback:!0}),_Ee=new Mc((t,e)=>{let{next:n}=t,r;m9.indexOf(n)>-1||n==g9&&((r=t.peek(1))==g9||r==cEe)||n!=$ie&&n!=uEe&&n!=-1&&!e.context&&t.acceptToken(KAe)},{contextual:!0}),xEe=new Mc((t,e)=>{t.next==yEe&&!e.context&&t.acceptToken(JAe)},{contextual:!0}),wEe=new Mc((t,e)=>{let{next:n}=t;if(n==hEe||n==fEe){if(t.advance(),n==t.next){t.advance();let r=!e.context&&e.canShift(Sq);t.acceptToken(r?Sq:eEe)}}else n==mEe&&t.peek(1)==gEe&&(t.advance(),t.advance(),(t.next<48||t.next>57)&&t.acceptToken(tEe))},{contextual:!0});function WM(t,e){return t>=65&&t<=90||t>=97&&t<=122||t==95||t>=192||!e&&t>=48&&t<=57}const OEe=new Mc((t,e)=>{if(t.next!=dEe||!e.dialectEnabled(lEe)||(t.advance(),t.next==g9))return;let n=0;for(;m9.indexOf(t.next)>-1;)t.advance(),n++;if(WM(t.next,!0)){for(t.advance(),n++;WM(t.next,!1);)t.advance(),n++;for(;m9.indexOf(t.next)>-1;)t.advance(),n++;if(t.next==pEe)return;for(let r=0;;r++){if(r==7){if(!WM(t.next,!0))return;break}if(t.next!="extends".charCodeAt(r))break;t.advance(),n++}}t.acceptToken(nEe,-n)}),SEe=w0({"get set async static":be.modifier,"for while do if else switch try catch finally return throw break continue default case defer":be.controlKeyword,"in of await yield void typeof delete instanceof as satisfies":be.operatorKeyword,"let var const using function class extends":be.definitionKeyword,"import export from":be.moduleKeyword,"with debugger new":be.keyword,TemplateString:be.special(be.string),super:be.atom,BooleanLiteral:be.bool,this:be.self,null:be.null,Star:be.modifier,VariableName:be.variableName,"CallExpression/VariableName TaggedTemplateExpression/VariableName":be.function(be.variableName),VariableDefinition:be.definition(be.variableName),Label:be.labelName,PropertyName:be.propertyName,PrivatePropertyName:be.special(be.propertyName),"CallExpression/MemberExpression/PropertyName":be.function(be.propertyName),"FunctionDeclaration/VariableDefinition":be.function(be.definition(be.variableName)),"ClassDeclaration/VariableDefinition":be.definition(be.className),"NewExpression/VariableName":be.className,PropertyDefinition:be.definition(be.propertyName),PrivatePropertyDefinition:be.definition(be.special(be.propertyName)),UpdateOp:be.updateOperator,"LineComment Hashbang":be.lineComment,BlockComment:be.blockComment,Number:be.number,String:be.string,Escape:be.escape,ArithOp:be.arithmeticOperator,LogicOp:be.logicOperator,BitOp:be.bitwiseOperator,CompareOp:be.compareOperator,RegExp:be.regexp,Equals:be.definitionOperator,Arrow:be.function(be.punctuation),": Spread":be.punctuation,"( )":be.paren,"[ ]":be.squareBracket,"{ }":be.brace,"InterpolationStart InterpolationEnd":be.special(be.brace),".":be.derefOperator,", ;":be.separator,"@":be.meta,TypeName:be.typeName,TypeDefinition:be.definition(be.typeName),"type enum interface implements namespace module declare":be.definitionKeyword,"abstract global Privacy readonly override":be.modifier,"is keyof unique infer asserts":be.operatorKeyword,JSXAttributeValue:be.attributeValue,JSXText:be.content,"JSXStartTag JSXStartCloseTag JSXSelfCloseEndTag JSXEndTag":be.angleBracket,"JSXIdentifier JSXNameSpacedName":be.tagName,"JSXAttribute/JSXIdentifier JSXAttribute/JSXNameSpacedName":be.attributeName,"JSXBuiltin/JSXIdentifier":be.standard(be.tagName)}),kEe={__proto__:null,export:20,as:25,from:33,default:36,async:41,function:42,in:52,out:55,const:56,extends:60,this:64,true:72,false:72,null:84,void:88,typeof:92,super:108,new:142,delete:154,yield:163,await:167,class:172,public:235,private:235,protected:235,readonly:237,instanceof:256,satisfies:259,import:292,keyof:349,unique:353,infer:359,asserts:395,is:397,abstract:417,implements:419,type:421,let:424,var:426,using:429,interface:435,enum:439,namespace:445,module:447,declare:451,global:455,defer:471,for:476,of:485,while:488,with:492,do:496,if:500,else:502,switch:506,case:512,try:518,catch:522,finally:526,return:530,throw:534,break:538,continue:542,debugger:546},CEe={__proto__:null,async:129,get:131,set:133,declare:195,public:197,private:197,protected:197,static:199,abstract:201,override:203,readonly:209,accessor:211,new:401},AEe={__proto__:null,"<":193},EEe=c0.deserialize({version:14,states:"$F|Q%TQlOOO%[QlOOO'_QpOOP(lO`OOO*zQ!0MxO'#CiO+RO#tO'#CjO+aO&jO'#CjO+oO#@ItO'#DaO.QQlO'#DgO.bQlO'#DrO%[QlO'#DzO0fQlO'#ESOOQ!0Lf'#E['#E[O1PQ`O'#EXOOQO'#Ep'#EpOOQO'#Il'#IlO1XQ`O'#GsO1dQ`O'#EoO1iQ`O'#EoO3hQ!0MxO'#JrO6[Q!0MxO'#JsO6uQ`O'#F]O6zQ,UO'#FtOOQ!0Lf'#Ff'#FfO7VO7dO'#FfO9XQMhO'#F|O9`Q`O'#F{OOQ!0Lf'#Js'#JsOOQ!0Lb'#Jr'#JrO9eQ`O'#GwOOQ['#K_'#K_O9pQ`O'#IYO9uQ!0LrO'#IZOOQ['#J`'#J`OOQ['#I_'#I_Q`QlOOQ`QlOOO9}Q!L^O'#DvO:UQlO'#EOO:]QlO'#EQO9kQ`O'#GsO:dQMhO'#CoO:rQ`O'#EnO:}Q`O'#EyO;hQMhO'#FeO;xQ`O'#GsOOQO'#K`'#K`O;}Q`O'#K`O<]Q`O'#G{O<]Q`O'#G|O<]Q`O'#HOO9kQ`O'#HRO=SQ`O'#HUO>kQ`O'#CeO>{Q`O'#HcO?TQ`O'#HiO?TQ`O'#HkO`QlO'#HmO?TQ`O'#HoO?TQ`O'#HrO?YQ`O'#HxO?_Q!0LsO'#IOO%[QlO'#IQO?jQ!0LsO'#ISO?uQ!0LsO'#IUO9uQ!0LrO'#IWO@QQ!0MxO'#CiOASQpO'#DlQOQ`OOO%[QlO'#EQOAjQ`O'#ETO:dQMhO'#EnOAuQ`O'#EnOBQQ!bO'#FeOOQ['#Cg'#CgOOQ!0Lb'#Dq'#DqOOQ!0Lb'#Jv'#JvO%[QlO'#JvOOQO'#Jy'#JyOOQO'#Ih'#IhOCQQpO'#EgOOQ!0Lb'#Ef'#EfOOQ!0Lb'#J}'#J}OC|Q!0MSO'#EgODWQpO'#EWOOQO'#Jx'#JxODlQpO'#JyOEyQpO'#EWODWQpO'#EgPFWO&2DjO'#CbPOOO)CD})CD}OOOO'#I`'#I`OFcO#tO,59UOOQ!0Lh,59U,59UOOOO'#Ia'#IaOFqO&jO,59UOGPQ!L^O'#DcOOOO'#Ic'#IcOGWO#@ItO,59{OOQ!0Lf,59{,59{OGfQlO'#IdOGyQ`O'#JtOIxQ!fO'#JtO+}QlO'#JtOJPQ`O,5:ROJgQ`O'#EpOJtQ`O'#KTOKPQ`O'#KSOKPQ`O'#KSOKXQ`O,5;^OK^Q`O'#KROOQ!0Ln,5:^,5:^OKeQlO,5:^OMcQ!0MxO,5:fONSQ`O,5:nONmQ!0LrO'#KQONtQ`O'#KPO9eQ`O'#KPO! YQ`O'#KPO! bQ`O,5;]O! gQ`O'#KPO!#lQ!fO'#JsOOQ!0Lh'#Ci'#CiO%[QlO'#ESO!$[Q!fO,5:sOOQS'#Jz'#JzOOQO-E<j-E<jO9kQ`O,5=_O!$rQ`O,5=_O!$wQlO,5;ZO!&zQMhO'#EkO!(eQ`O,5;ZO!(jQlO'#DyO!(tQpO,5;dO!(|QpO,5;dO%[QlO,5;dOOQ['#FT'#FTOOQ['#FV'#FVO%[QlO,5;eO%[QlO,5;eO%[QlO,5;eO%[QlO,5;eO%[QlO,5;eO%[QlO,5;eO%[QlO,5;eO%[QlO,5;eO%[QlO,5;eO%[QlO,5;eOOQ['#FZ'#FZO!)[QlO,5;tOOQ!0Lf,5;y,5;yOOQ!0Lf,5;z,5;zOOQ!0Lf,5;|,5;|O%[QlO'#IpO!+_Q!0LrO,5<iO%[QlO,5;eO!&zQMhO,5;eO!+|QMhO,5;eO!-nQMhO'#E^O%[QlO,5;wOOQ!0Lf,5;{,5;{O!-uQ,UO'#FjO!.rQ,UO'#KXO!.^Q,UO'#KXO!.yQ,UO'#KXOOQO'#KX'#KXO!/_Q,UO,5<SOOOW,5<`,5<`O!/pQlO'#FvOOOW'#Io'#IoO7VO7dO,5<QO!/wQ,UO'#FxOOQ!0Lf,5<Q,5<QO!0hQ$IUO'#CyOOQ!0Lh'#C}'#C}O!0{O#@ItO'#DRO!1iQMjO,5<eO!1pQ`O,5<hO!3YQ(CWO'#GXO!3jQ`O'#GYO!3oQ`O'#GYO!5_Q(CWO'#G^O!6dQpO'#GbOOQO'#Gn'#GnO!,TQMhO'#GmOOQO'#Gp'#GpO!,TQMhO'#GoO!7VQ$IUO'#JlOOQ!0Lh'#Jl'#JlO!7aQ`O'#JkO!7oQ`O'#JjO!7wQ`O'#CuOOQ!0Lh'#C{'#C{O!8YQ`O'#C}OOQ!0Lh'#DV'#DVOOQ!0Lh'#DX'#DXO!8_Q`O,5<eO1SQ`O'#DZO!,TQMhO'#GPO!,TQMhO'#GRO!8gQ`O'#GTO!8lQ`O'#GUO!3oQ`O'#G[O!,TQMhO'#GaO<]Q`O'#JkO!8qQ`O'#EqO!9`Q`O,5<gOOQ!0Lb'#Cr'#CrO!9hQ`O'#ErO!:bQpO'#EsOOQ!0Lb'#KR'#KRO!:iQ!0LrO'#KaO9uQ!0LrO,5=cO`QlO,5>tOOQ['#Jh'#JhOOQ[,5>u,5>uOOQ[-E<]-E<]O!<hQ!0MxO,5:bO!:]QpO,5:`O!?RQ!0MxO,5:jO%[QlO,5:jO!AiQ!0MxO,5:lOOQO,5@z,5@zO!BYQMhO,5=_O!BhQ!0LrO'#JiO9`Q`O'#JiO!ByQ!0LrO,59ZO!CUQpO,59ZO!C^QMhO,59ZO:dQMhO,59ZO!CiQ`O,5;ZO!CqQ`O'#HbO!DVQ`O'#KdO%[QlO,5;}O!:]QpO,5<PO!D_Q`O,5=zO!DdQ`O,5=zO!DiQ`O,5=zO!DwQ`O,5=zO9uQ!0LrO,5=zO<]Q`O,5=jOOQO'#Cy'#CyO!EOQpO,5=gO!EWQMhO,5=hO!EcQ`O,5=jO!EhQ!bO,5=mO!EpQ`O'#K`O?YQ`O'#HWO9kQ`O'#HYO!EuQ`O'#HYO:dQMhO'#H[O!EzQ`O'#H[OOQ[,5=p,5=pO!FPQ`O'#H]O!FbQ`O'#CoO!FgQ`O,59PO!FqQ`O,59PO!HvQlO,59POOQ[,59P,59PO!IWQ!0LrO,59PO%[QlO,59PO!KcQlO'#HeOOQ['#Hf'#HfOOQ['#Hg'#HgO`QlO,5=}O!KyQ`O,5=}O`QlO,5>TO`QlO,5>VO!LOQ`O,5>XO`QlO,5>ZO!LTQ`O,5>^O!LYQlO,5>dOOQ[,5>j,5>jO%[QlO,5>jO9uQ!0LrO,5>lOOQ[,5>n,5>nO#!dQ`O,5>nOOQ[,5>p,5>pO#!dQ`O,5>pOOQ[,5>r,5>rO##QQpO'#D_O%[QlO'#JvO##sQpO'#JvO##}QpO'#DmO#$`QpO'#DmO#&qQlO'#DmO#&xQ`O'#JuO#'QQ`O,5:WO#'VQ`O'#EtO#'eQ`O'#KUO#'mQ`O,5;_O#'rQpO'#DmO#(PQpO'#EVOOQ!0Lf,5:o,5:oO%[QlO,5:oO#(WQ`O,5:oO?YQ`O,5;YO!CUQpO,5;YO!C^QMhO,5;YO:dQMhO,5;YO#(`Q`O,5@bO#(eQ07dO,5:sOOQO-E<f-E<fO#)kQ!0MSO,5;RODWQpO,5:rO#)uQpO,5:rODWQpO,5;RO!ByQ!0LrO,5:rOOQ!0Lb'#Ej'#EjOOQO,5;R,5;RO%[QlO,5;RO#*SQ!0LrO,5;RO#*_Q!0LrO,5;RO!CUQpO,5:rOOQO,5;X,5;XO#*mQ!0LrO,5;RPOOO'#I^'#I^P#+RO&2DjO,58|POOO,58|,58|OOOO-E<^-E<^OOQ!0Lh1G.p1G.pOOOO-E<_-E<_OOOO,59},59}O#+^Q!bO,59}OOOO-E<a-E<aOOQ!0Lf1G/g1G/gO#+cQ!fO,5?OO+}QlO,5?OOOQO,5?U,5?UO#+mQlO'#IdOOQO-E<b-E<bO#+zQ`O,5@`O#,SQ!fO,5@`O#,ZQ`O,5@nOOQ!0Lf1G/m1G/mO%[QlO,5@oO#,cQ`O'#IjOOQO-E<h-E<hO#,ZQ`O,5@nOOQ!0Lb1G0x1G0xOOQ!0Ln1G/x1G/xOOQ!0Ln1G0Y1G0YO%[QlO,5@lO#,wQ!0LrO,5@lO#-YQ!0LrO,5@lO#-aQ`O,5@kO9eQ`O,5@kO#-iQ`O,5@kO#-wQ`O'#ImO#-aQ`O,5@kOOQ!0Lb1G0w1G0wO!(tQpO,5:uO!)PQpO,5:uOOQS,5:w,5:wO#.iQdO,5:wO#.qQMhO1G2yO9kQ`O1G2yOOQ!0Lf1G0u1G0uO#/PQ!0MxO1G0uO#0UQ!0MvO,5;VOOQ!0Lh'#GW'#GWO#0rQ!0MzO'#JlO!$wQlO1G0uO#2}Q!fO'#JwO%[QlO'#JwO#3XQ`O,5:eOOQ!0Lh'#D_'#D_OOQ!0Lf1G1O1G1OO%[QlO1G1OOOQ!0Lf1G1f1G1fO#3^Q`O1G1OO#5rQ!0MxO1G1PO#5yQ!0MxO1G1PO#8aQ!0MxO1G1PO#8hQ!0MxO1G1PO#;OQ!0MxO1G1PO#=fQ!0MxO1G1PO#=mQ!0MxO1G1PO#=tQ!0MxO1G1PO#@[Q!0MxO1G1PO#@cQ!0MxO1G1PO#BpQ?MtO'#CiO#DkQ?MtO1G1`O#DrQ?MtO'#JsO#EVQ!0MxO,5?[OOQ!0Lb-E<n-E<nO#GdQ!0MxO1G1PO#HaQ!0MzO1G1POOQ!0Lf1G1P1G1PO#IdQMjO'#J|O#InQ`O,5:xO#IsQ!0MxO1G1cO#JgQ,UO,5<WO#JoQ,UO,5<XO#JwQ,UO'#FoO#K`Q`O'#FnOOQO'#KY'#KYOOQO'#In'#InO#KeQ,UO1G1nOOQ!0Lf1G1n1G1nOOOW1G1y1G1yO#KvQ?MtO'#JrO#LQQ`O,5<bO!)[QlO,5<bOOOW-E<m-E<mOOQ!0Lf1G1l1G1lO#LVQpO'#KXOOQ!0Lf,5<d,5<dO#L_QpO,5<dO#LdQMhO'#DTOOOO'#Ib'#IbO#LkO#@ItO,59mOOQ!0Lh,59m,59mO%[QlO1G2PO!8lQ`O'#IrO#LvQ`O,5<zOOQ!0Lh,5<w,5<wO!,TQMhO'#IuO#MdQMjO,5=XO!,TQMhO'#IwO#NVQMjO,5=ZO!&zQMhO,5=]OOQO1G2S1G2SO#NaQ!dO'#CrO#NtQ(CWO'#ErO$ |QpO'#GbO$!dQ!dO,5<sO$!kQ`O'#K[O9eQ`O'#K[O$!yQ`O,5<uO$#aQ!dO'#C{O!,TQMhO,5<tO$#kQ`O'#GZO$$PQ`O,5<tO$$UQ!dO'#GWO$$cQ!dO'#K]O$$mQ`O'#K]O!&zQMhO'#K]O$$rQ`O,5<xO$$wQlO'#JvO$%RQpO'#GcO#$`QpO'#GcO$%dQ`O'#GgO!3oQ`O'#GkO$%iQ!0LrO'#ItO$%tQpO,5<|OOQ!0Lp,5<|,5<|O$%{QpO'#GcO$&YQpO'#GdO$&kQpO'#GdO$&pQMjO,5=XO$'QQMjO,5=ZOOQ!0Lh,5=^,5=^O!,TQMhO,5@VO!,TQMhO,5@VO$'bQ`O'#IyO$'vQ`O,5@UO$(OQ`O,59aOOQ!0Lh,59i,59iO$(TQ`O,5@VO$)TQ$IYO,59uOOQ!0Lh'#Jp'#JpO$)vQMjO,5<kO$*iQMjO,5<mO@zQ`O,5<oOOQ!0Lh,5<p,5<pO$*sQ`O,5<vO$*xQMjO,5<{O$+YQ`O'#KPO!$wQlO1G2RO$+_Q`O1G2RO9eQ`O'#KSO9eQ`O'#EtO%[QlO'#EtO9eQ`O'#I{O$+dQ!0LrO,5@{OOQ[1G2}1G2}OOQ[1G4`1G4`OOQ!0Lf1G/|1G/|OOQ!0Lf1G/z1G/zO$-fQ!0MxO1G0UOOQ[1G2y1G2yO!&zQMhO1G2yO%[QlO1G2yO#.tQ`O1G2yO$/jQMhO'#EkOOQ!0Lb,5@T,5@TO$/wQ!0LrO,5@TOOQ[1G.u1G.uO!ByQ!0LrO1G.uO!CUQpO1G.uO!C^QMhO1G.uO$0YQ`O1G0uO$0_Q`O'#CiO$0jQ`O'#KeO$0rQ`O,5=|O$0wQ`O'#KeO$0|Q`O'#KeO$1[Q`O'#JRO$1jQ`O,5AOO$1rQ!fO1G1iOOQ!0Lf1G1k1G1kO9kQ`O1G3fO@zQ`O1G3fO$1yQ`O1G3fO$2OQ`O1G3fO!DiQ`O1G3fO9uQ!0LrO1G3fOOQ[1G3f1G3fO!EcQ`O1G3UO!&zQMhO1G3RO$2TQ`O1G3ROOQ[1G3S1G3SO!&zQMhO1G3SO$2YQ`O1G3SO$2bQpO'#HQOOQ[1G3U1G3UO!6_QpO'#I}O!EhQ!bO1G3XOOQ[1G3X1G3XOOQ[,5=r,5=rO$2jQMhO,5=tO9kQ`O,5=tO$%dQ`O,5=vO9`Q`O,5=vO!CUQpO,5=vO!C^QMhO,5=vO:dQMhO,5=vO$2xQ`O'#KcO$3TQ`O,5=wOOQ[1G.k1G.kO$3YQ!0LrO1G.kO@zQ`O1G.kO$3eQ`O1G.kO9uQ!0LrO1G.kO$5mQ!fO,5AQO$5zQ`O,5AQO9eQ`O,5AQO$6VQlO,5>PO$6^Q`O,5>POOQ[1G3i1G3iO`QlO1G3iOOQ[1G3o1G3oOOQ[1G3q1G3qO?TQ`O1G3sO$6cQlO1G3uO$:gQlO'#HtOOQ[1G3x1G3xO$:tQ`O'#HzO?YQ`O'#H|OOQ[1G4O1G4OO$:|QlO1G4OO9uQ!0LrO1G4UOOQ[1G4W1G4WOOQ!0Lb'#G_'#G_O9uQ!0LrO1G4YO9uQ!0LrO1G4[O$?TQ`O,5@bO!)[QlO,5;`O9eQ`O,5;`O?YQ`O,5:XO!)[QlO,5:XO!CUQpO,5:XO$?YQ?MtO,5:XOOQO,5;`,5;`O$?dQpO'#IeO$?zQ`O,5@aOOQ!0Lf1G/r1G/rO$@SQpO'#IkO$@^Q`O,5@pOOQ!0Lb1G0y1G0yO#$`QpO,5:XOOQO'#Ig'#IgO$@fQpO,5:qOOQ!0Ln,5:q,5:qO#(ZQ`O1G0ZOOQ!0Lf1G0Z1G0ZO%[QlO1G0ZOOQ!0Lf1G0t1G0tO?YQ`O1G0tO!CUQpO1G0tO!C^QMhO1G0tOOQ!0Lb1G5|1G5|O!ByQ!0LrO1G0^OOQO1G0m1G0mO%[QlO1G0mO$@mQ!0LrO1G0mO$@xQ!0LrO1G0mO!CUQpO1G0^ODWQpO1G0^O$AWQ!0LrO1G0mOOQO1G0^1G0^O$AlQ!0MxO1G0mPOOO-E<[-E<[POOO1G.h1G.hOOOO1G/i1G/iO$AvQ!bO,5<iO$BOQ!fO1G4jOOQO1G4p1G4pO%[QlO,5?OO$BYQ`O1G5zO$BbQ`O1G6YO$BjQ!fO1G6ZO9eQ`O,5?UO$BtQ!0MxO1G6WO%[QlO1G6WO$CUQ!0LrO1G6WO$CgQ`O1G6VO$CgQ`O1G6VO9eQ`O1G6VO$CoQ`O,5?XO9eQ`O,5?XOOQO,5?X,5?XO$DTQ`O,5?XO$+YQ`O,5?XOOQO-E<k-E<kOOQS1G0a1G0aOOQS1G0c1G0cO#.lQ`O1G0cOOQ[7+(e7+(eO!&zQMhO7+(eO%[QlO7+(eO$DcQ`O7+(eO$DnQMhO7+(eO$D|Q!0MzO,5=XO$GXQ!0MzO,5=ZO$IdQ!0MzO,5=XO$KuQ!0MzO,5=ZO$NWQ!0MzO,59uO%!]Q!0MzO,5<kO%$hQ!0MzO,5<mO%&sQ!0MzO,5<{OOQ!0Lf7+&a7+&aO%)UQ!0MxO7+&aO%)xQlO'#IfO%*VQ`O,5@cO%*_Q!fO,5@cOOQ!0Lf1G0P1G0PO%*iQ`O7+&jOOQ!0Lf7+&j7+&jO%*nQ?MtO,5:fO%[QlO7+&zO%*xQ?MtO,5:bO%+VQ?MtO,5:jO%+aQ?MtO,5:lO%+kQMhO'#IiO%+uQ`O,5@hOOQ!0Lh1G0d1G0dOOQO1G1r1G1rOOQO1G1s1G1sO%+}Q!jO,5<ZO!)[QlO,5<YOOQO-E<l-E<lOOQ!0Lf7+'Y7+'YOOOW7+'e7+'eOOOW1G1|1G1|O%,YQ`O1G1|OOQ!0Lf1G2O1G2OOOOO,59o,59oO%,_Q!dO,59oOOOO-E<`-E<`OOQ!0Lh1G/X1G/XO%,fQ!0MxO7+'kOOQ!0Lh,5?^,5?^O%-YQMhO1G2fP%-aQ`O'#IrPOQ!0Lh-E<p-E<pO%-}QMjO,5?aOOQ!0Lh-E<s-E<sO%.pQMjO,5?cOOQ!0Lh-E<u-E<uO%.zQ!dO1G2wO%/RQ!dO'#CrO%/iQMhO'#KSO$$wQlO'#JvOOQ!0Lh1G2_1G2_O%/sQ`O'#IqO%0[Q`O,5@vO%0[Q`O,5@vO%0dQ`O,5@vO%0oQ`O,5@vOOQO1G2a1G2aO%0}QMjO1G2`O$+YQ`O'#K[O!,TQMhO1G2`O%1_Q(CWO'#IsO%1lQ`O,5@wO!&zQMhO,5@wO%1tQ!dO,5@wOOQ!0Lh1G2d1G2dO%4UQ!fO'#CiO%4`Q`O,5=POOQ!0Lb,5<},5<}O%4hQpO,5<}OOQ!0Lb,5=O,5=OOCwQ`O,5<}O%4sQpO,5<}OOQ!0Lb,5=R,5=RO$+YQ`O,5=VOOQO,5?`,5?`OOQO-E<r-E<rOOQ!0Lp1G2h1G2hO#$`QpO,5<}O$$wQlO,5=PO%5RQ`O,5=OO%5^QpO,5=OO!,TQMhO'#IuO%6WQMjO1G2sO!,TQMhO'#IwO%6yQMjO1G2uO%7TQMjO1G5qO%7_QMjO1G5qOOQO,5?e,5?eOOQO-E<w-E<wOOQO1G.{1G.{O!,TQMhO1G5qO!,TQMhO1G5qO!:]QpO,59wO%[QlO,59wOOQ!0Lh,5<j,5<jO%7lQ`O1G2ZO!,TQMhO1G2bO%7qQ!0MxO7+'mOOQ!0Lf7+'m7+'mO!$wQlO7+'mO%8eQ`O,5;`OOQ!0Lb,5?g,5?gOOQ!0Lb-E<y-E<yO%8jQ!dO'#K^O#(ZQ`O7+(eO4UQ!fO7+(eO$DfQ`O7+(eO%8tQ!0MvO'#CiO%9XQ!0MvO,5=SO%9lQ`O,5=SO%9tQ`O,5=SOOQ!0Lb1G5o1G5oOOQ[7+$a7+$aO!ByQ!0LrO7+$aO!CUQpO7+$aO!$wQlO7+&aO%9yQ`O'#JQO%:bQ`O,5APOOQO1G3h1G3hO9kQ`O,5APO%:bQ`O,5APO%:jQ`O,5APOOQO,5?m,5?mOOQO-E=P-E=POOQ!0Lf7+'T7+'TO%:oQ`O7+)QO9uQ!0LrO7+)QO9kQ`O7+)QO@zQ`O7+)QO%:tQ`O7+)QOOQ[7+)Q7+)QOOQ[7+(p7+(pO%:yQ!0MvO7+(mO!&zQMhO7+(mO!E^Q`O7+(nOOQ[7+(n7+(nO!&zQMhO7+(nO%;TQ`O'#KbO%;`Q`O,5=lOOQO,5?i,5?iOOQO-E<{-E<{OOQ[7+(s7+(sO%<rQpO'#HZOOQ[1G3`1G3`O!&zQMhO1G3`O%[QlO1G3`O%<yQ`O1G3`O%=UQMhO1G3`O9uQ!0LrO1G3bO$%dQ`O1G3bO9`Q`O1G3bO!CUQpO1G3bO!C^QMhO1G3bO%=dQ`O'#JPO%=xQ`O,5@}O%>QQpO,5@}OOQ!0Lb1G3c1G3cOOQ[7+$V7+$VO@zQ`O7+$VO9uQ!0LrO7+$VO%>]Q`O7+$VO%[QlO1G6lO%[QlO1G6mO%>bQ!0LrO1G6lO%>lQlO1G3kO%>sQ`O1G3kO%>xQlO1G3kOOQ[7+)T7+)TO9uQ!0LrO7+)_O`QlO7+)aOOQ['#Kh'#KhOOQ['#JS'#JSO%?PQlO,5>`OOQ[,5>`,5>`O%[QlO'#HuO%?^Q`O'#HwOOQ[,5>f,5>fO9eQ`O,5>fOOQ[,5>h,5>hOOQ[7+)j7+)jOOQ[7+)p7+)pOOQ[7+)t7+)tOOQ[7+)v7+)vO%?cQpO1G5|O%?}Q?MtO1G0zO%@XQ`O1G0zOOQO1G/s1G/sO%@dQ?MtO1G/sO?YQ`O1G/sO!)[QlO'#DmOOQO,5?P,5?POOQO-E<c-E<cOOQO,5?V,5?VOOQO-E<i-E<iO!CUQpO1G/sOOQO-E<e-E<eOOQ!0Ln1G0]1G0]OOQ!0Lf7+%u7+%uO#(ZQ`O7+%uOOQ!0Lf7+&`7+&`O?YQ`O7+&`O!CUQpO7+&`OOQO7+%x7+%xO$AlQ!0MxO7+&XOOQO7+&X7+&XO%[QlO7+&XO%@nQ!0LrO7+&XO!ByQ!0LrO7+%xO!CUQpO7+%xO%@yQ!0LrO7+&XO%AXQ!0MxO7++rO%[QlO7++rO%AiQ`O7++qO%AiQ`O7++qOOQO1G4s1G4sO9eQ`O1G4sO%AqQ`O1G4sOOQS7+%}7+%}O#(ZQ`O<<LPO4UQ!fO<<LPO%BPQ`O<<LPOOQ[<<LP<<LPO!&zQMhO<<LPO%[QlO<<LPO%BXQ`O<<LPO%BdQ!0MzO,5?aO%DoQ!0MzO,5?cO%FzQ!0MzO1G2`O%I]Q!0MzO1G2sO%KhQ!0MzO1G2uO%MsQ!fO,5?QO%[QlO,5?QOOQO-E<d-E<dO%M}Q`O1G5}OOQ!0Lf<<JU<<JUO%NVQ?MtO1G0uO&!^Q?MtO1G1PO&!eQ?MtO1G1PO&$fQ?MtO1G1PO&$mQ?MtO1G1PO&&nQ?MtO1G1PO&(oQ?MtO1G1PO&(vQ?MtO1G1PO&(}Q?MtO1G1PO&+OQ?MtO1G1PO&+VQ?MtO1G1PO&+^Q!0MxO<<JfO&-UQ?MtO1G1PO&.RQ?MvO1G1PO&/UQ?MvO'#JlO&1[Q?MtO1G1cO&1iQ?MtO1G0UO&1sQMjO,5?TOOQO-E<g-E<gO!)[QlO'#FqOOQO'#KZ'#KZOOQO1G1u1G1uO&1}Q`O1G1tO&2SQ?MtO,5?[OOOW7+'h7+'hOOOO1G/Z1G/ZO&2^Q!dO1G4xOOQ!0Lh7+(Q7+(QP!&zQMhO,5?^O!,TQMhO7+(cO&2eQ`O,5?]O9eQ`O,5?]O$+YQ`O,5?]OOQO-E<o-E<oO&2sQ`O1G6bO&2sQ`O1G6bO&2{Q`O1G6bO&3WQMjO7+'zO&3hQ!dO,5?_O&3rQ`O,5?_O!&zQMhO,5?_OOQO-E<q-E<qO&3wQ!dO1G6cO&4RQ`O1G6cO&4ZQ`O1G2kO!&zQMhO1G2kOOQ!0Lb1G2i1G2iOOQ!0Lb1G2j1G2jO%4hQpO1G2iO!CUQpO1G2iOCwQ`O1G2iOOQ!0Lb1G2q1G2qO&4`QpO1G2iO&4nQ`O1G2kO$+YQ`O1G2jOCwQ`O1G2jO$$wQlO1G2kO&4vQ`O1G2jO&5jQMjO,5?aOOQ!0Lh-E<t-E<tO&6]QMjO,5?cOOQ!0Lh-E<v-E<vO!,TQMhO7++]O&6gQMjO7++]O&6qQMjO7++]OOQ!0Lh1G/c1G/cO&7OQ`O1G/cOOQ!0Lh7+'u7+'uO&7TQMjO7+'|O&7eQ!0MxO<<KXOOQ!0Lf<<KX<<KXO&8XQ`O1G0zO!&zQMhO'#IzO&8^Q`O,5@xO&:`Q!fO<<LPO!&zQMhO1G2nO&:gQ!0LrO1G2nOOQ[<<G{<<G{O!ByQ!0LrO<<G{O&:xQ!0MxO<<I{OOQ!0Lf<<I{<<I{OOQO,5?l,5?lO&;lQ`O,5?lO&;qQ`O,5?lOOQO-E=O-E=OO&<PQ`O1G6kO&<PQ`O1G6kO9kQ`O1G6kO@zQ`O<<LlOOQ[<<Ll<<LlO&<XQ`O<<LlO9uQ!0LrO<<LlO9kQ`O<<LlOOQ[<<LX<<LXO%:yQ!0MvO<<LXOOQ[<<LY<<LYO!E^Q`O<<LYO&<^QpO'#I|O&<iQ`O,5@|O!)[QlO,5@|OOQ[1G3W1G3WOOQO'#JO'#JOO9uQ!0LrO'#JOO&<qQpO,5=uOOQ[,5=u,5=uO&<xQpO'#EgO&=PQpO'#GeO&=UQ`O7+(zO&=ZQ`O7+(zOOQ[7+(z7+(zO!&zQMhO7+(zO%[QlO7+(zO&=cQ`O7+(zOOQ[7+(|7+(|O9uQ!0LrO7+(|O$%dQ`O7+(|O9`Q`O7+(|O!CUQpO7+(|O&=nQ`O,5?kOOQO-E<}-E<}OOQO'#H^'#H^O&=yQ`O1G6iO9uQ!0LrO<<GqOOQ[<<Gq<<GqO@zQ`O<<GqO&>RQ`O7+,WO&>WQ`O7+,XO%[QlO7+,WO%[QlO7+,XOOQ[7+)V7+)VO&>]Q`O7+)VO&>bQlO7+)VO&>iQ`O7+)VOOQ[<<Ly<<LyOOQ[<<L{<<L{OOQ[-E=Q-E=QOOQ[1G3z1G3zO&>nQ`O,5>aOOQ[,5>c,5>cO&>sQ`O1G4QO9eQ`O7+&fO!)[QlO7+&fOOQO7+%_7+%_O&>xQ?MtO1G6ZO?YQ`O7+%_OOQ!0Lf<<Ia<<IaOOQ!0Lf<<Iz<<IzO?YQ`O<<IzOOQO<<Is<<IsO$AlQ!0MxO<<IsO%[QlO<<IsOOQO<<Id<<IdO!ByQ!0LrO<<IdO&?SQ!0LrO<<IsO&?_Q!0MxO<= ^O&?oQ`O<= ]OOQO7+*_7+*_O9eQ`O7+*_OOQ[ANAkANAkO&?wQ!fOANAkO!&zQMhOANAkO#(ZQ`OANAkO4UQ!fOANAkO&@OQ`OANAkO%[QlOANAkO&@WQ!0MzO7+'zO&BiQ!0MzO,5?aO&DtQ!0MzO,5?cO&GPQ!0MzO7+'|O&IbQ!fO1G4lO&IlQ?MtO7+&aO&KpQ?MvO,5=XO&MwQ?MvO,5=ZO&NXQ?MvO,5=XO&NiQ?MvO,5=ZO&NyQ?MvO,59uO'#PQ?MvO,5<kO'%SQ?MvO,5<mO''hQ?MvO,5<{O')^Q?MtO7+'kO')kQ?MtO7+'mO')xQ`O,5<]OOQO7+'`7+'`OOQ!0Lh7+*d7+*dO')}QMjO<<K}OOQO1G4w1G4wO'*UQ`O1G4wO'*aQ`O1G4wO'*oQ`O7++|O'*oQ`O7++|O!&zQMhO1G4yO'*wQ!dO1G4yO'+RQ`O7++}O'+ZQ`O7+(VO'+fQ!dO7+(VOOQ!0Lb7+(T7+(TOOQ!0Lb7+(U7+(UO!CUQpO7+(TOCwQ`O7+(TO'+pQ`O7+(VO!&zQMhO7+(VO$+YQ`O7+(UO'+uQ`O7+(VOCwQ`O7+(UO'+}QMjO<<NwO!,TQMhO<<NwOOQ!0Lh7+$}7+$}O',XQ!dO,5?fOOQO-E<x-E<xO',cQ!0MvO7+(YO!&zQMhO7+(YOOQ[AN=gAN=gO9kQ`O1G5WOOQO1G5W1G5WO',sQ`O1G5WO',xQ`O7+,VO',xQ`O7+,VO9uQ!0LrOANBWO@zQ`OANBWOOQ[ANBWANBWO'-QQ`OANBWOOQ[ANAsANAsOOQ[ANAtANAtO'-VQ`O,5?hOOQO-E<z-E<zO'-bQ?MtO1G6hOOQO,5?j,5?jOOQO-E<|-E<|OOQ[1G3a1G3aO'-lQ`O,5=POOQ[<<Lf<<LfO!&zQMhO<<LfO&=UQ`O<<LfO'-qQ`O<<LfO%[QlO<<LfOOQ[<<Lh<<LhO9uQ!0LrO<<LhO$%dQ`O<<LhO9`Q`O<<LhO'-yQpO1G5VO'.UQ`O7+,TOOQ[AN=]AN=]O9uQ!0LrOAN=]OOQ[<= r<= rOOQ[<= s<= sO'.^Q`O<= rO'.cQ`O<= sOOQ[<<Lq<<LqO'.hQ`O<<LqO'.mQlO<<LqOOQ[1G3{1G3{O?YQ`O7+)lO'.tQ`O<<JQO'/PQ?MtO<<JQOOQO<<Hy<<HyOOQ!0LfAN?fAN?fOOQOAN?_AN?_O$AlQ!0MxOAN?_OOQOAN?OAN?OO%[QlOAN?_OOQO<<My<<MyOOQ[G27VG27VO!&zQMhOG27VO#(ZQ`OG27VO'/ZQ!fOG27VO4UQ!fOG27VO'/bQ`OG27VO'/jQ?MtO<<JfO'/wQ?MvO1G2`O'1mQ?MvO,5?aO'3pQ?MvO,5?cO'5sQ?MvO1G2sO'7vQ?MvO1G2uO'9yQ?MtO<<KXO':WQ?MtO<<I{OOQO1G1w1G1wO!,TQMhOANAiOOQO7+*c7+*cO':eQ`O7+*cO':pQ`O<= hO':xQ!dO7+*eOOQ!0Lb<<Kq<<KqO$+YQ`O<<KqOCwQ`O<<KqO';SQ`O<<KqO!&zQMhO<<KqOOQ!0Lb<<Ko<<KoO!CUQpO<<KoO';_Q!dO<<KqOOQ!0Lb<<Kp<<KpO';iQ`O<<KqO!&zQMhO<<KqO$+YQ`O<<KpO';nQMjOANDcO';xQ!0MvO<<KtOOQO7+*r7+*rO9kQ`O7+*rO'<YQ`O<= qOOQ[G27rG27rO9uQ!0LrOG27rO@zQ`OG27rO!)[QlO1G5SO'<bQ`O7+,SO'<jQ`O1G2kO&=UQ`OANBQOOQ[ANBQANBQO!&zQMhOANBQO'<oQ`OANBQOOQ[ANBSANBSO9uQ!0LrOANBSO$%dQ`OANBSOOQO'#H_'#H_OOQO7+*q7+*qOOQ[G22wG22wOOQ[ANE^ANE^OOQ[ANE_ANE_OOQ[ANB]ANB]O'<wQ`OANB]OOQ[<<MW<<MWO!)[QlOAN?lOOQOG24yG24yO$AlQ!0MxOG24yO#(ZQ`OLD,qOOQ[LD,qLD,qO!&zQMhOLD,qO'<|Q!fOLD,qO'=TQ?MvO7+'zO'>yQ?MvO,5?aO'@|Q?MvO,5?cO'CPQ?MvO7+'|O'DuQMjOG27TOOQO<<M}<<M}OOQ!0LbANA]ANA]O$+YQ`OANA]OCwQ`OANA]O'EVQ!dOANA]OOQ!0LbANAZANAZO'E^Q`OANA]O!&zQMhOANA]O'EiQ!dOANA]OOQ!0LbANA[ANA[OOQO<<N^<<N^OOQ[LD-^LD-^O9uQ!0LrOLD-^O'EsQ?MtO7+*nOOQO'#Gf'#GfOOQ[G27lG27lO&=UQ`OG27lO!&zQMhOG27lOOQ[G27nG27nO9uQ!0LrOG27nOOQ[G27wG27wO'E}Q?MtOG25WOOQOLD*eLD*eOOQ[!$(!]!$(!]O#(ZQ`O!$(!]O!&zQMhO!$(!]O'FXQ!0MzOG27TOOQ!0LbG26wG26wO$+YQ`OG26wO'HjQ`OG26wOCwQ`OG26wO'HuQ!dOG26wO!&zQMhOG26wOOQ[!$(!x!$(!xOOQ[LD-WLD-WO&=UQ`OLD-WOOQ[LD-YLD-YOOQ[!)9Ew!)9EwO#(ZQ`O!)9EwOOQ!0LbLD,cLD,cO$+YQ`OLD,cOCwQ`OLD,cO'H|Q`OLD,cO'IXQ!dOLD,cOOQ[!$(!r!$(!rOOQ[!.K;c!.K;cO'I`Q?MvOG27TOOQ!0Lb!$( }!$( }O$+YQ`O!$( }OCwQ`O!$( }O'KUQ`O!$( }OOQ!0Lb!)9Ei!)9EiO$+YQ`O!)9EiOCwQ`O!)9EiOOQ!0Lb!.K;T!.K;TO$+YQ`O!.K;TOOQ!0Lb!4/0o!4/0oO!)[QlO'#DzO1PQ`O'#EXO'KaQ!fO'#JrO'KhQ!L^O'#DvO'KoQlO'#EOO'KvQ!fO'#CiO'N^Q!fO'#CiO!)[QlO'#EQO'NnQlO,5;ZO!)[QlO,5;eO!)[QlO,5;eO!)[QlO,5;eO!)[QlO,5;eO!)[QlO,5;eO!)[QlO,5;eO!)[QlO,5;eO!)[QlO,5;eO!)[QlO,5;eO!)[QlO,5;eO!)[QlO'#IpO(!qQ`O,5<iO!)[QlO,5;eO(!yQMhO,5;eO($dQMhO,5;eO!)[QlO,5;wO!&zQMhO'#GmO(!yQMhO'#GmO!&zQMhO'#GoO(!yQMhO'#GoO1SQ`O'#DZO1SQ`O'#DZO!&zQMhO'#GPO(!yQMhO'#GPO!&zQMhO'#GRO(!yQMhO'#GRO!&zQMhO'#GaO(!yQMhO'#GaO!)[QlO,5:jO($kQpO'#D_O($uQpO'#JvO!)[QlO,5@oO'NnQlO1G0uO(%PQ?MtO'#CiO!)[QlO1G2PO!&zQMhO'#IuO(!yQMhO'#IuO!&zQMhO'#IwO(!yQMhO'#IwO(%ZQ!dO'#CrO!&zQMhO,5<tO(!yQMhO,5<tO'NnQlO1G2RO!)[QlO7+&zO!&zQMhO1G2`O(!yQMhO1G2`O!&zQMhO'#IuO(!yQMhO'#IuO!&zQMhO'#IwO(!yQMhO'#IwO!&zQMhO1G2bO(!yQMhO1G2bO'NnQlO7+'mO'NnQlO7+&aO!&zQMhOANAiO(!yQMhOANAiO(%nQ`O'#EoO(%sQ`O'#EoO(%{Q`O'#F]O(&QQ`O'#EyO(&VQ`O'#KTO(&bQ`O'#KRO(&mQ`O,5;ZO(&rQMjO,5<eO(&yQ`O'#GYO('OQ`O'#GYO('TQ`O,5<eO(']Q`O,5<gO('eQ`O,5;ZO('mQ?MtO1G1`O('tQ`O,5<tO('yQ`O,5<tO((OQ`O,5<vO((TQ`O,5<vO((YQ`O1G2RO((_Q`O1G0uO((dQMjO<<K}O((kQMjO<<K}O((rQMhO'#F|O9`Q`O'#F{OAuQ`O'#EnO!)[QlO,5;tO!3oQ`O'#GYO!3oQ`O'#GYO!3oQ`O'#G[O!3oQ`O'#G[O!,TQMhO7+(cO!,TQMhO7+(cO%.zQ!dO1G2wO%.zQ!dO1G2wO!&zQMhO,5=]O!&zQMhO,5=]",stateData:"()x~O'|OS'}OSTOS(ORQ~OPYOQYOSfOY!VOaqOdzOeyOl!POpkOrYOskOtkOzkO|YO!OYO!SWO!WkO!XkO!_XO!iuO!lZO!oYO!pYO!qYO!svO!uwO!xxO!|]O$W|O$niO%h}O%j!QO%l!OO%m!OO%n!OO%q!RO%s!SO%v!TO%w!TO%y!UO&W!WO&^!XO&`!YO&b!ZO&d![O&g!]O&m!^O&s!_O&u!`O&w!aO&y!bO&{!cO(TSO(VTO(YUO(aVO(o[O~OWtO~P`OPYOQYOSfOd!jOe!iOpkOrYOskOtkOzkO|YO!OYO!SWO!WkO!XkO!_!eO!iuO!lZO!oYO!pYO!qYO!svO!u!gO!x!hO$W!kO$niO(T!dO(VTO(YUO(aVO(o[O~Oa!wOs!nO!S!oO!b!yO!c!vO!d!vO!|<VO#T!pO#U!pO#V!xO#W!pO#X!pO#[!zO#]!zO(U!lO(VTO(YUO(e!mO(o!sO~O(O!{O~OP]XR]X[]Xa]Xj]Xr]X!Q]X!S]X!]]X!l]X!p]X#R]X#S]X#`]X#kfX#n]X#o]X#p]X#q]X#r]X#s]X#t]X#u]X#v]X#x]X#z]X#{]X$Q]X'z]X(a]X(r]X(y]X(z]X~O!g%RX~P(qO_!}O(V#PO(W!}O(X#PO~O_#QO(X#PO(Y#PO(Z#QO~Ox#SO!U#TO(b#TO(c#VO~OPYOQYOSfOd!jOe!iOpkOrYOskOtkOzkO|YO!OYO!SWO!WkO!XkO!_!eO!iuO!lZO!oYO!pYO!qYO!svO!u!gO!x!hO$W!kO$niO(T<ZO(VTO(YUO(aVO(o[O~O![#ZO!]#WO!Y(hP!Y(vP~P+}O!^#cO~P`OPYOQYOSfOd!jOe!iOrYOskOtkOzkO|YO!OYO!SWO!WkO!XkO!_!eO!iuO!lZO!oYO!pYO!qYO!svO!u!gO!x!hO$W!kO$niO(VTO(YUO(aVO(o[O~Op#mO![#iO!|]O#i#lO#j#iO(T<[O!k(sP~P.iO!l#oO(T#nO~O!x#sO!|]O%h#tO~O#k#uO~O!g#vO#k#uO~OP$[OR#zO[$cOj$ROr$aO!Q#yO!S#{O!]$_O!l#xO!p$[O#R$RO#n$OO#o$PO#p$PO#q$PO#r$QO#s$RO#t$RO#u$bO#v$SO#x$UO#z$WO#{$XO(aVO(r$YO(y#|O(z#}O~Oa(fX'z(fX'w(fX!k(fX!Y(fX!_(fX%i(fX!g(fX~P1qO#S$dO#`$eO$Q$eOP(gXR(gX[(gXj(gXr(gX!Q(gX!S(gX!](gX!l(gX!p(gX#R(gX#n(gX#o(gX#p(gX#q(gX#r(gX#s(gX#t(gX#u(gX#v(gX#x(gX#z(gX#{(gX(a(gX(r(gX(y(gX(z(gX!_(gX%i(gX~Oa(gX'z(gX'w(gX!Y(gX!k(gXv(gX!g(gX~P4UO#`$eO~O$]$hO$_$gO$f$mO~OSfO!_$nO$i$oO$k$qO~Oh%VOj%dOk%dOp%WOr%XOs$tOt$tOz%YO|%ZO!O%]O!S${O!_$|O!i%bO!l$xO#j%cO$W%`O$t%^O$v%_O$y%aO(T$sO(VTO(YUO(a$uO(y$}O(z%POg(^P~Ol%[O~P7eO!l%eO~O!S%hO!_%iO(T%gO~O!g%mO~Oa%nO'z%nO~O!Q%rO~P%[O(U!lO~P%[O%n%vO~P%[Oh%VO!l%eO(T%gO(U!lO~Oe%}O!l%eO(T%gO~Oj$RO~O!_&PO(T%gO(U!lO(VTO(YUO`)WP~O!Q&SO!l&RO%j&VO&T&WO~P;SO!x#sO~O%s&YO!S)SX!_)SX(T)SX~O(T&ZO~Ol!PO!u&`O%j!QO%l!OO%m!OO%n!OO%q!RO%s!SO%v!TO%w!TO~Od&eOe&dO!x&bO%h&cO%{&aO~P<bOd&hOeyOl!PO!_&gO!u&`O!xxO!|]O%h}O%l!OO%m!OO%n!OO%q!RO%s!SO%v!TO%w!TO%y!UO~Ob&kO#`&nO%j&iO(U!lO~P=gO!l&oO!u&sO~O!l#oO~O!_XO~Oa%nO'x&{O'z%nO~Oa%nO'x'OO'z%nO~Oa%nO'x'QO'z%nO~O'w]X!Y]Xv]X!k]X&[]X!_]X%i]X!g]X~P(qO!b'_O!c'WO!d'WO(U!lO(VTO(YUO~Os'UO!S'TO!['XO(e'SO!^(iP!^(xP~P@nOn'bO!_'`O(T%gO~Oe'gO!l%eO(T%gO~O!Q&SO!l&RO~Os!nO!S!oO!|<VO#T!pO#U!pO#W!pO#X!pO(U!lO(VTO(YUO(e!mO(o!sO~O!b'mO!c'lO!d'lO#V!pO#['nO#]'nO~PBYOa%nOh%VO!g#vO!l%eO'z%nO(r'pO~O!p'tO#`'rO~PChOs!nO!S!oO(VTO(YUO(e!mO(o!sO~O!_XOs(mX!S(mX!b(mX!c(mX!d(mX!|(mX#T(mX#U(mX#V(mX#W(mX#X(mX#[(mX#](mX(U(mX(V(mX(Y(mX(e(mX(o(mX~O!c'lO!d'lO(U!lO~PDWO(P'xO(Q'xO(R'zO~O_!}O(V'|O(W!}O(X'|O~O_#QO(X'|O(Y'|O(Z#QO~Ov(OO~P%[Ox#SO!U#TO(b#TO(c(RO~O![(TO!Y'WX!Y'^X!]'WX!]'^X~P+}O!](VO!Y(hX~OP$[OR#zO[$cOj$ROr$aO!Q#yO!S#{O!](VO!l#xO!p$[O#R$RO#n$OO#o$PO#p$PO#q$PO#r$QO#s$RO#t$RO#u$bO#v$SO#x$UO#z$WO#{$XO(aVO(r$YO(y#|O(z#}O~O!Y(hX~PHRO!Y([O~O!Y(uX!](uX!g(uX!k(uX(r(uX~O#`(uX#k#dX!^(uX~PJUO#`(]O!Y(wX!](wX~O!](^O!Y(vX~O!Y(aO~O#`$eO~PJUO!^(bO~P`OR#zO!Q#yO!S#{O!l#xO(aVOP!na[!naj!nar!na!]!na!p!na#R!na#n!na#o!na#p!na#q!na#r!na#s!na#t!na#u!na#v!na#x!na#z!na#{!na(r!na(y!na(z!na~Oa!na'z!na'w!na!Y!na!k!nav!na!_!na%i!na!g!na~PKlO!k(cO~O!g#vO#`(dO(r'pO!](tXa(tX'z(tX~O!k(tX~PNXO!S%hO!_%iO!|]O#i(iO#j(hO(T%gO~O!](jO!k(sX~O!k(lO~O!S%hO!_%iO#j(hO(T%gO~OP(gXR(gX[(gXj(gXr(gX!Q(gX!S(gX!](gX!l(gX!p(gX#R(gX#n(gX#o(gX#p(gX#q(gX#r(gX#s(gX#t(gX#u(gX#v(gX#x(gX#z(gX#{(gX(a(gX(r(gX(y(gX(z(gX~O!g#vO!k(gX~P! uOR(nO!Q(mO!l#xO#S$dO!|!{a!S!{a~O!x!{a%h!{a!_!{a#i!{a#j!{a(T!{a~P!#vO!x(rO~OPYOQYOSfOd!jOe!iOpkOrYOskOtkOzkO|YO!OYO!SWO!WkO!XkO!_XO!iuO!lZO!oYO!pYO!qYO!svO!u!gO!x!hO$W!kO$niO(T!dO(VTO(YUO(aVO(o[O~Oh%VOp%WOr%XOs$tOt$tOz%YO|%ZO!O<sO!S${O!_$|O!i>VO!l$xO#j<yO$W%`O$t<uO$v<wO$y%aO(T(vO(VTO(YUO(a$uO(y$}O(z%PO~O#k(xO~O![(zO!k(kP~P%[O(e(|O(o[O~O!S)OO!l#xO(e(|O(o[O~OP<UOQ<UOSfOd>ROe!iOpkOr<UOskOtkOzkO|<UO!O<UO!SWO!WkO!XkO!_!eO!i<XO!lZO!o<UO!p<UO!q<UO!s<YO!u<]O!x!hO$W!kO$n>PO(T)]O(VTO(YUO(aVO(o[O~O!]$_Oa$qa'z$qa'w$qa!k$qa!Y$qa!_$qa%i$qa!g$qa~Ol)dO~P!&zOh%VOp%WOr%XOs$tOt$tOz%YO|%ZO!O%]O!S${O!_$|O!i%bO!l$xO#j%cO$W%`O$t%^O$v%_O$y%aO(T(vO(VTO(YUO(a$uO(y$}O(z%PO~Og(pP~P!,TO!Q)iO!g)hO!_$^X$Z$^X$]$^X$_$^X$f$^X~O!g)hO!_({X$Z({X$]({X$_({X$f({X~O!Q)iO~P!.^O!Q)iO!_({X$Z({X$]({X$_({X$f({X~O!_)kO$Z)oO$])jO$_)jO$f)pO~O![)sO~P!)[O$]$hO$_$gO$f)wO~On$zX!Q$zX#S$zX'y$zX(y$zX(z$zX~OgmXg$zXnmX!]mX#`mX~P!0SOx)yO(b)zO(c)|O~On*VO!Q*OO'y*PO(y$}O(z%PO~Og)}O~P!1WOg*WO~Oh%VOr%XOs$tOt$tOz%YO|%ZO!O<sO!S*YO!_*ZO!i>VO!l$xO#j<yO$W%`O$t<uO$v<wO$y%aO(VTO(YUO(a$uO(y$}O(z%PO~Op*`O![*^O(T*XO!k)OP~P!1uO#k*aO~O!l*bO~Oh%VOp%WOr%XOs$tOt$tOz%YO|%ZO!O<sO!S${O!_$|O!i>VO!l$xO#j<yO$W%`O$t<uO$v<wO$y%aO(T*dO(VTO(YUO(a$uO(y$}O(z%PO~O![*gO!Y)PP~P!3tOr*sOs!nO!S*iO!b*qO!c*kO!d*kO!l*bO#[*rO%`*mO(U!lO(VTO(YUO(e!mO~O!^*pO~P!5iO#S$dOn(`X!Q(`X'y(`X(y(`X(z(`X!](`X#`(`X~Og(`X$O(`X~P!6kOn*xO#`*wOg(_X!](_X~O!]*yOg(^X~Oj%dOk%dOl%dO(T&ZOg(^P~Os*|O~Og)}O(T&ZO~O!l+SO~O(T(vO~Op+WO!S%hO![#iO!_%iO!|]O#i#lO#j#iO(T%gO!k(sP~O!g#vO#k+XO~O!S%hO![+ZO!](^O!_%iO(T%gO!Y(vP~Os'[O!S+]O![+[O(VTO(YUO(e(|O~O!^(xP~P!9|O!]+^Oa)TX'z)TX~OP$[OR#zO[$cOj$ROr$aO!Q#yO!S#{O!l#xO!p$[O#R$RO#n$OO#o$PO#p$PO#q$PO#r$QO#s$RO#t$RO#u$bO#v$SO#x$UO#z$WO#{$XO(aVO(r$YO(y#|O(z#}O~Oa!ja!]!ja'z!ja'w!ja!Y!ja!k!jav!ja!_!ja%i!ja!g!ja~P!:tOR#zO!Q#yO!S#{O!l#xO(aVOP!ra[!raj!rar!ra!]!ra!p!ra#R!ra#n!ra#o!ra#p!ra#q!ra#r!ra#s!ra#t!ra#u!ra#v!ra#x!ra#z!ra#{!ra(r!ra(y!ra(z!ra~Oa!ra'z!ra'w!ra!Y!ra!k!rav!ra!_!ra%i!ra!g!ra~P!=[OR#zO!Q#yO!S#{O!l#xO(aVOP!ta[!taj!tar!ta!]!ta!p!ta#R!ta#n!ta#o!ta#p!ta#q!ta#r!ta#s!ta#t!ta#u!ta#v!ta#x!ta#z!ta#{!ta(r!ta(y!ta(z!ta~Oa!ta'z!ta'w!ta!Y!ta!k!tav!ta!_!ta%i!ta!g!ta~P!?rOh%VOn+gO!_'`O%i+fO~O!g+iOa(]X!_(]X'z(]X!](]X~Oa%nO!_XO'z%nO~Oh%VO!l%eO~Oh%VO!l%eO(T%gO~O!g#vO#k(xO~Ob+tO%j+uO(T+qO(VTO(YUO!^)XP~O!]+vO`)WX~O[+zO~O`+{O~O!_&PO(T%gO(U!lO`)WP~O%j,OO~P;SOh%VO#`,SO~Oh%VOn,VO!_$|O~O!_,XO~O!Q,ZO!_XO~O%n%vO~O!x,`O~Oe,eO~Ob,fO(T#nO(VTO(YUO!^)VP~Oe%}O~O%j!QO(T&ZO~P=gO[,kO`,jO~OPYOQYOSfOdzOeyOpkOrYOskOtkOzkO|YO!OYO!SWO!WkO!XkO!iuO!lZO!oYO!pYO!qYO!svO!xxO!|]O$niO%h}O(VTO(YUO(aVO(o[O~O!_!eO!u!gO$W!kO(T!dO~P!FyO`,jOa%nO'z%nO~OPYOQYOSfOd!jOe!iOpkOrYOskOtkOzkO|YO!OYO!SWO!WkO!XkO!_!eO!iuO!lZO!oYO!pYO!qYO!svO!x!hO$W!kO$niO(T!dO(VTO(YUO(aVO(o[O~Oa,pOl!OO!uwO%l!OO%m!OO%n!OO~P!IcO!l&oO~O&^,vO~O!_,xO~O&o,zO&q,{OP&laQ&laS&laY&laa&lad&lae&lal&lap&lar&las&lat&laz&la|&la!O&la!S&la!W&la!X&la!_&la!i&la!l&la!o&la!p&la!q&la!s&la!u&la!x&la!|&la$W&la$n&la%h&la%j&la%l&la%m&la%n&la%q&la%s&la%v&la%w&la%y&la&W&la&^&la&`&la&b&la&d&la&g&la&m&la&s&la&u&la&w&la&y&la&{&la'w&la(T&la(V&la(Y&la(a&la(o&la!^&la&e&lab&la&j&la~O(T-QO~Oh!eX!]!RX!^!RX!g!RX!g!eX!l!eX#`!RX~O!]!eX!^!eX~P#!iO!g-VO#`-UOh(jX!]#hX!^#hX!g(jX!l(jX~O!](jX!^(jX~P##[Oh%VO!g-XO!l%eO!]!aX!^!aX~Os!nO!S!oO(VTO(YUO(e!mO~OP<UOQ<UOSfOd>ROe!iOpkOr<UOskOtkOzkO|<UO!O<UO!SWO!WkO!XkO!_!eO!i<XO!lZO!o<UO!p<UO!q<UO!s<YO!u<]O!x!hO$W!kO$n>PO(VTO(YUO(aVO(o[O~O(T=QO~P#$qO!]-]O!^(iX~O!^-_O~O!g-VO#`-UO!]#hX!^#hX~O!]-`O!^(xX~O!^-bO~O!c-cO!d-cO(U!lO~P#$`O!^-fO~P'_On-iO!_'`O~O!Y-nO~Os!{a!b!{a!c!{a!d!{a#T!{a#U!{a#V!{a#W!{a#X!{a#[!{a#]!{a(U!{a(V!{a(Y!{a(e!{a(o!{a~P!#vO!p-sO#`-qO~PChO!c-uO!d-uO(U!lO~PDWOa%nO#`-qO'z%nO~Oa%nO!g#vO#`-qO'z%nO~Oa%nO!g#vO!p-sO#`-qO'z%nO(r'pO~O(P'xO(Q'xO(R-zO~Ov-{O~O!Y'Wa!]'Wa~P!:tO![.PO!Y'WX!]'WX~P%[O!](VO!Y(ha~O!Y(ha~PHRO!](^O!Y(va~O!S%hO![.TO!_%iO(T%gO!Y'^X!]'^X~O#`.VO!](ta!k(taa(ta'z(ta~O!g#vO~P#,wO!](jO!k(sa~O!S%hO!_%iO#j.ZO(T%gO~Op.`O!S%hO![.]O!_%iO!|]O#i._O#j.]O(T%gO!]'aX!k'aX~OR.dO!l#xO~Oh%VOn.gO!_'`O%i.fO~Oa#ci!]#ci'z#ci'w#ci!Y#ci!k#civ#ci!_#ci%i#ci!g#ci~P!:tOn>]O!Q*OO'y*PO(y$}O(z%PO~O#k#_aa#_a#`#_a'z#_a!]#_a!k#_a!_#_a!Y#_a~P#/sO#k(`XP(`XR(`X[(`Xa(`Xj(`Xr(`X!S(`X!l(`X!p(`X#R(`X#n(`X#o(`X#p(`X#q(`X#r(`X#s(`X#t(`X#u(`X#v(`X#x(`X#z(`X#{(`X'z(`X(a(`X(r(`X!k(`X!Y(`X'w(`Xv(`X!_(`X%i(`X!g(`X~P!6kO!].tO!k(kX~P!:tO!k.wO~O!Y.yO~OP$[OR#zO!Q#yO!S#{O!l#xO!p$[O(aVO[#mia#mij#mir#mi!]#mi#R#mi#o#mi#p#mi#q#mi#r#mi#s#mi#t#mi#u#mi#v#mi#x#mi#z#mi#{#mi'z#mi(r#mi(y#mi(z#mi'w#mi!Y#mi!k#miv#mi!_#mi%i#mi!g#mi~O#n#mi~P#3cO#n$OO~P#3cOP$[OR#zOr$aO!Q#yO!S#{O!l#xO!p$[O#n$OO#o$PO#p$PO#q$PO(aVO[#mia#mij#mi!]#mi#R#mi#s#mi#t#mi#u#mi#v#mi#x#mi#z#mi#{#mi'z#mi(r#mi(y#mi(z#mi'w#mi!Y#mi!k#miv#mi!_#mi%i#mi!g#mi~O#r#mi~P#6QO#r$QO~P#6QOP$[OR#zO[$cOj$ROr$aO!Q#yO!S#{O!l#xO!p$[O#R$RO#n$OO#o$PO#p$PO#q$PO#r$QO#s$RO#t$RO#u$bO(aVOa#mi!]#mi#x#mi#z#mi#{#mi'z#mi(r#mi(y#mi(z#mi'w#mi!Y#mi!k#miv#mi!_#mi%i#mi!g#mi~O#v#mi~P#8oOP$[OR#zO[$cOj$ROr$aO!Q#yO!S#{O!l#xO!p$[O#R$RO#n$OO#o$PO#p$PO#q$PO#r$QO#s$RO#t$RO#u$bO#v$SO(aVO(z#}Oa#mi!]#mi#z#mi#{#mi'z#mi(r#mi(y#mi'w#mi!Y#mi!k#miv#mi!_#mi%i#mi!g#mi~O#x$UO~P#;VO#x#mi~P#;VO#v$SO~P#8oOP$[OR#zO[$cOj$ROr$aO!Q#yO!S#{O!l#xO!p$[O#R$RO#n$OO#o$PO#p$PO#q$PO#r$QO#s$RO#t$RO#u$bO#v$SO#x$UO(aVO(y#|O(z#}Oa#mi!]#mi#{#mi'z#mi(r#mi'w#mi!Y#mi!k#miv#mi!_#mi%i#mi!g#mi~O#z#mi~P#={O#z$WO~P#={OP]XR]X[]Xj]Xr]X!Q]X!S]X!l]X!p]X#R]X#S]X#`]X#kfX#n]X#o]X#p]X#q]X#r]X#s]X#t]X#u]X#v]X#x]X#z]X#{]X$Q]X(a]X(r]X(y]X(z]X!]]X!^]X~O$O]X~P#@jOP$[OR#zO[<mOj<bOr<kO!Q#yO!S#{O!l#xO!p$[O#R<bO#n<_O#o<`O#p<`O#q<`O#r<aO#s<bO#t<bO#u<lO#v<cO#x<eO#z<gO#{<hO(aVO(r$YO(y#|O(z#}O~O$O.{O~P#BwO#S$dO#`<nO$Q<nO$O(gX!^(gX~P! uOa'da!]'da'z'da'w'da!k'da!Y'dav'da!_'da%i'da!g'da~P!:tO[#mia#mij#mir#mi!]#mi#R#mi#r#mi#s#mi#t#mi#u#mi#v#mi#x#mi#z#mi#{#mi'z#mi(r#mi'w#mi!Y#mi!k#miv#mi!_#mi%i#mi!g#mi~OP$[OR#zO!Q#yO!S#{O!l#xO!p$[O#n$OO#o$PO#p$PO#q$PO(aVO(y#mi(z#mi~P#EyOn>]O!Q*OO'y*PO(y$}O(z%POP#miR#mi!S#mi!l#mi!p#mi#n#mi#o#mi#p#mi#q#mi(a#mi~P#EyO!]/POg(pX~P!1WOg/RO~Oa$Pi!]$Pi'z$Pi'w$Pi!Y$Pi!k$Piv$Pi!_$Pi%i$Pi!g$Pi~P!:tO$]/SO$_/SO~O$]/TO$_/TO~O!g)hO#`/UO!_$cX$Z$cX$]$cX$_$cX$f$cX~O![/VO~O!_)kO$Z/XO$])jO$_)jO$f/YO~O!]<iO!^(fX~P#BwO!^/ZO~O!g)hO$f({X~O$f/]O~Ov/^O~P!&zOx)yO(b)zO(c/aO~O!S/dO~O(y$}On%aa!Q%aa'y%aa(z%aa!]%aa#`%aa~Og%aa$O%aa~P#L{O(z%POn%ca!Q%ca'y%ca(y%ca!]%ca#`%ca~Og%ca$O%ca~P#MnO!]fX!gfX!kfX!k$zX(rfX~P!0SOp%WO![/mO!](^O(T/lO!Y(vP!Y)PP~P!1uOr*sO!b*qO!c*kO!d*kO!l*bO#[*rO%`*mO(U!lO(VTO(YUO~Os<}O!S/nO![+[O!^*pO(e<|O!^(xP~P$ [O!k/oO~P#/sO!]/pO!g#vO(r'pO!k)OX~O!k/uO~OnoX!QoX'yoX(yoX(zoX~O!g#vO!koX~P$#OOp/wO!S%hO![*^O!_%iO(T%gO!k)OP~O#k/xO~O!Y$zX!]$zX!g%RX~P!0SO!]/yO!Y)PX~P#/sO!g/{O~O!Y/}O~OpkO(T0OO~P.iOh%VOr0TO!g#vO!l%eO(r'pO~O!g+iO~Oa%nO!]0XO'z%nO~O!^0ZO~P!5iO!c0[O!d0[O(U!lO~P#$`Os!nO!S0]O(VTO(YUO(e!mO~O#[0_O~Og%aa!]%aa#`%aa$O%aa~P!1WOg%ca!]%ca#`%ca$O%ca~P!1WOj%dOk%dOl%dO(T&ZOg'mX!]'mX~O!]*yOg(^a~Og0hO~On0jO#`0iOg(_a!](_a~OR0kO!Q0kO!S0lO#S$dOn}a'y}a(y}a(z}a!]}a#`}a~Og}a$O}a~P$(cO!Q*OO'y*POn$sa(y$sa(z$sa!]$sa#`$sa~Og$sa$O$sa~P$)_O!Q*OO'y*POn$ua(y$ua(z$ua!]$ua#`$ua~Og$ua$O$ua~P$*QO#k0oO~Og%Ta!]%Ta#`%Ta$O%Ta~P!1WO!g#vO~O#k0rO~O!]+^Oa)Ta'z)Ta~OR#zO!Q#yO!S#{O!l#xO(aVOP!ri[!rij!rir!ri!]!ri!p!ri#R!ri#n!ri#o!ri#p!ri#q!ri#r!ri#s!ri#t!ri#u!ri#v!ri#x!ri#z!ri#{!ri(r!ri(y!ri(z!ri~Oa!ri'z!ri'w!ri!Y!ri!k!riv!ri!_!ri%i!ri!g!ri~P$+oOh%VOr%XOs$tOt$tOz%YO|%ZO!O<sO!S${O!_$|O!i>VO!l$xO#j<yO$W%`O$t<uO$v<wO$y%aO(VTO(YUO(a$uO(y$}O(z%PO~Op0{O%]0|O(T0zO~P$.VO!g+iOa(]a!_(]a'z(]a!](]a~O#k1SO~O[]X!]fX!^fX~O!]1TO!^)XX~O!^1VO~O[1WO~Ob1YO(T+qO(VTO(YUO~O!_&PO(T%gO`'uX!]'uX~O!]+vO`)Wa~O!k1]O~P!:tO[1`O~O`1aO~O#`1fO~On1iO!_$|O~O(e(|O!^)UP~Oh%VOn1rO!_1oO%i1qO~O[1|O!]1zO!^)VX~O!^1}O~O`2POa%nO'z%nO~O(T#nO(VTO(YUO~O#S$dO#`$eO$Q$eOP(gXR(gX[(gXr(gX!Q(gX!S(gX!](gX!l(gX!p(gX#R(gX#n(gX#o(gX#p(gX#q(gX#r(gX#s(gX#t(gX#u(gX#v(gX#x(gX#z(gX#{(gX(a(gX(r(gX(y(gX(z(gX~Oj2SO&[2TOa(gX~P$3pOj2SO#`$eO&[2TO~Oa2VO~P%[Oa2XO~O&e2[OP&ciQ&ciS&ciY&cia&cid&cie&cil&cip&cir&cis&cit&ciz&ci|&ci!O&ci!S&ci!W&ci!X&ci!_&ci!i&ci!l&ci!o&ci!p&ci!q&ci!s&ci!u&ci!x&ci!|&ci$W&ci$n&ci%h&ci%j&ci%l&ci%m&ci%n&ci%q&ci%s&ci%v&ci%w&ci%y&ci&W&ci&^&ci&`&ci&b&ci&d&ci&g&ci&m&ci&s&ci&u&ci&w&ci&y&ci&{&ci'w&ci(T&ci(V&ci(Y&ci(a&ci(o&ci!^&cib&ci&j&ci~Ob2bO!^2`O&j2aO~P`O!_XO!l2dO~O&q,{OP&liQ&liS&liY&lia&lid&lie&lil&lip&lir&lis&lit&liz&li|&li!O&li!S&li!W&li!X&li!_&li!i&li!l&li!o&li!p&li!q&li!s&li!u&li!x&li!|&li$W&li$n&li%h&li%j&li%l&li%m&li%n&li%q&li%s&li%v&li%w&li%y&li&W&li&^&li&`&li&b&li&d&li&g&li&m&li&s&li&u&li&w&li&y&li&{&li'w&li(T&li(V&li(Y&li(a&li(o&li!^&li&e&lib&li&j&li~O!Y2jO~O!]!aa!^!aa~P#BwOs!nO!S!oO![2pO(e!mO!]'XX!^'XX~P@nO!]-]O!^(ia~O!]'_X!^'_X~P!9|O!]-`O!^(xa~O!^2wO~P'_Oa%nO#`3QO'z%nO~Oa%nO!g#vO#`3QO'z%nO~Oa%nO!g#vO!p3UO#`3QO'z%nO(r'pO~Oa%nO'z%nO~P!:tO!]$_Ov$qa~O!Y'Wi!]'Wi~P!:tO!](VO!Y(hi~O!](^O!Y(vi~O!Y(wi!](wi~P!:tO!](ti!k(tia(ti'z(ti~P!:tO#`3WO!](ti!k(tia(ti'z(ti~O!](jO!k(si~O!S%hO!_%iO!|]O#i3]O#j3[O(T%gO~O!S%hO!_%iO#j3[O(T%gO~On3dO!_'`O%i3cO~Oh%VOn3dO!_'`O%i3cO~O#k%aaP%aaR%aa[%aaa%aaj%aar%aa!S%aa!l%aa!p%aa#R%aa#n%aa#o%aa#p%aa#q%aa#r%aa#s%aa#t%aa#u%aa#v%aa#x%aa#z%aa#{%aa'z%aa(a%aa(r%aa!k%aa!Y%aa'w%aav%aa!_%aa%i%aa!g%aa~P#L{O#k%caP%caR%ca[%caa%caj%car%ca!S%ca!l%ca!p%ca#R%ca#n%ca#o%ca#p%ca#q%ca#r%ca#s%ca#t%ca#u%ca#v%ca#x%ca#z%ca#{%ca'z%ca(a%ca(r%ca!k%ca!Y%ca'w%cav%ca!_%ca%i%ca!g%ca~P#MnO#k%aaP%aaR%aa[%aaa%aaj%aar%aa!S%aa!]%aa!l%aa!p%aa#R%aa#n%aa#o%aa#p%aa#q%aa#r%aa#s%aa#t%aa#u%aa#v%aa#x%aa#z%aa#{%aa'z%aa(a%aa(r%aa!k%aa!Y%aa'w%aa#`%aav%aa!_%aa%i%aa!g%aa~P#/sO#k%caP%caR%ca[%caa%caj%car%ca!S%ca!]%ca!l%ca!p%ca#R%ca#n%ca#o%ca#p%ca#q%ca#r%ca#s%ca#t%ca#u%ca#v%ca#x%ca#z%ca#{%ca'z%ca(a%ca(r%ca!k%ca!Y%ca'w%ca#`%cav%ca!_%ca%i%ca!g%ca~P#/sO#k}aP}a[}aa}aj}ar}a!l}a!p}a#R}a#n}a#o}a#p}a#q}a#r}a#s}a#t}a#u}a#v}a#x}a#z}a#{}a'z}a(a}a(r}a!k}a!Y}a'w}av}a!_}a%i}a!g}a~P$(cO#k$saP$saR$sa[$saa$saj$sar$sa!S$sa!l$sa!p$sa#R$sa#n$sa#o$sa#p$sa#q$sa#r$sa#s$sa#t$sa#u$sa#v$sa#x$sa#z$sa#{$sa'z$sa(a$sa(r$sa!k$sa!Y$sa'w$sav$sa!_$sa%i$sa!g$sa~P$)_O#k$uaP$uaR$ua[$uaa$uaj$uar$ua!S$ua!l$ua!p$ua#R$ua#n$ua#o$ua#p$ua#q$ua#r$ua#s$ua#t$ua#u$ua#v$ua#x$ua#z$ua#{$ua'z$ua(a$ua(r$ua!k$ua!Y$ua'w$uav$ua!_$ua%i$ua!g$ua~P$*QO#k%TaP%TaR%Ta[%Taa%Taj%Tar%Ta!S%Ta!]%Ta!l%Ta!p%Ta#R%Ta#n%Ta#o%Ta#p%Ta#q%Ta#r%Ta#s%Ta#t%Ta#u%Ta#v%Ta#x%Ta#z%Ta#{%Ta'z%Ta(a%Ta(r%Ta!k%Ta!Y%Ta'w%Ta#`%Tav%Ta!_%Ta%i%Ta!g%Ta~P#/sOa#cq!]#cq'z#cq'w#cq!Y#cq!k#cqv#cq!_#cq%i#cq!g#cq~P!:tO![3lO!]'YX!k'YX~P%[O!].tO!k(ka~O!].tO!k(ka~P!:tO!Y3oO~O$O!na!^!na~PKlO$O!ja!]!ja!^!ja~P#BwO$O!ra!^!ra~P!=[O$O!ta!^!ta~P!?rOg']X!]']X~P!,TO!]/POg(pa~OSfO!_4TO$d4UO~O!^4YO~Ov4ZO~P#/sOa$mq!]$mq'z$mq'w$mq!Y$mq!k$mqv$mq!_$mq%i$mq!g$mq~P!:tO!Y4]O~P!&zO!S4^O~O!Q*OO'y*PO(z%POn'ia(y'ia!]'ia#`'ia~Og'ia$O'ia~P%-fO!Q*OO'y*POn'ka(y'ka(z'ka!]'ka#`'ka~Og'ka$O'ka~P%.XO(r$YO~P#/sO!YfX!Y$zX!]fX!]$zX!g%RX#`fX~P!0SOp%WO(T=WO~P!1uOp4bO!S%hO![4aO!_%iO(T%gO!]'eX!k'eX~O!]/pO!k)Oa~O!]/pO!g#vO!k)Oa~O!]/pO!g#vO(r'pO!k)Oa~Og$|i!]$|i#`$|i$O$|i~P!1WO![4jO!Y'gX!]'gX~P!3tO!]/yO!Y)Pa~O!]/yO!Y)Pa~P#/sOP]XR]X[]Xj]Xr]X!Q]X!S]X!Y]X!]]X!l]X!p]X#R]X#S]X#`]X#kfX#n]X#o]X#p]X#q]X#r]X#s]X#t]X#u]X#v]X#x]X#z]X#{]X$Q]X(a]X(r]X(y]X(z]X~Oj%YX!g%YX~P%2OOj4oO!g#vO~Oh%VO!g#vO!l%eO~Oh%VOr4tO!l%eO(r'pO~Or4yO!g#vO(r'pO~Os!nO!S4zO(VTO(YUO(e!mO~O(y$}On%ai!Q%ai'y%ai(z%ai!]%ai#`%ai~Og%ai$O%ai~P%5oO(z%POn%ci!Q%ci'y%ci(y%ci!]%ci#`%ci~Og%ci$O%ci~P%6bOg(_i!](_i~P!1WO#`5QOg(_i!](_i~P!1WO!k5VO~Oa$oq!]$oq'z$oq'w$oq!Y$oq!k$oqv$oq!_$oq%i$oq!g$oq~P!:tO!Y5ZO~O!]5[O!_)QX~P#/sOa$zX!_$zX%^]X'z$zX!]$zX~P!0SO%^5_OaoX!_oX'zoX!]oX~P$#OOp5`O(T#nO~O%^5_O~Ob5fO%j5gO(T+qO(VTO(YUO!]'tX!^'tX~O!]1TO!^)Xa~O[5kO~O`5lO~O[5pO~Oa%nO'z%nO~P#/sO!]5uO#`5wO!^)UX~O!^5xO~Or6OOs!nO!S*iO!b!yO!c!vO!d!vO!|<VO#T!pO#U!pO#V!pO#W!pO#X!pO#[5}O#]!zO(U!lO(VTO(YUO(e!mO(o!sO~O!^5|O~P%;eOn6TO!_1oO%i6SO~Oh%VOn6TO!_1oO%i6SO~Ob6[O(T#nO(VTO(YUO!]'sX!^'sX~O!]1zO!^)Va~O(VTO(YUO(e6^O~O`6bO~Oj6eO&[6fO~PNXO!k6gO~P%[Oa6iO~Oa6iO~P%[Ob2bO!^6nO&j2aO~P`O!g6pO~O!g6rOh(ji!](ji!^(ji!g(ji!l(jir(ji(r(ji~O!]#hi!^#hi~P#BwO#`6sO!]#hi!^#hi~O!]!ai!^!ai~P#BwOa%nO#`6|O'z%nO~Oa%nO!g#vO#`6|O'z%nO~O!](tq!k(tqa(tq'z(tq~P!:tO!](jO!k(sq~O!S%hO!_%iO#j7TO(T%gO~O!_'`O%i7WO~On7[O!_'`O%i7WO~O#k'iaP'iaR'ia['iaa'iaj'iar'ia!S'ia!l'ia!p'ia#R'ia#n'ia#o'ia#p'ia#q'ia#r'ia#s'ia#t'ia#u'ia#v'ia#x'ia#z'ia#{'ia'z'ia(a'ia(r'ia!k'ia!Y'ia'w'iav'ia!_'ia%i'ia!g'ia~P%-fO#k'kaP'kaR'ka['kaa'kaj'kar'ka!S'ka!l'ka!p'ka#R'ka#n'ka#o'ka#p'ka#q'ka#r'ka#s'ka#t'ka#u'ka#v'ka#x'ka#z'ka#{'ka'z'ka(a'ka(r'ka!k'ka!Y'ka'w'kav'ka!_'ka%i'ka!g'ka~P%.XO#k$|iP$|iR$|i[$|ia$|ij$|ir$|i!S$|i!]$|i!l$|i!p$|i#R$|i#n$|i#o$|i#p$|i#q$|i#r$|i#s$|i#t$|i#u$|i#v$|i#x$|i#z$|i#{$|i'z$|i(a$|i(r$|i!k$|i!Y$|i'w$|i#`$|iv$|i!_$|i%i$|i!g$|i~P#/sO#k%aiP%aiR%ai[%aia%aij%air%ai!S%ai!l%ai!p%ai#R%ai#n%ai#o%ai#p%ai#q%ai#r%ai#s%ai#t%ai#u%ai#v%ai#x%ai#z%ai#{%ai'z%ai(a%ai(r%ai!k%ai!Y%ai'w%aiv%ai!_%ai%i%ai!g%ai~P%5oO#k%ciP%ciR%ci[%cia%cij%cir%ci!S%ci!l%ci!p%ci#R%ci#n%ci#o%ci#p%ci#q%ci#r%ci#s%ci#t%ci#u%ci#v%ci#x%ci#z%ci#{%ci'z%ci(a%ci(r%ci!k%ci!Y%ci'w%civ%ci!_%ci%i%ci!g%ci~P%6bO!]'Ya!k'Ya~P!:tO!].tO!k(ki~O$O#ci!]#ci!^#ci~P#BwOP$[OR#zO!Q#yO!S#{O!l#xO!p$[O(aVO[#mij#mir#mi#R#mi#o#mi#p#mi#q#mi#r#mi#s#mi#t#mi#u#mi#v#mi#x#mi#z#mi#{#mi$O#mi(r#mi(y#mi(z#mi!]#mi!^#mi~O#n#mi~P%NdO#n<_O~P%NdOP$[OR#zOr<kO!Q#yO!S#{O!l#xO!p$[O#n<_O#o<`O#p<`O#q<`O(aVO[#mij#mi#R#mi#s#mi#t#mi#u#mi#v#mi#x#mi#z#mi#{#mi$O#mi(r#mi(y#mi(z#mi!]#mi!^#mi~O#r#mi~P&!lO#r<aO~P&!lOP$[OR#zO[<mOj<bOr<kO!Q#yO!S#{O!l#xO!p$[O#R<bO#n<_O#o<`O#p<`O#q<`O#r<aO#s<bO#t<bO#u<lO(aVO#x#mi#z#mi#{#mi$O#mi(r#mi(y#mi(z#mi!]#mi!^#mi~O#v#mi~P&$tOP$[OR#zO[<mOj<bOr<kO!Q#yO!S#{O!l#xO!p$[O#R<bO#n<_O#o<`O#p<`O#q<`O#r<aO#s<bO#t<bO#u<lO#v<cO(aVO(z#}O#z#mi#{#mi$O#mi(r#mi(y#mi!]#mi!^#mi~O#x<eO~P&&uO#x#mi~P&&uO#v<cO~P&$tOP$[OR#zO[<mOj<bOr<kO!Q#yO!S#{O!l#xO!p$[O#R<bO#n<_O#o<`O#p<`O#q<`O#r<aO#s<bO#t<bO#u<lO#v<cO#x<eO(aVO(y#|O(z#}O#{#mi$O#mi(r#mi!]#mi!^#mi~O#z#mi~P&)UO#z<gO~P&)UOa#|y!]#|y'z#|y'w#|y!Y#|y!k#|yv#|y!_#|y%i#|y!g#|y~P!:tO[#mij#mir#mi#R#mi#r#mi#s#mi#t#mi#u#mi#v#mi#x#mi#z#mi#{#mi$O#mi(r#mi!]#mi!^#mi~OP$[OR#zO!Q#yO!S#{O!l#xO!p$[O#n<_O#o<`O#p<`O#q<`O(aVO(y#mi(z#mi~P&,QOn>^O!Q*OO'y*PO(y$}O(z%POP#miR#mi!S#mi!l#mi!p#mi#n#mi#o#mi#p#mi#q#mi(a#mi~P&,QO#S$dOP(`XR(`X[(`Xj(`Xn(`Xr(`X!Q(`X!S(`X!l(`X!p(`X#R(`X#n(`X#o(`X#p(`X#q(`X#r(`X#s(`X#t(`X#u(`X#v(`X#x(`X#z(`X#{(`X$O(`X'y(`X(a(`X(r(`X(y(`X(z(`X!](`X!^(`X~O$O$Pi!]$Pi!^$Pi~P#BwO$O!ri!^!ri~P$+oOg']a!]']a~P!1WO!^7nO~O!]'da!^'da~P#BwO!Y7oO~P#/sO!g#vO(r'pO!]'ea!k'ea~O!]/pO!k)Oi~O!]/pO!g#vO!k)Oi~Og$|q!]$|q#`$|q$O$|q~P!1WO!Y'ga!]'ga~P#/sO!g7vO~O!]/yO!Y)Pi~P#/sO!]/yO!Y)Pi~O!Y7yO~Oh%VOr8OO!l%eO(r'pO~Oj8QO!g#vO~Or8TO!g#vO(r'pO~O!Q*OO'y*PO(z%POn'ja(y'ja!]'ja#`'ja~Og'ja$O'ja~P&5RO!Q*OO'y*POn'la(y'la(z'la!]'la#`'la~Og'la$O'la~P&5tOg(_q!](_q~P!1WO#`8VOg(_q!](_q~P!1WO!Y8WO~Og%Oq!]%Oq#`%Oq$O%Oq~P!1WOa$oy!]$oy'z$oy'w$oy!Y$oy!k$oyv$oy!_$oy%i$oy!g$oy~P!:tO!g6rO~O!]5[O!_)Qa~O!_'`OP$TaR$Ta[$Taj$Tar$Ta!Q$Ta!S$Ta!]$Ta!l$Ta!p$Ta#R$Ta#n$Ta#o$Ta#p$Ta#q$Ta#r$Ta#s$Ta#t$Ta#u$Ta#v$Ta#x$Ta#z$Ta#{$Ta(a$Ta(r$Ta(y$Ta(z$Ta~O%i7WO~P&8fO%^8[Oa%[i!_%[i'z%[i!]%[i~Oa#cy!]#cy'z#cy'w#cy!Y#cy!k#cyv#cy!_#cy%i#cy!g#cy~P!:tO[8^O~Ob8`O(T+qO(VTO(YUO~O!]1TO!^)Xi~O`8dO~O(e(|O!]'pX!^'pX~O!]5uO!^)Ua~O!^8nO~P%;eO(o!sO~P$&YO#[8oO~O!_1oO~O!_1oO%i8qO~On8tO!_1oO%i8qO~O[8yO!]'sa!^'sa~O!]1zO!^)Vi~O!k8}O~O!k9OO~O!k9RO~O!k9RO~P%[Oa9TO~O!g9UO~O!k9VO~O!](wi!^(wi~P#BwOa%nO#`9_O'z%nO~O!](ty!k(tya(ty'z(ty~P!:tO!](jO!k(sy~O%i9bO~P&8fO!_'`O%i9bO~O#k$|qP$|qR$|q[$|qa$|qj$|qr$|q!S$|q!]$|q!l$|q!p$|q#R$|q#n$|q#o$|q#p$|q#q$|q#r$|q#s$|q#t$|q#u$|q#v$|q#x$|q#z$|q#{$|q'z$|q(a$|q(r$|q!k$|q!Y$|q'w$|q#`$|qv$|q!_$|q%i$|q!g$|q~P#/sO#k'jaP'jaR'ja['jaa'jaj'jar'ja!S'ja!l'ja!p'ja#R'ja#n'ja#o'ja#p'ja#q'ja#r'ja#s'ja#t'ja#u'ja#v'ja#x'ja#z'ja#{'ja'z'ja(a'ja(r'ja!k'ja!Y'ja'w'jav'ja!_'ja%i'ja!g'ja~P&5RO#k'laP'laR'la['laa'laj'lar'la!S'la!l'la!p'la#R'la#n'la#o'la#p'la#q'la#r'la#s'la#t'la#u'la#v'la#x'la#z'la#{'la'z'la(a'la(r'la!k'la!Y'la'w'lav'la!_'la%i'la!g'la~P&5tO#k%OqP%OqR%Oq[%Oqa%Oqj%Oqr%Oq!S%Oq!]%Oq!l%Oq!p%Oq#R%Oq#n%Oq#o%Oq#p%Oq#q%Oq#r%Oq#s%Oq#t%Oq#u%Oq#v%Oq#x%Oq#z%Oq#{%Oq'z%Oq(a%Oq(r%Oq!k%Oq!Y%Oq'w%Oq#`%Oqv%Oq!_%Oq%i%Oq!g%Oq~P#/sO!]'Yi!k'Yi~P!:tO$O#cq!]#cq!^#cq~P#BwO(y$}OP%aaR%aa[%aaj%aar%aa!S%aa!l%aa!p%aa#R%aa#n%aa#o%aa#p%aa#q%aa#r%aa#s%aa#t%aa#u%aa#v%aa#x%aa#z%aa#{%aa$O%aa(a%aa(r%aa!]%aa!^%aa~On%aa!Q%aa'y%aa(z%aa~P&IyO(z%POP%caR%ca[%caj%car%ca!S%ca!l%ca!p%ca#R%ca#n%ca#o%ca#p%ca#q%ca#r%ca#s%ca#t%ca#u%ca#v%ca#x%ca#z%ca#{%ca$O%ca(a%ca(r%ca!]%ca!^%ca~On%ca!Q%ca'y%ca(y%ca~P&LQOn>^O!Q*OO'y*PO(z%PO~P&IyOn>^O!Q*OO'y*PO(y$}O~P&LQOR0kO!Q0kO!S0lO#S$dOP}a[}aj}an}ar}a!l}a!p}a#R}a#n}a#o}a#p}a#q}a#r}a#s}a#t}a#u}a#v}a#x}a#z}a#{}a$O}a'y}a(a}a(r}a(y}a(z}a!]}a!^}a~O!Q*OO'y*POP$saR$sa[$saj$san$sar$sa!S$sa!l$sa!p$sa#R$sa#n$sa#o$sa#p$sa#q$sa#r$sa#s$sa#t$sa#u$sa#v$sa#x$sa#z$sa#{$sa$O$sa(a$sa(r$sa(y$sa(z$sa!]$sa!^$sa~O!Q*OO'y*POP$uaR$ua[$uaj$uan$uar$ua!S$ua!l$ua!p$ua#R$ua#n$ua#o$ua#p$ua#q$ua#r$ua#s$ua#t$ua#u$ua#v$ua#x$ua#z$ua#{$ua$O$ua(a$ua(r$ua(y$ua(z$ua!]$ua!^$ua~On>^O!Q*OO'y*PO(y$}O(z%PO~OP%TaR%Ta[%Taj%Tar%Ta!S%Ta!l%Ta!p%Ta#R%Ta#n%Ta#o%Ta#p%Ta#q%Ta#r%Ta#s%Ta#t%Ta#u%Ta#v%Ta#x%Ta#z%Ta#{%Ta$O%Ta(a%Ta(r%Ta!]%Ta!^%Ta~P''VO$O$mq!]$mq!^$mq~P#BwO$O$oq!]$oq!^$oq~P#BwO!^9oO~O$O9pO~P!1WO!g#vO!]'ei!k'ei~O!g#vO(r'pO!]'ei!k'ei~O!]/pO!k)Oq~O!Y'gi!]'gi~P#/sO!]/yO!Y)Pq~Or9wO!g#vO(r'pO~O[9yO!Y9xO~P#/sO!Y9xO~Oj:PO!g#vO~Og(_y!](_y~P!1WO!]'na!_'na~P#/sOa%[q!_%[q'z%[q!]%[q~P#/sO[:UO~O!]1TO!^)Xq~O`:YO~O#`:ZO!]'pa!^'pa~O!]5uO!^)Ui~P#BwO!S:]O~O!_1oO%i:`O~O(VTO(YUO(e:eO~O!]1zO!^)Vq~O!k:hO~O!k:iO~O!k:jO~O!k:jO~P%[O#`:mO!]#hy!^#hy~O!]#hy!^#hy~P#BwO%i:rO~P&8fO!_'`O%i:rO~O$O#|y!]#|y!^#|y~P#BwOP$|iR$|i[$|ij$|ir$|i!S$|i!l$|i!p$|i#R$|i#n$|i#o$|i#p$|i#q$|i#r$|i#s$|i#t$|i#u$|i#v$|i#x$|i#z$|i#{$|i$O$|i(a$|i(r$|i!]$|i!^$|i~P''VO!Q*OO'y*PO(z%POP'iaR'ia['iaj'ian'iar'ia!S'ia!l'ia!p'ia#R'ia#n'ia#o'ia#p'ia#q'ia#r'ia#s'ia#t'ia#u'ia#v'ia#x'ia#z'ia#{'ia$O'ia(a'ia(r'ia(y'ia!]'ia!^'ia~O!Q*OO'y*POP'kaR'ka['kaj'kan'kar'ka!S'ka!l'ka!p'ka#R'ka#n'ka#o'ka#p'ka#q'ka#r'ka#s'ka#t'ka#u'ka#v'ka#x'ka#z'ka#{'ka$O'ka(a'ka(r'ka(y'ka(z'ka!]'ka!^'ka~O(y$}OP%aiR%ai[%aij%ain%air%ai!Q%ai!S%ai!l%ai!p%ai#R%ai#n%ai#o%ai#p%ai#q%ai#r%ai#s%ai#t%ai#u%ai#v%ai#x%ai#z%ai#{%ai$O%ai'y%ai(a%ai(r%ai(z%ai!]%ai!^%ai~O(z%POP%ciR%ci[%cij%cin%cir%ci!Q%ci!S%ci!l%ci!p%ci#R%ci#n%ci#o%ci#p%ci#q%ci#r%ci#s%ci#t%ci#u%ci#v%ci#x%ci#z%ci#{%ci$O%ci'y%ci(a%ci(r%ci(y%ci!]%ci!^%ci~O$O$oy!]$oy!^$oy~P#BwO$O#cy!]#cy!^#cy~P#BwO!g#vO!]'eq!k'eq~O!]/pO!k)Oy~O!Y'gq!]'gq~P#/sOr:|O!g#vO(r'pO~O[;QO!Y;PO~P#/sO!Y;PO~Og(_!R!](_!R~P!1WOa%[y!_%[y'z%[y!]%[y~P#/sO!]1TO!^)Xy~O!]5uO!^)Uq~O(T;XO~O!_1oO%i;[O~O!k;_O~O%i;dO~P&8fOP$|qR$|q[$|qj$|qr$|q!S$|q!l$|q!p$|q#R$|q#n$|q#o$|q#p$|q#q$|q#r$|q#s$|q#t$|q#u$|q#v$|q#x$|q#z$|q#{$|q$O$|q(a$|q(r$|q!]$|q!^$|q~P''VO!Q*OO'y*PO(z%POP'jaR'ja['jaj'jan'jar'ja!S'ja!l'ja!p'ja#R'ja#n'ja#o'ja#p'ja#q'ja#r'ja#s'ja#t'ja#u'ja#v'ja#x'ja#z'ja#{'ja$O'ja(a'ja(r'ja(y'ja!]'ja!^'ja~O!Q*OO'y*POP'laR'la['laj'lan'lar'la!S'la!l'la!p'la#R'la#n'la#o'la#p'la#q'la#r'la#s'la#t'la#u'la#v'la#x'la#z'la#{'la$O'la(a'la(r'la(y'la(z'la!]'la!^'la~OP%OqR%Oq[%Oqj%Oqr%Oq!S%Oq!l%Oq!p%Oq#R%Oq#n%Oq#o%Oq#p%Oq#q%Oq#r%Oq#s%Oq#t%Oq#u%Oq#v%Oq#x%Oq#z%Oq#{%Oq$O%Oq(a%Oq(r%Oq!]%Oq!^%Oq~P''VOg%e!Z!]%e!Z#`%e!Z$O%e!Z~P!1WO!Y;hO~P#/sOr;iO!g#vO(r'pO~O[;kO!Y;hO~P#/sO!]'pq!^'pq~P#BwO!]#h!Z!^#h!Z~P#BwO#k%e!ZP%e!ZR%e!Z[%e!Za%e!Zj%e!Zr%e!Z!S%e!Z!]%e!Z!l%e!Z!p%e!Z#R%e!Z#n%e!Z#o%e!Z#p%e!Z#q%e!Z#r%e!Z#s%e!Z#t%e!Z#u%e!Z#v%e!Z#x%e!Z#z%e!Z#{%e!Z'z%e!Z(a%e!Z(r%e!Z!k%e!Z!Y%e!Z'w%e!Z#`%e!Zv%e!Z!_%e!Z%i%e!Z!g%e!Z~P#/sOr;tO!g#vO(r'pO~O!Y;uO~P#/sOr;|O!g#vO(r'pO~O!Y;}O~P#/sOP%e!ZR%e!Z[%e!Zj%e!Zr%e!Z!S%e!Z!l%e!Z!p%e!Z#R%e!Z#n%e!Z#o%e!Z#p%e!Z#q%e!Z#r%e!Z#s%e!Z#t%e!Z#u%e!Z#v%e!Z#x%e!Z#z%e!Z#{%e!Z$O%e!Z(a%e!Z(r%e!Z!]%e!Z!^%e!Z~P''VOr<QO!g#vO(r'pO~Ov(fX~P1qO!Q%rO~P!)[O(U!lO~P!)[O!YfX!]fX#`fX~P%2OOP]XR]X[]Xj]Xr]X!Q]X!S]X!]]X!]fX!l]X!p]X#R]X#S]X#`]X#`fX#kfX#n]X#o]X#p]X#q]X#r]X#s]X#t]X#u]X#v]X#x]X#z]X#{]X$Q]X(a]X(r]X(y]X(z]X~O!gfX!k]X!kfX(rfX~P'LTOP<UOQ<UOSfOd>ROe!iOpkOr<UOskOtkOzkO|<UO!O<UO!SWO!WkO!XkO!_XO!i<XO!lZO!o<UO!p<UO!q<UO!s<YO!u<]O!x!hO$W!kO$n>PO(T)]O(VTO(YUO(aVO(o[O~O!]<iO!^$qa~Oh%VOp%WOr%XOs$tOt$tOz%YO|%ZO!O<tO!S${O!_$|O!i>WO!l$xO#j<zO$W%`O$t<vO$v<xO$y%aO(T(vO(VTO(YUO(a$uO(y$}O(z%PO~Ol)dO~P(!yOr!eX(r!eX~P#!iOr(jX(r(jX~P##[O!^]X!^fX~P'LTO!YfX!Y$zX!]fX!]$zX#`fX~P!0SO#k<^O~O!g#vO#k<^O~O#`<nO~Oj<bO~O#`=OO!](wX!^(wX~O#`<nO!](uX!^(uX~O#k=PO~Og=RO~P!1WO#k=XO~O#k=YO~Og=RO(T&ZO~O!g#vO#k=ZO~O!g#vO#k=PO~O$O=[O~P#BwO#k=]O~O#k=^O~O#k=cO~O#k=dO~O#k=eO~O#k=fO~O$O=gO~P!1WO$O=hO~P!1WOl=sO~P7eOk#S#T#U#W#X#[#i#j#u$n$t$v$y%]%^%h%i%j%q%s%v%w%y%{~(OT#o!X'|(U#ps#n#qr!Q'}$]'}(T$_(e~",goto:"$9Y)]PPPPPP)^PP)aP)rP+W/]PPPP6mPP7TPP=QPPP@tPA^PA^PPPA^PCfPA^PA^PA^PCjPCoPD^PIWPPPI[PPPPI[L_PPPLeMVPI[PI[PP! eI[PPPI[PI[P!#lI[P!'S!(X!(bP!)U!)Y!)U!,gPPPPPPP!-W!(XPP!-h!/YP!2iI[I[!2n!5z!:h!:h!>gPPP!>oI[PPPPPPPPP!BOP!C]PPI[!DnPI[PI[I[I[I[I[PI[!FQP!I[P!LbP!Lf!Lp!Lt!LtP!IXP!Lx!LxP#!OP#!SI[PI[#!Y#%_CjA^PA^PA^A^P#&lA^A^#)OA^#+vA^#.SA^A^#.r#1W#1W#1]#1f#1W#1qPP#1WPA^#2ZA^#6YA^A^6mPPP#:_PPP#:x#:xP#:xP#;`#:xPP#;fP#;]P#;]#;y#;]#<e#<k#<n)aP#<q)aP#<z#<z#<zP)aP)aP)aP)aPP)aP#=Q#=TP#=T)aP#=XP#=[P)aP)aP)aP)aP)aP)a)aPP#=b#=h#=s#=y#>P#>V#>]#>k#>q#>{#?R#?]#?c#?s#?y#@k#@}#AT#AZ#Ai#BO#Cs#DR#DY#Et#FS#Gt#HS#HY#H`#Hf#Hp#Hv#H|#IW#Ij#IpPPPPPPPPPPP#IvPPPPPPP#Jk#Mx$ b$ i$ qPPP$']P$'f$*_$0x$0{$1O$1}$2Q$2X$2aP$2g$2jP$3W$3[$4S$5b$5g$5}PP$6S$6Y$6^$6a$6e$6i$7e$7|$8e$8i$8l$8o$8y$8|$9Q$9UR!|RoqOXst!Z#d%m&r&t&u&w,s,x2[2_Y!vQ'`-e1o5{Q%tvQ%|yQ&T|Q&j!VS'W!e-]Q'f!iS'l!r!yU*k$|*Z*oQ+o%}S+|&V&WQ,d&dQ-c'_Q-m'gQ-u'mQ0[*qQ1b,OQ1y,eR<{<Y%SdOPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$_$a$e%m%t&R&k&n&r&t&u&w&{'T'b'r(T(V(](d(x(z)O)}*i+X+],p,s,x-i-q.P.V.t.{/n0]0l0r1S1r2S2T2V2X2[2_2a3Q3W3l4z6T6e6f6i6|8t9T9_S#q]<V!r)_$Z$n'X)s-U-X/V2p4T5w6s:Z:m<U<X<Y<]<^<_<`<a<b<c<d<e<f<g<h<i<k<n<{=O=P=R=Z=[=e=f>SU+P%]<s<tQ+t&PQ,f&gQ,m&oQ0x+gQ0}+iQ1Y+uQ2R,kQ3`.gQ5`0|Q5f1TQ6[1zQ7Y3dQ8`5gR9e7['QkOPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$Z$_$a$e$n%m%t&R&k&n&o&r&t&u&w&{'T'X'b'r(T(V(](d(x(z)O)s)}*i+X+]+g,p,s,x-U-X-i-q.P.V.g.t.{/V/n0]0l0r1S1r2S2T2V2X2[2_2a2p3Q3W3d3l4T4z5w6T6e6f6i6s6|7[8t9T9_:Z:m<U<X<Y<]<^<_<`<a<b<c<d<e<f<g<h<i<k<n<{=O=P=R=Z=[=e=f>S!S!nQ!r!v!y!z$|'W'_'`'l'm'n*k*o*q*r-]-c-e-u0[0_1o5{5}%[$ti#v$b$c$d$x${%O%Q%^%_%c)y*R*T*V*Y*a*g*w*x+f+i,S,V.f/P/d/m/x/y/{0`0b0i0j0o1f1i1q3c4^4_4j4o5Q5[5_6S7W7v8Q8V8[8q9b9p9y:P:`:r;Q;[;d;k<l<m<o<p<q<r<u<v<w<x<y<z=S=T=U=V=X=Y=]=^=_=`=a=b=c=d=g=h>P>X>Y>]>^Q&X|Q'U!eS'[%i-`Q+t&PQ,P&WQ,f&gQ0n+SQ1Y+uQ1_+{Q2Q,jQ2R,kQ5f1TQ5o1aQ6[1zQ6_1|Q6`2PQ8`5gQ8c5lQ8|6bQ:X8dQ:f8yQ;V:YR<}*ZrnOXst!V!Z#d%m&i&r&t&u&w,s,x2[2_R,h&k&z^OPXYstuvwz!Z!`!g!j!o#S#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$Z$_$a$e$n%m%t&R&k&n&o&r&t&u&w&{'T'b'r(V(](d(x(z)O)s)}*i+X+]+g,p,s,x-U-X-i-q.P.V.g.t.{/V/n0]0l0r1S1r2S2T2V2X2[2_2a2p3Q3W3d3l4T4z5w6T6e6f6i6s6|7[8t9T9_:Z:m<U<X<Y<]<^<_<`<a<b<c<d<e<f<g<h<i<k<n<{=O=P=R=Z=[=e=f>R>S[#]WZ#W#Z'X(T!b%jm#h#i#l$x%e%h(^(h(i(j*Y*^*b+Z+[+^,o-V.T.Z.[.]._/m/p2d3[3]4a6r7TQ%wxQ%{yW&Q|&V&W,OQ&_!TQ'c!hQ'e!iQ(q#sS+n%|%}Q+r&PQ,_&bQ,c&dS-l'f'gQ.i(rQ1R+oQ1X+uQ1Z+vQ1^+zQ1t,`S1x,d,eQ2|-mQ5e1TQ5i1WQ5n1`Q6Z1yQ8_5gQ8b5kQ8f5pQ:T8^R;T:U!U$zi$d%O%Q%^%_%c*R*T*a*w*x/P/x0`0b0i0j0o4_5Q8V9p>P>X>Y!^%yy!i!u%{%|%}'V'e'f'g'k'u*j+n+o-Y-l-m-t0R0U1R2u2|3T4r4s4v7}9{Q+h%wQ,T&[Q,W&]Q,b&dQ.h(qQ1s,_U1w,c,d,eQ3e.iQ6U1tS6Y1x1yQ8x6Z#f>T#v$b$c$x${)y*V*Y*g+f+i,S,V.f/d/m/y/{1f1i1q3c4^4j4o5[5_6S7W7v8Q8[8q9b9y:P:`:r;Q;[;d;k<o<q<u<w<y=S=U=X=]=_=a=c=g>]>^o>U<l<m<p<r<v<x<z=T=V=Y=^=`=b=d=hW%Ti%V*y>PS&[!Q&iQ&]!RQ&^!SU*}%[%d=sR,R&Y%]%Si#v$b$c$d$x${%O%Q%^%_%c)y*R*T*V*Y*a*g*w*x+f+i,S,V.f/P/d/m/x/y/{0`0b0i0j0o1f1i1q3c4^4_4j4o5Q5[5_6S7W7v8Q8V8[8q9b9p9y:P:`:r;Q;[;d;k<l<m<o<p<q<r<u<v<w<x<y<z=S=T=U=V=X=Y=]=^=_=`=a=b=c=d=g=h>P>X>Y>]>^T)z$u){V+P%]<s<tW'[!e%i*Z-`S(}#y#zQ+c%rQ+y&SS.b(m(nQ1j,XQ5T0kR8i5u'QkOPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$Z$_$a$e$n%m%t&R&k&n&o&r&t&u&w&{'T'X'b'r(T(V(](d(x(z)O)s)}*i+X+]+g,p,s,x-U-X-i-q.P.V.g.t.{/V/n0]0l0r1S1r2S2T2V2X2[2_2a2p3Q3W3d3l4T4z5w6T6e6f6i6s6|7[8t9T9_:Z:m<U<X<Y<]<^<_<`<a<b<c<d<e<f<g<h<i<k<n<{=O=P=R=Z=[=e=f>S$i$^c#Y#e%q%s%u(S(Y(t(y)R)S)T)U)V)W)X)Y)Z)[)^)`)b)g)q+d+x-Z-x-}.S.U.s.v.z.|.}/O/b0p2k2n3O3V3k3p3q3r3s3t3u3v3w3x3y3z3{3|4P4Q4X5X5c6u6{7Q7a7b7k7l8k9X9]9g9m9n:o;W;`<W=vT#TV#U'RkOPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$Z$_$a$e$n%m%t&R&k&n&o&r&t&u&w&{'T'X'b'r(T(V(](d(x(z)O)s)}*i+X+]+g,p,s,x-U-X-i-q.P.V.g.t.{/V/n0]0l0r1S1r2S2T2V2X2[2_2a2p3Q3W3d3l4T4z5w6T6e6f6i6s6|7[8t9T9_:Z:m<U<X<Y<]<^<_<`<a<b<c<d<e<f<g<h<i<k<n<{=O=P=R=Z=[=e=f>SQ'Y!eR2q-]!W!nQ!e!r!v!y!z$|'W'_'`'l'm'n*Z*k*o*q*r-]-c-e-u0[0_1o5{5}R1l,ZnqOXst!Z#d%m&r&t&u&w,s,x2[2_Q&y!^Q'v!xS(s#u<^Q+l%zQ,]&_Q,^&aQ-j'dQ-w'oS.r(x=PS0q+X=ZQ1P+mQ1n,[Q2c,zQ2e,{Q2m-WQ2z-kQ2}-oS5Y0r=eQ5a1QS5d1S=fQ6t2oQ6x2{Q6}3SQ8]5bQ9Y6vQ9Z6yQ9^7OR:l9V$d$]c#Y#e%s%u(S(Y(t(y)R)S)T)U)V)W)X)Y)Z)[)^)`)b)g)q+d+x-Z-x-}.S.U.s.v.z.}/O/b0p2k2n3O3V3k3p3q3r3s3t3u3v3w3x3y3z3{3|4P4Q4X5X5c6u6{7Q7a7b7k7l8k9X9]9g9m9n:o;W;`<W=vS(o#p'iQ)P#zS+b%q.|S.c(n(pR3^.d'QkOPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$Z$_$a$e$n%m%t&R&k&n&o&r&t&u&w&{'T'X'b'r(T(V(](d(x(z)O)s)}*i+X+]+g,p,s,x-U-X-i-q.P.V.g.t.{/V/n0]0l0r1S1r2S2T2V2X2[2_2a2p3Q3W3d3l4T4z5w6T6e6f6i6s6|7[8t9T9_:Z:m<U<X<Y<]<^<_<`<a<b<c<d<e<f<g<h<i<k<n<{=O=P=R=Z=[=e=f>SS#q]<VQ&t!XQ&u!YQ&w![Q&x!]R2Z,vQ'a!hQ+e%wQ-h'cS.e(q+hQ2x-gW3b.h.i0w0yQ6w2yW7U3_3a3e5^U9a7V7X7ZU:q9c9d9fS;b:p:sQ;p;cR;x;qU!wQ'`-eT5y1o5{!Q_OXZ`st!V!Z#d#h%e%m&i&k&r&t&u&w(j,s,x.[2[2_]!pQ!r'`-e1o5{T#q]<V%^{OPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$_$a$e%m%t&R&k&n&o&r&t&u&w&{'T'b'r(T(V(](d(x(z)O)}*i+X+]+g,p,s,x-i-q.P.V.g.t.{/n0]0l0r1S1r2S2T2V2X2[2_2a3Q3W3d3l4z6T6e6f6i6|7[8t9T9_S(}#y#zS.b(m(n!s=l$Z$n'X)s-U-X/V2p4T5w6s:Z:m<U<X<Y<]<^<_<`<a<b<c<d<e<f<g<h<i<k<n<{=O=P=R=Z=[=e=f>SU$fd)_,mS(p#p'iU*v%R(w4OU0m+O.n7gQ5^0xQ7V3`Q9d7YR:s9em!tQ!r!v!y!z'`'l'm'n-e-u1o5{5}Q't!uS(f#g2US-s'k'wQ/s*]Q0R*jQ3U-vQ4f/tQ4r0TQ4s0UQ4x0^Q7r4`S7}4t4vS8R4y4{Q9r7sQ9v7yQ9{8OQ:Q8TS:{9w9xS;g:|;PS;s;h;iS;{;t;uS<P;|;}R<S<QQ#wbQ's!uS(e#g2US(g#m+WQ+Y%fQ+j%xQ+p&OU-r'k't'wQ.W(fU/r*]*`/wQ0S*jQ0V*lQ1O+kQ1u,aS3R-s-vQ3Z.`S4e/s/tQ4n0PS4q0R0^Q4u0WQ6W1vQ7P3US7q4`4bQ7u4fU7|4r4x4{Q8P4wQ8v6XS9q7r7sQ9u7yQ9}8RQ:O8SQ:c8wQ:y9rS:z9v9xQ;S:QQ;^:dS;f:{;PS;r;g;hS;z;s;uS<O;{;}Q<R<PQ<T<SQ=o=jQ={=tR=|=uV!wQ'`-e%^aOPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$_$a$e%m%t&R&k&n&o&r&t&u&w&{'T'b'r(T(V(](d(x(z)O)}*i+X+]+g,p,s,x-i-q.P.V.g.t.{/n0]0l0r1S1r2S2T2V2X2[2_2a3Q3W3d3l4z6T6e6f6i6|7[8t9T9_S#wz!j!r=i$Z$n'X)s-U-X/V2p4T5w6s:Z:m<U<X<Y<]<^<_<`<a<b<c<d<e<f<g<h<i<k<n<{=O=P=R=Z=[=e=f>SR=o>R%^bOPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$_$a$e%m%t&R&k&n&o&r&t&u&w&{'T'b'r(T(V(](d(x(z)O)}*i+X+]+g,p,s,x-i-q.P.V.g.t.{/n0]0l0r1S1r2S2T2V2X2[2_2a3Q3W3d3l4z6T6e6f6i6|7[8t9T9_Q%fj!^%xy!i!u%{%|%}'V'e'f'g'k'u*j+n+o-Y-l-m-t0R0U1R2u2|3T4r4s4v7}9{S&Oz!jQ+k%yQ,a&dW1v,b,c,d,eU6X1w1x1yS8w6Y6ZQ:d8x!r=j$Z$n'X)s-U-X/V2p4T5w6s:Z:m<U<X<Y<]<^<_<`<a<b<c<d<e<f<g<h<i<k<n<{=O=P=R=Z=[=e=f>SQ=t>QR=u>R%QeOPXYstuvw!Z!`!g!o#S#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$_$a$e%m%t&R&k&n&r&t&u&w&{'T'b'r(V(](d(x(z)O)}*i+X+]+g,p,s,x-i-q.P.V.g.t.{/n0]0l0r1S1r2S2T2V2X2[2_2a3Q3W3d3l4z6T6e6f6i6|7[8t9T9_Y#bWZ#W#Z(T!b%jm#h#i#l$x%e%h(^(h(i(j*Y*^*b+Z+[+^,o-V.T.Z.[.]._/m/p2d3[3]4a6r7TQ,n&o!p=k$Z$n)s-U-X/V2p4T5w6s:Z:m<U<X<Y<]<^<_<`<a<b<c<d<e<f<g<h<i<k<n<{=O=P=R=Z=[=e=f>SR=n'XU']!e%i*ZR2s-`%SdOPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$_$a$e%m%t&R&k&n&r&t&u&w&{'T'b'r(T(V(](d(x(z)O)}*i+X+],p,s,x-i-q.P.V.t.{/n0]0l0r1S1r2S2T2V2X2[2_2a3Q3W3l4z6T6e6f6i6|8t9T9_!r)_$Z$n'X)s-U-X/V2p4T5w6s:Z:m<U<X<Y<]<^<_<`<a<b<c<d<e<f<g<h<i<k<n<{=O=P=R=Z=[=e=f>SQ,m&oQ0x+gQ3`.gQ7Y3dR9e7[!b$Tc#Y%q(S(Y(t(y)Z)[)`)g+x-x-}.S.U.s.v/b0p3O3V3k3{5X5c6{7Q7a9]:o<W!P<d)^)q-Z.|2k2n3p3y3z4P4X6u7b7k7l8k9X9g9m9n;W;`=v!f$Vc#Y%q(S(Y(t(y)W)X)Z)[)`)g+x-x-}.S.U.s.v/b0p3O3V3k3{5X5c6{7Q7a9]:o<W!T<f)^)q-Z.|2k2n3p3v3w3y3z4P4X6u7b7k7l8k9X9g9m9n;W;`=v!^$Zc#Y%q(S(Y(t(y)`)g+x-x-}.S.U.s.v/b0p3O3V3k3{5X5c6{7Q7a9]:o<WQ4_/kz>S)^)q-Z.|2k2n3p4P4X6u7b7k7l8k9X9g9m9n;W;`=vQ>X>ZR>Y>['QkOPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$Z$_$a$e$n%m%t&R&k&n&o&r&t&u&w&{'T'X'b'r(T(V(](d(x(z)O)s)}*i+X+]+g,p,s,x-U-X-i-q.P.V.g.t.{/V/n0]0l0r1S1r2S2T2V2X2[2_2a2p3Q3W3d3l4T4z5w6T6e6f6i6s6|7[8t9T9_:Z:m<U<X<Y<]<^<_<`<a<b<c<d<e<f<g<h<i<k<n<{=O=P=R=Z=[=e=f>SS$oh$pR4U/U'XgOPWXYZhstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$Z$_$a$e$n$p%m%t&R&k&n&o&r&t&u&w&{'T'X'b'r(T(V(](d(x(z)O)s)}*i+X+]+g,p,s,x-U-X-i-q.P.V.g.t.{/U/V/n0]0l0r1S1r2S2T2V2X2[2_2a2p3Q3W3d3l4T4z5w6T6e6f6i6s6|7[8t9T9_:Z:m<U<X<Y<]<^<_<`<a<b<c<d<e<f<g<h<i<k<n<{=O=P=R=Z=[=e=f>ST$kf$qQ$ifS)j$l)nR)v$qT$jf$qT)l$l)n'XhOPWXYZhstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$Z$_$a$e$n$p%m%t&R&k&n&o&r&t&u&w&{'T'X'b'r(T(V(](d(x(z)O)s)}*i+X+]+g,p,s,x-U-X-i-q.P.V.g.t.{/U/V/n0]0l0r1S1r2S2T2V2X2[2_2a2p3Q3W3d3l4T4z5w6T6e6f6i6s6|7[8t9T9_:Z:m<U<X<Y<]<^<_<`<a<b<c<d<e<f<g<h<i<k<n<{=O=P=R=Z=[=e=f>ST$oh$pQ$rhR)u$p%^jOPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$_$a$e%m%t&R&k&n&o&r&t&u&w&{'T'b'r(T(V(](d(x(z)O)}*i+X+]+g,p,s,x-i-q.P.V.g.t.{/n0]0l0r1S1r2S2T2V2X2[2_2a3Q3W3d3l4z6T6e6f6i6|7[8t9T9_!s>Q$Z$n'X)s-U-X/V2p4T5w6s:Z:m<U<X<Y<]<^<_<`<a<b<c<d<e<f<g<h<i<k<n<{=O=P=R=Z=[=e=f>S#glOPXZst!Z!`!o#S#d#o#{$n%m&k&n&o&r&t&u&w&{'T'b)O)s*i+]+g,p,s,x-i.g/V/n0]0l1r2S2T2V2X2[2_2a3d4T4z6T6e6f6i7[8t9T!U%Ri$d%O%Q%^%_%c*R*T*a*w*x/P/x0`0b0i0j0o4_5Q8V9p>P>X>Y#f(w#v$b$c$x${)y*V*Y*g+f+i,S,V.f/d/m/y/{1f1i1q3c4^4j4o5[5_6S7W7v8Q8[8q9b9y:P:`:r;Q;[;d;k<o<q<u<w<y=S=U=X=]=_=a=c=g>]>^Q+T%aQ/c*Oo4O<l<m<p<r<v<x<z=T=V=Y=^=`=b=d=h!U$yi$d%O%Q%^%_%c*R*T*a*w*x/P/x0`0b0i0j0o4_5Q8V9p>P>X>YQ*c$zU*l$|*Z*oQ+U%bQ0W*m#f=q#v$b$c$x${)y*V*Y*g+f+i,S,V.f/d/m/y/{1f1i1q3c4^4j4o5[5_6S7W7v8Q8[8q9b9y:P:`:r;Q;[;d;k<o<q<u<w<y=S=U=X=]=_=a=c=g>]>^n=r<l<m<p<r<v<x<z=T=V=Y=^=`=b=d=hQ=w>TQ=x>UQ=y>VR=z>W!U%Ri$d%O%Q%^%_%c*R*T*a*w*x/P/x0`0b0i0j0o4_5Q8V9p>P>X>Y#f(w#v$b$c$x${)y*V*Y*g+f+i,S,V.f/d/m/y/{1f1i1q3c4^4j4o5[5_6S7W7v8Q8[8q9b9y:P:`:r;Q;[;d;k<o<q<u<w<y=S=U=X=]=_=a=c=g>]>^o4O<l<m<p<r<v<x<z=T=V=Y=^=`=b=d=hnoOXst!Z#d%m&r&t&u&w,s,x2[2_S*f${*YQ-R'OQ-S'QR4i/y%[%Si#v$b$c$d$x${%O%Q%^%_%c)y*R*T*V*Y*a*g*w*x+f+i,S,V.f/P/d/m/x/y/{0`0b0i0j0o1f1i1q3c4^4_4j4o5Q5[5_6S7W7v8Q8V8[8q9b9p9y:P:`:r;Q;[;d;k<l<m<o<p<q<r<u<v<w<x<y<z=S=T=U=V=X=Y=]=^=_=`=a=b=c=d=g=h>P>X>Y>]>^Q,U&]Q1h,WQ5s1gR8h5tV*n$|*Z*oU*n$|*Z*oT5z1o5{S0P*i/nQ4w0]T8S4z:]Q+j%xQ0V*lQ1O+kQ1u,aQ6W1vQ8v6XQ:c8wR;^:d!U%Oi$d%O%Q%^%_%c*R*T*a*w*x/P/x0`0b0i0j0o4_5Q8V9p>P>X>Yx*R$v)e*S*u+V/v0d0e4R4g5R5S5W7p8U:R:x=p=}>OS0`*t0a#f<o#v$b$c$x${)y*V*Y*g+f+i,S,V.f/d/m/y/{1f1i1q3c4^4j4o5[5_6S7W7v8Q8[8q9b9y:P:`:r;Q;[;d;k<o<q<u<w<y=S=U=X=]=_=a=c=g>]>^n<p<l<m<p<r<v<x<z=T=V=Y=^=`=b=d=h!d=S(u)c*[*e.j.m.q/_/k/|0v1e3h4[4h4l5r7]7`7w7z8X8Z9t9|:S:};R;e;j;v>Z>[`=T3}7c7f7j9h:t:w;yS=_.l3iT=`7e9k!U%Qi$d%O%Q%^%_%c*R*T*a*w*x/P/x0`0b0i0j0o4_5Q8V9p>P>X>Y|*T$v)e*U*t+V/g/v0d0e4R4g4|5R5S5W7p8U:R:x=p=}>OS0b*u0c#f<q#v$b$c$x${)y*V*Y*g+f+i,S,V.f/d/m/y/{1f1i1q3c4^4j4o5[5_6S7W7v8Q8[8q9b9y:P:`:r;Q;[;d;k<o<q<u<w<y=S=U=X=]=_=a=c=g>]>^n<r<l<m<p<r<v<x<z=T=V=Y=^=`=b=d=h!h=U(u)c*[*e.k.l.q/_/k/|0v1e3f3h4[4h4l5r7]7^7`7w7z8X8Z9t9|:S:};R;e;j;v>Z>[d=V3}7d7e7j9h9i:t:u:w;yS=a.m3jT=b7f9lrnOXst!V!Z#d%m&i&r&t&u&w,s,x2[2_Q&f!UR,p&ornOXst!V!Z#d%m&i&r&t&u&w,s,x2[2_R&f!UQ,Y&^R1d,RsnOXst!V!Z#d%m&i&r&t&u&w,s,x2[2_Q1p,_S6R1s1tU8p6P6Q6US:_8r8sS;Y:^:aQ;m;ZR;w;nQ&m!VR,i&iR6_1|R:f8yW&Q|&V&W,OR1Z+vQ&r!WR,s&sR,y&xT2],x2_R,}&yQ,|&yR2f,}Q'y!{R-y'ySsOtQ#dXT%ps#dQ#OTR'{#OQ#RUR'}#RQ){$uR/`){Q#UVR(Q#UQ#XWU(W#X(X.QQ(X#YR.Q(YQ-^'YR2r-^Q.u(yS3m.u3nR3n.vQ-e'`R2v-eY!rQ'`-e1o5{R'j!rQ/Q)eR4S/QU#_W%h*YU(_#_(`.RQ(`#`R.R(ZQ-a']R2t-at`OXst!V!Z#d%m&i&k&r&t&u&w,s,x2[2_S#hZ%eU#r`#h.[R.[(jQ(k#jQ.X(gW.a(k.X3X7RQ3X.YR7R3YQ)n$lR/W)nQ$phR)t$pQ$`cU)a$`-|<jQ-|<WR<j)qQ/q*]W4c/q4d7t9sU4d/r/s/tS7t4e4fR9s7u$e*Q$v(u)c)e*[*e*t*u+Q+R+V.l.m.o.p.q/_/g/i/k/v/|0d0e0v1e3f3g3h3}4R4[4g4h4l4|5O5R5S5W5r7]7^7_7`7e7f7h7i7j7p7w7z8U8X8Z9h9i9j9t9|:R:S:t:u:v:w:x:};R;e;j;v;y=p=}>O>Z>[Q/z*eU4k/z4m7xQ4m/|R7x4lS*o$|*ZR0Y*ox*S$v)e*t*u+V/v0d0e4R4g5R5S5W7p8U:R:x=p=}>O!d.j(u)c*[*e.l.m.q/_/k/|0v1e3h4[4h4l5r7]7`7w7z8X8Z9t9|:S:};R;e;j;v>Z>[U/h*S.j7ca7c3}7e7f7j9h:t:w;yQ0a*tQ3i.lU4}0a3i9kR9k7e|*U$v)e*t*u+V/g/v0d0e4R4g4|5R5S5W7p8U:R:x=p=}>O!h.k(u)c*[*e.l.m.q/_/k/|0v1e3f3h4[4h4l5r7]7^7`7w7z8X8Z9t9|:S:};R;e;j;v>Z>[U/j*U.k7de7d3}7e7f7j9h9i:t:u:w;yQ0c*uQ3j.mU5P0c3j9lR9l7fQ*z%UR0g*zQ5]0vR8Y5]Q+_%kR0u+_Q5v1jS8j5v:[R:[8kQ,[&_R1m,[Q5{1oR8m5{Q1{,fS6]1{8zR8z6_Q1U+rW5h1U5j8a:VQ5j1XQ8a5iR:V8bQ+w&QR1[+wQ2_,xR6m2_YrOXst#dQ&v!ZQ+a%mQ,r&rQ,t&tQ,u&uQ,w&wQ2Y,sS2],x2_R6l2[Q%opQ&z!_Q&}!aQ'P!bQ'R!cQ'q!uQ+`%lQ+l%zQ,Q&XQ,h&mQ-P&|W-p'k's't'wQ-w'oQ0X*nQ1P+mQ1c,PS2O,i,lQ2g-OQ2h-RQ2i-SQ2}-oW3P-r-s-v-xQ5a1QQ5m1_Q5q1eQ6V1uQ6a2QQ6k2ZU6z3O3R3UQ6}3SQ8]5bQ8e5oQ8g5rQ8l5zQ8u6WQ8{6`S9[6{7PQ9^7OQ:W8cQ:b8vQ:g8|Q:n9]Q;U:XQ;]:cQ;a:oQ;l;VR;o;^Q%zyQ'd!iQ'o!uU+m%{%|%}Q-W'VU-k'e'f'gS-o'k'uQ0Q*jS1Q+n+oQ2o-YS2{-l-mQ3S-tS4p0R0UQ5b1RQ6v2uQ6y2|Q7O3TU7{4r4s4vQ9z7}R;O9{S$wi>PR*{%VU%Ui%V>PR0f*yQ$viS(u#v+iS)c$b$cQ)e$dQ*[$xS*e${*YQ*t%OQ*u%QQ+Q%^Q+R%_Q+V%cQ.l<oQ.m<qQ.o<uQ.p<wQ.q<yQ/_)yQ/g*RQ/i*TQ/k*VQ/v*aS/|*g/mQ0d*wQ0e*xl0v+f,V.f1i1q3c6S7W8q9b:`:r;[;dQ1e,SQ3f=SQ3g=UQ3h=XS3}<l<mQ4R/PS4[/d4^Q4g/xQ4h/yQ4l/{Q4|0`Q5O0bQ5R0iQ5S0jQ5W0oQ5r1fQ7]=]Q7^=_Q7_=aQ7`=cQ7e<pQ7f<rQ7h<vQ7i<xQ7j<zQ7p4_Q7w4jQ7z4oQ8U5QQ8X5[Q8Z5_Q9h=YQ9i=TQ9j=VQ9t7vQ9|8QQ:R8VQ:S8[Q:t=^Q:u=`Q:v=bQ:w=dQ:x9pQ:}9yQ;R:PQ;e=gQ;j;QQ;v;kQ;y=hQ=p>PQ=}>XQ>O>YQ>Z>]R>[>^Q+O%]Q.n<sR7g<tnpOXst!Z#d%m&r&t&u&w,s,x2[2_Q!fPS#fZ#oQ&|!`W'h!o*i0]4zQ(P#SQ)Q#{Q)r$nS,l&k&nQ,q&oQ-O&{S-T'T/nQ-g'bQ.x)OQ/[)sQ0s+]Q0y+gQ2W,pQ2y-iQ3a.gQ4W/VQ5U0lQ6Q1rQ6c2SQ6d2TQ6h2VQ6j2XQ6o2aQ7Z3dQ7m4TQ8s6TQ9P6eQ9Q6fQ9S6iQ9f7[Q:a8tR:k9T#[cOPXZst!Z!`!o#d#o#{%m&k&n&o&r&t&u&w&{'T'b)O*i+]+g,p,s,x-i.g/n0]0l1r2S2T2V2X2[2_2a3d4z6T6e6f6i7[8t9TQ#YWQ#eYQ%quQ%svS%uw!gS(S#W(VQ(Y#ZQ(t#uQ(y#xQ)R$OQ)S$PQ)T$QQ)U$RQ)V$SQ)W$TQ)X$UQ)Y$VQ)Z$WQ)[$XQ)^$ZQ)`$_Q)b$aQ)g$eW)q$n)s/V4TQ+d%tQ+x&RS-Z'X2pQ-x'rS-}(T.PQ.S(]Q.U(dQ.s(xQ.v(zQ.z<UQ.|<XQ.}<YQ/O<]Q/b)}Q0p+XQ2k-UQ2n-XQ3O-qQ3V.VQ3k.tQ3p<^Q3q<_Q3r<`Q3s<aQ3t<bQ3u<cQ3v<dQ3w<eQ3x<fQ3y<gQ3z<hQ3{.{Q3|<kQ4P<nQ4Q<{Q4X<iQ5X0rQ5c1SQ6u=OQ6{3QQ7Q3WQ7a3lQ7b=PQ7k=RQ7l=ZQ8k5wQ9X6sQ9]6|Q9g=[Q9m=eQ9n=fQ:o9_Q;W:ZQ;`:mQ<W#SR=v>SR#[WR'Z!el!tQ!r!v!y!z'`'l'm'n-e-u1o5{5}S'V!e-]U*j$|*Z*oS-Y'W'_S0U*k*qQ0^*rQ2u-cQ4v0[R4{0_R({#xQ!fQT-d'`-e]!qQ!r'`-e1o5{Q#p]R'i<VR)f$dY!uQ'`-e1o5{Q'k!rS'u!v!yS'w!z5}S-t'l'mQ-v'nR3T-uT#kZ%eS#jZ%eS%km,oU(g#h#i#lS.Y(h(iQ.^(jQ0t+^Q3Y.ZU3Z.[.]._S7S3[3]R9`7Td#^W#W#Z%h(T(^*Y+Z.T/mr#gZm#h#i#l%e(h(i(j+^.Z.[.]._3[3]7TS*]$x*bQ/t*^Q2U,oQ2l-VQ4`/pQ6q2dQ7s4aQ9W6rT=m'X+[V#aW%h*YU#`W%h*YS(U#W(^U(Z#Z+Z/mS-['X+[T.O(T.TV'^!e%i*ZQ$lfR)x$qT)m$l)nR4V/UT*_$x*bT*h${*YQ0w+fQ1g,VQ3_.fQ5t1iQ6P1qQ7X3cQ8r6SQ9c7WQ:^8qQ:p9bQ;Z:`Q;c:rQ;n;[R;q;dnqOXst!Z#d%m&r&t&u&w,s,x2[2_Q&l!VR,h&itmOXst!U!V!Z#d%m&i&r&t&u&w,s,x2[2_R,o&oT%lm,oR1k,XR,g&gQ&U|S+}&V&WR1^,OR+s&PT&p!W&sT&q!W&sT2^,x2_",nodeNames:"â  ArithOp ArithOp ?. JSXStartTag LineComment BlockComment Script Hashbang ExportDeclaration export Star as VariableName String Escape from ; default FunctionDeclaration async function VariableDefinition > < TypeParamList in out const TypeDefinition extends ThisType this LiteralType ArithOp Number BooleanLiteral TemplateType InterpolationEnd Interpolation InterpolationStart NullType null VoidType void TypeofType typeof MemberExpression . PropertyName [ TemplateString Escape Interpolation super RegExp ] ArrayExpression Spread , } { ObjectExpression Property async get set PropertyDefinition Block : NewTarget new NewExpression ) ( ArgList UnaryExpression delete LogicOp BitOp YieldExpression yield AwaitExpression await ParenthesizedExpression ClassExpression class ClassBody MethodDeclaration Decorator @ MemberExpression PrivatePropertyName CallExpression TypeArgList CompareOp < declare Privacy static abstract override PrivatePropertyDefinition PropertyDeclaration readonly accessor Optional TypeAnnotation Equals StaticBlock FunctionExpression ArrowFunction ParamList ParamList ArrayPattern ObjectPattern PatternProperty Privacy readonly Arrow MemberExpression BinaryExpression ArithOp ArithOp ArithOp ArithOp BitOp CompareOp instanceof satisfies CompareOp BitOp BitOp BitOp LogicOp LogicOp ConditionalExpression LogicOp LogicOp AssignmentExpression UpdateOp PostfixExpression CallExpression InstantiationExpression TaggedTemplateExpression DynamicImport import ImportMeta JSXElement JSXSelfCloseEndTag JSXSelfClosingTag JSXIdentifier JSXBuiltin JSXIdentifier JSXNamespacedName JSXMemberExpression JSXSpreadAttribute JSXAttribute JSXAttributeValue JSXEscape JSXEndTag JSXOpenTag JSXFragmentTag JSXText JSXEscape JSXStartCloseTag JSXCloseTag PrefixCast < ArrowFunction TypeParamList SequenceExpression InstantiationExpression KeyofType keyof UniqueType unique ImportType InferredType infer TypeName ParenthesizedType FunctionSignature ParamList NewSignature IndexedType TupleType Label ArrayType ReadonlyType ObjectType MethodType PropertyType IndexSignature PropertyDefinition CallSignature TypePredicate asserts is NewSignature new UnionType LogicOp IntersectionType LogicOp ConditionalType ParameterizedType ClassDeclaration abstract implements type VariableDeclaration let var using TypeAliasDeclaration InterfaceDeclaration interface EnumDeclaration enum EnumBody NamespaceDeclaration namespace module AmbientDeclaration declare GlobalDeclaration global ClassDeclaration ClassBody AmbientFunctionDeclaration ExportGroup VariableName VariableName ImportDeclaration defer ImportGroup ForStatement for ForSpec ForInSpec ForOfSpec of WhileStatement while WithStatement with DoStatement do IfStatement if else SwitchStatement switch SwitchBody CaseLabel case DefaultLabel TryStatement try CatchClause catch FinallyClause finally ReturnStatement return ThrowStatement throw BreakStatement break ContinueStatement continue DebuggerStatement debugger LabeledStatement ExpressionStatement SingleExpression SingleClassItem",maxTerm:380,context:vEe,nodeProps:[["isolate",-8,5,6,14,37,39,51,53,55,""],["group",-26,9,17,19,68,207,211,215,216,218,221,224,234,237,243,245,247,249,252,258,264,266,268,270,272,274,275,"Statement",-34,13,14,32,35,36,42,51,54,55,57,62,70,72,76,80,82,84,85,110,111,120,121,136,139,141,142,143,144,145,147,148,167,169,171,"Expression",-23,31,33,37,41,43,45,173,175,177,178,180,181,182,184,185,186,188,189,190,201,203,205,206,"Type",-3,88,103,109,"ClassItem"],["openedBy",23,"<",38,"InterpolationStart",56,"[",60,"{",73,"(",160,"JSXStartCloseTag"],["closedBy",-2,24,168,">",40,"InterpolationEnd",50,"]",61,"}",74,")",165,"JSXEndTag"]],propSources:[SEe],skippedNodes:[0,5,6,278],repeatNodeCount:37,tokenData:"$Fq07[R!bOX%ZXY+gYZ-yZ[+g[]%Z]^.c^p%Zpq+gqr/mrs3cst:_tuEruvJSvwLkwx! Yxy!'iyz!(sz{!)}{|!,q|}!.O}!O!,q!O!P!/Y!P!Q!9j!Q!R#:O!R![#<_![!]#I_!]!^#Jk!^!_#Ku!_!`$![!`!a$$v!a!b$*T!b!c$,r!c!}Er!}#O$-|#O#P$/W#P#Q$4o#Q#R$5y#R#SEr#S#T$7W#T#o$8b#o#p$<r#p#q$=h#q#r$>x#r#s$@U#s$f%Z$f$g+g$g#BYEr#BY#BZ$A`#BZ$ISEr$IS$I_$A`$I_$I|Er$I|$I}$Dk$I}$JO$Dk$JO$JTEr$JT$JU$A`$JU$KVEr$KV$KW$A`$KW&FUEr&FU&FV$A`&FV;'SEr;'S;=`I|<%l?HTEr?HT?HU$A`?HUOEr(n%d_$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z&j&hT$i&jO!^&c!_#o&c#p;'S&c;'S;=`&w<%lO&c&j&zP;=`<%l&c'|'U]$i&j(Z!bOY&}YZ&cZw&}wx&cx!^&}!^!_'}!_#O&}#O#P&c#P#o&}#o#p'}#p;'S&};'S;=`(l<%lO&}!b(SU(Z!bOY'}Zw'}x#O'}#P;'S'};'S;=`(f<%lO'}!b(iP;=`<%l'}'|(oP;=`<%l&}'[(y]$i&j(WpOY(rYZ&cZr(rrs&cs!^(r!^!_)r!_#O(r#O#P&c#P#o(r#o#p)r#p;'S(r;'S;=`*a<%lO(rp)wU(WpOY)rZr)rs#O)r#P;'S)r;'S;=`*Z<%lO)rp*^P;=`<%l)r'[*dP;=`<%l(r#S*nX(Wp(Z!bOY*gZr*grs'}sw*gwx)rx#O*g#P;'S*g;'S;=`+Z<%lO*g#S+^P;=`<%l*g(n+dP;=`<%l%Z07[+rq$i&j(Wp(Z!b'|0/lOX%ZXY+gYZ&cZ[+g[p%Zpq+gqr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p$f%Z$f$g+g$g#BY%Z#BY#BZ+g#BZ$IS%Z$IS$I_+g$I_$JT%Z$JT$JU+g$JU$KV%Z$KV$KW+g$KW&FU%Z&FU&FV+g&FV;'S%Z;'S;=`+a<%l?HT%Z?HT?HU+g?HUO%Z07[.ST(X#S$i&j'}0/lO!^&c!_#o&c#p;'S&c;'S;=`&w<%lO&c07[.n_$i&j(Wp(Z!b'}0/lOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z)3p/x`$i&j!p),Q(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`0z!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(KW1V`#v(Ch$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`2X!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(KW2d_#v(Ch$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'At3l_(V':f$i&j(Z!bOY4kYZ5qZr4krs7nsw4kwx5qx!^4k!^!_8p!_#O4k#O#P5q#P#o4k#o#p8p#p;'S4k;'S;=`:X<%lO4k(^4r_$i&j(Z!bOY4kYZ5qZr4krs7nsw4kwx5qx!^4k!^!_8p!_#O4k#O#P5q#P#o4k#o#p8p#p;'S4k;'S;=`:X<%lO4k&z5vX$i&jOr5qrs6cs!^5q!^!_6y!_#o5q#o#p6y#p;'S5q;'S;=`7h<%lO5q&z6jT$d`$i&jO!^&c!_#o&c#p;'S&c;'S;=`&w<%lO&c`6|TOr6yrs7]s;'S6y;'S;=`7b<%lO6y`7bO$d``7eP;=`<%l6y&z7kP;=`<%l5q(^7w]$d`$i&j(Z!bOY&}YZ&cZw&}wx&cx!^&}!^!_'}!_#O&}#O#P&c#P#o&}#o#p'}#p;'S&};'S;=`(l<%lO&}!r8uZ(Z!bOY8pYZ6yZr8prs9hsw8pwx6yx#O8p#O#P6y#P;'S8p;'S;=`:R<%lO8p!r9oU$d`(Z!bOY'}Zw'}x#O'}#P;'S'};'S;=`(f<%lO'}!r:UP;=`<%l8p(^:[P;=`<%l4k%9[:hh$i&j(Wp(Z!bOY%ZYZ&cZq%Zqr<Srs&}st%ZtuCruw%Zwx(rx!^%Z!^!_*g!_!c%Z!c!}Cr!}#O%Z#O#P&c#P#R%Z#R#SCr#S#T%Z#T#oCr#o#p*g#p$g%Z$g;'SCr;'S;=`El<%lOCr(r<__WS$i&j(Wp(Z!bOY<SYZ&cZr<Srs=^sw<Swx@nx!^<S!^!_Bm!_#O<S#O#P>`#P#o<S#o#pBm#p;'S<S;'S;=`Cl<%lO<S(Q=g]WS$i&j(Z!bOY=^YZ&cZw=^wx>`x!^=^!^!_?q!_#O=^#O#P>`#P#o=^#o#p?q#p;'S=^;'S;=`@h<%lO=^&n>gXWS$i&jOY>`YZ&cZ!^>`!^!_?S!_#o>`#o#p?S#p;'S>`;'S;=`?k<%lO>`S?XSWSOY?SZ;'S?S;'S;=`?e<%lO?SS?hP;=`<%l?S&n?nP;=`<%l>`!f?xWWS(Z!bOY?qZw?qwx?Sx#O?q#O#P?S#P;'S?q;'S;=`@b<%lO?q!f@eP;=`<%l?q(Q@kP;=`<%l=^'`@w]WS$i&j(WpOY@nYZ&cZr@nrs>`s!^@n!^!_Ap!_#O@n#O#P>`#P#o@n#o#pAp#p;'S@n;'S;=`Bg<%lO@ntAwWWS(WpOYApZrAprs?Ss#OAp#O#P?S#P;'SAp;'S;=`Ba<%lOAptBdP;=`<%lAp'`BjP;=`<%l@n#WBvYWS(Wp(Z!bOYBmZrBmrs?qswBmwxApx#OBm#O#P?S#P;'SBm;'S;=`Cf<%lOBm#WCiP;=`<%lBm(rCoP;=`<%l<S%9[C}i$i&j(o%1l(Wp(Z!bOY%ZYZ&cZr%Zrs&}st%ZtuCruw%Zwx(rx!Q%Z!Q![Cr![!^%Z!^!_*g!_!c%Z!c!}Cr!}#O%Z#O#P&c#P#R%Z#R#SCr#S#T%Z#T#oCr#o#p*g#p$g%Z$g;'SCr;'S;=`El<%lOCr%9[EoP;=`<%lCr07[FRk$i&j(Wp(Z!b$]#t(T,2j(e$I[OY%ZYZ&cZr%Zrs&}st%ZtuEruw%Zwx(rx}%Z}!OGv!O!Q%Z!Q![Er![!^%Z!^!_*g!_!c%Z!c!}Er!}#O%Z#O#P&c#P#R%Z#R#SEr#S#T%Z#T#oEr#o#p*g#p$g%Z$g;'SEr;'S;=`I|<%lOEr+dHRk$i&j(Wp(Z!b$]#tOY%ZYZ&cZr%Zrs&}st%ZtuGvuw%Zwx(rx}%Z}!OGv!O!Q%Z!Q![Gv![!^%Z!^!_*g!_!c%Z!c!}Gv!}#O%Z#O#P&c#P#R%Z#R#SGv#S#T%Z#T#oGv#o#p*g#p$g%Z$g;'SGv;'S;=`Iv<%lOGv+dIyP;=`<%lGv07[JPP;=`<%lEr(KWJ_`$i&j(Wp(Z!b#p(ChOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(KWKl_$i&j$Q(Ch(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z,#xLva(z+JY$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sv%ZvwM{wx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(KWNW`$i&j#z(Ch(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'At! c_(Y';W$i&j(WpOY!!bYZ!#hZr!!brs!#hsw!!bwx!$xx!^!!b!^!_!%z!_#O!!b#O#P!#h#P#o!!b#o#p!%z#p;'S!!b;'S;=`!'c<%lO!!b'l!!i_$i&j(WpOY!!bYZ!#hZr!!brs!#hsw!!bwx!$xx!^!!b!^!_!%z!_#O!!b#O#P!#h#P#o!!b#o#p!%z#p;'S!!b;'S;=`!'c<%lO!!b&z!#mX$i&jOw!#hwx6cx!^!#h!^!_!$Y!_#o!#h#o#p!$Y#p;'S!#h;'S;=`!$r<%lO!#h`!$]TOw!$Ywx7]x;'S!$Y;'S;=`!$l<%lO!$Y`!$oP;=`<%l!$Y&z!$uP;=`<%l!#h'l!%R]$d`$i&j(WpOY(rYZ&cZr(rrs&cs!^(r!^!_)r!_#O(r#O#P&c#P#o(r#o#p)r#p;'S(r;'S;=`*a<%lO(r!Q!&PZ(WpOY!%zYZ!$YZr!%zrs!$Ysw!%zwx!&rx#O!%z#O#P!$Y#P;'S!%z;'S;=`!']<%lO!%z!Q!&yU$d`(WpOY)rZr)rs#O)r#P;'S)r;'S;=`*Z<%lO)r!Q!'`P;=`<%l!%z'l!'fP;=`<%l!!b/5|!'t_!l/.^$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z#&U!)O_!k!Lf$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z-!n!*[b$i&j(Wp(Z!b(U%&f#q(ChOY%ZYZ&cZr%Zrs&}sw%Zwx(rxz%Zz{!+d{!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(KW!+o`$i&j(Wp(Z!b#n(ChOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z+;x!,|`$i&j(Wp(Z!br+4YOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z,$U!.Z_!]+Jf$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z07[!/ec$i&j(Wp(Z!b!Q.2^OY%ZYZ&cZr%Zrs&}sw%Zwx(rx!O%Z!O!P!0p!P!Q%Z!Q![!3Y![!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z#%|!0ya$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!O%Z!O!P!2O!P!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z#%|!2Z_![!L^$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad!3eg$i&j(Wp(Z!bs'9tOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q![!3Y![!^%Z!^!_*g!_!g%Z!g!h!4|!h#O%Z#O#P&c#P#R%Z#R#S!3Y#S#X%Z#X#Y!4|#Y#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad!5Vg$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx{%Z{|!6n|}%Z}!O!6n!O!Q%Z!Q![!8S![!^%Z!^!_*g!_#O%Z#O#P&c#P#R%Z#R#S!8S#S#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad!6wc$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q![!8S![!^%Z!^!_*g!_#O%Z#O#P&c#P#R%Z#R#S!8S#S#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad!8_c$i&j(Wp(Z!bs'9tOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q![!8S![!^%Z!^!_*g!_#O%Z#O#P&c#P#R%Z#R#S!8S#S#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z07[!9uf$i&j(Wp(Z!b#o(ChOY!;ZYZ&cZr!;Zrs!<nsw!;Zwx!Lcxz!;Zz{#-}{!P!;Z!P!Q#/d!Q!^!;Z!^!_#(i!_!`#7S!`!a#8i!a!}!;Z!}#O#,f#O#P!Dy#P#o!;Z#o#p#(i#p;'S!;Z;'S;=`#-w<%lO!;Z?O!;fb$i&j(Wp(Z!b!X7`OY!;ZYZ&cZr!;Zrs!<nsw!;Zwx!Lcx!P!;Z!P!Q#&`!Q!^!;Z!^!_#(i!_!}!;Z!}#O#,f#O#P!Dy#P#o!;Z#o#p#(i#p;'S!;Z;'S;=`#-w<%lO!;Z>^!<w`$i&j(Z!b!X7`OY!<nYZ&cZw!<nwx!=yx!P!<n!P!Q!Eq!Q!^!<n!^!_!Gr!_!}!<n!}#O!KS#O#P!Dy#P#o!<n#o#p!Gr#p;'S!<n;'S;=`!L]<%lO!<n<z!>Q^$i&j!X7`OY!=yYZ&cZ!P!=y!P!Q!>|!Q!^!=y!^!_!@c!_!}!=y!}#O!CW#O#P!Dy#P#o!=y#o#p!@c#p;'S!=y;'S;=`!Ek<%lO!=y<z!?Td$i&j!X7`O!^&c!_#W&c#W#X!>|#X#Z&c#Z#[!>|#[#]&c#]#^!>|#^#a&c#a#b!>|#b#g&c#g#h!>|#h#i&c#i#j!>|#j#k!>|#k#m&c#m#n!>|#n#o&c#p;'S&c;'S;=`&w<%lO&c7`!@hX!X7`OY!@cZ!P!@c!P!Q!AT!Q!}!@c!}#O!Ar#O#P!Bq#P;'S!@c;'S;=`!CQ<%lO!@c7`!AYW!X7`#W#X!AT#Z#[!AT#]#^!AT#a#b!AT#g#h!AT#i#j!AT#j#k!AT#m#n!AT7`!AuVOY!ArZ#O!Ar#O#P!B[#P#Q!@c#Q;'S!Ar;'S;=`!Bk<%lO!Ar7`!B_SOY!ArZ;'S!Ar;'S;=`!Bk<%lO!Ar7`!BnP;=`<%l!Ar7`!BtSOY!@cZ;'S!@c;'S;=`!CQ<%lO!@c7`!CTP;=`<%l!@c<z!C][$i&jOY!CWYZ&cZ!^!CW!^!_!Ar!_#O!CW#O#P!DR#P#Q!=y#Q#o!CW#o#p!Ar#p;'S!CW;'S;=`!Ds<%lO!CW<z!DWX$i&jOY!CWYZ&cZ!^!CW!^!_!Ar!_#o!CW#o#p!Ar#p;'S!CW;'S;=`!Ds<%lO!CW<z!DvP;=`<%l!CW<z!EOX$i&jOY!=yYZ&cZ!^!=y!^!_!@c!_#o!=y#o#p!@c#p;'S!=y;'S;=`!Ek<%lO!=y<z!EnP;=`<%l!=y>^!Ezl$i&j(Z!b!X7`OY&}YZ&cZw&}wx&cx!^&}!^!_'}!_#O&}#O#P&c#P#W&}#W#X!Eq#X#Z&}#Z#[!Eq#[#]&}#]#^!Eq#^#a&}#a#b!Eq#b#g&}#g#h!Eq#h#i&}#i#j!Eq#j#k!Eq#k#m&}#m#n!Eq#n#o&}#o#p'}#p;'S&};'S;=`(l<%lO&}8r!GyZ(Z!b!X7`OY!GrZw!Grwx!@cx!P!Gr!P!Q!Hl!Q!}!Gr!}#O!JU#O#P!Bq#P;'S!Gr;'S;=`!J|<%lO!Gr8r!Hse(Z!b!X7`OY'}Zw'}x#O'}#P#W'}#W#X!Hl#X#Z'}#Z#[!Hl#[#]'}#]#^!Hl#^#a'}#a#b!Hl#b#g'}#g#h!Hl#h#i'}#i#j!Hl#j#k!Hl#k#m'}#m#n!Hl#n;'S'};'S;=`(f<%lO'}8r!JZX(Z!bOY!JUZw!JUwx!Arx#O!JU#O#P!B[#P#Q!Gr#Q;'S!JU;'S;=`!Jv<%lO!JU8r!JyP;=`<%l!JU8r!KPP;=`<%l!Gr>^!KZ^$i&j(Z!bOY!KSYZ&cZw!KSwx!CWx!^!KS!^!_!JU!_#O!KS#O#P!DR#P#Q!<n#Q#o!KS#o#p!JU#p;'S!KS;'S;=`!LV<%lO!KS>^!LYP;=`<%l!KS>^!L`P;=`<%l!<n=l!Ll`$i&j(Wp!X7`OY!LcYZ&cZr!Lcrs!=ys!P!Lc!P!Q!Mn!Q!^!Lc!^!_# o!_!}!Lc!}#O#%P#O#P!Dy#P#o!Lc#o#p# o#p;'S!Lc;'S;=`#&Y<%lO!Lc=l!Mwl$i&j(Wp!X7`OY(rYZ&cZr(rrs&cs!^(r!^!_)r!_#O(r#O#P&c#P#W(r#W#X!Mn#X#Z(r#Z#[!Mn#[#](r#]#^!Mn#^#a(r#a#b!Mn#b#g(r#g#h!Mn#h#i(r#i#j!Mn#j#k!Mn#k#m(r#m#n!Mn#n#o(r#o#p)r#p;'S(r;'S;=`*a<%lO(r8Q# vZ(Wp!X7`OY# oZr# ors!@cs!P# o!P!Q#!i!Q!}# o!}#O#$R#O#P!Bq#P;'S# o;'S;=`#$y<%lO# o8Q#!pe(Wp!X7`OY)rZr)rs#O)r#P#W)r#W#X#!i#X#Z)r#Z#[#!i#[#])r#]#^#!i#^#a)r#a#b#!i#b#g)r#g#h#!i#h#i)r#i#j#!i#j#k#!i#k#m)r#m#n#!i#n;'S)r;'S;=`*Z<%lO)r8Q#$WX(WpOY#$RZr#$Rrs!Ars#O#$R#O#P!B[#P#Q# o#Q;'S#$R;'S;=`#$s<%lO#$R8Q#$vP;=`<%l#$R8Q#$|P;=`<%l# o=l#%W^$i&j(WpOY#%PYZ&cZr#%Prs!CWs!^#%P!^!_#$R!_#O#%P#O#P!DR#P#Q!Lc#Q#o#%P#o#p#$R#p;'S#%P;'S;=`#&S<%lO#%P=l#&VP;=`<%l#%P=l#&]P;=`<%l!Lc?O#&kn$i&j(Wp(Z!b!X7`OY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#W%Z#W#X#&`#X#Z%Z#Z#[#&`#[#]%Z#]#^#&`#^#a%Z#a#b#&`#b#g%Z#g#h#&`#h#i%Z#i#j#&`#j#k#&`#k#m%Z#m#n#&`#n#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z9d#(r](Wp(Z!b!X7`OY#(iZr#(irs!Grsw#(iwx# ox!P#(i!P!Q#)k!Q!}#(i!}#O#+`#O#P!Bq#P;'S#(i;'S;=`#,`<%lO#(i9d#)th(Wp(Z!b!X7`OY*gZr*grs'}sw*gwx)rx#O*g#P#W*g#W#X#)k#X#Z*g#Z#[#)k#[#]*g#]#^#)k#^#a*g#a#b#)k#b#g*g#g#h#)k#h#i*g#i#j#)k#j#k#)k#k#m*g#m#n#)k#n;'S*g;'S;=`+Z<%lO*g9d#+gZ(Wp(Z!bOY#+`Zr#+`rs!JUsw#+`wx#$Rx#O#+`#O#P!B[#P#Q#(i#Q;'S#+`;'S;=`#,Y<%lO#+`9d#,]P;=`<%l#+`9d#,cP;=`<%l#(i?O#,o`$i&j(Wp(Z!bOY#,fYZ&cZr#,frs!KSsw#,fwx#%Px!^#,f!^!_#+`!_#O#,f#O#P!DR#P#Q!;Z#Q#o#,f#o#p#+`#p;'S#,f;'S;=`#-q<%lO#,f?O#-tP;=`<%l#,f?O#-zP;=`<%l!;Z07[#.[b$i&j(Wp(Z!b(O0/l!X7`OY!;ZYZ&cZr!;Zrs!<nsw!;Zwx!Lcx!P!;Z!P!Q#&`!Q!^!;Z!^!_#(i!_!}!;Z!}#O#,f#O#P!Dy#P#o!;Z#o#p#(i#p;'S!;Z;'S;=`#-w<%lO!;Z07[#/o_$i&j(Wp(Z!bT0/lOY#/dYZ&cZr#/drs#0nsw#/dwx#4Ox!^#/d!^!_#5}!_#O#/d#O#P#1p#P#o#/d#o#p#5}#p;'S#/d;'S;=`#6|<%lO#/d06j#0w]$i&j(Z!bT0/lOY#0nYZ&cZw#0nwx#1px!^#0n!^!_#3R!_#O#0n#O#P#1p#P#o#0n#o#p#3R#p;'S#0n;'S;=`#3x<%lO#0n05W#1wX$i&jT0/lOY#1pYZ&cZ!^#1p!^!_#2d!_#o#1p#o#p#2d#p;'S#1p;'S;=`#2{<%lO#1p0/l#2iST0/lOY#2dZ;'S#2d;'S;=`#2u<%lO#2d0/l#2xP;=`<%l#2d05W#3OP;=`<%l#1p01O#3YW(Z!bT0/lOY#3RZw#3Rwx#2dx#O#3R#O#P#2d#P;'S#3R;'S;=`#3r<%lO#3R01O#3uP;=`<%l#3R06j#3{P;=`<%l#0n05x#4X]$i&j(WpT0/lOY#4OYZ&cZr#4Ors#1ps!^#4O!^!_#5Q!_#O#4O#O#P#1p#P#o#4O#o#p#5Q#p;'S#4O;'S;=`#5w<%lO#4O00^#5XW(WpT0/lOY#5QZr#5Qrs#2ds#O#5Q#O#P#2d#P;'S#5Q;'S;=`#5q<%lO#5Q00^#5tP;=`<%l#5Q05x#5zP;=`<%l#4O01p#6WY(Wp(Z!bT0/lOY#5}Zr#5}rs#3Rsw#5}wx#5Qx#O#5}#O#P#2d#P;'S#5};'S;=`#6v<%lO#5}01p#6yP;=`<%l#5}07[#7PP;=`<%l#/d)3h#7ab$i&j$Q(Ch(Wp(Z!b!X7`OY!;ZYZ&cZr!;Zrs!<nsw!;Zwx!Lcx!P!;Z!P!Q#&`!Q!^!;Z!^!_#(i!_!}!;Z!}#O#,f#O#P!Dy#P#o!;Z#o#p#(i#p;'S!;Z;'S;=`#-w<%lO!;ZAt#8vb$Z#t$i&j(Wp(Z!b!X7`OY!;ZYZ&cZr!;Zrs!<nsw!;Zwx!Lcx!P!;Z!P!Q#&`!Q!^!;Z!^!_#(i!_!}!;Z!}#O#,f#O#P!Dy#P#o!;Z#o#p#(i#p;'S!;Z;'S;=`#-w<%lO!;Z'Ad#:Zp$i&j(Wp(Z!bs'9tOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!O%Z!O!P!3Y!P!Q%Z!Q![#<_![!^%Z!^!_*g!_!g%Z!g!h!4|!h#O%Z#O#P&c#P#R%Z#R#S#<_#S#U%Z#U#V#?i#V#X%Z#X#Y!4|#Y#b%Z#b#c#>_#c#d#Bq#d#l%Z#l#m#Es#m#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad#<jk$i&j(Wp(Z!bs'9tOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!O%Z!O!P!3Y!P!Q%Z!Q![#<_![!^%Z!^!_*g!_!g%Z!g!h!4|!h#O%Z#O#P&c#P#R%Z#R#S#<_#S#X%Z#X#Y!4|#Y#b%Z#b#c#>_#c#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad#>j_$i&j(Wp(Z!bs'9tOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad#?rd$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q!R#AQ!R!S#AQ!S!^%Z!^!_*g!_#O%Z#O#P&c#P#R%Z#R#S#AQ#S#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad#A]f$i&j(Wp(Z!bs'9tOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q!R#AQ!R!S#AQ!S!^%Z!^!_*g!_#O%Z#O#P&c#P#R%Z#R#S#AQ#S#b%Z#b#c#>_#c#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad#Bzc$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q!Y#DV!Y!^%Z!^!_*g!_#O%Z#O#P&c#P#R%Z#R#S#DV#S#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad#Dbe$i&j(Wp(Z!bs'9tOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q!Y#DV!Y!^%Z!^!_*g!_#O%Z#O#P&c#P#R%Z#R#S#DV#S#b%Z#b#c#>_#c#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad#E|g$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q![#Ge![!^%Z!^!_*g!_!c%Z!c!i#Ge!i#O%Z#O#P&c#P#R%Z#R#S#Ge#S#T%Z#T#Z#Ge#Z#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad#Gpi$i&j(Wp(Z!bs'9tOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q![#Ge![!^%Z!^!_*g!_!c%Z!c!i#Ge!i#O%Z#O#P&c#P#R%Z#R#S#Ge#S#T%Z#T#Z#Ge#Z#b%Z#b#c#>_#c#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z*)x#Il_!g$b$i&j$O)Lv(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z)[#Jv_al$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z04f#LS^h#)`#R-<U(Wp(Z!b$n7`OY*gZr*grs'}sw*gwx)rx!P*g!P!Q#MO!Q!^*g!^!_#Mt!_!`$ f!`#O*g#P;'S*g;'S;=`+Z<%lO*g(n#MXX$k&j(Wp(Z!bOY*gZr*grs'}sw*gwx)rx#O*g#P;'S*g;'S;=`+Z<%lO*g(El#M}Z#r(Ch(Wp(Z!bOY*gZr*grs'}sw*gwx)rx!_*g!_!`#Np!`#O*g#P;'S*g;'S;=`+Z<%lO*g(El#NyX$Q(Ch(Wp(Z!bOY*gZr*grs'}sw*gwx)rx#O*g#P;'S*g;'S;=`+Z<%lO*g(El$ oX#s(Ch(Wp(Z!bOY*gZr*grs'}sw*gwx)rx#O*g#P;'S*g;'S;=`+Z<%lO*g*)x$!ga#`*!Y$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`0z!`!a$#l!a#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(K[$#w_#k(Cl$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z*)x$%Vag!*r#s(Ch$f#|$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`$&[!`!a$'f!a#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(KW$&g_#s(Ch$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(KW$'qa#r(Ch$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`!a$(v!a#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(KW$)R`#r(Ch$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(Kd$*`a(r(Ct$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!a%Z!a!b$+e!b#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(KW$+p`$i&j#{(Ch(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z%#`$,}_!|$Ip$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z04f$.X_!S0,v$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(n$/]Z$i&jO!^$0O!^!_$0f!_#i$0O#i#j$0k#j#l$0O#l#m$2^#m#o$0O#o#p$0f#p;'S$0O;'S;=`$4i<%lO$0O(n$0VT_#S$i&jO!^&c!_#o&c#p;'S&c;'S;=`&w<%lO&c#S$0kO_#S(n$0p[$i&jO!Q&c!Q![$1f![!^&c!_!c&c!c!i$1f!i#T&c#T#Z$1f#Z#o&c#o#p$3|#p;'S&c;'S;=`&w<%lO&c(n$1kZ$i&jO!Q&c!Q![$2^![!^&c!_!c&c!c!i$2^!i#T&c#T#Z$2^#Z#o&c#p;'S&c;'S;=`&w<%lO&c(n$2cZ$i&jO!Q&c!Q![$3U![!^&c!_!c&c!c!i$3U!i#T&c#T#Z$3U#Z#o&c#p;'S&c;'S;=`&w<%lO&c(n$3ZZ$i&jO!Q&c!Q![$0O![!^&c!_!c&c!c!i$0O!i#T&c#T#Z$0O#Z#o&c#p;'S&c;'S;=`&w<%lO&c#S$4PR!Q![$4Y!c!i$4Y#T#Z$4Y#S$4]S!Q![$4Y!c!i$4Y#T#Z$4Y#q#r$0f(n$4lP;=`<%l$0O#1[$4z_!Y#)l$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(KW$6U`#x(Ch$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z+;p$7c_$i&j(Wp(Z!b(a+4QOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z07[$8qk$i&j(Wp(Z!b(T,2j$_#t(e$I[OY%ZYZ&cZr%Zrs&}st%Ztu$8buw%Zwx(rx}%Z}!O$:f!O!Q%Z!Q![$8b![!^%Z!^!_*g!_!c%Z!c!}$8b!}#O%Z#O#P&c#P#R%Z#R#S$8b#S#T%Z#T#o$8b#o#p*g#p$g%Z$g;'S$8b;'S;=`$<l<%lO$8b+d$:qk$i&j(Wp(Z!b$_#tOY%ZYZ&cZr%Zrs&}st%Ztu$:fuw%Zwx(rx}%Z}!O$:f!O!Q%Z!Q![$:f![!^%Z!^!_*g!_!c%Z!c!}$:f!}#O%Z#O#P&c#P#R%Z#R#S$:f#S#T%Z#T#o$:f#o#p*g#p$g%Z$g;'S$:f;'S;=`$<f<%lO$:f+d$<iP;=`<%l$:f07[$<oP;=`<%l$8b#Jf$<{X!_#Hb(Wp(Z!bOY*gZr*grs'}sw*gwx)rx#O*g#P;'S*g;'S;=`+Z<%lO*g,#x$=sa(y+JY$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p#q$+e#q;'S%Z;'S;=`+a<%lO%Z)>v$?V_!^(CdvBr$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z?O$@a_!q7`$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z07[$Aq|$i&j(Wp(Z!b'|0/l$]#t(T,2j(e$I[OX%ZXY+gYZ&cZ[+g[p%Zpq+gqr%Zrs&}st%ZtuEruw%Zwx(rx}%Z}!OGv!O!Q%Z!Q![Er![!^%Z!^!_*g!_!c%Z!c!}Er!}#O%Z#O#P&c#P#R%Z#R#SEr#S#T%Z#T#oEr#o#p*g#p$f%Z$f$g+g$g#BYEr#BY#BZ$A`#BZ$ISEr$IS$I_$A`$I_$JTEr$JT$JU$A`$JU$KVEr$KV$KW$A`$KW&FUEr&FU&FV$A`&FV;'SEr;'S;=`I|<%l?HTEr?HT?HU$A`?HUOEr07[$D|k$i&j(Wp(Z!b'}0/l$]#t(T,2j(e$I[OY%ZYZ&cZr%Zrs&}st%ZtuEruw%Zwx(rx}%Z}!OGv!O!Q%Z!Q![Er![!^%Z!^!_*g!_!c%Z!c!}Er!}#O%Z#O#P&c#P#R%Z#R#SEr#S#T%Z#T#oEr#o#p*g#p$g%Z$g;'SEr;'S;=`I|<%lOEr",tokenizers:[_Ee,xEe,wEe,OEe,2,3,4,5,6,7,8,9,10,11,12,13,14,bEe,new O6("$S~RRtu[#O#Pg#S#T#|~_P#o#pb~gOx~~jVO#i!P#i#j!U#j#l!P#l#m!q#m;'S!P;'S;=`#v<%lO!P~!UO!U~~!XS!Q![!e!c!i!e#T#Z!e#o#p#Z~!hR!Q![!q!c!i!q#T#Z!q~!tR!Q![!}!c!i!}#T#Z!}~#QR!Q![!P!c!i!P#T#Z!P~#^R!Q![#g!c!i#g#T#Z#g~#jS!Q![#g!c!i#g#T#Z#g#q#r!P~#yP;=`<%l!P~$RO(c~~",141,340),new O6("j~RQYZXz{^~^O(Q~~aP!P!Qd~iO(R~~",25,323)],topRules:{Script:[0,7],SingleExpression:[1,276],SingleClassItem:[2,277]},dialects:{jsx:0,ts:15175},dynamicPrecedences:{80:1,82:1,94:1,169:1,199:1},specialized:[{term:327,get:t=>kEe[t]||-1},{term:343,get:t=>CEe[t]||-1},{term:95,get:t=>AEe[t]||-1}],tokenPrec:15201}),Bie=[wu("function ${name}(${params}) {\n	${}\n}",{label:"function",detail:"definition",type:"keyword"}),wu("for (let ${index} = 0; ${index} < ${bound}; ${index}++) {\n	${}\n}",{label:"for",detail:"loop",type:"keyword"}),wu("for (let ${name} of ${collection}) {\n	${}\n}",{label:"for",detail:"of loop",type:"keyword"}),wu("do {\n	${}\n} while (${})",{label:"do",detail:"loop",type:"keyword"}),wu("while (${}) {\n	${}\n}",{label:"while",detail:"loop",type:"keyword"}),wu(`try {
	\${}
} catch (\${error}) {
	\${}
}`,{label:"try",detail:"/ catch block",type:"keyword"}),wu("if (${}) {\n	${}\n}",{label:"if",detail:"block",type:"keyword"}),wu(`if (\${}) {
	\${}
} else {
	\${}
}`,{label:"if",detail:"/ else block",type:"keyword"}),wu(`class \${name} {
	constructor(\${params}) {
		\${}
	}
}`,{label:"class",detail:"definition",type:"keyword"}),wu('import {${names}} from "${module}"\n${}',{label:"import",detail:"named",type:"keyword"}),wu('import ${name} from "${module}"\n${}',{label:"import",detail:"default",type:"keyword"})],TEe=Bie.concat([wu("interface ${name} {\n	${}\n}",{label:"interface",detail:"definition",type:"keyword"}),wu("type ${name} = ${type}",{label:"type",detail:"definition",type:"keyword"}),wu("enum ${name} {\n	${}\n}",{label:"enum",detail:"definition",type:"keyword"})]),kq=new Fne,Nie=new Set(["Script","Block","FunctionExpression","FunctionDeclaration","ArrowFunction","MethodDeclaration","ForStatement"]);function LS(t){return(e,n)=>{let r=e.node.getChild("VariableDefinition");return r&&n(r,t),!0}}const PEe=["FunctionDeclaration"],DEe={FunctionDeclaration:LS("function"),ClassDeclaration:LS("class"),ClassExpression:()=>!0,EnumDeclaration:LS("constant"),TypeAliasDeclaration:LS("type"),NamespaceDeclaration:LS("namespace"),VariableDefinition(t,e){t.matchContext(PEe)||e(t,"variable")},TypeDefinition(t,e){e(t,"type")},__proto__:null};function zie(t,e){let n=kq.get(e);if(n)return n;let r=[],i=!0;function s(o,a){let l=t.sliceString(o.from,o.to);r.push({label:l,type:a})}return e.cursor(so.IncludeAnonymous).iterate(o=>{if(i)i=!1;else if(o.name){let a=DEe[o.name];if(a&&a(o,s)||Nie.has(o.name))return!1}else if(o.to-o.from>8192){for(let a of zie(t,o.node))r.push(a);return!1}}),kq.set(e,r),r}const Cq=/^[\w$\xa1-\uffff][\w$\d\xa1-\uffff]*$/,Qie=["TemplateString","String","RegExp","LineComment","BlockComment","VariableDefinition","TypeDefinition","Label","PropertyDefinition","PropertyName","PrivatePropertyDefinition","PrivatePropertyName","JSXText","JSXAttributeValue","JSXOpenTag","JSXCloseTag","JSXSelfClosingTag",".","?."];function IEe(t){let e=ws(t.state).resolveInner(t.pos,-1);if(Qie.indexOf(e.name)>-1)return null;let n=e.name=="VariableName"||e.to-e.from<20&&Cq.test(t.state.sliceDoc(e.from,e.to));if(!n&&!t.explicit)return null;let r=[];for(let i=e;i;i=i.parent)Nie.has(i.name)&&(r=r.concat(zie(t.state.doc,i)));return{options:r,from:n?e.from:t.pos,validFor:Cq}}const em=u0.define({name:"javascript",parser:EEe.configure({props:[S1.add({IfStatement:Kg({except:/^\s*({|else\b)/}),TryStatement:Kg({except:/^\s*({|catch\b|finally\b)/}),LabeledStatement:LOe,SwitchBody:t=>{let e=t.textAfter,n=/^\s*\}/.test(e),r=/^\s*(case|default)\b/.test(e);return t.baseIndent+(n?0:r?1:2)*t.unit},Block:FOe({closing:"}"}),ArrowFunction:t=>t.baseIndent+t.unit,"TemplateString BlockComment":()=>null,"Statement Property":Kg({except:/^\s*{/}),JSXElement(t){let e=/^\s*<\//.test(t.textAfter);return t.lineIndent(t.node.from)+(e?0:t.unit)},JSXEscape(t){let e=/\s*\}/.test(t.textAfter);return t.lineIndent(t.node.from)+(e?0:t.unit)},"JSXOpenTag JSXSelfClosingTag"(t){return t.column(t.node.from)+t.unit}}),k1.add({"Block ClassBody SwitchBody EnumBody ObjectExpression ArrayExpression ObjectType":bD,BlockComment(t){return{from:t.from+2,to:t.to-2}}})]}),languageData:{closeBrackets:{brackets:["(","[","{","'",'"',"`"]},commentTokens:{line:"//",block:{open:"/*",close:"*/"}},indentOnInput:/^\s*(?:case |default:|\{|\}|<\/)$/,wordChars:"$"}}),jie={test:t=>/^JSX/.test(t.name),facet:ZB({commentTokens:{block:{open:"{/*",close:"*/}"}}})},Uie=em.configure({dialect:"ts"},"typescript"),Vie=em.configure({dialect:"jsx",props:[XB.add(t=>t.isTop?[jie]:void 0)]}),qie=em.configure({dialect:"jsx ts",props:[XB.add(t=>t.isTop?[jie]:void 0)]},"typescript");let Zie=t=>({label:t,type:"keyword"});const Xie="break case const continue default delete export extends false finally in instanceof let new return static super switch this throw true typeof var yield".split(" ").map(Zie),MEe=Xie.concat(["declare","implements","private","protected","public"].map(Zie));function REe(t={}){let e=t.jsx?t.typescript?qie:Vie:t.typescript?Uie:em,n=t.typescript?TEe.concat(MEe):Bie.concat(Xie);return new y1(e,[em.data.of({autocomplete:Wne(Qie,HB(n))}),em.data.of({autocomplete:IEe}),t.jsx?$Ee:[]])}function FEe(t){for(;;){if(t.name=="JSXOpenTag"||t.name=="JSXSelfClosingTag"||t.name=="JSXFragmentTag")return t;if(t.name=="JSXEscape"||!t.parent)return null;t=t.parent}}function Aq(t,e,n=t.length){for(let r=e?.firstChild;r;r=r.nextSibling)if(r.name=="JSXIdentifier"||r.name=="JSXBuiltin"||r.name=="JSXNamespacedName"||r.name=="JSXMemberExpression")return t.sliceString(r.from,Math.min(r.to,n));return""}const LEe=typeof navigator=="object"&&/Android\b/.test(navigator.userAgent),$Ee=Cn.inputHandler.of((t,e,n,r,i)=>{if((LEe?t.composing:t.compositionStarted)||t.state.readOnly||e!=n||r!=">"&&r!="/"||!em.isActiveAt(t.state,e,-1))return!1;let s=i(),{state:o}=s,a=o.changeByRange(l=>{var h;let{head:f}=l,p=ws(o).resolveInner(f-1,-1),g;if(p.name=="JSXStartTag"&&(p=p.parent),!(o.doc.sliceString(f-1,f)!=r||p.name=="JSXAttributeValue"&&p.to>f)){if(r==">"&&p.name=="JSXFragmentTag")return{range:l,changes:{from:f,insert:"</>"}};if(r=="/"&&p.name=="JSXStartCloseTag"){let b=p.parent,x=b.parent;if(x&&b.from==f-2&&((g=Aq(o.doc,x.firstChild,f))||((h=x.firstChild)===null||h===void 0?void 0:h.name)=="JSXFragmentTag")){let k=`${g}>`;return{range:kt.cursor(f+k.length,-1),changes:{from:f,insert:k}}}}else if(r==">"){let b=FEe(p);if(b&&b.name=="JSXOpenTag"&&!/^\/?>|^<\//.test(o.doc.sliceString(f,f+2))&&(g=Aq(o.doc,b,f)))return{range:l,changes:{from:f,insert:`</${g}>`}}}}return{range:l}});return a.changes.empty?!1:(t.dispatch([s,o.update(a,{userEvent:"input.complete",scrollIntoView:!0})]),!0)}),$S=["_blank","_self","_top","_parent"],GM=["ascii","utf-8","utf-16","latin1","latin1"],YM=["get","post","put","delete"],HM=["application/x-www-form-urlencoded","multipart/form-data","text/plain"],Jc=["true","false"],Zn={},BEe={a:{attrs:{href:null,ping:null,type:null,media:null,target:$S,hreflang:null}},abbr:Zn,address:Zn,area:{attrs:{alt:null,coords:null,href:null,target:null,ping:null,media:null,hreflang:null,type:null,shape:["default","rect","circle","poly"]}},article:Zn,aside:Zn,audio:{attrs:{src:null,mediagroup:null,crossorigin:["anonymous","use-credentials"],preload:["none","metadata","auto"],autoplay:["autoplay"],loop:["loop"],controls:["controls"]}},b:Zn,base:{attrs:{href:null,target:$S}},bdi:Zn,bdo:Zn,blockquote:{attrs:{cite:null}},body:Zn,br:Zn,button:{attrs:{form:null,formaction:null,name:null,value:null,autofocus:["autofocus"],disabled:["autofocus"],formenctype:HM,formmethod:YM,formnovalidate:["novalidate"],formtarget:$S,type:["submit","reset","button"]}},canvas:{attrs:{width:null,height:null}},caption:Zn,center:Zn,cite:Zn,code:Zn,col:{attrs:{span:null}},colgroup:{attrs:{span:null}},command:{attrs:{type:["command","checkbox","radio"],label:null,icon:null,radiogroup:null,command:null,title:null,disabled:["disabled"],checked:["checked"]}},data:{attrs:{value:null}},datagrid:{attrs:{disabled:["disabled"],multiple:["multiple"]}},datalist:{attrs:{data:null}},dd:Zn,del:{attrs:{cite:null,datetime:null}},details:{attrs:{open:["open"]}},dfn:Zn,div:Zn,dl:Zn,dt:Zn,em:Zn,embed:{attrs:{src:null,type:null,width:null,height:null}},eventsource:{attrs:{src:null}},fieldset:{attrs:{disabled:["disabled"],form:null,name:null}},figcaption:Zn,figure:Zn,footer:Zn,form:{attrs:{action:null,name:null,"accept-charset":GM,autocomplete:["on","off"],enctype:HM,method:YM,novalidate:["novalidate"],target:$S}},h1:Zn,h2:Zn,h3:Zn,h4:Zn,h5:Zn,h6:Zn,head:{children:["title","base","link","style","meta","script","noscript","command"]},header:Zn,hgroup:Zn,hr:Zn,html:{attrs:{manifest:null}},i:Zn,iframe:{attrs:{src:null,srcdoc:null,name:null,width:null,height:null,sandbox:["allow-top-navigation","allow-same-origin","allow-forms","allow-scripts"],seamless:["seamless"]}},img:{attrs:{alt:null,src:null,ismap:null,usemap:null,width:null,height:null,crossorigin:["anonymous","use-credentials"]}},input:{attrs:{alt:null,dirname:null,form:null,formaction:null,height:null,list:null,max:null,maxlength:null,min:null,name:null,pattern:null,placeholder:null,size:null,src:null,step:null,value:null,width:null,accept:["audio/*","video/*","image/*"],autocomplete:["on","off"],autofocus:["autofocus"],checked:["checked"],disabled:["disabled"],formenctype:HM,formmethod:YM,formnovalidate:["novalidate"],formtarget:$S,multiple:["multiple"],readonly:["readonly"],required:["required"],type:["hidden","text","search","tel","url","email","password","datetime","date","month","week","time","datetime-local","number","range","color","checkbox","radio","file","submit","image","reset","button"]}},ins:{attrs:{cite:null,datetime:null}},kbd:Zn,keygen:{attrs:{challenge:null,form:null,name:null,autofocus:["autofocus"],disabled:["disabled"],keytype:["RSA"]}},label:{attrs:{for:null,form:null}},legend:Zn,li:{attrs:{value:null}},link:{attrs:{href:null,type:null,hreflang:null,media:null,sizes:["all","16x16","16x16 32x32","16x16 32x32 64x64"]}},map:{attrs:{name:null}},mark:Zn,menu:{attrs:{label:null,type:["list","context","toolbar"]}},meta:{attrs:{content:null,charset:GM,name:["viewport","application-name","author","description","generator","keywords"],"http-equiv":["content-language","content-type","default-style","refresh"]}},meter:{attrs:{value:null,min:null,low:null,high:null,max:null,optimum:null}},nav:Zn,noscript:Zn,object:{attrs:{data:null,type:null,name:null,usemap:null,form:null,width:null,height:null,typemustmatch:["typemustmatch"]}},ol:{attrs:{reversed:["reversed"],start:null,type:["1","a","A","i","I"]},children:["li","script","template","ul","ol"]},optgroup:{attrs:{disabled:["disabled"],label:null}},option:{attrs:{disabled:["disabled"],label:null,selected:["selected"],value:null}},output:{attrs:{for:null,form:null,name:null}},p:Zn,param:{attrs:{name:null,value:null}},pre:Zn,progress:{attrs:{value:null,max:null}},q:{attrs:{cite:null}},rp:Zn,rt:Zn,ruby:Zn,samp:Zn,script:{attrs:{type:["text/javascript"],src:null,async:["async"],defer:["defer"],charset:GM}},section:Zn,select:{attrs:{form:null,name:null,size:null,autofocus:["autofocus"],disabled:["disabled"],multiple:["multiple"]}},slot:{attrs:{name:null}},small:Zn,source:{attrs:{src:null,type:null,media:null}},span:Zn,strong:Zn,style:{attrs:{type:["text/css"],media:null,scoped:null}},sub:Zn,summary:Zn,sup:Zn,table:Zn,tbody:Zn,td:{attrs:{colspan:null,rowspan:null,headers:null}},template:Zn,textarea:{attrs:{dirname:null,form:null,maxlength:null,name:null,placeholder:null,rows:null,cols:null,autofocus:["autofocus"],disabled:["disabled"],readonly:["readonly"],required:["required"],wrap:["soft","hard"]}},tfoot:Zn,th:{attrs:{colspan:null,rowspan:null,headers:null,scope:["row","col","rowgroup","colgroup"]}},thead:Zn,time:{attrs:{datetime:null}},title:Zn,tr:Zn,track:{attrs:{src:null,label:null,default:null,kind:["subtitles","captions","descriptions","chapters","metadata"],srclang:null}},ul:{children:["li","script","template","ul","ol"]},var:Zn,video:{attrs:{src:null,poster:null,width:null,height:null,crossorigin:["anonymous","use-credentials"],preload:["auto","metadata","none"],autoplay:["autoplay"],mediagroup:["movie"],muted:["muted"],controls:["controls"]}},wbr:Zn},Wie={accesskey:null,class:null,contenteditable:Jc,contextmenu:null,dir:["ltr","rtl","auto"],draggable:["true","false","auto"],dropzone:["copy","move","link","string:","file:"],hidden:["hidden"],id:null,inert:["inert"],itemid:null,itemprop:null,itemref:null,itemscope:["itemscope"],itemtype:null,lang:["ar","bn","de","en-GB","en-US","es","fr","hi","id","ja","pa","pt","ru","tr","zh"],spellcheck:Jc,autocorrect:Jc,autocapitalize:Jc,style:null,tabindex:null,title:null,translate:["yes","no"],rel:["stylesheet","alternate","author","bookmark","help","license","next","nofollow","noreferrer","prefetch","prev","search","tag"],role:"alert application article banner button cell checkbox complementary contentinfo dialog document feed figure form grid gridcell heading img list listbox listitem main navigation region row rowgroup search switch tab table tabpanel textbox timer".split(" "),"aria-activedescendant":null,"aria-atomic":Jc,"aria-autocomplete":["inline","list","both","none"],"aria-busy":Jc,"aria-checked":["true","false","mixed","undefined"],"aria-controls":null,"aria-describedby":null,"aria-disabled":Jc,"aria-dropeffect":null,"aria-expanded":["true","false","undefined"],"aria-flowto":null,"aria-grabbed":["true","false","undefined"],"aria-haspopup":Jc,"aria-hidden":Jc,"aria-invalid":["true","false","grammar","spelling"],"aria-label":null,"aria-labelledby":null,"aria-level":null,"aria-live":["off","polite","assertive"],"aria-multiline":Jc,"aria-multiselectable":Jc,"aria-owns":null,"aria-posinset":null,"aria-pressed":["true","false","mixed","undefined"],"aria-readonly":Jc,"aria-relevant":null,"aria-required":Jc,"aria-selected":["true","false","undefined"],"aria-setsize":null,"aria-sort":["ascending","descending","none","other"],"aria-valuemax":null,"aria-valuemin":null,"aria-valuenow":null,"aria-valuetext":null},Gie="beforeunload copy cut dragstart dragover dragleave dragenter dragend drag paste focus blur change click load mousedown mouseenter mouseleave mouseup keydown keyup resize scroll unload".split(" ").map(t=>"on"+t);for(let t of Gie)Wie[t]=null;let Nk=class{constructor(e,n){this.tags={...BEe,...e},this.globalAttrs={...Wie,...n},this.allTags=Object.keys(this.tags),this.globalAttrNames=Object.keys(this.globalAttrs)}};Nk.default=new Nk;function p2(t,e,n=t.length){if(!e)return"";let r=e.firstChild,i=r&&r.getChild("TagName");return i?t.sliceString(i.from,Math.min(i.to,n)):""}function m2(t,e=!1){for(;t;t=t.parent)if(t.name=="Element")if(e)e=!1;else return t;return null}function Yie(t,e,n){let r=n.tags[p2(t,m2(e))];return r?.children||n.allTags}function wN(t,e){let n=[];for(let r=m2(e);r&&!r.type.isTop;r=m2(r.parent)){let i=p2(t,r);if(i&&r.lastChild.name=="CloseTag")break;i&&n.indexOf(i)<0&&(e.name=="EndTag"||e.from>=r.firstChild.to)&&n.push(i)}return n}const Hie=/^[:\-\.\w\u00b7-\uffff]*$/;function Eq(t,e,n,r,i){let s=/\s*>/.test(t.sliceDoc(i,i+5))?"":">",o=m2(n,n.name=="StartTag"||n.name=="TagName");return{from:r,to:i,options:Yie(t.doc,o,e).map(a=>({label:a,type:"type"})).concat(wN(t.doc,n).map((a,l)=>({label:"/"+a,apply:"/"+a+s,type:"type",boost:99-l}))),validFor:/^\/?[:\-\.\w\u00b7-\uffff]*$/}}function Tq(t,e,n,r){let i=/\s*>/.test(t.sliceDoc(r,r+5))?"":">";return{from:n,to:r,options:wN(t.doc,e).map((s,o)=>({label:s,apply:s+i,type:"type",boost:99-o})),validFor:Hie}}function NEe(t,e,n,r){let i=[],s=0;for(let o of Yie(t.doc,n,e))i.push({label:"<"+o,type:"type"});for(let o of wN(t.doc,n))i.push({label:"</"+o+">",type:"type",boost:99-s++});return{from:r,to:r,options:i,validFor:/^<\/?[:\-\.\w\u00b7-\uffff]*$/}}function zEe(t,e,n,r,i){let s=m2(n),o=s?e.tags[p2(t.doc,s)]:null,a=o&&o.attrs?Object.keys(o.attrs):[],l=o&&o.globalAttrs===!1?a:a.length?a.concat(e.globalAttrNames):e.globalAttrNames;return{from:r,to:i,options:l.map(h=>({label:h,type:"property"})),validFor:Hie}}function QEe(t,e,n,r,i){var s;let o=(s=n.parent)===null||s===void 0?void 0:s.getChild("AttributeName"),a=[],l;if(o){let h=t.sliceDoc(o.from,o.to),f=e.globalAttrs[h];if(!f){let p=m2(n),g=p?e.tags[p2(t.doc,p)]:null;f=g?.attrs&&g.attrs[h]}if(f){let p=t.sliceDoc(r,i).toLowerCase(),g='"',b='"';/^['"]/.test(p)?(l=p[0]=='"'?/^[^"]*$/:/^[^']*$/,g="",b=t.sliceDoc(i,i+1)==p[0]?"":p[0],p=p.slice(1),r++):l=/^[^\s<>='"]*$/;for(let x of f)a.push({label:x,apply:g+x+b,type:"constant"})}}return{from:r,to:i,options:a,validFor:l}}function Kie(t,e){let{state:n,pos:r}=e,i=ws(n).resolveInner(r,-1),s=i.resolve(r);for(let o=r,a;s==i&&(a=i.childBefore(o));){let l=a.lastChild;if(!l||!l.type.isError||l.from<l.to)break;s=i=a,o=l.from}return i.name=="TagName"?i.parent&&/CloseTag$/.test(i.parent.name)?Tq(n,i,i.from,r):Eq(n,t,i,i.from,r):i.name=="StartTag"||i.name=="IncompleteTag"?Eq(n,t,i,r,r):i.name=="StartCloseTag"||i.name=="IncompleteCloseTag"?Tq(n,i,r,r):i.name=="OpenTag"||i.name=="SelfClosingTag"||i.name=="AttributeName"?zEe(n,t,i,i.name=="AttributeName"?i.from:r,r):i.name=="Is"||i.name=="AttributeValue"||i.name=="UnquotedAttributeValue"?QEe(n,t,i,i.name=="Is"?r:i.from,r):e.explicit&&(s.name=="Element"||s.name=="Text"||s.name=="Document")?NEe(n,t,i,r):null}function jEe(t){return Kie(Nk.default,t)}function UEe(t){let{extraTags:e,extraGlobalAttributes:n}=t,r=n||e?new Nk(e,n):Nk.default;return i=>Kie(r,i)}const VEe=em.parser.configure({top:"SingleExpression"}),Jie=[{tag:"script",attrs:t=>t.type=="text/typescript"||t.lang=="ts",parser:Uie.parser},{tag:"script",attrs:t=>t.type=="text/babel"||t.type=="text/jsx",parser:Vie.parser},{tag:"script",attrs:t=>t.type=="text/typescript-jsx",parser:qie.parser},{tag:"script",attrs(t){return/^(importmap|speculationrules|application\/(.+\+)?json)$/i.test(t.type)},parser:VEe},{tag:"script",attrs(t){return!t.type||/^(?:text|application)\/(?:x-)?(?:java|ecma)script$|^module$|^$/i.test(t.type)},parser:em.parser},{tag:"style",attrs(t){return(!t.lang||t.lang=="css")&&(!t.type||/^(text\/)?(x-)?(stylesheet|css)$/i.test(t.type))},parser:k6.parser}],ese=[{name:"style",parser:k6.parser.configure({top:"Styles"})}].concat(Gie.map(t=>({name:t,parser:em.parser}))),tse=u0.define({name:"html",parser:mAe.configure({props:[S1.add({Element(t){let e=/^(\s*)(<\/)?/.exec(t.textAfter);return t.node.to<=t.pos+e[0].length?t.continue():t.lineIndent(t.node.from)+(e[2]?0:t.unit)},"OpenTag CloseTag SelfClosingTag"(t){return t.column(t.node.from)+t.unit},Document(t){if(t.pos+/\s*/.exec(t.textAfter)[0].length<t.node.to)return t.continue();let e=null,n;for(let r=t.node;;){let i=r.lastChild;if(!i||i.name!="Element"||i.to!=r.to)break;e=r=i}return e&&!((n=e.lastChild)&&(n.name=="CloseTag"||n.name=="SelfClosingTag"))?t.lineIndent(e.from)+t.unit:null}}),k1.add({Element(t){let e=t.firstChild,n=t.lastChild;return!e||e.name!="OpenTag"?null:{from:e.to,to:n.name=="CloseTag"?n.from:t.to}}}),Xne.add({"OpenTag CloseTag":t=>t.getChild("TagName")})]}),languageData:{commentTokens:{block:{open:"<!--",close:"-->"}},indentOnInput:/^\s*<\/\w+\W$/,wordChars:"-_"}}),E5=tse.configure({wrap:Die(Jie,ese)});function qEe(t={}){let e="",n;t.matchClosingTags===!1&&(e="noMatch"),t.selfClosingTags===!0&&(e=(e?e+" ":"")+"selfClosing"),(t.nestedLanguages&&t.nestedLanguages.length||t.nestedAttributes&&t.nestedAttributes.length)&&(n=Die((t.nestedLanguages||[]).concat(Jie),(t.nestedAttributes||[]).concat(ese)));let r=n?tse.configure({wrap:n,dialect:e}):e?E5.configure({dialect:e}):E5;return new y1(r,[E5.data.of({autocomplete:UEe(t)}),t.autoCloseTags!==!1?ZEe:[],REe().support,HAe().support])}const Pq=new Set("area base br col command embed frame hr img input keygen link meta param source track wbr menuitem".split(" ")),ZEe=Cn.inputHandler.of((t,e,n,r,i)=>{if(t.composing||t.state.readOnly||e!=n||r!=">"&&r!="/"||!E5.isActiveAt(t.state,e,-1))return!1;let s=i(),{state:o}=s,a=o.changeByRange(l=>{var h,f,p;let g=o.doc.sliceString(l.from-1,l.to)==r,{head:b}=l,x=ws(o).resolveInner(b,-1),k;if(g&&r==">"&&x.name=="EndTag"){let T=x.parent;if(((f=(h=T.parent)===null||h===void 0?void 0:h.lastChild)===null||f===void 0?void 0:f.name)!="CloseTag"&&(k=p2(o.doc,T.parent,b))&&!Pq.has(k)){let I=b+(o.doc.sliceString(b,b+1)===">"?1:0),M=`</${k}>`;return{range:l,changes:{from:b,to:I,insert:M}}}}else if(g&&r=="/"&&x.name=="IncompleteCloseTag"){let T=x.parent;if(x.from==b-2&&((p=T.lastChild)===null||p===void 0?void 0:p.name)!="CloseTag"&&(k=p2(o.doc,T,b))&&!Pq.has(k)){let I=b+(o.doc.sliceString(b,b+1)===">"?1:0),M=`${k}>`;return{range:kt.cursor(b+M.length,-1),changes:{from:b,to:I,insert:M}}}}return{range:l}});return a.changes.empty?!1:(t.dispatch([s,o.update(a,{userEvent:"input.complete",scrollIntoView:!0})]),!0)}),nse=ZB({commentTokens:{block:{open:"<!--",close:"-->"}}}),rse=new Dr,ise=uCe.configure({props:[k1.add(t=>!t.is("Block")||t.is("Document")||y9(t)!=null||XEe(t)?void 0:(e,n)=>({from:n.doc.lineAt(e.from).to,to:e.to})),rse.add(y9),S1.add({Document:()=>null}),eb.add({Document:nse})]});function y9(t){let e=/^(?:ATX|Setext)Heading(\d)$/.exec(t.name);return e?+e[1]:void 0}function XEe(t){return t.name=="OrderedList"||t.name=="BulletList"}function WEe(t,e){let n=t;for(;;){let r=n.nextSibling,i;if(!r||(i=y9(r.type))!=null&&i<=e)break;n=r}return n.to}const GEe=NOe.of((t,e,n)=>{for(let r=ws(t).resolveInner(n,-1);r&&!(r.from<e);r=r.parent){let i=r.type.prop(rse);if(i==null)continue;let s=WEe(r,i);if(s>n)return{from:n,to:s}}return null});function ON(t){return new lf(nse,t,[],"markdown")}const YEe=ON(ise),HEe=ise.configure([_Ce,wCe,xCe,OCe,{props:[k1.add({Table:(t,e)=>({from:e.doc.lineAt(t.from).to,to:t.to})})]}]),C6=ON(HEe);function KEe(t,e){return n=>{if(n&&t){let r=null;if(n=/\S*/.exec(n)[0],typeof t=="function"?r=t(n):r=l6.matchLanguageName(t,n,!0),r instanceof l6)return r.support?r.support.language.parser:Tk.getSkippingParser(r.load());if(r)return r.parser}return e?e.parser:null}}class KM{constructor(e,n,r,i,s,o,a){this.node=e,this.from=n,this.to=r,this.spaceBefore=i,this.spaceAfter=s,this.type=o,this.item=a}blank(e,n=!0){let r=this.spaceBefore+(this.node.name=="Blockquote"?">":"");if(e!=null){for(;r.length<e;)r+=" ";return r}else{for(let i=this.to-this.from-r.length-this.spaceAfter.length;i>0;i--)r+=" ";return r+(n?this.spaceAfter:"")}}marker(e,n){let r=this.node.name=="OrderedList"?String(+ose(this.item,e)[2]+n):"";return this.spaceBefore+r+this.type+this.spaceAfter}}function sse(t,e){let n=[],r=[];for(let i=t;i;i=i.parent){if(i.name=="FencedCode")return r;(i.name=="ListItem"||i.name=="Blockquote")&&n.push(i)}for(let i=n.length-1;i>=0;i--){let s=n[i],o,a=e.lineAt(s.from),l=s.from-a.from;if(s.name=="Blockquote"&&(o=/^ *>( ?)/.exec(a.text.slice(l))))r.push(new KM(s,l,l+o[0].length,"",o[1],">",null));else if(s.name=="ListItem"&&s.parent.name=="OrderedList"&&(o=/^( *)\d+([.)])( *)/.exec(a.text.slice(l)))){let h=o[3],f=o[0].length;h.length>=4&&(h=h.slice(0,h.length-4),f-=4),r.push(new KM(s.parent,l,l+f,o[1],h,o[2],s))}else if(s.name=="ListItem"&&s.parent.name=="BulletList"&&(o=/^( *)([-+*])( {1,4}\[[ xX]\])?( +)/.exec(a.text.slice(l)))){let h=o[4],f=o[0].length;h.length>4&&(h=h.slice(0,h.length-4),f-=4);let p=o[2];o[3]&&(p+=o[3].replace(/[xX]/," ")),r.push(new KM(s.parent,l,l+f,o[1],h,p,s))}}return r}function ose(t,e){return/^(\s*)(\d+)(?=[.)])/.exec(e.sliceString(t.from,t.from+10))}function JM(t,e,n,r=0){for(let i=-1,s=t;;){if(s.name=="ListItem"){let a=ose(s,e),l=+a[2];if(i>=0){if(l!=i+1)return;n.push({from:s.from+a[1].length,to:s.from+a[0].length,insert:String(i+2+r)})}i=l}let o=s.nextSibling;if(!o)break;s=o}}function SN(t,e){let n=/^[ \t]*/.exec(t)[0].length;if(!n||e.facet($C)!="	")return t;let r=Ad(t,4,n),i="";for(let s=r;s>0;)s>=4?(i+="	",s-=4):(i+=" ",s--);return i+t.slice(n)}const JEe=(t={})=>({state:e,dispatch:n})=>{let r=ws(e),{doc:i}=e,s=null,o=e.changeByRange(a=>{if(!a.empty||!C6.isActiveAt(e,a.from,-1)&&!C6.isActiveAt(e,a.from,1))return s={range:a};let l=a.from,h=i.lineAt(l),f=sse(r.resolveInner(l,-1),i);for(;f.length&&f[f.length-1].from>l-h.from;)f.pop();if(!f.length)return s={range:a};let p=f[f.length-1];if(p.to-p.spaceAfter.length>l-h.from)return s={range:a};let g=l>=p.to-p.spaceAfter.length&&!/\S/.test(h.text.slice(p.to));if(p.item&&g){let I=p.node.firstChild,M=p.node.getChild("ListItem","ListItem");if(I.to>=l||M&&M.to<l||h.from>0&&!/[^\s>]/.test(i.lineAt(h.from-1).text)||t.nonTightLists===!1){let B=f.length>1?f[f.length-2]:null,j,Q="";B&&B.item?(j=h.from+B.from,Q=B.marker(i,1)):j=h.from+(B?B.to:0);let Z=[{from:j,to:l,insert:Q}];return p.node.name=="OrderedList"&&JM(p.item,i,Z,-2),B&&B.node.name=="OrderedList"&&JM(B.item,i,Z),{range:kt.cursor(j+Q.length),changes:Z}}else{let B=Iq(f,e,h);return{range:kt.cursor(l+B.length+1),changes:{from:h.from,insert:B+e.lineBreak}}}}if(p.node.name=="Blockquote"&&g&&h.from){let I=i.lineAt(h.from-1),M=/>\s*$/.exec(I.text);if(M&&M.index==p.from){let B=e.changes([{from:I.from+M.index,to:I.to},{from:h.from+p.from,to:h.to}]);return{range:a.map(B),changes:B}}}let b=[];p.node.name=="OrderedList"&&JM(p.item,i,b);let x=p.item&&p.item.from<h.from,k="";if(!x||/^[\s\d.)\-+*>]*/.exec(h.text)[0].length>=p.to)for(let I=0,M=f.length-1;I<=M;I++)k+=I==M&&!x?f[I].marker(i,1):f[I].blank(I<M?Ad(h.text,4,f[I+1].from)-k.length:null);let T=l;for(;T>h.from&&/\s/.test(h.text.charAt(T-h.from-1));)T--;return k=SN(k,e),t4e(p.node,e.doc)&&(k=Iq(f,e,h)+e.lineBreak+k),b.push({from:T,to:l,insert:e.lineBreak+k}),{range:kt.cursor(T+k.length+1),changes:b}});return s?!1:(n(e.update(o,{scrollIntoView:!0,userEvent:"input"})),!0)},e4e=JEe();function Dq(t){return t.name=="QuoteMark"||t.name=="ListMark"}function t4e(t,e){if(t.name!="OrderedList"&&t.name!="BulletList")return!1;let n=t.firstChild,r=t.getChild("ListItem","ListItem");if(!r)return!1;let i=e.lineAt(n.to),s=e.lineAt(r.from),o=/^[\s>]*$/.test(i.text);return i.number+(o?0:1)<s.number}function Iq(t,e,n){let r="";for(let i=0,s=t.length-2;i<=s;i++)r+=t[i].blank(i<s?Ad(n.text,4,t[i+1].from)-r.length:null,i<s);return SN(r,e)}function n4e(t,e){let n=t.resolveInner(e,-1),r=e;Dq(n)&&(r=n.from,n=n.parent);for(let i;i=n.childBefore(r);)if(Dq(i))r=i.from;else if(i.name=="OrderedList"||i.name=="BulletList")n=i.lastChild,r=n.to;else break;return n}const r4e=({state:t,dispatch:e})=>{let n=ws(t),r=null,i=t.changeByRange(s=>{let o=s.from,{doc:a}=t;if(s.empty&&C6.isActiveAt(t,s.from)){let l=a.lineAt(o),h=sse(n4e(n,o),a);if(h.length){let f=h[h.length-1],p=f.to-f.spaceAfter.length+(f.spaceAfter?1:0);if(o-l.from>p&&!/\S/.test(l.text.slice(p,o-l.from)))return{range:kt.cursor(l.from+p),changes:{from:l.from+p,to:o}};if(o-l.from==p&&(!f.item||l.from<=f.item.from||!/\S/.test(l.text.slice(0,f.to)))){let g=l.from+f.from;if(f.item&&f.node.from<f.item.from&&/\S/.test(l.text.slice(f.from,f.to))){let b=f.blank(Ad(l.text,4,f.to)-Ad(l.text,4,f.from));return g==l.from&&(b=SN(b,t)),{range:kt.cursor(g+b.length),changes:{from:g,to:l.from+f.to,insert:b}}}if(g<o)return{range:kt.cursor(g),changes:{from:g,to:o}}}}}return r={range:s}});return r?!1:(e(t.update(i,{scrollIntoView:!0,userEvent:"delete"})),!0)},i4e=[{key:"Enter",run:e4e},{key:"Backspace",run:r4e}],ase=qEe({matchClosingTags:!1});function s4e(t={}){let{codeLanguages:e,defaultCodeLanguage:n,addKeymap:r=!0,base:{parser:i}=YEe,completeHTMLTags:s=!0,pasteURLAsLink:o=!0,htmlTagLanguage:a=ase}=t;if(!(i instanceof kD))throw new RangeError("Base parser provided to `markdown` should be a Markdown parser");let l=t.extensions?[t.extensions]:[],h=[a.support,GEe],f;o&&h.push(u4e),n instanceof y1?(h.push(n.support),f=n.language):n&&(f=n);let p=e||f?KEe(e,f):void 0;l.push(hCe({codeParser:p,htmlParser:a.language.parser})),r&&h.push(b0.high(RC.of(i4e)));let g=ON(i.configure(l));return s&&h.push(g.data.of({autocomplete:o4e})),new y1(g,h)}function o4e(t){let{state:e,pos:n}=t,r=/<[:\-\.\w\u00b7-\uffff]*$/.exec(e.sliceDoc(n-25,n));if(!r)return null;let i=ws(e).resolveInner(n,-1);for(;i&&!i.type.isTop;){if(i.name=="CodeBlock"||i.name=="FencedCode"||i.name=="ProcessingInstructionBlock"||i.name=="CommentBlock"||i.name=="Link"||i.name=="Image")return null;i=i.parent}return{from:n-r[0].length,to:n,options:a4e(),validFor:/^<[:\-\.\w\u00b7-\uffff]*$/}}let eR=null;function a4e(){if(eR)return eR;let t=jEe(new YB(Xi.create({extensions:ase}),0,!0));return eR=t?t.options:[]}const l4e=/code|horizontalrule|html|link|comment|processing|escape|entity|image|mark|url/i,u4e=Cn.domEventHandlers({paste:(t,e)=>{var n;let{main:r}=e.state.selection;if(r.empty)return!1;let i=(n=t.clipboardData)===null||n===void 0?void 0:n.getData("text/plain");if(!i||!/^(https?:\/\/|mailto:|xmpp:|www\.)/.test(i)||(/^www\./.test(i)&&(i="https://"+i),!C6.isActiveAt(e.state,r.from,1)))return!1;let s=ws(e.state),o=!1;return s.iterate({from:r.from,to:r.to,enter:a=>{(a.from>r.from||l4e.test(a.name))&&(o=!0)},leave:a=>{a.to<r.to&&(o=!0)}}),o?!1:(e.dispatch({changes:[{from:r.from,insert:"["},{from:r.to,insert:`](${i})`}],userEvent:"input.paste",scrollIntoView:!0}),!0)}}),c4e=36,Mq=1,h4e=2,Sx=3,tR=4,f4e=5,d4e=6,p4e=7,m4e=8,g4e=9,y4e=10,v4e=11,b4e=12,_4e=13,x4e=14,w4e=15,O4e=16,S4e=17,Rq=18,k4e=19,lse=20,use=21,Fq=22,C4e=23,A4e=24;function v9(t){return t>=65&&t<=90||t>=97&&t<=122||t>=48&&t<=57}function E4e(t){return t>=48&&t<=57||t>=97&&t<=102||t>=65&&t<=70}function $v(t,e,n){for(let r=!1;;){if(t.next<0)return;if(t.next==e&&!r){t.advance();return}r=n&&!r&&t.next==92,t.advance()}}function T4e(t,e){e:for(;;){if(t.next<0)return;if(t.next==36){t.advance();for(let n=0;n<e.length;n++){if(t.next!=e.charCodeAt(n))continue e;t.advance()}if(t.next==36){t.advance();return}}else t.advance()}}function P4e(t,e){let n="[{<(".indexOf(String.fromCharCode(e)),r=n<0?e:"]}>)".charCodeAt(n);for(;;){if(t.next<0)return;if(t.next==r&&t.peek(1)==39){t.advance(2);return}t.advance()}}function b9(t,e){for(;!(t.next!=95&&!v9(t.next));)e!=null&&(e+=String.fromCharCode(t.next)),t.advance();return e}function D4e(t){if(t.next==39||t.next==34||t.next==96){let e=t.next;t.advance(),$v(t,e,!1)}else b9(t)}function Lq(t,e){for(;t.next==48||t.next==49;)t.advance();e&&t.next==e&&t.advance()}function $q(t,e){for(;;){if(t.next==46){if(e)break;e=!0}else if(t.next<48||t.next>57)break;t.advance()}if(t.next==69||t.next==101)for(t.advance(),(t.next==43||t.next==45)&&t.advance();t.next>=48&&t.next<=57;)t.advance()}function Bq(t){for(;!(t.next<0||t.next==10);)t.advance()}function Mv(t,e){for(let n=0;n<e.length;n++)if(e.charCodeAt(n)==t)return!0;return!1}const nR=` 	\r
`;function cse(t,e,n){let r=Object.create(null);r.true=r.false=f4e,r.null=r.unknown=d4e;for(let i of t.split(" "))i&&(r[i]=lse);for(let i of e.split(" "))i&&(r[i]=use);for(let i of(n||"").split(" "))i&&(r[i]=A4e);return r}const hse="array binary bit boolean char character clob date decimal double float int integer interval large national nchar nclob numeric object precision real smallint time timestamp varchar varying ",fse="absolute action add after all allocate alter and any are as asc assertion at authorization before begin between both breadth by call cascade cascaded case cast catalog check close collate collation column commit condition connect connection constraint constraints constructor continue corresponding count create cross cube current current_date current_default_transform_group current_transform_group_for_type current_path current_role current_time current_timestamp current_user cursor cycle data day deallocate declare default deferrable deferred delete depth deref desc describe descriptor deterministic diagnostics disconnect distinct do domain drop dynamic each else elseif end end-exec equals escape except exception exec execute exists exit external fetch first for foreign found from free full function general get global go goto grant group grouping handle having hold hour identity if immediate in indicator initially inner inout input insert intersect into is isolation join key language last lateral leading leave left level like limit local localtime localtimestamp locator loop map match method minute modifies module month names natural nesting new next no none not of old on only open option or order ordinality out outer output overlaps pad parameter partial path prepare preserve primary prior privileges procedure public read reads recursive redo ref references referencing relative release repeat resignal restrict result return returns revoke right role rollback rollup routine row rows savepoint schema scroll search second section select session session_user set sets signal similar size some space specific specifictype sql sqlexception sqlstate sqlwarning start state static system_user table temporary then timezone_hour timezone_minute to trailing transaction translation treat trigger under undo union unique unnest until update usage user using value values view when whenever where while with without work write year zone ",_9={backslashEscapes:!1,hashComments:!1,spaceAfterDashes:!1,slashComments:!1,doubleQuotedStrings:!1,doubleDollarQuotedStrings:!1,unquotedBitLiterals:!1,treatBitsAsBytes:!1,charSetCasts:!1,plsqlQuotingMechanism:!1,operatorChars:"*+-%<>!=&|~^/",specialVar:"?",identifierQuotes:'"',caseInsensitiveIdentifiers:!1,words:cse(fse,hse)};function I4e(t,e,n,r){let i={};for(let s in _9)i[s]=(t.hasOwnProperty(s)?t:_9)[s];return e&&(i.words=cse(e,n||"",r)),i}function dse(t){return new Mc(e=>{var n;let{next:r}=e;if(e.advance(),Mv(r,nR)){for(;Mv(e.next,nR);)e.advance();e.acceptToken(c4e)}else if(r==36&&t.doubleDollarQuotedStrings){let i=b9(e,"");e.next==36&&(e.advance(),T4e(e,i),e.acceptToken(Sx))}else if(r==39||r==34&&t.doubleQuotedStrings)$v(e,r,t.backslashEscapes),e.acceptToken(Sx);else if(r==35&&t.hashComments||r==47&&e.next==47&&t.slashComments)Bq(e),e.acceptToken(Mq);else if(r==45&&e.next==45&&(!t.spaceAfterDashes||e.peek(1)==32))Bq(e),e.acceptToken(Mq);else if(r==47&&e.next==42){e.advance();for(let i=1;;){let s=e.next;if(e.next<0)break;if(e.advance(),s==42&&e.next==47){if(i--,e.advance(),!i)break}else s==47&&e.next==42&&(i++,e.advance())}e.acceptToken(h4e)}else if((r==101||r==69)&&e.next==39)e.advance(),$v(e,39,!0),e.acceptToken(Sx);else if((r==110||r==78)&&e.next==39&&t.charSetCasts)e.advance(),$v(e,39,t.backslashEscapes),e.acceptToken(Sx);else if(r==95&&t.charSetCasts)for(let i=0;;i++){if(e.next==39&&i>1){e.advance(),$v(e,39,t.backslashEscapes),e.acceptToken(Sx);break}if(!v9(e.next))break;e.advance()}else if(t.plsqlQuotingMechanism&&(r==113||r==81)&&e.next==39&&e.peek(1)>0&&!Mv(e.peek(1),nR)){let i=e.peek(1);e.advance(2),P4e(e,i),e.acceptToken(Sx)}else if(Mv(r,t.identifierQuotes)){const i=r==91?93:r;$v(e,i,!1),e.acceptToken(k4e)}else if(r==40)e.acceptToken(p4e);else if(r==41)e.acceptToken(m4e);else if(r==123)e.acceptToken(g4e);else if(r==125)e.acceptToken(y4e);else if(r==91)e.acceptToken(v4e);else if(r==93)e.acceptToken(b4e);else if(r==59)e.acceptToken(_4e);else if(t.unquotedBitLiterals&&r==48&&e.next==98)e.advance(),Lq(e),e.acceptToken(Fq);else if((r==98||r==66)&&(e.next==39||e.next==34)){const i=e.next;e.advance(),t.treatBitsAsBytes?($v(e,i,t.backslashEscapes),e.acceptToken(C4e)):(Lq(e,i),e.acceptToken(Fq))}else if(r==48&&(e.next==120||e.next==88)||(r==120||r==88)&&e.next==39){let i=e.next==39;for(e.advance();E4e(e.next);)e.advance();i&&e.next==39&&e.advance(),e.acceptToken(tR)}else if(r==46&&e.next>=48&&e.next<=57)$q(e,!0),e.acceptToken(tR);else if(r==46)e.acceptToken(x4e);else if(r>=48&&r<=57)$q(e,!1),e.acceptToken(tR);else if(Mv(r,t.operatorChars)){for(;Mv(e.next,t.operatorChars);)e.advance();e.acceptToken(w4e)}else if(Mv(r,t.specialVar))e.next==r&&e.advance(),D4e(e),e.acceptToken(S4e);else if(r==58||r==44)e.acceptToken(O4e);else if(v9(r)){let i=b9(e,String.fromCharCode(r));e.acceptToken(e.next==46||e.peek(-i.length-1)==46?Rq:(n=t.words[i.toLowerCase()])!==null&&n!==void 0?n:Rq)}})}const pse=dse(_9),M4e=c0.deserialize({version:14,states:"%vQ]QQOOO#wQRO'#DSO$OQQO'#CwO%eQQO'#CxO%lQQO'#CyO%sQQO'#CzOOQQ'#DS'#DSOOQQ'#C}'#C}O'UQRO'#C{OOQQ'#Cv'#CvOOQQ'#C|'#C|Q]QQOOQOQQOOO'`QQO'#DOO(xQRO,59cO)PQQO,59cO)UQQO'#DSOOQQ,59d,59dO)cQQO,59dOOQQ,59e,59eO)jQQO,59eOOQQ,59f,59fO)qQQO,59fOOQQ-E6{-E6{OOQQ,59b,59bOOQQ-E6z-E6zOOQQ,59j,59jOOQQ-E6|-E6|O+VQRO1G.}O+^QQO,59cOOQQ1G/O1G/OOOQQ1G/P1G/POOQQ1G/Q1G/QP+kQQO'#C}O+rQQO1G.}O)PQQO,59cO,PQQO'#Cw",stateData:",[~OtOSPOSQOS~ORUOSUOTUOUUOVROXSOZTO]XO^QO_UO`UOaPObPOcPOdUOeUOfUOgUOhUO~O^]ORvXSvXTvXUvXVvXXvXZvX]vX_vX`vXavXbvXcvXdvXevXfvXgvXhvX~OsvX~P!jOa_Ob_Oc_O~ORUOSUOTUOUUOVROXSOZTO^tO_UO`UOa`Ob`Oc`OdUOeUOfUOgUOhUO~OWaO~P$ZOYcO~P$ZO[eO~P$ZORUOSUOTUOUUOVROXSOZTO^QO_UO`UOaPObPOcPOdUOeUOfUOgUOhUO~O]hOsoX~P%zOajObjOcjO~O^]ORkaSkaTkaUkaVkaXkaZka]ka_ka`kaakabkackadkaekafkagkahka~Oska~P'kO^]O~OWvXYvX[vX~P!jOWnO~P$ZOYoO~P$ZO[pO~P$ZO^]ORkiSkiTkiUkiVkiXkiZki]ki_ki`kiakibkickidkiekifkigkihki~Oski~P)xOWkaYka[ka~P'kO]hO~P$ZOWkiYki[ki~P)xOasObsOcsO~O",goto:"#hwPPPPPPPPPPPPPPPPPPPPPPPPPPx||||!Y!^!d!xPPP#[TYOZeUORSTWZbdfqT[OZQZORiZSWOZQbRQdSQfTZgWbdfqQ^PWk^lmrQl_Qm`RrseVORSTWZbdfq",nodeNames:"â  LineComment BlockComment String Number Bool Null ( ) { } [ ] ; . Operator Punctuation SpecialVar Identifier QuotedIdentifier Keyword Type Bits Bytes Builtin Script Statement CompositeIdentifier Parens Braces Brackets Statement",maxTerm:38,nodeProps:[["isolate",-4,1,2,3,19,""]],skippedNodes:[0,1,2],repeatNodeCount:3,tokenData:"RORO",tokenizers:[0,pse],topRules:{Script:[0,25]},tokenPrec:0});function x9(t){let e=t.cursor().moveTo(t.from,-1);for(;/Comment/.test(e.name);)e.moveTo(e.from,-1);return e.node}function zk(t,e){let n=t.sliceString(e.from,e.to),r=/^([`'"\[])(.*)([`'"\]])$/.exec(n);return r?r[2]:n}function A6(t){return t&&(t.name=="Identifier"||t.name=="QuotedIdentifier")}function R4e(t,e){if(e.name=="CompositeIdentifier"){let n=[];for(let r=e.firstChild;r;r=r.nextSibling)A6(r)&&n.push(zk(t,r));return n}return[zk(t,e)]}function Nq(t,e){for(let n=[];;){if(!e||e.name!=".")return n;let r=x9(e);if(!A6(r))return n;n.unshift(zk(t,r)),e=x9(r)}}function F4e(t,e){let n=ws(t).resolveInner(e,-1),r=$4e(t.doc,n);return n.name=="Identifier"||n.name=="QuotedIdentifier"||n.name=="Keyword"?{from:n.from,quoted:n.name=="QuotedIdentifier"?t.doc.sliceString(n.from,n.from+1):null,parents:Nq(t.doc,x9(n)),aliases:r}:n.name=="."?{from:e,quoted:null,parents:Nq(t.doc,n),aliases:r}:{from:e,quoted:null,parents:[],empty:!0,aliases:r}}const L4e=new Set("where group having order union intersect except all distinct limit offset fetch for".split(" "));function $4e(t,e){let n;for(let i=e;!n;i=i.parent){if(!i)return null;i.name=="Statement"&&(n=i)}let r=null;for(let i=n.firstChild,s=!1,o=null;i;i=i.nextSibling){let a=i.name=="Keyword"?t.sliceString(i.from,i.to).toLowerCase():null,l=null;if(!s)s=a=="from";else if(a=="as"&&o&&A6(i.nextSibling))l=zk(t,i.nextSibling);else{if(a&&L4e.has(a))break;o&&A6(i)&&(l=zk(t,i))}l&&(r||(r=Object.create(null)),r[l]=R4e(t,o)),o=/Identifier$/.test(i.name)?i:null}return r}function B4e(t,e,n){return n.map(r=>({...r,label:r.label[0]==t?r.label:t+r.label+e,apply:void 0}))}const N4e=/^\w*$/,z4e=/^[`'"\[]?\w*[`'"\]]?$/;function zq(t){return t.self&&typeof t.self.label=="string"}class kN{constructor(e,n){this.idQuote=e,this.idCaseInsensitive=n,this.list=[],this.children=void 0}child(e){let n=this.children||(this.children=Object.create(null)),r=n[e];return r||(e&&!this.list.some(i=>i.label==e)&&this.list.push(Qq(e,"type",this.idQuote,this.idCaseInsensitive)),n[e]=new kN(this.idQuote,this.idCaseInsensitive))}maybeChild(e){return this.children?this.children[e]:null}addCompletion(e){let n=this.list.findIndex(r=>r.label==e.label);n>-1?this.list[n]=e:this.list.push(e)}addCompletions(e){for(let n of e)this.addCompletion(typeof n=="string"?Qq(n,"property",this.idQuote,this.idCaseInsensitive):n)}addNamespace(e){Array.isArray(e)?this.addCompletions(e):zq(e)?this.addNamespace(e.children):this.addNamespaceObject(e)}addNamespaceObject(e){for(let n of Object.keys(e)){let r=e[n],i=null,s=n.replace(/\\?\./g,a=>a=="."?"\0":a).split("\0"),o=this;zq(r)&&(i=r.self,r=r.children);for(let a=0;a<s.length;a++)i&&a==s.length-1&&o.addCompletion(i),o=o.child(s[a].replace(/\\\./g,"."));o.addNamespace(r)}}}function Qq(t,e,n,r){return new RegExp("^[a-z_][a-z_\\d]*$",r?"i":"").test(t)?{label:t,type:e}:{label:t,type:e,apply:n+t+mse(n)}}function mse(t){return t==="["?"]":t}function Q4e(t,e,n,r,i,s){var o;let a=((o=s?.spec.identifierQuotes)===null||o===void 0?void 0:o[0])||'"',l=new kN(a,!!s?.spec.caseInsensitiveIdentifiers),h=i?l.child(i):null;return l.addNamespace(t),e&&(h||l).addCompletions(e),n&&l.addCompletions(n),h&&l.addCompletions(h.list),r&&l.addCompletions((h||l).child(r).list),f=>{let{parents:p,from:g,quoted:b,empty:x,aliases:k}=F4e(f.state,f.pos);if(x&&!f.explicit)return null;k&&p.length==1&&(p=k[p[0]]||p);let T=l;for(let M of p){for(;!T.children||!T.children[M];)if(T==l&&h)T=h;else if(T==h&&r)T=T.child(r);else return null;let B=T.maybeChild(M);if(!B)return null;T=B}let I=T.list;if(T==l&&k&&(I=I.concat(Object.keys(k).map(M=>({label:M,type:"constant"})))),b){let M=b[0],B=mse(M),j=f.state.sliceDoc(f.pos,f.pos+1)==B;return{from:g,to:j?f.pos+1:void 0,options:B4e(M,B,I),validFor:z4e}}else return{from:g,options:I,validFor:N4e}}}function j4e(t){return t==use?"type":t==lse?"keyword":"variable"}function U4e(t,e,n){let r=Object.keys(t).map(i=>n(e?i.toUpperCase():i,j4e(t[i])));return Wne(["QuotedIdentifier","String","LineComment","BlockComment","."],HB(r))}let V4e=M4e.configure({props:[S1.add({Statement:Kg()}),k1.add({Statement(t,e){return{from:Math.min(t.from+100,e.doc.lineAt(t.from).to),to:t.to}},BlockComment(t){return{from:t.from+2,to:t.to-2}}}),w0({Keyword:be.keyword,Type:be.typeName,Builtin:be.standard(be.name),Bits:be.number,Bytes:be.string,Bool:be.bool,Null:be.null,Number:be.number,String:be.string,Identifier:be.name,QuotedIdentifier:be.special(be.string),SpecialVar:be.special(be.name),LineComment:be.lineComment,BlockComment:be.blockComment,Operator:be.operator,"Semi Punctuation":be.punctuation,"( )":be.paren,"{ }":be.brace,"[ ]":be.squareBracket})]});class Qk{constructor(e,n,r){this.dialect=e,this.language=n,this.spec=r}get extension(){return this.language.extension}configureLanguage(e,n){return new Qk(this.dialect,this.language.configure(e,n),this.spec)}static define(e){let n=I4e(e,e.keywords,e.types,e.builtin),r=u0.define({name:"sql",parser:V4e.configure({tokenizers:[{from:pse,to:dse(n)}]}),languageData:{commentTokens:{line:"--",block:{open:"/*",close:"*/"}},closeBrackets:{brackets:["(","[","{","'",'"',"`"]}}});return new Qk(n,r,e)}}function q4e(t,e){return{label:t,type:e,boost:-1}}function Z4e(t,e=!1,n){return U4e(t.dialect.words,e,n||q4e)}function X4e(t){return t.schema?Q4e(t.schema,t.tables,t.schemas,t.defaultTable,t.defaultSchema,t.dialect||CN):()=>null}function W4e(t){return t.schema?(t.dialect||CN).language.data.of({autocomplete:X4e(t)}):[]}function G4e(t={}){let e=t.dialect||CN;return new y1(e.language,[W4e(t),e.language.data.of({autocomplete:Z4e(e,t.upperCaseKeywords,t.keywordCompletion)})])}const CN=Qk.define({}),Y4e=Qk.define({charSetCasts:!0,doubleDollarQuotedStrings:!0,operatorChars:"+-*/<>=~!@#%^&|`?",specialVar:"",keywords:fse+"abort abs absent access according ada admin aggregate alias also always analyse analyze array_agg array_max_cardinality asensitive assert assignment asymmetric atomic attach attribute attributes avg backward base64 begin_frame begin_partition bernoulli bit_length blocked bom cache called cardinality catalog_name ceil ceiling chain char_length character_length character_set_catalog character_set_name character_set_schema characteristics characters checkpoint class class_origin cluster coalesce cobol collation_catalog collation_name collation_schema collect column_name columns command_function command_function_code comment comments committed concurrently condition_number configuration conflict connection_name constant constraint_catalog constraint_name constraint_schema contains content control conversion convert copy corr cost covar_pop covar_samp csv cume_dist current_catalog current_row current_schema cursor_name database datalink datatype datetime_interval_code datetime_interval_precision db debug defaults defined definer degree delimiter delimiters dense_rank depends derived detach detail dictionary disable discard dispatch dlnewcopy dlpreviouscopy dlurlcomplete dlurlcompleteonly dlurlcompletewrite dlurlpath dlurlpathonly dlurlpathwrite dlurlscheme dlurlserver dlvalue document dump dynamic_function dynamic_function_code element elsif empty enable encoding encrypted end_frame end_partition endexec enforced enum errcode error event every exclude excluding exclusive exp explain expression extension extract family file filter final first_value flag floor following force foreach fortran forward frame_row freeze fs functions fusion generated granted greatest groups handler header hex hierarchy hint id ignore ilike immediately immutable implementation implicit import include including increment indent index indexes info inherit inherits inline insensitive instance instantiable instead integrity intersection invoker isnull key_member key_type label lag last_value lead leakproof least length library like_regex link listen ln load location lock locked log logged lower mapping matched materialized max max_cardinality maxvalue member merge message message_length message_octet_length message_text min minvalue mod mode more move multiset mumps name namespace nfc nfd nfkc nfkd nil normalize normalized nothing notice notify notnull nowait nth_value ntile nullable nullif nulls number occurrences_regex octet_length octets off offset oids operator options ordering others over overlay overriding owned owner parallel parameter_mode parameter_name parameter_ordinal_position parameter_specific_catalog parameter_specific_name parameter_specific_schema parser partition pascal passing passthrough password percent percent_rank percentile_cont percentile_disc perform period permission pg_context pg_datatype_name pg_exception_context pg_exception_detail pg_exception_hint placing plans pli policy portion position position_regex power precedes preceding prepared print_strict_params procedural procedures program publication query quote raise range rank reassign recheck recovery refresh regr_avgx regr_avgy regr_count regr_intercept regr_r2 regr_slope regr_sxx regr_sxy regr_syy reindex rename repeatable replace replica requiring reset respect restart restore result_oid returned_cardinality returned_length returned_octet_length returned_sqlstate returning reverse routine_catalog routine_name routine_schema routines row_count row_number rowtype rule scale schema_name schemas scope scope_catalog scope_name scope_schema security selective self sensitive sequence sequences serializable server server_name setof share show simple skip slice snapshot source specific_name sqlcode sqlerror sqrt stable stacked standalone statement statistics stddev_pop stddev_samp stdin stdout storage strict strip structure style subclass_origin submultiset subscription substring substring_regex succeeds sum symmetric sysid system system_time table_name tables tablesample tablespace temp template ties token top_level_count transaction_active transactions_committed transactions_rolled_back transform transforms translate translate_regex trigger_catalog trigger_name trigger_schema trim trim_array truncate trusted type types uescape unbounded uncommitted unencrypted unlink unlisten unlogged unnamed untyped upper uri use_column use_variable user_defined_type_catalog user_defined_type_code user_defined_type_name user_defined_type_schema vacuum valid validate validator value_of var_pop var_samp varbinary variable_conflict variadic verbose version versioning views volatile warning whitespace width_bucket window within wrapper xmlagg xmlattributes xmlbinary xmlcast xmlcomment xmlconcat xmldeclaration xmldocument xmlelement xmlexists xmlforest xmliterate xmlnamespaces xmlparse xmlpi xmlquery xmlroot xmlschema xmlserialize xmltable xmltext xmlvalidate yes",types:hse+"bigint int8 bigserial serial8 varbit bool box bytea cidr circle precision float8 inet int4 json jsonb line lseg macaddr macaddr8 money numeric pg_lsn point polygon float4 int2 smallserial serial2 serial serial4 text timetz timestamptz tsquery tsvector txid_snapshot uuid xml"});function l_(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var T5={exports:{}},H4e=T5.exports,jq;function K4e(){return jq||(jq=1,(function(t){(function(e,n){t.exports?t.exports=n():e.log=n()})(H4e,function(){var e=function(){},n="undefined",r=typeof window!==n&&typeof window.navigator!==n&&/Trident\/|MSIE /.test(window.navigator.userAgent),i=["trace","debug","info","warn","error"],s={},o=null;function a(k,T){var I=k[T];if(typeof I.bind=="function")return I.bind(k);try{return Function.prototype.bind.call(I,k)}catch{return function(){return Function.prototype.apply.apply(I,[k,arguments])}}}function l(){console.log&&(console.log.apply?console.log.apply(console,arguments):Function.prototype.apply.apply(console.log,[console,arguments])),console.trace&&console.trace()}function h(k){return k==="debug"&&(k="log"),typeof console===n?!1:k==="trace"&&r?l:console[k]!==void 0?a(console,k):console.log!==void 0?a(console,"log"):e}function f(){for(var k=this.getLevel(),T=0;T<i.length;T++){var I=i[T];this[I]=T<k?e:this.methodFactory(I,k,this.name)}if(this.log=this.debug,typeof console===n&&k<this.levels.SILENT)return"No console available for logging"}function p(k){return function(){typeof console!==n&&(f.call(this),this[k].apply(this,arguments))}}function g(k,T,I){return h(k)||p.apply(this,arguments)}function b(k,T){var I=this,M,B,j,Q="loglevel";typeof k=="string"?Q+=":"+k:typeof k=="symbol"&&(Q=void 0);function Z(ae){var ce=(i[ae]||"silent").toUpperCase();if(!(typeof window===n||!Q)){try{window.localStorage[Q]=ce;return}catch{}try{window.document.cookie=encodeURIComponent(Q)+"="+ce+";"}catch{}}}function q(){var ae;if(!(typeof window===n||!Q)){try{ae=window.localStorage[Q]}catch{}if(typeof ae===n)try{var ce=window.document.cookie,se=encodeURIComponent(Q),ge=ce.indexOf(se+"=");ge!==-1&&(ae=/^([^;]+)/.exec(ce.slice(ge+se.length+1))[1])}catch{}return I.levels[ae]===void 0&&(ae=void 0),ae}}function J(){if(!(typeof window===n||!Q)){try{window.localStorage.removeItem(Q)}catch{}try{window.document.cookie=encodeURIComponent(Q)+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC"}catch{}}}function oe(ae){var ce=ae;if(typeof ce=="string"&&I.levels[ce.toUpperCase()]!==void 0&&(ce=I.levels[ce.toUpperCase()]),typeof ce=="number"&&ce>=0&&ce<=I.levels.SILENT)return ce;throw new TypeError("log.setLevel() called with invalid level: "+ae)}I.name=k,I.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},I.methodFactory=T||g,I.getLevel=function(){return j??B??M},I.setLevel=function(ae,ce){return j=oe(ae),ce!==!1&&Z(j),f.call(I)},I.setDefaultLevel=function(ae){B=oe(ae),q()||I.setLevel(ae,!1)},I.resetLevel=function(){j=null,J(),f.call(I)},I.enableAll=function(ae){I.setLevel(I.levels.TRACE,ae)},I.disableAll=function(ae){I.setLevel(I.levels.SILENT,ae)},I.rebuild=function(){if(o!==I&&(M=oe(o.getLevel())),f.call(I),o===I)for(var ae in s)s[ae].rebuild()},M=oe(o?o.getLevel():"WARN");var me=q();me!=null&&(j=oe(me)),f.call(I)}o=new b,o.getLogger=function(T){if(typeof T!="symbol"&&typeof T!="string"||T==="")throw new TypeError("You must supply a name when creating a logger.");var I=s[T];return I||(I=s[T]=new b(T,o.methodFactory)),I};var x=typeof window!==n?window.log:void 0;return o.noConflict=function(){return typeof window!==n&&window.log===o&&(window.log=x),o},o.getLoggers=function(){return s},o.default=o,o})})(T5)),T5.exports}var J4e=K4e();const gse=l_(J4e);gse.setLevel("silent");const To=gse,Zr={STRING:"String",NUMBER:"Number",TRUE:"True",FALSE:"False",NULL:"Null",OBJECT:"Object",ARRAY:"Array",PROPERTY:"Property",PROPERTY_NAME:"PropertyName",PROPERTY_COLON:"PropertyColon",ITEM:"Item",JSON_TEXT:"JsonText",INVALID:"â "},e5e={Pair:Zr.PROPERTY,Key:Zr.PROPERTY_NAME,BlockSequence:Zr.ARRAY,BlockMapping:Zr.OBJECT,FlowSequence:Zr.ARRAY,FlowMapping:Zr.OBJECT,QuotedLiteral:Zr.STRING,Literal:Zr.STRING,Stream:Zr.JSON_TEXT,Document:Zr.OBJECT},t5e={File:Zr.JSON_TEXT},AN=[Zr.STRING,Zr.NUMBER,Zr.TRUE,Zr.FALSE,Zr.NULL],yse=[Zr.OBJECT,Zr.ARRAY,Zr.ITEM],Ws={JSON5:"json5",JSON:"json4",YAML:"yaml"},oa=(t,e)=>{var n,r;switch(e){case Ws.YAML:return(n=e5e[t])!==null&&n!==void 0?n:t;case Ws.JSON5:return(r=t5e[t])!==null&&r!==void 0?r:t;default:return t}};function vse(t,e,n){const r=[];for(let i=e;i?.parent;i=i.parent)switch(oa(i.parent.name,n)){case Zr.PROPERTY:{const s=w9(i.parent,Zr.PROPERTY_NAME,n);if(s){let o=Vx(t,s).replace(/[/~]/g,a=>a==="~"?"~0":"~1");r.unshift(o)}break}case Zr.ARRAY:{if(r5e(i,n)){const s=xse(i.parent,i,n);r.unshift(`${s}`)}break}}return r.length===0?"":"/"+r.join("/")}const bse=(t,e,n=-1,r)=>vse(t.doc,ws(t).resolve(e,n),r),EN=(t,e)=>{const n=ws(t),r=new Map;return n.iterate({enter:i=>{var s,o,a,l,h,f,p,g;if([Zr.PROPERTY_NAME,Zr.OBJECT].includes(oa(i.name,e))){const b=vse(t.doc,i.node,e),{from:x,to:k}=i.node;if(!(!((o=(s=i.node)===null||s===void 0?void 0:s.nextSibling)===null||o===void 0)&&o.node))return r.set(b,{keyFrom:x,keyTo:k}),!0;const T=e===Ws.JSON?(l=(a=i.node)===null||a===void 0?void 0:a.nextSibling)===null||l===void 0?void 0:l.node:(g=(p=(f=(h=i.node)===null||h===void 0?void 0:h.nextSibling)===null||f===void 0?void 0:f.node)===null||p===void 0?void 0:p.nextSibling)===null||g===void 0?void 0:g.node;if(!T)return r.set(b,{keyFrom:x,keyTo:k}),!0;const{from:I,to:M}=T;return r.set(b,{keyFrom:x,keyTo:k,valueFrom:I,valueTo:M}),!0}}}),r},rR=(t,e,n=-1)=>ws(t).resolveInner(e,n),P5=t=>t.replace(/^"(.*)"$/,"$1").replace(/^'(.*)'$/,"$1"),n5e=t=>t.replace(/^"(.*)"$/,"'$1'"),Vx=(t,e,n=!0,r=!0)=>{const i=e?t.sliceString(e.from,e.to):"";return n?r?P5(i):i.replace(/(^["'])|(["']$)/g,""):i},_se=(t,e)=>{var n,r,i,s;return oa(t.name,e)===Zr.INVALID&&(oa((r=(n=t.prevSibling)===null||n===void 0?void 0:n.name)!==null&&r!==void 0?r:"",e)===Zr.PROPERTY_NAME||oa((s=(i=t.prevSibling)===null||i===void 0?void 0:i.name)!==null&&s!==void 0?s:"",e)===Zr.PROPERTY_COLON)},D5=(t,e)=>AN.includes(oa(t.name,e))||_se(t,e),r5e=(t,e)=>[...AN,...yse].includes(oa(t.name,e))||_se(t,e),g4=(t,e)=>{var n,r,i,s,o,a;return oa(t.name,e)===Zr.PROPERTY_NAME||oa(t.name,e)===Zr.INVALID&&(oa((r=(n=t.prevSibling)===null||n===void 0?void 0:n.name)!==null&&r!==void 0?r:"",e)===Zr.PROPERTY||oa((s=(i=t.prevSibling)===null||i===void 0?void 0:i.name)!==null&&s!==void 0?s:"",e)==="{")||e===Ws.YAML&&oa((a=(o=t.parent)===null||o===void 0?void 0:o.name)!==null&&a!==void 0?a:"",e)===Zr.OBJECT},jC=t=>{const e=[];let n=t.firstChild;for(;n;)n&&e.push(n),n=n?.nextSibling;return e},i5e=(t,e,n)=>jC(t).filter(r=>oa(r.name,n)===e),w9=(t,e,n)=>{var r;return(r=jC(t).find(i=>oa(i.name,n)===e))!==null&&r!==void 0?r:null},Uq=(t,e)=>jC(t).find(n=>D5(n,e)),s5e=(t,e)=>jC(t).filter(n=>AN.includes(oa(n.name,e))||yse.includes(oa(n.name,e))),xse=(t,e,n)=>s5e(t,n).findIndex(r=>r.from===e.from&&r.to===e.to),Vq=(t,e,n,r=1/0)=>{let i=t;for(;i&&r>0;){if(oa(i.name,n)===e)return i;i=i.parent,r--}return null},o5e=Yr.define(),E6=Aa.define({create(){},update(t,e){for(const n of e.effects)if(n.is(o5e))return n.value;return t}}),TN=t=>t.field(E6),wse=t=>[E6.init(()=>t)],a5e={AdditionalItemsError:"Array at `{{pointer}}` may not have an additional item `{{key}}`",AdditionalPropertiesError:"Additional property `{{property}}` on `{{pointer}}` does not match schema `{{schema}}`",AllOfError:"Value `{{value}}` at `{{pointer}}` does not match schema of `{{allOf}}`",AnyOfError:"Value `{{value}}` at `{{pointer}}` does not match any schema of `{{anyOf}}`",ConstError:"Expected value at `{{pointer}}` to be `{{expected}}`, but value given is `{{value}}`",containsAnyError:"The array at `{{pointer}}` must contain at least one item",ContainsArrayError:"The property at `{{pointer}}` must not be an array",ContainsError:"The array at `{{pointer}}` must contain an element that matches `{{schema}}`",EnumError:"Expected given value `{{value}}` in `{{pointer}}` to be one of `{{values}}`",ForbiddenPropertyError:"Property name `{{property}}` at `{{pointer}}` is not allowed",FormatDateError:"Value `{{value}}` at `{{pointer}}` is not a valid date",FormatDateTimeError:"Value `{{value}}` at `{{pointer}}` is not a valid date-time",FormatEmailError:"Value `{{value}}` at `{{pointer}}` is not a valid email",FormatHostnameError:"Value `{{value}}` at `{{pointer}}` is not a valid hostname",FormatIPV4Error:"Value `{{value}}` at `{{pointer}}` is not a valid IPv4 address",FormatIPV4LeadingZeroError:"IPv4 addresses starting with zero are invalid, since they are interpreted as octals",FormatIPV6Error:"Value `{{value}}` at `{{pointer}}` is not a valid IPv6 address",FormatIPV6LeadingZeroError:"IPv6 addresses starting with zero are invalid, since they are interpreted as octals",FormatJsonPointerError:"Value `{{value}}` at `{{pointer}}` is not a valid json-pointer",FormatRegExError:"Value `{{value}}` at `{{pointer}}` is not a valid regular expression",FormatTimeError:"Value `{{value}}` at `{{pointer}}` is not a valid time",FormatURIError:"Value `{{value}}` at `{{pointer}}` is not a valid uri",FormatURIReferenceError:"Value `{{value}}` at `{{pointer}}` is not a valid uri-reference",FormatURITemplateError:"Value `{{value}}` at `{{pointer}}` is not a valid uri-template",FormatURLError:"Value `{{value}}` at `{{pointer}}` is not a valid url",InvalidDataError:"No value may be specified in `{{pointer}}`",InvalidPropertyNameError:"Invalid property name `{{property}}` at `{{pointer}}`",MaximumError:"Value in `{{pointer}}` is `{{length}}`, but should be `{{maximum}}` at maximum",MaxItemsError:"Too many items in `{{pointer}}`, should be `{{maximum}}` at most, but got `{{length}}`",MaxLengthError:"Value `{{pointer}}` should have a maximum length of `{{maxLength}}`, but got `{{length}}`.",MaxPropertiesError:"Too many properties in `{{pointer}}`, should be `{{maximum}}` at most, but got `{{length}}`",MinimumError:"Value in `{{pointer}}` is `{{length}}`, but should be `{{minimum}}` at minimum",MinItemsError:"Too few items in `{{pointer}}`, should be at least `{{minItems}}`, but got `{{length}}`",MinItemsOneError:"At least one item is required in `{{pointer}}`",MinLengthError:"Value `{{pointer}}` should have a minimum length of `{{minLength}}`, but got `{{length}}`.",MinLengthOneError:"A value is required in `{{pointer}}`",MinPropertiesError:"Too few properties in `{{pointer}}`, should be at least `{{minimum}}`, but got `{{length}}`",MissingDependencyError:"The required propery '{{missingProperty}}' in `{{pointer}}` is missing",MissingOneOfPropertyError:"Value at `{{pointer}}` property: `{{property}}`",MultipleOfError:"Expected `{{value}}` in `{{pointer}}` to be multiple of `{{multipleOf}}`",MultipleOneOfError:"Value `{{value}}` should not match multiple schemas in oneOf `{{matches}}`",NoAdditionalPropertiesError:"Additional property `{{property}}` in `{{pointer}}` is not allowed",NotError:"Value `{{value}}` at pointer should not match schema `{{not}}`",OneOfError:"Value `{{value}}` in `{{pointer}}` does not match any given oneof schema",OneOfPropertyError:"Failed finding a matching oneOfProperty schema in `{{pointer}}` where `{{property}}` matches `{{value}}`",PatternError:"Value in `{{pointer}}` should match `{{description}}`, but received `{{received}}`",PatternPropertiesError:"Property `{{key}}` does not match any patterns in `{{pointer}}`. Valid patterns are: {{patterns}}",RequiredPropertyError:"The required property `{{key}}` is missing at `{{pointer}}`",SchemaWarning:"Failed retrieving a schema from '{{pointer}}' to key '{{key}}'",TypeError:"Expected `{{value}}` ({{received}}) in `{{pointer}}` to be of type `{{expected}}`",UndefinedValueError:"Value must not be undefined in `{{pointer}}`",UniqueItemsError:"Items in array must be unique. Value `{{value}}` in `{{pointer}}` is a duplicate of {{duplicatePointer}}.",UnknownPropertyError:"Could not find a valid schema for property `{{pointer}}` within object",ValueNotEmptyError:"A value for `{{property}}` is required at `{{pointer}}`"},l5e=Object.prototype.toString;function Yi(t){const e=l5e.call(t).match(/\s([^\]]+)\]/).pop().toLowerCase();return e==="file"?"object":e}const u5e="object",c5e="array";function h5e(t,e={}){return t.replace(/\{\{\w+\}\}/g,n=>{const r=n.replace(/[{}]/g,""),i=e[r],s=Yi(i);return s===u5e||s===c5e?JSON.stringify(i):i})}function f5e(t,e,n=t){var r;const i=(r=a5e[t])!==null&&r!==void 0?r:n;return h5e(i,e)}function d5e(t){return t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function p5e(t,e){return{type:"error",name:t,code:d5e(t),message:f5e(t,e),data:e}}function er(t){return p5e.bind(null,t)}function jk(t,e=[]){for(let n=0;n<t.length;n+=1){const r=t[n];Array.isArray(r)?jk(r,e):e.push(r)}return e}const eO={DECLARATOR_ONEOF:"oneOfProperty",GET_TEMPLATE_RECURSION_LIMIT:1,propertyBlacklist:["_id"],templateDefaultOptions:{addOptionalProps:!1,removeInvalidData:!1,extendDefaults:!0}};function q3(t,e,n){const r={...e};return Object.defineProperty(r,"getOneOfOrigin",{enumerable:!1,value:()=>({index:n,schema:t})}),r}function au(t){return t?.type==="error"}function m5e(t){return t instanceof Promise}function T6(t){return au(t)||m5e(t)}const{DECLARATOR_ONEOF:Sw}=eO;function Ose(t,e,n=t.rootSchema,r="#"){if(e!=null&&n[Sw]){const o=[],a=n[Sw],l=e[n[Sw]];if(l===void 0)return t.errors.missingOneOfPropertyError({property:a,pointer:r,schema:n,value:e});for(let h=0;h<n.oneOf.length;h+=1){const f=t.resolveRef(n.oneOf[h]),p=t.step(a,f,e,r);if(au(p))return p;let g=jk(t.validate(l,p,r));if(g=g.filter(T6),g.length>0)o.push(...g);else return q3(n,f,h)}return t.errors.oneOfPropertyError({property:a,value:l,pointer:r,schema:n,errors:o})}const i=[],s=[];for(let o=0;o<n.oneOf.length;o+=1){const a=t.resolveRef(n.oneOf[o]);let l=jk(t.validate(e,a,r));l=l.filter(T6),l.length>0?s.push(...l):i.push({index:o,schema:a})}return i.length===1?q3(n,i[0].schema,i[0].index):i.length>1?t.errors.multipleOneOfError({value:e,pointer:r,schema:n,matches:i}):t.errors.oneOfError({value:JSON.stringify(e),pointer:r,schema:n,oneOf:n.oneOf,errors:s})}function g5e(t,e,n,r){if(n==null||e.properties==null)return-1;let i=0;const s=Object.keys(e.properties);for(let o=0;o<s.length;o+=1){const a=s[o];n[a]!=null&&t.isValid(n[a],e.properties[a],r)&&(i+=1)}return i}function PN(t,e,n=t.rootSchema,r="#"){if(e!=null&&n[Sw]){const s=[],o=n[Sw],a=e[n[Sw]];if(a===void 0)return t.errors.missingOneOfPropertyError({property:o,pointer:r,schema:n,value:e});for(let l=0;l<n.oneOf.length;l+=1){const h=t.resolveRef(n.oneOf[l]),f=t.step(o,h,e,r);if(au(f))return f;let p=jk(t.validate(a,f,r));if(p=p.filter(T6),p.length>0)s.push(...p);else return q3(n,h,l)}return t.errors.oneOfPropertyError({property:o,value:a,pointer:r,schema:n,errors:s})}const i=[];for(let s=0;s<n.oneOf.length;s+=1){const o=t.resolveRef(n.oneOf[s]);t.isValid(e,o,r)&&i.push({schema:o,index:s})}if(i.length===1)return q3(n,i[0].schema,i[0].index);if(Yi(e)==="object"){let s,o=-1,a=0;for(let l=0;l<n.oneOf.length;l+=1){const h=t.resolveRef(n.oneOf[l]),f=g5e(t,h,e);a<f&&(a=f,s=n.oneOf[l],o=l)}return s===void 0?t.errors.oneOfError({value:JSON.stringify(e),pointer:r,schema:n,oneOf:n.oneOf}):q3(n,s,o)}return i.length>1?t.errors.multipleOneOfError({matches:i,pointer:r,schema:n,value:e}):t.errors.oneOfError({value:JSON.stringify(e),pointer:r,schema:n,oneOf:n.oneOf})}const y5e=(t,e,n,r)=>{if(Array.isArray(e.oneOf)){const i=t.resolveOneOf(n,e,r);if(au(i))return i}};var iR,qq;function v5e(){if(qq)return iR;qq=1;var t=function(M){return e(M)&&!n(M)};function e(I){return!!I&&typeof I=="object"}function n(I){var M=Object.prototype.toString.call(I);return M==="[object RegExp]"||M==="[object Date]"||s(I)}var r=typeof Symbol=="function"&&Symbol.for,i=r?Symbol.for("react.element"):60103;function s(I){return I.$$typeof===i}function o(I){return Array.isArray(I)?[]:{}}function a(I,M){return M.clone!==!1&&M.isMergeableObject(I)?k(o(I),I,M):I}function l(I,M,B){return I.concat(M).map(function(j){return a(j,B)})}function h(I,M){if(!M.customMerge)return k;var B=M.customMerge(I);return typeof B=="function"?B:k}function f(I){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(I).filter(function(M){return Object.propertyIsEnumerable.call(I,M)}):[]}function p(I){return Object.keys(I).concat(f(I))}function g(I,M){try{return M in I}catch{return!1}}function b(I,M){return g(I,M)&&!(Object.hasOwnProperty.call(I,M)&&Object.propertyIsEnumerable.call(I,M))}function x(I,M,B){var j={};return B.isMergeableObject(I)&&p(I).forEach(function(Q){j[Q]=a(I[Q],B)}),p(M).forEach(function(Q){b(I,Q)||(g(I,Q)&&B.isMergeableObject(M[Q])?j[Q]=h(Q,B)(I[Q],M[Q],B):j[Q]=a(M[Q],B))}),j}function k(I,M,B){B=B||{},B.arrayMerge=B.arrayMerge||l,B.isMergeableObject=B.isMergeableObject||t,B.cloneUnlessOtherwiseSpecified=a;var j=Array.isArray(M),Q=Array.isArray(I),Z=j===Q;return Z?j?B.arrayMerge(I,M,B):x(I,M,B):a(M,B)}k.all=function(M,B){if(!Array.isArray(M))throw new Error("first argument should be an array");return M.reduce(function(j,Q){return k(j,Q,B)},{})};var T=k;return iR=T,iR}var b5e=v5e();const Sse=l_(b5e),_5e=(t,e)=>e,DN=(t,e)=>Sse(t,e,{arrayMerge:_5e}),x5e=(t,e)=>{const n=t.concat(e);return n.filter((r,i)=>n.indexOf(r)===i)},w5e=(t,e)=>Sse(t,e,{arrayMerge:x5e});function Eu(t,e){const n=Yi(t),r=Yi(e);if(n!==r)return t;const i=w5e(t,e);return t.getOneOfOrigin?Object.defineProperty(i,"getOneOfOrigin",{enumerable:!1,value:t.getOneOfOrigin}):e.getOneOfOrigin&&Object.defineProperty(i,"getOneOfOrigin",{enumerable:!1,value:e.getOneOfOrigin}),i}function Uk(t,...e){const n={};return Object.keys(t).forEach(r=>{e.includes(r)||(n[r]=t[r])}),t.getOneOfOrigin&&Object.defineProperty(n,"getOneOfOrigin",{enumerable:!1,value:t.getOneOfOrigin}),n}var O5e=Function.prototype.toString,sR=Object.create,S5e=Object.prototype.toString,k5e=(function(){function t(){this._keys=[],this._values=[]}return t.prototype.has=function(e){return!!~this._keys.indexOf(e)},t.prototype.get=function(e){return this._values[this._keys.indexOf(e)]},t.prototype.set=function(e,n){this._keys.push(e),this._values.push(n)},t})();function C5e(){return new k5e}function A5e(){return new WeakMap}var E5e=typeof WeakMap<"u"?A5e:C5e;function IN(t){if(!t)return sR(null);var e=t.constructor;if(e===Object)return t===Object.prototype?{}:sR(t);if(e&&~O5e.call(e).indexOf("[native code]"))try{return new e}catch{}return sR(t)}function T5e(t){var e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e}function P5e(t){return t.flags}var D5e=/test/g.flags==="g"?P5e:T5e;function kse(t){var e=S5e.call(t);return e.substring(8,e.length-1)}function I5e(t){return t[Symbol.toStringTag]||kse(t)}var M5e=typeof Symbol<"u"?I5e:kse,R5e=Object.defineProperty,F5e=Object.getOwnPropertyDescriptor,Cse=Object.getOwnPropertyNames,MN=Object.getOwnPropertySymbols,Ase=Object.prototype,Ese=Ase.hasOwnProperty,L5e=Ase.propertyIsEnumerable,Tse=typeof MN=="function";function $5e(t){return Cse(t).concat(MN(t))}var B5e=Tse?$5e:Cse;function CD(t,e,n){for(var r=B5e(t),i=0,s=r.length,o=void 0,a=void 0;i<s;++i)if(o=r[i],!(o==="callee"||o==="caller")){if(a=F5e(t,o),!a){e[o]=n.copier(t[o],n);continue}!a.get&&!a.set&&(a.value=n.copier(a.value,n));try{R5e(e,o,a)}catch{e[o]=a.value}}return e}function N5e(t,e){var n=new e.Constructor;e.cache.set(t,n);for(var r=0,i=t.length;r<i;++r)n[r]=e.copier(t[r],e);return n}function z5e(t,e){var n=new e.Constructor;return e.cache.set(t,n),CD(t,n,e)}function Pse(t,e){return t.slice(0)}function Q5e(t,e){return t.slice(0,t.size,t.type)}function j5e(t,e){return new e.Constructor(Pse(t.buffer))}function U5e(t,e){return new e.Constructor(t.getTime())}function Dse(t,e){var n=new e.Constructor;return e.cache.set(t,n),t.forEach(function(r,i){n.set(i,e.copier(r,e))}),n}function V5e(t,e){return CD(t,Dse(t,e),e)}function q5e(t,e){var n=IN(e.prototype);e.cache.set(t,n);for(var r in t)Ese.call(t,r)&&(n[r]=e.copier(t[r],e));return n}function Z5e(t,e){var n=IN(e.prototype);e.cache.set(t,n);for(var r in t)Ese.call(t,r)&&(n[r]=e.copier(t[r],e));for(var i=MN(t),s=0,o=i.length,a=void 0;s<o;++s)a=i[s],L5e.call(t,a)&&(n[a]=e.copier(t[a],e));return n}var X5e=Tse?Z5e:q5e;function W5e(t,e){var n=IN(e.prototype);return e.cache.set(t,n),CD(t,n,e)}function oR(t,e){return new e.Constructor(t.valueOf())}function G5e(t,e){var n=new e.Constructor(t.source,D5e(t));return n.lastIndex=t.lastIndex,n}function I5(t,e){return t}function Ise(t,e){var n=new e.Constructor;return e.cache.set(t,n),t.forEach(function(r){n.add(e.copier(r,e))}),n}function Y5e(t,e){return CD(t,Ise(t,e),e)}var H5e=Array.isArray,RN=Object.assign,K5e=Object.getPrototypeOf||(function(t){return t.__proto__}),Mse={array:N5e,arrayBuffer:Pse,blob:Q5e,dataView:j5e,date:U5e,error:I5,map:Dse,object:X5e,regExp:G5e,set:Ise},J5e=RN({},Mse,{array:z5e,map:V5e,object:W5e,set:Y5e});function eTe(t){return{Arguments:t.object,Array:t.array,ArrayBuffer:t.arrayBuffer,Blob:t.blob,Boolean:oR,DataView:t.dataView,Date:t.date,Error:t.error,Float32Array:t.arrayBuffer,Float64Array:t.arrayBuffer,Int8Array:t.arrayBuffer,Int16Array:t.arrayBuffer,Int32Array:t.arrayBuffer,Map:t.map,Number:oR,Object:t.object,Promise:I5,RegExp:t.regExp,Set:t.set,String:oR,WeakMap:I5,WeakSet:I5,Uint8Array:t.arrayBuffer,Uint8ClampedArray:t.arrayBuffer,Uint16Array:t.arrayBuffer,Uint32Array:t.arrayBuffer,Uint64Array:t.arrayBuffer}}function Rse(t){var e=RN({},Mse,t),n=eTe(e),r=n.Array,i=n.Object;function s(o,a){if(a.prototype=a.Constructor=void 0,!o||typeof o!="object")return o;if(a.cache.has(o))return a.cache.get(o);if(a.prototype=K5e(o),a.Constructor=a.prototype&&a.prototype.constructor,!a.Constructor||a.Constructor===Object)return i(o,a);if(H5e(o))return r(o,a);var l=n[M5e(o)];return l?l(o,a):typeof o.then=="function"?o:i(o,a)}return function(a){return s(a,{Constructor:void 0,cache:E5e(),copier:s,prototype:void 0})}}function tTe(t){return Rse(RN({},J5e,t))}tTe({});var P6=Rse({});function AD(t,e,n){if(e.if!=null){if(e.if===!1)return e.else;if(e.if&&(e.then||e.else)){const r=t.validate(n,t.resolveRef(e.if));if(r.length===0&&e.then)return t.resolveRef(e.then);if(r.length!==0&&e.else)return t.resolveRef(e.else)}}}const nTe=(t,e,n,r)=>{const i=AD(t,e,n);if(i)return t.validate(n,i,r)};function Fse(t,e,n){var r;const i={...(r=t.resolveRef(e))!==null&&r!==void 0?r:{}},s=AD(t,i,n);return s||Uk(i,"if","then","else")}function Lse(t,e,n=t.rootSchema){let r=P6(n);for(let i=0;i<n.allOf.length;i+=1){const s=Fse(t,n.allOf[i],e);r=Eu(r,s)}return delete r.allOf,r}function $se(t,e){const{allOf:n}=e;if(!Array.isArray(n)||n.length===0)return;let r={};return n.forEach(i=>{r=Eu(r,t.resolveRef(i))}),r}const rTe=(t,e,n,r)=>{const{allOf:i}=e;if(!Array.isArray(i)||i.length===0)return;const s=[];return e.allOf.forEach(o=>{s.push(...t.validate(n,o,r))}),s};function Bse(t,e){return t==null||t.$ref==null?t:t.getRoot?t.getRoot().getRef(t):e.getRef(t)}function iTe(t){return t.filter((e,n)=>t.indexOf(e)===n)}function Zy(t){return Yi(t)==="object"}function Nse(t,e,n){const{dependencies:r}=e;if(!Zy(r)||!Zy(n))return;let i=!1,s={required:[]};if(Object.keys(r).forEach(o=>{var a,l;if(n[o]==null&&!(!((a=e.required)===null||a===void 0)&&a.includes(o)||!((l=s.required)===null||l===void 0)&&l.includes(o)))return;const h=r[o];if(Array.isArray(h)){i=!0,s.required.push(...h);return}if(Zy(h)){i=!0,s=Eu(s,t.resolveRef(h));return}}),i)return s.required=iTe(s.required),s}const sTe=(t,e,n,r)=>{if(Yi(e.dependencies)!=="object")return;const i=[];return Object.keys(n).forEach(s=>{if(e.dependencies[s]===void 0||e.dependencies[s]===!0)return;if(e.dependencies[s]===!1){i.push(t.errors.missingDependencyError({pointer:r,schema:e,value:n}));return}let o;const a=Yi(e.dependencies[s]);if(a==="array")o=e.dependencies[s].filter(l=>n[l]===void 0).map(l=>t.errors.missingDependencyError({missingProperty:l,pointer:r,schema:e,value:n}));else if(a==="object")o=t.validate(n,e.dependencies[s],r);else throw new Error(`Invalid dependency definition for ${r}/${s}. Must be string[] or schema`);i.push(...o)}),i.length>0?i:void 0};function zse(t,e,n){if(!Array.isArray(e.anyOf)||e.anyOf.length===0)return;let r;return e.anyOf.forEach(i=>{i=t.resolveRef(i),t.isValid(n,i)&&(r=r?Eu(r,i):i)}),r}function Qse(t,e,n=t.rootSchema,r="#"){const{anyOf:i}=n;if(!Array.isArray(i)||i.length===0)return n;const s=zse(t,n,e);if(s==null)return t.errors.anyOfError({pointer:r,schema:n,value:e,anyOf:JSON.stringify(i)});const o=Eu(n,s);return Uk(o,"anyOf")}const oTe=(t,e,n,r)=>{if(!(!Array.isArray(e.anyOf)||e.anyOf.length===0)){for(let i=0;i<e.anyOf.length;i+=1)if(t.isValid(n,e.anyOf[i]))return;return t.errors.anyOfError({pointer:r,schema:e,value:n,anyOf:e.anyOf})}},Zq=["allOf","anyOf","oneOf","dependencies","if","then","else"],aTe=["allOf","anyOf","oneOf","dependencies","if"];function lTe(t){const e=Object.keys(t);return aTe.findIndex(n=>e.includes(n))!==-1}function O9(t,e,n,r){let i,s;if(e=t.resolveRef(e),e.oneOf){const f=PN(t,n,e,r);au(f)?s=f:f&&(i=Eu(i??{},f))}if(Array.isArray(e.allOf)){const f=e.allOf.map(p=>{if(lTe(p)){let g=O9(t,p,n,r);return g?(g=Eu(p,g),Uk(g,...Zq)):void 0}return p});if(f.length>0){const p=$se(t,{allOf:f});i=Eu(i??{},p)}}const o=zse(t,e,n);o&&(i=Eu(i??{},o));const a=Nse(t,e,n);a&&(i=Eu(i??{},a));const l=AD(t,e,n);if(l&&(i=Eu(i??{},l)),i==null)return s;const h=O9(t,i,n,r);return h&&(i=Eu(i,h)),Uk(i,...Zq)}const uTe=["allOf","anyOf","oneOf","dependencies","if","then","else"];function Xq(t,e,n,r){let i=O9(t,e,n,r);return i?(i=Eu(e,i),Uk(i,...uTe)):e}class jse{constructor(e,n){this.remotes={},this.errors={},this.typeKeywords={},this.validateKeyword={},this.validateType={},this.validateFormat={},this.config=e,this.typeKeywords=P6(e.typeKeywords),this.validateKeyword=Object.assign({},e.validateKeyword),this.validateType=Object.assign({},e.validateType),this.validateFormat=Object.assign({},e.validateFormat),this.errors=Object.assign({},e.errors),this.setSchema(n)}get rootSchema(){return this.__rootSchema}set rootSchema(e){e!=null&&(this.__rootSchema=this.config.compileSchema(this,e))}addRemoteSchema(e,n){this.config.addRemoteSchema(this,e,n)}compileSchema(e){var n;return this.config.compileSchema(this,e,(n=this.rootSchema)!==null&&n!==void 0?n:e)}createSchemaOf(e){return this.config.createSchemaOf(e)}each(e,n,r,i){return this.config.each(this,e,n,r,i)}eachSchema(e,n=this.rootSchema){return this.config.eachSchema(n,e)}getChildSchemaSelection(e,n){return this.config.getChildSchemaSelection(this,e,n)}getSchema(e){return this.config.getSchema(this,e)}getTemplate(e,n,r=this.config.templateDefaultOptions){return this.config.getTemplate(this,e,n,r)}isValid(e,n,r){return this.config.isValid(this,e,n,r)}resolveAnyOf(e,n,r){return this.config.resolveAnyOf(this,e,n,r)}resolveAllOf(e,n){return this.config.resolveAllOf(this,e,n)}resolveRef(e){return this.config.resolveRef(e,this.rootSchema)}resolveOneOf(e,n,r){return this.config.resolveOneOf(this,e,n,r)}setSchema(e){this.rootSchema=e}step(e,n,r,i){return this.config.step(this,e,n,r,i)}validate(e,n,r){return this.config.validate(this,e,n,r)}}function Use(t,e,n){n.id=n.id||e,t.remotes[e]=t.compileSchema(n)}var M5={exports:{}},cTe=M5.exports,Wq;function hTe(){return Wq||(Wq=1,(function(t,e){(function(n,r){t.exports=r()})(typeof self<"u"?self:cTe,(()=>(()=>{var n={d:(se,ge)=>{for(var xe in ge)n.o(ge,xe)&&!n.o(se,xe)&&Object.defineProperty(se,xe,{enumerable:!0,get:ge[xe]})},o:(se,ge)=>Object.prototype.hasOwnProperty.call(se,ge),r:se=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(se,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(se,"__esModule",{value:!0})}},r={};function i(se){return se==="#"||se===""||Array.isArray(se)&&se.length===0||!1}n.r(r),n.d(r,{default:()=>ce,get:()=>g,isRoot:()=>i,join:()=>me,remove:()=>Q,removeUndefinedItems:()=>j,set:()=>I,split:()=>p,splitLast:()=>ae});const s=/~1/g,o=/~0/g,a=/\/+/g,l=/(^[#/]*|\/+$)/g;function h(se){return se.replace(s,"/").replace(o,"~")}function f(se){return h(decodeURIComponent(se))}function p(se){if(se==null||typeof se!="string"||i(se))return Array.isArray(se)?se:[];const ge=se.indexOf("#")>=0?f:h,xe=(se=(se=se.replace(a,"/")).replace(l,"")).split("/");for(let Se=0,De=xe.length;Se<De;Se+=1)xe[Se]=ge(xe[Se]);return xe}function g(se,ge,xe=void 0){if(ge==null||se==null)return xe;if(i(ge))return se;const Se=b(se,p(ge));return Se===void 0?xe:Se}function b(se,ge){const xe=ge.shift();if(se!==void 0)return xe!==void 0?b(se[xe],ge):se}const x=/^\[.*\]$/,k=/^\[(.+)\]$/;function T(se,ge){return se==="__proto__"||se=="constructor"&&ge.length>0&&ge[0]=="prototype"}function I(se,ge,xe){if(ge==null)return se;const Se=p(ge);if(Se.length===0)return se;se==null&&(se=x.test(Se[0])?[]:{});let De,He,Ue=se;for(;Se.length>1;)De=Se.shift(),He=x.test(Se[0]),T(De,Se)||(Ue=B(Ue,De,He));return De=Se.pop(),M(Ue,De,xe),se}function M(se,ge,xe){let Se;const De=ge.match(k);ge==="[]"&&Array.isArray(se)?se.push(xe):De?(Se=De.pop(),se[Se]=xe):se[ge]=xe}function B(se,ge,xe){if(se[ge]!=null)return se[ge];const Se=xe?[]:{};return M(se,ge,Se),Se}function j(se){let ge=0,xe=0;for(;ge+xe<se.length;)se[ge+xe]===void 0&&(xe+=1),se[ge]=se[ge+xe],ge+=1;return se.length=se.length-xe,se}function Q(se,ge,xe){const Se=p(ge),De=Se.pop(),He=g(se,Se);return He&&delete He[De],Array.isArray(He)&&xe!==!0&&j(He),se}const Z=/\/+/g,q=/~/g,J=/\//g;function oe(se,ge){if(se.length===0)return ge?"#":"";for(let xe=0,Se=se.length;xe<Se;xe+=1)se[xe]=se[xe].replace(q,"~0").replace(J,"~1"),ge&&(se[xe]=encodeURIComponent(se[xe]));return((ge?"#/":"/")+se.join("/")).replace(Z,"/")}function me(se,...ge){const xe=[];if(Array.isArray(se))return oe(se,arguments[1]===!0);const Se=arguments[arguments.length-1],De=typeof Se=="boolean"?Se:se&&se[0]==="#";for(let Ue=0,yt=arguments.length;Ue<yt;Ue+=1)xe.push.apply(xe,p(arguments[Ue]));const He=[];for(let Ue=0,yt=xe.length;Ue<yt;Ue+=1)if(xe[Ue]===".."){if(He.length===0)return De?"#":"";He.pop()}else He.push(xe[Ue]);return oe(He,De)}function ae(se){const ge=p(se);if(ge.length===0)return typeof se=="string"&&se[0]==="#"?["#",ge[0]]:["",void 0];if(ge.length===1)return se[0]==="#"?["#",ge[0]]:["",ge[0]];const xe=ge.pop();return[me(ge,se[0]==="#"),xe]}const ce={get:g,set:I,remove:Q,join:me,split:p,splitLast:ae,isRoot:i,removeUndefinedItems:j};return r})()))})(M5)),M5.exports}var nb=hTe();const Vk=l_(nb);var y4={},Ju={},BS={},Gq;function fTe(){if(Gq)return BS;Gq=1,Object.defineProperty(BS,"__esModule",{value:!0}),BS.TokenError=void 0;let t=class extends Error{constructor(n,r){if(super(n),this.message=n,this.token=r,r&&r.errors)r.errors.push(this);else throw this}inspect(){return"SyntaxError: "+this.message}};return BS.TokenError=t,BS}var Yq;function dTe(){if(Yq)return Ju;Yq=1,Object.defineProperty(Ju,"__esModule",{value:!0}),Ju.Parser=Ju.findRuleByName=Ju.parseRuleName=Ju.escapeRegExp=Ju.readToken=void 0;const t=/^[A-Z0-9_]+$/,e=/(\?|\+|\*)$/,n=/^(@|&|!)/,r="WS",i=fTe();function s(k,T){let I=T.exec(k);return I&&I.index==0?I[0].length==0&&T.source.length>0?null:{type:null,text:I[0],rest:k.substr(I[0].length),start:0,end:I[0].length-1,fullText:I[0],errors:[],children:[],parent:null}:null}Ju.readToken=s;function o(k){return k.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}Ju.escapeRegExp=o;function a(k){k.rest="",k.children&&k.children.forEach(T=>a(T))}function l(k,T){k.start+=T,k.end+=T,k.children&&k.children.forEach(I=>l(I,k.start))}function h(k,T){T.errors&&T.errors.length&&T.errors.forEach(I=>k.push(I)),T.children&&T.children.forEach(I=>h(k,I))}function f(k){let T=e.exec(k),I=n.exec(k),M=T&&T[0]||"",B=I&&I[0]||"",j={raw:k,name:k.replace(e,"").replace(n,""),isOptional:M=="?"||M=="*",allowRepetition:M=="+"||M=="*",atLeastOne:M=="+",lookupPositive:B=="&",lookupNegative:B=="!",pinned:B=="@",lookup:!1,isLiteral:!1};return j.isLiteral=j.name[0]=="'"||j.name[0]=='"',j.lookup=j.lookupNegative||j.lookupPositive,j}Ju.parseRuleName=f;function p(k,T){let I=f(k);return T.cachedRules[I.name]||null}Ju.findRuleByName=p;function g(k,T){if(k.children){let I=k.children.filter(M=>M.type&&T.test(M.type));for(let M=0;M<I.length;M++){let B=k.children.indexOf(I[M]);B!=-1&&k.children.splice(B,1)}k.children.forEach(M=>g(M,T))}}const b=["EOF"];class x{constructor(T,I){this.grammarRules=T,this.options=I,this.cachedRules={},this.debug=I?I.debug===!0:!1;let M=[],B=[];if(T.forEach(j=>{let Q=f(j.name);if(Q.name in this.cachedRules){M.push("Duplicated rule "+Q.name);return}else this.cachedRules[Q.name]=j;if(!j.bnf||!j.bnf.length){let Z="Missing rule content, rule: "+j.name;M.indexOf(Z)==-1&&M.push(Z)}else j.bnf.forEach(Z=>{if(typeof Z[0]=="string"&&f(Z[0]).name==j.name){let J="Left recursion is not allowed, rule: "+j.name;M.indexOf(J)==-1&&M.push(J)}Z.forEach(q=>{if(typeof q=="string"){let J=f(q);!J.isLiteral&&B.indexOf(J.name)==-1&&b.indexOf(J.name)==-1&&B.push(J.name)}})});r==j.name&&(j.implicitWs=!1),j.implicitWs&&B.indexOf(r)==-1&&B.push(r),j.recover&&B.indexOf(j.recover)==-1&&B.push(j.recover)}),B.forEach(j=>{j in this.cachedRules||M.push("Missing rule "+j)}),M.length)throw new Error(M.join(`
`))}getAST(T,I){I||(I=this.grammarRules.filter(B=>!B.fragment&&B.name.indexOf("%")!=0)[0].name);let M=this.parse(T,I);if(M){h(M.errors,M),l(M,0),g(M,/^%/),(!this.options||!this.options.keepUpperRules)&&g(M,t);let B=M.rest;B&&new i.TokenError(`Unexpected end of input: 
`+B,M),a(M),M.rest=B}return M}emitSource(){return"CANNOT EMIT SOURCE FROM BASE Parser"}parse(T,I,M=0){let B=null,j=f(I),Q,Z=this.debug&&!t.test(j.name);Z&&console.log(new Array(M).join("â  ")+"Trying to get "+I+" from "+JSON.stringify(T.split(`
`)[0]));let q=j.name,J=p(j.name,this);if(j.name=="EOF"){if(T.length)return null;if(T.length==0)return{type:"EOF",text:"",rest:"",start:0,end:0,fullText:"",errors:[],children:[],parent:null}}try{if(!J&&j.isLiteral){let oe=j.name.trim();if(oe.startsWith('"')?oe=JSON.parse(oe):oe.startsWith("'")&&(oe=oe.replace(/^'(.+)'$/,"$1").replace(/\\'/g,"'")),oe==="")return{type:"%%EMPTY%%",text:"",rest:T,start:0,end:0,fullText:"",errors:[],children:[],parent:null};Q=new RegExp(o(oe)),q=null}}catch(oe){return oe instanceof ReferenceError&&console.error(oe),null}if(Q){let oe=s(T,Q);if(oe)return oe.type=q,oe}else{let oe=J.bnf;oe instanceof Array&&oe.forEach(me=>{if(B)return;let ae=null,ce={type:j.name,text:"",children:[],end:0,errors:[],fullText:"",parent:null,start:0,rest:T};J.fragment&&(ce.fragment=!0);let se=T,ge=0,xe=me.length>0,Se=!1;for(let De=0;De<me.length;De++)if(typeof me[De]=="string"){let He=f(me[De]);xe=xe&&He.isOptional;let Ue,yt=!1;do{if(Ue=null,J.implicitWs&&(Ue=this.parse(se,He.name,M+1),!Ue)){let We;do if(We=this.parse(se,r,M+1),We)ce.text=ce.text+We.text,ce.end=ce.text.length,We.parent=ce,ce.children.push(We),se=se.substr(We.text.length),ge+=We.text.length;else break;while(We&&We.text.length)}if(Ue=Ue||this.parse(se,He.name,M+1),He.lookupNegative){if(Ue)return;break}if(He.lookupPositive&&!Ue)return;if(!Ue&&(He.isOptional||He.atLeastOne&&yt))break;if(Ue&&J.pinned==De+1&&(ae=Ue,Z&&console.log(new Array(M+1).join("â  ")+"ââ "+Ue.type+" PINNED")),Ue||(Ue=this.parseRecovery(J,se,M+1)),!Ue)if(ae)B=ce,Ue={type:"SyntaxError",text:se,children:[],end:se.length,errors:[],fullText:"",parent:null,start:0,rest:""},se.length?new i.TokenError(`Unexpected end of input. Expecting ${He.name} Got: ${se}`,Ue):new i.TokenError(`Unexpected end of input. Missing ${He.name}`,Ue),Z&&console.log(new Array(M+1).join("â  ")+"ââ "+Ue.type+" "+JSON.stringify(Ue.text));else return;if(yt=!0,Se=!0,Ue.type=="%%EMPTY%%")break;Ue.start+=ge,Ue.end+=ge,!He.lookupPositive&&Ue.type&&(Ue.fragment?Ue.children&&Ue.children.forEach(We=>{We.start+=ge,We.end+=ge,We.parent=ce,ce.children.push(We)}):(Ue.parent=ce,ce.children.push(Ue))),He.lookup&&(Ue.lookup=!0),Z&&console.log(new Array(M+1).join("â  ")+"ââ "+Ue.type+" "+JSON.stringify(Ue.text)),!He.lookup&&!Ue.lookup&&(ce.text=ce.text+Ue.text,ce.end=ce.text.length,se=se.substr(Ue.text.length),ge+=Ue.text.length),ce.rest=se}while(Ue&&He.allowRepetition&&se.length&&!Ue.lookup)}else{let He=s(se,me[De]);if(!He)return;Z&&console.log(new Array(M+1).join("â  ")+"â> "+JSON.stringify(He.text)+me[De].source),Se=!0,He.start+=ge,He.end+=ge,ce.text=ce.text+He.text,ce.end=ce.text.length,se=se.substr(He.text.length),ge+=He.text.length,ce.rest=se}Se&&(B=ce,Z&&console.log(new Array(M).join("â  ")+"â<ââ´< PUSHING "+B.type+" "+JSON.stringify(B.text)))}),B&&J.simplifyWhenOneChildren&&B.children.length==1&&(B=B.children[0])}return B||Z&&console.log(I+" NOT RESOLVED FROM "+T),B}parseRecovery(T,I,M){if(T.recover&&I.length){let B=this.debug;B&&console.log(new Array(M+1).join("â  ")+"Trying to recover until token "+T.recover+" from "+JSON.stringify(I.split(`
`)[0]+I.split(`
`)[1]));let j={type:"SyntaxError",text:"",children:[],end:0,errors:[],fullText:"",parent:null,start:0,rest:""},Q;do if(Q=this.parse(I,T.recover,M+1),Q){new i.TokenError('Unexpected input: "'+j.text+`" Expecting: ${T.name}`,j);break}else j.text=j.text+I[0],j.end=j.text.length,I=I.substr(1);while(!Q&&I.length>0);if(j.text.length>0&&Q)return B&&console.log(new Array(M+1).join("â  ")+"Recovered text: "+JSON.stringify(j.text)),j}return null}}return Ju.Parser=x,Ju.default=x,Ju}var Hq;function pTe(){if(Hq)return y4;Hq=1,Object.defineProperty(y4,"__esModule",{value:!0});const t=dTe();var e;return(function(n){n.RULES=[{name:"Grammar",bnf:[["RULE_S*","%Atomic*","EOF"]]},{name:"%Atomic",bnf:[["Production","RULE_S*"]],fragment:!0},{name:"Production",bnf:[["NCName","RULE_S*",'"::="',"RULE_WHITESPACE*","Choice","RULE_WHITESPACE*","RULE_EOL+","RULE_S*"]]},{name:"NCName",bnf:[[/[a-zA-Z][a-zA-Z_0-9]*/]]},{name:"Choice",bnf:[["SequenceOrDifference","%_Choice_1*"]],fragment:!0},{name:"%_Choice_1",bnf:[["RULE_WHITESPACE*",'"|"',"RULE_WHITESPACE*","SequenceOrDifference"]],fragment:!0},{name:"SequenceOrDifference",bnf:[["Item","RULE_WHITESPACE*","%_Item_1?"]]},{name:"%_Item_1",bnf:[["Minus","Item"],["Item*"]],fragment:!0},{name:"Minus",bnf:[['"-"']]},{name:"Item",bnf:[["RULE_WHITESPACE*","%Primary","PrimaryDecoration?"]],fragment:!0},{name:"PrimaryDecoration",bnf:[['"?"'],['"*"'],['"+"']]},{name:"DecorationName",bnf:[['"ebnf://"',/[^\x5D#]+/]]},{name:"%Primary",bnf:[["NCName"],["StringLiteral"],["CharCode"],["CharClass"],["SubItem"]],fragment:!0},{name:"SubItem",bnf:[['"("',"RULE_WHITESPACE*","Choice","RULE_WHITESPACE*",'")"']]},{name:"StringLiteral",bnf:[[`'"'`,/[^"]*/,`'"'`],[`"'"`,/[^']*/,`"'"`]],pinned:1},{name:"CharCode",bnf:[['"#x"',/[0-9a-zA-Z]+/]]},{name:"CharClass",bnf:[["'['","'^'?","%RULE_CharClass_1+",'"]"']]},{name:"%RULE_CharClass_1",bnf:[["CharCodeRange"],["CharRange"],["CharCode"],["RULE_Char"]],fragment:!0},{name:"RULE_Char",bnf:[[/\x09/],[/\x0A/],[/\x0D/],[/[\x20-\x5c]/],[/[\x5e-\uD7FF]/],[/[\uE000-\uFFFD]/]]},{name:"CharRange",bnf:[["RULE_Char",'"-"',"RULE_Char"]]},{name:"CharCodeRange",bnf:[["CharCode",'"-"',"CharCode"]]},{name:"RULE_WHITESPACE",bnf:[["%RULE_WHITESPACE_CHAR*"],["Comment","RULE_WHITESPACE*"]]},{name:"RULE_S",bnf:[["RULE_WHITESPACE","RULE_S*"],["RULE_EOL","RULE_S*"]]},{name:"%RULE_WHITESPACE_CHAR",bnf:[[/\x09/],[/\x20/]],fragment:!0},{name:"Comment",bnf:[['"/*"',"%RULE_Comment_Body*",'"*/"']]},{name:"%RULE_Comment_Body",bnf:[['!"*/"',/[^*]/]],fragment:!0},{name:"RULE_EOL",bnf:[[/\x0D/,/\x0A/],[/\x0A/],[/\x0D/]]},{name:"Link",bnf:[["'['","Url","']'"]]},{name:"Url",bnf:[[/[^\x5D:/?#]/,'"://"',/[^\x5D#]+/,"%Url1?"]]},{name:"%Url1",bnf:[['"#"',"NCName"]],fragment:!0}],n.defaultParser=new t.Parser(n.RULES,{debug:!1});const r=/^(!|&)/,i=/(\?|\+|\*)$/,s=/^%/;function o(B,j){if(typeof B=="string"){if(r.test(B))return"";if(s.test(B)){let Z=i.exec(B),q=Z?Z[0]+" ":"";return a(B,j)?h(B,j)+q:"("+h(B,j)+")"+q}return B}else return B.source.replace(/\\(?:x|u)([a-zA-Z0-9]+)/g,"#x$1").replace(/\[\\(?:x|u)([a-zA-Z0-9]+)-\\(?:x|u)([a-zA-Z0-9]+)\]/g,"[#x$1-#x$2]")}function a(B,j){let Q=t.findRuleByName(B,j);return Q&&Q.bnf.length==1&&Q.bnf[0].length==1&&(Q.bnf[0][0]instanceof RegExp||Q.bnf[0][0][0]=='"'||Q.bnf[0][0][0]=="'")}function l(B,j){return B.map(Q=>o(Q,j)).join(" ")}function h(B,j){let Q=t.findRuleByName(B,j);return Q?Q.bnf.map(Z=>l(Z,j)).join(" | "):"RULE_NOT_FOUND {"+B+"}"}function f(B){let j=[];return B.grammarRules.forEach(Q=>{if(!/^%/.test(Q.name)){let Z=Q.recover?" /* { recoverUntil="+Q.recover+" } */":"";j.push(Q.name+" ::= "+h(Q.name,B)+Z)}}),j.join(`
`)}n.emit=f;let p=0;function g(B,j){throw console.log("reberia restar "+j+" a "+B),new Error("Difference not supported yet")}function b(B){return new RegExp(B.replace(/#x([a-zA-Z0-9]{4})/g,"\\u$1").replace(/#x([a-zA-Z0-9]{3})/g,"\\u0$1").replace(/#x([a-zA-Z0-9]{2})/g,"\\x$1").replace(/#x([a-zA-Z0-9]{1})/g,"\\x0$1"))}function x(B,j,Q){let Z=null,q=[];return j.children.forEach((J,oe)=>{J.type=="Minus"&&g(Z,J);let me=j.children[oe+1];me=me&&me.type=="PrimaryDecoration"&&me.text||"";let ae="";switch(J.type){case"SubItem":let ce="%"+(Q+p++);k(B,J,ce),q.push(ae+ce+me);break;case"NCName":case"StringLiteral":q.push(ae+J.text+me);break;case"CharCode":case"CharClass":if(me||ae){let se={name:"%"+(Q+p++),bnf:[[b(J.text)]]};B.push(se),q.push(ae+se.name+me)}else q.push(b(J.text));break;case"PrimaryDecoration":break;default:throw new Error(" HOW SHOULD I PARSE THIS? "+J.type+" -> "+JSON.stringify(J.text))}Z=J}),q}function k(B,j,Q){let Z=j.children.filter(oe=>oe.type=="SequenceOrDifference").map(oe=>x(B,oe,Q)),q={name:Q,bnf:Z},J=null;Z.forEach(oe=>{J=J||oe.recover,delete oe.recover}),Q.indexOf("%")==0&&(q.fragment=!0),J&&(q.recover=J),B.push(q)}function T(B,j=n.defaultParser){let Q=j.getAST(B);if(!Q)throw new Error("Could not parse "+B);if(Q.errors&&Q.errors.length)throw Q.errors[0];let Z=[];return Q.children.filter(q=>q.type=="Production").map(q=>{let J=q.children.filter(oe=>oe.type=="NCName")[0].text;k(Z,q,J)}),Z}n.getRules=T;function I(B,j=n.defaultParser){return T(B.join(""),j)}n.Transform=I;class M extends t.Parser{constructor(j,Q){const Z=Q&&Q.debugRulesParser===!0?new t.Parser(n.RULES,{debug:!0}):n.defaultParser;super(T(j,Z),Q)}emitSource(){return f(this)}}n.Parser=M})(e||(e={})),y4.default=e,y4}var mTe=pTe();const gTe=l_(mTe),yTe="[^?/{}*,()#]+",vTe=`
root ::= ("#" recursion | recursion | (query | pattern) recursion* | "#" SEP? | SEP)
recursion ::= (SEP query | pattern)*

query ::= (ESC escaped ESC | property | all | any | regex) typecheck? lookahead?
property ::= ${yTe}
regex ::= "{" [^}]+ "}"
SEP ::= "/"
all ::= "**"
any ::= "*"

typecheck ::= "?:" ("value" | "boolean" | "string" | "number" | "object" | "array")
lookahead ::= "?" expression ((andExpr | orExpr) expression)*
andExpr ::= S? "&&" S?
orExpr ::= S? "||" S?

expression ::= (exprProperty | ESC escaped ESC) ((isnot | is) (exprProperty | regex | ESC escaped ESC))*
exprProperty ::= [a-zA-Z0-9-_ $]+
escaped ::= [^"]+
is ::= ":"
isnot ::= ":!"
ESC ::= '"'

pattern ::= S? "(" (SEP query | pattern (orPattern? pattern)*)* ")" quantifier? S? lookahead?
quantifier ::= "+" | "*" | [0-9]+
orPattern ::= S? "," S?

S ::= [ ]*
`,bTe=new gTe.Parser(vTe),_Te=t=>bTe.getAST(t),oc=0,g2=3,D6=(t,e)=>`${t}/${e}`,Vse=Object.prototype.toString,xTe=/Object|Array/,S9=t=>xTe.test(Vse.call(t)),wTe=t=>Vse.call(t).match(/\s([^\]]+)\]/).pop().toLowerCase();function qse(t){return new RegExp(t.text.replace(/(^{|}$)/g,""))}function OTe(t,e){Array.isArray(t)?t.forEach(e):Object.prototype.toString.call(t)==="[object Object]"&&Object.keys(t).forEach(function(n){e(t[n],n,t)})}function Kq(t){return Array.isArray(t)?t.map(function(e,n){return`${n}`}):Object.prototype.toString.call(t)==="[object Object]"?Object.keys(t):[]}const Xy={mem:[],get(t,e){const n=t[oc][e];if(!Xy.mem.includes(n))return S9(n)&&Xy.mem.push(n),[n,e,t[oc],D6(t[g2],e)]},reset(){Xy.mem.length=0}},k9={any(t,e){const n=e[oc];return Kq(n).map(r=>[n[r],r,n,D6(e[g2],r)])},all(t,e){const n=[e];return OTe(e[oc],(r,i)=>{const s=Xy.get(e,i);s&&n.push(...k9.all(t,s))}),n},regex(t,e){const n=qse(t),r=e[oc];return Kq(r).filter(i=>n.test(i)).map(i=>[r[i],i,r,D6(e[g2],i)])}},I6={escaped:(t,e)=>I6.property(t,e),property:(t,e)=>{const n=t.text;if(e[oc]&&e[oc][n]!==void 0)return[e[oc][n],n,e[oc],D6(e[g2],n)]},typecheck:(t,e)=>{const n=t.text.replace(/^\?:/,"");if(n==="value")return S9(e[oc])?void 0:e;if(wTe(e[oc])===n)return e},lookahead:(t,e)=>{let n=!0,r=!1;return t.children.forEach(i=>{if(i.type==="expression"){const s=I6.expression(i,e)!==void 0;n=r===!0?n||s:n&&s}else r=i.type==="orExpr"}),n?e:void 0},expression:(t,e)=>{const n=t.children[0].text,r=t.children[1],i=t.children[2],s=e[oc];if(S9(s)!==!1)return STe(s[n],r,i)?e:void 0}};function STe(t,e,n){if(e===void 0)return t!==void 0;let r;const i=`${t}`;return n.type==="regex"?r=qse(n).test(i):r=i===n.text,e.type==="isnot"&&(r=r===!1&&t!==void 0),r}function kTe(t,e,n,r){const i=[];for(let s=0,o=e.length;s<o;s+=1)i.push(...t(n,e[s],n,r));return i}function CTe(t,e,n,r){const i=[];for(let s=0,o=e.length;s<o;s+=1){const a=t(n,e[s],r);a&&i.push(a)}return i}function ATe(t,e,n){let r=t;return e.children.forEach(i=>{if(k9[i.type])r=kTe(k9[i.type],r,i,n);else if(I6[i.type])r=CTe(I6[i.type],r,i,n);else throw new Error(`Unknown filter ${i.type}`)}),r}function ETe(t,e,n){const r=[];let i=t;return e.children.forEach(s=>{if(s.type==="orPattern"){r.push(...i),i=t;return}i=FN(i,s,n)}),r.push(...i),r}function TTe(t){if(t==null)return 1;if(t==="*"||t==="+")return 1/0;const e=parseInt(t);return isNaN(e)?1:e}function PTe(t,e,n){const r=[],i=e.children.find(l=>l.type==="quantifier"),s=TTe(i&&i.text);let o=t;i&&i.text==="*"&&r.push(...o);let a=0;for(;o.length>0&&a<s;)o=ETe(o,e,n),r.push(...o),a+=1;return r}function DTe(t,e,n){let r=t;return e.children.forEach(i=>r=FN(r,i,n)),r}function FN(t,e,n){let r;return e.type==="query"?r=ATe(t,e,n):e.type==="pattern"?r=PTe(t,e,n):r=DTe(t,e,n),Xy.reset(),Xy.mem.push(t),r}function ITe(t,e){return Xy.reset(),Xy.mem.push(t),FN([[t,null,null,"#"]],e)}const Jq={value:t=>t.map(e=>e[oc]),pointer:t=>t.map(e=>e[g2]),all:t=>t,map:t=>{const e={};return t.forEach(n=>e[n[g2]]=n[oc]),e}};var jb;(function(t){t.POINTER="pointer",t.VALUE="value",t.ALL="all",t.MAP="map"})(jb||(jb={}));UC.POINTER=jb.POINTER;UC.VALUE=jb.VALUE;UC.ALL=jb.ALL;UC.MAP=jb.MAP;function UC(t,e,n=jb.VALUE){if(e==null)return[];e=e.replace(/(\/$)/g,""),e===""&&(e="#");const r=_Te(e);if(r==null)throw new Error(`empty ast for '${e}'`);if(r.rest!=="")throw new Error(`Failed parsing queryString from: '${r.rest}'`);const i=ITe(t,r);return typeof n=="function"?i.map(s=>n(...s)):Jq[n]?Jq[n](i):i}var M6;(function(t){t.REPLACE_ITEMS="replace",t.INSERT_ITEMS="insert"})(M6||(M6={}));M6.REPLACE_ITEMS;M6.INSERT_ITEMS;const $g={$ref:{type:!1},allOf:{type:!1,definitions:["allOf/*"]},anyOf:{type:!1,definitions:["anyOf/*"]},array:{type:!0,definitions:["allOf/*","anyOf/*","oneOf/*","not","items","items/*","additionalItems"],validationKeywords:["minItems","maxItems","uniqueItems"],keywords:["items","additionalItems","minItems","maxItems","uniqueItems"]},boolean:{type:!0},enum:{type:!1},integer:{type:!0,definitions:["allOf/*","anyOf/*","oneOf/*","not"],validationKeywords:["minimum","maximum","multipleOf"]},not:{type:!1,definitions:["not"]},number:{type:!0,definitions:["allOf/*","anyOf/*","oneOf/*","not"],validationKeywords:["minimum","maximum","multipleOf"]},null:{type:!0},object:{type:!0,definitions:["allOf/*","anyOf/*","oneOf/*","not","properties/*","additionalProperties","patternProperties/*","dependencies/*"],validationKeywords:["minProperties","maxProperties","required"],keywords:["properties","additionalProperties","patternProperties","dependencies","minProperties","maxProperties","required"]},oneOf:{type:!1,definitions:["oneOf/*"]},string:{type:!0,definitions:["allOf/*","anyOf/*","oneOf/*","not"],validationKeywords:["minLength","maxLength","pattern"]}},MTe=Object.keys($g).filter(t=>$g[t].type===!1),eZ=Object.prototype.hasOwnProperty;function tZ(t){if(Zy(t)===!1)return;if(t.enum)return"enum";const e=t.type;if(Array.isArray(e)||$g[e])return e;const n=MTe.filter(r=>t[r]);if(n.length===1)return n[0];if(n.length===0){for(let r=0,i=$g.object.keywords.length;r<i;r+=1){const s=$g.object.keywords[r];if(eZ.call(t,s))return"object"}for(let r=0,i=$g.array.keywords.length;r<i;r+=1){const s=$g.array.keywords[r];if(eZ.call(t,s))return"array"}return}throw new Error(`Mutiple typeIds [${n.join(", ")}] matched in ${JSON.stringify(t)}`)}function RTe(t){const e=[],n=tZ(t);if(n==null)return e;let r;if(Array.isArray(n)){r={};for(let i=0,s=n.length;i<s;i+=1)Object.assign(r,$g[n[i]])}else r=$g[n];return r.definitions==null||r.definitions.forEach(i=>{UC(t,i,(s,o,a,l)=>{Zy(s)&&tZ(s)&&e.push({pointer:Vk.join(Vk.split(l),!1),def:s})})}),e}function FTe(t,e){if(this.callback(t,e)===!0)return;RTe(t).forEach(r=>this.nextTypeDefs(r.def,Vk.join(e,r.pointer,!1)))}function v4(t,e,n,r="definitions"){const i=e[r];Object.keys(i).forEach(s=>{if(i[s]===!1||Zy(i[s])){t.nextTypeDefs(i[s],Vk.join(n,r,s,!1));return}})}function ED(t,e,n="#"){const r={callback:e,nextTypeDefs:FTe};r.nextTypeDefs(t,n),t.definitions!=null&&(r.callback=(i,s)=>{e(i,s),i.definitions!=null&&v4(r,i,s)},v4(r,t,n)),t.$defs!=null&&(r.callback=(i,s)=>{e(i,s),i.definitions!=null&&v4(r,i,s)},v4(r,t,n,"$defs"))}const LTe=/(#|\/)+$/,b4=/#$/,$Te=/^[^:]+:\/\/[^/]+\//,BTe=/\/[^/]*$/,NTe=/#.*$/;function R6(t,e){return t==null&&e==null?"#":e==null?t.replace(b4,""):t==null?e.replace(b4,""):e[0]==="#"?`${t.replace(NTe,"")}${e.replace(LTe,"")}`:$Te.test(e)?e.replace(b4,""):`${t.replace(BTe,"")}/${e.replace(b4,"")}`}const NS=/(#|\/)+$/g,zTe=["",null,"#"];function QTe(t){if(zTe.includes(t))return[];if(t=t.replace(NS,""),t.indexOf("#")===-1)return[t.replace(NS,"")];if(t.indexOf("#")===0)return[t.replace(NS,"")];const e=t.split("#");return e[0]=e[0].replace(NS,""),e[1]=`#${e[1].replace(NS,"")}`,e}const jTe=/(#|\/)+$/g,UTe=t=>Yi(t)==="object";function Cg(t,e,n){if(UTe(n)&&(n=n.__ref||n.$ref),n==null)return e;let r;const i=n.replace(jTe,"");if(t.remotes[i])return r=t.remotes[i],r&&r.$ref?Cg(t,e,r.$ref):r;if(t.ids[n])return r=nb.get(e,t.ids[n]),r&&r.$ref?Cg(t,e,r.$ref):r;const s=QTe(n);if(s.length===0)return e;if(s.length===1){if(n=s[0],t.remotes[n])return r=t.remotes[n],Cg(t,e,r.$ref);if(t.ids[n])return r=nb.get(e,t.ids[n]),r&&r.$ref?Cg(t,e,r.$ref):r}if(s.length===2){const o=s[0];if(n=s[1],t.remotes[o])return t.remotes[o].getRef?t.remotes[o].getRef(n):Cg(t,t.remotes[o],n);if(t.ids[o])return Cg(t,nb.get(e,t.ids[o]),n)}return r=nb.get(e,t.ids[n]||n),r&&r.$ref?Cg(t,e,r.$ref):r}const nZ="__compiled",rZ="__ref",VTe="getRef",qTe="getRoot",ZTe=/(#|\/)+$/g;function XTe(t,e,n=e,r=!1){if(!e||e[nZ]!==void 0)return e;const i={ids:{},remotes:t.remotes},s=JSON.stringify(e),o=JSON.parse(s);if(Object.defineProperty(o,nZ,{enumerable:!1,value:!0}),Object.defineProperty(o,VTe,{enumerable:!1,value:Cg.bind(null,i,o)}),r===!1&&s.includes("$ref")===!1)return o;e!==n&&Object.defineProperty(o,"definitions",{enumerable:!1,value:Object.assign({},n.definitions,n.$defs,e.definitions,e.$defs)});const a={},l=()=>o;return ED(o,(h,f)=>{var p;if(h.id){if(h.id.startsWith("http")&&/(allOf|anyOf|oneOf)\/\d+$/.test(f)){const T=f.replace(/\/(allOf|anyOf|oneOf)\/\d+$/,""),I=nb.get(o,T);h.id=(p=I.id)!==null&&p!==void 0?p:h.id}i.ids[h.id.replace(ZTe,"")]=f}f=`#${f}`.replace(/##+/,"#");const g=f.replace(/\/[^/]+$/,""),b=f.replace(/\/[^/]+\/[^/]+$/,""),x=a[g]||a[b],k=R6(x,h.id);a[f]=k,i.ids[k]==null&&(i.ids[k]=f),h.$ref&&!h[rZ]&&(Object.defineProperty(h,rZ,{enumerable:!1,value:R6(k,h.$ref)}),Object.defineProperty(h,qTe,{enumerable:!1,value:l}))}),o}function Zse(t,e,n,r=t.rootSchema,i="#"){r=t.resolveRef(r),n(r,e,i);const s=Yi(e);s==="object"?Object.keys(e).forEach(o=>{const a=t.step(o,r,e,i),l=e[o];t.each(l,n,a,`${i}/${o}`)}):s==="array"&&e.forEach((o,a)=>{const l=t.step(a,r,e,i);t.each(o,n,l,`${i}/${a}`)})}const Xse={additionalItemsError:er("AdditionalItemsError"),additionalPropertiesError:er("AdditionalPropertiesError"),anyOfError:er("AnyOfError"),allOfError:er("AllOfError"),constError:er("ConstError"),containsError:er("ContainsError"),containsArrayError:er("ContainsArrayError"),containsAnyError:er("ContainsAnyError"),enumError:er("EnumError"),forbiddenPropertyError:er("ForbiddenPropertyError"),formatURLError:er("FormatURLError"),formatURIError:er("FormatURIError"),formatURIReferenceError:er("FormatURIReferenceError"),formatURITemplateError:er("FormatURITemplateError"),formatDateError:er("FormatDateError"),formatDateTimeError:er("FormatDateTimeError"),formatEmailError:er("FormatEmailError"),formatHostnameError:er("FormatHostnameError"),formatIPV4Error:er("FormatIPV4Error"),formatIPV4LeadingZeroError:er("FormatIPV4LeadingZeroError"),formatIPV6Error:er("FormatIPV6Error"),formatIPV6LeadingZeroError:er("FormatIPV6LeadingZeroError"),formatJsonPointerError:er("FormatJsonPointerError"),formatRegExError:er("FormatRegExError"),formatTimeError:er("FormatTimeError"),invalidSchemaError:er("InvalidSchemaError"),invalidDataError:er("InvalidDataError"),invalidTypeError:er("InvalidTypeError"),invalidPropertyNameError:er("InvalidPropertyNameError"),maximumError:er("MaximumError"),maxItemsError:er("MaxItemsError"),maxLengthError:er("MaxLengthError"),maxPropertiesError:er("MaxPropertiesError"),minimumError:er("MinimumError"),minItemsError:er("MinItemsError"),minItemsOneError:er("MinItemsOneError"),minLengthError:er("MinLengthError"),minLengthOneError:er("MinLengthOneError"),minPropertiesError:er("MinPropertiesError"),missingDependencyError:er("MissingDependencyError"),missingOneOfPropertyError:er("MissingOneOfPropertyError"),multipleOfError:er("MultipleOfError"),multipleOneOfError:er("MultipleOneOfError"),noAdditionalPropertiesError:er("NoAdditionalPropertiesError"),notError:er("NotError"),oneOfError:er("OneOfError"),oneOfPropertyError:er("OneOfPropertyError"),patternError:er("PatternError"),patternPropertiesError:er("PatternPropertiesError"),requiredPropertyError:er("RequiredPropertyError"),schemaWarning:er("SchemaWarning"),typeError:er("TypeError"),undefinedValueError:er("UndefinedValueError"),uniqueItemsError:er("UniqueItemsError"),unknownPropertyError:er("UnknownPropertyError"),valueNotEmptyError:er("ValueNotEmptyError")};var aR={exports:{}},iZ;function WTe(){return iZ||(iZ=1,(function(t){(function(e){e.exports.is_uri=r,e.exports.is_http_uri=i,e.exports.is_https_uri=s,e.exports.is_web_uri=o,e.exports.isUri=r,e.exports.isHttpUri=i,e.exports.isHttpsUri=s,e.exports.isWebUri=o;var n=function(a){var l=a.match(/(?:([^:\/?#]+):)?(?:\/\/([^\/?#]*))?([^?#]*)(?:\?([^#]*))?(?:#(.*))?/);return l};function r(a){if(a&&!/[^a-z0-9\:\/\?\#\[\]\@\!\$\&\'\(\)\*\+\,\;\=\.\-\_\~\%]/i.test(a)&&!/%[^0-9a-f]/i.test(a)&&!/%[0-9a-f](:?[^0-9a-f]|$)/i.test(a)){var l=[],h="",f="",p="",g="",b="",x="";if(l=n(a),h=l[1],f=l[2],p=l[3],g=l[4],b=l[5],!!(h&&h.length&&p.length>=0)){if(f&&f.length){if(!(p.length===0||/^\//.test(p)))return}else if(/^\/\//.test(p))return;if(/^[a-z][a-z0-9\+\-\.]*$/.test(h.toLowerCase()))return x+=h+":",f&&f.length&&(x+="//"+f),x+=p,g&&g.length&&(x+="?"+g),b&&b.length&&(x+="#"+b),x}}}function i(a,l){if(r(a)){var h=[],f="",p="",g="",b="",x="",k="",T="";if(h=n(a),f=h[1],p=h[2],g=h[3],x=h[4],k=h[5],!!f){if(l){if(f.toLowerCase()!="https")return}else if(f.toLowerCase()!="http")return;if(p)return/:(\d+)$/.test(p)&&(b=p.match(/:(\d+)$/)[0],p=p.replace(/:\d+$/,"")),T+=f+":",T+="//"+p,b&&(T+=b),T+=g,x&&x.length&&(T+="?"+x),k&&k.length&&(T+="#"+k),T}}}function s(a){return i(a,!0)}function o(a){return i(a)||s(a)}})(t)})(aR)),aR.exports}var GTe=WTe();const sZ=l_(GTe);var _u={},R5={exports:{}},YTe=R5.exports,oZ;function HTe(){return oZ||(oZ=1,(function(t){(function(e,n){t.exports?t.exports=n():e.nearley=n()})(YTe,function(){function e(h,f,p){return this.id=++e.highestId,this.name=h,this.symbols=f,this.postprocess=p,this}e.highestId=0,e.prototype.toString=function(h){var f=typeof h>"u"?this.symbols.map(l).join(" "):this.symbols.slice(0,h).map(l).join(" ")+" â "+this.symbols.slice(h).map(l).join(" ");return this.name+" â "+f};function n(h,f,p,g){this.rule=h,this.dot=f,this.reference=p,this.data=[],this.wantedBy=g,this.isComplete=this.dot===h.symbols.length}n.prototype.toString=function(){return"{"+this.rule.toString(this.dot)+"}, from: "+(this.reference||0)},n.prototype.nextState=function(h){var f=new n(this.rule,this.dot+1,this.reference,this.wantedBy);return f.left=this,f.right=h,f.isComplete&&(f.data=f.build(),f.right=void 0),f},n.prototype.build=function(){var h=[],f=this;do h.push(f.right.data),f=f.left;while(f.left);return h.reverse(),h},n.prototype.finish=function(){this.rule.postprocess&&(this.data=this.rule.postprocess(this.data,this.reference,o.fail))};function r(h,f){this.grammar=h,this.index=f,this.states=[],this.wants={},this.scannable=[],this.completed={}}r.prototype.process=function(h){for(var f=this.states,p=this.wants,g=this.completed,b=0;b<f.length;b++){var x=f[b];if(x.isComplete){if(x.finish(),x.data!==o.fail){for(var k=x.wantedBy,T=k.length;T--;){var I=k[T];this.complete(I,x)}if(x.reference===this.index){var M=x.rule.name;(this.completed[M]=this.completed[M]||[]).push(x)}}}else{var M=x.rule.symbols[x.dot];if(typeof M!="string"){this.scannable.push(x);continue}if(p[M]){if(p[M].push(x),g.hasOwnProperty(M))for(var B=g[M],T=0;T<B.length;T++){var j=B[T];this.complete(x,j)}}else p[M]=[x],this.predict(M)}}},r.prototype.predict=function(h){for(var f=this.grammar.byName[h]||[],p=0;p<f.length;p++){var g=f[p],b=this.wants[h],x=new n(g,0,this.index,b);this.states.push(x)}},r.prototype.complete=function(h,f){var p=h.nextState(f);this.states.push(p)};function i(h,f){this.rules=h,this.start=f||this.rules[0].name;var p=this.byName={};this.rules.forEach(function(g){p.hasOwnProperty(g.name)||(p[g.name]=[]),p[g.name].push(g)})}i.fromCompiled=function(g,f){var p=g.Lexer;g.ParserStart&&(f=g.ParserStart,g=g.ParserRules);var g=g.map(function(x){return new e(x.name,x.symbols,x.postprocess)}),b=new i(g,f);return b.lexer=p,b};function s(){this.reset("")}s.prototype.reset=function(h,f){this.buffer=h,this.index=0,this.line=f?f.line:1,this.lastLineBreak=f?-f.col:0},s.prototype.next=function(){if(this.index<this.buffer.length){var h=this.buffer[this.index++];return h===`
`&&(this.line+=1,this.lastLineBreak=this.index),{value:h}}},s.prototype.save=function(){return{line:this.line,col:this.index-this.lastLineBreak}},s.prototype.formatError=function(h,f){var p=this.buffer;if(typeof p=="string"){var g=p.split(`
`).slice(Math.max(0,this.line-5),this.line),b=p.indexOf(`
`,this.index);b===-1&&(b=p.length);var x=this.index-this.lastLineBreak,k=String(this.line).length;return f+=" at line "+this.line+" col "+x+`:

`,f+=g.map(function(I,M){return T(this.line-g.length+M+1,k)+" "+I},this).join(`
`),f+=`
`+T("",k+x)+`^
`,f}else return f+" at index "+(this.index-1);function T(I,M){var B=String(I);return Array(M-B.length+1).join(" ")+B}};function o(h,f,p){if(h instanceof i)var g=h,p=f;else var g=i.fromCompiled(h,f);this.grammar=g,this.options={keepHistory:!1,lexer:g.lexer||new s};for(var b in p||{})this.options[b]=p[b];this.lexer=this.options.lexer,this.lexerState=void 0;var x=new r(g,0);this.table=[x],x.wants[g.start]=[],x.predict(g.start),x.process(),this.current=0}o.fail={},o.prototype.feed=function(h){var f=this.lexer;f.reset(h,this.lexerState);for(var p;;){try{if(p=f.next(),!p)break}catch(q){var k=new r(this.grammar,this.current+1);this.table.push(k);var g=new Error(this.reportLexerError(q));throw g.offset=this.current,g.token=q.token,g}var b=this.table[this.current];this.options.keepHistory||delete this.table[this.current-1];var x=this.current+1,k=new r(this.grammar,x);this.table.push(k);for(var T=p.text!==void 0?p.text:p.value,I=f.constructor===s?p.value:p,M=b.scannable,B=M.length;B--;){var j=M[B],Q=j.rule.symbols[j.dot];if(Q.test?Q.test(I):Q.type?Q.type===p.type:Q.literal===T){var Z=j.nextState({data:I,token:p,isToken:!0,reference:x-1});k.states.push(Z)}}if(k.process(),k.states.length===0){var g=new Error(this.reportError(p));throw g.offset=this.current,g.token=p,g}this.options.keepHistory&&(b.lexerState=f.save()),this.current++}return b&&(this.lexerState=f.save()),this.results=this.finish(),this},o.prototype.reportLexerError=function(h){var f,p,g=h.token;return g?(f="input "+JSON.stringify(g.text[0])+" (lexer error)",p=this.lexer.formatError(g,"Syntax error")):(f="input (lexer error)",p=h.message),this.reportErrorCommon(p,f)},o.prototype.reportError=function(h){var f=(h.type?h.type+" token: ":"")+JSON.stringify(h.value!==void 0?h.value:h),p=this.lexer.formatError(h,"Syntax error");return this.reportErrorCommon(p,f)},o.prototype.reportErrorCommon=function(h,f){var p=[];p.push(h);var g=this.table.length-2,b=this.table[g],x=b.states.filter(function(T){var I=T.rule.symbols[T.dot];return I&&typeof I!="string"});if(x.length===0)p.push("Unexpected "+f+`. I did not expect any more input. Here is the state of my parse table:
`),this.displayStateStack(b.states,p);else{p.push("Unexpected "+f+`. Instead, I was expecting to see one of the following:
`);var k=x.map(function(T){return this.buildFirstStateStack(T,[])||[T]},this);k.forEach(function(T){var I=T[0],M=I.rule.symbols[I.dot],B=this.getSymbolDisplay(M);p.push("A "+B+" based on:"),this.displayStateStack(T,p)},this)}return p.push(""),p.join(`
`)},o.prototype.displayStateStack=function(h,f){for(var p,g=0,b=0;b<h.length;b++){var x=h[b],k=x.rule.toString(x.dot);k===p?g++:(g>0&&f.push("    ^ "+g+" more lines identical to this"),g=0,f.push("    "+k)),p=k}},o.prototype.getSymbolDisplay=function(h){return a(h)},o.prototype.buildFirstStateStack=function(h,f){if(f.indexOf(h)!==-1)return null;if(h.wantedBy.length===0)return[h];var p=h.wantedBy[0],g=[h].concat(f),b=this.buildFirstStateStack(p,g);return b===null?null:[h].concat(b)},o.prototype.save=function(){var h=this.table[this.current];return h.lexerState=this.lexerState,h},o.prototype.restore=function(h){var f=h.index;this.current=f,this.table[f]=h,this.table.splice(f+1),this.lexerState=h.lexerState,this.results=this.finish()},o.prototype.rewind=function(h){if(!this.options.keepHistory)throw new Error("set option `keepHistory` to enable rewinding");this.restore(this.table[h])},o.prototype.finish=function(){var h=[],f=this.grammar.start,p=this.table[this.table.length-1];return p.states.forEach(function(g){g.rule.name===f&&g.dot===g.rule.symbols.length&&g.reference===0&&g.data!==o.fail&&h.push(g)}),h.map(function(g){return g.data})};function a(h){var f=typeof h;if(f==="string")return h;if(f==="object"){if(h.literal)return JSON.stringify(h.literal);if(h instanceof RegExp)return"character matching "+h;if(h.type)return h.type+" token";if(h.test)return"token matching "+String(h.test);throw new Error("Unknown symbol type: "+h)}}function l(h){var f=typeof h;if(f==="string")return h;if(f==="object"){if(h.literal)return JSON.stringify(h.literal);if(h instanceof RegExp)return h.toString();if(h.type)return"%"+h.type;if(h.test)return"<"+String(h.test)+">";throw new Error("Unknown symbol type: "+h)}}return{Parser:o,Grammar:i,Rule:e}})})(R5)),R5.exports}var _4={},aZ;function KTe(){if(aZ)return _4;aZ=1,Object.defineProperty(_4,"__esModule",{value:!0});function t(i){return i[0]}const e=i=>[].concat(...i.map(s=>Array.isArray(s)?e(s):s));function n(i){return i?Array.isArray(i)?e(i).join(""):i:""}const r={Lexer:void 0,ParserRules:[{name:"Reverse_path",symbols:["Path"]},{name:"Reverse_path$string$1",symbols:[{literal:"<"},{literal:">"}],postprocess:i=>i.join("")},{name:"Reverse_path",symbols:["Reverse_path$string$1"]},{name:"Forward_path$subexpression$1$subexpression$1",symbols:[{literal:"<"},/[pP]/,/[oO]/,/[sS]/,/[tT]/,/[mM]/,/[aA]/,/[sS]/,/[tT]/,/[eE]/,/[rR]/,{literal:"@"}],postprocess:function(i){return i.join("")}},{name:"Forward_path$subexpression$1",symbols:["Forward_path$subexpression$1$subexpression$1","Domain",{literal:">"}]},{name:"Forward_path",symbols:["Forward_path$subexpression$1"]},{name:"Forward_path$subexpression$2",symbols:[{literal:"<"},/[pP]/,/[oO]/,/[sS]/,/[tT]/,/[mM]/,/[aA]/,/[sS]/,/[tT]/,/[eE]/,/[rR]/,{literal:">"}],postprocess:function(i){return i.join("")}},{name:"Forward_path",symbols:["Forward_path$subexpression$2"]},{name:"Forward_path",symbols:["Path"]},{name:"Path$ebnf$1$subexpression$1",symbols:["A_d_l",{literal:":"}]},{name:"Path$ebnf$1",symbols:["Path$ebnf$1$subexpression$1"],postprocess:t},{name:"Path$ebnf$1",symbols:[],postprocess:()=>null},{name:"Path",symbols:[{literal:"<"},"Path$ebnf$1","Mailbox",{literal:">"}]},{name:"A_d_l$ebnf$1",symbols:[]},{name:"A_d_l$ebnf$1$subexpression$1",symbols:[{literal:","},"At_domain"]},{name:"A_d_l$ebnf$1",symbols:["A_d_l$ebnf$1","A_d_l$ebnf$1$subexpression$1"],postprocess:i=>i[0].concat([i[1]])},{name:"A_d_l",symbols:["At_domain","A_d_l$ebnf$1"]},{name:"At_domain",symbols:[{literal:"@"},"Domain"]},{name:"Domain$ebnf$1",symbols:[]},{name:"Domain$ebnf$1$subexpression$1",symbols:[{literal:"."},"sub_domain"]},{name:"Domain$ebnf$1",symbols:["Domain$ebnf$1","Domain$ebnf$1$subexpression$1"],postprocess:i=>i[0].concat([i[1]])},{name:"Domain",symbols:["sub_domain","Domain$ebnf$1"]},{name:"sub_domain",symbols:["U_label"]},{name:"Let_dig",symbols:["ALPHA_DIGIT"],postprocess:t},{name:"Ldh_str$ebnf$1",symbols:[]},{name:"Ldh_str$ebnf$1",symbols:["Ldh_str$ebnf$1","ALPHA_DIG_DASH"],postprocess:i=>i[0].concat([i[1]])},{name:"Ldh_str",symbols:["Ldh_str$ebnf$1","Let_dig"]},{name:"U_Let_dig",symbols:["ALPHA_DIGIT_U"],postprocess:t},{name:"U_Ldh_str$ebnf$1",symbols:[]},{name:"U_Ldh_str$ebnf$1",symbols:["U_Ldh_str$ebnf$1","ALPHA_DIG_DASH_U"],postprocess:i=>i[0].concat([i[1]])},{name:"U_Ldh_str",symbols:["U_Ldh_str$ebnf$1","U_Let_dig"]},{name:"U_label$ebnf$1$subexpression$1",symbols:["U_Ldh_str"]},{name:"U_label$ebnf$1",symbols:["U_label$ebnf$1$subexpression$1"],postprocess:t},{name:"U_label$ebnf$1",symbols:[],postprocess:()=>null},{name:"U_label",symbols:["U_Let_dig","U_label$ebnf$1"]},{name:"address_literal$subexpression$1",symbols:["IPv4_address_literal"]},{name:"address_literal$subexpression$1",symbols:["IPv6_address_literal"]},{name:"address_literal$subexpression$1",symbols:["General_address_literal"]},{name:"address_literal",symbols:[{literal:"["},"address_literal$subexpression$1",{literal:"]"}]},{name:"non_local_part",symbols:["Domain"],postprocess:function(i){return{DomainName:n(i[0])}}},{name:"non_local_part",symbols:["address_literal"],postprocess:function(i){return{AddressLiteral:n(i[0])}}},{name:"Mailbox",symbols:["Local_part",{literal:"@"},"non_local_part"],postprocess:function(i){return{localPart:n(i[0]),domainPart:n(i[2])}}},{name:"Local_part",symbols:["Dot_string"],postprocess:function(i){return{DotString:n(i[0])}}},{name:"Local_part",symbols:["Quoted_string"],postprocess:function(i){return{QuotedString:n(i[0])}}},{name:"Dot_string$ebnf$1",symbols:[]},{name:"Dot_string$ebnf$1$subexpression$1",symbols:[{literal:"."},"Atom"]},{name:"Dot_string$ebnf$1",symbols:["Dot_string$ebnf$1","Dot_string$ebnf$1$subexpression$1"],postprocess:i=>i[0].concat([i[1]])},{name:"Dot_string",symbols:["Atom","Dot_string$ebnf$1"]},{name:"Atom$ebnf$1",symbols:[/[0-9A-Za-z!#$%&'*+\-/=?^_`{|}~\u0080-\uFFFF/]/]},{name:"Atom$ebnf$1",symbols:["Atom$ebnf$1",/[0-9A-Za-z!#$%&'*+\-/=?^_`{|}~\u0080-\uFFFF/]/],postprocess:i=>i[0].concat([i[1]])},{name:"Atom",symbols:["Atom$ebnf$1"]},{name:"Quoted_string$ebnf$1",symbols:[]},{name:"Quoted_string$ebnf$1",symbols:["Quoted_string$ebnf$1","QcontentSMTP"],postprocess:i=>i[0].concat([i[1]])},{name:"Quoted_string",symbols:["DQUOTE","Quoted_string$ebnf$1","DQUOTE"]},{name:"QcontentSMTP",symbols:["qtextSMTP"]},{name:"QcontentSMTP",symbols:["quoted_pairSMTP"]},{name:"quoted_pairSMTP",symbols:[{literal:"\\"},/[\x20-\x7e]/]},{name:"qtextSMTP",symbols:[/[\x20-\x21\x23-\x5b\x5d-\x7e\u0080-\uFFFF]/],postprocess:t},{name:"IPv4_address_literal$macrocall$2",symbols:[{literal:"."},"Snum"]},{name:"IPv4_address_literal$macrocall$1",symbols:["IPv4_address_literal$macrocall$2","IPv4_address_literal$macrocall$2","IPv4_address_literal$macrocall$2"]},{name:"IPv4_address_literal",symbols:["Snum","IPv4_address_literal$macrocall$1"]},{name:"IPv6_address_literal$subexpression$1",symbols:[/[iI]/,/[pP]/,/[vV]/,{literal:"6"},{literal:":"}],postprocess:function(i){return i.join("")}},{name:"IPv6_address_literal",symbols:["IPv6_address_literal$subexpression$1","IPv6_addr"]},{name:"General_address_literal$ebnf$1",symbols:["dcontent"]},{name:"General_address_literal$ebnf$1",symbols:["General_address_literal$ebnf$1","dcontent"],postprocess:i=>i[0].concat([i[1]])},{name:"General_address_literal",symbols:["Standardized_tag",{literal:":"},"General_address_literal$ebnf$1"]},{name:"Standardized_tag",symbols:["Ldh_str"]},{name:"dcontent",symbols:[/[\x21-\x5a\x5e-\x7e]/],postprocess:t},{name:"Snum",symbols:["DIGIT"]},{name:"Snum$subexpression$1",symbols:[/[1-9]/,"DIGIT"]},{name:"Snum",symbols:["Snum$subexpression$1"]},{name:"Snum$subexpression$2",symbols:[{literal:"1"},"DIGIT","DIGIT"]},{name:"Snum",symbols:["Snum$subexpression$2"]},{name:"Snum$subexpression$3",symbols:[{literal:"2"},/[0-4]/,"DIGIT"]},{name:"Snum",symbols:["Snum$subexpression$3"]},{name:"Snum$subexpression$4",symbols:[{literal:"2"},{literal:"5"},/[0-5]/]},{name:"Snum",symbols:["Snum$subexpression$4"]},{name:"IPv6_addr",symbols:["IPv6_full"]},{name:"IPv6_addr",symbols:["IPv6_comp"]},{name:"IPv6_addr",symbols:["IPv6v4_full"]},{name:"IPv6_addr",symbols:["IPv6v4_comp"]},{name:"IPv6_hex",symbols:["HEXDIG"]},{name:"IPv6_hex$subexpression$1",symbols:["HEXDIG","HEXDIG"]},{name:"IPv6_hex",symbols:["IPv6_hex$subexpression$1"]},{name:"IPv6_hex$subexpression$2",symbols:["HEXDIG","HEXDIG","HEXDIG"]},{name:"IPv6_hex",symbols:["IPv6_hex$subexpression$2"]},{name:"IPv6_hex$subexpression$3",symbols:["HEXDIG","HEXDIG","HEXDIG","HEXDIG"]},{name:"IPv6_hex",symbols:["IPv6_hex$subexpression$3"]},{name:"IPv6_full$macrocall$2",symbols:[{literal:":"},"IPv6_hex"]},{name:"IPv6_full$macrocall$1",symbols:["IPv6_full$macrocall$2","IPv6_full$macrocall$2","IPv6_full$macrocall$2","IPv6_full$macrocall$2","IPv6_full$macrocall$2","IPv6_full$macrocall$2","IPv6_full$macrocall$2"]},{name:"IPv6_full",symbols:["IPv6_hex","IPv6_full$macrocall$1"]},{name:"IPv6_comp$ebnf$1$subexpression$1$macrocall$2",symbols:[{literal:":"},"IPv6_hex"]},{name:"IPv6_comp$ebnf$1$subexpression$1$macrocall$1",symbols:["IPv6_comp$ebnf$1$subexpression$1$macrocall$2","IPv6_comp$ebnf$1$subexpression$1$macrocall$2","IPv6_comp$ebnf$1$subexpression$1$macrocall$2","IPv6_comp$ebnf$1$subexpression$1$macrocall$2","IPv6_comp$ebnf$1$subexpression$1$macrocall$2"]},{name:"IPv6_comp$ebnf$1$subexpression$1",symbols:["IPv6_hex","IPv6_comp$ebnf$1$subexpression$1$macrocall$1"]},{name:"IPv6_comp$ebnf$1",symbols:["IPv6_comp$ebnf$1$subexpression$1"],postprocess:t},{name:"IPv6_comp$ebnf$1",symbols:[],postprocess:()=>null},{name:"IPv6_comp$string$1",symbols:[{literal:":"},{literal:":"}],postprocess:i=>i.join("")},{name:"IPv6_comp$ebnf$2$subexpression$1$macrocall$2",symbols:[{literal:":"},"IPv6_hex"]},{name:"IPv6_comp$ebnf$2$subexpression$1$macrocall$1",symbols:["IPv6_comp$ebnf$2$subexpression$1$macrocall$2","IPv6_comp$ebnf$2$subexpression$1$macrocall$2","IPv6_comp$ebnf$2$subexpression$1$macrocall$2","IPv6_comp$ebnf$2$subexpression$1$macrocall$2","IPv6_comp$ebnf$2$subexpression$1$macrocall$2"]},{name:"IPv6_comp$ebnf$2$subexpression$1",symbols:["IPv6_hex","IPv6_comp$ebnf$2$subexpression$1$macrocall$1"]},{name:"IPv6_comp$ebnf$2",symbols:["IPv6_comp$ebnf$2$subexpression$1"],postprocess:t},{name:"IPv6_comp$ebnf$2",symbols:[],postprocess:()=>null},{name:"IPv6_comp",symbols:["IPv6_comp$ebnf$1","IPv6_comp$string$1","IPv6_comp$ebnf$2"]},{name:"IPv6v4_full$macrocall$2",symbols:[{literal:":"},"IPv6_hex"]},{name:"IPv6v4_full$macrocall$1",symbols:["IPv6v4_full$macrocall$2","IPv6v4_full$macrocall$2","IPv6v4_full$macrocall$2","IPv6v4_full$macrocall$2","IPv6v4_full$macrocall$2"]},{name:"IPv6v4_full",symbols:["IPv6_hex","IPv6v4_full$macrocall$1",{literal:":"},"IPv4_address_literal"]},{name:"IPv6v4_comp$ebnf$1$subexpression$1$macrocall$2",symbols:[{literal:":"},"IPv6_hex"]},{name:"IPv6v4_comp$ebnf$1$subexpression$1$macrocall$1",symbols:["IPv6v4_comp$ebnf$1$subexpression$1$macrocall$2","IPv6v4_comp$ebnf$1$subexpression$1$macrocall$2","IPv6v4_comp$ebnf$1$subexpression$1$macrocall$2"]},{name:"IPv6v4_comp$ebnf$1$subexpression$1",symbols:["IPv6_hex","IPv6v4_comp$ebnf$1$subexpression$1$macrocall$1"]},{name:"IPv6v4_comp$ebnf$1",symbols:["IPv6v4_comp$ebnf$1$subexpression$1"],postprocess:t},{name:"IPv6v4_comp$ebnf$1",symbols:[],postprocess:()=>null},{name:"IPv6v4_comp$string$1",symbols:[{literal:":"},{literal:":"}],postprocess:i=>i.join("")},{name:"IPv6v4_comp$ebnf$2$subexpression$1$macrocall$2",symbols:[{literal:":"},"IPv6_hex"]},{name:"IPv6v4_comp$ebnf$2$subexpression$1$macrocall$1",symbols:["IPv6v4_comp$ebnf$2$subexpression$1$macrocall$2","IPv6v4_comp$ebnf$2$subexpression$1$macrocall$2","IPv6v4_comp$ebnf$2$subexpression$1$macrocall$2"]},{name:"IPv6v4_comp$ebnf$2$subexpression$1",symbols:["IPv6_hex","IPv6v4_comp$ebnf$2$subexpression$1$macrocall$1",{literal:":"}]},{name:"IPv6v4_comp$ebnf$2",symbols:["IPv6v4_comp$ebnf$2$subexpression$1"],postprocess:t},{name:"IPv6v4_comp$ebnf$2",symbols:[],postprocess:()=>null},{name:"IPv6v4_comp",symbols:["IPv6v4_comp$ebnf$1","IPv6v4_comp$string$1","IPv6v4_comp$ebnf$2","IPv4_address_literal"]},{name:"DIGIT",symbols:[/[0-9]/],postprocess:t},{name:"ALPHA_DIGIT_U",symbols:[/[0-9A-Za-z\u0080-\uFFFF]/],postprocess:t},{name:"ALPHA_DIGIT",symbols:[/[0-9A-Za-z]/],postprocess:t},{name:"ALPHA_DIG_DASH",symbols:[/[-0-9A-Za-z]/],postprocess:t},{name:"ALPHA_DIG_DASH_U",symbols:[/[-0-9A-Za-z\u0080-\uFFFF]/],postprocess:t},{name:"HEXDIG",symbols:[/[0-9A-Fa-f]/],postprocess:t},{name:"DQUOTE",symbols:[{literal:'"'}],postprocess:t}],ParserStart:"Reverse_path"};return _4.default=r,_4}var lZ;function JTe(){if(lZ)return _u;lZ=1;var t=_u&&_u.__importDefault||function(h){return h&&h.__esModule?h:{default:h}};Object.defineProperty(_u,"__esModule",{value:!0}),_u.canonicalize=_u.canonicalize_quoted_string=_u.normalize=_u.normalize_dot_string=_u.parse=void 0;const e=HTe(),n=t(KTe());n.default.ParserStart="Mailbox";const r=e.Grammar.fromCompiled(n.default);function i(h){const f=new e.Parser(r);if(f.feed(h),f.results.length!==1)throw new Error("address parsing failed: ambiguous grammar");return f.results[0]}_u.parse=i;function s(h){return(function(){const g=h.indexOf("+");return g===-1?h:h.substr(0,g)})().replace(/\./g,"").toLowerCase()}_u.normalize_dot_string=s;function o(h){var f,p;const g=i(h),b=(f=g.domainPart.AddressLiteral)!==null&&f!==void 0?f:g.domainPart.DomainName.toLowerCase();return`${(p=g.localPart.QuotedString)!==null&&p!==void 0?p:s(g.localPart.DotString)}@${b}`}_u.normalize=o;function a(h){return`"${h.substr(1).substr(0,h.length-2).replace(/(?:\\(.))/g,"$1").replace(/(?:(["\\]))/g,"\\$1")}"`}_u.canonicalize_quoted_string=a;function l(h){var f;const p=i(h),g=(f=p.domainPart.AddressLiteral)!==null&&f!==void 0?f:p.domainPart.DomainName.toLowerCase();return`${p.localPart.QuotedString?a(p.localPart.QuotedString):p.localPart.DotString}@${g}`}return _u.canonicalize=l,_u}var e6e=JTe();const t6e=new RegExp("^([0-9]+)-(0[1-9]|1[012])-(0[1-9]|[12][0-9]|3[01])[Tt]([01][0-9]|2[0-3]):([0-5][0-9]):([0-5][0-9]|60)(\\.[0-9]+)?(([Zz])|([\\+|\\-]([01][0-9]|2[0-3]):[0-5][0-9]))$"),n6e=/^(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)$/,r6e=/^((([0-9a-f]{1,4}:){7}([0-9a-f]{1,4}|:))|(([0-9a-f]{1,4}:){6}(:[0-9a-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9a-f]{1,4}:){5}(((:[0-9a-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9a-f]{1,4}:){4}(((:[0-9a-f]{1,4}){1,3})|((:[0-9a-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){3}(((:[0-9a-f]{1,4}){1,4})|((:[0-9a-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){2}(((:[0-9a-f]{1,4}){1,5})|((:[0-9a-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){1}(((:[0-9a-f]{1,4}){1,6})|((:[0-9a-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9a-f]{1,4}){1,7})|((:[0-9a-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))$/i,i6e=/^(?=.{1,255}$)[0-9A-Za-z](?:(?:[0-9A-Za-z]|-){0,61}[0-9A-Za-z])?(?:\.[0-9A-Za-z](?:(?:[0-9A-Za-z]|-){0,61}[0-9A-Za-z])?)*\.?$/,s6e=/^(\d\d\d\d)-(\d\d)-(\d\d)$/,o6e=/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)?$/i,a6e=[0,31,28,31,30,31,30,31,31,30,31,30,31],l6e=/^(?:\/(?:[^~/]|~0|~1)*)*$/,u6e=/^(?:0|[1-9][0-9]*)(?:#|(?:\/(?:[^~/]|~0|~1)*)*)$/,c6e=/^(?:[a-z][a-z0-9+\-.]*:)?(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'"()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?(?:\?(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,h6e=/^(?:(?:[^\x00-\x20"'<>%\\^`{|}]|%[0-9a-f]{2})|\{[+#./;?&=,!@|]?(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?(?:,(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?)*\})*$/i,Wse={date:(t,e,n,r)=>{if(typeof n!="string"||n==="")return;const i=n.match(s6e);if(!i)return t.errors.formatDateTimeError({value:n,pointer:r,schema:e});const s=+i[1],o=+i[2],a=+i[3],l=s%4===0&&(s%100!==0||s%400===0);if(!(o>=1&&o<=12&&a>=1&&a<=(o==2&&l?29:a6e[o])))return t.errors.formatDateError({value:n,pointer:r,schema:e})},"date-time":(t,e,n,r)=>{if(!(typeof n!="string"||n===""))return n===""||t6e.test(n)?new Date(n).toString()==="Invalid Date"?t.errors.formatDateTimeError({value:n,pointer:r,schema:e}):void 0:t.errors.formatDateTimeError({value:n,pointer:r,schema:e})},email:(t,e,n,r)=>{if(typeof n!="string"||n==="")return;if(n[0]==='"')return t.errors.formatEmailError({value:n,pointer:r,schema:e});const[i,s,...o]=n.split("@");if(!i||!s||o.length!==0||i.length>64||s.length>253)return t.errors.formatEmailError({value:n,pointer:r,schema:e});if(i[0]==="."||i.endsWith(".")||i.includes(".."))return t.errors.formatEmailError({value:n,pointer:r,schema:e});if(!/^[a-z0-9.-]+$/i.test(s)||!/^[a-z0-9.!#$%&'*+/=?^_`{|}~-]+$/i.test(i))return t.errors.formatEmailError({value:n,pointer:r,schema:e});if(!s.split(".").every(a=>/^[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?$/i.test(a)))return t.errors.formatEmailError({value:n,pointer:r,schema:e})},"idn-email":(t,e,n,r)=>{if(!(typeof n!="string"||n===""))try{e6e.parse(n);return}catch{return t.errors.formatEmailError({value:n,pointer:r,schema:e})}},hostname:(t,e,n,r)=>{if(typeof n=="string"&&!(n===""||i6e.test(n)))return t.errors.formatHostnameError({value:n,pointer:r,schema:e})},ipv4:(t,e,n,r)=>{if(!(typeof n!="string"||n==="")){if(n&&n[0]==="0")return t.errors.formatIPV4LeadingZeroError({value:n,pointer:r,schema:e});if(!(n.length<=15&&n6e.test(n)))return t.errors.formatIPV4Error({value:n,pointer:r,schema:e})}},ipv6:(t,e,n,r)=>{if(!(typeof n!="string"||n==="")){if(n&&n[0]==="0")return t.errors.formatIPV6LeadingZeroError({value:n,pointer:r,schema:e});if(!(n.length<=45&&r6e.test(n)))return t.errors.formatIPV6Error({value:n,pointer:r,schema:e})}},"json-pointer":(t,e,n,r)=>{if(!(typeof n!="string"||n==="")&&!l6e.test(n))return t.errors.formatJsonPointerError({value:n,pointer:r,schema:e})},"relative-json-pointer":(t,e,n,r)=>{if(!(typeof n!="string"||n==="")&&!u6e.test(n))return t.errors.formatJsonPointerError({value:n,pointer:r,schema:e})},regex:(t,e,n,r)=>{if(typeof n=="string"&&/\\Z$/.test(n)===!1){try{new RegExp(n);return}catch{}return t.errors.formatRegExError({value:n,pointer:r,schema:e})}if(!(typeof n=="object"||typeof n=="number"||Array.isArray(n)))return t.errors.formatRegExError({value:n,pointer:r,schema:e})},time:(t,e,n,r)=>typeof n!="string"||n===""||n.match(o6e)?void 0:t.errors.formatDateTimeError({value:n,pointer:r,schema:e}),uri:(t,e,n,r)=>{if(!(typeof n!="string"||n==="")&&!sZ.isUri(n))return t.errors.formatURIError({value:n,pointer:r,schema:e})},"uri-reference":(t,e,n,r)=>{if(!(typeof n!="string"||n==="")&&!c6e.test(n))return t.errors.formatURIReferenceError({value:n,pointer:r,schema:e})},"uri-template":(t,e,n,r)=>{if(!(typeof n!="string"||n==="")&&!h6e.test(n))return t.errors.formatURITemplateError({value:n,pointer:r,schema:e})},url:(t,e,n,r)=>{if(!(n===""||sZ.isWebUri(n)))return t.errors.formatURLError({value:n,pointer:r,schema:e})}},Gse={};function Yse(t,e=Gse){const{pointer:n="#",data:r,schema:i=t.rootSchema,withSchemaWarning:s=!1}=e,o=Vk.split(n),a=Hse(t,t.resolveRef(i),o,"#",r);if(!(!s&&a?.code==="schema-warning"))return a}function Hse(t,e,n,r,i=Gse){if(n.length===0)return t.resolveRef(e);const s=n.shift();return e=t.step(s,e,i,r),au(e)?e:(i=i[s],Hse(t,e,n,`${r}/${s}`,i))}function f6e(t){switch(Yi(t)){case"string":case"array":return t?.length===0;case"null":case"undefined":return!0;case"object":return Object.keys(t).length===0;default:return!1}}const uZ=eO.templateDefaultOptions;let Bg;function lR(t,e){const{$ref:n}=t;return n==null?!0:(Bg[e]==null||Bg[e][n]==null?0:Bg[e][n])<eO.GET_TEMPLATE_RECURSION_LIMIT}function cZ(t,e,n){const{$ref:r}=e;return r==null?e:(Bg[n]=Bg[n]||{},Bg[n][r]=Bg[n][r]||0,Bg[n][r]+=1,t.resolveRef(e))}function d6e(t,e){if(t==="string")return JSON.stringify(e);if(typeof e!="string")return null;try{if(e=JSON.parse(e),typeof e===t)return e}catch{}return null}function Kse(t,e,n,r,i){if(Yi(e)!=="object")return Object.assign({pointer:r},e);if(lR(e,r)===!1&&n==null)return!1;let s=P6(cZ(t,e,r));if(Array.isArray(e.anyOf)&&e.anyOf.length>0){if(lR(e.anyOf[0],`${r}/anyOf/0`)){const o=cZ(t,e.anyOf[0],`${r}/anyOf/0`);s=DN(s,o),s.pointer=e.anyOf[0].$ref||s.pointer}delete s.anyOf}if(Array.isArray(e.allOf)&&e.allOf.map((a,l)=>lR(a,`${r}/allOf/${l}`)).reduceRight((a,l)=>a&&l,!0)){const a=[];let l=P6(n);for(let f=0;f<e.allOf.length;f+=1)a.push(Fse(t,e.allOf[f],l)),l=ad(t,l,{type:e.type,...a[f]},`${r}/allOf/${f}`,i);const h=$se(t,{allOf:a});h&&(s=Eu(s,h))}return s.pointer=s.pointer||e.$ref||r,s}const hZ=t=>t&&typeof t=="object";function ad(t,e,n,r,i){var s;if(n==null)throw new Error(`getTemplate: missing schema for data: ${JSON.stringify(e)}`);if(r==null)throw new Error("Missing pointer");let o=Kse(t,n,e,r,i);if(!hZ(o))return;if(r=o.pointer,o?.const)return o.const;if(Array.isArray(o.oneOf))if(f6e(e)){const f=o.oneOf[0].type||o.type||o.const&&typeof o.const||Yi(e);o={...o.oneOf[0],type:f}}else{const f=PN(t,e,o);if(au(f)){if(e!=null&&i.removeInvalidData!==!0)return e;o=o.oneOf[0],e=void 0}else f.type=(s=f.type)!==null&&s!==void 0?s:o.type,o=f}if(!hZ(o)||o.type==null)return;if(e instanceof File)return e;const a=Array.isArray(o.type)?p6e(o.type,e,o.default):o.type,l=Yi(e);return e!=null&&l!==a&&!(l==="number"&&a==="integer")&&(e=d6e(a,e)),fZ[a]==null?i.removeInvalidData?void 0:e:fZ[a](t,o,e,r,i)}function p6e(t,e,n){if(e==null){if(n!=null){const i=Yi(n);if(t.includes(i))return i}return t[0]}const r=Yi(e);return t.includes(r)?r:t[0]}const fZ={null:(t,e,n)=>zS(e,n,null),string:(t,e,n)=>zS(e,n,""),number:(t,e,n)=>zS(e,n,0),integer:(t,e,n)=>zS(e,n,0),boolean:(t,e,n)=>zS(e,n,!1),object:(t,e,n,r,i)=>{var s;const o=e.default===void 0?{}:e.default,a={},l=i.extendDefaults===!1&&e.default!==void 0?[]:(s=e.required)!==null&&s!==void 0?s:[];e.properties&&Object.keys(e.properties).forEach(p=>{const g=n==null||n[p]==null?o[p]:n[p],b=l.includes(p);(g!=null||b||i.addOptionalProps)&&(a[p]=ad(t,g,e.properties[p],`${r}/properties/${p}`,i))});let h=Nse(t,e,a);if(h){h=Eu(e,h),delete h.dependencies;const p=ad(t,n,h,`${r}/dependencies`,i);Object.assign(a,p)}n&&(i.removeInvalidData===!0&&(e.additionalProperties===!1||Yi(e.additionalProperties)==="object")?Yi(e.additionalProperties)==="object"&&Object.keys(n).forEach(p=>{a[p]==null&&t.isValid(n[p],e.additionalProperties)&&(a[p]=n[p])}):Object.keys(n).forEach(p=>a[p]==null&&(a[p]=n[p])));const f=AD(t,e,a);if(f){const p=ad(t,a,{type:"object",...f},r,i);Object.assign(a,p)}return a},array:(t,e,n,r,i)=>{var s,o;if(e.items==null)return n||[];const a=e.default===void 0?[]:e.default,l=n||a,h=i.extendDefaults===!1&&e.default!==void 0?0:e.minItems||0;if(Array.isArray(e.items)){for(let p=0,g=Math.max(h??0,(o=(s=e.items)===null||s===void 0?void 0:s.length)!==null&&o!==void 0?o:0);p<g;p+=1)l[p]=ad(t,l[p]==null?a[p]:l[p],e.items[p],`${r}/items/${p}`,i);return l}if(Yi(e.items)!=="object")return l;const f=Kse(t,e.items,n,r,i);if(f===!1)return l;if(r=f.pointer||r,f.oneOf&&l.length===0){const p=f.oneOf[0];for(let g=0;g<h;g+=1)l[g]=ad(t,l[g]==null?a[g]:l[g],p,`${r}/oneOf/0`,i);return l}if(f.oneOf&&l.length>0){const p=Math.max(h,l.length);for(let g=0;g<p;g+=1){let b=l[g]==null?a[g]:l[g],x=PN(t,b,f);x==null||au(x)?b!=null&&i.removeInvalidData!==!0?l[g]=b:(b=void 0,x=f.oneOf[0],l[g]=ad(t,b,x,`${r}/oneOf/${g}`,i)):l[g]=ad(t,b,x,`${r}/oneOf/${g}`,i)}return l}if(f.type){for(let p=0,g=Math.max(h,l.length);p<g;p+=1)l[p]=ad(t,l[p]==null?a[p]:l[p],f,`${r}/items`,i);return l}return l}};function zS(t,e,n){return e??(t.const?t.const:t.default===void 0&&Array.isArray(t.enum)?t.enum[0]:t.default===void 0?n:t.default)}const Jse=(t,e,n=t.rootSchema,r)=>(Bg={},r?ad(t,e,n,"#",{...uZ,...r}):ad(t,e,n,"#",uZ));function eoe(t,e,n=t.rootSchema,r="#"){return t.validate(e,n,r).length===0}function dZ(t){const e=[];let n=0;const r=t.length;for(;n<r;){const i=t.charCodeAt(n++);if(i>=55296&&i<=56319&&n<r){const s=t.charCodeAt(n++);(s&64512)==56320?e.push(((i&1023)<<10)+(s&1023)+65536):(e.push(i),n--)}else e.push(i)}return e}function pZ(t){const e=`${t}`,n=e.indexOf(".");return n===-1?0:e.length-(n+1)}var uR,mZ;function m6e(){return mZ||(mZ=1,uR=function t(e,n){if(e===n)return!0;if(e&&n&&typeof e=="object"&&typeof n=="object"){if(e.constructor!==n.constructor)return!1;var r,i,s;if(Array.isArray(e)){if(r=e.length,r!=n.length)return!1;for(i=r;i--!==0;)if(!t(e[i],n[i]))return!1;return!0}if(e.constructor===RegExp)return e.source===n.source&&e.flags===n.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===n.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===n.toString();if(s=Object.keys(e),r=s.length,r!==Object.keys(n).length)return!1;for(i=r;i--!==0;)if(!Object.prototype.hasOwnProperty.call(n,s[i]))return!1;for(i=r;i--!==0;){var o=s[i];if(!t(e[o],n[o]))return!1}return!0}return e!==e&&n!==n}),uR}var g6e=m6e();const toe=l_(g6e),y6e=Object.prototype.hasOwnProperty,gZ=(t,e)=>!(t[e]===void 0||!y6e.call(t,e)),noe={additionalProperties:(t,e,n,r)=>{if(e.additionalProperties===!0||e.additionalProperties==null||Yi(e.patternProperties)==="object"&&e.additionalProperties===!1)return;const i=[];let s=Object.keys(n).filter(a=>eO.propertyBlacklist.includes(a)===!1);const o=Object.keys(e.properties||{});if(Yi(e.patternProperties)==="object"){const a=Object.keys(e.patternProperties).map(l=>new RegExp(l));s=s.filter(l=>{for(let h=0;h<a.length;h+=1)if(a[h].test(l))return!1;return!0})}for(let a=0,l=s.length;a<l;a+=1){const h=s[a];if(o.indexOf(h)===-1){const f=Zy(e.additionalProperties);if(f&&Array.isArray(e.additionalProperties.oneOf)){const p=t.resolveOneOf(n[h],e.additionalProperties,`${r}/${h}`);au(p)?i.push(t.errors.additionalPropertiesError({pointer:r,schema:e.additionalProperties,value:n,property:s[a],properties:o,errors:p.data.errors})):i.push(...t.validate(n[h],p,r))}else f?i.push(...t.validate(n[h],e.additionalProperties,`${r}/${h}`)):i.push(t.errors.noAdditionalPropertiesError({pointer:r,schema:e,value:n,property:s[a],properties:o}))}}return i},allOf:rTe,anyOf:oTe,dependencies:sTe,enum:(t,e,n,r)=>{const i=Yi(n);if(i==="object"||i==="array"){const s=JSON.stringify(n);for(let o=0;o<e.enum.length;o+=1)if(JSON.stringify(e.enum[o])===s)return}else if(e.enum.includes(n))return;return t.errors.enumError({pointer:r,schema:e,value:n,values:e.enum})},format:(t,e,n,r)=>{if(t.validateFormat[e.format])return t.validateFormat[e.format](t,e,n,r)},items:(t,e,n,r)=>{if(e.items===!1)return Array.isArray(n)&&n.length===0?void 0:t.errors.invalidDataError({pointer:r,value:n,schema:e});const i=[];for(let s=0;s<n.length;s+=1){const o=n[s],a=t.step(s,e,n,r);if(au(a))return[a];const l=t.validate(o,a,`${r}/${s}`);i.push(...l)}return i},maximum:(t,e,n,r)=>{if(!isNaN(e.maximum)){if(e.maximum&&e.maximum<n)return t.errors.maximumError({maximum:e.maximum,length:n,value:n,pointer:r,schema:e});if(e.maximum&&e.exclusiveMaximum===!0&&e.maximum===n)return t.errors.maximumError({maximum:e.maximum,length:n,pointer:r,schema:e,value:n})}},maxItems:(t,e,n,r)=>{if(!isNaN(e.maxItems)&&e.maxItems<n.length)return t.errors.maxItemsError({maximum:e.maxItems,length:n.length,schema:e,value:n,pointer:r})},maxLength:(t,e,n,r)=>{if(isNaN(e.maxLength))return;const i=dZ(n).length;if(e.maxLength<i)return t.errors.maxLengthError({maxLength:e.maxLength,length:i,pointer:r,schema:e,value:n})},maxProperties:(t,e,n,r)=>{const i=Object.keys(n).length;if(isNaN(e.maxProperties)===!1&&e.maxProperties<i)return t.errors.maxPropertiesError({maxProperties:e.maxProperties,length:i,pointer:r,schema:e,value:n})},minLength:(t,e,n,r)=>{if(isNaN(e.minLength))return;const i=dZ(n).length;if(e.minLength>i)return e.minLength===1?t.errors.minLengthOneError({minLength:e.minLength,length:i,pointer:r,schema:e,value:n}):t.errors.minLengthError({minLength:e.minLength,length:i,pointer:r,schema:e,value:n})},minimum:(t,e,n,r)=>{if(!isNaN(e.minimum)){if(e.minimum>n)return t.errors.minimumError({minimum:e.minimum,length:n,pointer:r,schema:e,value:n});if(e.exclusiveMinimum===!0&&e.minimum===n)return t.errors.minimumError({minimum:e.minimum,length:n,pointer:r,schema:e,value:n})}},minItems:(t,e,n,r)=>{if(!isNaN(e.minItems)&&e.minItems>n.length)return e.minItems===1?t.errors.minItemsOneError({minItems:e.minItems,length:n.length,pointer:r,schema:e,value:n}):t.errors.minItemsError({minItems:e.minItems,length:n.length,pointer:r,schema:e,value:n})},minProperties:(t,e,n,r)=>{if(isNaN(e.minProperties))return;const i=Object.keys(n).length;if(e.minProperties>i)return t.errors.minPropertiesError({minProperties:e.minProperties,length:i,pointer:r,schema:e,value:n})},multipleOf:(t,e,n,r)=>{if(isNaN(e.multipleOf)||typeof n!="number")return;const i=pZ(n),s=pZ(e.multipleOf);if(i>s)return t.errors.multipleOfError({multipleOf:e.multipleOf,value:n,pointer:r,schema:e});const o=Math.pow(10,s),a=Math.round(n*o),l=Math.round(e.multipleOf*o);if(a%l/o!==0)return t.errors.multipleOfError({multipleOf:e.multipleOf,value:n,pointer:r,schema:e})},not:(t,e,n,r)=>{const i=[];return t.validate(n,e.not,r).length===0&&i.push(t.errors.notError({value:n,not:e.not,pointer:r,schema:e})),i},oneOf:y5e,pattern:(t,e,n,r)=>{if(new RegExp(e.pattern,"u").test(n)===!1)return t.errors.patternError({pattern:e.pattern,description:e.patternExample||e.pattern,received:n,schema:e,value:n,pointer:r})},patternProperties:(t,e,n,r)=>{const i=e.properties||{},s=e.patternProperties;if(Yi(s)!=="object")return;const o=[],a=Object.keys(n),l=Object.keys(s).map(h=>({regex:new RegExp(h),patternSchema:s[h]}));return a.forEach(h=>{let f=!1;for(let p=0,g=l.length;p<g;p+=1)if(l[p].regex.test(h)){f=!0;const b=t.validate(n[h],l[p].patternSchema,`${r}/${h}`);b&&b.length>0&&o.push(...b)}i[h]||f===!1&&e.additionalProperties===!1&&o.push(t.errors.patternPropertiesError({key:h,pointer:r,schema:e,value:n,patterns:Object.keys(s).join(",")}))}),o},properties:(t,e,n,r)=>{const i=[],s=Object.keys(e.properties||{});for(let o=0;o<s.length;o+=1){const a=s[o];if(gZ(n,a)){const l=t.step(a,e,n,r),h=t.validate(n[a],l,`${r}/${a}`);i.push(...h)}}return i},propertiesRequired:(t,e,n,r)=>{const i=[],s=Object.keys(e.properties||{});for(let o=0;o<s.length;o+=1){const a=s[o];if(n[a]===void 0)i.push(t.errors.requiredPropertyError({key:a,pointer:r,schema:e,value:n}));else{const l=t.step(a,e,n,r),h=t.validate(n[a],l,`${r}/${a}`);i.push(...h)}}return i},required:(t,e,n,r)=>{if(Array.isArray(e.required)!==!1)return e.required.map(i=>{if(!gZ(n,i))return t.errors.requiredPropertyError({key:i,pointer:r,schema:e,value:n})})},requiredNotEmpty:(t,e,n,r)=>{if(Array.isArray(e.required)!==!1)return e.required.map(i=>{if(n[i]==null||n[i]==="")return t.errors.valueNotEmptyError({property:i,pointer:`${r}/${i}`,schema:e,value:n})})},uniqueItems:(t,e,n,r)=>{if((Array.isArray(n)&&e.uniqueItems)===!1)return;const i=[],s=[];return n.forEach((o,a)=>{for(let l=a+1;l<n.length;l+=1)toe(o,n[l])&&!i.includes(l)&&(s.push(t.errors.uniqueItemsError({pointer:`${r}/${l}`,duplicatePointer:`${r}/${a}`,arrayPointer:r,value:JSON.stringify(o),schema:e})),i.push(l))}),s}};function Np(t){if(t===void 0)return;const e={type:Yi(t)};return e.type==="object"&&Zy(t)&&(e.properties={},Object.keys(t).forEach(n=>e.properties[n]=Np(t[n]))),e.type==="array"&&Array.isArray(t)&&(t.length===1?e.items=Np(t[0]):e.items=t.map(Np)),e}const v6e={array:(t,e,n,r,i)=>{const s=r?.[e],o=Yi(n.items);if(o==="object")return Xq(t,n.items,s,`${i}/${e}`)||t.resolveRef(n.items);if(o==="array"){if(n.items[e]===!0)return Np(s);if(n.items[e]===!1)return t.errors.invalidDataError({key:e,value:s,pointer:i,schema:n});if(n.items[e])return t.resolveRef(n.items[e]);if(n.additionalItems===!1)return t.errors.additionalItemsError({key:e,value:s,pointer:i,schema:n});if(n.additionalItems===!0||n.additionalItems===void 0)return Np(s);if(Yi(n.additionalItems)==="object")return n.additionalItems;throw new Error(`Invalid schema ${JSON.stringify(n,null,2)} for ${JSON.stringify(r,null,2)}`)}return n.additionalItems!==!1&&s?Np(s):new Error(`Invalid array schema for ${e} at ${i}`)},object:(t,e,n,r,i)=>{var s;n=Xq(t,n,r,i);const o=(s=n?.properties)===null||s===void 0?void 0:s[e];if(o!==void 0){if(o===!1)return t.errors.forbiddenPropertyError({property:e,value:r,pointer:i,schema:n});if(o===!0)return Np(r?.[e]);const h=t.resolveRef(o);if(au(h))return h;if(h&&Array.isArray(h.oneOf)){const f=t.resolveOneOf(r[e],h,`${i}/${e}`);for(const p in h)p!=="oneOf"&&f[p]===void 0&&(f[p]=h[p]);return f}if(h)return h}const{patternProperties:a}=n;if(Yi(a)==="object"){let h;const f=Object.keys(a);for(let p=0,g=f.length;p<g;p+=1)if(h=new RegExp(f[p]),h.test(e))return a[f[p]]}const{additionalProperties:l}=n;return Yi(l)==="object"?n.additionalProperties:r&&(l===void 0||l===!0)?Np(r[e]):t.errors.unknownPropertyError({property:e,value:r,pointer:`${i}`,schema:n})}};function roe(t,e,n,r,i="#"){var s;const o=Yi(r);let a=(s=n.type)!==null&&s!==void 0?s:o;if(Array.isArray(a)){if(!a.includes(o))return t.errors.typeError({value:r,pointer:i,expected:n.type,received:o,schema:n});a=o}const l=v6e[a];if(l){const h=l(t,`${e}`,n,r,i);return h===void 0?t.errors.schemaWarning({pointer:i,value:r,schema:n,key:e}):h}return new Error(`Unsupported schema type ${n.type} for key ${e}`)}function ioe(t,e,n=t.rootSchema){var r;if(n.oneOf)return n.oneOf.map(s=>t.resolveRef(s));if(!((r=n.items)===null||r===void 0)&&r.oneOf)return n.items.oneOf.map(s=>t.resolveRef(s));const i=t.step(e,n,{},"#");return au(i)?i:[i]}const b6e={array:(t,e,n,r)=>t.typeKeywords.array.filter(i=>e&&e[i]!=null).map(i=>t.validateKeyword[i](t,e,n,r)),object:(t,e,n,r)=>t.typeKeywords.object.filter(i=>e&&e[i]!=null).map(i=>t.validateKeyword[i](t,e,n,r)),string:(t,e,n,r)=>t.typeKeywords.string.filter(i=>e&&e[i]!=null).map(i=>t.validateKeyword[i](t,e,n,r)),integer:(t,e,n,r)=>t.typeKeywords.number.filter(i=>e&&e[i]!=null).map(i=>t.validateKeyword[i](t,e,n,r)),number:(t,e,n,r)=>t.typeKeywords.number.filter(i=>e&&e[i]!=null).map(i=>t.validateKeyword[i](t,e,n,r)),boolean:(t,e,n,r)=>t.typeKeywords.boolean.filter(i=>e&&e[i]!=null).map(i=>t.validateKeyword[i](t,e,n,r)),null:(t,e,n,r)=>t.typeKeywords.null.filter(i=>e&&e[i]!=null).map(i=>t.validateKeyword[i](t,e,n,r))};function _6e(t,e){const n=Yi(t);return n==="number"&&(e==="integer"||Array.isArray(e)&&e.includes("integer"))?Number.isInteger(t)||isNaN(t)?"integer":"number":n}function soe(t,e,n=t.rootSchema,r="#"){if(n=t.resolveRef(n),Yi(n)==="boolean")return n?[]:[t.errors.invalidDataError({pointer:r,schema:n,value:e})];if(au(n))return[n];if(n.const!==void 0)return toe(n.const,e)?[]:[t.errors.constError({pointer:r,schema:n,value:e,expected:n.const})];const i=_6e(e,n.type),s=n.type||i;return i!==s&&(!Array.isArray(s)||!s.includes(i))?[t.errors.typeError({pointer:r,schema:n,value:e,received:i,expected:s})]:t.validateType[i]==null?[t.errors.invalidTypeError({pointer:r,schema:n,value:e,receivedType:i})]:jk(t.validateType[i](t,n,e,r)).filter(T6)}const x6e={typeKeywords:{array:["allOf","anyOf","enum","items","maxItems","minItems","not","oneOf","uniqueItems"],boolean:["enum","not","allOf","anyOf","oneOf"],object:["additionalProperties","dependencies","enum","format","minProperties","maxProperties","patternProperties","properties","required","not","oneOf","allOf","anyOf"],string:["allOf","anyOf","enum","format","maxLength","minLength","not","oneOf","pattern"],number:["allOf","anyOf","enum","format","maximum","minimum","multipleOf","not","oneOf"],null:["allOf","anyOf","enum","format","not","oneOf"]},validateKeyword:noe,validateType:b6e,validateFormat:Wse,errors:Xse,addRemoteSchema:Use,compileSchema:XTe,createSchemaOf:Np,each:Zse,eachSchema:ED,getChildSchemaSelection:ioe,getSchema:Yse,getTemplate:Jse,isValid:eoe,resolveAllOf:Lse,resolveAnyOf:Qse,resolveOneOf:Ose,resolveRef:Bse,step:roe,validate:soe,templateDefaultOptions:eO.templateDefaultOptions};class ooe extends jse{constructor(e,n={}){super(DN(x6e,n),e)}}const yZ="__compiled",vZ="__ref",w6e="getRef",O6e="getRoot",S6e=/(#|\/)+$/g;function k6e(t,e,n=e,r=!1){if(e===!0||e===!1||e===void 0||e[yZ]!==void 0)return e;const i={ids:{},remotes:t.remotes},s=JSON.stringify(e),o=JSON.parse(s);if(Object.defineProperty(o,yZ,{enumerable:!1,value:!0}),Object.defineProperty(o,w6e,{enumerable:!1,value:Cg.bind(null,i,o)}),r===!1&&s.includes("$ref")===!1)return o;o!==n&&Object.defineProperty(o,"$defs",{enumerable:!0,value:Object.assign({},n.definitions,n.$defs,o.definitions,o.$defs)});const a={},l=()=>o;return ED(o,(h,f)=>{var p;if(h.$id){if(h.$id.startsWith("http")&&/(allOf|anyOf|oneOf)\/\d+$/.test(f)){const T=f.replace(/\/(allOf|anyOf|oneOf)\/\d+$/,""),I=nb.get(o,T);h.$id=(p=I.$id)!==null&&p!==void 0?p:h.$id}i.ids[h.$id.replace(S6e,"")]=f}f=`#${f}`.replace(/##+/,"#");const g=f.replace(/\/[^/]+$/,""),b=f.replace(/\/[^/]+\/[^/]+$/,""),x=a[g]||a[b],k=R6(x,h.$id);a[f]=k,i.ids[k]==null&&(i.ids[k]=f),h.$ref&&!h[vZ]&&(Object.defineProperty(h,vZ,{enumerable:!1,value:R6(k,h.$ref)}),Object.defineProperty(h,O6e,{enumerable:!1,value:l}))}),o}const C6e={...noe,contains:(t,e,n,r)=>{if(e.contains===!1)return t.errors.containsArrayError({pointer:r,value:n,schema:e});if(e.contains===!0)return Array.isArray(n)&&n.length===0?t.errors.containsAnyError({pointer:r,value:n,schema:e}):void 0;if(Yi(e.contains)==="object"){for(let i=0;i<n.length;i+=1)if(t.isValid(n[i],e.contains))return;return t.errors.containsError({pointer:r,schema:e,value:n})}},exclusiveMaximum:(t,e,n,r)=>{if(!isNaN(e.exclusiveMaximum)&&e.exclusiveMaximum<=n)return t.errors.maximumError({maximum:e.exclusiveMaximum,length:n,pointer:r,schema:e,value:n})},exclusiveMinimum:(t,e,n,r)=>{if(!isNaN(e.exclusiveMinimum)&&e.exclusiveMinimum>=n)return t.errors.minimumError({minimum:e.exclusiveMinimum,length:n,pointer:r,schema:e,value:n})},if:nTe,maximum:(t,e,n,r)=>{if(!isNaN(e.maximum)&&e.maximum&&e.maximum<n)return t.errors.maximumError({maximum:e.maximum,length:n,pointer:r,schema:e,value:n})},minimum:(t,e,n,r)=>{if(!isNaN(e.minimum)&&e.minimum>n)return t.errors.minimumError({minimum:e.minimum,length:n,pointer:r,schema:e,value:n})},patternProperties:(t,e,n,r)=>{const i=e.properties||{},s=e.patternProperties;if(Yi(s)!=="object")return;const o=[],a=Object.keys(n),l=Object.keys(s).map(h=>({regex:new RegExp(h),patternSchema:s[h]}));return a.forEach(h=>{let f=!1;for(let p=0,g=l.length;p<g;p+=1)if(l[p].regex.test(h)){if(f=!0,l[p].patternSchema===!1){o.push(t.errors.patternPropertiesError({key:h,pointer:r,patterns:Object.keys(s).join(","),schema:e,value:n}));return}const b=t.validate(n[h],l[p].patternSchema,`${r}/${h}`);b&&b.length>0&&o.push(...b)}i[h]||f===!1&&e.additionalProperties===!1&&o.push(t.errors.patternPropertiesError({key:h,pointer:r,patterns:Object.keys(s).join(","),schema:e,value:n}))}),o},propertyNames:(t,e,n,r)=>{if(e.propertyNames===!1)return Object.keys(n).length===0?void 0:t.errors.invalidPropertyNameError({property:Object.keys(n),pointer:r,value:n,schema:e});if(e.propertyNames===!0||Yi(e.propertyNames)!=="object")return;const i=[],s=Object.keys(n),o={...e.propertyNames,type:"string"};return s.forEach(a=>{const l=t.validate(a,o,`${r}/${a}`);l.length>0&&i.push(t.errors.invalidPropertyNameError({property:a,pointer:r,validationError:l[0],value:n[a],schema:e}))}),i}},A6e={array:(t,e,n,r)=>t.typeKeywords.array.filter(i=>e&&e[i]!=null).map(i=>t.validateKeyword[i](t,e,n,r)),object:(t,e,n,r)=>t.typeKeywords.object.filter(i=>e&&e[i]!=null).map(i=>t.validateKeyword[i](t,e,n,r)),string:(t,e,n,r)=>t.typeKeywords.string.filter(i=>e&&e[i]!=null).map(i=>t.validateKeyword[i](t,e,n,r)),integer:(t,e,n,r)=>t.typeKeywords.number.filter(i=>e&&e[i]!=null).map(i=>t.validateKeyword[i](t,e,n,r)),number:(t,e,n,r)=>t.typeKeywords.number.filter(i=>e&&e[i]!=null).map(i=>t.validateKeyword[i](t,e,n,r)),boolean:(t,e,n,r)=>t.typeKeywords.boolean.filter(i=>e&&e[i]!=null).map(i=>t.validateKeyword[i](t,e,n,r)),null:(t,e,n,r)=>t.typeKeywords.null.filter(i=>e&&e[i]!=null).map(i=>t.validateKeyword[i](t,e,n,r))},aoe={typeKeywords:{array:["allOf","anyOf","contains","enum","if","items","maxItems","minItems","not","oneOf","uniqueItems"],boolean:["allOf","anyOf","enum","not","oneOf"],object:["additionalProperties","allOf","anyOf","dependencies","enum","format","if","maxProperties","minProperties","not","oneOf","patternProperties","properties","propertyNames","required"],string:["allOf","anyOf","enum","format","if","maxLength","minLength","not","oneOf","pattern"],number:["allOf","anyOf","enum","exclusiveMaximum","exclusiveMinimum","format","if","maximum","minimum","multipleOf","not","oneOf"],null:["allOf","anyOf","enum","format","not","oneOf"]},validateKeyword:C6e,validateType:A6e,validateFormat:Wse,errors:Xse,addRemoteSchema:Use,compileSchema:k6e,createSchemaOf:Np,each:Zse,eachSchema:ED,getChildSchemaSelection:ioe,getSchema:Yse,getTemplate:Jse,isValid:eoe,resolveAllOf:Lse,resolveAnyOf:Qse,resolveOneOf:Ose,resolveRef:Bse,step:roe,validate:soe,templateDefaultOptions:eO.templateDefaultOptions};class loe extends jse{constructor(e,n={}){super(DN(aoe,n),e)}}({...aoe});function Dp(t,e,n=[]){const r=document.createElement(t);return Object.entries(e).forEach(([i,s])=>{if(i==="text"){r.innerText=s;return}if(i==="inner"){r.innerHTML=s;return}r.setAttribute(i,s)}),n.forEach(i=>r.appendChild(i)),r}const E6e="modulepreload",T6e=function(t,e){return new URL(t,e).href},bZ={},cR=function(e,n,r){let i=Promise.resolve();if(n&&n.length>0){let h=function(f){return Promise.all(f.map(p=>Promise.resolve(p).then(g=>({status:"fulfilled",value:g}),g=>({status:"rejected",reason:g}))))};const o=document.getElementsByTagName("link"),a=document.querySelector("meta[property=csp-nonce]"),l=a?.nonce||a?.getAttribute("nonce");i=h(n.map(f=>{if(f=T6e(f,r),f in bZ)return;bZ[f]=!0;const p=f.endsWith(".css"),g=p?'[rel="stylesheet"]':"";if(r)for(let x=o.length-1;x>=0;x--){const k=o[x];if(k.href===f&&(!p||k.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${f}"]${g}`))return;const b=document.createElement("link");if(b.rel=p?"stylesheet":E6e,p||(b.as="script"),b.crossOrigin="",b.href=f,l&&b.setAttribute("nonce",l),document.head.appendChild(b),p)return new Promise((x,k)=>{b.addEventListener("load",x),b.addEventListener("error",()=>k(new Error(`Unable to preload CSS for ${f}`)))})}))}function s(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return i.then(o=>{for(const a of o||[])a.status==="rejected"&&s(a.reason);return e().catch(s)})},_Z={};function P6e(t){let e=_Z[t];if(e)return e;e=_Z[t]=[];for(let n=0;n<128;n++){const r=String.fromCharCode(n);e.push(r)}for(let n=0;n<t.length;n++){const r=t.charCodeAt(n);e[r]="%"+("0"+r.toString(16).toUpperCase()).slice(-2)}return e}function y2(t,e){typeof e!="string"&&(e=y2.defaultChars);const n=P6e(e);return t.replace(/(%[a-f0-9]{2})+/gi,function(r){let i="";for(let s=0,o=r.length;s<o;s+=3){const a=parseInt(r.slice(s+1,s+3),16);if(a<128){i+=n[a];continue}if((a&224)===192&&s+3<o){const l=parseInt(r.slice(s+4,s+6),16);if((l&192)===128){const h=a<<6&1984|l&63;h<128?i+="ï¿½ï¿½":i+=String.fromCharCode(h),s+=3;continue}}if((a&240)===224&&s+6<o){const l=parseInt(r.slice(s+4,s+6),16),h=parseInt(r.slice(s+7,s+9),16);if((l&192)===128&&(h&192)===128){const f=a<<12&61440|l<<6&4032|h&63;f<2048||f>=55296&&f<=57343?i+="ï¿½ï¿½ï¿½":i+=String.fromCharCode(f),s+=6;continue}}if((a&248)===240&&s+9<o){const l=parseInt(r.slice(s+4,s+6),16),h=parseInt(r.slice(s+7,s+9),16),f=parseInt(r.slice(s+10,s+12),16);if((l&192)===128&&(h&192)===128&&(f&192)===128){let p=a<<18&1835008|l<<12&258048|h<<6&4032|f&63;p<65536||p>1114111?i+="ï¿½ï¿½ï¿½ï¿½":(p-=65536,i+=String.fromCharCode(55296+(p>>10),56320+(p&1023))),s+=9;continue}}i+="ï¿½"}return i})}y2.defaultChars=";/?:@&=+$,#";y2.componentChars="";const xZ={};function D6e(t){let e=xZ[t];if(e)return e;e=xZ[t]=[];for(let n=0;n<128;n++){const r=String.fromCharCode(n);/^[0-9a-z]$/i.test(r)?e.push(r):e.push("%"+("0"+n.toString(16).toUpperCase()).slice(-2))}for(let n=0;n<t.length;n++)e[t.charCodeAt(n)]=t[n];return e}function VC(t,e,n){typeof e!="string"&&(n=e,e=VC.defaultChars),typeof n>"u"&&(n=!0);const r=D6e(e);let i="";for(let s=0,o=t.length;s<o;s++){const a=t.charCodeAt(s);if(n&&a===37&&s+2<o&&/^[0-9a-f]{2}$/i.test(t.slice(s+1,s+3))){i+=t.slice(s,s+3),s+=2;continue}if(a<128){i+=r[a];continue}if(a>=55296&&a<=57343){if(a>=55296&&a<=56319&&s+1<o){const l=t.charCodeAt(s+1);if(l>=56320&&l<=57343){i+=encodeURIComponent(t[s]+t[s+1]),s++;continue}}i+="%EF%BF%BD";continue}i+=encodeURIComponent(t[s])}return i}VC.defaultChars=";/?:@&=+$,-_.!~*'()#";VC.componentChars="-_.!~*'()";function LN(t){let e="";return e+=t.protocol||"",e+=t.slashes?"//":"",e+=t.auth?t.auth+"@":"",t.hostname&&t.hostname.indexOf(":")!==-1?e+="["+t.hostname+"]":e+=t.hostname||"",e+=t.port?":"+t.port:"",e+=t.pathname||"",e+=t.search||"",e+=t.hash||"",e}function F6(){this.protocol=null,this.slashes=null,this.auth=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.pathname=null}const I6e=/^([a-z0-9.+-]+:)/i,M6e=/:[0-9]*$/,R6e=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,F6e=["<",">",'"',"`"," ","\r",`
`,"	"],L6e=["{","}","|","\\","^","`"].concat(F6e),$6e=["'"].concat(L6e),wZ=["%","/","?",";","#"].concat($6e),OZ=["/","?","#"],B6e=255,SZ=/^[+a-z0-9A-Z_-]{0,63}$/,N6e=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,kZ={javascript:!0,"javascript:":!0},CZ={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0};function $N(t,e){if(t&&t instanceof F6)return t;const n=new F6;return n.parse(t,e),n}F6.prototype.parse=function(t,e){let n,r,i,s=t;if(s=s.trim(),!e&&t.split("#").length===1){const h=R6e.exec(s);if(h)return this.pathname=h[1],h[2]&&(this.search=h[2]),this}let o=I6e.exec(s);if(o&&(o=o[0],n=o.toLowerCase(),this.protocol=o,s=s.substr(o.length)),(e||o||s.match(/^\/\/[^@\/]+@[^@\/]+/))&&(i=s.substr(0,2)==="//",i&&!(o&&kZ[o])&&(s=s.substr(2),this.slashes=!0)),!kZ[o]&&(i||o&&!CZ[o])){let h=-1;for(let x=0;x<OZ.length;x++)r=s.indexOf(OZ[x]),r!==-1&&(h===-1||r<h)&&(h=r);let f,p;h===-1?p=s.lastIndexOf("@"):p=s.lastIndexOf("@",h),p!==-1&&(f=s.slice(0,p),s=s.slice(p+1),this.auth=f),h=-1;for(let x=0;x<wZ.length;x++)r=s.indexOf(wZ[x]),r!==-1&&(h===-1||r<h)&&(h=r);h===-1&&(h=s.length),s[h-1]===":"&&h--;const g=s.slice(0,h);s=s.slice(h),this.parseHost(g),this.hostname=this.hostname||"";const b=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!b){const x=this.hostname.split(/\./);for(let k=0,T=x.length;k<T;k++){const I=x[k];if(I&&!I.match(SZ)){let M="";for(let B=0,j=I.length;B<j;B++)I.charCodeAt(B)>127?M+="x":M+=I[B];if(!M.match(SZ)){const B=x.slice(0,k),j=x.slice(k+1),Q=I.match(N6e);Q&&(B.push(Q[1]),j.unshift(Q[2])),j.length&&(s=j.join(".")+s),this.hostname=B.join(".");break}}}}this.hostname.length>B6e&&(this.hostname=""),b&&(this.hostname=this.hostname.substr(1,this.hostname.length-2))}const a=s.indexOf("#");a!==-1&&(this.hash=s.substr(a),s=s.slice(0,a));const l=s.indexOf("?");return l!==-1&&(this.search=s.substr(l),s=s.slice(0,l)),s&&(this.pathname=s),CZ[n]&&this.hostname&&!this.pathname&&(this.pathname=""),this};F6.prototype.parseHost=function(t){let e=M6e.exec(t);e&&(e=e[0],e!==":"&&(this.port=e.substr(1)),t=t.substr(0,t.length-e.length)),t&&(this.hostname=t)};const z6e=Object.freeze(Object.defineProperty({__proto__:null,decode:y2,encode:VC,format:LN,parse:$N},Symbol.toStringTag,{value:"Module"})),uoe=/[\0-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,coe=/[\0-\x1F\x7F-\x9F]/,Q6e=/[\xAD\u0600-\u0605\u061C\u06DD\u070F\u0890\u0891\u08E2\u180E\u200B-\u200F\u202A-\u202E\u2060-\u2064\u2066-\u206F\uFEFF\uFFF9-\uFFFB]|\uD804[\uDCBD\uDCCD]|\uD80D[\uDC30-\uDC3F]|\uD82F[\uDCA0-\uDCA3]|\uD834[\uDD73-\uDD7A]|\uDB40[\uDC01\uDC20-\uDC7F]/,BN=/[!-#%-\*,-\/:;\?@\[-\]_\{\}\xA1\xA7\xAB\xB6\xB7\xBB\xBF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061D-\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u09FD\u0A76\u0AF0\u0C77\u0C84\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1B7D\u1B7E\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E4F\u2E52-\u2E5D\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]|\uD800[\uDD00-\uDD02\uDF9F\uDFD0]|\uD801\uDD6F|\uD802[\uDC57\uDD1F\uDD3F\uDE50-\uDE58\uDE7F\uDEF0-\uDEF6\uDF39-\uDF3F\uDF99-\uDF9C]|\uD803[\uDEAD\uDF55-\uDF59\uDF86-\uDF89]|\uD804[\uDC47-\uDC4D\uDCBB\uDCBC\uDCBE-\uDCC1\uDD40-\uDD43\uDD74\uDD75\uDDC5-\uDDC8\uDDCD\uDDDB\uDDDD-\uDDDF\uDE38-\uDE3D\uDEA9]|\uD805[\uDC4B-\uDC4F\uDC5A\uDC5B\uDC5D\uDCC6\uDDC1-\uDDD7\uDE41-\uDE43\uDE60-\uDE6C\uDEB9\uDF3C-\uDF3E]|\uD806[\uDC3B\uDD44-\uDD46\uDDE2\uDE3F-\uDE46\uDE9A-\uDE9C\uDE9E-\uDEA2\uDF00-\uDF09]|\uD807[\uDC41-\uDC45\uDC70\uDC71\uDEF7\uDEF8\uDF43-\uDF4F\uDFFF]|\uD809[\uDC70-\uDC74]|\uD80B[\uDFF1\uDFF2]|\uD81A[\uDE6E\uDE6F\uDEF5\uDF37-\uDF3B\uDF44]|\uD81B[\uDE97-\uDE9A\uDFE2]|\uD82F\uDC9F|\uD836[\uDE87-\uDE8B]|\uD83A[\uDD5E\uDD5F]/,hoe=/[\$\+<->\^`\|~\xA2-\xA6\xA8\xA9\xAC\xAE-\xB1\xB4\xB8\xD7\xF7\u02C2-\u02C5\u02D2-\u02DF\u02E5-\u02EB\u02ED\u02EF-\u02FF\u0375\u0384\u0385\u03F6\u0482\u058D-\u058F\u0606-\u0608\u060B\u060E\u060F\u06DE\u06E9\u06FD\u06FE\u07F6\u07FE\u07FF\u0888\u09F2\u09F3\u09FA\u09FB\u0AF1\u0B70\u0BF3-\u0BFA\u0C7F\u0D4F\u0D79\u0E3F\u0F01-\u0F03\u0F13\u0F15-\u0F17\u0F1A-\u0F1F\u0F34\u0F36\u0F38\u0FBE-\u0FC5\u0FC7-\u0FCC\u0FCE\u0FCF\u0FD5-\u0FD8\u109E\u109F\u1390-\u1399\u166D\u17DB\u1940\u19DE-\u19FF\u1B61-\u1B6A\u1B74-\u1B7C\u1FBD\u1FBF-\u1FC1\u1FCD-\u1FCF\u1FDD-\u1FDF\u1FED-\u1FEF\u1FFD\u1FFE\u2044\u2052\u207A-\u207C\u208A-\u208C\u20A0-\u20C0\u2100\u2101\u2103-\u2106\u2108\u2109\u2114\u2116-\u2118\u211E-\u2123\u2125\u2127\u2129\u212E\u213A\u213B\u2140-\u2144\u214A-\u214D\u214F\u218A\u218B\u2190-\u2307\u230C-\u2328\u232B-\u2426\u2440-\u244A\u249C-\u24E9\u2500-\u2767\u2794-\u27C4\u27C7-\u27E5\u27F0-\u2982\u2999-\u29D7\u29DC-\u29FB\u29FE-\u2B73\u2B76-\u2B95\u2B97-\u2BFF\u2CE5-\u2CEA\u2E50\u2E51\u2E80-\u2E99\u2E9B-\u2EF3\u2F00-\u2FD5\u2FF0-\u2FFF\u3004\u3012\u3013\u3020\u3036\u3037\u303E\u303F\u309B\u309C\u3190\u3191\u3196-\u319F\u31C0-\u31E3\u31EF\u3200-\u321E\u322A-\u3247\u3250\u3260-\u327F\u328A-\u32B0\u32C0-\u33FF\u4DC0-\u4DFF\uA490-\uA4C6\uA700-\uA716\uA720\uA721\uA789\uA78A\uA828-\uA82B\uA836-\uA839\uAA77-\uAA79\uAB5B\uAB6A\uAB6B\uFB29\uFBB2-\uFBC2\uFD40-\uFD4F\uFDCF\uFDFC-\uFDFF\uFE62\uFE64-\uFE66\uFE69\uFF04\uFF0B\uFF1C-\uFF1E\uFF3E\uFF40\uFF5C\uFF5E\uFFE0-\uFFE6\uFFE8-\uFFEE\uFFFC\uFFFD]|\uD800[\uDD37-\uDD3F\uDD79-\uDD89\uDD8C-\uDD8E\uDD90-\uDD9C\uDDA0\uDDD0-\uDDFC]|\uD802[\uDC77\uDC78\uDEC8]|\uD805\uDF3F|\uD807[\uDFD5-\uDFF1]|\uD81A[\uDF3C-\uDF3F\uDF45]|\uD82F\uDC9C|\uD833[\uDF50-\uDFC3]|\uD834[\uDC00-\uDCF5\uDD00-\uDD26\uDD29-\uDD64\uDD6A-\uDD6C\uDD83\uDD84\uDD8C-\uDDA9\uDDAE-\uDDEA\uDE00-\uDE41\uDE45\uDF00-\uDF56]|\uD835[\uDEC1\uDEDB\uDEFB\uDF15\uDF35\uDF4F\uDF6F\uDF89\uDFA9\uDFC3]|\uD836[\uDC00-\uDDFF\uDE37-\uDE3A\uDE6D-\uDE74\uDE76-\uDE83\uDE85\uDE86]|\uD838[\uDD4F\uDEFF]|\uD83B[\uDCAC\uDCB0\uDD2E\uDEF0\uDEF1]|\uD83C[\uDC00-\uDC2B\uDC30-\uDC93\uDCA0-\uDCAE\uDCB1-\uDCBF\uDCC1-\uDCCF\uDCD1-\uDCF5\uDD0D-\uDDAD\uDDE6-\uDE02\uDE10-\uDE3B\uDE40-\uDE48\uDE50\uDE51\uDE60-\uDE65\uDF00-\uDFFF]|\uD83D[\uDC00-\uDED7\uDEDC-\uDEEC\uDEF0-\uDEFC\uDF00-\uDF76\uDF7B-\uDFD9\uDFE0-\uDFEB\uDFF0]|\uD83E[\uDC00-\uDC0B\uDC10-\uDC47\uDC50-\uDC59\uDC60-\uDC87\uDC90-\uDCAD\uDCB0\uDCB1\uDD00-\uDE53\uDE60-\uDE6D\uDE70-\uDE7C\uDE80-\uDE88\uDE90-\uDEBD\uDEBF-\uDEC5\uDECE-\uDEDB\uDEE0-\uDEE8\uDEF0-\uDEF8\uDF00-\uDF92\uDF94-\uDFCA]/,foe=/[ \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000]/,j6e=Object.freeze(Object.defineProperty({__proto__:null,Any:uoe,Cc:coe,Cf:Q6e,P:BN,S:hoe,Z:foe},Symbol.toStringTag,{value:"Module"})),U6e=new Uint16Array('áµ<ÃÄ±ÊÒÕ»×ÙµÛÞ¢ßà à©àªà¶¡à¹­à¼à¼¦áá¨á¡ááááá¥\0\0\0\0\0\0á«áá¦á°á·á½¾â â°âââ»ââ ¤â¤â´â¹â¿ããºã¹ã¬ã£¾ã¨¨ã©±ã« ã¬®à EMabcfglmnoprstu\\bfmsÂÂÂÂÂÂ¦Â³Â¹ÃÃligè»ÃäPè»&ä¦cuteè»Ãäreve;äÄiyx}rcè»Ãä;är;ìðraveè»Ãäpha;äacr;äd;æ©ÄgpÂÂ¡on;äf;ìð¸plyFunction;æ¡ingè»ÃäÄcsÂ¾Ãr;ìðign;æildeè»Ãämlè»ÃäÐaceforsuÃ¥Ã»Ã¾ÄÄÄ¢Ä§ÄªÄcrÃªÃ²kslash;æÅ¶Ã¶Ã¸;æ«§ed;æy;äÆcrtÄÄÄause;æµnoullis;æ¬a;är;ìðpf;ìð¹eve;äcÃ²Ämpeq;æÜHOacdefhilorsuÅÅÅÆÆÆ¢ÆµÆ·ÆºÇÈÉ³É¸É¾cy;ä§PYè»Â©ä©ÆcpyÅÅ¢Åºute;äÄ;iÅ§Å¨ætalDifferentialD;æleys;æ­ÈaeioÆÆÆÆron;ädilè»Ãärc;änint;æ°ot;äÄdnÆ§Æ­illa;ä¸terDot;ä·Ã²Å¿i;ä§rcleÈDMPTÇÇÇÇot;æinus;ælus;æimes;æoÄcsÇ¢Ç¸kwiseContourIntegral;æ²eCurlyÄDQÈÈoubleQuote;æuote;æÈlnpuÈÈ¨ÉÉonÄ;eÈ¥È¦æ·;æ©´ÆgitÈ¯È¶Èºruent;æ¡nt;æ¯ourIntegral;æ®ÄfrÉÉ;æoduct;ænterClockwiseContourIntegral;æ³oss;æ¨¯cr;ìðpÄ;CÊÊæap;æÖDJSZacefiosÊ Ê¬Ê°Ê´Ê¸ËËË¡Ë¦Ì³ÒÄ;oÅ¹Ê¥trahd;æ¤cy;äcy;äcy;äÆgrsÊ¿ËËger;æ¡r;æ¡hv;æ«¤ÄayËËron;ä;älÄ;tËËæa;är;ìðÄafË«Ì§ÄcmË°Ì¢riticalÈADGTÌÌÌÌcute;ä´oÅ´ÌÌ;äbleAcute;ärave;ä ilde;äond;æferentialD;æÑ°Ì½\0\0\0ÍÍ\0Ðf;ìð»Æ;DEÍÍÍä¨ot;æqual;æbleÌCDLRUVÍ£Í²ÎÏÏ¢Ï¸ontourIntegraÃ¬È¹oÉ´Í¹\0\0Í»Â»ÍnArrow;æÄeoÎÎ¤ftÆARTÎÎÎ¡rrow;æightArrow;æeÃ¥ËngÄLRÎ«ÏeftÄARÎ³Î¹rrow;æ¸ightArrow;æºightArrow;æ¹ightÄATÏÏrrow;æee;æ¨pÉÏ©\0\0Ï¯rrow;æownArrow;æerticalBar;æ¥nÌABLRTaÐÐªÐ°ÑÑ¿Í¼rrowÆ;BUÐÐÐ¢æar;æ¤pArrow;æµreve;äeftËÐº\0Ñ\0ÑightVector;æ¥eeVector;æ¥ectorÄ;BÑÑæ½ar;æ¥ightÇÑ§\0Ñ±eeVector;æ¥ectorÄ;BÑºÑ»æar;æ¥eeÄ;AÒÒæ¤rrow;æ§ÄctÒÒr;ìðrok;äà NTacdfglmopqstuxÒ½ÓÓÓÓÓ¢Ó§Ó®ÓµÔ¡Ô¯Ô¶ÕÕÕ Õ¥G;äHè»Ãäcuteè»ÃäÆaiyÓÓÓron;ärcè»Ãä;ä­ot;är;ìðraveè»Ãäement;æÄapÓºÓ¾cr;ätyÉÔ\0\0ÔmallSquare;æ»erySmallSquare;æ«ÄgpÔ¦Ôªon;äf;ìð¼silon;äuÄaiÔ¼ÕlÄ;TÕÕæ©µilde;ælibrium;æÄciÕÕr;æ°m;æ©³a;ämlè»ÃäÄipÕªÕ¯sts;æonentialE;æÊcfiosÖÖÖÖ²×y;ä¤r;ìðlledÉÖ\0\0Ö£mallSquare;æ¼erySmallSquare;æªÍ°Öº\0Ö¿\0\0×f;ìð½All;æriertrf;æ±cÃ²×ØJTabcdfgorst×¨×¬×¯×ºØØØØØØ£Ù¬Ù²cy;äè»>ä¾mmaÄ;d×·×¸ä;äreve;äÆeiyØØØdil;ä¢rc;ä;äot;ä r;ìð;æpf;ìð¾eaterÌEFGLSTØµÙÙÙÙÙ¦qualÄ;LØ¾Ø¿æ¥ess;æullEqual;æ§reater;æª¢ess;æ·lantEqual;æ©¾ilde;æ³cr;ìð¢;æ«ÐAacfiosuÚÚÚÚÚÚªÚ¾ÛRDcy;äªÄctÚÚek;ä;äirc;ä¤r;ælbertSpace;æÇ°Ú¯\0Ú²f;æizontalLine;æÄctÛÛÃ²Ú©rok;ä¦mpÅÛÛownHumÃ°Ä¯qual;æÜEJOacdfgmnostuÛºÛ¾ÜÜÜÜÜÜ¡Ü¨ÝÝ¸ÞÞÞcy;älig;ä²cy;äcuteè»ÃäÄiyÜÜrcè»Ãä;äot;ä°r;æraveè»ÃäÆ;apÜ Ü¯Ü¿ÄcgÜ´Ü·r;äªinaryI;ælieÃ³ÏÇ´Ý\0Ý¢Ä;eÝÝæ¬ÄgrÝÝral;æ«section;æisibleÄCTÝ¬Ý²omma;æ£imes;æ¢ÆgptÝ¿ÞÞon;ä®f;ìða;äcr;æilde;ä¨Ç«Þ\0Þcy;älè»ÃäÊcfosuÞ¬Þ·Þ¼ßßÄiyÞ±Þµrc;ä´;är;ìðpf;ìðÇ£ß\0ßr;ìð¥rcy;äkcy;äÎHJacfosß¤ß¨ß¬ß±ß½à à cy;ä¥cy;äppa;äÄeyß¶ß»dil;ä¶;är;ìðpf;ìðcr;ìð¦ÖJTaceflmostà ¥à ©à ¬à¡à¡£à¦³à¦¸à§à§à¨·à©cy;äè»<ä¼Êcmnprà ·à ¼à¡à¡à¡ute;ä¹bda;äg;æªlacetrf;ær;æÆaeyà¡à¡à¡¡ron;ä½dil;ä»;äÄfsà¡¨à¥°tÔACDFRTUVarà¡¾à¢©à¢±à£ à£¦à£¼à¤¯à¥Îà¥ªÄnrà¢à¢gleBracket;æ¨rowÆ;BRà¢à¢à¢æar;æ¤ightArrow;æeiling;æoÇµà¢·\0à£bleBracket;æ¦nÇà£\0à£eeVector;æ¥¡ectorÄ;Bà£à£æar;æ¥loor;æightÄAVà£¯à£µrrow;æector;æ¥Äerà¤à¤eÆ;AVà¤à¤à¤æ£rrow;æ¤ector;æ¥iangleÆ;BEà¤¤à¤¥à¤©æ²ar;æ§qual;æ´pÆDTVà¤·à¥à¥ownVector;æ¥eeVector;æ¥ ectorÄ;Bà¥à¥æ¿ar;æ¥ectorÄ;Bà¥¥à¥¦æ¼ar;æ¥ightÃ¡ÎsÌEFGLSTà¥¾à¦à¦à¦à¦¢à¦­qualGreater;æullEqual;æ¦reater;æ¶ess;æª¡lantEqual;æ©½ilde;æ²r;ìðÄ;eà¦½à¦¾æftarrow;æidot;ä¿Ænpwà§à¨à¨gÈLRlrà§à§·à¨à¨eftÄARà§¦à§¬rrow;æµightArrow;æ·ightArrow;æ¶eftÄarÎ³à¨ightÃ¡Î¿ightÃ¡Ïf;ìðerÄLRà¨¢à¨¬eftArrow;æightArrow;æÆchtà¨¾à©à©Ã²à¡;æ°rok;ä;æªÐacefiosuà©à©à© à©·à©¼àªàªàªp;æ¤y;äÄdlà©¥à©¯iumSpace;ælintrf;æ³r;ìðnusPlus;æpf;ìðcÃ²à©¶;äÒJacefostuàª£àª§àª­à«à¬à¬à¶à¶à¶cy;äcute;äÆaeyàª´àª¹àª¾ron;ädil;ä;äÆgswà«à«°à¬ativeÆMTVà«à«à«¨ediumSpace;æhiÄcnà«¦à«Ã«à«eryThiÃ®à«tedÄGLà«¸à¬reaterGreateÃ²Ù³essLesÃ³à©Line;är;ìðÈBnptà¬¢à¬¨à¬·à¬ºreak;æ BreakingSpace;ä f;æÚ;CDEGHLNPRSTVà­à­à­ªà­¼à®¡à¯«à°à±à²à²¦à³àµ¡à¶æ«¬Äouà­à­¤ngruent;æ¢pCap;æ­oubleVerticalBar;æ¦Ælqxà®à®à®ement;æualÄ;Tà®à®æ ilde;ìâÌ¸ists;æreaterÎ;EFGLSTà®¶à®·à®½à¯à¯à¯à¯¥æ¯qual;æ±ullEqual;ìâ§Ì¸reater;ìâ«Ì¸ess;æ¹lantEqual;ìâ©¾Ì¸ilde;æµumpÅà¯²à¯½ownHump;ìâÌ¸qual;ìâÌ¸eÄfsà°à°§tTriangleÆ;BEà°à°à°¡æªar;ìâ§Ì¸qual;æ¬sÌ;EGLSTà°µà°¶à°¼à±à±à±æ®qual;æ°reater;æ¸ess;ìâªÌ¸lantEqual;ìâ©½Ì¸ilde;æ´estedÄGLà±¨à±¹reaterGreater;ìâª¢Ì¸essLess;ìâª¡Ì¸recedesÆ;ESà²à²à²æqual;ìâª¯Ì¸lantEqual;æ Äeià²«à²¹verseElement;æghtTriangleÆ;BEà³à³à³æ«ar;ìâ§Ì¸qual;æ­Äquà³à´uareSuÄbpà³¨à³¹setÄ;Eà³°à³³ìâÌ¸qual;æ¢ersetÄ;Eà´à´ìâÌ¸qual;æ£Æbcpà´à´¤àµsetÄ;Eà´à´ìââqual;æceedsÈ;ESTà´²à´³à´»àµæqual;ìâª°Ì¸lantEqual;æ¡ilde;ìâ¿Ì¸ersetÄ;Eàµàµìââqual;æildeÈ;EFTàµ®àµ¯àµµàµ¿æqual;æullEqual;æilde;æerticalBar;æ¤cr;ìð©ildeè»Ãä;äÜEacdfgmoprstuvà¶½à·à·à·à·à· à·§à·¼à¸à¸ à¸¢à¸²à¸¿à¹lig;äcuteè»ÃäÄiyà·à·rcè»Ãä;äblac;är;ìðraveè»ÃäÆaeià·®à·²à·¶cr;äga;ä©cron;äpf;ìðenCurlyÄDQà¸à¸oubleQuote;æuote;æ;æ©Äclà¸§à¸¬r;ìðªashè»ÃäiÅ¬à¸·à¸¼deè»Ãäes;æ¨·mlè»ÃäerÄBPà¹à¹ Äarà¹à¹r;æ¾acÄekà¹à¹;æet;æ´arenthesis;æÒacfhilorsà¹¿àºàºàºàºàºàºàº°à»¼rtialD;æy;är;ìði;ä¦;ä usMinus;ä±Äipàº¢àº­ncareplanÃ¥Úf;æÈ;eioàº¹àººà» à»¤æª»cedesÈ;ESTà»à»à»à»æºqual;æª¯lantEqual;æ¼ilde;æ¾me;æ³Ädpà»©à»®uct;æortionÄ;aÈ¥à»¹l;æÄcià¼à¼r;ìð«;ä¨ÈUfosà¼à¼à¼à¼OTè»"ä¢r;ìðpf;æcr;ìð¬ØBEacefhiorsuà¼¾à½à½à½ à½³à¾§à¾ªà¾­áá©á´á¾arr;æ¤Gè»Â®ä®Æcnrà½à½à½ute;äg;æ«rÄ;tà½à½æ l;æ¤Æaeyà½§à½¬à½±ron;ädil;ä;ä Ä;và½¸à½¹æerseÄEUà¾à¾Älqà¾à¾ement;æuilibrium;æpEquilibrium;æ¥¯rÂ»à½¹o;ä¡ghtÐACDFTUVaà¿à¿«à¿³á¢á¨ááÏÄnrà¿à¿gleBracket;æ©rowÆ;BLà¿à¿à¿¡æar;æ¥eftArrow;æeiling;æoÇµà¿¹\0ábleBracket;æ§nÇá\0áeeVector;æ¥ectorÄ;Bááæar;æ¥loor;æÄerá­áeÆ;AVáµá¶á¼æ¢rrow;æ¦ector;æ¥iangleÆ;BEáááæ³ar;æ§qual;æµpÆDTVá£á®á¸ownVector;æ¥eeVector;æ¥ectorÄ;Bááæ¾ar;æ¥ectorÄ;Bááæar;æ¥Äpuááf;ændImplies;æ¥°ightarrow;æÄchá¹á¼r;æ;æ±leDelayed;æ§´ÚHOacfhimoqstuá¤á±á·á½ááááá¡á§áµá»á¿ÄCcá©á®Hcy;ä©y;ä¨FTcy;ä¬cute;äÊ;aeiyáááááæª¼ron;ä dil;ärc;ä;ä¡r;ìðortÈDLRUáªá´á¾áownArrowÂ»ÐeftArrowÂ»à¢ightArrowÂ»à¿pArrow;ægma;ä£allCircle;æpf;ìðÉ²á­\0\0á°t;æareÈ;ISUá»á¼áá¯æ¡ntersection;æuÄbpáásetÄ;Eááæqual;æersetÄ;Eá¨á©æqual;ænion;æcr;ìð®ar;æÈbcmpááááÄ;sááæetÄ;Eááqual;æÄchá áeedsÈ;ESTá­á®á´á¿æ»qual;æª°lantEqual;æ½ilde;æ¿ThÃ¡à¾;æÆ;esááá£ærsetÄ;Eááæqual;æetÂ»áÖHRSacfhiorsá¾ááááá±á¶ááááORNè»ÃäADE;æ¢ÄHcáácy;äy;ä¦Äbuáá;ä;ä¤Æaeyá¥áªá¯ron;ä¤dil;ä¢;ä¢r;ìðÄeiá»áÇ²á\0áefore;æ´a;äÄcnáákSpace;ìââSpace;ældeÈ;EFTá«á¬á²á¼æ¼qual;æullEqual;æilde;æpf;ìðipleDot;æÄctáár;ìð¯rok;ä¦à«¡á·ááá¦\0á¬á±\0\0\0\0\0á¸á½á·á\0á¿áááÄcrá»áuteè»ÃärÄ;oááæcir;æ¥rÇ£á\0áy;äve;ä¬Äiyáá£rcè»Ãä;ä£blac;ä°r;ìðraveè»Ãäacr;äªÄdiáá©erÄBPááÄaráár;äacÄekáá;æet;æµarenthesis;æonÄ;Pá°á±ælus;æÄgpá»á¿on;ä²f;ìðÐADETadpsáá®á¸áÏ¨ááá³rrowÆ;BDáá á¤ar;æ¤ownArrow;æownArrow;æquilibrium;æ¥®eeÄ;Aááæ¥rrow;æ¥ownÃ¡Ï³erÄLRáá¨eftArrow;æightArrow;æiÄ;lá¹áºäon;ä¥ing;ä®cr;ìð°ilde;ä¨mlè»ÃäÒDbcdefosvá§á¬á°á³á¾ááááash;æ«ar;æ««y;äashÄ;lá»á¼æ©;æ«¦Äeráá;æÆbtyáááºar;æÄ;iáácalÈBLSTá¡á¥áªá´ar;æ£ine;ä¼eparator;æilde;æThinSpace;ær;ìðpf;ìðcr;ìð±dash;æªÊcefosá§á¬á±á¶á¼irc;ä´dge;ær;ìðpf;ìðcr;ìð²Èfiosáááár;ìð;äpf;ìðcr;ìð³ÒAIUacfosuá±áµá¹á½ááááá cy;ä¯cy;äcy;ä®cuteè»ÃäÄiyáárc;ä¶;ä«r;ìðpf;ìðcr;ìð´ml;ä¸ÐHacdefosáµá¹á¿áááá á¤cy;äcute;ä¹Äayááron;ä½;äot;ä»Ç²á\0áoWidtÃ¨à«a;är;æ¨pf;æ¤cr;ìðµà¯¡ááá\0á°á¶á¿\0\0\0\0ááá«áá­\0ááá²á¹\0á¾cuteè»Ã¡ä¡reve;äÌ;Ediuyááá¡á£á¨á­æ¾;ìâ¾Ì³;æ¿rcè»Ã¢ä¢teè»Â´Ì;ä°ligè»Ã¦ä¦Ä;rÂ²áº;ìðraveè»Ã ä ÄepááÄfpáásym;æµÃ¨áha;ä±ÄapácÄclá¤á§r;äg;æ¨¿É¤á°\0\0áÊ;adsváºá»á¿ááæ§nd;æ©;æ©lope;æ©;æ©Î;elmrszááááá¿ááæ ;æ¦¤eÂ»ásdÄ;aá¥á¦æ¡Ñ¡á°á²á´á¶á¸áºá¼á¾;æ¦¨;æ¦©;æ¦ª;æ¦«;æ¦¬;æ¦­;æ¦®;æ¦¯tÄ;vááæbÄ;dááæ¾;æ¦Äptááh;æ¢Â»Â¹arr;æ¼Ägpá£á§on;äf;ìðÎ;Eaeiopáá»á½áááá;æ©°cir;æ©¯;æd;æs;ä§roxÄ;eááÃ±áingè»Ã¥ä¥Æctyá¡á¦á¨r;ìð¶;äªmpÄ;eáá¯Ã±Êildeè»Ã£ä£mlè»Ã¤ä¤ÄciááoninÃ´É²nt;æ¨à Nabcdefiklnoprsuá­á±á°á¼ááá¸á½á á¦á ¹á¡áá¤½á¥á¥°ot;æ«­Äcrá¶ákÈcepsááááong;æpsilon;ä¶rime;æµimÄ;eááæ½q;æÅ¶á¢á¦ee;æ½edÄ;gá¬á­æeÂ»á­rkÄ;táá·brk;æ¶Äoyáá;ä±quo;æÊcmprtááá¡á¤á¨ausÄ;eÄÄptyv;æ¦°sÃ©ánoÃµÄÆahwá¯á±á³;ä²;æ¶een;æ¬r;ìðgÎcostuvwááá³ááááÆaiuáááÃ°Ý rc;æ¯pÂ»á±Ædptá¤á¨á­ot;æ¨lus;æ¨imes;æ¨É±á¹\0\0á¾cup;æ¨ar;æriangleÄduááown;æ½p;æ³plus;æ¨eÃ¥áÃ¥á­arow;æ¤Æakoá­á ¦á µÄcná²á £kÆlstáºÖ«á ozenge;æ§«riangleÈ;dlrá á á á æ´own;æ¾eft;æight;æ¸k;æ£Æ±á «\0á ³Æ²á ¯\0á ±;æ;æ4;æck;æÄeoá ¾á¡Ä;qá¡á¡ì=â¥uiv;ìâ¡â¥t;æÈptwxá¡á¡á¡§á¡¬f;ìðÄ;táá¡£omÂ»átie;æØDHUVbdhmptuvá¢á¢á¢ªá¢»á£á£á£¬á£¿á¤á¤á¤á¤¡ÈLRlrá¢á¢á¢á¢;æ;æ;æ;æÊ;DUduá¢¡á¢¢á¢¤á¢¦á¢¨æ;æ¦;æ©;æ¤;æ§ÈLRlrá¢³á¢µá¢·á¢¹;æ;æ;æ;æÎ;HLRhlrá£á£á£á£á£á£á£æ;æ¬;æ£;æ ;æ«;æ¢;æox;æ§ÈLRlrá£¤á£¦á£¨á£ª;æ;æ;æ;æÊ;DUduÚ½á£·á£¹á£»á£½;æ¥;æ¨;æ¬;æ´inus;ælus;æimes;æ ÈLRlrá¤á¤á¤á¤;æ;æ;æ;æÎ;HLRhlrá¤°á¤±á¤³á¤µá¤·á¤¹á¤»æ;æª;æ¡;æ;æ¼;æ¤;æÄevÄ£á¥barè»Â¦ä¦Èceioá¥á¥á¥á¥ r;ìð·mi;æmÄ;eáálÆ;bhá¥¨á¥©á¥«ä;æ§sub;æÅ¬á¥´á¥¾lÄ;eá¥¹á¥ºæ¢tÂ»á¥ºpÆ;EeÄ¯á¦á¦;æª®Ä;qÛÛà³¡á¦§\0á§¨á¨á¨á¨²\0á¨·á©\0\0áª´\0\0á«\0\0á¬¡á¬®á­á­\0á¯½\0á°Æcprá¦­á¦²á§ute;äÌ;abcdsá¦¿á§á§á§á§á§æ©nd;æ©rcup;æ©Äauá§á§p;æ©p;æ©ot;æ©;ìâ©ï¸Äeoá§¢á§¥t;æÃ®ÚÈaeiuá§°á§»á¨á¨Ç°á§µ\0á§¸s;æ©on;ädilè»Ã§ä§rc;äpsÄ;sá¨á¨æ©m;æ©ot;äÆdmná¨á¨ á¨¦ilè»Â¸Æ­ptyv;æ¦²tèÂ¢;eá¨­á¨®ä¢rÃ¤Æ²r;ìð Æceiá¨½á©á©y;äckÄ;má©á©æarkÂ»á©;ärÎ;Ecefmsá©á© á©¢á©«áª¤áªªáª®æ;æ§Æ;elá©©á©ªá©­äq;æeÉ¡á©´\0\0áªrrowÄlrá©¼áªeft;æºight;æ»ÊRSacdáªáªáªáªáªÂ»à½;æst;æirc;æash;ænint;æ¨id;æ«¯cir;æ§ubsÄ;uáª»áª¼æ£itÂ»áª¼Ë¬á«á«á«º\0á¬onÄ;eá«á«äºÄ;qÃÃÉ­á«\0\0á«¢aÄ;tá«á«ä¬;äÆ;flá«¨á«©á««æÃ®á eÄmxá«±á«¶entÂ»á«©eÃ³ÉÇ§á«¾\0á¬Ä;dá»á¬ot;æ©­nÃ´ÉÆfryá¬á¬á¬;ìðoÃ¤ÉèÂ©;sÅá¬r;æÄaoá¬¥á¬©rr;æµss;æÄcuá¬²á¬·r;ìð¸Äbpá¬¼á­Ä;eá­á­æ«;æ«Ä;eá­á­æ«;æ«dot;æ¯Îdelprvwá­ á­¬á­·á®á®¬á¯á¯¹arrÄlrá­¨á­ª;æ¤¸;æ¤µÉ°á­²\0\0á­µr;æc;æarrÄ;pá­¿á®æ¶;æ¤½Ì;bcdosá®á®á®á®¡á®¥á®¨æªrcap;æ©Äauá®á®p;æ©p;æ©ot;ær;æ©;ìâªï¸Èalrvá®µá®¿á¯á¯£rrÄ;má®¼á®½æ·;æ¤¼yÆevwá¯á¯á¯qÉ°á¯\0\0á¯reÃ£á­³uÃ£á­µee;æedge;æenè»Â¤ä¤earrowÄlrá¯®á¯³eftÂ»á®ightÂ»á®½eÃ¤á¯Äciá°á°oninÃ´Ç·nt;æ±lcty;æ­à¦AHabcdefhijlorstuwzá°¸á°»á°¿á±á±©á±µá²á²á²¬á²·á³»á³¿á´áµ»á¶á¶«á¶»á·á·rÃ²Îar;æ¥¥Èglrsá±á±á±á±ger;æ eth;æ¸Ã²á³hÄ;vá±á±æÂ»à¤Å«á±¡á±§arow;æ¤aÃ£ÌÄayá±®á±³ron;ä;ä´Æ;aoÌ²á±¼á²ÄgrÊ¿á²r;ætseq;æ©·Æglmá²á²á²è»Â°ä°ta;ä´ptyv;æ¦±Äirá²£á²¨sht;æ¥¿;ìð¡arÄlrá²³á²µÂ»à£Â»áÊaegsvá³Í¸á³á³á³ mÆ;osÌ¦á³á³ndÄ;sÌ¦á³uit;æ¦amma;äin;æ²Æ;ioá³§á³¨á³¸ä·deèÃ·;oá³§á³°ntimes;ænÃ¸á³·cy;äcÉ¯á´\0\0á´rn;æop;æÊlptuwá´á´á´¢áµáµlar;ä¤f;ìðÊ;empsÌá´­á´·á´½áµqÄ;dÍá´³ot;æinus;æ¸lus;æquare;æ¡blebarwedgÃ¥ÃºnÆadhá®áµáµ§ownarrowÃ³á²arpoonÄlráµ²áµ¶efÃ´á²´ighÃ´á²¶Å¢áµ¿á¶karoÃ·à½É¯á¶\0\0á¶rn;æop;æÆcotá¶á¶£á¶¦Äryá¶á¶¡;ìð¹;äl;æ§¶rok;äÄdrá¶°á¶´ot;æ±iÄ;fá¶ºá æ¿Äahá·á·rÃ²Ð©aÃ²à¾¦angle;æ¦¦Äciá·á·y;ägrarr;æ¿à¤Dacdefglmnopqrstuxá¸á¸á¸á¸¸Õ¸á¸¼á¹á¹¡á¹¾áº¥áº¯áº½á»¡á¼ªá¼·á½á½á½ÄDoá¸á´´oÃ´á²Äcsá¸á¸uteè»Ã©ä©ter;æ©®Èaioyá¸¢á¸§á¸±á¸¶ron;ärÄ;cá¸­á¸®æè»Ãªäªlon;æ;äot;äÄDrá¹á¹ot;æ;ìð¢Æ;rsá¹á¹á¹æªaveè»Ã¨ä¨Ä;dá¹á¹æªot;æªÈ;ilsá¹ªá¹«á¹²á¹´æªnters;æ§;æÄ;dá¹¹á¹ºæªot;æªÆapsáºáºáºcr;ätyÆ;sváºáºáºæetÂ»áºpÄ1;áºáº¤Ä³áº¡áº£;æ;ææÄgsáºªáº¬;äp;æÄgpáº´áº¸on;äf;ìðÆalsá»á»á»rÄ;sá»á»æl;æ§£us;æ©±iÆ;lvá»á»á»äµonÂ»á»;äµÈcsuvá»ªá»³á¼á¼£Äioá»¯á¸±rcÂ»á¸®É©á»¹\0\0á»»Ã­ÕantÄglá¼á¼trÂ»á¹essÂ»á¹ºÆaeiá¼á¼á¼ls;ä½st;ævÄ;DÈµá¼ D;æ©¸parsl;æ§¥ÄDaá¼¯á¼³ot;ærr;æ¥±Æcdiá¼¾á½á»¸r;æ¯oÃ´ÍÄahá½á½;ä·è»Ã°ä°Ämrá½á½lè»Ã«ä«o;æ¬Æcipá½¡á½¤á½§l;ä¡sÃ´Õ®Äeoá½¬á½´ctatioÃ®ÕnentialÃ¥Õ¹à§¡á¾\0á¾\0á¾¡á¾§\0\0á¿á¿\0á¿\0á¿¦á¿ªâ\0ââllingdotseÃ±á¹y;ämale;æÆilrá¾­á¾³á¿lig;èï¬É©á¾¹\0\0á¾½g;èï¬ig;èï¬;ìð£lig;èï¬lig;ìfjÆaltá¿á¿á¿¡t;æ­ig;èï¬ns;æ±of;äÇ°á¿®\0á¿³f;ìðÄakÖ¿á¿·Ä;vá¿¼á¿½æ;æ«artint;æ¨ÄaoââÄcsââÎ±ââ°â¸ââ\0âÎ²â¢â¥â§âªâ¬\0â®è»Â½ä½;æè»Â¼ä¼;æ;æ;æÆ³â´\0â¶;æ;æÊ´â¾â\0\0âè»Â¾ä¾;æ;æ5;æÆ¶â\0â;æ;æ8;æl;æwn;æ¢cr;ìð»à¢Eabcdefgijlnorstvââââ¥â°â´â°âµâºâ¿âââ¸Ìâ¾ââÄ;lÙâ;æªÆcmpâââute;äµmaÄ;dâá³ä³;æªreve;äÄiyâªâ®rc;ä;ä³ot;ä¡È;lqsØ¾Ùâ½âÆ;qsØ¾ÙâlanÃ´Ù¥È;cdlÙ¥âââ¥c;æª©otÄ;oââæªÄ;lâ¢â£æª;æªÄ;eâªâ­ìâï¸s;æªr;ìð¤Ä;gÙ³Ømel;æ·cy;äÈ;EajÙâââ;æª;æª¥;æª¤ÈEaesâââ©â´;æ©pÄ;pâ£â¤æªroxÂ»â¤Ä;qâ®â¯æªÄ;qâ®âim;æ§pf;ìðÄciââr;æmÆ;elÙ«ââ;æª;æªè>;cdlqr×®â âªâ®â³â¹Äciâ¥â§;æª§r;æ©ºot;æPar;æ¦uest;æ©¼ÊadelsââªâÙâÇ°â\0âproÃ¸âr;æ¥¸qÄlqØ¿âlesÃ³âiÃ­Ù«Äenâ£â­rtneqq;ìâ©ï¸ÃâªÔAabcefkosyâââ±âµâºâââ¯â¨â½rÃ²Î ÈilmrâââârsÃ°áfÂ»â¤ilÃ´Ú©Ädrâ â¤cy;äÆ;cwà£´â«â¯ir;æ¥;æ­ar;æirc;ä¥ÆalrââârtsÄ;uââæ¥itÂ»âlip;æ¦con;æ¹r;ìð¥sÄewâ£â©arow;æ¤¥arow;æ¤¦Êamoprâºâ¾âââ£rr;æ¿tht;æ»kÄlrââeftarrow;æ©ightarrow;æªf;ìðbar;æÆcltâ¯â´â¸r;ìð½asÃ¨â´rok;ä§Äbpââull;æhenÂ»á±à«¡â£\0âª\0â¸ââ\0ââ³\0\0â¸â¢â§â¢â¿\0ââªâ´cuteè»Ã­ä­Æ;iyÝ±â°âµrcè»Ã®ä®;ä¸Äcxâ¼â¿y;äµclè»Â¡ä¡ÄfrÎâ;ìð¦raveè»Ã¬ä¬È;inoÜ¾ââ©â®Äinâ¢â¦nt;æ¨t;æ­fin;æ§ta;æ©lig;ä³Æaopâ¾ââÆcgtâââr;ä«ÆelpÜââinÃ¥ÞarÃ´Ü h;ä±f;æ·ed;äµÊ;cfotÓ´â¬â±â½âare;æinÄ;tâ¸â¹æie;æ§doÃ´âÊ;celpÝââââ¡al;æºÄgrââerÃ³á£Ã£âarhk;æ¨rod;æ¨¼Ècgptâ¯â²â¶â»y;äon;ä¯f;ìða;ä¹uestè»Â¿ä¿Äciââr;ìð¾nÊ;EdsvÓ´âââ¡Ó³;æ¹ot;æµÄ;vâ¦â§æ´;æ³Ä;iÝ·â®lde;ä©Ç«â¸\0â¼cy;älè»Ã¯ä¯Ìcfmosuââââ¡â§âµÄiyâârc;äµ;ä¹r;ìð§ath;ä·pf;ìðÇ£â¬\0â±r;ìð¿rcy;äkcy;äÐacfghjosâââ¢â§â­â±âµâ»ppaÄ;vââäº;ä°Äeyââ dil;ä·;äºr;ìð¨reen;ä¸cy;äcy;äpf;ìðcr;ìðà®ABEHabcdefghjlmnoprstuvâ°ââââââ½âââââ¥â¹â½ââ²âââ¨âââ â Æartâ·âºâ¼rÃ²à§Ã²Îail;æ¤arr;æ¤Ä;gà¦â;æªar;æ¥¢à¥£â¥\0âª\0â±\0\0\0\0\0âµâº\0âââ\0â¹ute;äºmptyv;æ¦´raÃ®à¡bda;ä»gÆ;dlà¢ââ;æ¦Ã¥à¢;æªuoè»Â«ä«rÐ;bfhlpstà¢ââ¦â©â«â®â±âµÄ;fà¢â£s;æ¤s;æ¤Ã«âp;æ«l;æ¤¹im;æ¥³l;æ¢Æ;aeâ¿ââæª«il;æ¤Ä;sââæª­;ìâª­ï¸Æabrââârr;æ¤rk;æ²Äakâ¢â¬cÄekâ¨âª;ä»;äÄesâ±â³;æ¦lÄduâ¹â»;æ¦;æ¦Èaeuyââââron;ä¾Ädiââil;ä¼Ã¬à¢°Ã¢â©;ä»Ècqrsâ£â¦â­â½a;æ¤¶uoÄ;rà¸áÄduâ²â·har;æ¥§shar;æ¥h;æ²Ê;fgqsââà¦â³â¿æ¤tÊahlrtââ¤â·ââ¨rrowÄ;tà¢â¡aÃ©â¶arpoonÄduâ¯â´ownÂ»ÑpÂ»à¥¦eftarrows;æightÆahsââârrowÄ;sà£´à¢§arpoonÃ³à¾quigarroÃ·â°hreetimes;æÆ;qsâà¦âºlanÃ´à¦¬Ê;cdgsà¦¬ââââ¨c;æª¨otÄ;oââæ©¿Ä;rââæª;æªÄ;eâ¢â¥ìâï¸s;æªÊadegsâ³â¹â½ââpproÃ¸âot;æqÄgqââÃ´à¦gtÃ²âÃ´à¦iÃ­à¦²Æilrâà£¡âsht;æ¥¼;ìð©Ä;Eà¦â£;æªÅ¡â©â¶rÄduâ²â®Ä;là¥¥â³;æ¥ªlk;æcy;äÊ;achtà©âââârÃ²âorneÃ²á´ard;æ¥«ri;æºÄioââ¤dot;äustÄ;aâ¬â­æ°cheÂ»â­ÈEaesâ»â½ââ;æ¨pÄ;pââæªroxÂ»âÄ;qââæªÄ;qââ»im;æ¦Ðabnoptwzâ©â´â·ââ¯âââÄnrâ®â±g;æ¬r;æ½rÃ«à£gÆlmrâ¿ââeftÄarà§¦âightÃ¡à§²apsto;æ¼ightÃ¡à§½parrowÄlrâ¥â©efÃ´â­ight;æ¬Æaflâ¶â¹â½r;æ¦;ìðus;æ¨­imes;æ¨´Å¡ââst;æÃ¡áÆ;efââá ængeÂ»âarÄ;lâ¤â¥ä¨t;æ¦Êachmtâ³â¶â¼âârÃ²à¢¨orneÃ²á¶arÄ;dà¾â;æ¥­;æri;æ¿Ìachiqtââà©â¢â®â»quo;æ¹r;ìðmÆ;egà¦²âªâ¬;æª;æªÄbuâªâ³oÄ;rà¸â¹;ærok;äè<;cdhilqrà «ââ¹ââ â¥âªâ°Äciââ;æª¦r;æ©¹reÃ¥â²mes;æarr;æ¥¶uest;æ©»ÄPiâµâ¹ar;æ¦Æ;efâ à¤­á ærÄduâ â shar;æ¥har;æ¥¦Äenâ â ¡rtneqq;ìâ¨ï¸Ãâ ÜDacdefhilnopsuâ¡â¡â¢â¢â¢â¢ â¢¥â¢¨â£â£¢â£¤àªâ£³â¤Dot;æºÈclprâ¡â¡â¡£â¡½rè»Â¯ä¯Äetâ¡â¡;æÄ;eâ¡â¡æ seÂ»â¡Ä;sá»â¡¨toÈ;dluá»â¡³â¡·â¡»owÃ®ÒefÃ´à¤Ã°áker;æ®Äoyâ¢â¢mma;æ¨©;ä¼ash;æasuredangleÂ»á¦r;ìðªo;æ§Æcdnâ¢¯â¢´â£roè»ÂµäµÈ;acdá¤â¢½â£â£sÃ´á§ir;æ«°otè»Â·ÆµusÆ;bdâ£á¤â£æÄ;uá´¼â£;æ¨ªÅ£â£â£¡p;æ«Ã²âÃ°àªÄdpâ£©â£®els;æ§f;ìðÄctâ£¸â£½r;ìðposÂ»áÆ;lmâ¤â¤â¤ä¼timap;æ¸à°GLRVabcdefghijlmoprstuvwâ¥â¥â¥¾â¦â¦â§â§©â¨â¨â©â©âªâªâª¤âª¨â¬â¬â­â­¿â®®â°´â±§â±¼â³©Ägtâ¥â¥;ìâÌ¸Ä;vâ¥à¯ìâ«âÆeltâ¥â¥²â¥¶ftÄarâ¥¡â¥§rrow;æightarrow;æ;ìâÌ¸Ä;vâ¥»à±ìâªâightarrow;æÄDdâ¦â¦ash;æ¯ash;æ®Êbcnptâ¦£â¦§â¦¬â¦±â§laÂ»Ëute;äg;ìâ âÊ;Eiopà¶â¦¼â§â§â§;ìâ©°Ì¸d;ìâÌ¸s;äroÃ¸à¶urÄ;aâ§â§æ®lÄ;sâ§à¬¸Ç³â§\0â§£pè»Â à¬·mpÄ;eà¯¹à°Êaeouyâ§´â§¾â¨â¨â¨Ç°â§¹\0â§»;æ©on;ädil;ängÄ;dàµ¾â¨ot;ìâ©­Ì¸p;æ©;ä½ash;æÎ;Aadqsxà®â¨©â¨­â¨»â©â©â©rr;ærÄhrâ¨³â¨¶k;æ¤¤Ä;oá²á°ot;ìâÌ¸uiÃ¶à­£Äeiâ©â©ar;æ¤¨Ã­à®istÄ;sà® à®r;ìð«ÈEestà¯â©¦â©¹â©¼Æ;qsà®¼â©­à¯¡Æ;qsà®¼à¯â©´lanÃ´à¯¢iÃ­à¯ªÄ;rà®¶âªÂ»à®·ÆAapâªâªâªrÃ²â¥±rr;æ®ar;æ«²Æ;svà¾âªà¾Ä;dâª¡âª¢æ¼;æºcy;äÎAEadestâª·âªºâª¾â«â«â«¶â«¹rÃ²â¥¦;ìâ¦Ì¸rr;ær;æ¥È;fqsà°»â«â«£â«¯tÄarâ«â«rroÃ·â«ightarroÃ·âªÆ;qsà°»âªºâ«ªlanÃ´à±Ä;sà±â«´Â»à°¶iÃ­à±Ä;rà°µâ«¾iÄ;eà°à°¥iÃ¤à¶Äptâ¬â¬f;ìðèÂ¬;inâ¬â¬â¬¶ä¬nÈ;Edvà®â¬¤â¬¨â¬®;ìâ¹Ì¸ot;ìâµÌ¸Ç¡à®â¬³â¬µ;æ·;æ¶iÄ;và²¸â¬¼Ç¡à²¸â­â­;æ¾;æ½Æaorâ­â­£â­©rÈ;astà­»â­â­â­lleÃ¬à­»l;ìâ«½â¥;ìâÌ¸lint;æ¨Æ;ceà²â­°â­³uÃ¥à²¥Ä;cà²â­¸Ä;eà²â­½Ã±à²ÈAaitâ®â®â®â®§rÃ²â¦rrÆ;cwâ®â®â®æ;ìâ¤³Ì¸;ìâÌ¸ghtarrowÂ»â®riÄ;eà³à³Îchimpquâ®½â¯â¯â¬à­¸â¯¤â¯¯È;cerà´²â¯à´·â¯uÃ¥àµ;ìðortÉ­â¬\0\0â¯arÃ¡â­mÄ;eàµ®â¯Ä;qàµ´àµ³suÄbpâ¯«â¯­Ã¥à³¸Ã¥à´Æbcpâ¯¶â°â°È;Eesâ¯¿â°à´¢â°æ;ìâ«Ì¸etÄ;eà´â°qÄ;qà´£â°cÄ;eà´²â°Ã±à´¸È;Eesâ°¢â°£àµâ°§æ;ìâ«Ì¸etÄ;eàµâ°®qÄ;qàµ â°£Ègilrâ°½â°¿â±â±Ã¬à¯ldeè»Ã±ä±Ã§à±iangleÄlrâ±â±eftÄ;eà°â±Ã±à°¦ightÄ;eà³â±¥Ã±à³Ä;mâ±¬â±­ä½Æ;esâ±´â±µâ±¹ä£ro;æp;æÒDHadgilrsâ²â²â²â²â²£â²°â²¶â³â³£ash;æ­arr;æ¤p;ìââash;æ¬Äetâ²¨â²¬;ìâ¥â;ì>ânfin;æ§ÆAetâ²½â³â³rr;æ¤;ìâ¤âÄ;râ³â³ì<âie;ìâ´âÄAtâ³â³rr;æ¤rie;ìâµâim;ìâ¼âÆAanâ³°â³´â´rr;ærÄhrâ³ºâ³½k;æ¤£Ä;oá§á¥ear;æ¤§ááª\0\0\0\0\0\0\0\0\0\0\0\0\0â´­\0â´¸âµâµ âµ¥âµ²â¶á¬\0\0â¶â¶«\0â·â·\0â·â¸â¸«â¸¾â¹Äcsâ´±áªuteè»Ã³ä³Äiyâ´¼âµrÄ;cáªâµè»Ã´ä´;ä¾Êabiosáª âµâµÇâµlac;äv;æ¨¸old;æ¦¼lig;äÄcrâµ©âµ­ir;æ¦¿;ìð¬Í¯âµ¹\0\0âµ¼\0â¶n;äaveè»Ã²ä²;æ§Äbmâ¶à·´ar;æ¦µÈacitâ¶â¶â¶¥â¶¨rÃ²áªÄirâ¶â¶ r;æ¦¾oss;æ¦»nÃ¥à¹;æ§Æaeiâ¶±â¶µâ¶¹cr;äga;äÆcdnâ·â·Çron;ä¿;æ¦¶pf;ìð Æaelâ·â·Çr;æ¦·rp;æ¦¹Î;adiosvâ·ªâ·«â·®â¸â¸â¸â¸æ¨rÃ²áªÈ;efmâ··â·¸â¸â¸æ©rÄ;oâ·¾â·¿æ´fÂ»â·¿è»Âªäªè»Âºäºgof;æ¶r;æ©lope;æ©;æ©Æcloâ¸â¸¡â¸§Ã²â¸ashè»Ã¸ä¸l;æiÅ¬â¸¯â¸´deè»ÃµäµesÄ;aÇâ¸ºs;æ¨¶mlè»Ã¶ä¶bar;æ½à«¡â¹\0â¹½\0âºâº\0âº¢âº¹\0\0â»àº\0â¼\0\0â¼«â¾¼\0â¿rÈ;astÐâ¹§â¹²àºèÂ¶;lâ¹­â¹®ä¶leÃ¬ÐÉ©â¹¸\0\0â¹»m;æ«³;æ«½y;ä¿rÊcimptâºâºâºá¡¥âºnt;ä¥od;ä®il;æ°enk;æ±r;ìð­Æimoâº¨âº°âº´Ä;vâº­âº®ä;ämaÃ´à©¶ne;æÆ;tvâº¿â»â»ächforkÂ»á¿½;äÄauâ»â»nÄckâ»â»kÄ;hâ´â»;æÃ¶â´sÒ;abcdemstâ»³â»´á¤â»¹â»½â¼â¼â¼â¼ä«cir;æ¨£ir;æ¨¢Äouáµâ¼;æ¨¥;æ©²nè»Â±àºim;æ¨¦wo;æ¨§Æipuâ¼â¼ â¼¥ntint;æ¨f;ìð¡ndè»Â£ä£Ô;Eaceinosuà»â¼¿â½â½â½â¾â¾â¾â½¾â¾¶;æª³p;æª·uÃ¥à»Ä;cà»â½Ì;acensà»â½â½â½¦â½¨â½¾pproÃ¸â½urlyeÃ±à»Ã±à»Æaesâ½¯â½¶â½ºpprox;æª¹qq;æªµim;æ¨iÃ­à»meÄ;sâ¾àº®æ²ÆEasâ½¸â¾â½ºÃ°â½µÆdfpà»¬â¾â¾¯Æalsâ¾ â¾¥â¾ªlar;æ®ine;æurf;æÄ;tà»»â¾´Ã¯à»»rel;æ°Äciâ¿â¿r;ìð;äncsp;æÌfiopsuâ¿â¢â¿â¿¥â¿«â¿±r;ìð®pf;ìð¢rime;æcr;ìðÆaeoâ¿¸ããtÄeiâ¿¾ãrnionÃ³Ú°nt;æ¨stÄ;eããä¿Ã±á¼Ã´à¼àªABHabcdefhilmnoprstuxããããã ãã«ãã¢ã²ãããã¤ã©ãã®ã²ãã°ã·ÆartãããrÃ²á³Ã²Ïail;æ¤arÃ²á±¥ar;æ¥¤Îcdenqrtã¨ãµã¸ã¿ãããÄeuã­ã±;ìâ½Ì±te;äiÃ£á®mptyv;æ¦³gÈ;delà¿ããã;æ¦;æ¦¥Ã¥à¿uoè»Â»ä»rÖ;abcfhlpstwà¿ã¬ã¯ã·ã¹ã¼ã¾ããããp;æ¥µÄ;fà¿ ã´s;æ¤ ;æ¤³s;æ¤Ã«âÃ°â®l;æ¥im;æ¥´l;æ£;æÄaiããil;æ¤oÄ;nããæ¶alÃ³à¼Æabrã§ãªã®rÃ²á¥rk;æ³Äakã³ã½cÄekã¹ã»;ä½;äÄesãã;æ¦lÄduãã;æ¦;æ¦Èaeuyããã§ã©ron;äÄdiã¡ã¥il;äÃ¬à¿²Ã¢ãº;äÈclqsã´ã·ã½ãa;æ¤·dhar;æ¥©uoÄ;rÈÈh;æ³Æacgããà½lÈ;ipsà½¸ããánÃ¥á»arÃ´à¾©t;æ­Æilrã©á£ã®sht;æ¥½;ìð¯Äaoã·ãrÄduã½ã¿Â»Ñ»Ä;láã;æ¥¬Ä;vããä;ä±Ægnsãã¹ã¼htÌahlrstã¤ã°ããã¤ã®rrowÄ;tà¿ã­aÃ©ãarpoonÄduã»ã¿owÃ®ã¾pÂ»áeftÄahããrrowÃ³à¿ªarpoonÃ³Õightarrows;æquigarroÃ·ãhreetimes;æg;äingdotseÃ±á¼²ÆahmãããrÃ²à¿ªaÃ²Õ;æoustÄ;aããæ±cheÂ»ãmid;æ«®Èabptã²ã½ããÄnrã·ãºg;æ­r;æ¾rÃ«áÆaflãããr;æ¦;ìð£us;æ¨®imes;æ¨µÄapãã§rÄ;gã£ã¤ä©t;æ¦olint;æ¨arÃ²ã£Èachqã»ãá¼ãquo;æºr;ìðÄbuã»ãoÄ;rÈÈÆhirããã reÃ¥ã¸mes;æiÈ;eflãªáá ¡ã«æ¹tri;æ§luhar;æ¥¨;æàµ¡ãããã¬ã¸ã±\0ãºã¤\0\0ã¬ã°\0ã¨ããã­ã±ãã±\0ã\0\0ã³cute;äquÃ¯âºÔ;Eaceinpsyá­ã³ãµã¿ããããã¦ã©;æª´Ç°ãº\0ã¼;æª¸on;ä¡uÃ¥á¾Ä;dá³ãil;ärc;äÆEasããã;æª¶p;æªºim;æ©olint;æ¨iÃ­á;äotÆ;beã´áµãµæ;æ©¦ÎAacmstxãããããã£ã­rr;ærÄhrããÃ«â¨Ä;oà¨¶à¨´tè»Â§ä§i;ä»war;æ¤©mÄinã©Ã°nuÃ³Ã±t;æ¶rÄ;oã¶âìð°Èacoyãããã rp;æ¯Ähyããcy;ä;ärtÉ­ã\0\0ãiÃ¤á¤araÃ¬â¹¯è»Â­ä­Ägmã¨ã´maÆ;fvã±ã²ã²ä;äÐ;deglnprá«ãããããã¡ã¦ot;æ©ªÄ;qá±á°Ä;Eããæª;æª Ä;Eããæª;æªe;ælus;æ¨¤arr;æ¥²arÃ²á½Èaeitã¸ãããÄlsã½ãlsetmÃ©ãªhp;æ¨³parsl;æ§¤Ädlá£ãe;æ£Ä;eããæªªÄ;sã¢ã£æª¬;ìâª¬ï¸Æflpã®ã³ãtcy;äÄ;bã¸ã¹ä¯Ä;aã¾ã¿æ§r;æ¿f;ìð¤aÄdrãÐesÄ;uããæ itÂ»ãÆcsuã ã¹ãÄauã¥ã¯pÄ;sáã«;ìâï¸pÄ;sá´ãµ;ìâï¸uÄbpã¿ãÆ;esááãetÄ;eáãÃ±áÆ;esá¨á­ãetÄ;eá¨ãÃ±á®Æ;afá»ã¦Ö°rÅ¥ã«Ö±Â»á¼arÃ²áÈcemtã¹ã¾ããr;ìðtmÃ®Ã±iÃ¬ãarÃ¦á¾ÄarããrÄ;fãá¿æÄanãã­ightÄepã£ãªpsiloÃ®á» hÃ©âº¯sÂ»â¡Êbcmnpã»ãáããÒ;Edemnprsãããããã£ã¬ã±ã¶æ;æ«ot;æª½Ä;dáãot;æ«ult;æ«ÄEeã¨ãª;æ«;ælus;æª¿arr;æ¥¹Æeiuã½ããtÆ;enãããqÄ;qáãeqÄ;qã«ã¨m;æ«Äbpãã;æ«;æ«cÌ;acensá­ã¬ã²ã¹ã»ã¦pproÃ¸ãºurlyeÃ±á¾Ã±á³ÆaesãããpproÃ¸ãqÃ±ãg;æªÚ123;Edehlmnpsã©ã¬ã¯áã²ã´ãããããã¨ã­è»Â¹ä¹è»Â²ä²è»Â³ä³;æ«Äosã¹ã¼t;æª¾ub;æ«Ä;dá¢ãot;æ«sÄouããl;æb;æ«arr;æ¥»ult;æ«ÄEeã¤ã¦;æ«;ælus;æ«Æeiuã´ããtÆ;enáã¼ãqÄ;qá¢ã²eqÄ;qã§ã¤m;æ«Äbpãã;æ«;æ«ÆAanãã ã­rr;ærÄhrã¦ã¨Ã«â®Ä;oà¨«à¨©war;æ¤ªligè»Ãäà¯¡ããã áã³ã¹\0ã¾ã\0\0\0\0\0ãã\0ãã¬\0\0\0ãÉ²ã\0\0ãget;æ;ärÃ«à¹Æaeyã¦ã«ã°ron;ä¥dil;ä£;älrec;ær;ìð±Èeikoãããµã¼Ç²ã\0ãeÄ4fááaÆ;svãããä¸ym;äÄcnã¢ã²kÄasã¨ã®pproÃ¸áimÂ»á¬sÃ°áÄasãºã®Ã°árnè»Ã¾ä¾Ç¬Ìãâ§esèÃ;bdãããäÄ;aá¤ãr;æ¨±;æ¨°Æepsã¡ã£ãÃ¡â©È;bcfÒã¬ã°ã´ot;æ¶ir;æ«±Ä;oã¹ã¼ìð¥rk;æ«Ã¡ã¢rime;æ´Æaipããã¤dÃ¥áÎadempstã¡ããããããngleÊ;dlqrã°ã±ã¶ããæµownÂ»á¶»eftÄ;eâ ã¾Ã±à¤®;æightÄ;eãªãÃ±áot;æ¬inus;æ¨ºlus;æ¨¹b;æ§ime;æ¨»ezium;æ¢Æchtã²ã½ãÄryã·ã»;ìð;äcy;ärok;ä§ÄioããxÃ´á·headÄlrãã eftarroÃ·à¡ightarrowÂ»à½à¤AHabcdfghlmoprstuwãããã¤ã°ã¼ã ã ã £ã ´ã¡ã¡ã¡«ã¢©ã£ã£ã£ªã£¶rÃ²Ï­ar;æ¥£Äcrãã¢uteè»ÃºäºÃ²árÇ£ãª\0ã­y;äve;ä­Äiyãµãºrcè»Ã»ä»;äÆabhã ã ã rÃ²á­lac;ä±aÃ²áÄirã ã sht;æ¥¾;ìð²raveè»Ã¹ä¹Å¡ã §ã ±rÄlrã ¬ã ®Â»à¥Â»álk;æÄctã ¹ã¡É¯ã ¿\0\0ã¡rnÄ;eã¡ã¡ærÂ»ã¡op;æri;æ¸Äalã¡ã¡cr;ä«è»Â¨ÍÄgpã¡¢ã¡¦on;ä³f;ìð¦Ìadhlsuáã¡¸ã¡½á²ã¢ã¢ ownÃ¡á³arpoonÄlrã¢ã¢efÃ´ã ­ighÃ´ã ¯iÆ;hlã¢ã¢ã¢äÂ»áºonÂ»ã¢parrows;æÆcitã¢°ã£ã£É¯ã¢¶\0\0ã£rnÄ;eã¢¼ã¢½ærÂ»ã¢½op;æng;ä¯ri;æ¹cr;ìðÆdirã£ã£ã£¢ot;æ°lde;ä©iÄ;fã°ã£¨Â»á Äamã£¯ã£²rÃ²ã¢¨lè»Ã¼ä¼angle;æ¦§ÞABDacdeflnoprszã¤ã¤ã¤©ã¤­ã¦µã¦¸ã¦½ã§ã§¤ã§¨ã§³ã§¹ã§½ã¨ã¨ rÃ²Ï·arÄ;vã¤¦ã¤§æ«¨;æ«©asÃ¨Ï¡Änrã¤²ã¤·grt;æ¦Îeknprstã£ã¥ã¥ã¥ã¥ã¥¤ã¦appÃ¡âothinÃ§áºÆhirã«â»ã¥opÃ´â¾µÄ;há·ã¥¢Ã¯ãÄiuã¥©ã¥­gmÃ¡ã³Äbpã¥²ã¦setneqÄ;qã¥½ã¦ìâï¸;ìâ«ï¸setneqÄ;qã¦ã¦ìâï¸;ìâ«ï¸Ährã¦ã¦etÃ¡ãiangleÄlrã¦ªã¦¯eftÂ»à¤¥ightÂ»áy;ä²ashÂ»á¶Æelrã§ã§ã§Æ;beâ·ªã§ã§ar;æ»q;ælip;æ®Äbtã§á¨aÃ²á©r;ìð³trÃ©ã¦®suÄbpã§¯ã§±Â»à´Â»àµpf;ìð§roÃ°à»»trÃ©ã¦´Äcuã¨ã¨r;ìðÄbpã¨ã¨nÄEeã¦ã¨Â»ã¥¾nÄEeã¦ã¨Â»ã¦igzag;æ¦Îcefoprsã¨¶ã¨»ã©ã©ã©ã©¡ã©ªirc;äµÄdiã©ã©Äbgã©ã©ar;æ©eÄ;qáºã©;æerp;ær;ìð´pf;ìð¨Ä;eá¹ã©¦atÃ¨á¹cr;ìðà«£áãª\0ãª\0ãªãª\0\0ãªãª¨ãª«ãª¯\0\0ã«ã«\0ã«áátrÃ©ár;ìðµÄAaãªãªrÃ²ÏrÃ²à§¶;ä¾ÄAaãª¡ãª¤rÃ²Î¸rÃ²à§«aÃ°âis;æ»Ædptá¤ãªµãª¾Äflãªºá©;ìð©imÃ¥á²ÄAaã«ã«rÃ²ÏrÃ²à¨Äcqã«á¸r;ìðÄptáã«rÃ©áÐacefiosuã«°ã«½ã¬ã¬ã¬ã¬ã¬ã¬¡cÄuyã«¶ã«»teè»Ã½ä½;äÄiyã¬ã¬rc;ä·;änè»Â¥ä¥r;ìð¶cy;äpf;ìðªcr;ìðÄcmã¬¦ã¬©y;älè»Ã¿ä¿Ôacdefhioswã­ã­ã­ã­ã­¤ã­©ã­­ã­´ã­ºã®cute;äºÄayã­ã­ron;ä¾;ä·ot;ä¼Äetã­ã­¡trÃ¦áa;ä¶r;ìð·cy;ä¶grarr;æpf;ìð«cr;ìðÄjnã®ã®;æj;æ'.split("").map(t=>t.charCodeAt(0))),V6e=new Uint16Array("Èaglq	\x1BÉ­\0\0p;ä¦os;ä§t;ä¾t;ä¼uot;ä¢".split("").map(t=>t.charCodeAt(0)));var hR;const q6e=new Map([[0,65533],[128,8364],[130,8218],[131,402],[132,8222],[133,8230],[134,8224],[135,8225],[136,710],[137,8240],[138,352],[139,8249],[140,338],[142,381],[145,8216],[146,8217],[147,8220],[148,8221],[149,8226],[150,8211],[151,8212],[152,732],[153,8482],[154,353],[155,8250],[156,339],[158,382],[159,376]]),Z6e=(hR=String.fromCodePoint)!==null&&hR!==void 0?hR:function(t){let e="";return t>65535&&(t-=65536,e+=String.fromCharCode(t>>>10&1023|55296),t=56320|t&1023),e+=String.fromCharCode(t),e};function X6e(t){var e;return t>=55296&&t<=57343||t>1114111?65533:(e=q6e.get(t))!==null&&e!==void 0?e:t}var rl;(function(t){t[t.NUM=35]="NUM",t[t.SEMI=59]="SEMI",t[t.EQUALS=61]="EQUALS",t[t.ZERO=48]="ZERO",t[t.NINE=57]="NINE",t[t.LOWER_A=97]="LOWER_A",t[t.LOWER_F=102]="LOWER_F",t[t.LOWER_X=120]="LOWER_X",t[t.LOWER_Z=122]="LOWER_Z",t[t.UPPER_A=65]="UPPER_A",t[t.UPPER_F=70]="UPPER_F",t[t.UPPER_Z=90]="UPPER_Z"})(rl||(rl={}));const W6e=32;var Iy;(function(t){t[t.VALUE_LENGTH=49152]="VALUE_LENGTH",t[t.BRANCH_LENGTH=16256]="BRANCH_LENGTH",t[t.JUMP_TABLE=127]="JUMP_TABLE"})(Iy||(Iy={}));function C9(t){return t>=rl.ZERO&&t<=rl.NINE}function G6e(t){return t>=rl.UPPER_A&&t<=rl.UPPER_F||t>=rl.LOWER_A&&t<=rl.LOWER_F}function Y6e(t){return t>=rl.UPPER_A&&t<=rl.UPPER_Z||t>=rl.LOWER_A&&t<=rl.LOWER_Z||C9(t)}function H6e(t){return t===rl.EQUALS||Y6e(t)}var Ha;(function(t){t[t.EntityStart=0]="EntityStart",t[t.NumericStart=1]="NumericStart",t[t.NumericDecimal=2]="NumericDecimal",t[t.NumericHex=3]="NumericHex",t[t.NamedEntity=4]="NamedEntity"})(Ha||(Ha={}));var Cy;(function(t){t[t.Legacy=0]="Legacy",t[t.Strict=1]="Strict",t[t.Attribute=2]="Attribute"})(Cy||(Cy={}));class K6e{constructor(e,n,r){this.decodeTree=e,this.emitCodePoint=n,this.errors=r,this.state=Ha.EntityStart,this.consumed=1,this.result=0,this.treeIndex=0,this.excess=1,this.decodeMode=Cy.Strict}startEntity(e){this.decodeMode=e,this.state=Ha.EntityStart,this.result=0,this.treeIndex=0,this.excess=1,this.consumed=1}write(e,n){switch(this.state){case Ha.EntityStart:return e.charCodeAt(n)===rl.NUM?(this.state=Ha.NumericStart,this.consumed+=1,this.stateNumericStart(e,n+1)):(this.state=Ha.NamedEntity,this.stateNamedEntity(e,n));case Ha.NumericStart:return this.stateNumericStart(e,n);case Ha.NumericDecimal:return this.stateNumericDecimal(e,n);case Ha.NumericHex:return this.stateNumericHex(e,n);case Ha.NamedEntity:return this.stateNamedEntity(e,n)}}stateNumericStart(e,n){return n>=e.length?-1:(e.charCodeAt(n)|W6e)===rl.LOWER_X?(this.state=Ha.NumericHex,this.consumed+=1,this.stateNumericHex(e,n+1)):(this.state=Ha.NumericDecimal,this.stateNumericDecimal(e,n))}addToNumericResult(e,n,r,i){if(n!==r){const s=r-n;this.result=this.result*Math.pow(i,s)+parseInt(e.substr(n,s),i),this.consumed+=s}}stateNumericHex(e,n){const r=n;for(;n<e.length;){const i=e.charCodeAt(n);if(C9(i)||G6e(i))n+=1;else return this.addToNumericResult(e,r,n,16),this.emitNumericEntity(i,3)}return this.addToNumericResult(e,r,n,16),-1}stateNumericDecimal(e,n){const r=n;for(;n<e.length;){const i=e.charCodeAt(n);if(C9(i))n+=1;else return this.addToNumericResult(e,r,n,10),this.emitNumericEntity(i,2)}return this.addToNumericResult(e,r,n,10),-1}emitNumericEntity(e,n){var r;if(this.consumed<=n)return(r=this.errors)===null||r===void 0||r.absenceOfDigitsInNumericCharacterReference(this.consumed),0;if(e===rl.SEMI)this.consumed+=1;else if(this.decodeMode===Cy.Strict)return 0;return this.emitCodePoint(X6e(this.result),this.consumed),this.errors&&(e!==rl.SEMI&&this.errors.missingSemicolonAfterCharacterReference(),this.errors.validateNumericCharacterReference(this.result)),this.consumed}stateNamedEntity(e,n){const{decodeTree:r}=this;let i=r[this.treeIndex],s=(i&Iy.VALUE_LENGTH)>>14;for(;n<e.length;n++,this.excess++){const o=e.charCodeAt(n);if(this.treeIndex=J6e(r,i,this.treeIndex+Math.max(1,s),o),this.treeIndex<0)return this.result===0||this.decodeMode===Cy.Attribute&&(s===0||H6e(o))?0:this.emitNotTerminatedNamedEntity();if(i=r[this.treeIndex],s=(i&Iy.VALUE_LENGTH)>>14,s!==0){if(o===rl.SEMI)return this.emitNamedEntityData(this.treeIndex,s,this.consumed+this.excess);this.decodeMode!==Cy.Strict&&(this.result=this.treeIndex,this.consumed+=this.excess,this.excess=0)}}return-1}emitNotTerminatedNamedEntity(){var e;const{result:n,decodeTree:r}=this,i=(r[n]&Iy.VALUE_LENGTH)>>14;return this.emitNamedEntityData(n,i,this.consumed),(e=this.errors)===null||e===void 0||e.missingSemicolonAfterCharacterReference(),this.consumed}emitNamedEntityData(e,n,r){const{decodeTree:i}=this;return this.emitCodePoint(n===1?i[e]&~Iy.VALUE_LENGTH:i[e+1],r),n===3&&this.emitCodePoint(i[e+2],r),r}end(){var e;switch(this.state){case Ha.NamedEntity:return this.result!==0&&(this.decodeMode!==Cy.Attribute||this.result===this.treeIndex)?this.emitNotTerminatedNamedEntity():0;case Ha.NumericDecimal:return this.emitNumericEntity(0,2);case Ha.NumericHex:return this.emitNumericEntity(0,3);case Ha.NumericStart:return(e=this.errors)===null||e===void 0||e.absenceOfDigitsInNumericCharacterReference(this.consumed),0;case Ha.EntityStart:return 0}}}function doe(t){let e="";const n=new K6e(t,r=>e+=Z6e(r));return function(i,s){let o=0,a=0;for(;(a=i.indexOf("&",a))>=0;){e+=i.slice(o,a),n.startEntity(s);const h=n.write(i,a+1);if(h<0){o=a+n.end();break}o=a+h,a=h===0?o+1:o}const l=e+i.slice(o);return e="",l}}function J6e(t,e,n,r){const i=(e&Iy.BRANCH_LENGTH)>>7,s=e&Iy.JUMP_TABLE;if(i===0)return s!==0&&r===s?n:-1;if(s){const l=r-s;return l<0||l>=i?-1:t[n+l]-1}let o=n,a=o+i-1;for(;o<=a;){const l=o+a>>>1,h=t[l];if(h<r)o=l+1;else if(h>r)a=l-1;else return t[l+i]}return-1}const ePe=doe(U6e);doe(V6e);function poe(t,e=Cy.Legacy){return ePe(t,e)}function tPe(t){return Object.prototype.toString.call(t)}function NN(t){return tPe(t)==="[object String]"}const nPe=Object.prototype.hasOwnProperty;function rPe(t,e){return nPe.call(t,e)}function TD(t){return Array.prototype.slice.call(arguments,1).forEach(function(n){if(n){if(typeof n!="object")throw new TypeError(n+"must be object");Object.keys(n).forEach(function(r){t[r]=n[r]})}}),t}function moe(t,e,n){return[].concat(t.slice(0,e),n,t.slice(e+1))}function zN(t){return!(t>=55296&&t<=57343||t>=64976&&t<=65007||(t&65535)===65535||(t&65535)===65534||t>=0&&t<=8||t===11||t>=14&&t<=31||t>=127&&t<=159||t>1114111)}function L6(t){if(t>65535){t-=65536;const e=55296+(t>>10),n=56320+(t&1023);return String.fromCharCode(e,n)}return String.fromCharCode(t)}const goe=/\\([!"#$%&'()*+,\-./:;<=>?@[\\\]^_`{|}~])/g,iPe=/&([a-z#][a-z0-9]{1,31});/gi,sPe=new RegExp(goe.source+"|"+iPe.source,"gi"),oPe=/^#((?:x[a-f0-9]{1,8}|[0-9]{1,8}))$/i;function aPe(t,e){if(e.charCodeAt(0)===35&&oPe.test(e)){const r=e[1].toLowerCase()==="x"?parseInt(e.slice(2),16):parseInt(e.slice(1),10);return zN(r)?L6(r):t}const n=poe(t);return n!==t?n:t}function lPe(t){return t.indexOf("\\")<0?t:t.replace(goe,"$1")}function v2(t){return t.indexOf("\\")<0&&t.indexOf("&")<0?t:t.replace(sPe,function(e,n,r){return n||aPe(e,r)})}const uPe=/[&<>"]/,cPe=/[&<>"]/g,hPe={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;"};function fPe(t){return hPe[t]}function v1(t){return uPe.test(t)?t.replace(cPe,fPe):t}const dPe=/[.?*+^$[\]\\(){}|-]/g;function pPe(t){return t.replace(dPe,"\\$&")}function lo(t){switch(t){case 9:case 32:return!0}return!1}function qk(t){if(t>=8192&&t<=8202)return!0;switch(t){case 9:case 10:case 11:case 12:case 13:case 32:case 160:case 5760:case 8239:case 8287:case 12288:return!0}return!1}function Zk(t){return BN.test(t)||hoe.test(t)}function Xk(t){switch(t){case 33:case 34:case 35:case 36:case 37:case 38:case 39:case 40:case 41:case 42:case 43:case 44:case 45:case 46:case 47:case 58:case 59:case 60:case 61:case 62:case 63:case 64:case 91:case 92:case 93:case 94:case 95:case 96:case 123:case 124:case 125:case 126:return!0;default:return!1}}function PD(t){return t=t.trim().replace(/\s+/g," "),"áº".toLowerCase()==="á¹¾"&&(t=t.replace(/áº/g,"Ã")),t.toLowerCase().toUpperCase()}const mPe={mdurl:z6e,ucmicro:j6e},gPe=Object.freeze(Object.defineProperty({__proto__:null,arrayReplaceAt:moe,assign:TD,escapeHtml:v1,escapeRE:pPe,fromCodePoint:L6,has:rPe,isMdAsciiPunct:Xk,isPunctChar:Zk,isSpace:lo,isString:NN,isValidEntityCode:zN,isWhiteSpace:qk,lib:mPe,normalizeReference:PD,unescapeAll:v2,unescapeMd:lPe},Symbol.toStringTag,{value:"Module"}));function yPe(t,e,n){let r,i,s,o;const a=t.posMax,l=t.pos;for(t.pos=e+1,r=1;t.pos<a;){if(s=t.src.charCodeAt(t.pos),s===93&&(r--,r===0)){i=!0;break}if(o=t.pos,t.md.inline.skipToken(t),s===91){if(o===t.pos-1)r++;else if(n)return t.pos=l,-1}}let h=-1;return i&&(h=t.pos),t.pos=l,h}function vPe(t,e,n){let r,i=e;const s={ok:!1,pos:0,str:""};if(t.charCodeAt(i)===60){for(i++;i<n;){if(r=t.charCodeAt(i),r===10||r===60)return s;if(r===62)return s.pos=i+1,s.str=v2(t.slice(e+1,i)),s.ok=!0,s;if(r===92&&i+1<n){i+=2;continue}i++}return s}let o=0;for(;i<n&&(r=t.charCodeAt(i),!(r===32||r<32||r===127));){if(r===92&&i+1<n){if(t.charCodeAt(i+1)===32)break;i+=2;continue}if(r===40&&(o++,o>32))return s;if(r===41){if(o===0)break;o--}i++}return e===i||o!==0||(s.str=v2(t.slice(e,i)),s.pos=i,s.ok=!0),s}function bPe(t,e,n,r){let i,s=e;const o={ok:!1,can_continue:!1,pos:0,str:"",marker:0};if(r)o.str=r.str,o.marker=r.marker;else{if(s>=n)return o;let a=t.charCodeAt(s);if(a!==34&&a!==39&&a!==40)return o;e++,s++,a===40&&(a=41),o.marker=a}for(;s<n;){if(i=t.charCodeAt(s),i===o.marker)return o.pos=s+1,o.str+=v2(t.slice(e,s)),o.ok=!0,o;if(i===40&&o.marker===41)return o;i===92&&s+1<n&&s++,s++}return o.can_continue=!0,o.str+=v2(t.slice(e,s)),o}const _Pe=Object.freeze(Object.defineProperty({__proto__:null,parseLinkDestination:vPe,parseLinkLabel:yPe,parseLinkTitle:bPe},Symbol.toStringTag,{value:"Module"})),Am={};Am.code_inline=function(t,e,n,r,i){const s=t[e];return"<code"+i.renderAttrs(s)+">"+v1(s.content)+"</code>"};Am.code_block=function(t,e,n,r,i){const s=t[e];return"<pre"+i.renderAttrs(s)+"><code>"+v1(t[e].content)+`</code></pre>
`};Am.fence=function(t,e,n,r,i){const s=t[e],o=s.info?v2(s.info).trim():"";let a="",l="";if(o){const f=o.split(/(\s+)/g);a=f[0],l=f.slice(2).join("")}let h;if(n.highlight?h=n.highlight(s.content,a,l)||v1(s.content):h=v1(s.content),h.indexOf("<pre")===0)return h+`
`;if(o){const f=s.attrIndex("class"),p=s.attrs?s.attrs.slice():[];f<0?p.push(["class",n.langPrefix+a]):(p[f]=p[f].slice(),p[f][1]+=" "+n.langPrefix+a);const g={attrs:p};return`<pre><code${i.renderAttrs(g)}>${h}</code></pre>
`}return`<pre><code${i.renderAttrs(s)}>${h}</code></pre>
`};Am.image=function(t,e,n,r,i){const s=t[e];return s.attrs[s.attrIndex("alt")][1]=i.renderInlineAsText(s.children,n,r),i.renderToken(t,e,n)};Am.hardbreak=function(t,e,n){return n.xhtmlOut?`<br />
`:`<br>
`};Am.softbreak=function(t,e,n){return n.breaks?n.xhtmlOut?`<br />
`:`<br>
`:`
`};Am.text=function(t,e){return v1(t[e].content)};Am.html_block=function(t,e){return t[e].content};Am.html_inline=function(t,e){return t[e].content};function tO(){this.rules=TD({},Am)}tO.prototype.renderAttrs=function(e){let n,r,i;if(!e.attrs)return"";for(i="",n=0,r=e.attrs.length;n<r;n++)i+=" "+v1(e.attrs[n][0])+'="'+v1(e.attrs[n][1])+'"';return i};tO.prototype.renderToken=function(e,n,r){const i=e[n];let s="";if(i.hidden)return"";i.block&&i.nesting!==-1&&n&&e[n-1].hidden&&(s+=`
`),s+=(i.nesting===-1?"</":"<")+i.tag,s+=this.renderAttrs(i),i.nesting===0&&r.xhtmlOut&&(s+=" /");let o=!1;if(i.block&&(o=!0,i.nesting===1&&n+1<e.length)){const a=e[n+1];(a.type==="inline"||a.hidden||a.nesting===-1&&a.tag===i.tag)&&(o=!1)}return s+=o?`>
`:">",s};tO.prototype.renderInline=function(t,e,n){let r="";const i=this.rules;for(let s=0,o=t.length;s<o;s++){const a=t[s].type;typeof i[a]<"u"?r+=i[a](t,s,e,n,this):r+=this.renderToken(t,s,e)}return r};tO.prototype.renderInlineAsText=function(t,e,n){let r="";for(let i=0,s=t.length;i<s;i++)switch(t[i].type){case"text":r+=t[i].content;break;case"image":r+=this.renderInlineAsText(t[i].children,e,n);break;case"html_inline":case"html_block":r+=t[i].content;break;case"softbreak":case"hardbreak":r+=`
`;break}return r};tO.prototype.render=function(t,e,n){let r="";const i=this.rules;for(let s=0,o=t.length;s<o;s++){const a=t[s].type;a==="inline"?r+=this.renderInline(t[s].children,e,n):typeof i[a]<"u"?r+=i[a](t,s,e,n,this):r+=this.renderToken(t,s,e,n)}return r};function Ec(){this.__rules__=[],this.__cache__=null}Ec.prototype.__find__=function(t){for(let e=0;e<this.__rules__.length;e++)if(this.__rules__[e].name===t)return e;return-1};Ec.prototype.__compile__=function(){const t=this,e=[""];t.__rules__.forEach(function(n){n.enabled&&n.alt.forEach(function(r){e.indexOf(r)<0&&e.push(r)})}),t.__cache__={},e.forEach(function(n){t.__cache__[n]=[],t.__rules__.forEach(function(r){r.enabled&&(n&&r.alt.indexOf(n)<0||t.__cache__[n].push(r.fn))})})};Ec.prototype.at=function(t,e,n){const r=this.__find__(t),i=n||{};if(r===-1)throw new Error("Parser rule not found: "+t);this.__rules__[r].fn=e,this.__rules__[r].alt=i.alt||[],this.__cache__=null};Ec.prototype.before=function(t,e,n,r){const i=this.__find__(t),s=r||{};if(i===-1)throw new Error("Parser rule not found: "+t);this.__rules__.splice(i,0,{name:e,enabled:!0,fn:n,alt:s.alt||[]}),this.__cache__=null};Ec.prototype.after=function(t,e,n,r){const i=this.__find__(t),s=r||{};if(i===-1)throw new Error("Parser rule not found: "+t);this.__rules__.splice(i+1,0,{name:e,enabled:!0,fn:n,alt:s.alt||[]}),this.__cache__=null};Ec.prototype.push=function(t,e,n){const r=n||{};this.__rules__.push({name:t,enabled:!0,fn:e,alt:r.alt||[]}),this.__cache__=null};Ec.prototype.enable=function(t,e){Array.isArray(t)||(t=[t]);const n=[];return t.forEach(function(r){const i=this.__find__(r);if(i<0){if(e)return;throw new Error("Rules manager: invalid rule name "+r)}this.__rules__[i].enabled=!0,n.push(r)},this),this.__cache__=null,n};Ec.prototype.enableOnly=function(t,e){Array.isArray(t)||(t=[t]),this.__rules__.forEach(function(n){n.enabled=!1}),this.enable(t,e)};Ec.prototype.disable=function(t,e){Array.isArray(t)||(t=[t]);const n=[];return t.forEach(function(r){const i=this.__find__(r);if(i<0){if(e)return;throw new Error("Rules manager: invalid rule name "+r)}this.__rules__[i].enabled=!1,n.push(r)},this),this.__cache__=null,n};Ec.prototype.getRules=function(t){return this.__cache__===null&&this.__compile__(),this.__cache__[t]||[]};function zd(t,e,n){this.type=t,this.tag=e,this.attrs=null,this.map=null,this.nesting=n,this.level=0,this.children=null,this.content="",this.markup="",this.info="",this.meta=null,this.block=!1,this.hidden=!1}zd.prototype.attrIndex=function(e){if(!this.attrs)return-1;const n=this.attrs;for(let r=0,i=n.length;r<i;r++)if(n[r][0]===e)return r;return-1};zd.prototype.attrPush=function(e){this.attrs?this.attrs.push(e):this.attrs=[e]};zd.prototype.attrSet=function(e,n){const r=this.attrIndex(e),i=[e,n];r<0?this.attrPush(i):this.attrs[r]=i};zd.prototype.attrGet=function(e){const n=this.attrIndex(e);let r=null;return n>=0&&(r=this.attrs[n][1]),r};zd.prototype.attrJoin=function(e,n){const r=this.attrIndex(e);r<0?this.attrPush([e,n]):this.attrs[r][1]=this.attrs[r][1]+" "+n};function yoe(t,e,n){this.src=t,this.env=n,this.tokens=[],this.inlineMode=!1,this.md=e}yoe.prototype.Token=zd;const xPe=/\r\n?|\n/g,wPe=/\0/g;function OPe(t){let e;e=t.src.replace(xPe,`
`),e=e.replace(wPe,"ï¿½"),t.src=e}function SPe(t){let e;t.inlineMode?(e=new t.Token("inline","",0),e.content=t.src,e.map=[0,1],e.children=[],t.tokens.push(e)):t.md.block.parse(t.src,t.md,t.env,t.tokens)}function kPe(t){const e=t.tokens;for(let n=0,r=e.length;n<r;n++){const i=e[n];i.type==="inline"&&t.md.inline.parse(i.content,t.md,t.env,i.children)}}function CPe(t){return/^<a[>\s]/i.test(t)}function APe(t){return/^<\/a\s*>/i.test(t)}function EPe(t){const e=t.tokens;if(t.md.options.linkify)for(let n=0,r=e.length;n<r;n++){if(e[n].type!=="inline"||!t.md.linkify.pretest(e[n].content))continue;let i=e[n].children,s=0;for(let o=i.length-1;o>=0;o--){const a=i[o];if(a.type==="link_close"){for(o--;i[o].level!==a.level&&i[o].type!=="link_open";)o--;continue}if(a.type==="html_inline"&&(CPe(a.content)&&s>0&&s--,APe(a.content)&&s++),!(s>0)&&a.type==="text"&&t.md.linkify.test(a.content)){const l=a.content;let h=t.md.linkify.match(l);const f=[];let p=a.level,g=0;h.length>0&&h[0].index===0&&o>0&&i[o-1].type==="text_special"&&(h=h.slice(1));for(let b=0;b<h.length;b++){const x=h[b].url,k=t.md.normalizeLink(x);if(!t.md.validateLink(k))continue;let T=h[b].text;h[b].schema?h[b].schema==="mailto:"&&!/^mailto:/i.test(T)?T=t.md.normalizeLinkText("mailto:"+T).replace(/^mailto:/,""):T=t.md.normalizeLinkText(T):T=t.md.normalizeLinkText("http://"+T).replace(/^http:\/\//,"");const I=h[b].index;if(I>g){const Q=new t.Token("text","",0);Q.content=l.slice(g,I),Q.level=p,f.push(Q)}const M=new t.Token("link_open","a",1);M.attrs=[["href",k]],M.level=p++,M.markup="linkify",M.info="auto",f.push(M);const B=new t.Token("text","",0);B.content=T,B.level=p,f.push(B);const j=new t.Token("link_close","a",-1);j.level=--p,j.markup="linkify",j.info="auto",f.push(j),g=h[b].lastIndex}if(g<l.length){const b=new t.Token("text","",0);b.content=l.slice(g),b.level=p,f.push(b)}e[n].children=i=moe(i,o,f)}}}}const voe=/\+-|\.\.|\?\?\?\?|!!!!|,,|--/,TPe=/\((c|tm|r)\)/i,PPe=/\((c|tm|r)\)/ig,DPe={c:"Â©",r:"Â®",tm:"â¢"};function IPe(t,e){return DPe[e.toLowerCase()]}function MPe(t){let e=0;for(let n=t.length-1;n>=0;n--){const r=t[n];r.type==="text"&&!e&&(r.content=r.content.replace(PPe,IPe)),r.type==="link_open"&&r.info==="auto"&&e--,r.type==="link_close"&&r.info==="auto"&&e++}}function RPe(t){let e=0;for(let n=t.length-1;n>=0;n--){const r=t[n];r.type==="text"&&!e&&voe.test(r.content)&&(r.content=r.content.replace(/\+-/g,"Â±").replace(/\.{2,}/g,"â¦").replace(/([?!])â¦/g,"$1..").replace(/([?!]){4,}/g,"$1$1$1").replace(/,{2,}/g,",").replace(/(^|[^-])---(?=[^-]|$)/mg,"$1â").replace(/(^|\s)--(?=\s|$)/mg,"$1â").replace(/(^|[^-\s])--(?=[^-\s]|$)/mg,"$1â")),r.type==="link_open"&&r.info==="auto"&&e--,r.type==="link_close"&&r.info==="auto"&&e++}}function FPe(t){let e;if(t.md.options.typographer)for(e=t.tokens.length-1;e>=0;e--)t.tokens[e].type==="inline"&&(TPe.test(t.tokens[e].content)&&MPe(t.tokens[e].children),voe.test(t.tokens[e].content)&&RPe(t.tokens[e].children))}const LPe=/['"]/,AZ=/['"]/g,EZ="â";function x4(t,e,n){return t.slice(0,e)+n+t.slice(e+1)}function $Pe(t,e){let n;const r=[];for(let i=0;i<t.length;i++){const s=t[i],o=t[i].level;for(n=r.length-1;n>=0&&!(r[n].level<=o);n--);if(r.length=n+1,s.type!=="text")continue;let a=s.content,l=0,h=a.length;e:for(;l<h;){AZ.lastIndex=l;const f=AZ.exec(a);if(!f)break;let p=!0,g=!0;l=f.index+1;const b=f[0]==="'";let x=32;if(f.index-1>=0)x=a.charCodeAt(f.index-1);else for(n=i-1;n>=0&&!(t[n].type==="softbreak"||t[n].type==="hardbreak");n--)if(t[n].content){x=t[n].content.charCodeAt(t[n].content.length-1);break}let k=32;if(l<h)k=a.charCodeAt(l);else for(n=i+1;n<t.length&&!(t[n].type==="softbreak"||t[n].type==="hardbreak");n++)if(t[n].content){k=t[n].content.charCodeAt(0);break}const T=Xk(x)||Zk(String.fromCharCode(x)),I=Xk(k)||Zk(String.fromCharCode(k)),M=qk(x),B=qk(k);if(B?p=!1:I&&(M||T||(p=!1)),M?g=!1:T&&(B||I||(g=!1)),k===34&&f[0]==='"'&&x>=48&&x<=57&&(g=p=!1),p&&g&&(p=T,g=I),!p&&!g){b&&(s.content=x4(s.content,f.index,EZ));continue}if(g)for(n=r.length-1;n>=0;n--){let j=r[n];if(r[n].level<o)break;if(j.single===b&&r[n].level===o){j=r[n];let Q,Z;b?(Q=e.md.options.quotes[2],Z=e.md.options.quotes[3]):(Q=e.md.options.quotes[0],Z=e.md.options.quotes[1]),s.content=x4(s.content,f.index,Z),t[j.token].content=x4(t[j.token].content,j.pos,Q),l+=Z.length-1,j.token===i&&(l+=Q.length-1),a=s.content,h=a.length,r.length=n;continue e}}p?r.push({token:i,pos:f.index,single:b,level:o}):g&&b&&(s.content=x4(s.content,f.index,EZ))}}}function BPe(t){if(t.md.options.typographer)for(let e=t.tokens.length-1;e>=0;e--)t.tokens[e].type!=="inline"||!LPe.test(t.tokens[e].content)||$Pe(t.tokens[e].children,t)}function NPe(t){let e,n;const r=t.tokens,i=r.length;for(let s=0;s<i;s++){if(r[s].type!=="inline")continue;const o=r[s].children,a=o.length;for(e=0;e<a;e++)o[e].type==="text_special"&&(o[e].type="text");for(e=n=0;e<a;e++)o[e].type==="text"&&e+1<a&&o[e+1].type==="text"?o[e+1].content=o[e].content+o[e+1].content:(e!==n&&(o[n]=o[e]),n++);e!==n&&(o.length=n)}}const fR=[["normalize",OPe],["block",SPe],["inline",kPe],["linkify",EPe],["replacements",FPe],["smartquotes",BPe],["text_join",NPe]];function QN(){this.ruler=new Ec;for(let t=0;t<fR.length;t++)this.ruler.push(fR[t][0],fR[t][1])}QN.prototype.process=function(t){const e=this.ruler.getRules("");for(let n=0,r=e.length;n<r;n++)e[n](t)};QN.prototype.State=yoe;function Em(t,e,n,r){this.src=t,this.md=e,this.env=n,this.tokens=r,this.bMarks=[],this.eMarks=[],this.tShift=[],this.sCount=[],this.bsCount=[],this.blkIndent=0,this.line=0,this.lineMax=0,this.tight=!1,this.ddIndent=-1,this.listIndent=-1,this.parentType="root",this.level=0;const i=this.src;for(let s=0,o=0,a=0,l=0,h=i.length,f=!1;o<h;o++){const p=i.charCodeAt(o);if(!f)if(lo(p)){a++,p===9?l+=4-l%4:l++;continue}else f=!0;(p===10||o===h-1)&&(p!==10&&o++,this.bMarks.push(s),this.eMarks.push(o),this.tShift.push(a),this.sCount.push(l),this.bsCount.push(0),f=!1,a=0,l=0,s=o+1)}this.bMarks.push(i.length),this.eMarks.push(i.length),this.tShift.push(0),this.sCount.push(0),this.bsCount.push(0),this.lineMax=this.bMarks.length-1}Em.prototype.push=function(t,e,n){const r=new zd(t,e,n);return r.block=!0,n<0&&this.level--,r.level=this.level,n>0&&this.level++,this.tokens.push(r),r};Em.prototype.isEmpty=function(e){return this.bMarks[e]+this.tShift[e]>=this.eMarks[e]};Em.prototype.skipEmptyLines=function(e){for(let n=this.lineMax;e<n&&!(this.bMarks[e]+this.tShift[e]<this.eMarks[e]);e++);return e};Em.prototype.skipSpaces=function(e){for(let n=this.src.length;e<n;e++){const r=this.src.charCodeAt(e);if(!lo(r))break}return e};Em.prototype.skipSpacesBack=function(e,n){if(e<=n)return e;for(;e>n;)if(!lo(this.src.charCodeAt(--e)))return e+1;return e};Em.prototype.skipChars=function(e,n){for(let r=this.src.length;e<r&&this.src.charCodeAt(e)===n;e++);return e};Em.prototype.skipCharsBack=function(e,n,r){if(e<=r)return e;for(;e>r;)if(n!==this.src.charCodeAt(--e))return e+1;return e};Em.prototype.getLines=function(e,n,r,i){if(e>=n)return"";const s=new Array(n-e);for(let o=0,a=e;a<n;a++,o++){let l=0;const h=this.bMarks[a];let f=h,p;for(a+1<n||i?p=this.eMarks[a]+1:p=this.eMarks[a];f<p&&l<r;){const g=this.src.charCodeAt(f);if(lo(g))g===9?l+=4-(l+this.bsCount[a])%4:l++;else if(f-h<this.tShift[a])l++;else break;f++}l>r?s[o]=new Array(l-r+1).join(" ")+this.src.slice(f,p):s[o]=this.src.slice(f,p)}return s.join("")};Em.prototype.Token=zd;const zPe=65536;function dR(t,e){const n=t.bMarks[e]+t.tShift[e],r=t.eMarks[e];return t.src.slice(n,r)}function TZ(t){const e=[],n=t.length;let r=0,i=t.charCodeAt(r),s=!1,o=0,a="";for(;r<n;)i===124&&(s?(a+=t.substring(o,r-1),o=r):(e.push(a+t.substring(o,r)),a="",o=r+1)),s=i===92,r++,i=t.charCodeAt(r);return e.push(a+t.substring(o)),e}function QPe(t,e,n,r){if(e+2>n)return!1;let i=e+1;if(t.sCount[i]<t.blkIndent||t.sCount[i]-t.blkIndent>=4)return!1;let s=t.bMarks[i]+t.tShift[i];if(s>=t.eMarks[i])return!1;const o=t.src.charCodeAt(s++);if(o!==124&&o!==45&&o!==58||s>=t.eMarks[i])return!1;const a=t.src.charCodeAt(s++);if(a!==124&&a!==45&&a!==58&&!lo(a)||o===45&&lo(a))return!1;for(;s<t.eMarks[i];){const j=t.src.charCodeAt(s);if(j!==124&&j!==45&&j!==58&&!lo(j))return!1;s++}let l=dR(t,e+1),h=l.split("|");const f=[];for(let j=0;j<h.length;j++){const Q=h[j].trim();if(!Q){if(j===0||j===h.length-1)continue;return!1}if(!/^:?-+:?$/.test(Q))return!1;Q.charCodeAt(Q.length-1)===58?f.push(Q.charCodeAt(0)===58?"center":"right"):Q.charCodeAt(0)===58?f.push("left"):f.push("")}if(l=dR(t,e).trim(),l.indexOf("|")===-1||t.sCount[e]-t.blkIndent>=4)return!1;h=TZ(l),h.length&&h[0]===""&&h.shift(),h.length&&h[h.length-1]===""&&h.pop();const p=h.length;if(p===0||p!==f.length)return!1;if(r)return!0;const g=t.parentType;t.parentType="table";const b=t.md.block.ruler.getRules("blockquote"),x=t.push("table_open","table",1),k=[e,0];x.map=k;const T=t.push("thead_open","thead",1);T.map=[e,e+1];const I=t.push("tr_open","tr",1);I.map=[e,e+1];for(let j=0;j<h.length;j++){const Q=t.push("th_open","th",1);f[j]&&(Q.attrs=[["style","text-align:"+f[j]]]);const Z=t.push("inline","",0);Z.content=h[j].trim(),Z.children=[],t.push("th_close","th",-1)}t.push("tr_close","tr",-1),t.push("thead_close","thead",-1);let M,B=0;for(i=e+2;i<n&&!(t.sCount[i]<t.blkIndent);i++){let j=!1;for(let Z=0,q=b.length;Z<q;Z++)if(b[Z](t,i,n,!0)){j=!0;break}if(j||(l=dR(t,i).trim(),!l)||t.sCount[i]-t.blkIndent>=4||(h=TZ(l),h.length&&h[0]===""&&h.shift(),h.length&&h[h.length-1]===""&&h.pop(),B+=p-h.length,B>zPe))break;if(i===e+2){const Z=t.push("tbody_open","tbody",1);Z.map=M=[e+2,0]}const Q=t.push("tr_open","tr",1);Q.map=[i,i+1];for(let Z=0;Z<p;Z++){const q=t.push("td_open","td",1);f[Z]&&(q.attrs=[["style","text-align:"+f[Z]]]);const J=t.push("inline","",0);J.content=h[Z]?h[Z].trim():"",J.children=[],t.push("td_close","td",-1)}t.push("tr_close","tr",-1)}return M&&(t.push("tbody_close","tbody",-1),M[1]=i),t.push("table_close","table",-1),k[1]=i,t.parentType=g,t.line=i,!0}function jPe(t,e,n){if(t.sCount[e]-t.blkIndent<4)return!1;let r=e+1,i=r;for(;r<n;){if(t.isEmpty(r)){r++;continue}if(t.sCount[r]-t.blkIndent>=4){r++,i=r;continue}break}t.line=i;const s=t.push("code_block","code",0);return s.content=t.getLines(e,i,4+t.blkIndent,!1)+`
`,s.map=[e,t.line],!0}function UPe(t,e,n,r){let i=t.bMarks[e]+t.tShift[e],s=t.eMarks[e];if(t.sCount[e]-t.blkIndent>=4||i+3>s)return!1;const o=t.src.charCodeAt(i);if(o!==126&&o!==96)return!1;let a=i;i=t.skipChars(i,o);let l=i-a;if(l<3)return!1;const h=t.src.slice(a,i),f=t.src.slice(i,s);if(o===96&&f.indexOf(String.fromCharCode(o))>=0)return!1;if(r)return!0;let p=e,g=!1;for(;p++,!(p>=n||(i=a=t.bMarks[p]+t.tShift[p],s=t.eMarks[p],i<s&&t.sCount[p]<t.blkIndent));)if(t.src.charCodeAt(i)===o&&!(t.sCount[p]-t.blkIndent>=4)&&(i=t.skipChars(i,o),!(i-a<l)&&(i=t.skipSpaces(i),!(i<s)))){g=!0;break}l=t.sCount[e],t.line=p+(g?1:0);const b=t.push("fence","code",0);return b.info=f,b.content=t.getLines(e+1,p,l,!0),b.markup=h,b.map=[e,t.line],!0}function VPe(t,e,n,r){let i=t.bMarks[e]+t.tShift[e],s=t.eMarks[e];const o=t.lineMax;if(t.sCount[e]-t.blkIndent>=4||t.src.charCodeAt(i)!==62)return!1;if(r)return!0;const a=[],l=[],h=[],f=[],p=t.md.block.ruler.getRules("blockquote"),g=t.parentType;t.parentType="blockquote";let b=!1,x;for(x=e;x<n;x++){const B=t.sCount[x]<t.blkIndent;if(i=t.bMarks[x]+t.tShift[x],s=t.eMarks[x],i>=s)break;if(t.src.charCodeAt(i++)===62&&!B){let Q=t.sCount[x]+1,Z,q;t.src.charCodeAt(i)===32?(i++,Q++,q=!1,Z=!0):t.src.charCodeAt(i)===9?(Z=!0,(t.bsCount[x]+Q)%4===3?(i++,Q++,q=!1):q=!0):Z=!1;let J=Q;for(a.push(t.bMarks[x]),t.bMarks[x]=i;i<s;){const oe=t.src.charCodeAt(i);if(lo(oe))oe===9?J+=4-(J+t.bsCount[x]+(q?1:0))%4:J++;else break;i++}b=i>=s,l.push(t.bsCount[x]),t.bsCount[x]=t.sCount[x]+1+(Z?1:0),h.push(t.sCount[x]),t.sCount[x]=J-Q,f.push(t.tShift[x]),t.tShift[x]=i-t.bMarks[x];continue}if(b)break;let j=!1;for(let Q=0,Z=p.length;Q<Z;Q++)if(p[Q](t,x,n,!0)){j=!0;break}if(j){t.lineMax=x,t.blkIndent!==0&&(a.push(t.bMarks[x]),l.push(t.bsCount[x]),f.push(t.tShift[x]),h.push(t.sCount[x]),t.sCount[x]-=t.blkIndent);break}a.push(t.bMarks[x]),l.push(t.bsCount[x]),f.push(t.tShift[x]),h.push(t.sCount[x]),t.sCount[x]=-1}const k=t.blkIndent;t.blkIndent=0;const T=t.push("blockquote_open","blockquote",1);T.markup=">";const I=[e,0];T.map=I,t.md.block.tokenize(t,e,x);const M=t.push("blockquote_close","blockquote",-1);M.markup=">",t.lineMax=o,t.parentType=g,I[1]=t.line;for(let B=0;B<f.length;B++)t.bMarks[B+e]=a[B],t.tShift[B+e]=f[B],t.sCount[B+e]=h[B],t.bsCount[B+e]=l[B];return t.blkIndent=k,!0}function qPe(t,e,n,r){const i=t.eMarks[e];if(t.sCount[e]-t.blkIndent>=4)return!1;let s=t.bMarks[e]+t.tShift[e];const o=t.src.charCodeAt(s++);if(o!==42&&o!==45&&o!==95)return!1;let a=1;for(;s<i;){const h=t.src.charCodeAt(s++);if(h!==o&&!lo(h))return!1;h===o&&a++}if(a<3)return!1;if(r)return!0;t.line=e+1;const l=t.push("hr","hr",0);return l.map=[e,t.line],l.markup=Array(a+1).join(String.fromCharCode(o)),!0}function PZ(t,e){const n=t.eMarks[e];let r=t.bMarks[e]+t.tShift[e];const i=t.src.charCodeAt(r++);if(i!==42&&i!==45&&i!==43)return-1;if(r<n){const s=t.src.charCodeAt(r);if(!lo(s))return-1}return r}function DZ(t,e){const n=t.bMarks[e]+t.tShift[e],r=t.eMarks[e];let i=n;if(i+1>=r)return-1;let s=t.src.charCodeAt(i++);if(s<48||s>57)return-1;for(;;){if(i>=r)return-1;if(s=t.src.charCodeAt(i++),s>=48&&s<=57){if(i-n>=10)return-1;continue}if(s===41||s===46)break;return-1}return i<r&&(s=t.src.charCodeAt(i),!lo(s))?-1:i}function ZPe(t,e){const n=t.level+2;for(let r=e+2,i=t.tokens.length-2;r<i;r++)t.tokens[r].level===n&&t.tokens[r].type==="paragraph_open"&&(t.tokens[r+2].hidden=!0,t.tokens[r].hidden=!0,r+=2)}function XPe(t,e,n,r){let i,s,o,a,l=e,h=!0;if(t.sCount[l]-t.blkIndent>=4||t.listIndent>=0&&t.sCount[l]-t.listIndent>=4&&t.sCount[l]<t.blkIndent)return!1;let f=!1;r&&t.parentType==="paragraph"&&t.sCount[l]>=t.blkIndent&&(f=!0);let p,g,b;if((b=DZ(t,l))>=0){if(p=!0,o=t.bMarks[l]+t.tShift[l],g=Number(t.src.slice(o,b-1)),f&&g!==1)return!1}else if((b=PZ(t,l))>=0)p=!1;else return!1;if(f&&t.skipSpaces(b)>=t.eMarks[l])return!1;if(r)return!0;const x=t.src.charCodeAt(b-1),k=t.tokens.length;p?(a=t.push("ordered_list_open","ol",1),g!==1&&(a.attrs=[["start",g]])):a=t.push("bullet_list_open","ul",1);const T=[l,0];a.map=T,a.markup=String.fromCharCode(x);let I=!1;const M=t.md.block.ruler.getRules("list"),B=t.parentType;for(t.parentType="list";l<n;){s=b,i=t.eMarks[l];const j=t.sCount[l]+b-(t.bMarks[l]+t.tShift[l]);let Q=j;for(;s<i;){const xe=t.src.charCodeAt(s);if(xe===9)Q+=4-(Q+t.bsCount[l])%4;else if(xe===32)Q++;else break;s++}const Z=s;let q;Z>=i?q=1:q=Q-j,q>4&&(q=1);const J=j+q;a=t.push("list_item_open","li",1),a.markup=String.fromCharCode(x);const oe=[l,0];a.map=oe,p&&(a.info=t.src.slice(o,b-1));const me=t.tight,ae=t.tShift[l],ce=t.sCount[l],se=t.listIndent;if(t.listIndent=t.blkIndent,t.blkIndent=J,t.tight=!0,t.tShift[l]=Z-t.bMarks[l],t.sCount[l]=Q,Z>=i&&t.isEmpty(l+1)?t.line=Math.min(t.line+2,n):t.md.block.tokenize(t,l,n,!0),(!t.tight||I)&&(h=!1),I=t.line-l>1&&t.isEmpty(t.line-1),t.blkIndent=t.listIndent,t.listIndent=se,t.tShift[l]=ae,t.sCount[l]=ce,t.tight=me,a=t.push("list_item_close","li",-1),a.markup=String.fromCharCode(x),l=t.line,oe[1]=l,l>=n||t.sCount[l]<t.blkIndent||t.sCount[l]-t.blkIndent>=4)break;let ge=!1;for(let xe=0,Se=M.length;xe<Se;xe++)if(M[xe](t,l,n,!0)){ge=!0;break}if(ge)break;if(p){if(b=DZ(t,l),b<0)break;o=t.bMarks[l]+t.tShift[l]}else if(b=PZ(t,l),b<0)break;if(x!==t.src.charCodeAt(b-1))break}return p?a=t.push("ordered_list_close","ol",-1):a=t.push("bullet_list_close","ul",-1),a.markup=String.fromCharCode(x),T[1]=l,t.line=l,t.parentType=B,h&&ZPe(t,k),!0}function WPe(t,e,n,r){let i=t.bMarks[e]+t.tShift[e],s=t.eMarks[e],o=e+1;if(t.sCount[e]-t.blkIndent>=4||t.src.charCodeAt(i)!==91)return!1;function a(M){const B=t.lineMax;if(M>=B||t.isEmpty(M))return null;let j=!1;if(t.sCount[M]-t.blkIndent>3&&(j=!0),t.sCount[M]<0&&(j=!0),!j){const q=t.md.block.ruler.getRules("reference"),J=t.parentType;t.parentType="reference";let oe=!1;for(let me=0,ae=q.length;me<ae;me++)if(q[me](t,M,B,!0)){oe=!0;break}if(t.parentType=J,oe)return null}const Q=t.bMarks[M]+t.tShift[M],Z=t.eMarks[M];return t.src.slice(Q,Z+1)}let l=t.src.slice(i,s+1);s=l.length;let h=-1;for(i=1;i<s;i++){const M=l.charCodeAt(i);if(M===91)return!1;if(M===93){h=i;break}else if(M===10){const B=a(o);B!==null&&(l+=B,s=l.length,o++)}else if(M===92&&(i++,i<s&&l.charCodeAt(i)===10)){const B=a(o);B!==null&&(l+=B,s=l.length,o++)}}if(h<0||l.charCodeAt(h+1)!==58)return!1;for(i=h+2;i<s;i++){const M=l.charCodeAt(i);if(M===10){const B=a(o);B!==null&&(l+=B,s=l.length,o++)}else if(!lo(M))break}const f=t.md.helpers.parseLinkDestination(l,i,s);if(!f.ok)return!1;const p=t.md.normalizeLink(f.str);if(!t.md.validateLink(p))return!1;i=f.pos;const g=i,b=o,x=i;for(;i<s;i++){const M=l.charCodeAt(i);if(M===10){const B=a(o);B!==null&&(l+=B,s=l.length,o++)}else if(!lo(M))break}let k=t.md.helpers.parseLinkTitle(l,i,s);for(;k.can_continue;){const M=a(o);if(M===null)break;l+=M,i=s,s=l.length,o++,k=t.md.helpers.parseLinkTitle(l,i,s,k)}let T;for(i<s&&x!==i&&k.ok?(T=k.str,i=k.pos):(T="",i=g,o=b);i<s;){const M=l.charCodeAt(i);if(!lo(M))break;i++}if(i<s&&l.charCodeAt(i)!==10&&T)for(T="",i=g,o=b;i<s;){const M=l.charCodeAt(i);if(!lo(M))break;i++}if(i<s&&l.charCodeAt(i)!==10)return!1;const I=PD(l.slice(1,h));return I?(r||(typeof t.env.references>"u"&&(t.env.references={}),typeof t.env.references[I]>"u"&&(t.env.references[I]={title:T,href:p}),t.line=o),!0):!1}const GPe=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],YPe="[a-zA-Z_:][a-zA-Z0-9:._-]*",HPe="[^\"'=<>`\\x00-\\x20]+",KPe="'[^']*'",JPe='"[^"]*"',eDe="(?:"+HPe+"|"+KPe+"|"+JPe+")",tDe="(?:\\s+"+YPe+"(?:\\s*=\\s*"+eDe+")?)",boe="<[A-Za-z][A-Za-z0-9\\-]*"+tDe+"*\\s*\\/?>",_oe="<\\/[A-Za-z][A-Za-z0-9\\-]*\\s*>",nDe="<!---?>|<!--(?:[^-]|-[^-]|--[^>])*-->",rDe="<[?][\\s\\S]*?[?]>",iDe="<![A-Za-z][^>]*>",sDe="<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",oDe=new RegExp("^(?:"+boe+"|"+_oe+"|"+nDe+"|"+rDe+"|"+iDe+"|"+sDe+")"),aDe=new RegExp("^(?:"+boe+"|"+_oe+")"),kx=[[/^<(script|pre|style|textarea)(?=(\s|>|$))/i,/<\/(script|pre|style|textarea)>/i,!0],[/^<!--/,/-->/,!0],[/^<\?/,/\?>/,!0],[/^<![A-Z]/,/>/,!0],[/^<!\[CDATA\[/,/\]\]>/,!0],[new RegExp("^</?("+GPe.join("|")+")(?=(\\s|/?>|$))","i"),/^$/,!0],[new RegExp(aDe.source+"\\s*$"),/^$/,!1]];function lDe(t,e,n,r){let i=t.bMarks[e]+t.tShift[e],s=t.eMarks[e];if(t.sCount[e]-t.blkIndent>=4||!t.md.options.html||t.src.charCodeAt(i)!==60)return!1;let o=t.src.slice(i,s),a=0;for(;a<kx.length&&!kx[a][0].test(o);a++);if(a===kx.length)return!1;if(r)return kx[a][2];let l=e+1;if(!kx[a][1].test(o)){for(;l<n&&!(t.sCount[l]<t.blkIndent);l++)if(i=t.bMarks[l]+t.tShift[l],s=t.eMarks[l],o=t.src.slice(i,s),kx[a][1].test(o)){o.length!==0&&l++;break}}t.line=l;const h=t.push("html_block","",0);return h.map=[e,l],h.content=t.getLines(e,l,t.blkIndent,!0),!0}function uDe(t,e,n,r){let i=t.bMarks[e]+t.tShift[e],s=t.eMarks[e];if(t.sCount[e]-t.blkIndent>=4)return!1;let o=t.src.charCodeAt(i);if(o!==35||i>=s)return!1;let a=1;for(o=t.src.charCodeAt(++i);o===35&&i<s&&a<=6;)a++,o=t.src.charCodeAt(++i);if(a>6||i<s&&!lo(o))return!1;if(r)return!0;s=t.skipSpacesBack(s,i);const l=t.skipCharsBack(s,35,i);l>i&&lo(t.src.charCodeAt(l-1))&&(s=l),t.line=e+1;const h=t.push("heading_open","h"+String(a),1);h.markup="########".slice(0,a),h.map=[e,t.line];const f=t.push("inline","",0);f.content=t.src.slice(i,s).trim(),f.map=[e,t.line],f.children=[];const p=t.push("heading_close","h"+String(a),-1);return p.markup="########".slice(0,a),!0}function cDe(t,e,n){const r=t.md.block.ruler.getRules("paragraph");if(t.sCount[e]-t.blkIndent>=4)return!1;const i=t.parentType;t.parentType="paragraph";let s=0,o,a=e+1;for(;a<n&&!t.isEmpty(a);a++){if(t.sCount[a]-t.blkIndent>3)continue;if(t.sCount[a]>=t.blkIndent){let b=t.bMarks[a]+t.tShift[a];const x=t.eMarks[a];if(b<x&&(o=t.src.charCodeAt(b),(o===45||o===61)&&(b=t.skipChars(b,o),b=t.skipSpaces(b),b>=x))){s=o===61?1:2;break}}if(t.sCount[a]<0)continue;let g=!1;for(let b=0,x=r.length;b<x;b++)if(r[b](t,a,n,!0)){g=!0;break}if(g)break}if(!s)return!1;const l=t.getLines(e,a,t.blkIndent,!1).trim();t.line=a+1;const h=t.push("heading_open","h"+String(s),1);h.markup=String.fromCharCode(o),h.map=[e,t.line];const f=t.push("inline","",0);f.content=l,f.map=[e,t.line-1],f.children=[];const p=t.push("heading_close","h"+String(s),-1);return p.markup=String.fromCharCode(o),t.parentType=i,!0}function hDe(t,e,n){const r=t.md.block.ruler.getRules("paragraph"),i=t.parentType;let s=e+1;for(t.parentType="paragraph";s<n&&!t.isEmpty(s);s++){if(t.sCount[s]-t.blkIndent>3||t.sCount[s]<0)continue;let h=!1;for(let f=0,p=r.length;f<p;f++)if(r[f](t,s,n,!0)){h=!0;break}if(h)break}const o=t.getLines(e,s,t.blkIndent,!1).trim();t.line=s;const a=t.push("paragraph_open","p",1);a.map=[e,t.line];const l=t.push("inline","",0);return l.content=o,l.map=[e,t.line],l.children=[],t.push("paragraph_close","p",-1),t.parentType=i,!0}const w4=[["table",QPe,["paragraph","reference"]],["code",jPe],["fence",UPe,["paragraph","reference","blockquote","list"]],["blockquote",VPe,["paragraph","reference","blockquote","list"]],["hr",qPe,["paragraph","reference","blockquote","list"]],["list",XPe,["paragraph","reference","blockquote"]],["reference",WPe],["html_block",lDe,["paragraph","reference","blockquote"]],["heading",uDe,["paragraph","reference","blockquote"]],["lheading",cDe],["paragraph",hDe]];function DD(){this.ruler=new Ec;for(let t=0;t<w4.length;t++)this.ruler.push(w4[t][0],w4[t][1],{alt:(w4[t][2]||[]).slice()})}DD.prototype.tokenize=function(t,e,n){const r=this.ruler.getRules(""),i=r.length,s=t.md.options.maxNesting;let o=e,a=!1;for(;o<n&&(t.line=o=t.skipEmptyLines(o),!(o>=n||t.sCount[o]<t.blkIndent));){if(t.level>=s){t.line=n;break}const l=t.line;let h=!1;for(let f=0;f<i;f++)if(h=r[f](t,o,n,!1),h){if(l>=t.line)throw new Error("block rule didn't increment state.line");break}if(!h)throw new Error("none of the block rules matched");t.tight=!a,t.isEmpty(t.line-1)&&(a=!0),o=t.line,o<n&&t.isEmpty(o)&&(a=!0,o++,t.line=o)}};DD.prototype.parse=function(t,e,n,r){if(!t)return;const i=new this.State(t,e,n,r);this.tokenize(i,i.line,i.lineMax)};DD.prototype.State=Em;function qC(t,e,n,r){this.src=t,this.env=n,this.md=e,this.tokens=r,this.tokens_meta=Array(r.length),this.pos=0,this.posMax=this.src.length,this.level=0,this.pending="",this.pendingLevel=0,this.cache={},this.delimiters=[],this._prev_delimiters=[],this.backticks={},this.backticksScanned=!1,this.linkLevel=0}qC.prototype.pushPending=function(){const t=new zd("text","",0);return t.content=this.pending,t.level=this.pendingLevel,this.tokens.push(t),this.pending="",t};qC.prototype.push=function(t,e,n){this.pending&&this.pushPending();const r=new zd(t,e,n);let i=null;return n<0&&(this.level--,this.delimiters=this._prev_delimiters.pop()),r.level=this.level,n>0&&(this.level++,this._prev_delimiters.push(this.delimiters),this.delimiters=[],i={delimiters:this.delimiters}),this.pendingLevel=this.level,this.tokens.push(r),this.tokens_meta.push(i),r};qC.prototype.scanDelims=function(t,e){const n=this.posMax,r=this.src.charCodeAt(t),i=t>0?this.src.charCodeAt(t-1):32;let s=t;for(;s<n&&this.src.charCodeAt(s)===r;)s++;const o=s-t,a=s<n?this.src.charCodeAt(s):32,l=Xk(i)||Zk(String.fromCharCode(i)),h=Xk(a)||Zk(String.fromCharCode(a)),f=qk(i),p=qk(a),g=!p&&(!h||f||l),b=!f&&(!l||p||h);return{can_open:g&&(e||!b||l),can_close:b&&(e||!g||h),length:o}};qC.prototype.Token=zd;function fDe(t){switch(t){case 10:case 33:case 35:case 36:case 37:case 38:case 42:case 43:case 45:case 58:case 60:case 61:case 62:case 64:case 91:case 92:case 93:case 94:case 95:case 96:case 123:case 125:case 126:return!0;default:return!1}}function dDe(t,e){let n=t.pos;for(;n<t.posMax&&!fDe(t.src.charCodeAt(n));)n++;return n===t.pos?!1:(e||(t.pending+=t.src.slice(t.pos,n)),t.pos=n,!0)}const pDe=/(?:^|[^a-z0-9.+-])([a-z][a-z0-9.+-]*)$/i;function mDe(t,e){if(!t.md.options.linkify||t.linkLevel>0)return!1;const n=t.pos,r=t.posMax;if(n+3>r||t.src.charCodeAt(n)!==58||t.src.charCodeAt(n+1)!==47||t.src.charCodeAt(n+2)!==47)return!1;const i=t.pending.match(pDe);if(!i)return!1;const s=i[1],o=t.md.linkify.matchAtStart(t.src.slice(n-s.length));if(!o)return!1;let a=o.url;if(a.length<=s.length)return!1;a=a.replace(/\*+$/,"");const l=t.md.normalizeLink(a);if(!t.md.validateLink(l))return!1;if(!e){t.pending=t.pending.slice(0,-s.length);const h=t.push("link_open","a",1);h.attrs=[["href",l]],h.markup="linkify",h.info="auto";const f=t.push("text","",0);f.content=t.md.normalizeLinkText(a);const p=t.push("link_close","a",-1);p.markup="linkify",p.info="auto"}return t.pos+=a.length-s.length,!0}function gDe(t,e){let n=t.pos;if(t.src.charCodeAt(n)!==10)return!1;const r=t.pending.length-1,i=t.posMax;if(!e)if(r>=0&&t.pending.charCodeAt(r)===32)if(r>=1&&t.pending.charCodeAt(r-1)===32){let s=r-1;for(;s>=1&&t.pending.charCodeAt(s-1)===32;)s--;t.pending=t.pending.slice(0,s),t.push("hardbreak","br",0)}else t.pending=t.pending.slice(0,-1),t.push("softbreak","br",0);else t.push("softbreak","br",0);for(n++;n<i&&lo(t.src.charCodeAt(n));)n++;return t.pos=n,!0}const jN=[];for(let t=0;t<256;t++)jN.push(0);"\\!\"#$%&'()*+,./:;<=>?@[]^_`{|}~-".split("").forEach(function(t){jN[t.charCodeAt(0)]=1});function yDe(t,e){let n=t.pos;const r=t.posMax;if(t.src.charCodeAt(n)!==92||(n++,n>=r))return!1;let i=t.src.charCodeAt(n);if(i===10){for(e||t.push("hardbreak","br",0),n++;n<r&&(i=t.src.charCodeAt(n),!!lo(i));)n++;return t.pos=n,!0}let s=t.src[n];if(i>=55296&&i<=56319&&n+1<r){const a=t.src.charCodeAt(n+1);a>=56320&&a<=57343&&(s+=t.src[n+1],n++)}const o="\\"+s;if(!e){const a=t.push("text_special","",0);i<256&&jN[i]!==0?a.content=s:a.content=o,a.markup=o,a.info="escape"}return t.pos=n+1,!0}function vDe(t,e){let n=t.pos;if(t.src.charCodeAt(n)!==96)return!1;const i=n;n++;const s=t.posMax;for(;n<s&&t.src.charCodeAt(n)===96;)n++;const o=t.src.slice(i,n),a=o.length;if(t.backticksScanned&&(t.backticks[a]||0)<=i)return e||(t.pending+=o),t.pos+=a,!0;let l=n,h;for(;(h=t.src.indexOf("`",l))!==-1;){for(l=h+1;l<s&&t.src.charCodeAt(l)===96;)l++;const f=l-h;if(f===a){if(!e){const p=t.push("code_inline","code",0);p.markup=o,p.content=t.src.slice(n,h).replace(/\n/g," ").replace(/^ (.+) $/,"$1")}return t.pos=l,!0}t.backticks[f]=h}return t.backticksScanned=!0,e||(t.pending+=o),t.pos+=a,!0}function bDe(t,e){const n=t.pos,r=t.src.charCodeAt(n);if(e||r!==126)return!1;const i=t.scanDelims(t.pos,!0);let s=i.length;const o=String.fromCharCode(r);if(s<2)return!1;let a;s%2&&(a=t.push("text","",0),a.content=o,s--);for(let l=0;l<s;l+=2)a=t.push("text","",0),a.content=o+o,t.delimiters.push({marker:r,length:0,token:t.tokens.length-1,end:-1,open:i.can_open,close:i.can_close});return t.pos+=i.length,!0}function IZ(t,e){let n;const r=[],i=e.length;for(let s=0;s<i;s++){const o=e[s];if(o.marker!==126||o.end===-1)continue;const a=e[o.end];n=t.tokens[o.token],n.type="s_open",n.tag="s",n.nesting=1,n.markup="~~",n.content="",n=t.tokens[a.token],n.type="s_close",n.tag="s",n.nesting=-1,n.markup="~~",n.content="",t.tokens[a.token-1].type==="text"&&t.tokens[a.token-1].content==="~"&&r.push(a.token-1)}for(;r.length;){const s=r.pop();let o=s+1;for(;o<t.tokens.length&&t.tokens[o].type==="s_close";)o++;o--,s!==o&&(n=t.tokens[o],t.tokens[o]=t.tokens[s],t.tokens[s]=n)}}function _De(t){const e=t.tokens_meta,n=t.tokens_meta.length;IZ(t,t.delimiters);for(let r=0;r<n;r++)e[r]&&e[r].delimiters&&IZ(t,e[r].delimiters)}const xoe={tokenize:bDe,postProcess:_De};function xDe(t,e){const n=t.pos,r=t.src.charCodeAt(n);if(e||r!==95&&r!==42)return!1;const i=t.scanDelims(t.pos,r===42);for(let s=0;s<i.length;s++){const o=t.push("text","",0);o.content=String.fromCharCode(r),t.delimiters.push({marker:r,length:i.length,token:t.tokens.length-1,end:-1,open:i.can_open,close:i.can_close})}return t.pos+=i.length,!0}function MZ(t,e){const n=e.length;for(let r=n-1;r>=0;r--){const i=e[r];if(i.marker!==95&&i.marker!==42||i.end===-1)continue;const s=e[i.end],o=r>0&&e[r-1].end===i.end+1&&e[r-1].marker===i.marker&&e[r-1].token===i.token-1&&e[i.end+1].token===s.token+1,a=String.fromCharCode(i.marker),l=t.tokens[i.token];l.type=o?"strong_open":"em_open",l.tag=o?"strong":"em",l.nesting=1,l.markup=o?a+a:a,l.content="";const h=t.tokens[s.token];h.type=o?"strong_close":"em_close",h.tag=o?"strong":"em",h.nesting=-1,h.markup=o?a+a:a,h.content="",o&&(t.tokens[e[r-1].token].content="",t.tokens[e[i.end+1].token].content="",r--)}}function wDe(t){const e=t.tokens_meta,n=t.tokens_meta.length;MZ(t,t.delimiters);for(let r=0;r<n;r++)e[r]&&e[r].delimiters&&MZ(t,e[r].delimiters)}const woe={tokenize:xDe,postProcess:wDe};function ODe(t,e){let n,r,i,s,o="",a="",l=t.pos,h=!0;if(t.src.charCodeAt(t.pos)!==91)return!1;const f=t.pos,p=t.posMax,g=t.pos+1,b=t.md.helpers.parseLinkLabel(t,t.pos,!0);if(b<0)return!1;let x=b+1;if(x<p&&t.src.charCodeAt(x)===40){for(h=!1,x++;x<p&&(n=t.src.charCodeAt(x),!(!lo(n)&&n!==10));x++);if(x>=p)return!1;if(l=x,i=t.md.helpers.parseLinkDestination(t.src,x,t.posMax),i.ok){for(o=t.md.normalizeLink(i.str),t.md.validateLink(o)?x=i.pos:o="",l=x;x<p&&(n=t.src.charCodeAt(x),!(!lo(n)&&n!==10));x++);if(i=t.md.helpers.parseLinkTitle(t.src,x,t.posMax),x<p&&l!==x&&i.ok)for(a=i.str,x=i.pos;x<p&&(n=t.src.charCodeAt(x),!(!lo(n)&&n!==10));x++);}(x>=p||t.src.charCodeAt(x)!==41)&&(h=!0),x++}if(h){if(typeof t.env.references>"u")return!1;if(x<p&&t.src.charCodeAt(x)===91?(l=x+1,x=t.md.helpers.parseLinkLabel(t,x),x>=0?r=t.src.slice(l,x++):x=b+1):x=b+1,r||(r=t.src.slice(g,b)),s=t.env.references[PD(r)],!s)return t.pos=f,!1;o=s.href,a=s.title}if(!e){t.pos=g,t.posMax=b;const k=t.push("link_open","a",1),T=[["href",o]];k.attrs=T,a&&T.push(["title",a]),t.linkLevel++,t.md.inline.tokenize(t),t.linkLevel--,t.push("link_close","a",-1)}return t.pos=x,t.posMax=p,!0}function SDe(t,e){let n,r,i,s,o,a,l,h,f="";const p=t.pos,g=t.posMax;if(t.src.charCodeAt(t.pos)!==33||t.src.charCodeAt(t.pos+1)!==91)return!1;const b=t.pos+2,x=t.md.helpers.parseLinkLabel(t,t.pos+1,!1);if(x<0)return!1;if(s=x+1,s<g&&t.src.charCodeAt(s)===40){for(s++;s<g&&(n=t.src.charCodeAt(s),!(!lo(n)&&n!==10));s++);if(s>=g)return!1;for(h=s,a=t.md.helpers.parseLinkDestination(t.src,s,t.posMax),a.ok&&(f=t.md.normalizeLink(a.str),t.md.validateLink(f)?s=a.pos:f=""),h=s;s<g&&(n=t.src.charCodeAt(s),!(!lo(n)&&n!==10));s++);if(a=t.md.helpers.parseLinkTitle(t.src,s,t.posMax),s<g&&h!==s&&a.ok)for(l=a.str,s=a.pos;s<g&&(n=t.src.charCodeAt(s),!(!lo(n)&&n!==10));s++);else l="";if(s>=g||t.src.charCodeAt(s)!==41)return t.pos=p,!1;s++}else{if(typeof t.env.references>"u")return!1;if(s<g&&t.src.charCodeAt(s)===91?(h=s+1,s=t.md.helpers.parseLinkLabel(t,s),s>=0?i=t.src.slice(h,s++):s=x+1):s=x+1,i||(i=t.src.slice(b,x)),o=t.env.references[PD(i)],!o)return t.pos=p,!1;f=o.href,l=o.title}if(!e){r=t.src.slice(b,x);const k=[];t.md.inline.parse(r,t.md,t.env,k);const T=t.push("image","img",0),I=[["src",f],["alt",""]];T.attrs=I,T.children=k,T.content=r,l&&I.push(["title",l])}return t.pos=s,t.posMax=g,!0}const kDe=/^([a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*)$/,CDe=/^([a-zA-Z][a-zA-Z0-9+.-]{1,31}):([^<>\x00-\x20]*)$/;function ADe(t,e){let n=t.pos;if(t.src.charCodeAt(n)!==60)return!1;const r=t.pos,i=t.posMax;for(;;){if(++n>=i)return!1;const o=t.src.charCodeAt(n);if(o===60)return!1;if(o===62)break}const s=t.src.slice(r+1,n);if(CDe.test(s)){const o=t.md.normalizeLink(s);if(!t.md.validateLink(o))return!1;if(!e){const a=t.push("link_open","a",1);a.attrs=[["href",o]],a.markup="autolink",a.info="auto";const l=t.push("text","",0);l.content=t.md.normalizeLinkText(s);const h=t.push("link_close","a",-1);h.markup="autolink",h.info="auto"}return t.pos+=s.length+2,!0}if(kDe.test(s)){const o=t.md.normalizeLink("mailto:"+s);if(!t.md.validateLink(o))return!1;if(!e){const a=t.push("link_open","a",1);a.attrs=[["href",o]],a.markup="autolink",a.info="auto";const l=t.push("text","",0);l.content=t.md.normalizeLinkText(s);const h=t.push("link_close","a",-1);h.markup="autolink",h.info="auto"}return t.pos+=s.length+2,!0}return!1}function EDe(t){return/^<a[>\s]/i.test(t)}function TDe(t){return/^<\/a\s*>/i.test(t)}function PDe(t){const e=t|32;return e>=97&&e<=122}function DDe(t,e){if(!t.md.options.html)return!1;const n=t.posMax,r=t.pos;if(t.src.charCodeAt(r)!==60||r+2>=n)return!1;const i=t.src.charCodeAt(r+1);if(i!==33&&i!==63&&i!==47&&!PDe(i))return!1;const s=t.src.slice(r).match(oDe);if(!s)return!1;if(!e){const o=t.push("html_inline","",0);o.content=s[0],EDe(o.content)&&t.linkLevel++,TDe(o.content)&&t.linkLevel--}return t.pos+=s[0].length,!0}const IDe=/^&#((?:x[a-f0-9]{1,6}|[0-9]{1,7}));/i,MDe=/^&([a-z][a-z0-9]{1,31});/i;function RDe(t,e){const n=t.pos,r=t.posMax;if(t.src.charCodeAt(n)!==38||n+1>=r)return!1;if(t.src.charCodeAt(n+1)===35){const s=t.src.slice(n).match(IDe);if(s){if(!e){const o=s[1][0].toLowerCase()==="x"?parseInt(s[1].slice(1),16):parseInt(s[1],10),a=t.push("text_special","",0);a.content=zN(o)?L6(o):L6(65533),a.markup=s[0],a.info="entity"}return t.pos+=s[0].length,!0}}else{const s=t.src.slice(n).match(MDe);if(s){const o=poe(s[0]);if(o!==s[0]){if(!e){const a=t.push("text_special","",0);a.content=o,a.markup=s[0],a.info="entity"}return t.pos+=s[0].length,!0}}}return!1}function RZ(t){const e={},n=t.length;if(!n)return;let r=0,i=-2;const s=[];for(let o=0;o<n;o++){const a=t[o];if(s.push(0),(t[r].marker!==a.marker||i!==a.token-1)&&(r=o),i=a.token,a.length=a.length||0,!a.close)continue;e.hasOwnProperty(a.marker)||(e[a.marker]=[-1,-1,-1,-1,-1,-1]);const l=e[a.marker][(a.open?3:0)+a.length%3];let h=r-s[r]-1,f=h;for(;h>l;h-=s[h]+1){const p=t[h];if(p.marker===a.marker&&p.open&&p.end<0){let g=!1;if((p.close||a.open)&&(p.length+a.length)%3===0&&(p.length%3!==0||a.length%3!==0)&&(g=!0),!g){const b=h>0&&!t[h-1].open?s[h-1]+1:0;s[o]=o-h+b,s[h]=b,a.open=!1,p.end=o,p.close=!1,f=-1,i=-2;break}}}f!==-1&&(e[a.marker][(a.open?3:0)+(a.length||0)%3]=f)}}function FDe(t){const e=t.tokens_meta,n=t.tokens_meta.length;RZ(t.delimiters);for(let r=0;r<n;r++)e[r]&&e[r].delimiters&&RZ(e[r].delimiters)}function LDe(t){let e,n,r=0;const i=t.tokens,s=t.tokens.length;for(e=n=0;e<s;e++)i[e].nesting<0&&r--,i[e].level=r,i[e].nesting>0&&r++,i[e].type==="text"&&e+1<s&&i[e+1].type==="text"?i[e+1].content=i[e].content+i[e+1].content:(e!==n&&(i[n]=i[e]),n++);e!==n&&(i.length=n)}const pR=[["text",dDe],["linkify",mDe],["newline",gDe],["escape",yDe],["backticks",vDe],["strikethrough",xoe.tokenize],["emphasis",woe.tokenize],["link",ODe],["image",SDe],["autolink",ADe],["html_inline",DDe],["entity",RDe]],mR=[["balance_pairs",FDe],["strikethrough",xoe.postProcess],["emphasis",woe.postProcess],["fragments_join",LDe]];function ZC(){this.ruler=new Ec;for(let t=0;t<pR.length;t++)this.ruler.push(pR[t][0],pR[t][1]);this.ruler2=new Ec;for(let t=0;t<mR.length;t++)this.ruler2.push(mR[t][0],mR[t][1])}ZC.prototype.skipToken=function(t){const e=t.pos,n=this.ruler.getRules(""),r=n.length,i=t.md.options.maxNesting,s=t.cache;if(typeof s[e]<"u"){t.pos=s[e];return}let o=!1;if(t.level<i){for(let a=0;a<r;a++)if(t.level++,o=n[a](t,!0),t.level--,o){if(e>=t.pos)throw new Error("inline rule didn't increment state.pos");break}}else t.pos=t.posMax;o||t.pos++,s[e]=t.pos};ZC.prototype.tokenize=function(t){const e=this.ruler.getRules(""),n=e.length,r=t.posMax,i=t.md.options.maxNesting;for(;t.pos<r;){const s=t.pos;let o=!1;if(t.level<i){for(let a=0;a<n;a++)if(o=e[a](t,!1),o){if(s>=t.pos)throw new Error("inline rule didn't increment state.pos");break}}if(o){if(t.pos>=r)break;continue}t.pending+=t.src[t.pos++]}t.pending&&t.pushPending()};ZC.prototype.parse=function(t,e,n,r){const i=new this.State(t,e,n,r);this.tokenize(i);const s=this.ruler2.getRules(""),o=s.length;for(let a=0;a<o;a++)s[a](i)};ZC.prototype.State=qC;function $De(t){const e={};t=t||{},e.src_Any=uoe.source,e.src_Cc=coe.source,e.src_Z=foe.source,e.src_P=BN.source,e.src_ZPCc=[e.src_Z,e.src_P,e.src_Cc].join("|"),e.src_ZCc=[e.src_Z,e.src_Cc].join("|");const n="[><ï½]";return e.src_pseudo_letter="(?:(?!"+n+"|"+e.src_ZPCc+")"+e.src_Any+")",e.src_ip4="(?:(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.){3}(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)",e.src_auth="(?:(?:(?!"+e.src_ZCc+"|[@/\\[\\]()]).)+@)?",e.src_port="(?::(?:6(?:[0-4]\\d{3}|5(?:[0-4]\\d{2}|5(?:[0-2]\\d|3[0-5])))|[1-5]?\\d{1,4}))?",e.src_host_terminator="(?=$|"+n+"|"+e.src_ZPCc+")(?!"+(t["---"]?"-(?!--)|":"-|")+"_|:\\d|\\.-|\\.(?!$|"+e.src_ZPCc+"))",e.src_path="(?:[/?#](?:(?!"+e.src_ZCc+"|"+n+`|[()[\\]{}.,"'?!\\-;]).|\\[(?:(?!`+e.src_ZCc+"|\\]).)*\\]|\\((?:(?!"+e.src_ZCc+"|[)]).)*\\)|\\{(?:(?!"+e.src_ZCc+'|[}]).)*\\}|\\"(?:(?!'+e.src_ZCc+`|["]).)+\\"|\\'(?:(?!`+e.src_ZCc+"|[']).)+\\'|\\'(?="+e.src_pseudo_letter+"|[-])|\\.{2,}[a-zA-Z0-9%/&]|\\.(?!"+e.src_ZCc+"|[.]|$)|"+(t["---"]?"\\-(?!--(?:[^-]|$))(?:-*)|":"\\-+|")+",(?!"+e.src_ZCc+"|$)|;(?!"+e.src_ZCc+"|$)|\\!+(?!"+e.src_ZCc+"|[!]|$)|\\?(?!"+e.src_ZCc+"|[?]|$))+|\\/)?",e.src_email_name='[\\-;:&=\\+\\$,\\.a-zA-Z0-9_][\\-;:&=\\+\\$,\\"\\.a-zA-Z0-9_]*',e.src_xn="xn--[a-z0-9\\-]{1,59}",e.src_domain_root="(?:"+e.src_xn+"|"+e.src_pseudo_letter+"{1,63})",e.src_domain="(?:"+e.src_xn+"|(?:"+e.src_pseudo_letter+")|(?:"+e.src_pseudo_letter+"(?:-|"+e.src_pseudo_letter+"){0,61}"+e.src_pseudo_letter+"))",e.src_host="(?:(?:(?:(?:"+e.src_domain+")\\.)*"+e.src_domain+"))",e.tpl_host_fuzzy="(?:"+e.src_ip4+"|(?:(?:(?:"+e.src_domain+")\\.)+(?:%TLDS%)))",e.tpl_host_no_ip_fuzzy="(?:(?:(?:"+e.src_domain+")\\.)+(?:%TLDS%))",e.src_host_strict=e.src_host+e.src_host_terminator,e.tpl_host_fuzzy_strict=e.tpl_host_fuzzy+e.src_host_terminator,e.src_host_port_strict=e.src_host+e.src_port+e.src_host_terminator,e.tpl_host_port_fuzzy_strict=e.tpl_host_fuzzy+e.src_port+e.src_host_terminator,e.tpl_host_port_no_ip_fuzzy_strict=e.tpl_host_no_ip_fuzzy+e.src_port+e.src_host_terminator,e.tpl_host_fuzzy_test="localhost|www\\.|\\.\\d{1,3}\\.|(?:\\.(?:%TLDS%)(?:"+e.src_ZPCc+"|>|$))",e.tpl_email_fuzzy="(^|"+n+'|"|\\(|'+e.src_ZCc+")("+e.src_email_name+"@"+e.tpl_host_fuzzy_strict+")",e.tpl_link_fuzzy="(^|(?![.:/\\-_@])(?:[$+<=>^`|ï½]|"+e.src_ZPCc+"))((?![$+<=>^`|ï½])"+e.tpl_host_port_fuzzy_strict+e.src_path+")",e.tpl_link_no_ip_fuzzy="(^|(?![.:/\\-_@])(?:[$+<=>^`|ï½]|"+e.src_ZPCc+"))((?![$+<=>^`|ï½])"+e.tpl_host_port_no_ip_fuzzy_strict+e.src_path+")",e}function A9(t){return Array.prototype.slice.call(arguments,1).forEach(function(n){n&&Object.keys(n).forEach(function(r){t[r]=n[r]})}),t}function ID(t){return Object.prototype.toString.call(t)}function BDe(t){return ID(t)==="[object String]"}function NDe(t){return ID(t)==="[object Object]"}function zDe(t){return ID(t)==="[object RegExp]"}function FZ(t){return ID(t)==="[object Function]"}function QDe(t){return t.replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}const Ooe={fuzzyLink:!0,fuzzyEmail:!0,fuzzyIP:!1};function jDe(t){return Object.keys(t||{}).reduce(function(e,n){return e||Ooe.hasOwnProperty(n)},!1)}const UDe={"http:":{validate:function(t,e,n){const r=t.slice(e);return n.re.http||(n.re.http=new RegExp("^\\/\\/"+n.re.src_auth+n.re.src_host_port_strict+n.re.src_path,"i")),n.re.http.test(r)?r.match(n.re.http)[0].length:0}},"https:":"http:","ftp:":"http:","//":{validate:function(t,e,n){const r=t.slice(e);return n.re.no_http||(n.re.no_http=new RegExp("^"+n.re.src_auth+"(?:localhost|(?:(?:"+n.re.src_domain+")\\.)+"+n.re.src_domain_root+")"+n.re.src_port+n.re.src_host_terminator+n.re.src_path,"i")),n.re.no_http.test(r)?e>=3&&t[e-3]===":"||e>=3&&t[e-3]==="/"?0:r.match(n.re.no_http)[0].length:0}},"mailto:":{validate:function(t,e,n){const r=t.slice(e);return n.re.mailto||(n.re.mailto=new RegExp("^"+n.re.src_email_name+"@"+n.re.src_host_strict,"i")),n.re.mailto.test(r)?r.match(n.re.mailto)[0].length:0}}},VDe="a[cdefgilmnoqrstuwxz]|b[abdefghijmnorstvwyz]|c[acdfghiklmnoruvwxyz]|d[ejkmoz]|e[cegrstu]|f[ijkmor]|g[abdefghilmnpqrstuwy]|h[kmnrtu]|i[delmnoqrst]|j[emop]|k[eghimnprwyz]|l[abcikrstuvy]|m[acdeghklmnopqrstuvwxyz]|n[acefgilopruz]|om|p[aefghklmnrstwy]|qa|r[eosuw]|s[abcdeghijklmnortuvxyz]|t[cdfghjklmnortvwz]|u[agksyz]|v[aceginu]|w[fs]|y[et]|z[amw]",qDe="biz|com|edu|gov|net|org|pro|web|xxx|aero|asia|coop|info|museum|name|shop|ÑÑ".split("|");function ZDe(t){t.__index__=-1,t.__text_cache__=""}function XDe(t){return function(e,n){const r=e.slice(n);return t.test(r)?r.match(t)[0].length:0}}function LZ(){return function(t,e){e.normalize(t)}}function $6(t){const e=t.re=$De(t.__opts__),n=t.__tlds__.slice();t.onCompile(),t.__tlds_replaced__||n.push(VDe),n.push(e.src_xn),e.src_tlds=n.join("|");function r(a){return a.replace("%TLDS%",e.src_tlds)}e.email_fuzzy=RegExp(r(e.tpl_email_fuzzy),"i"),e.link_fuzzy=RegExp(r(e.tpl_link_fuzzy),"i"),e.link_no_ip_fuzzy=RegExp(r(e.tpl_link_no_ip_fuzzy),"i"),e.host_fuzzy_test=RegExp(r(e.tpl_host_fuzzy_test),"i");const i=[];t.__compiled__={};function s(a,l){throw new Error('(LinkifyIt) Invalid schema "'+a+'": '+l)}Object.keys(t.__schemas__).forEach(function(a){const l=t.__schemas__[a];if(l===null)return;const h={validate:null,link:null};if(t.__compiled__[a]=h,NDe(l)){zDe(l.validate)?h.validate=XDe(l.validate):FZ(l.validate)?h.validate=l.validate:s(a,l),FZ(l.normalize)?h.normalize=l.normalize:l.normalize?s(a,l):h.normalize=LZ();return}if(BDe(l)){i.push(a);return}s(a,l)}),i.forEach(function(a){t.__compiled__[t.__schemas__[a]]&&(t.__compiled__[a].validate=t.__compiled__[t.__schemas__[a]].validate,t.__compiled__[a].normalize=t.__compiled__[t.__schemas__[a]].normalize)}),t.__compiled__[""]={validate:null,normalize:LZ()};const o=Object.keys(t.__compiled__).filter(function(a){return a.length>0&&t.__compiled__[a]}).map(QDe).join("|");t.re.schema_test=RegExp("(^|(?!_)(?:[><ï½]|"+e.src_ZPCc+"))("+o+")","i"),t.re.schema_search=RegExp("(^|(?!_)(?:[><ï½]|"+e.src_ZPCc+"))("+o+")","ig"),t.re.schema_at_start=RegExp("^"+t.re.schema_search.source,"i"),t.re.pretest=RegExp("("+t.re.schema_test.source+")|("+t.re.host_fuzzy_test.source+")|@","i"),ZDe(t)}function WDe(t,e){const n=t.__index__,r=t.__last_index__,i=t.__text_cache__.slice(n,r);this.schema=t.__schema__.toLowerCase(),this.index=n+e,this.lastIndex=r+e,this.raw=i,this.text=i,this.url=i}function E9(t,e){const n=new WDe(t,e);return t.__compiled__[n.schema].normalize(n,t),n}function Oh(t,e){if(!(this instanceof Oh))return new Oh(t,e);e||jDe(t)&&(e=t,t={}),this.__opts__=A9({},Ooe,e),this.__index__=-1,this.__last_index__=-1,this.__schema__="",this.__text_cache__="",this.__schemas__=A9({},UDe,t),this.__compiled__={},this.__tlds__=qDe,this.__tlds_replaced__=!1,this.re={},$6(this)}Oh.prototype.add=function(e,n){return this.__schemas__[e]=n,$6(this),this};Oh.prototype.set=function(e){return this.__opts__=A9(this.__opts__,e),this};Oh.prototype.test=function(e){if(this.__text_cache__=e,this.__index__=-1,!e.length)return!1;let n,r,i,s,o,a,l,h,f;if(this.re.schema_test.test(e)){for(l=this.re.schema_search,l.lastIndex=0;(n=l.exec(e))!==null;)if(s=this.testSchemaAt(e,n[2],l.lastIndex),s){this.__schema__=n[2],this.__index__=n.index+n[1].length,this.__last_index__=n.index+n[0].length+s;break}}return this.__opts__.fuzzyLink&&this.__compiled__["http:"]&&(h=e.search(this.re.host_fuzzy_test),h>=0&&(this.__index__<0||h<this.__index__)&&(r=e.match(this.__opts__.fuzzyIP?this.re.link_fuzzy:this.re.link_no_ip_fuzzy))!==null&&(o=r.index+r[1].length,(this.__index__<0||o<this.__index__)&&(this.__schema__="",this.__index__=o,this.__last_index__=r.index+r[0].length))),this.__opts__.fuzzyEmail&&this.__compiled__["mailto:"]&&(f=e.indexOf("@"),f>=0&&(i=e.match(this.re.email_fuzzy))!==null&&(o=i.index+i[1].length,a=i.index+i[0].length,(this.__index__<0||o<this.__index__||o===this.__index__&&a>this.__last_index__)&&(this.__schema__="mailto:",this.__index__=o,this.__last_index__=a))),this.__index__>=0};Oh.prototype.pretest=function(e){return this.re.pretest.test(e)};Oh.prototype.testSchemaAt=function(e,n,r){return this.__compiled__[n.toLowerCase()]?this.__compiled__[n.toLowerCase()].validate(e,r,this):0};Oh.prototype.match=function(e){const n=[];let r=0;this.__index__>=0&&this.__text_cache__===e&&(n.push(E9(this,r)),r=this.__last_index__);let i=r?e.slice(r):e;for(;this.test(i);)n.push(E9(this,r)),i=i.slice(this.__last_index__),r+=this.__last_index__;return n.length?n:null};Oh.prototype.matchAtStart=function(e){if(this.__text_cache__=e,this.__index__=-1,!e.length)return null;const n=this.re.schema_at_start.exec(e);if(!n)return null;const r=this.testSchemaAt(e,n[2],n[0].length);return r?(this.__schema__=n[2],this.__index__=n.index+n[1].length,this.__last_index__=n.index+n[0].length+r,E9(this,0)):null};Oh.prototype.tlds=function(e,n){return e=Array.isArray(e)?e:[e],n?(this.__tlds__=this.__tlds__.concat(e).sort().filter(function(r,i,s){return r!==s[i-1]}).reverse(),$6(this),this):(this.__tlds__=e.slice(),this.__tlds_replaced__=!0,$6(this),this)};Oh.prototype.normalize=function(e){e.schema||(e.url="http://"+e.url),e.schema==="mailto:"&&!/^mailto:/i.test(e.url)&&(e.url="mailto:"+e.url)};Oh.prototype.onCompile=function(){};const kw=2147483647,Wp=36,UN=1,Wk=26,GDe=38,YDe=700,Soe=72,koe=128,Coe="-",HDe=/^xn--/,KDe=/[^\0-\x7F]/,JDe=/[\x2E\u3002\uFF0E\uFF61]/g,eIe={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},gR=Wp-UN,Gp=Math.floor,yR=String.fromCharCode;function Oy(t){throw new RangeError(eIe[t])}function tIe(t,e){const n=[];let r=t.length;for(;r--;)n[r]=e(t[r]);return n}function Aoe(t,e){const n=t.split("@");let r="";n.length>1&&(r=n[0]+"@",t=n[1]),t=t.replace(JDe,".");const i=t.split("."),s=tIe(i,e).join(".");return r+s}function Eoe(t){const e=[];let n=0;const r=t.length;for(;n<r;){const i=t.charCodeAt(n++);if(i>=55296&&i<=56319&&n<r){const s=t.charCodeAt(n++);(s&64512)==56320?e.push(((i&1023)<<10)+(s&1023)+65536):(e.push(i),n--)}else e.push(i)}return e}const nIe=t=>String.fromCodePoint(...t),rIe=function(t){return t>=48&&t<58?26+(t-48):t>=65&&t<91?t-65:t>=97&&t<123?t-97:Wp},$Z=function(t,e){return t+22+75*(t<26)-((e!=0)<<5)},Toe=function(t,e,n){let r=0;for(t=n?Gp(t/YDe):t>>1,t+=Gp(t/e);t>gR*Wk>>1;r+=Wp)t=Gp(t/gR);return Gp(r+(gR+1)*t/(t+GDe))},Poe=function(t){const e=[],n=t.length;let r=0,i=koe,s=Soe,o=t.lastIndexOf(Coe);o<0&&(o=0);for(let a=0;a<o;++a)t.charCodeAt(a)>=128&&Oy("not-basic"),e.push(t.charCodeAt(a));for(let a=o>0?o+1:0;a<n;){const l=r;for(let f=1,p=Wp;;p+=Wp){a>=n&&Oy("invalid-input");const g=rIe(t.charCodeAt(a++));g>=Wp&&Oy("invalid-input"),g>Gp((kw-r)/f)&&Oy("overflow"),r+=g*f;const b=p<=s?UN:p>=s+Wk?Wk:p-s;if(g<b)break;const x=Wp-b;f>Gp(kw/x)&&Oy("overflow"),f*=x}const h=e.length+1;s=Toe(r-l,h,l==0),Gp(r/h)>kw-i&&Oy("overflow"),i+=Gp(r/h),r%=h,e.splice(r++,0,i)}return String.fromCodePoint(...e)},Doe=function(t){const e=[];t=Eoe(t);const n=t.length;let r=koe,i=0,s=Soe;for(const l of t)l<128&&e.push(yR(l));const o=e.length;let a=o;for(o&&e.push(Coe);a<n;){let l=kw;for(const f of t)f>=r&&f<l&&(l=f);const h=a+1;l-r>Gp((kw-i)/h)&&Oy("overflow"),i+=(l-r)*h,r=l;for(const f of t)if(f<r&&++i>kw&&Oy("overflow"),f===r){let p=i;for(let g=Wp;;g+=Wp){const b=g<=s?UN:g>=s+Wk?Wk:g-s;if(p<b)break;const x=p-b,k=Wp-b;e.push(yR($Z(b+x%k,0))),p=Gp(x/k)}e.push(yR($Z(p,0))),s=Toe(i,h,a===o),i=0,++a}++i,++r}return e.join("")},iIe=function(t){return Aoe(t,function(e){return HDe.test(e)?Poe(e.slice(4).toLowerCase()):e})},sIe=function(t){return Aoe(t,function(e){return KDe.test(e)?"xn--"+Doe(e):e})},Ioe={version:"2.3.1",ucs2:{decode:Eoe,encode:nIe},decode:Poe,encode:Doe,toASCII:sIe,toUnicode:iIe},oIe={options:{html:!1,xhtmlOut:!1,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"ââââ",highlight:null,maxNesting:100},components:{core:{},block:{},inline:{}}},aIe={options:{html:!1,xhtmlOut:!1,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"ââââ",highlight:null,maxNesting:20},components:{core:{rules:["normalize","block","inline","text_join"]},block:{rules:["paragraph"]},inline:{rules:["text"],rules2:["balance_pairs","fragments_join"]}}},lIe={options:{html:!0,xhtmlOut:!0,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"ââââ",highlight:null,maxNesting:20},components:{core:{rules:["normalize","block","inline","text_join"]},block:{rules:["blockquote","code","fence","heading","hr","html_block","lheading","list","reference","paragraph"]},inline:{rules:["autolink","backticks","emphasis","entity","escape","html_inline","image","link","newline","text"],rules2:["balance_pairs","emphasis","fragments_join"]}}},uIe={default:oIe,zero:aIe,commonmark:lIe},cIe=/^(vbscript|javascript|file|data):/,hIe=/^data:image\/(gif|png|jpeg|webp);/;function fIe(t){const e=t.trim().toLowerCase();return cIe.test(e)?hIe.test(e):!0}const Moe=["http:","https:","mailto:"];function dIe(t){const e=$N(t,!0);if(e.hostname&&(!e.protocol||Moe.indexOf(e.protocol)>=0))try{e.hostname=Ioe.toASCII(e.hostname)}catch{}return VC(LN(e))}function pIe(t){const e=$N(t,!0);if(e.hostname&&(!e.protocol||Moe.indexOf(e.protocol)>=0))try{e.hostname=Ioe.toUnicode(e.hostname)}catch{}return y2(LN(e),y2.defaultChars+"%")}function Of(t,e){if(!(this instanceof Of))return new Of(t,e);e||NN(t)||(e=t||{},t="default"),this.inline=new ZC,this.block=new DD,this.core=new QN,this.renderer=new tO,this.linkify=new Oh,this.validateLink=fIe,this.normalizeLink=dIe,this.normalizeLinkText=pIe,this.utils=gPe,this.helpers=TD({},_Pe),this.options={},this.configure(t),e&&this.set(e)}Of.prototype.set=function(t){return TD(this.options,t),this};Of.prototype.configure=function(t){const e=this;if(NN(t)){const n=t;if(t=uIe[n],!t)throw new Error('Wrong `markdown-it` preset "'+n+'", check name')}if(!t)throw new Error("Wrong `markdown-it` preset, can't be empty");return t.options&&e.set(t.options),t.components&&Object.keys(t.components).forEach(function(n){t.components[n].rules&&e[n].ruler.enableOnly(t.components[n].rules),t.components[n].rules2&&e[n].ruler2.enableOnly(t.components[n].rules2)}),this};Of.prototype.enable=function(t,e){let n=[];Array.isArray(t)||(t=[t]),["core","block","inline"].forEach(function(i){n=n.concat(this[i].ruler.enable(t,!0))},this),n=n.concat(this.inline.ruler2.enable(t,!0));const r=t.filter(function(i){return n.indexOf(i)<0});if(r.length&&!e)throw new Error("MarkdownIt. Failed to enable unknown rule(s): "+r);return this};Of.prototype.disable=function(t,e){let n=[];Array.isArray(t)||(t=[t]),["core","block","inline"].forEach(function(i){n=n.concat(this[i].ruler.disable(t,!0))},this),n=n.concat(this.inline.ruler2.disable(t,!0));const r=t.filter(function(i){return n.indexOf(i)<0});if(r.length&&!e)throw new Error("MarkdownIt. Failed to disable unknown rule(s): "+r);return this};Of.prototype.use=function(t){const e=[this].concat(Array.prototype.slice.call(arguments,1));return t.apply(t,e),this};Of.prototype.parse=function(t,e){if(typeof t!="string")throw new Error("Input data should be a String");const n=new this.core.State(t,this,e);return this.core.process(n),n.tokens};Of.prototype.render=function(t,e){return e=e||{},this.renderer.render(this.parse(t,e),this.options,e)};Of.prototype.parseInline=function(t,e){const n=new this.core.State(t,this,e);return n.inlineMode=!0,this.core.process(n),n.tokens};Of.prototype.renderInline=function(t,e){return e=e||{},this.renderer.render(this.parseInline(t,e),this.options,e)};function mIe(t,e,n){const{parseMetaString:r,trimEndingNewline:i=!0,defaultLanguage:s="text",fallbackLanguage:o}=n,a=e.getLoadedLanguages();t.options.highlight=(l,h="text",f)=>{h===""&&(h=s),o&&!a.includes(h)&&(h=o);const p=r?.(f,l,h)||{},g={...n,lang:h,meta:{...n.meta,...p,__raw:f}},b=[];return b.push({name:"@shikijs/markdown-it:block-class",code(x){x.properties.class=`language-${h}`}}),i&&l.endsWith(`
`)&&(l=l.slice(0,-1)),e.codeToHtml(l,{...g,transformers:[...b,...g.transformers||[]]})}}function gIe(t,e){return function(n){mIe(n,t,e)}}let _b=class extends Error{constructor(e){super(e),this.name="ShikiError"}},VN=class extends Error{constructor(e){super(e),this.name="ShikiError"}};function yIe(){return 2147483648}function vIe(){return typeof performance<"u"?performance.now():Date.now()}const bIe=(t,e)=>t+(e-t%e)%e;async function _Ie(t){let e,n;const r={};function i(b){n=b,r.HEAPU8=new Uint8Array(b),r.HEAPU32=new Uint32Array(b)}function s(b,x,k){r.HEAPU8.copyWithin(b,x,x+k)}function o(b){try{return e.grow(b-n.byteLength+65535>>>16),i(e.buffer),1}catch{}}function a(b){const x=r.HEAPU8.length;b=b>>>0;const k=yIe();if(b>k)return!1;for(let T=1;T<=4;T*=2){let I=x*(1+.2/T);I=Math.min(I,b+100663296);const M=Math.min(k,bIe(Math.max(b,I),65536));if(o(M))return!0}return!1}const l=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0;function h(b,x,k=1024){const T=x+k;let I=x;for(;b[I]&&!(I>=T);)++I;if(I-x>16&&b.buffer&&l)return l.decode(b.subarray(x,I));let M="";for(;x<I;){let B=b[x++];if(!(B&128)){M+=String.fromCharCode(B);continue}const j=b[x++]&63;if((B&224)===192){M+=String.fromCharCode((B&31)<<6|j);continue}const Q=b[x++]&63;if((B&240)===224?B=(B&15)<<12|j<<6|Q:B=(B&7)<<18|j<<12|Q<<6|b[x++]&63,B<65536)M+=String.fromCharCode(B);else{const Z=B-65536;M+=String.fromCharCode(55296|Z>>10,56320|Z&1023)}}return M}function f(b,x){return b?h(r.HEAPU8,b,x):""}const p={emscripten_get_now:vIe,emscripten_memcpy_big:s,emscripten_resize_heap:a,fd_write:()=>0};async function g(){const x=await t({env:p,wasi_snapshot_preview1:p});e=x.memory,i(e.buffer),Object.assign(r,x),r.UTF8ToString=f}return await g(),r}var xIe=Object.defineProperty,wIe=(t,e,n)=>e in t?xIe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,La=(t,e,n)=>(wIe(t,typeof e!="symbol"?e+"":e,n),n);let Ja=null;function OIe(t){throw new VN(t.UTF8ToString(t.getLastOnigError()))}class MD{constructor(e){La(this,"utf16Length"),La(this,"utf8Length"),La(this,"utf16Value"),La(this,"utf8Value"),La(this,"utf16OffsetToUtf8"),La(this,"utf8OffsetToUtf16");const n=e.length,r=MD._utf8ByteLength(e),i=r!==n,s=i?new Uint32Array(n+1):null;i&&(s[n]=r);const o=i?new Uint32Array(r+1):null;i&&(o[r]=n);const a=new Uint8Array(r);let l=0;for(let h=0;h<n;h++){const f=e.charCodeAt(h);let p=f,g=!1;if(f>=55296&&f<=56319&&h+1<n){const b=e.charCodeAt(h+1);b>=56320&&b<=57343&&(p=(f-55296<<10)+65536|b-56320,g=!0)}i&&(s[h]=l,g&&(s[h+1]=l),p<=127?o[l+0]=h:p<=2047?(o[l+0]=h,o[l+1]=h):p<=65535?(o[l+0]=h,o[l+1]=h,o[l+2]=h):(o[l+0]=h,o[l+1]=h,o[l+2]=h,o[l+3]=h)),p<=127?a[l++]=p:p<=2047?(a[l++]=192|(p&1984)>>>6,a[l++]=128|(p&63)>>>0):p<=65535?(a[l++]=224|(p&61440)>>>12,a[l++]=128|(p&4032)>>>6,a[l++]=128|(p&63)>>>0):(a[l++]=240|(p&1835008)>>>18,a[l++]=128|(p&258048)>>>12,a[l++]=128|(p&4032)>>>6,a[l++]=128|(p&63)>>>0),g&&h++}this.utf16Length=n,this.utf8Length=r,this.utf16Value=e,this.utf8Value=a,this.utf16OffsetToUtf8=s,this.utf8OffsetToUtf16=o}static _utf8ByteLength(e){let n=0;for(let r=0,i=e.length;r<i;r++){const s=e.charCodeAt(r);let o=s,a=!1;if(s>=55296&&s<=56319&&r+1<i){const l=e.charCodeAt(r+1);l>=56320&&l<=57343&&(o=(s-55296<<10)+65536|l-56320,a=!0)}o<=127?n+=1:o<=2047?n+=2:o<=65535?n+=3:n+=4,a&&r++}return n}createString(e){const n=e.omalloc(this.utf8Length);return e.HEAPU8.set(this.utf8Value,n),n}}const Op=class{constructor(t){if(La(this,"id",++Op.LAST_ID),La(this,"_onigBinding"),La(this,"content"),La(this,"utf16Length"),La(this,"utf8Length"),La(this,"utf16OffsetToUtf8"),La(this,"utf8OffsetToUtf16"),La(this,"ptr"),!Ja)throw new VN("Must invoke loadWasm first.");this._onigBinding=Ja,this.content=t;const e=new MD(t);this.utf16Length=e.utf16Length,this.utf8Length=e.utf8Length,this.utf16OffsetToUtf8=e.utf16OffsetToUtf8,this.utf8OffsetToUtf16=e.utf8OffsetToUtf16,this.utf8Length<1e4&&!Op._sharedPtrInUse?(Op._sharedPtr||(Op._sharedPtr=Ja.omalloc(1e4)),Op._sharedPtrInUse=!0,Ja.HEAPU8.set(e.utf8Value,Op._sharedPtr),this.ptr=Op._sharedPtr):this.ptr=e.createString(Ja)}convertUtf8OffsetToUtf16(t){return this.utf8OffsetToUtf16?t<0?0:t>this.utf8Length?this.utf16Length:this.utf8OffsetToUtf16[t]:t}convertUtf16OffsetToUtf8(t){return this.utf16OffsetToUtf8?t<0?0:t>this.utf16Length?this.utf8Length:this.utf16OffsetToUtf8[t]:t}dispose(){this.ptr===Op._sharedPtr?Op._sharedPtrInUse=!1:this._onigBinding.ofree(this.ptr)}};let XC=Op;La(XC,"LAST_ID",0);La(XC,"_sharedPtr",0);La(XC,"_sharedPtrInUse",!1);class SIe{constructor(e){if(La(this,"_onigBinding"),La(this,"_ptr"),!Ja)throw new VN("Must invoke loadWasm first.");const n=[],r=[];for(let a=0,l=e.length;a<l;a++){const h=new MD(e[a]);n[a]=h.createString(Ja),r[a]=h.utf8Length}const i=Ja.omalloc(4*e.length);Ja.HEAPU32.set(n,i/4);const s=Ja.omalloc(4*e.length);Ja.HEAPU32.set(r,s/4);const o=Ja.createOnigScanner(i,s,e.length);for(let a=0,l=e.length;a<l;a++)Ja.ofree(n[a]);Ja.ofree(s),Ja.ofree(i),o===0&&OIe(Ja),this._onigBinding=Ja,this._ptr=o}dispose(){this._onigBinding.freeOnigScanner(this._ptr)}findNextMatchSync(e,n,r){let i=0;if(typeof r=="number"&&(i=r),typeof e=="string"){e=new XC(e);const s=this._findNextMatchSync(e,n,!1,i);return e.dispose(),s}return this._findNextMatchSync(e,n,!1,i)}_findNextMatchSync(e,n,r,i){const s=this._onigBinding,o=s.findNextOnigScannerMatch(this._ptr,e.id,e.ptr,e.utf8Length,e.convertUtf16OffsetToUtf8(n),i);if(o===0)return null;const a=s.HEAPU32;let l=o/4;const h=a[l++],f=a[l++],p=[];for(let g=0;g<f;g++){const b=e.convertUtf8OffsetToUtf16(a[l++]),x=e.convertUtf8OffsetToUtf16(a[l++]);p[g]={start:b,end:x,length:x-b}}return{index:h,captureIndices:p}}}function kIe(t){return typeof t.instantiator=="function"}function CIe(t){return typeof t.default=="function"}function AIe(t){return typeof t.data<"u"}function EIe(t){return typeof Response<"u"&&t instanceof Response}function TIe(t){return typeof ArrayBuffer<"u"&&(t instanceof ArrayBuffer||ArrayBuffer.isView(t))||typeof Buffer<"u"&&Buffer.isBuffer?.(t)||typeof SharedArrayBuffer<"u"&&t instanceof SharedArrayBuffer||typeof Uint32Array<"u"&&t instanceof Uint32Array}let O4;function PIe(t){if(O4)return O4;async function e(){Ja=await _Ie(async n=>{let r=t;return r=await r,typeof r=="function"&&(r=await r(n)),typeof r=="function"&&(r=await r(n)),kIe(r)?r=await r.instantiator(n):CIe(r)?r=await r.default(n):(AIe(r)&&(r=r.data),EIe(r)?typeof WebAssembly.instantiateStreaming=="function"?r=await DIe(r)(n):r=await IIe(r)(n):TIe(r)?r=await vR(r)(n):r instanceof WebAssembly.Module?r=await vR(r)(n):"default"in r&&r.default instanceof WebAssembly.Module&&(r=await vR(r.default)(n))),"instance"in r&&(r=r.instance),"exports"in r&&(r=r.exports),r})}return O4=e(),O4}function vR(t){return e=>WebAssembly.instantiate(t,e)}function DIe(t){return e=>WebAssembly.instantiateStreaming(t,e)}function IIe(t){return async e=>{const n=await t.arrayBuffer();return WebAssembly.instantiate(n,e)}}let MIe;function RIe(){return MIe}async function FIe(t){return t&&await PIe(t),{createScanner(e){return new SIe(e.map(n=>typeof n=="string"?n:n.source))},createString(e){return new XC(e)}}}function LIe(t){return qN(t)}function qN(t){return Array.isArray(t)?$Ie(t):t instanceof RegExp?t:typeof t=="object"?BIe(t):t}function $Ie(t){let e=[];for(let n=0,r=t.length;n<r;n++)e[n]=qN(t[n]);return e}function BIe(t){let e={};for(let n in t)e[n]=qN(t[n]);return e}function Roe(t,...e){return e.forEach(n=>{for(let r in n)t[r]=n[r]}),t}function Foe(t){const e=~t.lastIndexOf("/")||~t.lastIndexOf("\\");return e===0?t:~e===t.length-1?Foe(t.substring(0,t.length-1)):t.substr(~e+1)}var bR=/\$(\d+)|\${(\d+):\/(downcase|upcase)}/g,S4=class{static hasCaptures(t){return t===null?!1:(bR.lastIndex=0,bR.test(t))}static replaceCaptures(t,e,n){return t.replace(bR,(r,i,s,o)=>{let a=n[parseInt(i||s,10)];if(a){let l=e.substring(a.start,a.end);for(;l[0]===".";)l=l.substring(1);switch(o){case"downcase":return l.toLowerCase();case"upcase":return l.toUpperCase();default:return l}}else return r})}};function Loe(t,e){return t<e?-1:t>e?1:0}function $oe(t,e){if(t===null&&e===null)return 0;if(!t)return-1;if(!e)return 1;let n=t.length,r=e.length;if(n===r){for(let i=0;i<n;i++){let s=Loe(t[i],e[i]);if(s!==0)return s}return 0}return n-r}function BZ(t){return!!(/^#[0-9a-f]{6}$/i.test(t)||/^#[0-9a-f]{8}$/i.test(t)||/^#[0-9a-f]{3}$/i.test(t)||/^#[0-9a-f]{4}$/i.test(t))}function Boe(t){return t.replace(/[\-\\\{\}\*\+\?\|\^\$\.\,\[\]\(\)\#\s]/g,"\\$&")}var Noe=class{constructor(t){this.fn=t}cache=new Map;get(t){if(this.cache.has(t))return this.cache.get(t);const e=this.fn(t);return this.cache.set(t,e),e}},B6=class{constructor(t,e,n){this._colorMap=t,this._defaults=e,this._root=n}static createFromRawTheme(t,e){return this.createFromParsedTheme(QIe(t),e)}static createFromParsedTheme(t,e){return UIe(t,e)}_cachedMatchRoot=new Noe(t=>this._root.match(t));getColorMap(){return this._colorMap.getColorMap()}getDefaults(){return this._defaults}match(t){if(t===null)return this._defaults;const e=t.scopeName,r=this._cachedMatchRoot.get(e).find(i=>NIe(t.parent,i.parentScopes));return r?new zoe(r.fontStyle,r.foreground,r.background):null}},_R=class F5{constructor(e,n){this.parent=e,this.scopeName=n}static push(e,n){for(const r of n)e=new F5(e,r);return e}static from(...e){let n=null;for(let r=0;r<e.length;r++)n=new F5(n,e[r]);return n}push(e){return new F5(this,e)}getSegments(){let e=this;const n=[];for(;e;)n.push(e.scopeName),e=e.parent;return n.reverse(),n}toString(){return this.getSegments().join(" ")}extends(e){return this===e?!0:this.parent===null?!1:this.parent.extends(e)}getExtensionIfDefined(e){const n=[];let r=this;for(;r&&r!==e;)n.push(r.scopeName),r=r.parent;return r===e?n.reverse():void 0}};function NIe(t,e){if(e.length===0)return!0;for(let n=0;n<e.length;n++){let r=e[n],i=!1;if(r===">"){if(n===e.length-1)return!1;r=e[++n],i=!0}for(;t&&!zIe(t.scopeName,r);){if(i)return!1;t=t.parent}if(!t)return!1;t=t.parent}return!0}function zIe(t,e){return e===t||t.startsWith(e)&&t[e.length]==="."}var zoe=class{constructor(t,e,n){this.fontStyle=t,this.foregroundId=e,this.backgroundId=n}};function QIe(t){if(!t)return[];if(!t.settings||!Array.isArray(t.settings))return[];let e=t.settings,n=[],r=0;for(let i=0,s=e.length;i<s;i++){let o=e[i];if(!o.settings)continue;let a;if(typeof o.scope=="string"){let p=o.scope;p=p.replace(/^[,]+/,""),p=p.replace(/[,]+$/,""),a=p.split(",")}else Array.isArray(o.scope)?a=o.scope:a=[""];let l=-1;if(typeof o.settings.fontStyle=="string"){l=0;let p=o.settings.fontStyle.split(" ");for(let g=0,b=p.length;g<b;g++)switch(p[g]){case"italic":l=l|1;break;case"bold":l=l|2;break;case"underline":l=l|4;break;case"strikethrough":l=l|8;break}}let h=null;typeof o.settings.foreground=="string"&&BZ(o.settings.foreground)&&(h=o.settings.foreground);let f=null;typeof o.settings.background=="string"&&BZ(o.settings.background)&&(f=o.settings.background);for(let p=0,g=a.length;p<g;p++){let x=a[p].trim().split(" "),k=x[x.length-1],T=null;x.length>1&&(T=x.slice(0,x.length-1),T.reverse()),n[r++]=new jIe(k,T,i,l,h,f)}}return n}var jIe=class{constructor(t,e,n,r,i,s){this.scope=t,this.parentScopes=e,this.index=n,this.fontStyle=r,this.foreground=i,this.background=s}},Qg=(t=>(t[t.NotSet=-1]="NotSet",t[t.None=0]="None",t[t.Italic=1]="Italic",t[t.Bold=2]="Bold",t[t.Underline=4]="Underline",t[t.Strikethrough=8]="Strikethrough",t))(Qg||{});function UIe(t,e){t.sort((l,h)=>{let f=Loe(l.scope,h.scope);return f!==0||(f=$oe(l.parentScopes,h.parentScopes),f!==0)?f:l.index-h.index});let n=0,r="#000000",i="#ffffff";for(;t.length>=1&&t[0].scope==="";){let l=t.shift();l.fontStyle!==-1&&(n=l.fontStyle),l.foreground!==null&&(r=l.foreground),l.background!==null&&(i=l.background)}let s=new VIe(e),o=new zoe(n,s.getId(r),s.getId(i)),a=new ZIe(new T9(0,null,-1,0,0),[]);for(let l=0,h=t.length;l<h;l++){let f=t[l];a.insert(0,f.scope,f.parentScopes,f.fontStyle,s.getId(f.foreground),s.getId(f.background))}return new B6(s,o,a)}var VIe=class{_isFrozen;_lastColorId;_id2color;_color2id;constructor(t){if(this._lastColorId=0,this._id2color=[],this._color2id=Object.create(null),Array.isArray(t)){this._isFrozen=!0;for(let e=0,n=t.length;e<n;e++)this._color2id[t[e]]=e,this._id2color[e]=t[e]}else this._isFrozen=!1}getId(t){if(t===null)return 0;t=t.toUpperCase();let e=this._color2id[t];if(e)return e;if(this._isFrozen)throw new Error(`Missing color in color map - ${t}`);return e=++this._lastColorId,this._color2id[t]=e,this._id2color[e]=t,e}getColorMap(){return this._id2color.slice(0)}},qIe=Object.freeze([]),T9=class Qoe{scopeDepth;parentScopes;fontStyle;foreground;background;constructor(e,n,r,i,s){this.scopeDepth=e,this.parentScopes=n||qIe,this.fontStyle=r,this.foreground=i,this.background=s}clone(){return new Qoe(this.scopeDepth,this.parentScopes,this.fontStyle,this.foreground,this.background)}static cloneArr(e){let n=[];for(let r=0,i=e.length;r<i;r++)n[r]=e[r].clone();return n}acceptOverwrite(e,n,r,i){this.scopeDepth>e?console.log("how did this happen?"):this.scopeDepth=e,n!==-1&&(this.fontStyle=n),r!==0&&(this.foreground=r),i!==0&&(this.background=i)}},ZIe=class P9{constructor(e,n=[],r={}){this._mainRule=e,this._children=r,this._rulesWithParentScopes=n}_rulesWithParentScopes;static _cmpBySpecificity(e,n){if(e.scopeDepth!==n.scopeDepth)return n.scopeDepth-e.scopeDepth;let r=0,i=0;for(;e.parentScopes[r]===">"&&r++,n.parentScopes[i]===">"&&i++,!(r>=e.parentScopes.length||i>=n.parentScopes.length);){const s=n.parentScopes[i].length-e.parentScopes[r].length;if(s!==0)return s;r++,i++}return n.parentScopes.length-e.parentScopes.length}match(e){if(e!==""){let r=e.indexOf("."),i,s;if(r===-1?(i=e,s=""):(i=e.substring(0,r),s=e.substring(r+1)),this._children.hasOwnProperty(i))return this._children[i].match(s)}const n=this._rulesWithParentScopes.concat(this._mainRule);return n.sort(P9._cmpBySpecificity),n}insert(e,n,r,i,s,o){if(n===""){this._doInsertHere(e,r,i,s,o);return}let a=n.indexOf("."),l,h;a===-1?(l=n,h=""):(l=n.substring(0,a),h=n.substring(a+1));let f;this._children.hasOwnProperty(l)?f=this._children[l]:(f=new P9(this._mainRule.clone(),T9.cloneArr(this._rulesWithParentScopes)),this._children[l]=f),f.insert(e+1,h,r,i,s,o)}_doInsertHere(e,n,r,i,s){if(n===null){this._mainRule.acceptOverwrite(e,r,i,s);return}for(let o=0,a=this._rulesWithParentScopes.length;o<a;o++){let l=this._rulesWithParentScopes[o];if($oe(l.parentScopes,n)===0){l.acceptOverwrite(e,r,i,s);return}}r===-1&&(r=this._mainRule.fontStyle),i===0&&(i=this._mainRule.foreground),s===0&&(s=this._mainRule.background),this._rulesWithParentScopes.push(new T9(e,n,r,i,s))}},b2=class Gh{static toBinaryStr(e){return e.toString(2).padStart(32,"0")}static print(e){const n=Gh.getLanguageId(e),r=Gh.getTokenType(e),i=Gh.getFontStyle(e),s=Gh.getForeground(e),o=Gh.getBackground(e);console.log({languageId:n,tokenType:r,fontStyle:i,foreground:s,background:o})}static getLanguageId(e){return(e&255)>>>0}static getTokenType(e){return(e&768)>>>8}static containsBalancedBrackets(e){return(e&1024)!==0}static getFontStyle(e){return(e&30720)>>>11}static getForeground(e){return(e&16744448)>>>15}static getBackground(e){return(e&4278190080)>>>24}static set(e,n,r,i,s,o,a){let l=Gh.getLanguageId(e),h=Gh.getTokenType(e),f=Gh.containsBalancedBrackets(e)?1:0,p=Gh.getFontStyle(e),g=Gh.getForeground(e),b=Gh.getBackground(e);return n!==0&&(l=n),r!==8&&(h=r),i!==null&&(f=i?1:0),s!==-1&&(p=s),o!==0&&(g=o),a!==0&&(b=a),(l<<0|h<<8|f<<10|p<<11|g<<15|b<<24)>>>0}};function N6(t,e){const n=[],r=XIe(t);let i=r.next();for(;i!==null;){let l=0;if(i.length===2&&i.charAt(1)===":"){switch(i.charAt(0)){case"R":l=1;break;case"L":l=-1;break;default:console.log(`Unknown priority ${i} in scope selector`)}i=r.next()}let h=o();if(n.push({matcher:h,priority:l}),i!==",")break;i=r.next()}return n;function s(){if(i==="-"){i=r.next();const l=s();return h=>!!l&&!l(h)}if(i==="("){i=r.next();const l=a();return i===")"&&(i=r.next()),l}if(NZ(i)){const l=[];do l.push(i),i=r.next();while(NZ(i));return h=>e(l,h)}return null}function o(){const l=[];let h=s();for(;h;)l.push(h),h=s();return f=>l.every(p=>p(f))}function a(){const l=[];let h=o();for(;h&&(l.push(h),i==="|"||i===",");){do i=r.next();while(i==="|"||i===",");h=o()}return f=>l.some(p=>p(f))}}function NZ(t){return!!t&&!!t.match(/[\w\.:]+/)}function XIe(t){let e=/([LR]:|[\w\.:][\w\.:\-]*|[\,\|\-\(\)])/g,n=e.exec(t);return{next:()=>{if(!n)return null;const r=n[0];return n=e.exec(t),r}}}function joe(t){typeof t.dispose=="function"&&t.dispose()}var Gk=class{constructor(t){this.scopeName=t}toKey(){return this.scopeName}},WIe=class{constructor(t,e){this.scopeName=t,this.ruleName=e}toKey(){return`${this.scopeName}#${this.ruleName}`}},GIe=class{_references=[];_seenReferenceKeys=new Set;get references(){return this._references}visitedRule=new Set;add(t){const e=t.toKey();this._seenReferenceKeys.has(e)||(this._seenReferenceKeys.add(e),this._references.push(t))}},YIe=class{constructor(t,e){this.repo=t,this.initialScopeName=e,this.seenFullScopeRequests.add(this.initialScopeName),this.Q=[new Gk(this.initialScopeName)]}seenFullScopeRequests=new Set;seenPartialScopeRequests=new Set;Q;processQueue(){const t=this.Q;this.Q=[];const e=new GIe;for(const n of t)HIe(n,this.initialScopeName,this.repo,e);for(const n of e.references)if(n instanceof Gk){if(this.seenFullScopeRequests.has(n.scopeName))continue;this.seenFullScopeRequests.add(n.scopeName),this.Q.push(n)}else{if(this.seenFullScopeRequests.has(n.scopeName)||this.seenPartialScopeRequests.has(n.toKey()))continue;this.seenPartialScopeRequests.add(n.toKey()),this.Q.push(n)}}};function HIe(t,e,n,r){const i=n.lookup(t.scopeName);if(!i){if(t.scopeName===e)throw new Error(`No grammar provided for <${e}>`);return}const s=n.lookup(e);t instanceof Gk?L5({baseGrammar:s,selfGrammar:i},r):D9(t.ruleName,{baseGrammar:s,selfGrammar:i,repository:i.repository},r);const o=n.injections(t.scopeName);if(o)for(const a of o)r.add(new Gk(a))}function D9(t,e,n){if(e.repository&&e.repository[t]){const r=e.repository[t];z6([r],e,n)}}function L5(t,e){t.selfGrammar.patterns&&Array.isArray(t.selfGrammar.patterns)&&z6(t.selfGrammar.patterns,{...t,repository:t.selfGrammar.repository},e),t.selfGrammar.injections&&z6(Object.values(t.selfGrammar.injections),{...t,repository:t.selfGrammar.repository},e)}function z6(t,e,n){for(const r of t){if(n.visitedRule.has(r))continue;n.visitedRule.add(r);const i=r.repository?Roe({},e.repository,r.repository):e.repository;Array.isArray(r.patterns)&&z6(r.patterns,{...e,repository:i},n);const s=r.include;if(!s)continue;const o=Uoe(s);switch(o.kind){case 0:L5({...e,selfGrammar:e.baseGrammar},n);break;case 1:L5(e,n);break;case 2:D9(o.ruleName,{...e,repository:i},n);break;case 3:case 4:const a=o.scopeName===e.selfGrammar.scopeName?e.selfGrammar:o.scopeName===e.baseGrammar.scopeName?e.baseGrammar:void 0;if(a){const l={baseGrammar:e.baseGrammar,selfGrammar:a,repository:i};o.kind===4?D9(o.ruleName,l,n):L5(l,n)}else o.kind===4?n.add(new WIe(o.scopeName,o.ruleName)):n.add(new Gk(o.scopeName));break}}}var KIe=class{kind=0},JIe=class{kind=1},e8e=class{constructor(t){this.ruleName=t}kind=2},t8e=class{constructor(t){this.scopeName=t}kind=3},n8e=class{constructor(t,e){this.scopeName=t,this.ruleName=e}kind=4};function Uoe(t){if(t==="$base")return new KIe;if(t==="$self")return new JIe;const e=t.indexOf("#");if(e===-1)return new t8e(t);if(e===0)return new e8e(t.substring(1));{const n=t.substring(0,e),r=t.substring(e+1);return new n8e(n,r)}}var r8e=/\\(\d+)/,zZ=/\\(\d+)/g,i8e=-1,Voe=-2;var WC=class{$location;id;_nameIsCapturing;_name;_contentNameIsCapturing;_contentName;constructor(t,e,n,r){this.$location=t,this.id=e,this._name=n||null,this._nameIsCapturing=S4.hasCaptures(this._name),this._contentName=r||null,this._contentNameIsCapturing=S4.hasCaptures(this._contentName)}get debugName(){const t=this.$location?`${Foe(this.$location.filename)}:${this.$location.line}`:"unknown";return`${this.constructor.name}#${this.id} @ ${t}`}getName(t,e){return!this._nameIsCapturing||this._name===null||t===null||e===null?this._name:S4.replaceCaptures(this._name,t,e)}getContentName(t,e){return!this._contentNameIsCapturing||this._contentName===null?this._contentName:S4.replaceCaptures(this._contentName,t,e)}},s8e=class extends WC{retokenizeCapturedWithRuleId;constructor(t,e,n,r,i){super(t,e,n,r),this.retokenizeCapturedWithRuleId=i}dispose(){}collectPatterns(t,e){throw new Error("Not supported!")}compile(t,e){throw new Error("Not supported!")}compileAG(t,e,n,r){throw new Error("Not supported!")}},o8e=class extends WC{_match;captures;_cachedCompiledPatterns;constructor(t,e,n,r,i){super(t,e,n,null),this._match=new Yk(r,this.id),this.captures=i,this._cachedCompiledPatterns=null}dispose(){this._cachedCompiledPatterns&&(this._cachedCompiledPatterns.dispose(),this._cachedCompiledPatterns=null)}get debugMatchRegExp(){return`${this._match.source}`}collectPatterns(t,e){e.push(this._match)}compile(t,e){return this._getCachedCompiledPatterns(t).compile(t)}compileAG(t,e,n,r){return this._getCachedCompiledPatterns(t).compileAG(t,n,r)}_getCachedCompiledPatterns(t){return this._cachedCompiledPatterns||(this._cachedCompiledPatterns=new Hk,this.collectPatterns(t,this._cachedCompiledPatterns)),this._cachedCompiledPatterns}},QZ=class extends WC{hasMissingPatterns;patterns;_cachedCompiledPatterns;constructor(t,e,n,r,i){super(t,e,n,r),this.patterns=i.patterns,this.hasMissingPatterns=i.hasMissingPatterns,this._cachedCompiledPatterns=null}dispose(){this._cachedCompiledPatterns&&(this._cachedCompiledPatterns.dispose(),this._cachedCompiledPatterns=null)}collectPatterns(t,e){for(const n of this.patterns)t.getRule(n).collectPatterns(t,e)}compile(t,e){return this._getCachedCompiledPatterns(t).compile(t)}compileAG(t,e,n,r){return this._getCachedCompiledPatterns(t).compileAG(t,n,r)}_getCachedCompiledPatterns(t){return this._cachedCompiledPatterns||(this._cachedCompiledPatterns=new Hk,this.collectPatterns(t,this._cachedCompiledPatterns)),this._cachedCompiledPatterns}},I9=class extends WC{_begin;beginCaptures;_end;endHasBackReferences;endCaptures;applyEndPatternLast;hasMissingPatterns;patterns;_cachedCompiledPatterns;constructor(t,e,n,r,i,s,o,a,l,h){super(t,e,n,r),this._begin=new Yk(i,this.id),this.beginCaptures=s,this._end=new Yk(o||"ï¿¿",-1),this.endHasBackReferences=this._end.hasBackReferences,this.endCaptures=a,this.applyEndPatternLast=l||!1,this.patterns=h.patterns,this.hasMissingPatterns=h.hasMissingPatterns,this._cachedCompiledPatterns=null}dispose(){this._cachedCompiledPatterns&&(this._cachedCompiledPatterns.dispose(),this._cachedCompiledPatterns=null)}get debugBeginRegExp(){return`${this._begin.source}`}get debugEndRegExp(){return`${this._end.source}`}getEndWithResolvedBackReferences(t,e){return this._end.resolveBackReferences(t,e)}collectPatterns(t,e){e.push(this._begin)}compile(t,e){return this._getCachedCompiledPatterns(t,e).compile(t)}compileAG(t,e,n,r){return this._getCachedCompiledPatterns(t,e).compileAG(t,n,r)}_getCachedCompiledPatterns(t,e){if(!this._cachedCompiledPatterns){this._cachedCompiledPatterns=new Hk;for(const n of this.patterns)t.getRule(n).collectPatterns(t,this._cachedCompiledPatterns);this.applyEndPatternLast?this._cachedCompiledPatterns.push(this._end.hasBackReferences?this._end.clone():this._end):this._cachedCompiledPatterns.unshift(this._end.hasBackReferences?this._end.clone():this._end)}return this._end.hasBackReferences&&(this.applyEndPatternLast?this._cachedCompiledPatterns.setSource(this._cachedCompiledPatterns.length()-1,e):this._cachedCompiledPatterns.setSource(0,e)),this._cachedCompiledPatterns}},Q6=class extends WC{_begin;beginCaptures;whileCaptures;_while;whileHasBackReferences;hasMissingPatterns;patterns;_cachedCompiledPatterns;_cachedCompiledWhilePatterns;constructor(t,e,n,r,i,s,o,a,l){super(t,e,n,r),this._begin=new Yk(i,this.id),this.beginCaptures=s,this.whileCaptures=a,this._while=new Yk(o,Voe),this.whileHasBackReferences=this._while.hasBackReferences,this.patterns=l.patterns,this.hasMissingPatterns=l.hasMissingPatterns,this._cachedCompiledPatterns=null,this._cachedCompiledWhilePatterns=null}dispose(){this._cachedCompiledPatterns&&(this._cachedCompiledPatterns.dispose(),this._cachedCompiledPatterns=null),this._cachedCompiledWhilePatterns&&(this._cachedCompiledWhilePatterns.dispose(),this._cachedCompiledWhilePatterns=null)}get debugBeginRegExp(){return`${this._begin.source}`}get debugWhileRegExp(){return`${this._while.source}`}getWhileWithResolvedBackReferences(t,e){return this._while.resolveBackReferences(t,e)}collectPatterns(t,e){e.push(this._begin)}compile(t,e){return this._getCachedCompiledPatterns(t).compile(t)}compileAG(t,e,n,r){return this._getCachedCompiledPatterns(t).compileAG(t,n,r)}_getCachedCompiledPatterns(t){if(!this._cachedCompiledPatterns){this._cachedCompiledPatterns=new Hk;for(const e of this.patterns)t.getRule(e).collectPatterns(t,this._cachedCompiledPatterns)}return this._cachedCompiledPatterns}compileWhile(t,e){return this._getCachedCompiledWhilePatterns(t,e).compile(t)}compileWhileAG(t,e,n,r){return this._getCachedCompiledWhilePatterns(t,e).compileAG(t,n,r)}_getCachedCompiledWhilePatterns(t,e){return this._cachedCompiledWhilePatterns||(this._cachedCompiledWhilePatterns=new Hk,this._cachedCompiledWhilePatterns.push(this._while.hasBackReferences?this._while.clone():this._while)),this._while.hasBackReferences&&this._cachedCompiledWhilePatterns.setSource(0,e||"ï¿¿"),this._cachedCompiledWhilePatterns}},qoe=class Ul{static createCaptureRule(e,n,r,i,s){return e.registerRule(o=>new s8e(n,o,r,i,s))}static getCompiledRuleId(e,n,r){return e.id||n.registerRule(i=>{if(e.id=i,e.match)return new o8e(e.$vscodeTextmateLocation,e.id,e.name,e.match,Ul._compileCaptures(e.captures,n,r));if(typeof e.begin>"u"){e.repository&&(r=Roe({},r,e.repository));let s=e.patterns;return typeof s>"u"&&e.include&&(s=[{include:e.include}]),new QZ(e.$vscodeTextmateLocation,e.id,e.name,e.contentName,Ul._compilePatterns(s,n,r))}return e.while?new Q6(e.$vscodeTextmateLocation,e.id,e.name,e.contentName,e.begin,Ul._compileCaptures(e.beginCaptures||e.captures,n,r),e.while,Ul._compileCaptures(e.whileCaptures||e.captures,n,r),Ul._compilePatterns(e.patterns,n,r)):new I9(e.$vscodeTextmateLocation,e.id,e.name,e.contentName,e.begin,Ul._compileCaptures(e.beginCaptures||e.captures,n,r),e.end,Ul._compileCaptures(e.endCaptures||e.captures,n,r),e.applyEndPatternLast,Ul._compilePatterns(e.patterns,n,r))}),e.id}static _compileCaptures(e,n,r){let i=[];if(e){let s=0;for(const o in e){if(o==="$vscodeTextmateLocation")continue;const a=parseInt(o,10);a>s&&(s=a)}for(let o=0;o<=s;o++)i[o]=null;for(const o in e){if(o==="$vscodeTextmateLocation")continue;const a=parseInt(o,10);let l=0;e[o].patterns&&(l=Ul.getCompiledRuleId(e[o],n,r)),i[a]=Ul.createCaptureRule(n,e[o].$vscodeTextmateLocation,e[o].name,e[o].contentName,l)}}return i}static _compilePatterns(e,n,r){let i=[];if(e)for(let s=0,o=e.length;s<o;s++){const a=e[s];let l=-1;if(a.include){const h=Uoe(a.include);switch(h.kind){case 0:case 1:l=Ul.getCompiledRuleId(r[a.include],n,r);break;case 2:let f=r[h.ruleName];f&&(l=Ul.getCompiledRuleId(f,n,r));break;case 3:case 4:const p=h.scopeName,g=h.kind===4?h.ruleName:null,b=n.getExternalGrammar(p,r);if(b)if(g){let x=b.repository[g];x&&(l=Ul.getCompiledRuleId(x,n,b.repository))}else l=Ul.getCompiledRuleId(b.repository.$self,n,b.repository);break}}else l=Ul.getCompiledRuleId(a,n,r);if(l!==-1){const h=n.getRule(l);let f=!1;if((h instanceof QZ||h instanceof I9||h instanceof Q6)&&h.hasMissingPatterns&&h.patterns.length===0&&(f=!0),f)continue;i.push(l)}}return{patterns:i,hasMissingPatterns:(e?e.length:0)!==i.length}}},Yk=class Zoe{source;ruleId;hasAnchor;hasBackReferences;_anchorCache;constructor(e,n){if(e&&typeof e=="string"){const r=e.length;let i=0,s=[],o=!1;for(let a=0;a<r;a++)if(e.charAt(a)==="\\"&&a+1<r){const h=e.charAt(a+1);h==="z"?(s.push(e.substring(i,a)),s.push("$(?!\\n)(?<!\\n)"),i=a+2):(h==="A"||h==="G")&&(o=!0),a++}this.hasAnchor=o,i===0?this.source=e:(s.push(e.substring(i,r)),this.source=s.join(""))}else this.hasAnchor=!1,this.source=e;this.hasAnchor?this._anchorCache=this._buildAnchorCache():this._anchorCache=null,this.ruleId=n,typeof this.source=="string"?this.hasBackReferences=r8e.test(this.source):this.hasBackReferences=!1}clone(){return new Zoe(this.source,this.ruleId)}setSource(e){this.source!==e&&(this.source=e,this.hasAnchor&&(this._anchorCache=this._buildAnchorCache()))}resolveBackReferences(e,n){if(typeof this.source!="string")throw new Error("This method should only be called if the source is a string");let r=n.map(i=>e.substring(i.start,i.end));return zZ.lastIndex=0,this.source.replace(zZ,(i,s)=>Boe(r[parseInt(s,10)]||""))}_buildAnchorCache(){if(typeof this.source!="string")throw new Error("This method should only be called if the source is a string");let e=[],n=[],r=[],i=[],s,o,a,l;for(s=0,o=this.source.length;s<o;s++)a=this.source.charAt(s),e[s]=a,n[s]=a,r[s]=a,i[s]=a,a==="\\"&&s+1<o&&(l=this.source.charAt(s+1),l==="A"?(e[s+1]="ï¿¿",n[s+1]="ï¿¿",r[s+1]="A",i[s+1]="A"):l==="G"?(e[s+1]="ï¿¿",n[s+1]="G",r[s+1]="ï¿¿",i[s+1]="G"):(e[s+1]=l,n[s+1]=l,r[s+1]=l,i[s+1]=l),s++);return{A0_G0:e.join(""),A0_G1:n.join(""),A1_G0:r.join(""),A1_G1:i.join("")}}resolveAnchors(e,n){return!this.hasAnchor||!this._anchorCache||typeof this.source!="string"?this.source:e?n?this._anchorCache.A1_G1:this._anchorCache.A1_G0:n?this._anchorCache.A0_G1:this._anchorCache.A0_G0}},Hk=class{_items;_hasAnchors;_cached;_anchorCache;constructor(){this._items=[],this._hasAnchors=!1,this._cached=null,this._anchorCache={A0_G0:null,A0_G1:null,A1_G0:null,A1_G1:null}}dispose(){this._disposeCaches()}_disposeCaches(){this._cached&&(this._cached.dispose(),this._cached=null),this._anchorCache.A0_G0&&(this._anchorCache.A0_G0.dispose(),this._anchorCache.A0_G0=null),this._anchorCache.A0_G1&&(this._anchorCache.A0_G1.dispose(),this._anchorCache.A0_G1=null),this._anchorCache.A1_G0&&(this._anchorCache.A1_G0.dispose(),this._anchorCache.A1_G0=null),this._anchorCache.A1_G1&&(this._anchorCache.A1_G1.dispose(),this._anchorCache.A1_G1=null)}push(t){this._items.push(t),this._hasAnchors=this._hasAnchors||t.hasAnchor}unshift(t){this._items.unshift(t),this._hasAnchors=this._hasAnchors||t.hasAnchor}length(){return this._items.length}setSource(t,e){this._items[t].source!==e&&(this._disposeCaches(),this._items[t].setSource(e))}compile(t){if(!this._cached){let e=this._items.map(n=>n.source);this._cached=new jZ(t,e,this._items.map(n=>n.ruleId))}return this._cached}compileAG(t,e,n){return this._hasAnchors?e?n?(this._anchorCache.A1_G1||(this._anchorCache.A1_G1=this._resolveAnchors(t,e,n)),this._anchorCache.A1_G1):(this._anchorCache.A1_G0||(this._anchorCache.A1_G0=this._resolveAnchors(t,e,n)),this._anchorCache.A1_G0):n?(this._anchorCache.A0_G1||(this._anchorCache.A0_G1=this._resolveAnchors(t,e,n)),this._anchorCache.A0_G1):(this._anchorCache.A0_G0||(this._anchorCache.A0_G0=this._resolveAnchors(t,e,n)),this._anchorCache.A0_G0):this.compile(t)}_resolveAnchors(t,e,n){let r=this._items.map(i=>i.resolveAnchors(e,n));return new jZ(t,r,this._items.map(i=>i.ruleId))}},jZ=class{constructor(t,e,n){this.regExps=e,this.rules=n,this.scanner=t.createOnigScanner(e)}scanner;dispose(){typeof this.scanner.dispose=="function"&&this.scanner.dispose()}toString(){const t=[];for(let e=0,n=this.rules.length;e<n;e++)t.push("   - "+this.rules[e]+": "+this.regExps[e]);return t.join(`
`)}findNextMatchSync(t,e,n){const r=this.scanner.findNextMatchSync(t,e,n);return r?{ruleId:this.rules[r.index],captureIndices:r.captureIndices}:null}},xR=class{constructor(t,e){this.languageId=t,this.tokenType=e}},a8e=class M9{_defaultAttributes;_embeddedLanguagesMatcher;constructor(e,n){this._defaultAttributes=new xR(e,8),this._embeddedLanguagesMatcher=new l8e(Object.entries(n||{}))}getDefaultAttributes(){return this._defaultAttributes}getBasicScopeAttributes(e){return e===null?M9._NULL_SCOPE_METADATA:this._getBasicScopeAttributes.get(e)}static _NULL_SCOPE_METADATA=new xR(0,0);_getBasicScopeAttributes=new Noe(e=>{const n=this._scopeToLanguage(e),r=this._toStandardTokenType(e);return new xR(n,r)});_scopeToLanguage(e){return this._embeddedLanguagesMatcher.match(e)||0}_toStandardTokenType(e){const n=e.match(M9.STANDARD_TOKEN_TYPE_REGEXP);if(!n)return 8;switch(n[1]){case"comment":return 1;case"string":return 2;case"regex":return 3;case"meta.embedded":return 0}throw new Error("Unexpected match for standard token type!")}static STANDARD_TOKEN_TYPE_REGEXP=/\b(comment|string|regex|meta\.embedded)\b/},l8e=class{values;scopesRegExp;constructor(t){if(t.length===0)this.values=null,this.scopesRegExp=null;else{this.values=new Map(t);const e=t.map(([n,r])=>Boe(n));e.sort(),e.reverse(),this.scopesRegExp=new RegExp(`^((${e.join(")|(")}))($|\\.)`,"")}}match(t){if(!this.scopesRegExp)return;const e=t.match(this.scopesRegExp);if(e)return this.values.get(e[1])}},UZ=class{constructor(t,e){this.stack=t,this.stoppedEarly=e}};function Xoe(t,e,n,r,i,s,o,a){const l=e.content.length;let h=!1,f=-1;if(o){const b=u8e(t,e,n,r,i,s);i=b.stack,r=b.linePos,n=b.isFirstLine,f=b.anchorPosition}const p=Date.now();for(;!h;){if(a!==0&&Date.now()-p>a)return new UZ(i,!0);g()}return new UZ(i,!1);function g(){const b=c8e(t,e,n,r,i,f);if(!b){s.produce(i,l),h=!0;return}const x=b.captureIndices,k=b.matchedRuleId,T=x&&x.length>0?x[0].end>r:!1;if(k===i8e){const I=i.getRule(t);s.produce(i,x[0].start),i=i.withContentNameScopesList(i.nameScopesList),x3(t,e,n,i,s,I.endCaptures,x),s.produce(i,x[0].end);const M=i;if(i=i.parent,f=M.getAnchorPos(),!T&&M.getEnterPos()===r){i=M,s.produce(i,l),h=!0;return}}else{const I=t.getRule(k);s.produce(i,x[0].start);const M=i,B=I.getName(e.content,x),j=i.contentNameScopesList.pushAttributed(B,t);if(i=i.push(k,r,f,x[0].end===l,null,j,j),I instanceof I9){const Q=I;x3(t,e,n,i,s,Q.beginCaptures,x),s.produce(i,x[0].end),f=x[0].end;const Z=Q.getContentName(e.content,x),q=j.pushAttributed(Z,t);if(i=i.withContentNameScopesList(q),Q.endHasBackReferences&&(i=i.withEndRule(Q.getEndWithResolvedBackReferences(e.content,x))),!T&&M.hasSameRuleAs(i)){i=i.pop(),s.produce(i,l),h=!0;return}}else if(I instanceof Q6){const Q=I;x3(t,e,n,i,s,Q.beginCaptures,x),s.produce(i,x[0].end),f=x[0].end;const Z=Q.getContentName(e.content,x),q=j.pushAttributed(Z,t);if(i=i.withContentNameScopesList(q),Q.whileHasBackReferences&&(i=i.withEndRule(Q.getWhileWithResolvedBackReferences(e.content,x))),!T&&M.hasSameRuleAs(i)){i=i.pop(),s.produce(i,l),h=!0;return}}else if(x3(t,e,n,i,s,I.captures,x),s.produce(i,x[0].end),i=i.pop(),!T){i=i.safePop(),s.produce(i,l),h=!0;return}}x[0].end>r&&(r=x[0].end,n=!1)}}function u8e(t,e,n,r,i,s){let o=i.beginRuleCapturedEOL?0:-1;const a=[];for(let l=i;l;l=l.pop()){const h=l.getRule(t);h instanceof Q6&&a.push({rule:h,stack:l})}for(let l=a.pop();l;l=a.pop()){const{ruleScanner:h,findOptions:f}=d8e(l.rule,t,l.stack.endRule,n,r===o),p=h.findNextMatchSync(e,r,f);if(p){if(p.ruleId!==Voe){i=l.stack.pop();break}p.captureIndices&&p.captureIndices.length&&(s.produce(l.stack,p.captureIndices[0].start),x3(t,e,n,l.stack,s,l.rule.whileCaptures,p.captureIndices),s.produce(l.stack,p.captureIndices[0].end),o=p.captureIndices[0].end,p.captureIndices[0].end>r&&(r=p.captureIndices[0].end,n=!1))}else{i=l.stack.pop();break}}return{stack:i,linePos:r,anchorPosition:o,isFirstLine:n}}function c8e(t,e,n,r,i,s){const o=h8e(t,e,n,r,i,s),a=t.getInjections();if(a.length===0)return o;const l=f8e(a,t,e,n,r,i,s);if(!l)return o;if(!o)return l;const h=o.captureIndices[0].start,f=l.captureIndices[0].start;return f<h||l.priorityMatch&&f===h?l:o}function h8e(t,e,n,r,i,s){const o=i.getRule(t),{ruleScanner:a,findOptions:l}=Woe(o,t,i.endRule,n,r===s),h=a.findNextMatchSync(e,r,l);return h?{captureIndices:h.captureIndices,matchedRuleId:h.ruleId}:null}function f8e(t,e,n,r,i,s,o){let a=Number.MAX_VALUE,l=null,h,f=0;const p=s.contentNameScopesList.getScopeNames();for(let g=0,b=t.length;g<b;g++){const x=t[g];if(!x.matcher(p))continue;const k=e.getRule(x.ruleId),{ruleScanner:T,findOptions:I}=Woe(k,e,null,r,i===o),M=T.findNextMatchSync(n,i,I);if(!M)continue;const B=M.captureIndices[0].start;if(!(B>=a)&&(a=B,l=M.captureIndices,h=M.ruleId,f=x.priority,a===i))break}return l?{priorityMatch:f===-1,captureIndices:l,matchedRuleId:h}:null}function Woe(t,e,n,r,i){return{ruleScanner:t.compileAG(e,n,r,i),findOptions:0}}function d8e(t,e,n,r,i){return{ruleScanner:t.compileWhileAG(e,n,r,i),findOptions:0}}function x3(t,e,n,r,i,s,o){if(s.length===0)return;const a=e.content,l=Math.min(s.length,o.length),h=[],f=o[0].end;for(let p=0;p<l;p++){const g=s[p];if(g===null)continue;const b=o[p];if(b.length===0)continue;if(b.start>f)break;for(;h.length>0&&h[h.length-1].endPos<=b.start;)i.produceFromScopes(h[h.length-1].scopes,h[h.length-1].endPos),h.pop();if(h.length>0?i.produceFromScopes(h[h.length-1].scopes,b.start):i.produce(r,b.start),g.retokenizeCapturedWithRuleId){const k=g.getName(a,o),T=r.contentNameScopesList.pushAttributed(k,t),I=g.getContentName(a,o),M=T.pushAttributed(I,t),B=r.push(g.retokenizeCapturedWithRuleId,b.start,-1,!1,null,T,M),j=t.createOnigString(a.substring(0,b.end));Xoe(t,j,n&&b.start===0,b.start,B,i,!1,0),joe(j);continue}const x=g.getName(a,o);if(x!==null){const T=(h.length>0?h[h.length-1].scopes:r.contentNameScopesList).pushAttributed(x,t);h.push(new p8e(T,b.end))}}for(;h.length>0;)i.produceFromScopes(h[h.length-1].scopes,h[h.length-1].endPos),h.pop()}var p8e=class{scopes;endPos;constructor(t,e){this.scopes=t,this.endPos=e}};function m8e(t,e,n,r,i,s,o,a){return new y8e(t,e,n,r,i,s,o,a)}function VZ(t,e,n,r,i){const s=N6(e,j6),o=qoe.getCompiledRuleId(n,r,i.repository);for(const a of s)t.push({debugSelector:e,matcher:a.matcher,ruleId:o,grammar:i,priority:a.priority})}function j6(t,e){if(e.length<t.length)return!1;let n=0;return t.every(r=>{for(let i=n;i<e.length;i++)if(g8e(e[i],r))return n=i+1,!0;return!1})}function g8e(t,e){if(!t)return!1;if(t===e)return!0;const n=e.length;return t.length>n&&t.substr(0,n)===e&&t[n]==="."}var y8e=class{constructor(t,e,n,r,i,s,o,a){if(this._rootScopeName=t,this.balancedBracketSelectors=s,this._onigLib=a,this._basicScopeAttributesProvider=new a8e(n,r),this._rootId=-1,this._lastRuleId=0,this._ruleId2desc=[null],this._includedGrammars={},this._grammarRepository=o,this._grammar=qZ(e,null),this._injections=null,this._tokenTypeMatchers=[],i)for(const l of Object.keys(i)){const h=N6(l,j6);for(const f of h)this._tokenTypeMatchers.push({matcher:f.matcher,type:i[l]})}}_rootId;_lastRuleId;_ruleId2desc;_includedGrammars;_grammarRepository;_grammar;_injections;_basicScopeAttributesProvider;_tokenTypeMatchers;get themeProvider(){return this._grammarRepository}dispose(){for(const t of this._ruleId2desc)t&&t.dispose()}createOnigScanner(t){return this._onigLib.createOnigScanner(t)}createOnigString(t){return this._onigLib.createOnigString(t)}getMetadataForScope(t){return this._basicScopeAttributesProvider.getBasicScopeAttributes(t)}_collectInjections(){const t={lookup:i=>i===this._rootScopeName?this._grammar:this.getExternalGrammar(i),injections:i=>this._grammarRepository.injections(i)},e=[],n=this._rootScopeName,r=t.lookup(n);if(r){const i=r.injections;if(i)for(let o in i)VZ(e,o,i[o],this,r);const s=this._grammarRepository.injections(n);s&&s.forEach(o=>{const a=this.getExternalGrammar(o);if(a){const l=a.injectionSelector;l&&VZ(e,l,a,this,a)}})}return e.sort((i,s)=>i.priority-s.priority),e}getInjections(){return this._injections===null&&(this._injections=this._collectInjections()),this._injections}registerRule(t){const e=++this._lastRuleId,n=t(e);return this._ruleId2desc[e]=n,n}getRule(t){return this._ruleId2desc[t]}getExternalGrammar(t,e){if(this._includedGrammars[t])return this._includedGrammars[t];if(this._grammarRepository){const n=this._grammarRepository.lookup(t);if(n)return this._includedGrammars[t]=qZ(n,e&&e.$base),this._includedGrammars[t]}}tokenizeLine(t,e,n=0){const r=this._tokenize(t,e,!1,n);return{tokens:r.lineTokens.getResult(r.ruleStack,r.lineLength),ruleStack:r.ruleStack,stoppedEarly:r.stoppedEarly}}tokenizeLine2(t,e,n=0){const r=this._tokenize(t,e,!0,n);return{tokens:r.lineTokens.getBinaryResult(r.ruleStack,r.lineLength),ruleStack:r.ruleStack,stoppedEarly:r.stoppedEarly}}_tokenize(t,e,n,r){this._rootId===-1&&(this._rootId=qoe.getCompiledRuleId(this._grammar.repository.$self,this,this._grammar.repository),this.getInjections());let i;if(!e||e===R9.NULL){i=!0;const h=this._basicScopeAttributesProvider.getDefaultAttributes(),f=this.themeProvider.getDefaults(),p=b2.set(0,h.languageId,h.tokenType,null,f.fontStyle,f.foregroundId,f.backgroundId),g=this.getRule(this._rootId).getName(null,null);let b;g?b=Z3.createRootAndLookUpScopeName(g,p,this):b=Z3.createRoot("unknown",p),e=new R9(null,this._rootId,-1,-1,!1,null,b,b)}else i=!1,e.reset();t=t+`
`;const s=this.createOnigString(t),o=s.content.length,a=new b8e(n,t,this._tokenTypeMatchers,this.balancedBracketSelectors),l=Xoe(this,s,i,0,e,a,!0,r);return joe(s),{lineLength:o,lineTokens:a,ruleStack:l.stack,stoppedEarly:l.stoppedEarly}}};function qZ(t,e){return t=LIe(t),t.repository=t.repository||{},t.repository.$self={$vscodeTextmateLocation:t.$vscodeTextmateLocation,patterns:t.patterns,name:t.scopeName},t.repository.$base=e||t.repository.$self,t}var Z3=class Sp{constructor(e,n,r){this.parent=e,this.scopePath=n,this.tokenAttributes=r}static fromExtension(e,n){let r=e,i=e?.scopePath??null;for(const s of n)i=_R.push(i,s.scopeNames),r=new Sp(r,i,s.encodedTokenAttributes);return r}static createRoot(e,n){return new Sp(null,new _R(null,e),n)}static createRootAndLookUpScopeName(e,n,r){const i=r.getMetadataForScope(e),s=new _R(null,e),o=r.themeProvider.themeMatch(s),a=Sp.mergeAttributes(n,i,o);return new Sp(null,s,a)}get scopeName(){return this.scopePath.scopeName}toString(){return this.getScopeNames().join(" ")}equals(e){return Sp.equals(this,e)}static equals(e,n){do{if(e===n||!e&&!n)return!0;if(!e||!n||e.scopeName!==n.scopeName||e.tokenAttributes!==n.tokenAttributes)return!1;e=e.parent,n=n.parent}while(!0)}static mergeAttributes(e,n,r){let i=-1,s=0,o=0;return r!==null&&(i=r.fontStyle,s=r.foregroundId,o=r.backgroundId),b2.set(e,n.languageId,n.tokenType,null,i,s,o)}pushAttributed(e,n){if(e===null)return this;if(e.indexOf(" ")===-1)return Sp._pushAttributed(this,e,n);const r=e.split(/ /g);let i=this;for(const s of r)i=Sp._pushAttributed(i,s,n);return i}static _pushAttributed(e,n,r){const i=r.getMetadataForScope(n),s=e.scopePath.push(n),o=r.themeProvider.themeMatch(s),a=Sp.mergeAttributes(e.tokenAttributes,i,o);return new Sp(e,s,a)}getScopeNames(){return this.scopePath.getSegments()}getExtensionIfDefined(e){const n=[];let r=this;for(;r&&r!==e;)n.push({encodedTokenAttributes:r.tokenAttributes,scopeNames:r.scopePath.getExtensionIfDefined(r.parent?.scopePath??null)}),r=r.parent;return r===e?n.reverse():void 0}},R9=class Bv{constructor(e,n,r,i,s,o,a,l){this.parent=e,this.ruleId=n,this.beginRuleCapturedEOL=s,this.endRule=o,this.nameScopesList=a,this.contentNameScopesList=l,this.depth=this.parent?this.parent.depth+1:1,this._enterPos=r,this._anchorPos=i}_stackElementBrand=void 0;static NULL=new Bv(null,0,0,0,!1,null,null,null);_enterPos;_anchorPos;depth;equals(e){return e===null?!1:Bv._equals(this,e)}static _equals(e,n){return e===n?!0:this._structuralEquals(e,n)?Z3.equals(e.contentNameScopesList,n.contentNameScopesList):!1}static _structuralEquals(e,n){do{if(e===n||!e&&!n)return!0;if(!e||!n||e.depth!==n.depth||e.ruleId!==n.ruleId||e.endRule!==n.endRule)return!1;e=e.parent,n=n.parent}while(!0)}clone(){return this}static _reset(e){for(;e;)e._enterPos=-1,e._anchorPos=-1,e=e.parent}reset(){Bv._reset(this)}pop(){return this.parent}safePop(){return this.parent?this.parent:this}push(e,n,r,i,s,o,a){return new Bv(this,e,n,r,i,s,o,a)}getEnterPos(){return this._enterPos}getAnchorPos(){return this._anchorPos}getRule(e){return e.getRule(this.ruleId)}toString(){const e=[];return this._writeString(e,0),"["+e.join(",")+"]"}_writeString(e,n){return this.parent&&(n=this.parent._writeString(e,n)),e[n++]=`(${this.ruleId}, ${this.nameScopesList?.toString()}, ${this.contentNameScopesList?.toString()})`,n}withContentNameScopesList(e){return this.contentNameScopesList===e?this:this.parent.push(this.ruleId,this._enterPos,this._anchorPos,this.beginRuleCapturedEOL,this.endRule,this.nameScopesList,e)}withEndRule(e){return this.endRule===e?this:new Bv(this.parent,this.ruleId,this._enterPos,this._anchorPos,this.beginRuleCapturedEOL,e,this.nameScopesList,this.contentNameScopesList)}hasSameRuleAs(e){let n=this;for(;n&&n._enterPos===e._enterPos;){if(n.ruleId===e.ruleId)return!0;n=n.parent}return!1}toStateStackFrame(){return{ruleId:this.ruleId,beginRuleCapturedEOL:this.beginRuleCapturedEOL,endRule:this.endRule,nameScopesList:this.nameScopesList?.getExtensionIfDefined(this.parent?.nameScopesList??null)??[],contentNameScopesList:this.contentNameScopesList?.getExtensionIfDefined(this.nameScopesList)??[]}}static pushFrame(e,n){const r=Z3.fromExtension(e?.nameScopesList??null,n.nameScopesList);return new Bv(e,n.ruleId,n.enterPos??-1,n.anchorPos??-1,n.beginRuleCapturedEOL,n.endRule,r,Z3.fromExtension(r,n.contentNameScopesList))}},v8e=class{balancedBracketScopes;unbalancedBracketScopes;allowAny=!1;constructor(t,e){this.balancedBracketScopes=t.flatMap(n=>n==="*"?(this.allowAny=!0,[]):N6(n,j6).map(r=>r.matcher)),this.unbalancedBracketScopes=e.flatMap(n=>N6(n,j6).map(r=>r.matcher))}get matchesAlways(){return this.allowAny&&this.unbalancedBracketScopes.length===0}get matchesNever(){return this.balancedBracketScopes.length===0&&!this.allowAny}match(t){for(const e of this.unbalancedBracketScopes)if(e(t))return!1;for(const e of this.balancedBracketScopes)if(e(t))return!0;return this.allowAny}},b8e=class{constructor(t,e,n,r){this.balancedBracketSelectors=r,this._emitBinaryTokens=t,this._tokenTypeOverrides=n,this._lineText=null,this._tokens=[],this._binaryTokens=[],this._lastTokenEndIndex=0}_emitBinaryTokens;_lineText;_tokens;_binaryTokens;_lastTokenEndIndex;_tokenTypeOverrides;produce(t,e){this.produceFromScopes(t.contentNameScopesList,e)}produceFromScopes(t,e){if(this._lastTokenEndIndex>=e)return;if(this._emitBinaryTokens){let r=t?.tokenAttributes??0,i=!1;if(this.balancedBracketSelectors?.matchesAlways&&(i=!0),this._tokenTypeOverrides.length>0||this.balancedBracketSelectors&&!this.balancedBracketSelectors.matchesAlways&&!this.balancedBracketSelectors.matchesNever){const s=t?.getScopeNames()??[];for(const o of this._tokenTypeOverrides)o.matcher(s)&&(r=b2.set(r,0,o.type,null,-1,0,0));this.balancedBracketSelectors&&(i=this.balancedBracketSelectors.match(s))}if(i&&(r=b2.set(r,0,8,i,-1,0,0)),this._binaryTokens.length>0&&this._binaryTokens[this._binaryTokens.length-1]===r){this._lastTokenEndIndex=e;return}this._binaryTokens.push(this._lastTokenEndIndex),this._binaryTokens.push(r),this._lastTokenEndIndex=e;return}const n=t?.getScopeNames()??[];this._tokens.push({startIndex:this._lastTokenEndIndex,endIndex:e,scopes:n}),this._lastTokenEndIndex=e}getResult(t,e){return this._tokens.length>0&&this._tokens[this._tokens.length-1].startIndex===e-1&&this._tokens.pop(),this._tokens.length===0&&(this._lastTokenEndIndex=-1,this.produce(t,e),this._tokens[this._tokens.length-1].startIndex=0),this._tokens}getBinaryResult(t,e){this._binaryTokens.length>0&&this._binaryTokens[this._binaryTokens.length-2]===e-1&&(this._binaryTokens.pop(),this._binaryTokens.pop()),this._binaryTokens.length===0&&(this._lastTokenEndIndex=-1,this.produce(t,e),this._binaryTokens[this._binaryTokens.length-2]=0);const n=new Uint32Array(this._binaryTokens.length);for(let r=0,i=this._binaryTokens.length;r<i;r++)n[r]=this._binaryTokens[r];return n}},_8e=class{constructor(t,e){this._onigLib=e,this._theme=t}_grammars=new Map;_rawGrammars=new Map;_injectionGrammars=new Map;_theme;dispose(){for(const t of this._grammars.values())t.dispose()}setTheme(t){this._theme=t}getColorMap(){return this._theme.getColorMap()}addGrammar(t,e){this._rawGrammars.set(t.scopeName,t),e&&this._injectionGrammars.set(t.scopeName,e)}lookup(t){return this._rawGrammars.get(t)}injections(t){return this._injectionGrammars.get(t)}getDefaults(){return this._theme.getDefaults()}themeMatch(t){return this._theme.match(t)}grammarForScopeName(t,e,n,r,i){if(!this._grammars.has(t)){let s=this._rawGrammars.get(t);if(!s)return null;this._grammars.set(t,m8e(t,s,e,n,r,i,this,this._onigLib))}return this._grammars.get(t)}},x8e=class{_options;_syncRegistry;_ensureGrammarCache;constructor(e){this._options=e,this._syncRegistry=new _8e(B6.createFromRawTheme(e.theme,e.colorMap),e.onigLib),this._ensureGrammarCache=new Map}dispose(){this._syncRegistry.dispose()}setTheme(e,n){this._syncRegistry.setTheme(B6.createFromRawTheme(e,n))}getColorMap(){return this._syncRegistry.getColorMap()}loadGrammarWithEmbeddedLanguages(e,n,r){return this.loadGrammarWithConfiguration(e,n,{embeddedLanguages:r})}loadGrammarWithConfiguration(e,n,r){return this._loadGrammar(e,n,r.embeddedLanguages,r.tokenTypes,new v8e(r.balancedBracketSelectors||[],r.unbalancedBracketSelectors||[]))}loadGrammar(e){return this._loadGrammar(e,0,null,null,null)}_loadGrammar(e,n,r,i,s){const o=new YIe(this._syncRegistry,e);for(;o.Q.length>0;)o.Q.map(a=>this._loadSingleGrammar(a.scopeName)),o.processQueue();return this._grammarForScopeName(e,n,r,i,s)}_loadSingleGrammar(e){this._ensureGrammarCache.has(e)||(this._doLoadSingleGrammar(e),this._ensureGrammarCache.set(e,!0))}_doLoadSingleGrammar(e){const n=this._options.loadGrammar(e);if(n){const r=typeof this._options.getInjections=="function"?this._options.getInjections(e):void 0;this._syncRegistry.addGrammar(n,r)}}addGrammar(e,n=[],r=0,i=null){return this._syncRegistry.addGrammar(e,n),this._grammarForScopeName(e.scopeName,r,i)}_grammarForScopeName(e,n=0,r=null,i=null,s=null){return this._syncRegistry.grammarForScopeName(e,n,r,i,s)}},F9=R9.NULL;const w8e=["area","base","basefont","bgsound","br","col","command","embed","frame","hr","image","img","input","keygen","link","meta","param","source","track","wbr"];let GC=class{constructor(e,n,r){this.normal=n,this.property=e,r&&(this.space=r)}};GC.prototype.normal={};GC.prototype.property={};GC.prototype.space=void 0;function Goe(t,e){const n={},r={};for(const i of t)Object.assign(n,i.property),Object.assign(r,i.normal);return new GC(n,r,e)}function L9(t){return t.toLowerCase()}class Rc{constructor(e,n){this.attribute=n,this.property=e}}Rc.prototype.attribute="";Rc.prototype.booleanish=!1;Rc.prototype.boolean=!1;Rc.prototype.commaOrSpaceSeparated=!1;Rc.prototype.commaSeparated=!1;Rc.prototype.defined=!1;Rc.prototype.mustUseProperty=!1;Rc.prototype.number=!1;Rc.prototype.overloadedBoolean=!1;Rc.prototype.property="";Rc.prototype.spaceSeparated=!1;Rc.prototype.space=void 0;let O8e=0;const Kr=u_(),xa=u_(),$9=u_(),Jt=u_(),io=u_(),Cw=u_(),eh=u_();function u_(){return 2**++O8e}const B9=Object.freeze(Object.defineProperty({__proto__:null,boolean:Kr,booleanish:xa,commaOrSpaceSeparated:eh,commaSeparated:Cw,number:Jt,overloadedBoolean:$9,spaceSeparated:io},Symbol.toStringTag,{value:"Module"})),wR=Object.keys(B9);class ZN extends Rc{constructor(e,n,r,i){let s=-1;if(super(e,n),ZZ(this,"space",i),typeof r=="number")for(;++s<wR.length;){const o=wR[s];ZZ(this,wR[s],(r&B9[o])===B9[o])}}}ZN.prototype.defined=!0;function ZZ(t,e,n){n&&(t[e]=n)}function nO(t){const e={},n={};for(const[r,i]of Object.entries(t.properties)){const s=new ZN(r,t.transform(t.attributes||{},r),i,t.space);t.mustUseProperty&&t.mustUseProperty.includes(r)&&(s.mustUseProperty=!0),e[r]=s,n[L9(r)]=r,n[L9(s.attribute)]=r}return new GC(e,n,t.space)}const Yoe=nO({properties:{ariaActiveDescendant:null,ariaAtomic:xa,ariaAutoComplete:null,ariaBusy:xa,ariaChecked:xa,ariaColCount:Jt,ariaColIndex:Jt,ariaColSpan:Jt,ariaControls:io,ariaCurrent:null,ariaDescribedBy:io,ariaDetails:null,ariaDisabled:xa,ariaDropEffect:io,ariaErrorMessage:null,ariaExpanded:xa,ariaFlowTo:io,ariaGrabbed:xa,ariaHasPopup:null,ariaHidden:xa,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:io,ariaLevel:Jt,ariaLive:null,ariaModal:xa,ariaMultiLine:xa,ariaMultiSelectable:xa,ariaOrientation:null,ariaOwns:io,ariaPlaceholder:null,ariaPosInSet:Jt,ariaPressed:xa,ariaReadOnly:xa,ariaRelevant:null,ariaRequired:xa,ariaRoleDescription:io,ariaRowCount:Jt,ariaRowIndex:Jt,ariaRowSpan:Jt,ariaSelected:xa,ariaSetSize:Jt,ariaSort:null,ariaValueMax:Jt,ariaValueMin:Jt,ariaValueNow:Jt,ariaValueText:null,role:null},transform(t,e){return e==="role"?e:"aria-"+e.slice(4).toLowerCase()}});function Hoe(t,e){return e in t?t[e]:e}function Koe(t,e){return Hoe(t,e.toLowerCase())}const S8e=nO({attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:Cw,acceptCharset:io,accessKey:io,action:null,allow:null,allowFullScreen:Kr,allowPaymentRequest:Kr,allowUserMedia:Kr,alt:null,as:null,async:Kr,autoCapitalize:null,autoComplete:io,autoFocus:Kr,autoPlay:Kr,blocking:io,capture:null,charSet:null,checked:Kr,cite:null,className:io,cols:Jt,colSpan:null,content:null,contentEditable:xa,controls:Kr,controlsList:io,coords:Jt|Cw,crossOrigin:null,data:null,dateTime:null,decoding:null,default:Kr,defer:Kr,dir:null,dirName:null,disabled:Kr,download:$9,draggable:xa,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:Kr,formTarget:null,headers:io,height:Jt,hidden:$9,high:Jt,href:null,hrefLang:null,htmlFor:io,httpEquiv:io,id:null,imageSizes:null,imageSrcSet:null,inert:Kr,inputMode:null,integrity:null,is:null,isMap:Kr,itemId:null,itemProp:io,itemRef:io,itemScope:Kr,itemType:io,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:Kr,low:Jt,manifest:null,max:null,maxLength:Jt,media:null,method:null,min:null,minLength:Jt,multiple:Kr,muted:Kr,name:null,nonce:null,noModule:Kr,noValidate:Kr,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:Kr,optimum:Jt,pattern:null,ping:io,placeholder:null,playsInline:Kr,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:Kr,referrerPolicy:null,rel:io,required:Kr,reversed:Kr,rows:Jt,rowSpan:Jt,sandbox:io,scope:null,scoped:Kr,seamless:Kr,selected:Kr,shadowRootClonable:Kr,shadowRootDelegatesFocus:Kr,shadowRootMode:null,shape:null,size:Jt,sizes:null,slot:null,span:Jt,spellCheck:xa,src:null,srcDoc:null,srcLang:null,srcSet:null,start:Jt,step:null,style:null,tabIndex:Jt,target:null,title:null,translate:null,type:null,typeMustMatch:Kr,useMap:null,value:xa,width:Jt,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:io,axis:null,background:null,bgColor:null,border:Jt,borderColor:null,bottomMargin:Jt,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:Kr,declare:Kr,event:null,face:null,frame:null,frameBorder:null,hSpace:Jt,leftMargin:Jt,link:null,longDesc:null,lowSrc:null,marginHeight:Jt,marginWidth:Jt,noResize:Kr,noHref:Kr,noShade:Kr,noWrap:Kr,object:null,profile:null,prompt:null,rev:null,rightMargin:Jt,rules:null,scheme:null,scrolling:xa,standby:null,summary:null,text:null,topMargin:Jt,valueType:null,version:null,vAlign:null,vLink:null,vSpace:Jt,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:Kr,disableRemotePlayback:Kr,prefix:null,property:null,results:Jt,security:null,unselectable:null},space:"html",transform:Koe}),k8e=nO({attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},properties:{about:eh,accentHeight:Jt,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:Jt,amplitude:Jt,arabicForm:null,ascent:Jt,attributeName:null,attributeType:null,azimuth:Jt,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:Jt,by:null,calcMode:null,capHeight:Jt,className:io,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:Jt,diffuseConstant:Jt,direction:null,display:null,dur:null,divisor:Jt,dominantBaseline:null,download:Kr,dx:null,dy:null,edgeMode:null,editable:null,elevation:Jt,enableBackground:null,end:null,event:null,exponent:Jt,externalResourcesRequired:null,fill:null,fillOpacity:Jt,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:Cw,g2:Cw,glyphName:Cw,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:Jt,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:Jt,horizOriginX:Jt,horizOriginY:Jt,id:null,ideographic:Jt,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:Jt,k:Jt,k1:Jt,k2:Jt,k3:Jt,k4:Jt,kernelMatrix:eh,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:Jt,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:Jt,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:Jt,overlineThickness:Jt,paintOrder:null,panose1:null,path:null,pathLength:Jt,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:io,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:Jt,pointsAtY:Jt,pointsAtZ:Jt,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:eh,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:eh,rev:eh,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:eh,requiredFeatures:eh,requiredFonts:eh,requiredFormats:eh,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:Jt,specularExponent:Jt,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:Jt,strikethroughThickness:Jt,string:null,stroke:null,strokeDashArray:eh,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:Jt,strokeOpacity:Jt,strokeWidth:null,style:null,surfaceScale:Jt,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:eh,tabIndex:Jt,tableValues:null,target:null,targetX:Jt,targetY:Jt,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:eh,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:Jt,underlineThickness:Jt,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:Jt,values:null,vAlphabetic:Jt,vMathematical:Jt,vectorEffect:null,vHanging:Jt,vIdeographic:Jt,version:null,vertAdvY:Jt,vertOriginX:Jt,vertOriginY:Jt,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:Jt,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null},space:"svg",transform:Hoe}),Joe=nO({properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null},space:"xlink",transform(t,e){return"xlink:"+e.slice(5).toLowerCase()}}),eae=nO({attributes:{xmlnsxlink:"xmlns:xlink"},properties:{xmlnsXLink:null,xmlns:null},space:"xmlns",transform:Koe}),tae=nO({properties:{xmlBase:null,xmlLang:null,xmlSpace:null},space:"xml",transform(t,e){return"xml:"+e.slice(3).toLowerCase()}}),C8e=/[A-Z]/g,XZ=/-[a-z]/g,A8e=/^data[-\w.:]+$/i;function E8e(t,e){const n=L9(e);let r=e,i=Rc;if(n in t.normal)return t.property[t.normal[n]];if(n.length>4&&n.slice(0,4)==="data"&&A8e.test(e)){if(e.charAt(4)==="-"){const s=e.slice(5).replace(XZ,P8e);r="data"+s.charAt(0).toUpperCase()+s.slice(1)}else{const s=e.slice(4);if(!XZ.test(s)){let o=s.replace(C8e,T8e);o.charAt(0)!=="-"&&(o="-"+o),e="data"+o}}i=ZN}return new i(r,e)}function T8e(t){return"-"+t.toLowerCase()}function P8e(t){return t.charAt(1).toUpperCase()}const D8e=Goe([Yoe,S8e,Joe,eae,tae],"html"),nae=Goe([Yoe,k8e,Joe,eae,tae],"svg"),WZ={}.hasOwnProperty;function I8e(t,e){const n=e||{};function r(i,...s){let o=r.invalid;const a=r.handlers;if(i&&WZ.call(i,t)){const l=String(i[t]);o=WZ.call(a,l)?a[l]:r.unknown}if(o)return o.call(this,i,...s)}return r.handlers=n.handlers||{},r.invalid=n.invalid,r.unknown=n.unknown,r}const M8e=/["&'<>`]/g,R8e=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,F8e=/[\x01-\t\v\f\x0E-\x1F\x7F\x81\x8D\x8F\x90\x9D\xA0-\uFFFF]/g,L8e=/[|\\{}()[\]^$+*?.]/g,GZ=new WeakMap;function $8e(t,e){if(t=t.replace(e.subset?B8e(e.subset):M8e,r),e.subset||e.escapeOnly)return t;return t.replace(R8e,n).replace(F8e,r);function n(i,s,o){return e.format((i.charCodeAt(0)-55296)*1024+i.charCodeAt(1)-56320+65536,o.charCodeAt(s+2),e)}function r(i,s,o){return e.format(i.charCodeAt(0),o.charCodeAt(s+1),e)}}function B8e(t){let e=GZ.get(t);return e||(e=N8e(t),GZ.set(t,e)),e}function N8e(t){const e=[];let n=-1;for(;++n<t.length;)e.push(t[n].replace(L8e,"\\$&"));return new RegExp("(?:"+e.join("|")+")","g")}const z8e=/[\dA-Fa-f]/;function Q8e(t,e,n){const r="&#x"+t.toString(16).toUpperCase();return n&&e&&!z8e.test(String.fromCharCode(e))?r:r+";"}const j8e=/\d/;function U8e(t,e,n){const r="&#"+String(t);return n&&e&&!j8e.test(String.fromCharCode(e))?r:r+";"}const V8e=["AElig","AMP","Aacute","Acirc","Agrave","Aring","Atilde","Auml","COPY","Ccedil","ETH","Eacute","Ecirc","Egrave","Euml","GT","Iacute","Icirc","Igrave","Iuml","LT","Ntilde","Oacute","Ocirc","Ograve","Oslash","Otilde","Ouml","QUOT","REG","THORN","Uacute","Ucirc","Ugrave","Uuml","Yacute","aacute","acirc","acute","aelig","agrave","amp","aring","atilde","auml","brvbar","ccedil","cedil","cent","copy","curren","deg","divide","eacute","ecirc","egrave","eth","euml","frac12","frac14","frac34","gt","iacute","icirc","iexcl","igrave","iquest","iuml","laquo","lt","macr","micro","middot","nbsp","not","ntilde","oacute","ocirc","ograve","ordf","ordm","oslash","otilde","ouml","para","plusmn","pound","quot","raquo","reg","sect","shy","sup1","sup2","sup3","szlig","thorn","times","uacute","ucirc","ugrave","uml","uuml","yacute","yen","yuml"],OR={nbsp:"Â ",iexcl:"Â¡",cent:"Â¢",pound:"Â£",curren:"Â¤",yen:"Â¥",brvbar:"Â¦",sect:"Â§",uml:"Â¨",copy:"Â©",ordf:"Âª",laquo:"Â«",not:"Â¬",shy:"Â­",reg:"Â®",macr:"Â¯",deg:"Â°",plusmn:"Â±",sup2:"Â²",sup3:"Â³",acute:"Â´",micro:"Âµ",para:"Â¶",middot:"Â·",cedil:"Â¸",sup1:"Â¹",ordm:"Âº",raquo:"Â»",frac14:"Â¼",frac12:"Â½",frac34:"Â¾",iquest:"Â¿",Agrave:"Ã",Aacute:"Ã",Acirc:"Ã",Atilde:"Ã",Auml:"Ã",Aring:"Ã",AElig:"Ã",Ccedil:"Ã",Egrave:"Ã",Eacute:"Ã",Ecirc:"Ã",Euml:"Ã",Igrave:"Ã",Iacute:"Ã",Icirc:"Ã",Iuml:"Ã",ETH:"Ã",Ntilde:"Ã",Ograve:"Ã",Oacute:"Ã",Ocirc:"Ã",Otilde:"Ã",Ouml:"Ã",times:"Ã",Oslash:"Ã",Ugrave:"Ã",Uacute:"Ã",Ucirc:"Ã",Uuml:"Ã",Yacute:"Ã",THORN:"Ã",szlig:"Ã",agrave:"Ã ",aacute:"Ã¡",acirc:"Ã¢",atilde:"Ã£",auml:"Ã¤",aring:"Ã¥",aelig:"Ã¦",ccedil:"Ã§",egrave:"Ã¨",eacute:"Ã©",ecirc:"Ãª",euml:"Ã«",igrave:"Ã¬",iacute:"Ã­",icirc:"Ã®",iuml:"Ã¯",eth:"Ã°",ntilde:"Ã±",ograve:"Ã²",oacute:"Ã³",ocirc:"Ã´",otilde:"Ãµ",ouml:"Ã¶",divide:"Ã·",oslash:"Ã¸",ugrave:"Ã¹",uacute:"Ãº",ucirc:"Ã»",uuml:"Ã¼",yacute:"Ã½",thorn:"Ã¾",yuml:"Ã¿",fnof:"Æ",Alpha:"Î",Beta:"Î",Gamma:"Î",Delta:"Î",Epsilon:"Î",Zeta:"Î",Eta:"Î",Theta:"Î",Iota:"Î",Kappa:"Î",Lambda:"Î",Mu:"Î",Nu:"Î",Xi:"Î",Omicron:"Î",Pi:"Î ",Rho:"Î¡",Sigma:"Î£",Tau:"Î¤",Upsilon:"Î¥",Phi:"Î¦",Chi:"Î§",Psi:"Î¨",Omega:"Î©",alpha:"Î±",beta:"Î²",gamma:"Î³",delta:"Î´",epsilon:"Îµ",zeta:"Î¶",eta:"Î·",theta:"Î¸",iota:"Î¹",kappa:"Îº",lambda:"Î»",mu:"Î¼",nu:"Î½",xi:"Î¾",omicron:"Î¿",pi:"Ï",rho:"Ï",sigmaf:"Ï",sigma:"Ï",tau:"Ï",upsilon:"Ï",phi:"Ï",chi:"Ï",psi:"Ï",omega:"Ï",thetasym:"Ï",upsih:"Ï",piv:"Ï",bull:"â¢",hellip:"â¦",prime:"â²",Prime:"â³",oline:"â¾",frasl:"â",weierp:"â",image:"â",real:"â",trade:"â¢",alefsym:"âµ",larr:"â",uarr:"â",rarr:"â",darr:"â",harr:"â",crarr:"âµ",lArr:"â",uArr:"â",rArr:"â",dArr:"â",hArr:"â",forall:"â",part:"â",exist:"â",empty:"â",nabla:"â",isin:"â",notin:"â",ni:"â",prod:"â",sum:"â",minus:"â",lowast:"â",radic:"â",prop:"â",infin:"â",ang:"â ",and:"â§",or:"â¨",cap:"â©",cup:"âª",int:"â«",there4:"â´",sim:"â¼",cong:"â",asymp:"â",ne:"â ",equiv:"â¡",le:"â¤",ge:"â¥",sub:"â",sup:"â",nsub:"â",sube:"â",supe:"â",oplus:"â",otimes:"â",perp:"â¥",sdot:"â",lceil:"â",rceil:"â",lfloor:"â",rfloor:"â",lang:"â©",rang:"âª",loz:"â",spades:"â ",clubs:"â£",hearts:"â¥",diams:"â¦",quot:'"',amp:"&",lt:"<",gt:">",OElig:"Å",oelig:"Å",Scaron:"Å ",scaron:"Å¡",Yuml:"Å¸",circ:"Ë",tilde:"Ë",ensp:"â",emsp:"â",thinsp:"â",zwnj:"â",zwj:"â",lrm:"â",rlm:"â",ndash:"â",mdash:"â",lsquo:"â",rsquo:"â",sbquo:"â",ldquo:"â",rdquo:"â",bdquo:"â",dagger:"â ",Dagger:"â¡",permil:"â°",lsaquo:"â¹",rsaquo:"âº",euro:"â¬"},q8e=["cent","copy","divide","gt","lt","not","para","times"],rae={}.hasOwnProperty,N9={};let k4;for(k4 in OR)rae.call(OR,k4)&&(N9[OR[k4]]=k4);const Z8e=/[^\dA-Za-z]/;function X8e(t,e,n,r){const i=String.fromCharCode(t);if(rae.call(N9,i)){const s=N9[i],o="&"+s;return n&&V8e.includes(s)&&!q8e.includes(s)&&(!r||e&&e!==61&&Z8e.test(String.fromCharCode(e)))?o:o+";"}return""}function W8e(t,e,n){let r=Q8e(t,e,n.omitOptionalSemicolons),i;if((n.useNamedReferences||n.useShortestReferences)&&(i=X8e(t,e,n.omitOptionalSemicolons,n.attribute)),(n.useShortestReferences||!i)&&n.useShortestReferences){const s=U8e(t,e,n.omitOptionalSemicolons);s.length<r.length&&(r=s)}return i&&(!n.useShortestReferences||i.length<r.length)?i:r}function Aw(t,e){return $8e(t,Object.assign({format:W8e},e))}const G8e=/^>|^->|<!--|-->|--!>|<!-$/g,Y8e=[">"],H8e=["<",">"];function K8e(t,e,n,r){return r.settings.bogusComments?"<?"+Aw(t.value,Object.assign({},r.settings.characterReferences,{subset:Y8e}))+">":"<!--"+t.value.replace(G8e,i)+"-->";function i(s){return Aw(s,Object.assign({},r.settings.characterReferences,{subset:H8e}))}}function J8e(t,e,n,r){return"<!"+(r.settings.upperDoctype?"DOCTYPE":"doctype")+(r.settings.tightDoctype?"":" ")+"html>"}function YZ(t,e){const n=String(t);if(typeof e!="string")throw new TypeError("Expected character");let r=0,i=n.indexOf(e);for(;i!==-1;)r++,i=n.indexOf(e,i+e.length);return r}function eMe(t,e){const n=e||{};return(t[t.length-1]===""?[...t,""]:t).join((n.padRight?" ":"")+","+(n.padLeft===!1?"":" ")).trim()}function tMe(t){return t.join(" ").trim()}const nMe=/[ \t\n\f\r]/g;function XN(t){return typeof t=="object"?t.type==="text"?HZ(t.value):!1:HZ(t)}function HZ(t){return t.replace(nMe,"")===""}const Qa=sae(1),iae=sae(-1),rMe=[];function sae(t){return e;function e(n,r,i){const s=n?n.children:rMe;let o=(r||0)+t,a=s[o];if(!i)for(;a&&XN(a);)o+=t,a=s[o];return a}}const iMe={}.hasOwnProperty;function oae(t){return e;function e(n,r,i){return iMe.call(t,n.tagName)&&t[n.tagName](n,r,i)}}const WN=oae({body:oMe,caption:SR,colgroup:SR,dd:cMe,dt:uMe,head:SR,html:sMe,li:lMe,optgroup:hMe,option:fMe,p:aMe,rp:KZ,rt:KZ,tbody:pMe,td:JZ,tfoot:mMe,th:JZ,thead:dMe,tr:gMe});function SR(t,e,n){const r=Qa(n,e,!0);return!r||r.type!=="comment"&&!(r.type==="text"&&XN(r.value.charAt(0)))}function sMe(t,e,n){const r=Qa(n,e);return!r||r.type!=="comment"}function oMe(t,e,n){const r=Qa(n,e);return!r||r.type!=="comment"}function aMe(t,e,n){const r=Qa(n,e);return r?r.type==="element"&&(r.tagName==="address"||r.tagName==="article"||r.tagName==="aside"||r.tagName==="blockquote"||r.tagName==="details"||r.tagName==="div"||r.tagName==="dl"||r.tagName==="fieldset"||r.tagName==="figcaption"||r.tagName==="figure"||r.tagName==="footer"||r.tagName==="form"||r.tagName==="h1"||r.tagName==="h2"||r.tagName==="h3"||r.tagName==="h4"||r.tagName==="h5"||r.tagName==="h6"||r.tagName==="header"||r.tagName==="hgroup"||r.tagName==="hr"||r.tagName==="main"||r.tagName==="menu"||r.tagName==="nav"||r.tagName==="ol"||r.tagName==="p"||r.tagName==="pre"||r.tagName==="section"||r.tagName==="table"||r.tagName==="ul"):!n||!(n.type==="element"&&(n.tagName==="a"||n.tagName==="audio"||n.tagName==="del"||n.tagName==="ins"||n.tagName==="map"||n.tagName==="noscript"||n.tagName==="video"))}function lMe(t,e,n){const r=Qa(n,e);return!r||r.type==="element"&&r.tagName==="li"}function uMe(t,e,n){const r=Qa(n,e);return!!(r&&r.type==="element"&&(r.tagName==="dt"||r.tagName==="dd"))}function cMe(t,e,n){const r=Qa(n,e);return!r||r.type==="element"&&(r.tagName==="dt"||r.tagName==="dd")}function KZ(t,e,n){const r=Qa(n,e);return!r||r.type==="element"&&(r.tagName==="rp"||r.tagName==="rt")}function hMe(t,e,n){const r=Qa(n,e);return!r||r.type==="element"&&r.tagName==="optgroup"}function fMe(t,e,n){const r=Qa(n,e);return!r||r.type==="element"&&(r.tagName==="option"||r.tagName==="optgroup")}function dMe(t,e,n){const r=Qa(n,e);return!!(r&&r.type==="element"&&(r.tagName==="tbody"||r.tagName==="tfoot"))}function pMe(t,e,n){const r=Qa(n,e);return!r||r.type==="element"&&(r.tagName==="tbody"||r.tagName==="tfoot")}function mMe(t,e,n){return!Qa(n,e)}function gMe(t,e,n){const r=Qa(n,e);return!r||r.type==="element"&&r.tagName==="tr"}function JZ(t,e,n){const r=Qa(n,e);return!r||r.type==="element"&&(r.tagName==="td"||r.tagName==="th")}const yMe=oae({body:_Me,colgroup:xMe,head:bMe,html:vMe,tbody:wMe});function vMe(t){const e=Qa(t,-1);return!e||e.type!=="comment"}function bMe(t){const e=new Set;for(const r of t.children)if(r.type==="element"&&(r.tagName==="base"||r.tagName==="title")){if(e.has(r.tagName))return!1;e.add(r.tagName)}const n=t.children[0];return!n||n.type==="element"}function _Me(t){const e=Qa(t,-1,!0);return!e||e.type!=="comment"&&!(e.type==="text"&&XN(e.value.charAt(0)))&&!(e.type==="element"&&(e.tagName==="meta"||e.tagName==="link"||e.tagName==="script"||e.tagName==="style"||e.tagName==="template"))}function xMe(t,e,n){const r=iae(n,e),i=Qa(t,-1,!0);return n&&r&&r.type==="element"&&r.tagName==="colgroup"&&WN(r,n.children.indexOf(r),n)?!1:!!(i&&i.type==="element"&&i.tagName==="col")}function wMe(t,e,n){const r=iae(n,e),i=Qa(t,-1);return n&&r&&r.type==="element"&&(r.tagName==="thead"||r.tagName==="tbody")&&WN(r,n.children.indexOf(r),n)?!1:!!(i&&i.type==="element"&&i.tagName==="tr")}const C4={name:[[`	
\f\r &/=>`.split(""),`	
\f\r "&'/=>\``.split("")],[`\0	
\f\r "&'/<=>`.split(""),`\0	
\f\r "&'/<=>\``.split("")]],unquoted:[[`	
\f\r &>`.split(""),`\0	
\f\r "&'<=>\``.split("")],[`\0	
\f\r "&'<=>\``.split(""),`\0	
\f\r "&'<=>\``.split("")]],single:[["&'".split(""),"\"&'`".split("")],["\0&'".split(""),"\0\"&'`".split("")]],double:[['"&'.split(""),"\"&'`".split("")],['\0"&'.split(""),"\0\"&'`".split("")]]};function OMe(t,e,n,r){const i=r.schema,s=i.space==="svg"?!1:r.settings.omitOptionalTags;let o=i.space==="svg"?r.settings.closeEmptyElements:r.settings.voids.includes(t.tagName.toLowerCase());const a=[];let l;i.space==="html"&&t.tagName==="svg"&&(r.schema=nae);const h=SMe(r,t.properties),f=r.all(i.space==="html"&&t.tagName==="template"?t.content:t);return r.schema=i,f&&(o=!1),(h||!s||!yMe(t,e,n))&&(a.push("<",t.tagName,h?" "+h:""),o&&(i.space==="svg"||r.settings.closeSelfClosing)&&(l=h.charAt(h.length-1),(!r.settings.tightSelfClosing||l==="/"||l&&l!=='"'&&l!=="'")&&a.push(" "),a.push("/")),a.push(">")),a.push(f),!o&&(!s||!WN(t,e,n))&&a.push("</"+t.tagName+">"),a.join("")}function SMe(t,e){const n=[];let r=-1,i;if(e){for(i in e)if(e[i]!==null&&e[i]!==void 0){const s=kMe(t,i,e[i]);s&&n.push(s)}}for(;++r<n.length;){const s=t.settings.tightAttributes?n[r].charAt(n[r].length-1):void 0;r!==n.length-1&&s!=='"'&&s!=="'"&&(n[r]+=" ")}return n.join("")}function kMe(t,e,n){const r=E8e(t.schema,e),i=t.settings.allowParseErrors&&t.schema.space==="html"?0:1,s=t.settings.allowDangerousCharacters?0:1;let o=t.quote,a;if(r.overloadedBoolean&&(n===r.attribute||n==="")?n=!0:(r.boolean||r.overloadedBoolean)&&(typeof n!="string"||n===r.attribute||n==="")&&(n=!!n),n==null||n===!1||typeof n=="number"&&Number.isNaN(n))return"";const l=Aw(r.attribute,Object.assign({},t.settings.characterReferences,{subset:C4.name[i][s]}));return n===!0||(n=Array.isArray(n)?(r.commaSeparated?eMe:tMe)(n,{padLeft:!t.settings.tightCommaSeparatedLists}):String(n),t.settings.collapseEmptyAttributes&&!n)?l:(t.settings.preferUnquoted&&(a=Aw(n,Object.assign({},t.settings.characterReferences,{attribute:!0,subset:C4.unquoted[i][s]}))),a!==n&&(t.settings.quoteSmart&&YZ(n,o)>YZ(n,t.alternative)&&(o=t.alternative),a=o+Aw(n,Object.assign({},t.settings.characterReferences,{subset:(o==="'"?C4.single:C4.double)[i][s],attribute:!0}))+o),l+(a&&"="+a))}const CMe=["<","&"];function aae(t,e,n,r){return n&&n.type==="element"&&(n.tagName==="script"||n.tagName==="style")?t.value:Aw(t.value,Object.assign({},r.settings.characterReferences,{subset:CMe}))}function AMe(t,e,n,r){return r.settings.allowDangerousHtml?t.value:aae(t,e,n,r)}function EMe(t,e,n,r){return r.all(t)}const TMe=I8e("type",{invalid:PMe,unknown:DMe,handlers:{comment:K8e,doctype:J8e,element:OMe,raw:AMe,root:EMe,text:aae}});function PMe(t){throw new Error("Expected node, not `"+t+"`")}function DMe(t){const e=t;throw new Error("Cannot compile unknown node `"+e.type+"`")}const IMe={},MMe={},RMe=[];function FMe(t,e){const n=IMe,r=n.quote||'"',i=r==='"'?"'":'"';if(r!=='"'&&r!=="'")throw new Error("Invalid quote `"+r+"`, expected `'` or `\"`");return{one:LMe,all:$Me,settings:{omitOptionalTags:n.omitOptionalTags||!1,allowParseErrors:n.allowParseErrors||!1,allowDangerousCharacters:n.allowDangerousCharacters||!1,quoteSmart:n.quoteSmart||!1,preferUnquoted:n.preferUnquoted||!1,tightAttributes:n.tightAttributes||!1,upperDoctype:n.upperDoctype||!1,tightDoctype:n.tightDoctype||!1,bogusComments:n.bogusComments||!1,tightCommaSeparatedLists:n.tightCommaSeparatedLists||!1,tightSelfClosing:n.tightSelfClosing||!1,collapseEmptyAttributes:n.collapseEmptyAttributes||!1,allowDangerousHtml:n.allowDangerousHtml||!1,voids:n.voids||w8e,characterReferences:n.characterReferences||MMe,closeSelfClosing:n.closeSelfClosing||!1,closeEmptyElements:n.closeEmptyElements||!1},schema:n.space==="svg"?nae:D8e,quote:r,alternative:i}.one(Array.isArray(t)?{type:"root",children:t}:t,void 0,void 0)}function LMe(t,e,n){return TMe(t,e,n,this)}function $Me(t){const e=[],n=t&&t.children||RMe;let r=-1;for(;++r<n.length;)e[r]=this.one(n[r],r,t);return e.join("")}function BMe(t){return Array.isArray(t)?t:[t]}function RD(t,e=!1){const n=t.split(/(\r?\n)/g);let r=0;const i=[];for(let s=0;s<n.length;s+=2){const o=e?n[s]+(n[s+1]||""):n[s];i.push([o,r]),r+=n[s].length,r+=n[s+1]?.length||0}return i}function GN(t){return!t||["plaintext","txt","text","plain"].includes(t)}function NMe(t){return t==="ansi"||GN(t)}function YN(t){return t==="none"}function zMe(t){return YN(t)}function lae(t,e){if(!e)return t;t.properties||={},t.properties.class||=[],typeof t.properties.class=="string"&&(t.properties.class=t.properties.class.split(/\s+/g)),Array.isArray(t.properties.class)||(t.properties.class=[]);const n=Array.isArray(e)?e:e.split(/\s+/g);for(const r of n)r&&!t.properties.class.includes(r)&&t.properties.class.push(r);return t}function QMe(t,e){let n=0;const r=[];for(const i of e)i>n&&r.push({...t,content:t.content.slice(n,i),offset:t.offset+n}),n=i;return n<t.content.length&&r.push({...t,content:t.content.slice(n),offset:t.offset+n}),r}function jMe(t,e){const n=Array.from(e instanceof Set?e:new Set(e)).sort((r,i)=>r-i);return n.length?t.map(r=>r.flatMap(i=>{const s=n.filter(o=>i.offset<o&&o<i.offset+i.content.length).map(o=>o-i.offset).sort((o,a)=>o-a);return s.length?QMe(i,s):i})):t}async function uae(t){return Promise.resolve(typeof t=="function"?t():t).then(e=>e.default||e)}function U6(t,e){const n=typeof t=="string"?{}:{...t.colorReplacements},r=typeof t=="string"?t:t.name;for(const[i,s]of Object.entries(e?.colorReplacements||{}))typeof s=="string"?n[i]=s:i===r&&Object.assign(n,s);return n}function rb(t,e){return t&&(e?.[t?.toLowerCase()]||t)}function cae(t){const e={};return t.color&&(e.color=t.color),t.bgColor&&(e["background-color"]=t.bgColor),t.fontStyle&&(t.fontStyle&Qg.Italic&&(e["font-style"]="italic"),t.fontStyle&Qg.Bold&&(e["font-weight"]="bold"),t.fontStyle&Qg.Underline&&(e["text-decoration"]="underline")),e}function UMe(t){return typeof t=="string"?t:Object.entries(t).map(([e,n])=>`${e}:${n}`).join(";")}function VMe(t){const e=RD(t,!0).map(([i])=>i);function n(i){if(i===t.length)return{line:e.length-1,character:e[e.length-1].length};let s=i,o=0;for(const a of e){if(s<a.length)break;s-=a.length,o++}return{line:o,character:s}}function r(i,s){let o=0;for(let a=0;a<i;a++)o+=e[a].length;return o+=s,o}return{lines:e,indexToPos:n,posToIndex:r}}class Tu extends Error{constructor(e){super(e),this.name="ShikiError"}}const hae=new WeakMap;function FD(t,e){hae.set(t,e)}function Kk(t){return hae.get(t)}class rO{_stacks={};lang;get themes(){return Object.keys(this._stacks)}get theme(){return this.themes[0]}get _stack(){return this._stacks[this.theme]}static initial(e,n){return new rO(Object.fromEntries(BMe(n).map(r=>[r,F9])),e)}constructor(...e){if(e.length===2){const[n,r]=e;this.lang=r,this._stacks=n}else{const[n,r,i]=e;this.lang=r,this._stacks={[i]:n}}}getInternalStack(e=this.theme){return this._stacks[e]}get scopes(){return eX(this._stacks[this.theme])}getScopes(e=this.theme){return eX(this._stacks[e])}toJSON(){return{lang:this.lang,theme:this.theme,themes:this.themes,scopes:this.scopes}}}function eX(t){const e=[],n=new Set;function r(i){if(n.has(i))return;n.add(i);const s=i?.nameScopesList?.scopeName;s&&e.push(s),i.parent&&r(i.parent)}return r(t),e}function qMe(t,e){if(!(t instanceof rO))throw new Tu("Invalid grammar state");return t.getInternalStack(e)}function ZMe(){const t=new WeakMap;function e(n){if(!t.has(n.meta)){let r=function(o){if(typeof o=="number"){if(o<0||o>n.source.length)throw new Tu(`Invalid decoration offset: ${o}. Code length: ${n.source.length}`);return{...i.indexToPos(o),offset:o}}else{const a=i.lines[o.line];if(a===void 0)throw new Tu(`Invalid decoration position ${JSON.stringify(o)}. Lines length: ${i.lines.length}`);if(o.character<0||o.character>a.length)throw new Tu(`Invalid decoration position ${JSON.stringify(o)}. Line ${o.line} length: ${a.length}`);return{...o,offset:i.posToIndex(o.line,o.character)}}};const i=VMe(n.source),s=(n.options.decorations||[]).map(o=>({...o,start:r(o.start),end:r(o.end)}));XMe(s),t.set(n.meta,{decorations:s,converter:i,source:n.source})}return t.get(n.meta)}return{name:"shiki:decorations",tokens(n){if(!this.options.decorations?.length)return;const i=e(this).decorations.flatMap(o=>[o.start.offset,o.end.offset]);return jMe(n,i)},code(n){if(!this.options.decorations?.length)return;const r=e(this),i=Array.from(n.children).filter(f=>f.type==="element"&&f.tagName==="span");if(i.length!==r.converter.lines.length)throw new Tu(`Number of lines in code element (${i.length}) does not match the number of lines in the source (${r.converter.lines.length}). Failed to apply decorations.`);function s(f,p,g,b){const x=i[f];let k="",T=-1,I=-1;if(p===0&&(T=0),g===0&&(I=0),g===Number.POSITIVE_INFINITY&&(I=x.children.length),T===-1||I===-1)for(let B=0;B<x.children.length;B++)k+=fae(x.children[B]),T===-1&&k.length===p&&(T=B+1),I===-1&&k.length===g&&(I=B+1);if(T===-1)throw new Tu(`Failed to find start index for decoration ${JSON.stringify(b.start)}`);if(I===-1)throw new Tu(`Failed to find end index for decoration ${JSON.stringify(b.end)}`);const M=x.children.slice(T,I);if(!b.alwaysWrap&&M.length===x.children.length)a(x,b,"line");else if(!b.alwaysWrap&&M.length===1&&M[0].type==="element")a(M[0],b,"token");else{const B={type:"element",tagName:"span",properties:{},children:M};a(B,b,"wrapper"),x.children.splice(T,M.length,B)}}function o(f,p){i[f]=a(i[f],p,"line")}function a(f,p,g){const b=p.properties||{},x=p.transform||(k=>k);return f.tagName=p.tagName||"span",f.properties={...f.properties,...b,class:f.properties.class},p.properties?.class&&lae(f,p.properties.class),f=x(f,g)||f,f}const l=[],h=r.decorations.sort((f,p)=>p.start.offset-f.start.offset);for(const f of h){const{start:p,end:g}=f;if(p.line===g.line)s(p.line,p.character,g.character,f);else if(p.line<g.line){s(p.line,p.character,Number.POSITIVE_INFINITY,f);for(let b=p.line+1;b<g.line;b++)l.unshift(()=>o(b,f));s(g.line,0,g.character,f)}}l.forEach(f=>f())}}}function XMe(t){for(let e=0;e<t.length;e++){const n=t[e];if(n.start.offset>n.end.offset)throw new Tu(`Invalid decoration range: ${JSON.stringify(n.start)} - ${JSON.stringify(n.end)}`);for(let r=e+1;r<t.length;r++){const i=t[r],s=n.start.offset<i.start.offset&&i.start.offset<n.end.offset,o=n.start.offset<i.end.offset&&i.end.offset<n.end.offset,a=i.start.offset<n.start.offset&&n.start.offset<i.end.offset,l=i.start.offset<n.end.offset&&n.end.offset<i.end.offset;if(s||o||a||l){if(o&&o||a&&l)continue;throw new Tu(`Decorations ${JSON.stringify(n.start)} and ${JSON.stringify(i.start)} intersect.`)}}}}function fae(t){return t.type==="text"?t.value:t.type==="element"?t.children.map(fae).join(""):""}const WMe=[ZMe()];function V6(t){return[...t.transformers||[],...WMe]}var ib=["black","red","green","yellow","blue","magenta","cyan","white","brightBlack","brightRed","brightGreen","brightYellow","brightBlue","brightMagenta","brightCyan","brightWhite"],kR={1:"bold",2:"dim",3:"italic",4:"underline",7:"reverse",9:"strikethrough"};function GMe(t,e){const n=t.indexOf("\x1B[",e);if(n!==-1){const r=t.indexOf("m",n);return{sequence:t.substring(n+2,r).split(";"),startPosition:n,position:r+1}}return{position:t.length}}function tX(t,e){let n=1;const r=t[e+n++];let i;if(r==="2"){const s=[t[e+n++],t[e+n++],t[e+n]].map(o=>Number.parseInt(o));s.length===3&&!s.some(o=>Number.isNaN(o))&&(i={type:"rgb",rgb:s})}else if(r==="5"){const s=Number.parseInt(t[e+n]);Number.isNaN(s)||(i={type:"table",index:Number(s)})}return[n,i]}function YMe(t){const e=[];for(let n=0;n<t.length;n++){const r=t[n],i=Number.parseInt(r);if(!Number.isNaN(i))if(i===0)e.push({type:"resetAll"});else if(i<=9)kR[i]&&e.push({type:"setDecoration",value:kR[i]});else if(i<=29){const s=kR[i-20];s&&e.push({type:"resetDecoration",value:s})}else if(i<=37)e.push({type:"setForegroundColor",value:{type:"named",name:ib[i-30]}});else if(i===38){const[s,o]=tX(t,n);o&&e.push({type:"setForegroundColor",value:o}),n+=s}else if(i===39)e.push({type:"resetForegroundColor"});else if(i<=47)e.push({type:"setBackgroundColor",value:{type:"named",name:ib[i-40]}});else if(i===48){const[s,o]=tX(t,n);o&&e.push({type:"setBackgroundColor",value:o}),n+=s}else i===49?e.push({type:"resetBackgroundColor"}):i>=90&&i<=97?e.push({type:"setForegroundColor",value:{type:"named",name:ib[i-90+8]}}):i>=100&&i<=107&&e.push({type:"setBackgroundColor",value:{type:"named",name:ib[i-100+8]}})}return e}function HMe(){let t=null,e=null,n=new Set;return{parse(r){const i=[];let s=0;do{const o=GMe(r,s),a=o.sequence?r.substring(s,o.startPosition):r.substring(s);if(a.length>0&&i.push({value:a,foreground:t,background:e,decorations:new Set(n)}),o.sequence){const l=YMe(o.sequence);for(const h of l)h.type==="resetAll"?(t=null,e=null,n.clear()):h.type==="resetForegroundColor"?t=null:h.type==="resetBackgroundColor"?e=null:h.type==="resetDecoration"&&n.delete(h.value);for(const h of l)h.type==="setForegroundColor"?t=h.value:h.type==="setBackgroundColor"?e=h.value:h.type==="setDecoration"&&n.add(h.value)}s=o.position}while(s<r.length);return i}}}var KMe={black:"#000000",red:"#bb0000",green:"#00bb00",yellow:"#bbbb00",blue:"#0000bb",magenta:"#ff00ff",cyan:"#00bbbb",white:"#eeeeee",brightBlack:"#555555",brightRed:"#ff5555",brightGreen:"#00ff00",brightYellow:"#ffff55",brightBlue:"#5555ff",brightMagenta:"#ff55ff",brightCyan:"#55ffff",brightWhite:"#ffffff"};function JMe(t=KMe){function e(a){return t[a]}function n(a){return`#${a.map(l=>Math.max(0,Math.min(l,255)).toString(16).padStart(2,"0")).join("")}`}let r;function i(){if(r)return r;r=[];for(let h=0;h<ib.length;h++)r.push(e(ib[h]));let a=[0,95,135,175,215,255];for(let h=0;h<6;h++)for(let f=0;f<6;f++)for(let p=0;p<6;p++)r.push(n([a[h],a[f],a[p]]));let l=8;for(let h=0;h<24;h++,l+=10)r.push(n([l,l,l]));return r}function s(a){return i()[a]}function o(a){switch(a.type){case"named":return e(a.name);case"rgb":return n(a.rgb);case"table":return s(a.index)}}return{value:o}}function eRe(t,e,n){const r=U6(t,n),i=RD(e),s=JMe(Object.fromEntries(ib.map(a=>[a,t.colors?.[`terminal.ansi${a[0].toUpperCase()}${a.substring(1)}`]]))),o=HMe();return i.map(a=>o.parse(a[0]).map(l=>{let h,f;l.decorations.has("reverse")?(h=l.background?s.value(l.background):t.bg,f=l.foreground?s.value(l.foreground):t.fg):(h=l.foreground?s.value(l.foreground):t.fg,f=l.background?s.value(l.background):void 0),h=rb(h,r),f=rb(f,r),l.decorations.has("dim")&&(h=tRe(h));let p=Qg.None;return l.decorations.has("bold")&&(p|=Qg.Bold),l.decorations.has("italic")&&(p|=Qg.Italic),l.decorations.has("underline")&&(p|=Qg.Underline),{content:l.value,offset:a[1],color:h,bgColor:f,fontStyle:p}}))}function tRe(t){const e=t.match(/#([0-9a-f]{3})([0-9a-f]{3})?([0-9a-f]{2})?/);if(e)if(e[3]){const r=Math.round(Number.parseInt(e[3],16)/2).toString(16).padStart(2,"0");return`#${e[1]}${e[2]}${r}`}else return e[2]?`#${e[1]}${e[2]}80`:`#${Array.from(e[1]).map(r=>`${r}${r}`).join("")}80`;const n=t.match(/var\((--[\w-]+-ansi-[\w-]+)\)/);return n?`var(${n[1]}-dim)`:t}function HN(t,e,n={}){const{lang:r="text",theme:i=t.getLoadedThemes()[0]}=n;if(GN(r)||YN(i))return RD(e).map(l=>[{content:l[0],offset:l[1]}]);const{theme:s,colorMap:o}=t.setTheme(i);if(r==="ansi")return eRe(s,e,n);const a=t.getLanguage(r);if(n.grammarState){if(n.grammarState.lang!==a.name)throw new _b(`Grammar state language "${n.grammarState.lang}" does not match highlight language "${a.name}"`);if(!n.grammarState.themes.includes(s.name))throw new _b(`Grammar state themes "${n.grammarState.themes}" do not contain highlight theme "${s.name}"`)}return rRe(e,a,s,o,n)}function nRe(...t){if(t.length===2)return Kk(t[1]);const[e,n,r={}]=t,{lang:i="text",theme:s=e.getLoadedThemes()[0]}=r;if(GN(i)||YN(s))throw new _b("Plain language does not have grammar state");if(i==="ansi")throw new _b("ANSI language does not have grammar state");const{theme:o,colorMap:a}=e.setTheme(s),l=e.getLanguage(i);return new rO(q6(n,l,o,a,r).stateStack,l.name,o.name)}function rRe(t,e,n,r,i){const s=q6(t,e,n,r,i),o=new rO(q6(t,e,n,r,i).stateStack,e.name,n.name);return FD(s.tokens,o),s.tokens}function q6(t,e,n,r,i){const s=U6(n,i),{tokenizeMaxLineLength:o=0,tokenizeTimeLimit:a=500}=i,l=RD(t);let h=i.grammarState?qMe(i.grammarState,n.name)??F9:i.grammarContextCode!=null?q6(i.grammarContextCode,e,n,r,{...i,grammarState:void 0,grammarContextCode:void 0}).stateStack:F9,f=[];const p=[];for(let g=0,b=l.length;g<b;g++){const[x,k]=l[g];if(x===""){f=[],p.push([]);continue}if(o>0&&x.length>=o){f=[],p.push([{content:x,offset:k,color:"",fontStyle:0}]);continue}let T,I,M;i.includeExplanation&&(T=e.tokenizeLine(x,h),I=T.tokens,M=0);const B=e.tokenizeLine2(x,h,a),j=B.tokens.length/2;for(let Q=0;Q<j;Q++){const Z=B.tokens[2*Q],q=Q+1<j?B.tokens[2*Q+2]:x.length;if(Z===q)continue;const J=B.tokens[2*Q+1],oe=rb(r[b2.getForeground(J)],s),me=b2.getFontStyle(J),ae={content:x.substring(Z,q),offset:k+Z,color:oe,fontStyle:me};if(i.includeExplanation){const ce=[];if(i.includeExplanation!=="scopeName")for(const ge of n.settings){let xe;switch(typeof ge.scope){case"string":xe=ge.scope.split(/,/).map(Se=>Se.trim());break;case"object":xe=ge.scope;break;default:continue}ce.push({settings:ge,selectors:xe.map(Se=>Se.split(/ /))})}ae.explanation=[];let se=0;for(;Z+se<q;){const ge=I[M],xe=x.substring(ge.startIndex,ge.endIndex);se+=xe.length,ae.explanation.push({content:xe,scopes:i.includeExplanation==="scopeName"?iRe(ge.scopes):sRe(ce,ge.scopes)}),M+=1}}f.push(ae)}p.push(f),f=[],h=B.ruleStack}return{tokens:p,stateStack:h}}function iRe(t){return t.map(e=>({scopeName:e}))}function sRe(t,e){const n=[];for(let r=0,i=e.length;r<i;r++){const s=e[r];n[r]={scopeName:s,themeMatches:aRe(t,s,e.slice(0,r))}}return n}function nX(t,e){return t===e||e.substring(0,t.length)===t&&e[t.length]==="."}function oRe(t,e,n){if(!nX(t[t.length-1],e))return!1;let r=t.length-2,i=n.length-1;for(;r>=0&&i>=0;)nX(t[r],n[i])&&(r-=1),i-=1;return r===-1}function aRe(t,e,n){const r=[];for(const{selectors:i,settings:s}of t)for(const o of i)if(oRe(o,e,n)){r.push(s);break}return r}function dae(t,e,n){const r=Object.entries(n.themes).filter(l=>l[1]).map(l=>({color:l[0],theme:l[1]})),i=r.map(l=>{const h=HN(t,e,{...n,theme:l.theme}),f=Kk(h),p=typeof l.theme=="string"?l.theme:l.theme.name;return{tokens:h,state:f,theme:p}}),s=lRe(...i.map(l=>l.tokens)),o=s[0].map((l,h)=>l.map((f,p)=>{const g={content:f.content,variants:{},offset:f.offset};return"includeExplanation"in n&&n.includeExplanation&&(g.explanation=f.explanation),s.forEach((b,x)=>{const{content:k,explanation:T,offset:I,...M}=b[h][p];g.variants[r[x].color]=M}),g})),a=i[0].state?new rO(Object.fromEntries(i.map(l=>[l.theme,l.state?.getInternalStack(l.theme)])),i[0].state.lang):void 0;return a&&FD(o,a),o}function lRe(...t){const e=t.map(()=>[]),n=t.length;for(let r=0;r<t[0].length;r++){const i=t.map(l=>l[r]),s=e.map(()=>[]);e.forEach((l,h)=>l.push(s[h]));const o=i.map(()=>0),a=i.map(l=>l[0]);for(;a.every(l=>l);){const l=Math.min(...a.map(h=>h.content.length));for(let h=0;h<n;h++){const f=a[h];f.content.length===l?(s[h].push(f),o[h]+=1,a[h]=i[h][o[h]]):(s[h].push({...f,content:f.content.slice(0,l)}),a[h]={...f,content:f.content.slice(l),offset:f.offset+l})}}}return e}function Z6(t,e,n){let r,i,s,o,a,l;if("themes"in n){const{defaultColor:h="light",cssVariablePrefix:f="--shiki-"}=n,p=Object.entries(n.themes).filter(T=>T[1]).map(T=>({color:T[0],theme:T[1]})).sort((T,I)=>T.color===h?-1:I.color===h?1:0);if(p.length===0)throw new _b("`themes` option must not be empty");const g=dae(t,e,n);if(l=Kk(g),h&&!p.find(T=>T.color===h))throw new _b(`\`themes\` option must contain the defaultColor key \`${h}\``);const b=p.map(T=>t.getTheme(T.theme)),x=p.map(T=>T.color);s=g.map(T=>T.map(I=>uRe(I,x,f,h))),l&&FD(s,l);const k=p.map(T=>U6(T.theme,n));i=p.map((T,I)=>(I===0&&h?"":`${f+T.color}:`)+(rb(b[I].fg,k[I])||"inherit")).join(";"),r=p.map((T,I)=>(I===0&&h?"":`${f+T.color}-bg:`)+(rb(b[I].bg,k[I])||"inherit")).join(";"),o=`shiki-themes ${b.map(T=>T.name).join(" ")}`,a=h?void 0:[i,r].join(";")}else if("theme"in n){const h=U6(n.theme,n);s=HN(t,e,n);const f=t.getTheme(n.theme);r=rb(f.bg,h),i=rb(f.fg,h),o=f.name,l=Kk(s)}else throw new _b("Invalid options, either `theme` or `themes` must be provided");return{tokens:s,fg:i,bg:r,themeName:o,rootStyle:a,grammarState:l}}function uRe(t,e,n,r){const i={content:t.content,explanation:t.explanation,offset:t.offset},s=e.map(l=>cae(t.variants[l])),o=new Set(s.flatMap(l=>Object.keys(l))),a={};return s.forEach((l,h)=>{for(const f of o){const p=l[f]||"inherit";if(h===0&&r)a[f]=p;else{const g=f==="color"?"":f==="background-color"?"-bg":`-${f}`,b=n+e[h]+(f==="color"?"":g);a[b]=p}}}),i.htmlStyle=a,i}function X6(t,e,n,r={meta:{},options:n,codeToHast:(i,s)=>X6(t,i,s),codeToTokens:(i,s)=>Z6(t,i,s)}){let i=e;for(const b of V6(n))i=b.preprocess?.call(r,i,n)||i;let{tokens:s,fg:o,bg:a,themeName:l,rootStyle:h,grammarState:f}=Z6(t,i,n);const{mergeWhitespaces:p=!0}=n;p===!0?s=hRe(s):p==="never"&&(s=fRe(s));const g={...r,get source(){return i}};for(const b of V6(n))s=b.tokens?.call(g,s)||s;return cRe(s,{...n,fg:o,bg:a,themeName:l,rootStyle:h},g,f)}function cRe(t,e,n,r=Kk(t)){const i=V6(e),s=[],o={type:"root",children:[]},{structure:a="classic",tabindex:l="0"}=e;let h={type:"element",tagName:"pre",properties:{class:`shiki ${e.themeName||""}`,style:e.rootStyle||`background-color:${e.bg};color:${e.fg}`,...l!==!1&&l!=null?{tabindex:l.toString()}:{},...Object.fromEntries(Array.from(Object.entries(e.meta||{})).filter(([x])=>!x.startsWith("_")))},children:[]},f={type:"element",tagName:"code",properties:{},children:s};const p=[],g={...n,structure:a,addClassToHast:lae,get source(){return n.source},get tokens(){return t},get options(){return e},get root(){return o},get pre(){return h},get code(){return f},get lines(){return p}};if(t.forEach((x,k)=>{k&&(a==="inline"?o.children.push({type:"element",tagName:"br",properties:{},children:[]}):a==="classic"&&s.push({type:"text",value:`
`}));let T={type:"element",tagName:"span",properties:{class:"line"},children:[]},I=0;for(const M of x){let B={type:"element",tagName:"span",properties:{...M.htmlAttrs},children:[{type:"text",value:M.content}]};M.htmlStyle;const j=UMe(M.htmlStyle||cae(M));j&&(B.properties.style=j);for(const Q of i)B=Q?.span?.call(g,B,k+1,I,T,M)||B;a==="inline"?o.children.push(B):a==="classic"&&T.children.push(B),I+=M.content.length}if(a==="classic"){for(const M of i)T=M?.line?.call(g,T,k+1)||T;p.push(T),s.push(T)}}),a==="classic"){for(const x of i)f=x?.code?.call(g,f)||f;h.children.push(f);for(const x of i)h=x?.pre?.call(g,h)||h;o.children.push(h)}let b=o;for(const x of i)b=x?.root?.call(g,b)||b;return r&&FD(b,r),b}function hRe(t){return t.map(e=>{const n=[];let r="",i=0;return e.forEach((s,o)=>{const l=!(s.fontStyle&&s.fontStyle&Qg.Underline);l&&s.content.match(/^\s+$/)&&e[o+1]?(i||(i=s.offset),r+=s.content):r?(l?n.push({...s,offset:i,content:r+s.content}):n.push({content:r,offset:i},s),i=0,r=""):n.push(s)}),n})}function fRe(t){return t.map(e=>e.flatMap(n=>{if(n.content.match(/^\s+$/))return n;const r=n.content.match(/^(\s*)(.*?)(\s*)$/);if(!r)return n;const[,i,s,o]=r;if(!i&&!o)return n;const a=[{...n,offset:n.offset+i.length,content:s}];return i&&a.unshift({content:i,offset:n.offset}),o&&a.push({content:o,offset:n.offset+i.length+s.length}),a}))}function dRe(t,e,n){const r={meta:{},options:n,codeToHast:(s,o)=>X6(t,s,o),codeToTokens:(s,o)=>Z6(t,s,o)};let i=FMe(X6(t,e,n,r));for(const s of V6(n))i=s.postprocess?.call(r,i,n)||i;return i}const rX={light:"#333333",dark:"#bbbbbb"},iX={light:"#fffffe",dark:"#1e1e1e"},sX="__shiki_resolved";function KN(t){if(t?.[sX])return t;const e={...t};e.tokenColors&&!e.settings&&(e.settings=e.tokenColors,delete e.tokenColors),e.type||="dark",e.colorReplacements={...e.colorReplacements},e.settings||=[];let{bg:n,fg:r}=e;if(!n||!r){const a=e.settings?e.settings.find(l=>!l.name&&!l.scope):void 0;a?.settings?.foreground&&(r=a.settings.foreground),a?.settings?.background&&(n=a.settings.background),!r&&e?.colors?.["editor.foreground"]&&(r=e.colors["editor.foreground"]),!n&&e?.colors?.["editor.background"]&&(n=e.colors["editor.background"]),r||(r=e.type==="light"?rX.light:rX.dark),n||(n=e.type==="light"?iX.light:iX.dark),e.fg=r,e.bg=n}e.settings[0]&&e.settings[0].settings&&!e.settings[0].scope||e.settings.unshift({settings:{foreground:e.fg,background:e.bg}});let i=0;const s=new Map;function o(a){if(s.has(a))return s.get(a);i+=1;const l=`#${i.toString(16).padStart(8,"0").toLowerCase()}`;return e.colorReplacements?.[`#${l}`]?o(a):(s.set(a,l),l)}e.settings=e.settings.map(a=>{const l=a.settings?.foreground&&!a.settings.foreground.startsWith("#"),h=a.settings?.background&&!a.settings.background.startsWith("#");if(!l&&!h)return a;const f={...a,settings:{...a.settings}};if(l){const p=o(a.settings.foreground);e.colorReplacements[p]=a.settings.foreground,f.settings.foreground=p}if(h){const p=o(a.settings.background);e.colorReplacements[p]=a.settings.background,f.settings.background=p}return f});for(const a of Object.keys(e.colors||{}))if((a==="editor.foreground"||a==="editor.background"||a.startsWith("terminal.ansi"))&&!e.colors[a]?.startsWith("#")){const l=o(e.colors[a]);e.colorReplacements[l]=e.colors[a],e.colors[a]=l}return Object.defineProperty(e,sX,{enumerable:!1,writable:!1,value:!0}),e}async function pae(t){return Array.from(new Set((await Promise.all(t.filter(e=>!NMe(e)).map(async e=>await uae(e).then(n=>Array.isArray(n)?n:[n])))).flat()))}async function mae(t){return(await Promise.all(t.map(async n=>zMe(n)?null:KN(await uae(n))))).filter(n=>!!n)}class pRe extends x8e{constructor(e,n,r,i={}){super(e),this._resolver=e,this._themes=n,this._langs=r,this._alias=i,this._themes.map(s=>this.loadTheme(s)),this.loadLanguages(this._langs)}_resolvedThemes=new Map;_resolvedGrammars=new Map;_langMap=new Map;_langGraph=new Map;_textmateThemeCache=new WeakMap;_loadedThemesCache=null;_loadedLanguagesCache=null;getTheme(e){return typeof e=="string"?this._resolvedThemes.get(e):this.loadTheme(e)}loadTheme(e){const n=KN(e);return n.name&&(this._resolvedThemes.set(n.name,n),this._loadedThemesCache=null),n}getLoadedThemes(){return this._loadedThemesCache||(this._loadedThemesCache=[...this._resolvedThemes.keys()]),this._loadedThemesCache}setTheme(e){let n=this._textmateThemeCache.get(e);n||(n=B6.createFromRawTheme(e),this._textmateThemeCache.set(e,n)),this._syncRegistry.setTheme(n)}getGrammar(e){if(this._alias[e]){const n=new Set([e]);for(;this._alias[e];){if(e=this._alias[e],n.has(e))throw new Tu(`Circular alias \`${Array.from(n).join(" -> ")} -> ${e}\``);n.add(e)}}return this._resolvedGrammars.get(e)}loadLanguage(e){if(this.getGrammar(e.name))return;const n=new Set([...this._langMap.values()].filter(s=>s.embeddedLangsLazy?.includes(e.name)));this._resolver.addLanguage(e);const r={balancedBracketSelectors:e.balancedBracketSelectors||["*"],unbalancedBracketSelectors:e.unbalancedBracketSelectors||[]};this._syncRegistry._rawGrammars.set(e.scopeName,e);const i=this.loadGrammarWithConfiguration(e.scopeName,1,r);if(i.name=e.name,this._resolvedGrammars.set(e.name,i),e.aliases&&e.aliases.forEach(s=>{this._alias[s]=e.name}),this._loadedLanguagesCache=null,n.size)for(const s of n)this._resolvedGrammars.delete(s.name),this._loadedLanguagesCache=null,this._syncRegistry?._injectionGrammars?.delete(s.scopeName),this._syncRegistry?._grammars?.delete(s.scopeName),this.loadLanguage(this._langMap.get(s.name))}dispose(){super.dispose(),this._resolvedThemes.clear(),this._resolvedGrammars.clear(),this._langMap.clear(),this._langGraph.clear(),this._loadedThemesCache=null}loadLanguages(e){for(const i of e)this.resolveEmbeddedLanguages(i);const n=Array.from(this._langGraph.entries()),r=n.filter(([i,s])=>!s);if(r.length){const i=n.filter(([s,o])=>o&&o.embeddedLangs?.some(a=>r.map(([l])=>l).includes(a))).filter(s=>!r.includes(s));throw new Tu(`Missing languages ${r.map(([s])=>`\`${s}\``).join(", ")}, required by ${i.map(([s])=>`\`${s}\``).join(", ")}`)}for(const[i,s]of n)this._resolver.addLanguage(s);for(const[i,s]of n)this.loadLanguage(s)}getLoadedLanguages(){return this._loadedLanguagesCache||(this._loadedLanguagesCache=[...new Set([...this._resolvedGrammars.keys(),...Object.keys(this._alias)])]),this._loadedLanguagesCache}resolveEmbeddedLanguages(e){if(this._langMap.set(e.name,e),this._langGraph.set(e.name,e),e.embeddedLangs)for(const n of e.embeddedLangs)this._langGraph.set(n,this._langMap.get(n))}}class mRe{_langs=new Map;_scopeToLang=new Map;_injections=new Map;_onigLib;constructor(e,n){this._onigLib={createOnigScanner:r=>e.createScanner(r),createOnigString:r=>e.createString(r)},n.forEach(r=>this.addLanguage(r))}get onigLib(){return this._onigLib}getLangRegistration(e){return this._langs.get(e)}loadGrammar(e){return this._scopeToLang.get(e)}addLanguage(e){this._langs.set(e.name,e),e.aliases&&e.aliases.forEach(n=>{this._langs.set(n,e)}),this._scopeToLang.set(e.scopeName,e),e.injectTo&&e.injectTo.forEach(n=>{this._injections.get(n)||this._injections.set(n,[]),this._injections.get(n).push(e.scopeName)})}getInjections(e){const n=e.split(".");let r=[];for(let i=1;i<=n.length;i++){const s=n.slice(0,i).join(".");r=[...r,...this._injections.get(s)||[]]}return r}}let QS=0;function gRe(t){QS+=1,t.warnings!==!1&&QS>=10&&QS%10===0&&console.warn(`[Shiki] ${QS} instances have been created. Shiki is supposed to be used as a singleton, consider refactoring your code to cache your highlighter instance; Or call \`highlighter.dispose()\` to release unused instances.`);let e=!1;if(!t.engine)throw new Tu("`engine` option is required for synchronous mode");const n=(t.langs||[]).flat(1),r=(t.themes||[]).flat(1).map(KN),i=new mRe(t.engine,n),s=new pRe(i,r,n,t.langAlias);let o;function a(M){T();const B=s.getGrammar(typeof M=="string"?M:M.name);if(!B)throw new Tu(`Language \`${M}\` not found, you may need to load it first`);return B}function l(M){if(M==="none")return{bg:"",fg:"",name:"none",settings:[],type:"dark"};T();const B=s.getTheme(M);if(!B)throw new Tu(`Theme \`${M}\` not found, you may need to load it first`);return B}function h(M){T();const B=l(M);o!==M&&(s.setTheme(B),o=M);const j=s.getColorMap();return{theme:B,colorMap:j}}function f(){return T(),s.getLoadedThemes()}function p(){return T(),s.getLoadedLanguages()}function g(...M){T(),s.loadLanguages(M.flat(1))}async function b(...M){return g(await pae(M))}function x(...M){T();for(const B of M.flat(1))s.loadTheme(B)}async function k(...M){return T(),x(await mae(M))}function T(){if(e)throw new Tu("Shiki instance has been disposed")}function I(){e||(e=!0,s.dispose(),QS-=1)}return{setTheme:h,getTheme:l,getLanguage:a,getLoadedThemes:f,getLoadedLanguages:p,loadLanguage:b,loadLanguageSync:g,loadTheme:k,loadThemeSync:x,dispose:I,[Symbol.dispose]:I}}async function yRe(t={}){t.loadWasm;const[e,n,r]=await Promise.all([mae(t.themes||[]),pae(t.langs||[]),t.engine||FIe(t.loadWasm||RIe())]);return gRe({...t,themes:e,langs:n,engine:r})}async function vRe(t={}){const e=await yRe(t);return{getLastGrammarState:(...n)=>nRe(e,...n),codeToTokensBase:(n,r)=>HN(e,n,r),codeToTokensWithThemes:(n,r)=>dae(e,n,r),codeToTokens:(n,r)=>Z6(e,n,r),codeToHast:(n,r)=>X6(e,n,r),codeToHtml:(n,r)=>dRe(e,n,r),...e,getInternalContext:()=>e}}const z9=Of({linkify:!0,typographer:!0});(async()=>{const t=await vRe({themes:[cR(()=>import("./vitesse-light-CVO1_9PV.js"),[],import.meta.url),cR(()=>import("./vitesse-dark-D0r3Knsf.js"),[],import.meta.url)],langs:[cR(()=>import("./javascript-ySlJ1b_l.js"),[],import.meta.url)]});z9.use(gIe(t,{themes:{light:"vitesse-light",dark:"vitesse-dark"}}))})();function Ew(t,e=!0){return e?z9.renderInline(t):z9.render(t)}const bRe=w0({String:be.string,Number:be.number,"True False":be.bool,PropertyName:be.propertyName,Null:be.null,", :":be.separator,"[ ]":be.squareBracket,"{ }":be.brace}),_Re=c0.deserialize({version:14,states:"$bOVQPOOOOQO'#Cb'#CbOnQPO'#CeOvQPO'#ClOOQO'#Cr'#CrQOQPOOOOQO'#Cg'#CgO}QPO'#CfO!SQPO'#CtOOQO,59P,59PO![QPO,59PO!aQPO'#CuOOQO,59W,59WO!iQPO,59WOVQPO,59QOqQPO'#CmO!nQPO,59`OOQO1G.k1G.kOVQPO'#CnO!vQPO,59aOOQO1G.r1G.rOOQO1G.l1G.lOOQO,59X,59XOOQO-E6k-E6kOOQO,59Y,59YOOQO-E6l-E6l",stateData:"#O~OeOS~OQSORSOSSOTSOWQO_ROgPO~OVXOgUO~O^[O~PVO[^O~O]_OVhX~OVaO~O]bO^iX~O^dO~O]_OVha~O]bO^ia~O",goto:"!kjPPPPPPkPPkqwPPPPk{!RPPP!XP!e!hXSOR^bQWQRf_TVQ_Q`WRg`QcZRicQTOQZRQe^RhbRYQR]R",nodeNames:"â  JsonText True False Null Number String } { Object Property PropertyName : , ] [ Array",maxTerm:25,nodeProps:[["isolate",-2,6,11,""],["openedBy",7,"{",14,"["],["closedBy",8,"}",15,"]"]],propSources:[bRe],skippedNodes:[0],repeatNodeCount:2,tokenData:"(|~RaXY!WYZ!W]^!Wpq!Wrs!]|}$u}!O$z!Q!R%T!R![&c![!]&t!}#O&y#P#Q'O#Y#Z'T#b#c'r#h#i(Z#o#p(r#q#r(w~!]Oe~~!`Wpq!]qr!]rs!xs#O!]#O#P!}#P;'S!];'S;=`$o<%lO!]~!}Og~~#QXrs!]!P!Q!]#O#P!]#U#V!]#Y#Z!]#b#c!]#f#g!]#h#i!]#i#j#m~#pR!Q![#y!c!i#y#T#Z#y~#|R!Q![$V!c!i$V#T#Z$V~$YR!Q![$c!c!i$c#T#Z$c~$fR!Q![!]!c!i!]#T#Z!]~$rP;=`<%l!]~$zO]~~$}Q!Q!R%T!R![&c~%YRT~!O!P%c!g!h%w#X#Y%w~%fP!Q![%i~%nRT~!Q![%i!g!h%w#X#Y%w~%zR{|&T}!O&T!Q![&Z~&WP!Q![&Z~&`PT~!Q![&Z~&hST~!O!P%c!Q![&c!g!h%w#X#Y%w~&yO[~~'OO_~~'TO^~~'WP#T#U'Z~'^P#`#a'a~'dP#g#h'g~'jP#X#Y'm~'rOR~~'uP#i#j'x~'{P#`#a(O~(RP#`#a(U~(ZOS~~(^P#f#g(a~(dP#i#j(g~(jP#X#Y(m~(rOQ~~(wOW~~(|OV~",tokenizers:[0],topRules:{JsonText:[0,1]},tokenPrec:0}),xRe=()=>t=>{try{JSON.parse(t.state.doc.toString())}catch(e){if(!(e instanceof SyntaxError))throw e;const n=wRe(e,t.state.doc);return[{from:n,message:e.message,severity:"error",to:n}]}return[]};function wRe(t,e){let n;return(n=t.message.match(/at position (\d+)/))?Math.min(+n[1],e.length):(n=t.message.match(/at line (\d+) column (\d+)/))?Math.min(e.line(+n[1]).from+ +n[2]-1,e.length):0}const gae=u0.define({name:"json",parser:_Re.configure({props:[S1.add({Object:Kg({except:/^\s*\}/}),Array:Kg({except:/^\s*\]/})}),k1.add({"Object Array":bD})]}),languageData:{closeBrackets:{brackets:["[","{",'"']},indentOnInput:/^\s*[\}\]]$/}});function ORe(){return new y1(gae)}var CR={},oX;function SRe(){return oX||(oX=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.parse=t.enableErrorLogging=t.disableErrorLogging=t.setErrorLogger=void 0;let e=console.error;function n(q){e=q}t.setErrorLogger=n;function r(){e=()=>{}}t.disableErrorLogging=r;function i(){e=console.error}t.enableErrorLogging=i;function s(q){if(q!==void 0){if(q===null)return null;if(q==="")return"";q=q.replace(/\\+$/,J=>J.length%2===0?J:J.slice(0,-1));try{return JSON.parse(q)}catch(J){const[oe,me]=q.trimLeft()[0]===":"?o(q,J):o(q,J,I);if(s.lastParseReminding=me,s.onExtraToken&&me.length>0){const ae=me.trimRight();s.lastParseReminding=ae,ae.length>0&&s.onExtraToken(q,oe,ae)}return oe}}}t.parse=s,(function(q){q.onExtraToken=(J,oe,me)=>{e("parsed json with extra tokens:",{text:J,data:oe,reminding:me})}})(s=t.parse||(t.parse={}));function o(q,J,oe){const me=l[q[0]]||oe;if(!me)throw e(`no parser registered for ${JSON.stringify(q[0])}:`,{s:q}),J;return me(q,J)}function a(q,J,oe){return q[0]==='"'?x(q):q[0]==="'"?T(q):I(q,J,oe)}const l={};function h(q){return q.trimLeft()}l[" "]=f,l["\r"]=f,l[`
`]=f,l["	"]=f;function f(q,J){return q=h(q),o(q,J)}l["["]=p;function p(q,J){q=q.substr(1);const oe=[];for(q=h(q);q.length>0;){if(q[0]==="]"){q=q.substr(1);break}const me=o(q,J,(ae,ce)=>I(ae,ce,[",","]"]));oe.push(me[0]),q=me[1],q=h(q),q[0]===","&&(q=q.substring(1),q=h(q))}return[oe,q]}for(const q of"0123456789.-".slice())l[q]=g;function g(q){for(let J=0;J<q.length;J++){const oe=q[J];if(l[oe]===g)continue;const me=q.substring(0,J);return q=q.substring(J),[b(me),q]}return[b(q),""]}function b(q){if(q==="-")return-0;const J=+q;return Number.isNaN(J)?q:J}l['"']=x;function x(q){for(let J=1;J<q.length;J++){const oe=q[J];if(oe==="\\"){J++;continue}if(oe==='"'){const me=k(q.substring(0,J+1));return q=q.substring(J+1),[JSON.parse(me),q]}}return[JSON.parse(k(q)+'"'),""]}function k(q){return q.replace(/\n/g,"\\n").replace(/\t/g,"\\t").replace(/\r/g,"\\r")}l["'"]=T;function T(q){for(let J=1;J<q.length;J++){const oe=q[J];if(oe==="\\"){J++;continue}if(oe==="'"){const me=k(q.substring(0,J+1));return q=q.substring(J+1),[JSON.parse('"'+me.slice(1,-1)+'"'),q]}}return[JSON.parse('"'+k(q.slice(1))+'"'),""]}function I(q,J,oe=[" "]){const me=Math.min(...oe.map(se=>{const ge=q.indexOf(se);return ge===-1?q.length:ge})),ae=q.substring(0,me).trim(),ce=q.substring(me);return[ae,ce]}l["{"]=M;function M(q,J){q=q.substr(1);const oe={};for(q=h(q);q.length>0;){if(q[0]==="}"){q=q.substr(1);break}const me=a(q,J,[":","}"]),ae=me[0];if(q=me[1],q=h(q),q[0]!==":"){oe[ae]=void 0;break}if(q=q.substr(1),q=h(q),q.length===0){oe[ae]=void 0;break}const ce=o(q,J);oe[ae]=ce[0],q=ce[1],q=h(q),q[0]===","&&(q=q.substr(1),q=h(q))}return[oe,q]}l.t=B;function B(q,J){return Z(q,"true",!0,J)}l.f=j;function j(q,J){return Z(q,"false",!1,J)}l.n=Q;function Q(q,J){return Z(q,"null",null,J)}function Z(q,J,oe,me){for(let ae=J.length;ae>=1;ae--)if(q.startsWith(J.slice(0,ae)))return[oe,q.slice(ae)];{const ae=JSON.stringify(q.slice(0,J.length));throw e(`unknown token starting with ${ae}:`,{s:q}),me}}})(CR)),CR}var yae=SRe();function kRe(t){let e=null;try{e=JSON.parse(t.doc.toString())}catch{try{e=yae.parse(t.doc.toString())}catch{}}const n=EN(t,Ws.JSON);return{data:e,pointers:n}}const CRe=c0.deserialize({version:14,states:"%WO`QPOOOwQQO'#CbO!SQPO'#ChOOQO'#Cj'#CjOOQO'#Ct'#CtQOQPOOOOQO'#Cd'#CdO!ZQPO'#CcOOQO,58|,58|O!`QPO,58|OOQO,59S,59SO!hQPO,59SO`QPO,58}O!pQQO1G.hO!{QPO1G.hOOQO1G.h1G.hO#TQPO1G.nO#[QPO1G.nOOQO1G.n1G.nOOQO1G.i1G.iOOQO,59Y,59YOOQO7+$S7+$SO#dQQO7+$SOOQO-E6l-E6lOOQO,59Z,59ZOOQO7+$Y7+$YO#oQPO7+$YOOQO-E6m-E6mOOQO<<Gn<<GnPzQQO'#CnOOQO<<Gt<<GtP`QPO'#Co",stateData:"#x~OPOSQOSfOSgOS~OTPOZQO]SO_SO`SOaSOiRO~OSWOiUOjUO~OYYO~P`OX[O~OS_Ok]O~OYbOk`O~OSeOiUOjUO~OSeOkfO~OYiO~P`OYiOkjO~OSlOiUOjUO~OYnO~P`Oj~",goto:"!liPPPPPPjrzPPPjPjPPP!Q!WPPPP!^]SOQ[`joQXPVd]fmXVP]fmQ^XRg^QaZRkaQTOQZQQc[Vh`jo",nodeNames:"â  LineComment BlockComment File } { Object Property PropertyName PropertyColon ] [ Array Number String Null True False",maxTerm:27,nodeProps:[["openedBy",4,"{",10,"["],["closedBy",5,"}",11,"]"]],skippedNodes:[0,1,2],repeatNodeCount:2,tokenData:">X~R!TXY$bYZ%YZ[$b[]$b]^%Ypq$brs%_tu&owx'W{|(c|},O}!O(c!O!P(r!P!Q,T!Q!R)l!R![*l![!]-d!c!k&o!k!l-i!l!p&o!p!q2g!q!}&o!}#O3p#P#Q3u#R#S&o#T#Y&o#Y#Z3z#Z#b&o#b#c6z#c#h&o#h#i9`#i#o&o#o#p;t#q#r;y$f$g$b$g#BY&o#BY#BZ<O#BZ$IS&o$IS$I_<O$I_$I|&o$I|$I}=n$I}$JO=n$JO$JT&o$JT$JU<O$JU$KV&o$KV$KW<O$KW&FU&o&FU&FV<O&FV?HT&o?HT?HU<O?HU~&o~$gZf~XY$bZ[$b[]$bpq$b$f$g$b#BY#BZ$b$IS$I_$b$JT$JU$b$KV$KW$b&FU&FV$b?HT?HU$b~%_Og~~%bTOr%_rs%qs#O%_#O#P%v#P~%_~%vOi~~%y[YZ%_]^%_rs%_#O#P%_#U#V%_#Y#Z%_#b#c%_#f#g%_#h#i%_#j#k%_$I|$I}%_$I}$JO%_Q&tUjQtu&o!Q![&o!c!}&o#R#S&o#T#o&o$g~&o~'ZTOw'Wwx%qx#O'W#O#P'j#P~'W~'m[YZ'W]^'Wwx'W#O#P'W#U#V'W#Y#Z'W#b#c'W#f#g'W#h#i'W#j#k'W$I|$I}'W$I}$JO'WP(fS!O!P(r!Q!R)l!R![*l!k!l*}P(wR]P!Q![(r!g!h)Q#X#Y)QP)TR{|)^}!O)^!Q![)dP)aP!Q![)dP)iP]P!Q![)dP)qT]P!O!P(r!g!h)Q!z!{*Q#X#Y)Q#l#m*QP*TR!Q![*^!c!i*^#T#Z*^P*cR]P!Q![*^!c!i*^#T#Z*^P*qS]P!O!P(r!Q![*l!g!h)Q#X#Y)QP+QP#b#c+TP+WP#Y#Z+ZP+^P#]#^+aP+dP#b#c+gP+jP#]#^+mP+pP#h#i+sP+vP#m#n+yP,OO]P~,TOk~~,WQz{,^!P!Q-R~,aROz,^z{,j{~,^~,mTOz,^z{,j{!P,^!P!Q,|!Q~,^~-ROQ~~-WSP~OY-RZ]-R^$I|-R$JO~-R~-iOX~R-nWjQtu&o!Q![&o!c!}&o#R#S&o#T#b&o#b#c.W#c#o&o$g~&oR.]WjQtu&o!Q![&o!c!}&o#R#S&o#T#Y&o#Y#Z.u#Z#o&o$g~&oR.zWjQtu&o!Q![&o!c!}&o#R#S&o#T#]&o#]#^/d#^#o&o$g~&oR/iWjQtu&o!Q![&o!c!}&o#R#S&o#T#b&o#b#c0R#c#o&o$g~&oR0WWjQtu&o!Q![&o!c!}&o#R#S&o#T#]&o#]#^0p#^#o&o$g~&oR0uWjQtu&o!Q![&o!c!}&o#R#S&o#T#h&o#h#i1_#i#o&o$g~&oR1dWjQtu&o!Q![&o!c!}&o#R#S&o#T#m&o#m#n1|#n#o&o$g~&oR2TU]PjQtu&o!Q![&o!c!}&o#R#S&o#T#o&o$g~&oR2lVjQtu&o!Q![&o!c!}&o#R#S&o#T#U3R#U#o&o$g~&oR3WWjQtu&o!Q![&o!c!p&o!p!q1|!q!}&o#R#S&o#T#o&o$g~&o~3uOZ~~3zOY~R4PVjQtu&o!Q![&o!c!}&o#R#S&o#T#U4f#U#o&o$g~&oR4kWjQtu&o!Q![&o!c!}&o#R#S&o#T#`&o#`#a5T#a#o&o$g~&oR5YWjQtu&o!Q![&o!c!}&o#R#S&o#T#g&o#g#h5r#h#o&o$g~&oR5wWjQtu&o!Q![&o!c!}&o#R#S&o#T#X&o#X#Y6a#Y#o&o$g~&oR6hUaPjQtu&o!Q![&o!c!}&o#R#S&o#T#o&o$g~&oR7PWjQtu&o!Q![&o!c!}&o#R#S&o#T#i&o#i#j7i#j#o&o$g~&oR7nWjQtu&o!Q![&o!c!}&o#R#S&o#T#`&o#`#a8W#a#o&o$g~&oR8]WjQtu&o!Q![&o!c!}&o#R#S&o#T#`&o#`#a8u#a#o&o$g~&oR8|U_PjQtu&o!Q![&o!c!}&o#R#S&o#T#o&o$g~&oR9eWjQtu&o!Q![&o!c!}&o#R#S&o#T#f&o#f#g9}#g#o&o$g~&oR:SWjQtu&o!Q![&o!c!}&o#R#S&o#T#i&o#i#j:l#j#o&o$g~&oR:qWjQtu&o!Q![&o!c!}&o#R#S&o#T#X&o#X#Y;Z#Y#o&o$g~&oR;bU`PjQtu&o!Q![&o!c!}&o#R#S&o#T#o&o$g~&o~;yOT~~<OOS~~<Vgf~jQXY$bZ[$b[]$bpq$btu&o!Q![&o!c!}&o#R#S&o#T#o&o$f$g$b$g#BY&o#BY#BZ<O#BZ$IS&o$IS$I_<O$I_$JT&o$JT$JU<O$JU$KV&o$KV$KW<O$KW&FU&o&FU&FV<O&FV?HT&o?HT?HU<O?HU~&o~=uUg~jQtu&o!Q![&o!c!}&o#R#S&o#T#o&o$g~&o",tokenizers:[0,1],topRules:{File:[0,3]},tokenPrec:130});function ARe(t){let e=t[0],n=t[t.length-1];return(e==="'"&&n==="'"||e==='"'&&n==='"')&&(t=t.slice(1,-1)),t}function ERe(t,e){if(e.name!=="Property")return null;let n=e.getChild("PropertyName");return n?ARe(t.sliceDoc(n.from,n.to)):null}function TRe(t){var e;let n=(e=t.parent)===null||e===void 0?void 0:e.cursor();if(!n)return null;for(;n.node.name!=="Property"&&n.node.name!=="Array";)if(!n.parent())return null;return n.node}function PRe(t,e){let n=[];for(;;){let r=TRe(e);if(!r)break;if(r.name==="Array"){let i=e.from,s=r.firstChild,o=0;for(;s&&s.to<i;)s=DRe(s.nextSibling),o+=1;n.unshift(o)}else{let i=ERe(t,r);i&&n.unshift(i)}e=r}return n}function DRe(t){for(;t&&/Comment/.test(t.name);)t=t.nextSibling;return t}function IRe(t,e){let r=ws(t).resolveInner(e,-1);for(;r;){let i=r.childBefore(e);if(!i)break;r=i}return r}const vae=u0.define({parser:CRe.configure({props:[S1.add({Object:Kg({except:/^\s*\}/}),Array:Kg({except:/^\s*\]/})}),k1.add({"Object Array":bD}),w0({String:be.string,"PropertyName!":be.propertyName,Number:be.number,"True False":be.bool,Null:be.null,LineComment:be.lineComment,BlockComment:be.blockComment,", PropertyColon":be.separator,"[ ]":be.squareBracket,"{ }":be.brace})]}),languageData:{closeBrackets:{brackets:["[","{",'"',"'"]},indentOnInput:/^\s*[}\]]$/,commentTokens:{line:"//",block:{open:"/*",clone:"*/"}}}});function MRe(){return new y1(vae,[bae.extension,FRe.extension])}function aX(t,e){let n=0;return"lineNumber"in e&&"columnNumber"in e&&(n=Math.min(t.line(e.lineNumber).from+e.columnNumber-1,t.length)),[{from:n,to:n,message:e.message,severity:"error"}]}function RRe(t){return e=>{var n,r;let i=e.state.doc,s=e.state.field(bae,!1);if(s){if(s.err)return aX(i,s.err);if(s.obj!==void 0)return(n=void 0)!==null&&n!==void 0?n:[]}try{let o=i2.parse(i.toString());return(r=t?.(e,o))!==null&&r!==void 0?r:[]}catch(o){return aX(i,o)}}}const bae=Aa.define({create(){return null},update(t,e){if(!e.docChanged)return t;try{return{err:null,obj:i2.parse(e.newDoc.toString())}}catch(n){return{err:n,obj:t?.obj}}}}),FRe=Aa.define({create(){return{path:null,node:null}},update(t,e){let n=e.state.selection.main.to,r=IRe(e.state,n),i=r?PRe(e.state,r):null;return{path:i??null,node:r}}});function _ae(t){const e=t.doc.toString();let n=null;try{n=i2.parse(e)}catch{try{n=yae.parse(e)}catch{}}const r=EN(t,Ws.JSON5);return{data:n,pointers:r}}const JN=Symbol.for("yaml.alias"),Q9=Symbol.for("yaml.document"),Wy=Symbol.for("yaml.map"),xae=Symbol.for("yaml.pair"),dm=Symbol.for("yaml.scalar"),iO=Symbol.for("yaml.seq"),Sf=Symbol.for("yaml.node.type"),A1=t=>!!t&&typeof t=="object"&&t[Sf]===JN,c_=t=>!!t&&typeof t=="object"&&t[Sf]===Q9,sO=t=>!!t&&typeof t=="object"&&t[Sf]===Wy,ko=t=>!!t&&typeof t=="object"&&t[Sf]===xae,Ks=t=>!!t&&typeof t=="object"&&t[Sf]===dm,oO=t=>!!t&&typeof t=="object"&&t[Sf]===iO;function Fo(t){if(t&&typeof t=="object")switch(t[Sf]){case Wy:case iO:return!0}return!1}function $o(t){if(t&&typeof t=="object")switch(t[Sf]){case JN:case Wy:case dm:case iO:return!0}return!1}const wae=t=>(Ks(t)||Fo(t))&&!!t.anchor,dc=Symbol("break visit"),Oae=Symbol("skip children"),tm=Symbol("remove node");function h_(t,e){const n=Sae(e);c_(t)?Jx(null,t.contents,n,Object.freeze([t]))===tm&&(t.contents=null):Jx(null,t,n,Object.freeze([]))}h_.BREAK=dc;h_.SKIP=Oae;h_.REMOVE=tm;function Jx(t,e,n,r){const i=kae(t,e,n,r);if($o(i)||ko(i))return Cae(t,r,i),Jx(t,i,n,r);if(typeof i!="symbol"){if(Fo(e)){r=Object.freeze(r.concat(e));for(let s=0;s<e.items.length;++s){const o=Jx(s,e.items[s],n,r);if(typeof o=="number")s=o-1;else{if(o===dc)return dc;o===tm&&(e.items.splice(s,1),s-=1)}}}else if(ko(e)){r=Object.freeze(r.concat(e));const s=Jx("key",e.key,n,r);if(s===dc)return dc;s===tm&&(e.key=null);const o=Jx("value",e.value,n,r);if(o===dc)return dc;o===tm&&(e.value=null)}}return i}async function LD(t,e){const n=Sae(e);c_(t)?await ew(null,t.contents,n,Object.freeze([t]))===tm&&(t.contents=null):await ew(null,t,n,Object.freeze([]))}LD.BREAK=dc;LD.SKIP=Oae;LD.REMOVE=tm;async function ew(t,e,n,r){const i=await kae(t,e,n,r);if($o(i)||ko(i))return Cae(t,r,i),ew(t,i,n,r);if(typeof i!="symbol"){if(Fo(e)){r=Object.freeze(r.concat(e));for(let s=0;s<e.items.length;++s){const o=await ew(s,e.items[s],n,r);if(typeof o=="number")s=o-1;else{if(o===dc)return dc;o===tm&&(e.items.splice(s,1),s-=1)}}}else if(ko(e)){r=Object.freeze(r.concat(e));const s=await ew("key",e.key,n,r);if(s===dc)return dc;s===tm&&(e.key=null);const o=await ew("value",e.value,n,r);if(o===dc)return dc;o===tm&&(e.value=null)}}return i}function Sae(t){return typeof t=="object"&&(t.Collection||t.Node||t.Value)?Object.assign({Alias:t.Node,Map:t.Node,Scalar:t.Node,Seq:t.Node},t.Value&&{Map:t.Value,Scalar:t.Value,Seq:t.Value},t.Collection&&{Map:t.Collection,Seq:t.Collection},t):t}function kae(t,e,n,r){if(typeof n=="function")return n(t,e,r);if(sO(e))return n.Map?.(t,e,r);if(oO(e))return n.Seq?.(t,e,r);if(ko(e))return n.Pair?.(t,e,r);if(Ks(e))return n.Scalar?.(t,e,r);if(A1(e))return n.Alias?.(t,e,r)}function Cae(t,e,n){const r=e[e.length-1];if(Fo(r))r.items[t]=n;else if(ko(r))t==="key"?r.key=n:r.value=n;else if(c_(r))r.contents=n;else{const i=A1(r)?"alias":"scalar";throw new Error(`Cannot replace node with ${i} parent`)}}const LRe={"!":"%21",",":"%2C","[":"%5B","]":"%5D","{":"%7B","}":"%7D"},$Re=t=>t.replace(/[!,[\]{}]/g,e=>LRe[e]);class Su{constructor(e,n){this.docStart=null,this.docEnd=!1,this.yaml=Object.assign({},Su.defaultYaml,e),this.tags=Object.assign({},Su.defaultTags,n)}clone(){const e=new Su(this.yaml,this.tags);return e.docStart=this.docStart,e}atDocument(){const e=new Su(this.yaml,this.tags);switch(this.yaml.version){case"1.1":this.atNextDocument=!0;break;case"1.2":this.atNextDocument=!1,this.yaml={explicit:Su.defaultYaml.explicit,version:"1.2"},this.tags=Object.assign({},Su.defaultTags);break}return e}add(e,n){this.atNextDocument&&(this.yaml={explicit:Su.defaultYaml.explicit,version:"1.1"},this.tags=Object.assign({},Su.defaultTags),this.atNextDocument=!1);const r=e.trim().split(/[ \t]+/),i=r.shift();switch(i){case"%TAG":{if(r.length!==2&&(n(0,"%TAG directive should contain exactly two parts"),r.length<2))return!1;const[s,o]=r;return this.tags[s]=o,!0}case"%YAML":{if(this.yaml.explicit=!0,r.length!==1)return n(0,"%YAML directive should contain exactly one part"),!1;const[s]=r;if(s==="1.1"||s==="1.2")return this.yaml.version=s,!0;{const o=/^\d+\.\d+$/.test(s);return n(6,`Unsupported YAML version ${s}`,o),!1}}default:return n(0,`Unknown directive ${i}`,!0),!1}}tagName(e,n){if(e==="!")return"!";if(e[0]!=="!")return n(`Not a valid tag: ${e}`),null;if(e[1]==="<"){const o=e.slice(2,-1);return o==="!"||o==="!!"?(n(`Verbatim tags aren't resolved, so ${e} is invalid.`),null):(e[e.length-1]!==">"&&n("Verbatim tags must end with a >"),o)}const[,r,i]=e.match(/^(.*!)([^!]*)$/s);i||n(`The ${e} tag has no suffix`);const s=this.tags[r];if(s)try{return s+decodeURIComponent(i)}catch(o){return n(String(o)),null}return r==="!"?e:(n(`Could not resolve tag: ${e}`),null)}tagString(e){for(const[n,r]of Object.entries(this.tags))if(e.startsWith(r))return n+$Re(e.substring(r.length));return e[0]==="!"?e:`!<${e}>`}toString(e){const n=this.yaml.explicit?[`%YAML ${this.yaml.version||"1.2"}`]:[],r=Object.entries(this.tags);let i;if(e&&r.length>0&&$o(e.contents)){const s={};h_(e.contents,(o,a)=>{$o(a)&&a.tag&&(s[a.tag]=!0)}),i=Object.keys(s)}else i=[];for(const[s,o]of r)s==="!!"&&o==="tag:yaml.org,2002:"||(!e||i.some(a=>a.startsWith(o)))&&n.push(`%TAG ${s} ${o}`);return n.join(`
`)}}Su.defaultYaml={explicit:!1,version:"1.2"};Su.defaultTags={"!!":"tag:yaml.org,2002:"};function Aae(t){if(/[\x00-\x19\s,[\]{}]/.test(t)){const n=`Anchor must not contain whitespace or control characters: ${JSON.stringify(t)}`;throw new Error(n)}return!0}function Eae(t){const e=new Set;return h_(t,{Value(n,r){r.anchor&&e.add(r.anchor)}}),e}function Tae(t,e){for(let n=1;;++n){const r=`${t}${n}`;if(!e.has(r))return r}}function BRe(t,e){const n=[],r=new Map;let i=null;return{onAnchor:s=>{n.push(s),i??(i=Eae(t));const o=Tae(e,i);return i.add(o),o},setAnchors:()=>{for(const s of n){const o=r.get(s);if(typeof o=="object"&&o.anchor&&(Ks(o.node)||Fo(o.node)))o.node.anchor=o.anchor;else{const a=new Error("Failed to resolve repeated object (this should not happen)");throw a.source=s,a}}},sourceObjects:r}}function tw(t,e,n,r){if(r&&typeof r=="object")if(Array.isArray(r))for(let i=0,s=r.length;i<s;++i){const o=r[i],a=tw(t,r,String(i),o);a===void 0?delete r[i]:a!==o&&(r[i]=a)}else if(r instanceof Map)for(const i of Array.from(r.keys())){const s=r.get(i),o=tw(t,r,i,s);o===void 0?r.delete(i):o!==s&&r.set(i,o)}else if(r instanceof Set)for(const i of Array.from(r)){const s=tw(t,r,i,i);s===void 0?r.delete(i):s!==i&&(r.delete(i),r.add(s))}else for(const[i,s]of Object.entries(r)){const o=tw(t,r,i,s);o===void 0?delete r[i]:o!==s&&(r[i]=o)}return t.call(e,n,r)}function mf(t,e,n){if(Array.isArray(t))return t.map((r,i)=>mf(r,String(i),n));if(t&&typeof t.toJSON=="function"){if(!n||!wae(t))return t.toJSON(e,n);const r={aliasCount:0,count:1,res:void 0};n.anchors.set(t,r),n.onCreate=s=>{r.res=s,delete n.onCreate};const i=t.toJSON(e,n);return n.onCreate&&n.onCreate(i),i}return typeof t=="bigint"&&!n?.keep?Number(t):t}class ez{constructor(e){Object.defineProperty(this,Sf,{value:e})}clone(){const e=Object.create(Object.getPrototypeOf(this),Object.getOwnPropertyDescriptors(this));return this.range&&(e.range=this.range.slice()),e}toJS(e,{mapAsMap:n,maxAliasCount:r,onAnchor:i,reviver:s}={}){if(!c_(e))throw new TypeError("A document argument is required");const o={anchors:new Map,doc:e,keep:!0,mapAsMap:n===!0,mapKeyWarned:!1,maxAliasCount:typeof r=="number"?r:100},a=mf(this,"",o);if(typeof i=="function")for(const{count:l,res:h}of o.anchors.values())i(h,l);return typeof s=="function"?tw(s,{"":a},"",a):a}}class $D extends ez{constructor(e){super(JN),this.source=e,Object.defineProperty(this,"tag",{set(){throw new Error("Alias nodes cannot have tags")}})}resolve(e,n){let r;n?.aliasResolveCache?r=n.aliasResolveCache:(r=[],h_(e,{Node:(s,o)=>{(A1(o)||wae(o))&&r.push(o)}}),n&&(n.aliasResolveCache=r));let i;for(const s of r){if(s===this)break;s.anchor===this.source&&(i=s)}return i}toJSON(e,n){if(!n)return{source:this.source};const{anchors:r,doc:i,maxAliasCount:s}=n,o=this.resolve(i,n);if(!o){const l=`Unresolved alias (the anchor must be set before the alias): ${this.source}`;throw new ReferenceError(l)}let a=r.get(o);if(a||(mf(o,null,n),a=r.get(o)),!a||a.res===void 0){const l="This should not happen: Alias anchor was not resolved?";throw new ReferenceError(l)}if(s>=0&&(a.count+=1,a.aliasCount===0&&(a.aliasCount=$5(i,o,r)),a.count*a.aliasCount>s)){const l="Excessive alias count indicates a resource exhaustion attack";throw new ReferenceError(l)}return a.res}toString(e,n,r){const i=`*${this.source}`;if(e){if(Aae(this.source),e.options.verifyAliasOrder&&!e.anchors.has(this.source)){const s=`Unresolved alias (the anchor must be set before the alias): ${this.source}`;throw new Error(s)}if(e.implicitKey)return`${i} `}return i}}function $5(t,e,n){if(A1(e)){const r=e.resolve(t),i=n&&r&&n.get(r);return i?i.count*i.aliasCount:0}else if(Fo(e)){let r=0;for(const i of e.items){const s=$5(t,i,n);s>r&&(r=s)}return r}else if(ko(e)){const r=$5(t,e.key,n),i=$5(t,e.value,n);return Math.max(r,i)}return 1}const Pae=t=>!t||typeof t!="function"&&typeof t!="object";class Nr extends ez{constructor(e){super(dm),this.value=e}toJSON(e,n){return n?.keep?this.value:mf(this.value,e,n)}toString(){return String(this.value)}}Nr.BLOCK_FOLDED="BLOCK_FOLDED";Nr.BLOCK_LITERAL="BLOCK_LITERAL";Nr.PLAIN="PLAIN";Nr.QUOTE_DOUBLE="QUOTE_DOUBLE";Nr.QUOTE_SINGLE="QUOTE_SINGLE";const NRe="tag:yaml.org,2002:";function zRe(t,e,n){if(e){const r=n.filter(s=>s.tag===e),i=r.find(s=>!s.format)??r[0];if(!i)throw new Error(`Tag ${e} not found`);return i}return n.find(r=>r.identify?.(t)&&!r.format)}function Jk(t,e,n){if(c_(t)&&(t=t.contents),$o(t))return t;if(ko(t)){const p=n.schema[Wy].createNode?.(n.schema,null,n);return p.items.push(t),p}(t instanceof String||t instanceof Number||t instanceof Boolean||typeof BigInt<"u"&&t instanceof BigInt)&&(t=t.valueOf());const{aliasDuplicateObjects:r,onAnchor:i,onTagObj:s,schema:o,sourceObjects:a}=n;let l;if(r&&t&&typeof t=="object"){if(l=a.get(t),l)return l.anchor??(l.anchor=i(t)),new $D(l.anchor);l={anchor:null,node:null},a.set(t,l)}e?.startsWith("!!")&&(e=NRe+e.slice(2));let h=zRe(t,e,o.tags);if(!h){if(t&&typeof t.toJSON=="function"&&(t=t.toJSON()),!t||typeof t!="object"){const p=new Nr(t);return l&&(l.node=p),p}h=t instanceof Map?o[Wy]:Symbol.iterator in Object(t)?o[iO]:o[Wy]}s&&(s(h),delete n.onTagObj);const f=h?.createNode?h.createNode(n.schema,t,n):typeof h?.nodeClass?.from=="function"?h.nodeClass.from(n.schema,t,n):new Nr(t);return e?f.tag=e:h.default||(f.tag=h.tag),l&&(l.node=f),f}function W6(t,e,n){let r=n;for(let i=e.length-1;i>=0;--i){const s=e[i];if(typeof s=="number"&&Number.isInteger(s)&&s>=0){const o=[];o[s]=r,r=o}else r=new Map([[s,r]])}return Jk(r,void 0,{aliasDuplicateObjects:!1,keepUndefined:!1,onAnchor:()=>{throw new Error("This should not happen, please report a bug.")},schema:t,sourceObjects:new Map})}const w3=t=>t==null||typeof t=="object"&&!!t[Symbol.iterator]().next().done;class Dae extends ez{constructor(e,n){super(e),Object.defineProperty(this,"schema",{value:n,configurable:!0,enumerable:!1,writable:!0})}clone(e){const n=Object.create(Object.getPrototypeOf(this),Object.getOwnPropertyDescriptors(this));return e&&(n.schema=e),n.items=n.items.map(r=>$o(r)||ko(r)?r.clone(e):r),this.range&&(n.range=this.range.slice()),n}addIn(e,n){if(w3(e))this.add(n);else{const[r,...i]=e,s=this.get(r,!0);if(Fo(s))s.addIn(i,n);else if(s===void 0&&this.schema)this.set(r,W6(this.schema,i,n));else throw new Error(`Expected YAML collection at ${r}. Remaining path: ${i}`)}}deleteIn(e){const[n,...r]=e;if(r.length===0)return this.delete(n);const i=this.get(n,!0);if(Fo(i))return i.deleteIn(r);throw new Error(`Expected YAML collection at ${n}. Remaining path: ${r}`)}getIn(e,n){const[r,...i]=e,s=this.get(r,!0);return i.length===0?!n&&Ks(s)?s.value:s:Fo(s)?s.getIn(i,n):void 0}hasAllNullValues(e){return this.items.every(n=>{if(!ko(n))return!1;const r=n.value;return r==null||e&&Ks(r)&&r.value==null&&!r.commentBefore&&!r.comment&&!r.tag})}hasIn(e){const[n,...r]=e;if(r.length===0)return this.has(n);const i=this.get(n,!0);return Fo(i)?i.hasIn(r):!1}setIn(e,n){const[r,...i]=e;if(i.length===0)this.set(r,n);else{const s=this.get(r,!0);if(Fo(s))s.setIn(i,n);else if(s===void 0&&this.schema)this.set(r,W6(this.schema,i,n));else throw new Error(`Expected YAML collection at ${r}. Remaining path: ${i}`)}}}const QRe=t=>t.replace(/^(?!$)(?: $)?/gm,"#");function jg(t,e){return/^\n+$/.test(t)?t.substring(1):e?t.replace(/^(?! *$)/gm,e):t}const sb=(t,e,n)=>t.endsWith(`
`)?jg(n,e):n.includes(`
`)?`
`+jg(n,e):(t.endsWith(" ")?"":" ")+n,Iae="flow",j9="block",B5="quoted";function BD(t,e,n="flow",{indentAtStart:r,lineWidth:i=80,minContentWidth:s=20,onFold:o,onOverflow:a}={}){if(!i||i<0)return t;i<s&&(s=0);const l=Math.max(1+s,1+i-e.length);if(t.length<=l)return t;const h=[],f={};let p=i-e.length;typeof r=="number"&&(r>i-Math.max(2,s)?h.push(0):p=i-r);let g,b,x=!1,k=-1,T=-1,I=-1;n===j9&&(k=lX(t,k,e.length),k!==-1&&(p=k+l));for(let B;B=t[k+=1];){if(n===B5&&B==="\\"){switch(T=k,t[k+1]){case"x":k+=3;break;case"u":k+=5;break;case"U":k+=9;break;default:k+=1}I=k}if(B===`
`)n===j9&&(k=lX(t,k,e.length)),p=k+e.length+l,g=void 0;else{if(B===" "&&b&&b!==" "&&b!==`
`&&b!=="	"){const j=t[k+1];j&&j!==" "&&j!==`
`&&j!=="	"&&(g=k)}if(k>=p)if(g)h.push(g),p=g+l,g=void 0;else if(n===B5){for(;b===" "||b==="	";)b=B,B=t[k+=1],x=!0;const j=k>I+1?k-2:T-1;if(f[j])return t;h.push(j),f[j]=!0,p=j+l,g=void 0}else x=!0}b=B}if(x&&a&&a(),h.length===0)return t;o&&o();let M=t.slice(0,h[0]);for(let B=0;B<h.length;++B){const j=h[B],Q=h[B+1]||t.length;j===0?M=`
${e}${t.slice(0,Q)}`:(n===B5&&f[j]&&(M+=`${t[j]}\\`),M+=`
${e}${t.slice(j+1,Q)}`)}return M}function lX(t,e,n){let r=e,i=e+1,s=t[i];for(;s===" "||s==="	";)if(e<i+n)s=t[++e];else{do s=t[++e];while(s&&s!==`
`);r=e,i=e+1,s=t[i]}return r}const ND=(t,e)=>({indentAtStart:e?t.indent.length:t.indentAtStart,lineWidth:t.options.lineWidth,minContentWidth:t.options.minContentWidth}),zD=t=>/^(%|---|\.\.\.)/m.test(t);function jRe(t,e,n){if(!e||e<0)return!1;const r=e-n,i=t.length;if(i<=r)return!1;for(let s=0,o=0;s<i;++s)if(t[s]===`
`){if(s-o>r)return!0;if(o=s+1,i-o<=r)return!1}return!0}function X3(t,e){const n=JSON.stringify(t);if(e.options.doubleQuotedAsJSON)return n;const{implicitKey:r}=e,i=e.options.doubleQuotedMinMultiLineLength,s=e.indent||(zD(t)?"  ":"");let o="",a=0;for(let l=0,h=n[l];h;h=n[++l])if(h===" "&&n[l+1]==="\\"&&n[l+2]==="n"&&(o+=n.slice(a,l)+"\\ ",l+=1,a=l,h="\\"),h==="\\")switch(n[l+1]){case"u":{o+=n.slice(a,l);const f=n.substr(l+2,4);switch(f){case"0000":o+="\\0";break;case"0007":o+="\\a";break;case"000b":o+="\\v";break;case"001b":o+="\\e";break;case"0085":o+="\\N";break;case"00a0":o+="\\_";break;case"2028":o+="\\L";break;case"2029":o+="\\P";break;default:f.substr(0,2)==="00"?o+="\\x"+f.substr(2):o+=n.substr(l,6)}l+=5,a=l+1}break;case"n":if(r||n[l+2]==='"'||n.length<i)l+=1;else{for(o+=n.slice(a,l)+`

`;n[l+2]==="\\"&&n[l+3]==="n"&&n[l+4]!=='"';)o+=`
`,l+=2;o+=s,n[l+2]===" "&&(o+="\\"),l+=1,a=l+1}break;default:l+=1}return o=a?o+n.slice(a):n,r?o:BD(o,s,B5,ND(e,!1))}function U9(t,e){if(e.options.singleQuote===!1||e.implicitKey&&t.includes(`
`)||/[ \t]\n|\n[ \t]/.test(t))return X3(t,e);const n=e.indent||(zD(t)?"  ":""),r="'"+t.replace(/'/g,"''").replace(/\n+/g,`$&
${n}`)+"'";return e.implicitKey?r:BD(r,n,Iae,ND(e,!1))}function nw(t,e){const{singleQuote:n}=e.options;let r;if(n===!1)r=X3;else{const i=t.includes('"'),s=t.includes("'");i&&!s?r=U9:s&&!i?r=X3:r=n?U9:X3}return r(t,e)}let V9;try{V9=new RegExp(`(^|(?<!
))
+(?!
|$)`,"g")}catch{V9=/\n+(?!\n|$)/g}function N5({comment:t,type:e,value:n},r,i,s){const{blockQuote:o,commentString:a,lineWidth:l}=r.options;if(!o||/\n[\t ]+$/.test(n))return nw(n,r);const h=r.indent||(r.forceBlockIndent||zD(n)?"  ":""),f=o==="literal"?!0:o==="folded"||e===Nr.BLOCK_FOLDED?!1:e===Nr.BLOCK_LITERAL?!0:!jRe(n,l,h.length);if(!n)return f?`|
`:`>
`;let p,g;for(g=n.length;g>0;--g){const Q=n[g-1];if(Q!==`
`&&Q!=="	"&&Q!==" ")break}let b=n.substring(g);const x=b.indexOf(`
`);x===-1?p="-":n===b||x!==b.length-1?(p="+",s&&s()):p="",b&&(n=n.slice(0,-b.length),b[b.length-1]===`
`&&(b=b.slice(0,-1)),b=b.replace(V9,`$&${h}`));let k=!1,T,I=-1;for(T=0;T<n.length;++T){const Q=n[T];if(Q===" ")k=!0;else if(Q===`
`)I=T;else break}let M=n.substring(0,I<T?I+1:T);M&&(n=n.substring(M.length),M=M.replace(/\n+/g,`$&${h}`));let j=(k?h?"2":"1":"")+p;if(t&&(j+=" "+a(t.replace(/ ?[\r\n]+/g," ")),i&&i()),!f){const Q=n.replace(/\n+/g,`
$&`).replace(/(?:^|\n)([\t ].*)(?:([\n\t ]*)\n(?![\n\t ]))?/g,"$1$2").replace(/\n+/g,`$&${h}`);let Z=!1;const q=ND(r,!0);o!=="folded"&&e!==Nr.BLOCK_FOLDED&&(q.onOverflow=()=>{Z=!0});const J=BD(`${M}${Q}${b}`,h,j9,q);if(!Z)return`>${j}
${h}${J}`}return n=n.replace(/\n+/g,`$&${h}`),`|${j}
${h}${M}${n}${b}`}function URe(t,e,n,r){const{type:i,value:s}=t,{actualString:o,implicitKey:a,indent:l,indentStep:h,inFlow:f}=e;if(a&&s.includes(`
`)||f&&/[[\]{},]/.test(s))return nw(s,e);if(/^[\n\t ,[\]{}#&*!|>'"%@`]|^[?-]$|^[?-][ \t]|[\n:][ \t]|[ \t]\n|[\n\t ]#|[\n\t :]$/.test(s))return a||f||!s.includes(`
`)?nw(s,e):N5(t,e,n,r);if(!a&&!f&&i!==Nr.PLAIN&&s.includes(`
`))return N5(t,e,n,r);if(zD(s)){if(l==="")return e.forceBlockIndent=!0,N5(t,e,n,r);if(a&&l===h)return nw(s,e)}const p=s.replace(/\n+/g,`$&
${l}`);if(o){const g=k=>k.default&&k.tag!=="tag:yaml.org,2002:str"&&k.test?.test(p),{compat:b,tags:x}=e.doc.schema;if(x.some(g)||b?.some(g))return nw(s,e)}return a?p:BD(p,l,Iae,ND(e,!1))}function YC(t,e,n,r){const{implicitKey:i,inFlow:s}=e,o=typeof t.value=="string"?t:Object.assign({},t,{value:String(t.value)});let{type:a}=t;a!==Nr.QUOTE_DOUBLE&&/[\x00-\x08\x0b-\x1f\x7f-\x9f\u{D800}-\u{DFFF}]/u.test(o.value)&&(a=Nr.QUOTE_DOUBLE);const l=f=>{switch(f){case Nr.BLOCK_FOLDED:case Nr.BLOCK_LITERAL:return i||s?nw(o.value,e):N5(o,e,n,r);case Nr.QUOTE_DOUBLE:return X3(o.value,e);case Nr.QUOTE_SINGLE:return U9(o.value,e);case Nr.PLAIN:return URe(o,e,n,r);default:return null}};let h=l(a);if(h===null){const{defaultKeyType:f,defaultStringType:p}=e.options,g=i&&f||p;if(h=l(g),h===null)throw new Error(`Unsupported default string type ${g}`)}return h}function Mae(t,e){const n=Object.assign({blockQuote:!0,commentString:QRe,defaultKeyType:null,defaultStringType:"PLAIN",directives:null,doubleQuotedAsJSON:!1,doubleQuotedMinMultiLineLength:40,falseStr:"false",flowCollectionPadding:!0,indentSeq:!0,lineWidth:80,minContentWidth:20,nullStr:"null",simpleKeys:!1,singleQuote:null,trueStr:"true",verifyAliasOrder:!0},t.schema.toStringOptions,e);let r;switch(n.collectionStyle){case"block":r=!1;break;case"flow":r=!0;break;default:r=null}return{anchors:new Set,doc:t,flowCollectionPadding:n.flowCollectionPadding?" ":"",indent:"",indentStep:typeof n.indent=="number"?" ".repeat(n.indent):"  ",inFlow:r,options:n}}function VRe(t,e){if(e.tag){const i=t.filter(s=>s.tag===e.tag);if(i.length>0)return i.find(s=>s.format===e.format)??i[0]}let n,r;if(Ks(e)){r=e.value;let i=t.filter(s=>s.identify?.(r));if(i.length>1){const s=i.filter(o=>o.test);s.length>0&&(i=s)}n=i.find(s=>s.format===e.format)??i.find(s=>!s.format)}else r=e,n=t.find(i=>i.nodeClass&&r instanceof i.nodeClass);if(!n){const i=r?.constructor?.name??(r===null?"null":typeof r);throw new Error(`Tag not resolved for ${i} value`)}return n}function qRe(t,e,{anchors:n,doc:r}){if(!r.directives)return"";const i=[],s=(Ks(t)||Fo(t))&&t.anchor;s&&Aae(s)&&(n.add(s),i.push(`&${s}`));const o=t.tag??(e.default?null:e.tag);return o&&i.push(r.directives.tagString(o)),i.join(" ")}function _2(t,e,n,r){if(ko(t))return t.toString(e,n,r);if(A1(t)){if(e.doc.directives)return t.toString(e);if(e.resolvedAliases?.has(t))throw new TypeError("Cannot stringify circular structure without alias nodes");e.resolvedAliases?e.resolvedAliases.add(t):e.resolvedAliases=new Set([t]),t=t.resolve(e.doc)}let i;const s=$o(t)?t:e.doc.createNode(t,{onTagObj:l=>i=l});i??(i=VRe(e.doc.schema.tags,s));const o=qRe(s,i,e);o.length>0&&(e.indentAtStart=(e.indentAtStart??0)+o.length+1);const a=typeof i.stringify=="function"?i.stringify(s,e,n,r):Ks(s)?YC(s,e,n,r):s.toString(e,n,r);return o?Ks(s)||a[0]==="{"||a[0]==="["?`${o} ${a}`:`${o}
${e.indent}${a}`:a}function ZRe({key:t,value:e},n,r,i){const{allNullValues:s,doc:o,indent:a,indentStep:l,options:{commentString:h,indentSeq:f,simpleKeys:p}}=n;let g=$o(t)&&t.comment||null;if(p){if(g)throw new Error("With simple keys, key nodes cannot have comments");if(Fo(t)||!$o(t)&&typeof t=="object"){const q="With simple keys, collection cannot be used as a key value";throw new Error(q)}}let b=!p&&(!t||g&&e==null&&!n.inFlow||Fo(t)||(Ks(t)?t.type===Nr.BLOCK_FOLDED||t.type===Nr.BLOCK_LITERAL:typeof t=="object"));n=Object.assign({},n,{allNullValues:!1,implicitKey:!b&&(p||!s),indent:a+l});let x=!1,k=!1,T=_2(t,n,()=>x=!0,()=>k=!0);if(!b&&!n.inFlow&&T.length>1024){if(p)throw new Error("With simple keys, single line scalar must not span more than 1024 characters");b=!0}if(n.inFlow){if(s||e==null)return x&&r&&r(),T===""?"?":b?`? ${T}`:T}else if(s&&!p||e==null&&b)return T=`? ${T}`,g&&!x?T+=sb(T,n.indent,h(g)):k&&i&&i(),T;x&&(g=null),b?(g&&(T+=sb(T,n.indent,h(g))),T=`? ${T}
${a}:`):(T=`${T}:`,g&&(T+=sb(T,n.indent,h(g))));let I,M,B;$o(e)?(I=!!e.spaceBefore,M=e.commentBefore,B=e.comment):(I=!1,M=null,B=null,e&&typeof e=="object"&&(e=o.createNode(e))),n.implicitKey=!1,!b&&!g&&Ks(e)&&(n.indentAtStart=T.length+1),k=!1,!f&&l.length>=2&&!n.inFlow&&!b&&oO(e)&&!e.flow&&!e.tag&&!e.anchor&&(n.indent=n.indent.substring(2));let j=!1;const Q=_2(e,n,()=>j=!0,()=>k=!0);let Z=" ";if(g||I||M){if(Z=I?`
`:"",M){const q=h(M);Z+=`
${jg(q,n.indent)}`}Q===""&&!n.inFlow?Z===`
`&&(Z=`

`):Z+=`
${n.indent}`}else if(!b&&Fo(e)){const q=Q[0],J=Q.indexOf(`
`),oe=J!==-1,me=n.inFlow??e.flow??e.items.length===0;if(oe||!me){let ae=!1;if(oe&&(q==="&"||q==="!")){let ce=Q.indexOf(" ");q==="&"&&ce!==-1&&ce<J&&Q[ce+1]==="!"&&(ce=Q.indexOf(" ",ce+1)),(ce===-1||J<ce)&&(ae=!0)}ae||(Z=`
${n.indent}`)}}else(Q===""||Q[0]===`
`)&&(Z="");return T+=Z+Q,n.inFlow?j&&r&&r():B&&!j?T+=sb(T,n.indent,h(B)):k&&i&&i(),T}function Rae(t,e){(t==="debug"||t==="warn")&&console.warn(e)}const A4="<<",Jg={identify:t=>t===A4||typeof t=="symbol"&&t.description===A4,default:"key",tag:"tag:yaml.org,2002:merge",test:/^<<$/,resolve:()=>Object.assign(new Nr(Symbol(A4)),{addToJSMap:Fae}),stringify:()=>A4},XRe=(t,e)=>(Jg.identify(e)||Ks(e)&&(!e.type||e.type===Nr.PLAIN)&&Jg.identify(e.value))&&t?.doc.schema.tags.some(n=>n.tag===Jg.tag&&n.default);function Fae(t,e,n){if(n=t&&A1(n)?n.resolve(t.doc):n,oO(n))for(const r of n.items)AR(t,e,r);else if(Array.isArray(n))for(const r of n)AR(t,e,r);else AR(t,e,n)}function AR(t,e,n){const r=t&&A1(n)?n.resolve(t.doc):n;if(!sO(r))throw new Error("Merge sources must be maps or map aliases");const i=r.toJSON(null,t,Map);for(const[s,o]of i)e instanceof Map?e.has(s)||e.set(s,o):e instanceof Set?e.add(s):Object.prototype.hasOwnProperty.call(e,s)||Object.defineProperty(e,s,{value:o,writable:!0,enumerable:!0,configurable:!0});return e}function Lae(t,e,{key:n,value:r}){if($o(n)&&n.addToJSMap)n.addToJSMap(t,e,r);else if(XRe(t,n))Fae(t,e,r);else{const i=mf(n,"",t);if(e instanceof Map)e.set(i,mf(r,i,t));else if(e instanceof Set)e.add(i);else{const s=WRe(n,i,t),o=mf(r,s,t);s in e?Object.defineProperty(e,s,{value:o,writable:!0,enumerable:!0,configurable:!0}):e[s]=o}}return e}function WRe(t,e,n){if(e===null)return"";if(typeof e!="object")return String(e);if($o(t)&&n?.doc){const r=Mae(n.doc,{});r.anchors=new Set;for(const s of n.anchors.keys())r.anchors.add(s.anchor);r.inFlow=!0,r.inStringifyKey=!0;const i=t.toString(r);if(!n.mapKeyWarned){let s=JSON.stringify(i);s.length>40&&(s=s.substring(0,36)+'..."'),Rae(n.doc.options.logLevel,`Keys with collection values will be stringified due to JS Object restrictions: ${s}. Set mapAsMap: true to use object keys.`),n.mapKeyWarned=!0}return i}return JSON.stringify(e)}function tz(t,e,n){const r=Jk(t,void 0,n),i=Jk(e,void 0,n);return new tu(r,i)}class tu{constructor(e,n=null){Object.defineProperty(this,Sf,{value:xae}),this.key=e,this.value=n}clone(e){let{key:n,value:r}=this;return $o(n)&&(n=n.clone(e)),$o(r)&&(r=r.clone(e)),new tu(n,r)}toJSON(e,n){const r=n?.mapAsMap?new Map:{};return Lae(n,r,this)}toString(e,n,r){return e?.doc?ZRe(this,e,n,r):JSON.stringify(this)}}function $ae(t,e,n){return(e.inFlow??t.flow?YRe:GRe)(t,e,n)}function GRe({comment:t,items:e},n,{blockItemPrefix:r,flowChars:i,itemIndent:s,onChompKeep:o,onComment:a}){const{indent:l,options:{commentString:h}}=n,f=Object.assign({},n,{indent:s,type:null});let p=!1;const g=[];for(let x=0;x<e.length;++x){const k=e[x];let T=null;if($o(k))!p&&k.spaceBefore&&g.push(""),G6(n,g,k.commentBefore,p),k.comment&&(T=k.comment);else if(ko(k)){const M=$o(k.key)?k.key:null;M&&(!p&&M.spaceBefore&&g.push(""),G6(n,g,M.commentBefore,p))}p=!1;let I=_2(k,f,()=>T=null,()=>p=!0);T&&(I+=sb(I,s,h(T))),p&&T&&(p=!1),g.push(r+I)}let b;if(g.length===0)b=i.start+i.end;else{b=g[0];for(let x=1;x<g.length;++x){const k=g[x];b+=k?`
${l}${k}`:`
`}}return t?(b+=`
`+jg(h(t),l),a&&a()):p&&o&&o(),b}function YRe({items:t},e,{flowChars:n,itemIndent:r}){const{indent:i,indentStep:s,flowCollectionPadding:o,options:{commentString:a}}=e;r+=s;const l=Object.assign({},e,{indent:r,inFlow:!0,type:null});let h=!1,f=0;const p=[];for(let x=0;x<t.length;++x){const k=t[x];let T=null;if($o(k))k.spaceBefore&&p.push(""),G6(e,p,k.commentBefore,!1),k.comment&&(T=k.comment);else if(ko(k)){const M=$o(k.key)?k.key:null;M&&(M.spaceBefore&&p.push(""),G6(e,p,M.commentBefore,!1),M.comment&&(h=!0));const B=$o(k.value)?k.value:null;B?(B.comment&&(T=B.comment),B.commentBefore&&(h=!0)):k.value==null&&M?.comment&&(T=M.comment)}T&&(h=!0);let I=_2(k,l,()=>T=null);x<t.length-1&&(I+=","),T&&(I+=sb(I,r,a(T))),!h&&(p.length>f||I.includes(`
`))&&(h=!0),p.push(I),f=p.length}const{start:g,end:b}=n;if(p.length===0)return g+b;if(!h){const x=p.reduce((k,T)=>k+T.length+2,2);h=e.options.lineWidth>0&&x>e.options.lineWidth}if(h){let x=g;for(const k of p)x+=k?`
${s}${i}${k}`:`
`;return`${x}
${i}${b}`}else return`${g}${o}${p.join(" ")}${o}${b}`}function G6({indent:t,options:{commentString:e}},n,r,i){if(r&&i&&(r=r.replace(/^\n+/,"")),r){const s=jg(e(r),t);n.push(s.trimStart())}}function ob(t,e){const n=Ks(e)?e.value:e;for(const r of t)if(ko(r)&&(r.key===e||r.key===n||Ks(r.key)&&r.key.value===n))return r}class hh extends Dae{static get tagName(){return"tag:yaml.org,2002:map"}constructor(e){super(Wy,e),this.items=[]}static from(e,n,r){const{keepUndefined:i,replacer:s}=r,o=new this(e),a=(l,h)=>{if(typeof s=="function")h=s.call(n,l,h);else if(Array.isArray(s)&&!s.includes(l))return;(h!==void 0||i)&&o.items.push(tz(l,h,r))};if(n instanceof Map)for(const[l,h]of n)a(l,h);else if(n&&typeof n=="object")for(const l of Object.keys(n))a(l,n[l]);return typeof e.sortMapEntries=="function"&&o.items.sort(e.sortMapEntries),o}add(e,n){let r;ko(e)?r=e:!e||typeof e!="object"||!("key"in e)?r=new tu(e,e?.value):r=new tu(e.key,e.value);const i=ob(this.items,r.key),s=this.schema?.sortMapEntries;if(i){if(!n)throw new Error(`Key ${r.key} already set`);Ks(i.value)&&Pae(r.value)?i.value.value=r.value:i.value=r.value}else if(s){const o=this.items.findIndex(a=>s(r,a)<0);o===-1?this.items.push(r):this.items.splice(o,0,r)}else this.items.push(r)}delete(e){const n=ob(this.items,e);return n?this.items.splice(this.items.indexOf(n),1).length>0:!1}get(e,n){const i=ob(this.items,e)?.value;return(!n&&Ks(i)?i.value:i)??void 0}has(e){return!!ob(this.items,e)}set(e,n){this.add(new tu(e,n),!0)}toJSON(e,n,r){const i=r?new r:n?.mapAsMap?new Map:{};n?.onCreate&&n.onCreate(i);for(const s of this.items)Lae(n,i,s);return i}toString(e,n,r){if(!e)return JSON.stringify(this);for(const i of this.items)if(!ko(i))throw new Error(`Map items must all be pairs; found ${JSON.stringify(i)} instead`);return!e.allNullValues&&this.hasAllNullValues(!1)&&(e=Object.assign({},e,{allNullValues:!0})),$ae(this,e,{blockItemPrefix:"",flowChars:{start:"{",end:"}"},itemIndent:e.indent||"",onChompKeep:r,onComment:n})}}const aO={collection:"map",default:!0,nodeClass:hh,tag:"tag:yaml.org,2002:map",resolve(t,e){return sO(t)||e("Expected a mapping for this tag"),t},createNode:(t,e,n)=>hh.from(t,e,n)};class b1 extends Dae{static get tagName(){return"tag:yaml.org,2002:seq"}constructor(e){super(iO,e),this.items=[]}add(e){this.items.push(e)}delete(e){const n=E4(e);return typeof n!="number"?!1:this.items.splice(n,1).length>0}get(e,n){const r=E4(e);if(typeof r!="number")return;const i=this.items[r];return!n&&Ks(i)?i.value:i}has(e){const n=E4(e);return typeof n=="number"&&n<this.items.length}set(e,n){const r=E4(e);if(typeof r!="number")throw new Error(`Expected a valid index, not ${e}.`);const i=this.items[r];Ks(i)&&Pae(n)?i.value=n:this.items[r]=n}toJSON(e,n){const r=[];n?.onCreate&&n.onCreate(r);let i=0;for(const s of this.items)r.push(mf(s,String(i++),n));return r}toString(e,n,r){return e?$ae(this,e,{blockItemPrefix:"- ",flowChars:{start:"[",end:"]"},itemIndent:(e.indent||"")+"  ",onChompKeep:r,onComment:n}):JSON.stringify(this)}static from(e,n,r){const{replacer:i}=r,s=new this(e);if(n&&Symbol.iterator in Object(n)){let o=0;for(let a of n){if(typeof i=="function"){const l=n instanceof Set?a:String(o++);a=i.call(n,l,a)}s.items.push(Jk(a,void 0,r))}}return s}}function E4(t){let e=Ks(t)?t.value:t;return e&&typeof e=="string"&&(e=Number(e)),typeof e=="number"&&Number.isInteger(e)&&e>=0?e:null}const lO={collection:"seq",default:!0,nodeClass:b1,tag:"tag:yaml.org,2002:seq",resolve(t,e){return oO(t)||e("Expected a sequence for this tag"),t},createNode:(t,e,n)=>b1.from(t,e,n)},QD={identify:t=>typeof t=="string",default:!0,tag:"tag:yaml.org,2002:str",resolve:t=>t,stringify(t,e,n,r){return e=Object.assign({actualString:!0},e),YC(t,e,n,r)}},jD={identify:t=>t==null,createNode:()=>new Nr(null),default:!0,tag:"tag:yaml.org,2002:null",test:/^(?:~|[Nn]ull|NULL)?$/,resolve:()=>new Nr(null),stringify:({source:t},e)=>typeof t=="string"&&jD.test.test(t)?t:e.options.nullStr},nz={identify:t=>typeof t=="boolean",default:!0,tag:"tag:yaml.org,2002:bool",test:/^(?:[Tt]rue|TRUE|[Ff]alse|FALSE)$/,resolve:t=>new Nr(t[0]==="t"||t[0]==="T"),stringify({source:t,value:e},n){if(t&&nz.test.test(t)){const r=t[0]==="t"||t[0]==="T";if(e===r)return t}return e?n.options.trueStr:n.options.falseStr}};function Qd({format:t,minFractionDigits:e,tag:n,value:r}){if(typeof r=="bigint")return String(r);const i=typeof r=="number"?r:Number(r);if(!isFinite(i))return isNaN(i)?".nan":i<0?"-.inf":".inf";let s=JSON.stringify(r);if(!t&&e&&(!n||n==="tag:yaml.org,2002:float")&&/^\d/.test(s)){let o=s.indexOf(".");o<0&&(o=s.length,s+=".");let a=e-(s.length-o-1);for(;a-- >0;)s+="0"}return s}const Bae={identify:t=>typeof t=="number",default:!0,tag:"tag:yaml.org,2002:float",test:/^(?:[-+]?\.(?:inf|Inf|INF)|\.nan|\.NaN|\.NAN)$/,resolve:t=>t.slice(-3).toLowerCase()==="nan"?NaN:t[0]==="-"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,stringify:Qd},Nae={identify:t=>typeof t=="number",default:!0,tag:"tag:yaml.org,2002:float",format:"EXP",test:/^[-+]?(?:\.[0-9]+|[0-9]+(?:\.[0-9]*)?)[eE][-+]?[0-9]+$/,resolve:t=>parseFloat(t),stringify(t){const e=Number(t.value);return isFinite(e)?e.toExponential():Qd(t)}},zae={identify:t=>typeof t=="number",default:!0,tag:"tag:yaml.org,2002:float",test:/^[-+]?(?:\.[0-9]+|[0-9]+\.[0-9]*)$/,resolve(t){const e=new Nr(parseFloat(t)),n=t.indexOf(".");return n!==-1&&t[t.length-1]==="0"&&(e.minFractionDigits=t.length-n-1),e},stringify:Qd},UD=t=>typeof t=="bigint"||Number.isInteger(t),rz=(t,e,n,{intAsBigInt:r})=>r?BigInt(t):parseInt(t.substring(e),n);function Qae(t,e,n){const{value:r}=t;return UD(r)&&r>=0?n+r.toString(e):Qd(t)}const jae={identify:t=>UD(t)&&t>=0,default:!0,tag:"tag:yaml.org,2002:int",format:"OCT",test:/^0o[0-7]+$/,resolve:(t,e,n)=>rz(t,2,8,n),stringify:t=>Qae(t,8,"0o")},Uae={identify:UD,default:!0,tag:"tag:yaml.org,2002:int",test:/^[-+]?[0-9]+$/,resolve:(t,e,n)=>rz(t,0,10,n),stringify:Qd},Vae={identify:t=>UD(t)&&t>=0,default:!0,tag:"tag:yaml.org,2002:int",format:"HEX",test:/^0x[0-9a-fA-F]+$/,resolve:(t,e,n)=>rz(t,2,16,n),stringify:t=>Qae(t,16,"0x")},HRe=[aO,lO,QD,jD,nz,jae,Uae,Vae,Bae,Nae,zae];function uX(t){return typeof t=="bigint"||Number.isInteger(t)}const T4=({value:t})=>JSON.stringify(t),KRe=[{identify:t=>typeof t=="string",default:!0,tag:"tag:yaml.org,2002:str",resolve:t=>t,stringify:T4},{identify:t=>t==null,createNode:()=>new Nr(null),default:!0,tag:"tag:yaml.org,2002:null",test:/^null$/,resolve:()=>null,stringify:T4},{identify:t=>typeof t=="boolean",default:!0,tag:"tag:yaml.org,2002:bool",test:/^true$|^false$/,resolve:t=>t==="true",stringify:T4},{identify:uX,default:!0,tag:"tag:yaml.org,2002:int",test:/^-?(?:0|[1-9][0-9]*)$/,resolve:(t,e,{intAsBigInt:n})=>n?BigInt(t):parseInt(t,10),stringify:({value:t})=>uX(t)?t.toString():JSON.stringify(t)},{identify:t=>typeof t=="number",default:!0,tag:"tag:yaml.org,2002:float",test:/^-?(?:0|[1-9][0-9]*)(?:\.[0-9]*)?(?:[eE][-+]?[0-9]+)?$/,resolve:t=>parseFloat(t),stringify:T4}],JRe={default:!0,tag:"",test:/^/,resolve(t,e){return e(`Unresolved plain scalar ${JSON.stringify(t)}`),t}},e7e=[aO,lO].concat(KRe,JRe),iz={identify:t=>t instanceof Uint8Array,default:!1,tag:"tag:yaml.org,2002:binary",resolve(t,e){if(typeof atob=="function"){const n=atob(t.replace(/[\n\r]/g,"")),r=new Uint8Array(n.length);for(let i=0;i<n.length;++i)r[i]=n.charCodeAt(i);return r}else return e("This environment does not support reading binary tags; either Buffer or atob is required"),t},stringify({comment:t,type:e,value:n},r,i,s){if(!n)return"";const o=n;let a;if(typeof btoa=="function"){let l="";for(let h=0;h<o.length;++h)l+=String.fromCharCode(o[h]);a=btoa(l)}else throw new Error("This environment does not support writing binary tags; either Buffer or btoa is required");if(e??(e=Nr.BLOCK_LITERAL),e!==Nr.QUOTE_DOUBLE){const l=Math.max(r.options.lineWidth-r.indent.length,r.options.minContentWidth),h=Math.ceil(a.length/l),f=new Array(h);for(let p=0,g=0;p<h;++p,g+=l)f[p]=a.substr(g,l);a=f.join(e===Nr.BLOCK_LITERAL?`
`:" ")}return YC({comment:t,type:e,value:a},r,i,s)}};function qae(t,e){if(oO(t))for(let n=0;n<t.items.length;++n){let r=t.items[n];if(!ko(r)){if(sO(r)){r.items.length>1&&e("Each pair must have its own sequence indicator");const i=r.items[0]||new tu(new Nr(null));if(r.commentBefore&&(i.key.commentBefore=i.key.commentBefore?`${r.commentBefore}
${i.key.commentBefore}`:r.commentBefore),r.comment){const s=i.value??i.key;s.comment=s.comment?`${r.comment}
${s.comment}`:r.comment}r=i}t.items[n]=ko(r)?r:new tu(r)}}else e("Expected a sequence for this tag");return t}function Zae(t,e,n){const{replacer:r}=n,i=new b1(t);i.tag="tag:yaml.org,2002:pairs";let s=0;if(e&&Symbol.iterator in Object(e))for(let o of e){typeof r=="function"&&(o=r.call(e,String(s++),o));let a,l;if(Array.isArray(o))if(o.length===2)a=o[0],l=o[1];else throw new TypeError(`Expected [key, value] tuple: ${o}`);else if(o&&o instanceof Object){const h=Object.keys(o);if(h.length===1)a=h[0],l=o[a];else throw new TypeError(`Expected tuple with one key, not ${h.length} keys`)}else a=o;i.items.push(tz(a,l,n))}return i}const sz={collection:"seq",default:!1,tag:"tag:yaml.org,2002:pairs",resolve:qae,createNode:Zae};class Tw extends b1{constructor(){super(),this.add=hh.prototype.add.bind(this),this.delete=hh.prototype.delete.bind(this),this.get=hh.prototype.get.bind(this),this.has=hh.prototype.has.bind(this),this.set=hh.prototype.set.bind(this),this.tag=Tw.tag}toJSON(e,n){if(!n)return super.toJSON(e);const r=new Map;n?.onCreate&&n.onCreate(r);for(const i of this.items){let s,o;if(ko(i)?(s=mf(i.key,"",n),o=mf(i.value,s,n)):s=mf(i,"",n),r.has(s))throw new Error("Ordered maps must not include duplicate keys");r.set(s,o)}return r}static from(e,n,r){const i=Zae(e,n,r),s=new this;return s.items=i.items,s}}Tw.tag="tag:yaml.org,2002:omap";const oz={collection:"seq",identify:t=>t instanceof Map,nodeClass:Tw,default:!1,tag:"tag:yaml.org,2002:omap",resolve(t,e){const n=qae(t,e),r=[];for(const{key:i}of n.items)Ks(i)&&(r.includes(i.value)?e(`Ordered maps must not include duplicate keys: ${i.value}`):r.push(i.value));return Object.assign(new Tw,n)},createNode:(t,e,n)=>Tw.from(t,e,n)};function Xae({value:t,source:e},n){return e&&(t?Wae:Gae).test.test(e)?e:t?n.options.trueStr:n.options.falseStr}const Wae={identify:t=>t===!0,default:!0,tag:"tag:yaml.org,2002:bool",test:/^(?:Y|y|[Yy]es|YES|[Tt]rue|TRUE|[Oo]n|ON)$/,resolve:()=>new Nr(!0),stringify:Xae},Gae={identify:t=>t===!1,default:!0,tag:"tag:yaml.org,2002:bool",test:/^(?:N|n|[Nn]o|NO|[Ff]alse|FALSE|[Oo]ff|OFF)$/,resolve:()=>new Nr(!1),stringify:Xae},t7e={identify:t=>typeof t=="number",default:!0,tag:"tag:yaml.org,2002:float",test:/^(?:[-+]?\.(?:inf|Inf|INF)|\.nan|\.NaN|\.NAN)$/,resolve:t=>t.slice(-3).toLowerCase()==="nan"?NaN:t[0]==="-"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,stringify:Qd},n7e={identify:t=>typeof t=="number",default:!0,tag:"tag:yaml.org,2002:float",format:"EXP",test:/^[-+]?(?:[0-9][0-9_]*)?(?:\.[0-9_]*)?[eE][-+]?[0-9]+$/,resolve:t=>parseFloat(t.replace(/_/g,"")),stringify(t){const e=Number(t.value);return isFinite(e)?e.toExponential():Qd(t)}},r7e={identify:t=>typeof t=="number",default:!0,tag:"tag:yaml.org,2002:float",test:/^[-+]?(?:[0-9][0-9_]*)?\.[0-9_]*$/,resolve(t){const e=new Nr(parseFloat(t.replace(/_/g,""))),n=t.indexOf(".");if(n!==-1){const r=t.substring(n+1).replace(/_/g,"");r[r.length-1]==="0"&&(e.minFractionDigits=r.length)}return e},stringify:Qd},HC=t=>typeof t=="bigint"||Number.isInteger(t);function VD(t,e,n,{intAsBigInt:r}){const i=t[0];if((i==="-"||i==="+")&&(e+=1),t=t.substring(e).replace(/_/g,""),r){switch(n){case 2:t=`0b${t}`;break;case 8:t=`0o${t}`;break;case 16:t=`0x${t}`;break}const o=BigInt(t);return i==="-"?BigInt(-1)*o:o}const s=parseInt(t,n);return i==="-"?-1*s:s}function az(t,e,n){const{value:r}=t;if(HC(r)){const i=r.toString(e);return r<0?"-"+n+i.substr(1):n+i}return Qd(t)}const i7e={identify:HC,default:!0,tag:"tag:yaml.org,2002:int",format:"BIN",test:/^[-+]?0b[0-1_]+$/,resolve:(t,e,n)=>VD(t,2,2,n),stringify:t=>az(t,2,"0b")},s7e={identify:HC,default:!0,tag:"tag:yaml.org,2002:int",format:"OCT",test:/^[-+]?0[0-7_]+$/,resolve:(t,e,n)=>VD(t,1,8,n),stringify:t=>az(t,8,"0")},o7e={identify:HC,default:!0,tag:"tag:yaml.org,2002:int",test:/^[-+]?[0-9][0-9_]*$/,resolve:(t,e,n)=>VD(t,0,10,n),stringify:Qd},a7e={identify:HC,default:!0,tag:"tag:yaml.org,2002:int",format:"HEX",test:/^[-+]?0x[0-9a-fA-F_]+$/,resolve:(t,e,n)=>VD(t,2,16,n),stringify:t=>az(t,16,"0x")};class Pw extends hh{constructor(e){super(e),this.tag=Pw.tag}add(e){let n;ko(e)?n=e:e&&typeof e=="object"&&"key"in e&&"value"in e&&e.value===null?n=new tu(e.key,null):n=new tu(e,null),ob(this.items,n.key)||this.items.push(n)}get(e,n){const r=ob(this.items,e);return!n&&ko(r)?Ks(r.key)?r.key.value:r.key:r}set(e,n){if(typeof n!="boolean")throw new Error(`Expected boolean value for set(key, value) in a YAML set, not ${typeof n}`);const r=ob(this.items,e);r&&!n?this.items.splice(this.items.indexOf(r),1):!r&&n&&this.items.push(new tu(e))}toJSON(e,n){return super.toJSON(e,n,Set)}toString(e,n,r){if(!e)return JSON.stringify(this);if(this.hasAllNullValues(!0))return super.toString(Object.assign({},e,{allNullValues:!0}),n,r);throw new Error("Set items must all have null values")}static from(e,n,r){const{replacer:i}=r,s=new this(e);if(n&&Symbol.iterator in Object(n))for(let o of n)typeof i=="function"&&(o=i.call(n,o,o)),s.items.push(tz(o,null,r));return s}}Pw.tag="tag:yaml.org,2002:set";const lz={collection:"map",identify:t=>t instanceof Set,nodeClass:Pw,default:!1,tag:"tag:yaml.org,2002:set",createNode:(t,e,n)=>Pw.from(t,e,n),resolve(t,e){if(sO(t)){if(t.hasAllNullValues(!0))return Object.assign(new Pw,t);e("Set items must all have null values")}else e("Expected a mapping for this tag");return t}};function uz(t,e){const n=t[0],r=n==="-"||n==="+"?t.substring(1):t,i=o=>e?BigInt(o):Number(o),s=r.replace(/_/g,"").split(":").reduce((o,a)=>o*i(60)+i(a),i(0));return n==="-"?i(-1)*s:s}function Yae(t){let{value:e}=t,n=o=>o;if(typeof e=="bigint")n=o=>BigInt(o);else if(isNaN(e)||!isFinite(e))return Qd(t);let r="";e<0&&(r="-",e*=n(-1));const i=n(60),s=[e%i];return e<60?s.unshift(0):(e=(e-s[0])/i,s.unshift(e%i),e>=60&&(e=(e-s[0])/i,s.unshift(e))),r+s.map(o=>String(o).padStart(2,"0")).join(":").replace(/000000\d*$/,"")}const Hae={identify:t=>typeof t=="bigint"||Number.isInteger(t),default:!0,tag:"tag:yaml.org,2002:int",format:"TIME",test:/^[-+]?[0-9][0-9_]*(?::[0-5]?[0-9])+$/,resolve:(t,e,{intAsBigInt:n})=>uz(t,n),stringify:Yae},Kae={identify:t=>typeof t=="number",default:!0,tag:"tag:yaml.org,2002:float",format:"TIME",test:/^[-+]?[0-9][0-9_]*(?::[0-5]?[0-9])+\.[0-9_]*$/,resolve:t=>uz(t,!1),stringify:Yae},qD={identify:t=>t instanceof Date,default:!0,tag:"tag:yaml.org,2002:timestamp",test:RegExp("^([0-9]{4})-([0-9]{1,2})-([0-9]{1,2})(?:(?:t|T|[ \\t]+)([0-9]{1,2}):([0-9]{1,2}):([0-9]{1,2}(\\.[0-9]+)?)(?:[ \\t]*(Z|[-+][012]?[0-9](?::[0-9]{2})?))?)?$"),resolve(t){const e=t.match(qD.test);if(!e)throw new Error("!!timestamp expects a date, starting with yyyy-mm-dd");const[,n,r,i,s,o,a]=e.map(Number),l=e[7]?Number((e[7]+"00").substr(1,3)):0;let h=Date.UTC(n,r-1,i,s||0,o||0,a||0,l);const f=e[8];if(f&&f!=="Z"){let p=uz(f,!1);Math.abs(p)<30&&(p*=60),h-=6e4*p}return new Date(h)},stringify:({value:t})=>t?.toISOString().replace(/(T00:00:00)?\.000Z$/,"")??""},cX=[aO,lO,QD,jD,Wae,Gae,i7e,s7e,o7e,a7e,t7e,n7e,r7e,iz,Jg,oz,sz,lz,Hae,Kae,qD],hX=new Map([["core",HRe],["failsafe",[aO,lO,QD]],["json",e7e],["yaml11",cX],["yaml-1.1",cX]]),fX={binary:iz,bool:nz,float:zae,floatExp:Nae,floatNaN:Bae,floatTime:Kae,int:Uae,intHex:Vae,intOct:jae,intTime:Hae,map:aO,merge:Jg,null:jD,omap:oz,pairs:sz,seq:lO,set:lz,timestamp:qD},l7e={"tag:yaml.org,2002:binary":iz,"tag:yaml.org,2002:merge":Jg,"tag:yaml.org,2002:omap":oz,"tag:yaml.org,2002:pairs":sz,"tag:yaml.org,2002:set":lz,"tag:yaml.org,2002:timestamp":qD};function ER(t,e,n){const r=hX.get(e);if(r&&!t)return n&&!r.includes(Jg)?r.concat(Jg):r.slice();let i=r;if(!i)if(Array.isArray(t))i=[];else{const s=Array.from(hX.keys()).filter(o=>o!=="yaml11").map(o=>JSON.stringify(o)).join(", ");throw new Error(`Unknown schema "${e}"; use one of ${s} or define customTags array`)}if(Array.isArray(t))for(const s of t)i=i.concat(s);else typeof t=="function"&&(i=t(i.slice()));return n&&(i=i.concat(Jg)),i.reduce((s,o)=>{const a=typeof o=="string"?fX[o]:o;if(!a){const l=JSON.stringify(o),h=Object.keys(fX).map(f=>JSON.stringify(f)).join(", ");throw new Error(`Unknown custom tag ${l}; use one of ${h}`)}return s.includes(a)||s.push(a),s},[])}const u7e=(t,e)=>t.key<e.key?-1:t.key>e.key?1:0;class ZD{constructor({compat:e,customTags:n,merge:r,resolveKnownTags:i,schema:s,sortMapEntries:o,toStringDefaults:a}){this.compat=Array.isArray(e)?ER(e,"compat"):e?ER(null,e):null,this.name=typeof s=="string"&&s||"core",this.knownTags=i?l7e:{},this.tags=ER(n,this.name,r),this.toStringOptions=a??null,Object.defineProperty(this,Wy,{value:aO}),Object.defineProperty(this,dm,{value:QD}),Object.defineProperty(this,iO,{value:lO}),this.sortMapEntries=typeof o=="function"?o:o===!0?u7e:null}clone(){const e=Object.create(ZD.prototype,Object.getOwnPropertyDescriptors(this));return e.tags=this.tags.slice(),e}}function c7e(t,e){const n=[];let r=e.directives===!0;if(e.directives!==!1&&t.directives){const l=t.directives.toString(t);l?(n.push(l),r=!0):t.directives.docStart&&(r=!0)}r&&n.push("---");const i=Mae(t,e),{commentString:s}=i.options;if(t.commentBefore){n.length!==1&&n.unshift("");const l=s(t.commentBefore);n.unshift(jg(l,""))}let o=!1,a=null;if(t.contents){if($o(t.contents)){if(t.contents.spaceBefore&&r&&n.push(""),t.contents.commentBefore){const f=s(t.contents.commentBefore);n.push(jg(f,""))}i.forceBlockIndent=!!t.comment,a=t.contents.comment}const l=a?void 0:()=>o=!0;let h=_2(t.contents,i,()=>a=null,l);a&&(h+=sb(h,"",s(a))),(h[0]==="|"||h[0]===">")&&n[n.length-1]==="---"?n[n.length-1]=`--- ${h}`:n.push(h)}else n.push(_2(t.contents,i));if(t.directives?.docEnd)if(t.comment){const l=s(t.comment);l.includes(`
`)?(n.push("..."),n.push(jg(l,""))):n.push(`... ${l}`)}else n.push("...");else{let l=t.comment;l&&o&&(l=l.replace(/^\n+/,"")),l&&((!o||a)&&n[n.length-1]!==""&&n.push(""),n.push(jg(s(l),"")))}return n.join(`
`)+`
`}class uO{constructor(e,n,r){this.commentBefore=null,this.comment=null,this.errors=[],this.warnings=[],Object.defineProperty(this,Sf,{value:Q9});let i=null;typeof n=="function"||Array.isArray(n)?i=n:r===void 0&&n&&(r=n,n=void 0);const s=Object.assign({intAsBigInt:!1,keepSourceTokens:!1,logLevel:"warn",prettyErrors:!0,strict:!0,stringKeys:!1,uniqueKeys:!0,version:"1.2"},r);this.options=s;let{version:o}=s;r?._directives?(this.directives=r._directives.atDocument(),this.directives.yaml.explicit&&(o=this.directives.yaml.version)):this.directives=new Su({version:o}),this.setSchema(o,r),this.contents=e===void 0?null:this.createNode(e,i,r)}clone(){const e=Object.create(uO.prototype,{[Sf]:{value:Q9}});return e.commentBefore=this.commentBefore,e.comment=this.comment,e.errors=this.errors.slice(),e.warnings=this.warnings.slice(),e.options=Object.assign({},this.options),this.directives&&(e.directives=this.directives.clone()),e.schema=this.schema.clone(),e.contents=$o(this.contents)?this.contents.clone(e.schema):this.contents,this.range&&(e.range=this.range.slice()),e}add(e){Cx(this.contents)&&this.contents.add(e)}addIn(e,n){Cx(this.contents)&&this.contents.addIn(e,n)}createAlias(e,n){if(!e.anchor){const r=Eae(this);e.anchor=!n||r.has(n)?Tae(n||"a",r):n}return new $D(e.anchor)}createNode(e,n,r){let i;if(typeof n=="function")e=n.call({"":e},"",e),i=n;else if(Array.isArray(n)){const T=M=>typeof M=="number"||M instanceof String||M instanceof Number,I=n.filter(T).map(String);I.length>0&&(n=n.concat(I)),i=n}else r===void 0&&n&&(r=n,n=void 0);const{aliasDuplicateObjects:s,anchorPrefix:o,flow:a,keepUndefined:l,onTagObj:h,tag:f}=r??{},{onAnchor:p,setAnchors:g,sourceObjects:b}=BRe(this,o||"a"),x={aliasDuplicateObjects:s??!0,keepUndefined:l??!1,onAnchor:p,onTagObj:h,replacer:i,schema:this.schema,sourceObjects:b},k=Jk(e,f,x);return a&&Fo(k)&&(k.flow=!0),g(),k}createPair(e,n,r={}){const i=this.createNode(e,null,r),s=this.createNode(n,null,r);return new tu(i,s)}delete(e){return Cx(this.contents)?this.contents.delete(e):!1}deleteIn(e){return w3(e)?this.contents==null?!1:(this.contents=null,!0):Cx(this.contents)?this.contents.deleteIn(e):!1}get(e,n){return Fo(this.contents)?this.contents.get(e,n):void 0}getIn(e,n){return w3(e)?!n&&Ks(this.contents)?this.contents.value:this.contents:Fo(this.contents)?this.contents.getIn(e,n):void 0}has(e){return Fo(this.contents)?this.contents.has(e):!1}hasIn(e){return w3(e)?this.contents!==void 0:Fo(this.contents)?this.contents.hasIn(e):!1}set(e,n){this.contents==null?this.contents=W6(this.schema,[e],n):Cx(this.contents)&&this.contents.set(e,n)}setIn(e,n){w3(e)?this.contents=n:this.contents==null?this.contents=W6(this.schema,Array.from(e),n):Cx(this.contents)&&this.contents.setIn(e,n)}setSchema(e,n={}){typeof e=="number"&&(e=String(e));let r;switch(e){case"1.1":this.directives?this.directives.yaml.version="1.1":this.directives=new Su({version:"1.1"}),r={resolveKnownTags:!1,schema:"yaml-1.1"};break;case"1.2":case"next":this.directives?this.directives.yaml.version=e:this.directives=new Su({version:e}),r={resolveKnownTags:!0,schema:"core"};break;case null:this.directives&&delete this.directives,r=null;break;default:{const i=JSON.stringify(e);throw new Error(`Expected '1.1', '1.2' or null as first argument, but found: ${i}`)}}if(n.schema instanceof Object)this.schema=n.schema;else if(r)this.schema=new ZD(Object.assign(r,n));else throw new Error("With a null YAML version, the { schema: Schema } option is required")}toJS({json:e,jsonArg:n,mapAsMap:r,maxAliasCount:i,onAnchor:s,reviver:o}={}){const a={anchors:new Map,doc:this,keep:!e,mapAsMap:r===!0,mapKeyWarned:!1,maxAliasCount:typeof i=="number"?i:100},l=mf(this.contents,n??"",a);if(typeof s=="function")for(const{count:h,res:f}of a.anchors.values())s(f,h);return typeof o=="function"?tw(o,{"":l},"",l):l}toJSON(e,n){return this.toJS({json:!0,jsonArg:e,mapAsMap:!1,onAnchor:n})}toString(e={}){if(this.errors.length>0)throw new Error("Document with errors cannot be stringified");if("indent"in e&&(!Number.isInteger(e.indent)||Number(e.indent)<=0)){const n=JSON.stringify(e.indent);throw new Error(`"indent" option must be a positive integer, not ${n}`)}return c7e(this,e)}}function Cx(t){if(Fo(t))return!0;throw new Error("Expected a YAML collection as document contents")}class cz extends Error{constructor(e,n,r,i){super(),this.name=e,this.code=r,this.message=i,this.pos=n}}class ab extends cz{constructor(e,n,r){super("YAMLParseError",e,n,r)}}class Jae extends cz{constructor(e,n,r){super("YAMLWarning",e,n,r)}}const Y6=(t,e)=>n=>{if(n.pos[0]===-1)return;n.linePos=n.pos.map(a=>e.linePos(a));const{line:r,col:i}=n.linePos[0];n.message+=` at line ${r}, column ${i}`;let s=i-1,o=t.substring(e.lineStarts[r-1],e.lineStarts[r]).replace(/[\n\r]+$/,"");if(s>=60&&o.length>80){const a=Math.min(s-39,o.length-79);o="â¦"+o.substring(a),s-=a-1}if(o.length>80&&(o=o.substring(0,79)+"â¦"),r>1&&/^ *$/.test(o.substring(0,s))){let a=t.substring(e.lineStarts[r-2],e.lineStarts[r-1]);a.length>80&&(a=a.substring(0,79)+`â¦
`),o=a+o}if(/[^ ]/.test(o)){let a=1;const l=n.linePos[1];l&&l.line===r&&l.col>i&&(a=Math.max(1,Math.min(l.col-i,80-s)));const h=" ".repeat(s)+"^".repeat(a);n.message+=`:

${o}
${h}
`}};function x2(t,{flow:e,indicator:n,next:r,offset:i,onError:s,parentIndent:o,startOnNewline:a}){let l=!1,h=a,f=a,p="",g="",b=!1,x=!1,k=null,T=null,I=null,M=null,B=null,j=null,Q=null;for(const J of t)switch(x&&(J.type!=="space"&&J.type!=="newline"&&J.type!=="comma"&&s(J.offset,"MISSING_CHAR","Tags and anchors must be separated from the next token by white space"),x=!1),k&&(h&&J.type!=="comment"&&J.type!=="newline"&&s(k,"TAB_AS_INDENT","Tabs are not allowed as indentation"),k=null),J.type){case"space":!e&&(n!=="doc-start"||r?.type!=="flow-collection")&&J.source.includes("	")&&(k=J),f=!0;break;case"comment":{f||s(J,"MISSING_CHAR","Comments must be separated from other tokens by white space characters");const oe=J.source.substring(1)||" ";p?p+=g+oe:p=oe,g="",h=!1;break}case"newline":h?p?p+=J.source:(!j||n!=="seq-item-ind")&&(l=!0):g+=J.source,h=!0,b=!0,(T||I)&&(M=J),f=!0;break;case"anchor":T&&s(J,"MULTIPLE_ANCHORS","A node can have at most one anchor"),J.source.endsWith(":")&&s(J.offset+J.source.length-1,"BAD_ALIAS","Anchor ending in : is ambiguous",!0),T=J,Q??(Q=J.offset),h=!1,f=!1,x=!0;break;case"tag":{I&&s(J,"MULTIPLE_TAGS","A node can have at most one tag"),I=J,Q??(Q=J.offset),h=!1,f=!1,x=!0;break}case n:(T||I)&&s(J,"BAD_PROP_ORDER",`Anchors and tags must be after the ${J.source} indicator`),j&&s(J,"UNEXPECTED_TOKEN",`Unexpected ${J.source} in ${e??"collection"}`),j=J,h=n==="seq-item-ind"||n==="explicit-key-ind",f=!1;break;case"comma":if(e){B&&s(J,"UNEXPECTED_TOKEN",`Unexpected , in ${e}`),B=J,h=!1,f=!1;break}default:s(J,"UNEXPECTED_TOKEN",`Unexpected ${J.type} token`),h=!1,f=!1}const Z=t[t.length-1],q=Z?Z.offset+Z.source.length:i;return x&&r&&r.type!=="space"&&r.type!=="newline"&&r.type!=="comma"&&(r.type!=="scalar"||r.source!=="")&&s(r.offset,"MISSING_CHAR","Tags and anchors must be separated from the next token by white space"),k&&(h&&k.indent<=o||r?.type==="block-map"||r?.type==="block-seq")&&s(k,"TAB_AS_INDENT","Tabs are not allowed as indentation"),{comma:B,found:j,spaceBefore:l,comment:p,hasNewline:b,anchor:T,tag:I,newlineAfterProp:M,end:q,start:Q??q}}function eC(t){if(!t)return null;switch(t.type){case"alias":case"scalar":case"double-quoted-scalar":case"single-quoted-scalar":if(t.source.includes(`
`))return!0;if(t.end){for(const e of t.end)if(e.type==="newline")return!0}return!1;case"flow-collection":for(const e of t.items){for(const n of e.start)if(n.type==="newline")return!0;if(e.sep){for(const n of e.sep)if(n.type==="newline")return!0}if(eC(e.key)||eC(e.value))return!0}return!1;default:return!0}}function q9(t,e,n){if(e?.type==="flow-collection"){const r=e.end[0];r.indent===t&&(r.source==="]"||r.source==="}")&&eC(e)&&n(r,"BAD_INDENT","Flow end indicator should be more indented than parent",!0)}}function ele(t,e,n){const{uniqueKeys:r}=t.options;if(r===!1)return!1;const i=typeof r=="function"?r:(s,o)=>s===o||Ks(s)&&Ks(o)&&s.value===o.value;return e.some(s=>i(s.key,n))}const dX="All mapping items must start at the same column";function h7e({composeNode:t,composeEmptyNode:e},n,r,i,s){const o=s?.nodeClass??hh,a=new o(n.schema);n.atRoot&&(n.atRoot=!1);let l=r.offset,h=null;for(const f of r.items){const{start:p,key:g,sep:b,value:x}=f,k=x2(p,{indicator:"explicit-key-ind",next:g??b?.[0],offset:l,onError:i,parentIndent:r.indent,startOnNewline:!0}),T=!k.found;if(T){if(g&&(g.type==="block-seq"?i(l,"BLOCK_AS_IMPLICIT_KEY","A block sequence may not be used as an implicit map key"):"indent"in g&&g.indent!==r.indent&&i(l,"BAD_INDENT",dX)),!k.anchor&&!k.tag&&!b){h=k.end,k.comment&&(a.comment?a.comment+=`
`+k.comment:a.comment=k.comment);continue}(k.newlineAfterProp||eC(g))&&i(g??p[p.length-1],"MULTILINE_IMPLICIT_KEY","Implicit keys need to be on a single line")}else k.found?.indent!==r.indent&&i(l,"BAD_INDENT",dX);n.atKey=!0;const I=k.end,M=g?t(n,g,k,i):e(n,I,p,null,k,i);n.schema.compat&&q9(r.indent,g,i),n.atKey=!1,ele(n,a.items,M)&&i(I,"DUPLICATE_KEY","Map keys must be unique");const B=x2(b??[],{indicator:"map-value-ind",next:x,offset:M.range[2],onError:i,parentIndent:r.indent,startOnNewline:!g||g.type==="block-scalar"});if(l=B.end,B.found){T&&(x?.type==="block-map"&&!B.hasNewline&&i(l,"BLOCK_AS_IMPLICIT_KEY","Nested mappings are not allowed in compact mappings"),n.options.strict&&k.start<B.found.offset-1024&&i(M.range,"KEY_OVER_1024_CHARS","The : indicator must be at most 1024 chars after the start of an implicit block mapping key"));const j=x?t(n,x,B,i):e(n,l,b,null,B,i);n.schema.compat&&q9(r.indent,x,i),l=j.range[2];const Q=new tu(M,j);n.options.keepSourceTokens&&(Q.srcToken=f),a.items.push(Q)}else{T&&i(M.range,"MISSING_CHAR","Implicit map keys need to be followed by map values"),B.comment&&(M.comment?M.comment+=`
`+B.comment:M.comment=B.comment);const j=new tu(M);n.options.keepSourceTokens&&(j.srcToken=f),a.items.push(j)}}return h&&h<l&&i(h,"IMPOSSIBLE","Map comment with trailing content"),a.range=[r.offset,l,h??l],a}function f7e({composeNode:t,composeEmptyNode:e},n,r,i,s){const o=s?.nodeClass??b1,a=new o(n.schema);n.atRoot&&(n.atRoot=!1),n.atKey&&(n.atKey=!1);let l=r.offset,h=null;for(const{start:f,value:p}of r.items){const g=x2(f,{indicator:"seq-item-ind",next:p,offset:l,onError:i,parentIndent:r.indent,startOnNewline:!0});if(!g.found)if(g.anchor||g.tag||p)p&&p.type==="block-seq"?i(g.end,"BAD_INDENT","All sequence items must start at the same column"):i(l,"MISSING_CHAR","Sequence item without - indicator");else{h=g.end,g.comment&&(a.comment=g.comment);continue}const b=p?t(n,p,g,i):e(n,g.end,f,null,g,i);n.schema.compat&&q9(r.indent,p,i),l=b.range[2],a.items.push(b)}return a.range=[r.offset,l,h??l],a}function KC(t,e,n,r){let i="";if(t){let s=!1,o="";for(const a of t){const{source:l,type:h}=a;switch(h){case"space":s=!0;break;case"comment":{n&&!s&&r(a,"MISSING_CHAR","Comments must be separated from other tokens by white space characters");const f=l.substring(1)||" ";i?i+=o+f:i=f,o="";break}case"newline":i&&(o+=l),s=!0;break;default:r(a,"UNEXPECTED_TOKEN",`Unexpected ${h} at node end`)}e+=l.length}}return{comment:i,offset:e}}const TR="Block collections are not allowed within flow collections",PR=t=>t&&(t.type==="block-map"||t.type==="block-seq");function d7e({composeNode:t,composeEmptyNode:e},n,r,i,s){const o=r.start.source==="{",a=o?"flow map":"flow sequence",l=s?.nodeClass??(o?hh:b1),h=new l(n.schema);h.flow=!0;const f=n.atRoot;f&&(n.atRoot=!1),n.atKey&&(n.atKey=!1);let p=r.offset+r.start.source.length;for(let T=0;T<r.items.length;++T){const I=r.items[T],{start:M,key:B,sep:j,value:Q}=I,Z=x2(M,{flow:a,indicator:"explicit-key-ind",next:B??j?.[0],offset:p,onError:i,parentIndent:r.indent,startOnNewline:!1});if(!Z.found){if(!Z.anchor&&!Z.tag&&!j&&!Q){T===0&&Z.comma?i(Z.comma,"UNEXPECTED_TOKEN",`Unexpected , in ${a}`):T<r.items.length-1&&i(Z.start,"UNEXPECTED_TOKEN",`Unexpected empty item in ${a}`),Z.comment&&(h.comment?h.comment+=`
`+Z.comment:h.comment=Z.comment),p=Z.end;continue}!o&&n.options.strict&&eC(B)&&i(B,"MULTILINE_IMPLICIT_KEY","Implicit keys of flow sequence pairs need to be on a single line")}if(T===0)Z.comma&&i(Z.comma,"UNEXPECTED_TOKEN",`Unexpected , in ${a}`);else if(Z.comma||i(Z.start,"MISSING_CHAR",`Missing , between ${a} items`),Z.comment){let q="";e:for(const J of M)switch(J.type){case"comma":case"space":break;case"comment":q=J.source.substring(1);break e;default:break e}if(q){let J=h.items[h.items.length-1];ko(J)&&(J=J.value??J.key),J.comment?J.comment+=`
`+q:J.comment=q,Z.comment=Z.comment.substring(q.length+1)}}if(!o&&!j&&!Z.found){const q=Q?t(n,Q,Z,i):e(n,Z.end,j,null,Z,i);h.items.push(q),p=q.range[2],PR(Q)&&i(q.range,"BLOCK_IN_FLOW",TR)}else{n.atKey=!0;const q=Z.end,J=B?t(n,B,Z,i):e(n,q,M,null,Z,i);PR(B)&&i(J.range,"BLOCK_IN_FLOW",TR),n.atKey=!1;const oe=x2(j??[],{flow:a,indicator:"map-value-ind",next:Q,offset:J.range[2],onError:i,parentIndent:r.indent,startOnNewline:!1});if(oe.found){if(!o&&!Z.found&&n.options.strict){if(j)for(const ce of j){if(ce===oe.found)break;if(ce.type==="newline"){i(ce,"MULTILINE_IMPLICIT_KEY","Implicit keys of flow sequence pairs need to be on a single line");break}}Z.start<oe.found.offset-1024&&i(oe.found,"KEY_OVER_1024_CHARS","The : indicator must be at most 1024 chars after the start of an implicit flow sequence key")}}else Q&&("source"in Q&&Q.source&&Q.source[0]===":"?i(Q,"MISSING_CHAR",`Missing space after : in ${a}`):i(oe.start,"MISSING_CHAR",`Missing , or : between ${a} items`));const me=Q?t(n,Q,oe,i):oe.found?e(n,oe.end,j,null,oe,i):null;me?PR(Q)&&i(me.range,"BLOCK_IN_FLOW",TR):oe.comment&&(J.comment?J.comment+=`
`+oe.comment:J.comment=oe.comment);const ae=new tu(J,me);if(n.options.keepSourceTokens&&(ae.srcToken=I),o){const ce=h;ele(n,ce.items,J)&&i(q,"DUPLICATE_KEY","Map keys must be unique"),ce.items.push(ae)}else{const ce=new hh(n.schema);ce.flow=!0,ce.items.push(ae);const se=(me??J).range;ce.range=[J.range[0],se[1],se[2]],h.items.push(ce)}p=me?me.range[2]:oe.end}}const g=o?"}":"]",[b,...x]=r.end;let k=p;if(b&&b.source===g)k=b.offset+b.source.length;else{const T=a[0].toUpperCase()+a.substring(1),I=f?`${T} must end with a ${g}`:`${T} in block collection must be sufficiently indented and end with a ${g}`;i(p,f?"MISSING_CHAR":"BAD_INDENT",I),b&&b.source.length!==1&&x.unshift(b)}if(x.length>0){const T=KC(x,k,n.options.strict,i);T.comment&&(h.comment?h.comment+=`
`+T.comment:h.comment=T.comment),h.range=[r.offset,k,T.offset]}else h.range=[r.offset,k,k];return h}function DR(t,e,n,r,i,s){const o=n.type==="block-map"?h7e(t,e,n,r,s):n.type==="block-seq"?f7e(t,e,n,r,s):d7e(t,e,n,r,s),a=o.constructor;return i==="!"||i===a.tagName?(o.tag=a.tagName,o):(i&&(o.tag=i),o)}function p7e(t,e,n,r,i){const s=r.tag,o=s?e.directives.tagName(s.source,g=>i(s,"TAG_RESOLVE_FAILED",g)):null;if(n.type==="block-seq"){const{anchor:g,newlineAfterProp:b}=r,x=g&&s?g.offset>s.offset?g:s:g??s;x&&(!b||b.offset<x.offset)&&i(x,"MISSING_CHAR","Missing newline after block sequence props")}const a=n.type==="block-map"?"map":n.type==="block-seq"?"seq":n.start.source==="{"?"map":"seq";if(!s||!o||o==="!"||o===hh.tagName&&a==="map"||o===b1.tagName&&a==="seq")return DR(t,e,n,i,o);let l=e.schema.tags.find(g=>g.tag===o&&g.collection===a);if(!l){const g=e.schema.knownTags[o];if(g&&g.collection===a)e.schema.tags.push(Object.assign({},g,{default:!1})),l=g;else return g?i(s,"BAD_COLLECTION_TYPE",`${g.tag} used for ${a} collection, but expects ${g.collection??"scalar"}`,!0):i(s,"TAG_RESOLVE_FAILED",`Unresolved tag: ${o}`,!0),DR(t,e,n,i,o)}const h=DR(t,e,n,i,o,l),f=l.resolve?.(h,g=>i(s,"TAG_RESOLVE_FAILED",g),e.options)??h,p=$o(f)?f:new Nr(f);return p.range=h.range,p.tag=o,l?.format&&(p.format=l.format),p}function tle(t,e,n){const r=e.offset,i=m7e(e,t.options.strict,n);if(!i)return{value:"",type:null,comment:"",range:[r,r,r]};const s=i.mode===">"?Nr.BLOCK_FOLDED:Nr.BLOCK_LITERAL,o=e.source?g7e(e.source):[];let a=o.length;for(let k=o.length-1;k>=0;--k){const T=o[k][1];if(T===""||T==="\r")a=k;else break}if(a===0){const k=i.chomp==="+"&&o.length>0?`
`.repeat(Math.max(1,o.length-1)):"";let T=r+i.length;return e.source&&(T+=e.source.length),{value:k,type:s,comment:i.comment,range:[r,T,T]}}let l=e.indent+i.indent,h=e.offset+i.length,f=0;for(let k=0;k<a;++k){const[T,I]=o[k];if(I===""||I==="\r")i.indent===0&&T.length>l&&(l=T.length);else{T.length<l&&n(h+T.length,"MISSING_CHAR","Block scalars with more-indented leading empty lines must use an explicit indentation indicator"),i.indent===0&&(l=T.length),f=k,l===0&&!t.atRoot&&n(h,"BAD_INDENT","Block scalar values in collections must be indented");break}h+=T.length+I.length+1}for(let k=o.length-1;k>=a;--k)o[k][0].length>l&&(a=k+1);let p="",g="",b=!1;for(let k=0;k<f;++k)p+=o[k][0].slice(l)+`
`;for(let k=f;k<a;++k){let[T,I]=o[k];h+=T.length+I.length+1;const M=I[I.length-1]==="\r";if(M&&(I=I.slice(0,-1)),I&&T.length<l){const j=`Block scalar lines must not be less indented than their ${i.indent?"explicit indentation indicator":"first line"}`;n(h-I.length-(M?2:1),"BAD_INDENT",j),T=""}s===Nr.BLOCK_LITERAL?(p+=g+T.slice(l)+I,g=`
`):T.length>l||I[0]==="	"?(g===" "?g=`
`:!b&&g===`
`&&(g=`

`),p+=g+T.slice(l)+I,g=`
`,b=!0):I===""?g===`
`?p+=`
`:g=`
`:(p+=g+I,g=" ",b=!1)}switch(i.chomp){case"-":break;case"+":for(let k=a;k<o.length;++k)p+=`
`+o[k][0].slice(l);p[p.length-1]!==`
`&&(p+=`
`);break;default:p+=`
`}const x=r+i.length+e.source.length;return{value:p,type:s,comment:i.comment,range:[r,x,x]}}function m7e({offset:t,props:e},n,r){if(e[0].type!=="block-scalar-header")return r(e[0],"IMPOSSIBLE","Block scalar header not found"),null;const{source:i}=e[0],s=i[0];let o=0,a="",l=-1;for(let g=1;g<i.length;++g){const b=i[g];if(!a&&(b==="-"||b==="+"))a=b;else{const x=Number(b);!o&&x?o=x:l===-1&&(l=t+g)}}l!==-1&&r(l,"UNEXPECTED_TOKEN",`Block scalar header includes extra characters: ${i}`);let h=!1,f="",p=i.length;for(let g=1;g<e.length;++g){const b=e[g];switch(b.type){case"space":h=!0;case"newline":p+=b.source.length;break;case"comment":n&&!h&&r(b,"MISSING_CHAR","Comments must be separated from other tokens by white space characters"),p+=b.source.length,f=b.source.substring(1);break;case"error":r(b,"UNEXPECTED_TOKEN",b.message),p+=b.source.length;break;default:{const x=`Unexpected token in block scalar header: ${b.type}`;r(b,"UNEXPECTED_TOKEN",x);const k=b.source;k&&typeof k=="string"&&(p+=k.length)}}}return{mode:s,indent:o,chomp:a,comment:f,length:p}}function g7e(t){const e=t.split(/\n( *)/),n=e[0],r=n.match(/^( *)/),s=[r?.[1]?[r[1],n.slice(r[1].length)]:["",n]];for(let o=1;o<e.length;o+=2)s.push([e[o],e[o+1]]);return s}function nle(t,e,n){const{offset:r,type:i,source:s,end:o}=t;let a,l;const h=(g,b,x)=>n(r+g,b,x);switch(i){case"scalar":a=Nr.PLAIN,l=y7e(s,h);break;case"single-quoted-scalar":a=Nr.QUOTE_SINGLE,l=v7e(s,h);break;case"double-quoted-scalar":a=Nr.QUOTE_DOUBLE,l=b7e(s,h);break;default:return n(t,"UNEXPECTED_TOKEN",`Expected a flow scalar value, but found: ${i}`),{value:"",type:null,comment:"",range:[r,r+s.length,r+s.length]}}const f=r+s.length,p=KC(o,f,e,n);return{value:l,type:a,comment:p.comment,range:[r,f,p.offset]}}function y7e(t,e){let n="";switch(t[0]){case"	":n="a tab character";break;case",":n="flow indicator character ,";break;case"%":n="directive indicator character %";break;case"|":case">":{n=`block scalar indicator ${t[0]}`;break}case"@":case"`":{n=`reserved character ${t[0]}`;break}}return n&&e(0,"BAD_SCALAR_START",`Plain value cannot start with ${n}`),rle(t)}function v7e(t,e){return(t[t.length-1]!=="'"||t.length===1)&&e(t.length,"MISSING_CHAR","Missing closing 'quote"),rle(t.slice(1,-1)).replace(/''/g,"'")}function rle(t){let e,n;try{e=new RegExp(`(.*?)(?<![ 	])[ 	]*\r?
`,"sy"),n=new RegExp(`[ 	]*(.*?)(?:(?<![ 	])[ 	]*)?\r?
`,"sy")}catch{e=/(.*?)[ \t]*\r?\n/sy,n=/[ \t]*(.*?)[ \t]*\r?\n/sy}let r=e.exec(t);if(!r)return t;let i=r[1],s=" ",o=e.lastIndex;for(n.lastIndex=o;r=n.exec(t);)r[1]===""?s===`
`?i+=s:s=`
`:(i+=s+r[1],s=" "),o=n.lastIndex;const a=/[ \t]*(.*)/sy;return a.lastIndex=o,r=a.exec(t),i+s+(r?.[1]??"")}function b7e(t,e){let n="";for(let r=1;r<t.length-1;++r){const i=t[r];if(!(i==="\r"&&t[r+1]===`
`))if(i===`
`){const{fold:s,offset:o}=_7e(t,r);n+=s,r=o}else if(i==="\\"){let s=t[++r];const o=x7e[s];if(o)n+=o;else if(s===`
`)for(s=t[r+1];s===" "||s==="	";)s=t[++r+1];else if(s==="\r"&&t[r+1]===`
`)for(s=t[++r+1];s===" "||s==="	";)s=t[++r+1];else if(s==="x"||s==="u"||s==="U"){const a={x:2,u:4,U:8}[s];n+=w7e(t,r+1,a,e),r+=a}else{const a=t.substr(r-1,2);e(r-1,"BAD_DQ_ESCAPE",`Invalid escape sequence ${a}`),n+=a}}else if(i===" "||i==="	"){const s=r;let o=t[r+1];for(;o===" "||o==="	";)o=t[++r+1];o!==`
`&&!(o==="\r"&&t[r+2]===`
`)&&(n+=r>s?t.slice(s,r+1):i)}else n+=i}return(t[t.length-1]!=='"'||t.length===1)&&e(t.length,"MISSING_CHAR",'Missing closing "quote'),n}function _7e(t,e){let n="",r=t[e+1];for(;(r===" "||r==="	"||r===`
`||r==="\r")&&!(r==="\r"&&t[e+2]!==`
`);)r===`
`&&(n+=`
`),e+=1,r=t[e+1];return n||(n=" "),{fold:n,offset:e}}const x7e={0:"\0",a:"\x07",b:"\b",e:"\x1B",f:"\f",n:`
`,r:"\r",t:"	",v:"\v",N:"Â",_:"Â ",L:"\u2028",P:"\u2029"," ":" ",'"':'"',"/":"/","\\":"\\","	":"	"};function w7e(t,e,n,r){const i=t.substr(e,n),o=i.length===n&&/^[0-9a-fA-F]+$/.test(i)?parseInt(i,16):NaN;if(isNaN(o)){const a=t.substr(e-2,n+2);return r(e-2,"BAD_DQ_ESCAPE",`Invalid escape sequence ${a}`),a}return String.fromCodePoint(o)}function ile(t,e,n,r){const{value:i,type:s,comment:o,range:a}=e.type==="block-scalar"?tle(t,e,r):nle(e,t.options.strict,r),l=n?t.directives.tagName(n.source,p=>r(n,"TAG_RESOLVE_FAILED",p)):null;let h;t.options.stringKeys&&t.atKey?h=t.schema[dm]:l?h=O7e(t.schema,i,l,n,r):e.type==="scalar"?h=S7e(t,i,e,r):h=t.schema[dm];let f;try{const p=h.resolve(i,g=>r(n??e,"TAG_RESOLVE_FAILED",g),t.options);f=Ks(p)?p:new Nr(p)}catch(p){const g=p instanceof Error?p.message:String(p);r(n??e,"TAG_RESOLVE_FAILED",g),f=new Nr(i)}return f.range=a,f.source=i,s&&(f.type=s),l&&(f.tag=l),h.format&&(f.format=h.format),o&&(f.comment=o),f}function O7e(t,e,n,r,i){if(n==="!")return t[dm];const s=[];for(const a of t.tags)if(!a.collection&&a.tag===n)if(a.default&&a.test)s.push(a);else return a;for(const a of s)if(a.test?.test(e))return a;const o=t.knownTags[n];return o&&!o.collection?(t.tags.push(Object.assign({},o,{default:!1,test:void 0})),o):(i(r,"TAG_RESOLVE_FAILED",`Unresolved tag: ${n}`,n!=="tag:yaml.org,2002:str"),t[dm])}function S7e({atKey:t,directives:e,schema:n},r,i,s){const o=n.tags.find(a=>(a.default===!0||t&&a.default==="key")&&a.test?.test(r))||n[dm];if(n.compat){const a=n.compat.find(l=>l.default&&l.test?.test(r))??n[dm];if(o.tag!==a.tag){const l=e.tagString(o.tag),h=e.tagString(a.tag),f=`Value may be parsed as either ${l} or ${h}`;s(i,"TAG_RESOLVE_FAILED",f,!0)}}return o}function k7e(t,e,n){if(e){n??(n=e.length);for(let r=n-1;r>=0;--r){let i=e[r];switch(i.type){case"space":case"comment":case"newline":t-=i.source.length;continue}for(i=e[++r];i?.type==="space";)t+=i.source.length,i=e[++r];break}}return t}const C7e={composeNode:sle,composeEmptyNode:hz};function sle(t,e,n,r){const i=t.atKey,{spaceBefore:s,comment:o,anchor:a,tag:l}=n;let h,f=!0;switch(e.type){case"alias":h=A7e(t,e,r),(a||l)&&r(e,"ALIAS_PROPS","An alias node must not specify any properties");break;case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":case"block-scalar":h=ile(t,e,l,r),a&&(h.anchor=a.source.substring(1));break;case"block-map":case"block-seq":case"flow-collection":h=p7e(C7e,t,e,n,r),a&&(h.anchor=a.source.substring(1));break;default:{const p=e.type==="error"?e.message:`Unsupported token (type: ${e.type})`;r(e,"UNEXPECTED_TOKEN",p),h=hz(t,e.offset,void 0,null,n,r),f=!1}}return a&&h.anchor===""&&r(a,"BAD_ALIAS","Anchor cannot be an empty string"),i&&t.options.stringKeys&&(!Ks(h)||typeof h.value!="string"||h.tag&&h.tag!=="tag:yaml.org,2002:str")&&r(l??e,"NON_STRING_KEY","With stringKeys, all keys must be strings"),s&&(h.spaceBefore=!0),o&&(e.type==="scalar"&&e.source===""?h.comment=o:h.commentBefore=o),t.options.keepSourceTokens&&f&&(h.srcToken=e),h}function hz(t,e,n,r,{spaceBefore:i,comment:s,anchor:o,tag:a,end:l},h){const f={type:"scalar",offset:k7e(e,n,r),indent:-1,source:""},p=ile(t,f,a,h);return o&&(p.anchor=o.source.substring(1),p.anchor===""&&h(o,"BAD_ALIAS","Anchor cannot be an empty string")),i&&(p.spaceBefore=!0),s&&(p.comment=s,p.range[2]=l),p}function A7e({options:t},{offset:e,source:n,end:r},i){const s=new $D(n.substring(1));s.source===""&&i(e,"BAD_ALIAS","Alias cannot be an empty string"),s.source.endsWith(":")&&i(e+n.length-1,"BAD_ALIAS","Alias ending in : is ambiguous",!0);const o=e+n.length,a=KC(r,o,t.strict,i);return s.range=[e,o,a.offset],a.comment&&(s.comment=a.comment),s}function E7e(t,e,{offset:n,start:r,value:i,end:s},o){const a=Object.assign({_directives:e},t),l=new uO(void 0,a),h={atKey:!1,atRoot:!0,directives:l.directives,options:l.options,schema:l.schema},f=x2(r,{indicator:"doc-start",next:i??s?.[0],offset:n,onError:o,parentIndent:0,startOnNewline:!0});f.found&&(l.directives.docStart=!0,i&&(i.type==="block-map"||i.type==="block-seq")&&!f.hasNewline&&o(f.end,"MISSING_CHAR","Block collection cannot start on same line with directives-end marker")),l.contents=i?sle(h,i,f,o):hz(h,f.end,r,null,f,o);const p=l.contents.range[2],g=KC(s,p,!1,o);return g.comment&&(l.comment=g.comment),l.range=[n,p,g.offset],l}function jS(t){if(typeof t=="number")return[t,t+1];if(Array.isArray(t))return t.length===2?t:[t[0],t[1]];const{offset:e,source:n}=t;return[e,e+(typeof n=="string"?n.length:1)]}function pX(t){let e="",n=!1,r=!1;for(let i=0;i<t.length;++i){const s=t[i];switch(s[0]){case"#":e+=(e===""?"":r?`

`:`
`)+(s.substring(1)||" "),n=!0,r=!1;break;case"%":t[i+1]?.[0]!=="#"&&(i+=1),n=!1;break;default:n||(r=!0),n=!1}}return{comment:e,afterEmptyLine:r}}class fz{constructor(e={}){this.doc=null,this.atDirectives=!1,this.prelude=[],this.errors=[],this.warnings=[],this.onError=(n,r,i,s)=>{const o=jS(n);s?this.warnings.push(new Jae(o,r,i)):this.errors.push(new ab(o,r,i))},this.directives=new Su({version:e.version||"1.2"}),this.options=e}decorate(e,n){const{comment:r,afterEmptyLine:i}=pX(this.prelude);if(r){const s=e.contents;if(n)e.comment=e.comment?`${e.comment}
${r}`:r;else if(i||e.directives.docStart||!s)e.commentBefore=r;else if(Fo(s)&&!s.flow&&s.items.length>0){let o=s.items[0];ko(o)&&(o=o.key);const a=o.commentBefore;o.commentBefore=a?`${r}
${a}`:r}else{const o=s.commentBefore;s.commentBefore=o?`${r}
${o}`:r}}n?(Array.prototype.push.apply(e.errors,this.errors),Array.prototype.push.apply(e.warnings,this.warnings)):(e.errors=this.errors,e.warnings=this.warnings),this.prelude=[],this.errors=[],this.warnings=[]}streamInfo(){return{comment:pX(this.prelude).comment,directives:this.directives,errors:this.errors,warnings:this.warnings}}*compose(e,n=!1,r=-1){for(const i of e)yield*this.next(i);yield*this.end(n,r)}*next(e){switch(e.type){case"directive":this.directives.add(e.source,(n,r,i)=>{const s=jS(e);s[0]+=n,this.onError(s,"BAD_DIRECTIVE",r,i)}),this.prelude.push(e.source),this.atDirectives=!0;break;case"document":{const n=E7e(this.options,this.directives,e,this.onError);this.atDirectives&&!n.directives.docStart&&this.onError(e,"MISSING_CHAR","Missing directives-end/doc-start indicator line"),this.decorate(n,!1),this.doc&&(yield this.doc),this.doc=n,this.atDirectives=!1;break}case"byte-order-mark":case"space":break;case"comment":case"newline":this.prelude.push(e.source);break;case"error":{const n=e.source?`${e.message}: ${JSON.stringify(e.source)}`:e.message,r=new ab(jS(e),"UNEXPECTED_TOKEN",n);this.atDirectives||!this.doc?this.errors.push(r):this.doc.errors.push(r);break}case"doc-end":{if(!this.doc){const r="Unexpected doc-end without preceding document";this.errors.push(new ab(jS(e),"UNEXPECTED_TOKEN",r));break}this.doc.directives.docEnd=!0;const n=KC(e.end,e.offset+e.source.length,this.doc.options.strict,this.onError);if(this.decorate(this.doc,!0),n.comment){const r=this.doc.comment;this.doc.comment=r?`${r}
${n.comment}`:n.comment}this.doc.range[2]=n.offset;break}default:this.errors.push(new ab(jS(e),"UNEXPECTED_TOKEN",`Unsupported token ${e.type}`))}}*end(e=!1,n=-1){if(this.doc)this.decorate(this.doc,!0),yield this.doc,this.doc=null;else if(e){const r=Object.assign({_directives:this.directives},this.options),i=new uO(void 0,r);this.atDirectives&&this.onError(n,"MISSING_CHAR","Missing directives-end indicator line"),i.range=[0,n,n],this.decorate(i,!1),yield i}}}function T7e(t,e=!0,n){if(t){const r=(i,s,o)=>{const a=typeof i=="number"?i:Array.isArray(i)?i[0]:i.offset;if(n)n(a,s,o);else throw new ab([a,a+1],s,o)};switch(t.type){case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":return nle(t,e,r);case"block-scalar":return tle({options:{strict:e}},t,r)}}return null}function P7e(t,e){const{implicitKey:n=!1,indent:r,inFlow:i=!1,offset:s=-1,type:o="PLAIN"}=e,a=YC({type:o,value:t},{implicitKey:n,indent:r>0?" ".repeat(r):"",inFlow:i,options:{blockQuote:!0,lineWidth:-1}}),l=e.end??[{type:"newline",offset:-1,indent:r,source:`
`}];switch(a[0]){case"|":case">":{const h=a.indexOf(`
`),f=a.substring(0,h),p=a.substring(h+1)+`
`,g=[{type:"block-scalar-header",offset:s,indent:r,source:f}];return ole(g,l)||g.push({type:"newline",offset:-1,indent:r,source:`
`}),{type:"block-scalar",offset:s,indent:r,props:g,source:p}}case'"':return{type:"double-quoted-scalar",offset:s,indent:r,source:a,end:l};case"'":return{type:"single-quoted-scalar",offset:s,indent:r,source:a,end:l};default:return{type:"scalar",offset:s,indent:r,source:a,end:l}}}function D7e(t,e,n={}){let{afterKey:r=!1,implicitKey:i=!1,inFlow:s=!1,type:o}=n,a="indent"in t?t.indent:null;if(r&&typeof a=="number"&&(a+=2),!o)switch(t.type){case"single-quoted-scalar":o="QUOTE_SINGLE";break;case"double-quoted-scalar":o="QUOTE_DOUBLE";break;case"block-scalar":{const h=t.props[0];if(h.type!=="block-scalar-header")throw new Error("Invalid block scalar header");o=h.source[0]===">"?"BLOCK_FOLDED":"BLOCK_LITERAL";break}default:o="PLAIN"}const l=YC({type:o,value:e},{implicitKey:i||a===null,indent:a!==null&&a>0?" ".repeat(a):"",inFlow:s,options:{blockQuote:!0,lineWidth:-1}});switch(l[0]){case"|":case">":I7e(t,l);break;case'"':IR(t,l,"double-quoted-scalar");break;case"'":IR(t,l,"single-quoted-scalar");break;default:IR(t,l,"scalar")}}function I7e(t,e){const n=e.indexOf(`
`),r=e.substring(0,n),i=e.substring(n+1)+`
`;if(t.type==="block-scalar"){const s=t.props[0];if(s.type!=="block-scalar-header")throw new Error("Invalid block scalar header");s.source=r,t.source=i}else{const{offset:s}=t,o="indent"in t?t.indent:-1,a=[{type:"block-scalar-header",offset:s,indent:o,source:r}];ole(a,"end"in t?t.end:void 0)||a.push({type:"newline",offset:-1,indent:o,source:`
`});for(const l of Object.keys(t))l!=="type"&&l!=="offset"&&delete t[l];Object.assign(t,{type:"block-scalar",indent:o,props:a,source:i})}}function ole(t,e){if(e)for(const n of e)switch(n.type){case"space":case"comment":t.push(n);break;case"newline":return t.push(n),!0}return!1}function IR(t,e,n){switch(t.type){case"scalar":case"double-quoted-scalar":case"single-quoted-scalar":t.type=n,t.source=e;break;case"block-scalar":{const r=t.props.slice(1);let i=e.length;t.props[0].type==="block-scalar-header"&&(i-=t.props[0].source.length);for(const s of r)s.offset+=i;delete t.props,Object.assign(t,{type:n,source:e,end:r});break}case"block-map":case"block-seq":{const i={type:"newline",offset:t.offset+e.length,indent:t.indent,source:`
`};delete t.items,Object.assign(t,{type:n,source:e,end:[i]});break}default:{const r="indent"in t?t.indent:-1,i="end"in t&&Array.isArray(t.end)?t.end.filter(s=>s.type==="space"||s.type==="comment"||s.type==="newline"):[];for(const s of Object.keys(t))s!=="type"&&s!=="offset"&&delete t[s];Object.assign(t,{type:n,indent:r,source:e,end:i})}}}const M7e=t=>"type"in t?H6(t):z5(t);function H6(t){switch(t.type){case"block-scalar":{let e="";for(const n of t.props)e+=H6(n);return e+t.source}case"block-map":case"block-seq":{let e="";for(const n of t.items)e+=z5(n);return e}case"flow-collection":{let e=t.start.source;for(const n of t.items)e+=z5(n);for(const n of t.end)e+=n.source;return e}case"document":{let e=z5(t);if(t.end)for(const n of t.end)e+=n.source;return e}default:{let e=t.source;if("end"in t&&t.end)for(const n of t.end)e+=n.source;return e}}}function z5({start:t,key:e,sep:n,value:r}){let i="";for(const s of t)i+=s.source;if(e&&(i+=H6(e)),n)for(const s of n)i+=s.source;return r&&(i+=H6(r)),i}const Z9=Symbol("break visit"),R7e=Symbol("skip children"),ale=Symbol("remove item");function Ub(t,e){"type"in t&&t.type==="document"&&(t={start:t.start,value:t.value}),lle(Object.freeze([]),t,e)}Ub.BREAK=Z9;Ub.SKIP=R7e;Ub.REMOVE=ale;Ub.itemAtPath=(t,e)=>{let n=t;for(const[r,i]of e){const s=n?.[r];if(s&&"items"in s)n=s.items[i];else return}return n};Ub.parentCollection=(t,e)=>{const n=Ub.itemAtPath(t,e.slice(0,-1)),r=e[e.length-1][0],i=n?.[r];if(i&&"items"in i)return i;throw new Error("Parent collection not found")};function lle(t,e,n){let r=n(e,t);if(typeof r=="symbol")return r;for(const i of["key","value"]){const s=e[i];if(s&&"items"in s){for(let o=0;o<s.items.length;++o){const a=lle(Object.freeze(t.concat([[i,o]])),s.items[o],n);if(typeof a=="number")o=a-1;else{if(a===Z9)return Z9;a===ale&&(s.items.splice(o,1),o-=1)}}typeof r=="function"&&i==="key"&&(r=r(e,t))}}return typeof r=="function"?r(e,t):r}const XD="\uFEFF",WD="",GD="",tC="",F7e=t=>!!t&&"items"in t,L7e=t=>!!t&&(t.type==="scalar"||t.type==="single-quoted-scalar"||t.type==="double-quoted-scalar"||t.type==="block-scalar");function $7e(t){switch(t){case XD:return"<BOM>";case WD:return"<DOC>";case GD:return"<FLOW_END>";case tC:return"<SCALAR>";default:return JSON.stringify(t)}}function ule(t){switch(t){case XD:return"byte-order-mark";case WD:return"doc-mode";case GD:return"flow-error-end";case tC:return"scalar";case"---":return"doc-start";case"...":return"doc-end";case"":case`
`:case`\r
`:return"newline";case"-":return"seq-item-ind";case"?":return"explicit-key-ind";case":":return"map-value-ind";case"{":return"flow-map-start";case"}":return"flow-map-end";case"[":return"flow-seq-start";case"]":return"flow-seq-end";case",":return"comma"}switch(t[0]){case" ":case"	":return"space";case"#":return"comment";case"%":return"directive-line";case"*":return"alias";case"&":return"anchor";case"!":return"tag";case"'":return"single-quoted-scalar";case'"':return"double-quoted-scalar";case"|":case">":return"block-scalar-header"}return null}const B7e=Object.freeze(Object.defineProperty({__proto__:null,BOM:XD,DOCUMENT:WD,FLOW_END:GD,SCALAR:tC,createScalarToken:P7e,isCollection:F7e,isScalar:L7e,prettyToken:$7e,resolveAsScalar:T7e,setScalarValue:D7e,stringify:M7e,tokenType:ule,visit:Ub},Symbol.toStringTag,{value:"Module"}));function id(t){switch(t){case void 0:case" ":case`
`:case"\r":case"	":return!0;default:return!1}}const mX=new Set("0123456789ABCDEFabcdef"),N7e=new Set("0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-#;/?:@&=+$_.!~*'()"),P4=new Set(",[]{}"),z7e=new Set(` ,[]{}
\r	`),MR=t=>!t||z7e.has(t);class cle{constructor(){this.atEnd=!1,this.blockScalarIndent=-1,this.blockScalarKeep=!1,this.buffer="",this.flowKey=!1,this.flowLevel=0,this.indentNext=0,this.indentValue=0,this.lineEndPos=null,this.next=null,this.pos=0}*lex(e,n=!1){if(e){if(typeof e!="string")throw TypeError("source is not a string");this.buffer=this.buffer?this.buffer+e:e,this.lineEndPos=null}this.atEnd=!n;let r=this.next??"stream";for(;r&&(n||this.hasChars(1));)r=yield*this.parseNext(r)}atLineEnd(){let e=this.pos,n=this.buffer[e];for(;n===" "||n==="	";)n=this.buffer[++e];return!n||n==="#"||n===`
`?!0:n==="\r"?this.buffer[e+1]===`
`:!1}charAt(e){return this.buffer[this.pos+e]}continueScalar(e){let n=this.buffer[e];if(this.indentNext>0){let r=0;for(;n===" ";)n=this.buffer[++r+e];if(n==="\r"){const i=this.buffer[r+e+1];if(i===`
`||!i&&!this.atEnd)return e+r+1}return n===`
`||r>=this.indentNext||!n&&!this.atEnd?e+r:-1}if(n==="-"||n==="."){const r=this.buffer.substr(e,3);if((r==="---"||r==="...")&&id(this.buffer[e+3]))return-1}return e}getLine(){let e=this.lineEndPos;return(typeof e!="number"||e!==-1&&e<this.pos)&&(e=this.buffer.indexOf(`
`,this.pos),this.lineEndPos=e),e===-1?this.atEnd?this.buffer.substring(this.pos):null:(this.buffer[e-1]==="\r"&&(e-=1),this.buffer.substring(this.pos,e))}hasChars(e){return this.pos+e<=this.buffer.length}setNext(e){return this.buffer=this.buffer.substring(this.pos),this.pos=0,this.lineEndPos=null,this.next=e,null}peek(e){return this.buffer.substr(this.pos,e)}*parseNext(e){switch(e){case"stream":return yield*this.parseStream();case"line-start":return yield*this.parseLineStart();case"block-start":return yield*this.parseBlockStart();case"doc":return yield*this.parseDocument();case"flow":return yield*this.parseFlowCollection();case"quoted-scalar":return yield*this.parseQuotedScalar();case"block-scalar":return yield*this.parseBlockScalar();case"plain-scalar":return yield*this.parsePlainScalar()}}*parseStream(){let e=this.getLine();if(e===null)return this.setNext("stream");if(e[0]===XD&&(yield*this.pushCount(1),e=e.substring(1)),e[0]==="%"){let n=e.length,r=e.indexOf("#");for(;r!==-1;){const s=e[r-1];if(s===" "||s==="	"){n=r-1;break}else r=e.indexOf("#",r+1)}for(;;){const s=e[n-1];if(s===" "||s==="	")n-=1;else break}const i=(yield*this.pushCount(n))+(yield*this.pushSpaces(!0));return yield*this.pushCount(e.length-i),this.pushNewline(),"stream"}if(this.atLineEnd()){const n=yield*this.pushSpaces(!0);return yield*this.pushCount(e.length-n),yield*this.pushNewline(),"stream"}return yield WD,yield*this.parseLineStart()}*parseLineStart(){const e=this.charAt(0);if(!e&&!this.atEnd)return this.setNext("line-start");if(e==="-"||e==="."){if(!this.atEnd&&!this.hasChars(4))return this.setNext("line-start");const n=this.peek(3);if((n==="---"||n==="...")&&id(this.charAt(3)))return yield*this.pushCount(3),this.indentValue=0,this.indentNext=0,n==="---"?"doc":"stream"}return this.indentValue=yield*this.pushSpaces(!1),this.indentNext>this.indentValue&&!id(this.charAt(1))&&(this.indentNext=this.indentValue),yield*this.parseBlockStart()}*parseBlockStart(){const[e,n]=this.peek(2);if(!n&&!this.atEnd)return this.setNext("block-start");if((e==="-"||e==="?"||e===":")&&id(n)){const r=(yield*this.pushCount(1))+(yield*this.pushSpaces(!0));return this.indentNext=this.indentValue+1,this.indentValue+=r,yield*this.parseBlockStart()}return"doc"}*parseDocument(){yield*this.pushSpaces(!0);const e=this.getLine();if(e===null)return this.setNext("doc");let n=yield*this.pushIndicators();switch(e[n]){case"#":yield*this.pushCount(e.length-n);case void 0:return yield*this.pushNewline(),yield*this.parseLineStart();case"{":case"[":return yield*this.pushCount(1),this.flowKey=!1,this.flowLevel=1,"flow";case"}":case"]":return yield*this.pushCount(1),"doc";case"*":return yield*this.pushUntil(MR),"doc";case'"':case"'":return yield*this.parseQuotedScalar();case"|":case">":return n+=yield*this.parseBlockScalarHeader(),n+=yield*this.pushSpaces(!0),yield*this.pushCount(e.length-n),yield*this.pushNewline(),yield*this.parseBlockScalar();default:return yield*this.parsePlainScalar()}}*parseFlowCollection(){let e,n,r=-1;do e=yield*this.pushNewline(),e>0?(n=yield*this.pushSpaces(!1),this.indentValue=r=n):n=0,n+=yield*this.pushSpaces(!0);while(e+n>0);const i=this.getLine();if(i===null)return this.setNext("flow");if((r!==-1&&r<this.indentNext&&i[0]!=="#"||r===0&&(i.startsWith("---")||i.startsWith("..."))&&id(i[3]))&&!(r===this.indentNext-1&&this.flowLevel===1&&(i[0]==="]"||i[0]==="}")))return this.flowLevel=0,yield GD,yield*this.parseLineStart();let s=0;for(;i[s]===",";)s+=yield*this.pushCount(1),s+=yield*this.pushSpaces(!0),this.flowKey=!1;switch(s+=yield*this.pushIndicators(),i[s]){case void 0:return"flow";case"#":return yield*this.pushCount(i.length-s),"flow";case"{":case"[":return yield*this.pushCount(1),this.flowKey=!1,this.flowLevel+=1,"flow";case"}":case"]":return yield*this.pushCount(1),this.flowKey=!0,this.flowLevel-=1,this.flowLevel?"flow":"doc";case"*":return yield*this.pushUntil(MR),"flow";case'"':case"'":return this.flowKey=!0,yield*this.parseQuotedScalar();case":":{const o=this.charAt(1);if(this.flowKey||id(o)||o===",")return this.flowKey=!1,yield*this.pushCount(1),yield*this.pushSpaces(!0),"flow"}default:return this.flowKey=!1,yield*this.parsePlainScalar()}}*parseQuotedScalar(){const e=this.charAt(0);let n=this.buffer.indexOf(e,this.pos+1);if(e==="'")for(;n!==-1&&this.buffer[n+1]==="'";)n=this.buffer.indexOf("'",n+2);else for(;n!==-1;){let s=0;for(;this.buffer[n-1-s]==="\\";)s+=1;if(s%2===0)break;n=this.buffer.indexOf('"',n+1)}const r=this.buffer.substring(0,n);let i=r.indexOf(`
`,this.pos);if(i!==-1){for(;i!==-1;){const s=this.continueScalar(i+1);if(s===-1)break;i=r.indexOf(`
`,s)}i!==-1&&(n=i-(r[i-1]==="\r"?2:1))}if(n===-1){if(!this.atEnd)return this.setNext("quoted-scalar");n=this.buffer.length}return yield*this.pushToIndex(n+1,!1),this.flowLevel?"flow":"doc"}*parseBlockScalarHeader(){this.blockScalarIndent=-1,this.blockScalarKeep=!1;let e=this.pos;for(;;){const n=this.buffer[++e];if(n==="+")this.blockScalarKeep=!0;else if(n>"0"&&n<="9")this.blockScalarIndent=Number(n)-1;else if(n!=="-")break}return yield*this.pushUntil(n=>id(n)||n==="#")}*parseBlockScalar(){let e=this.pos-1,n=0,r;e:for(let s=this.pos;r=this.buffer[s];++s)switch(r){case" ":n+=1;break;case`
`:e=s,n=0;break;case"\r":{const o=this.buffer[s+1];if(!o&&!this.atEnd)return this.setNext("block-scalar");if(o===`
`)break}default:break e}if(!r&&!this.atEnd)return this.setNext("block-scalar");if(n>=this.indentNext){this.blockScalarIndent===-1?this.indentNext=n:this.indentNext=this.blockScalarIndent+(this.indentNext===0?1:this.indentNext);do{const s=this.continueScalar(e+1);if(s===-1)break;e=this.buffer.indexOf(`
`,s)}while(e!==-1);if(e===-1){if(!this.atEnd)return this.setNext("block-scalar");e=this.buffer.length}}let i=e+1;for(r=this.buffer[i];r===" ";)r=this.buffer[++i];if(r==="	"){for(;r==="	"||r===" "||r==="\r"||r===`
`;)r=this.buffer[++i];e=i-1}else if(!this.blockScalarKeep)do{let s=e-1,o=this.buffer[s];o==="\r"&&(o=this.buffer[--s]);const a=s;for(;o===" ";)o=this.buffer[--s];if(o===`
`&&s>=this.pos&&s+1+n>a)e=s;else break}while(!0);return yield tC,yield*this.pushToIndex(e+1,!0),yield*this.parseLineStart()}*parsePlainScalar(){const e=this.flowLevel>0;let n=this.pos-1,r=this.pos-1,i;for(;i=this.buffer[++r];)if(i===":"){const s=this.buffer[r+1];if(id(s)||e&&P4.has(s))break;n=r}else if(id(i)){let s=this.buffer[r+1];if(i==="\r"&&(s===`
`?(r+=1,i=`
`,s=this.buffer[r+1]):n=r),s==="#"||e&&P4.has(s))break;if(i===`
`){const o=this.continueScalar(r+1);if(o===-1)break;r=Math.max(r,o-2)}}else{if(e&&P4.has(i))break;n=r}return!i&&!this.atEnd?this.setNext("plain-scalar"):(yield tC,yield*this.pushToIndex(n+1,!0),e?"flow":"doc")}*pushCount(e){return e>0?(yield this.buffer.substr(this.pos,e),this.pos+=e,e):0}*pushToIndex(e,n){const r=this.buffer.slice(this.pos,e);return r?(yield r,this.pos+=r.length,r.length):(n&&(yield""),0)}*pushIndicators(){switch(this.charAt(0)){case"!":return(yield*this.pushTag())+(yield*this.pushSpaces(!0))+(yield*this.pushIndicators());case"&":return(yield*this.pushUntil(MR))+(yield*this.pushSpaces(!0))+(yield*this.pushIndicators());case"-":case"?":case":":{const e=this.flowLevel>0,n=this.charAt(1);if(id(n)||e&&P4.has(n))return e?this.flowKey&&(this.flowKey=!1):this.indentNext=this.indentValue+1,(yield*this.pushCount(1))+(yield*this.pushSpaces(!0))+(yield*this.pushIndicators())}}return 0}*pushTag(){if(this.charAt(1)==="<"){let e=this.pos+2,n=this.buffer[e];for(;!id(n)&&n!==">";)n=this.buffer[++e];return yield*this.pushToIndex(n===">"?e+1:e,!1)}else{let e=this.pos+1,n=this.buffer[e];for(;n;)if(N7e.has(n))n=this.buffer[++e];else if(n==="%"&&mX.has(this.buffer[e+1])&&mX.has(this.buffer[e+2]))n=this.buffer[e+=3];else break;return yield*this.pushToIndex(e,!1)}}*pushNewline(){const e=this.buffer[this.pos];return e===`
`?yield*this.pushCount(1):e==="\r"&&this.charAt(1)===`
`?yield*this.pushCount(2):0}*pushSpaces(e){let n=this.pos-1,r;do r=this.buffer[++n];while(r===" "||e&&r==="	");const i=n-this.pos;return i>0&&(yield this.buffer.substr(this.pos,i),this.pos=n),i}*pushUntil(e){let n=this.pos,r=this.buffer[n];for(;!e(r);)r=this.buffer[++n];return yield*this.pushToIndex(n,!1)}}class hle{constructor(){this.lineStarts=[],this.addNewLine=e=>this.lineStarts.push(e),this.linePos=e=>{let n=0,r=this.lineStarts.length;for(;n<r;){const s=n+r>>1;this.lineStarts[s]<e?n=s+1:r=s}if(this.lineStarts[n]===e)return{line:n+1,col:1};if(n===0)return{line:0,col:e};const i=this.lineStarts[n-1];return{line:n,col:e-i+1}}}}function Sy(t,e){for(let n=0;n<t.length;++n)if(t[n].type===e)return!0;return!1}function gX(t){for(let e=0;e<t.length;++e)switch(t[e].type){case"space":case"comment":case"newline":break;default:return e}return-1}function fle(t){switch(t?.type){case"alias":case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":case"flow-collection":return!0;default:return!1}}function D4(t){switch(t.type){case"document":return t.start;case"block-map":{const e=t.items[t.items.length-1];return e.sep??e.start}case"block-seq":return t.items[t.items.length-1].start;default:return[]}}function Ax(t){if(t.length===0)return[];let e=t.length;e:for(;--e>=0;)switch(t[e].type){case"doc-start":case"explicit-key-ind":case"map-value-ind":case"seq-item-ind":case"newline":break e}for(;t[++e]?.type==="space";);return t.splice(e,t.length)}function yX(t){if(t.start.type==="flow-seq-start")for(const e of t.items)e.sep&&!e.value&&!Sy(e.start,"explicit-key-ind")&&!Sy(e.sep,"map-value-ind")&&(e.key&&(e.value=e.key),delete e.key,fle(e.value)?e.value.end?Array.prototype.push.apply(e.value.end,e.sep):e.value.end=e.sep:Array.prototype.push.apply(e.start,e.sep),delete e.sep)}class dz{constructor(e){this.atNewLine=!0,this.atScalar=!1,this.indent=0,this.offset=0,this.onKeyLine=!1,this.stack=[],this.source="",this.type="",this.lexer=new cle,this.onNewLine=e}*parse(e,n=!1){this.onNewLine&&this.offset===0&&this.onNewLine(0);for(const r of this.lexer.lex(e,n))yield*this.next(r);n||(yield*this.end())}*next(e){if(this.source=e,this.atScalar){this.atScalar=!1,yield*this.step(),this.offset+=e.length;return}const n=ule(e);if(n)if(n==="scalar")this.atNewLine=!1,this.atScalar=!0,this.type="scalar";else{switch(this.type=n,yield*this.step(),n){case"newline":this.atNewLine=!0,this.indent=0,this.onNewLine&&this.onNewLine(this.offset+e.length);break;case"space":this.atNewLine&&e[0]===" "&&(this.indent+=e.length);break;case"explicit-key-ind":case"map-value-ind":case"seq-item-ind":this.atNewLine&&(this.indent+=e.length);break;case"doc-mode":case"flow-error-end":return;default:this.atNewLine=!1}this.offset+=e.length}else{const r=`Not a YAML token: ${e}`;yield*this.pop({type:"error",offset:this.offset,message:r,source:e}),this.offset+=e.length}}*end(){for(;this.stack.length>0;)yield*this.pop()}get sourceToken(){return{type:this.type,offset:this.offset,indent:this.indent,source:this.source}}*step(){const e=this.peek(1);if(this.type==="doc-end"&&(!e||e.type!=="doc-end")){for(;this.stack.length>0;)yield*this.pop();this.stack.push({type:"doc-end",offset:this.offset,source:this.source});return}if(!e)return yield*this.stream();switch(e.type){case"document":return yield*this.document(e);case"alias":case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":return yield*this.scalar(e);case"block-scalar":return yield*this.blockScalar(e);case"block-map":return yield*this.blockMap(e);case"block-seq":return yield*this.blockSequence(e);case"flow-collection":return yield*this.flowCollection(e);case"doc-end":return yield*this.documentEnd(e)}yield*this.pop()}peek(e){return this.stack[this.stack.length-e]}*pop(e){const n=e??this.stack.pop();if(!n)yield{type:"error",offset:this.offset,source:"",message:"Tried to pop an empty stack"};else if(this.stack.length===0)yield n;else{const r=this.peek(1);switch(n.type==="block-scalar"?n.indent="indent"in r?r.indent:0:n.type==="flow-collection"&&r.type==="document"&&(n.indent=0),n.type==="flow-collection"&&yX(n),r.type){case"document":r.value=n;break;case"block-scalar":r.props.push(n);break;case"block-map":{const i=r.items[r.items.length-1];if(i.value){r.items.push({start:[],key:n,sep:[]}),this.onKeyLine=!0;return}else if(i.sep)i.value=n;else{Object.assign(i,{key:n,sep:[]}),this.onKeyLine=!i.explicitKey;return}break}case"block-seq":{const i=r.items[r.items.length-1];i.value?r.items.push({start:[],value:n}):i.value=n;break}case"flow-collection":{const i=r.items[r.items.length-1];!i||i.value?r.items.push({start:[],key:n,sep:[]}):i.sep?i.value=n:Object.assign(i,{key:n,sep:[]});return}default:yield*this.pop(),yield*this.pop(n)}if((r.type==="document"||r.type==="block-map"||r.type==="block-seq")&&(n.type==="block-map"||n.type==="block-seq")){const i=n.items[n.items.length-1];i&&!i.sep&&!i.value&&i.start.length>0&&gX(i.start)===-1&&(n.indent===0||i.start.every(s=>s.type!=="comment"||s.indent<n.indent))&&(r.type==="document"?r.end=i.start:r.items.push({start:i.start}),n.items.splice(-1,1))}}}*stream(){switch(this.type){case"directive-line":yield{type:"directive",offset:this.offset,source:this.source};return;case"byte-order-mark":case"space":case"comment":case"newline":yield this.sourceToken;return;case"doc-mode":case"doc-start":{const e={type:"document",offset:this.offset,start:[]};this.type==="doc-start"&&e.start.push(this.sourceToken),this.stack.push(e);return}}yield{type:"error",offset:this.offset,message:`Unexpected ${this.type} token in YAML stream`,source:this.source}}*document(e){if(e.value)return yield*this.lineEnd(e);switch(this.type){case"doc-start":{gX(e.start)!==-1?(yield*this.pop(),yield*this.step()):e.start.push(this.sourceToken);return}case"anchor":case"tag":case"space":case"comment":case"newline":e.start.push(this.sourceToken);return}const n=this.startBlockValue(e);n?this.stack.push(n):yield{type:"error",offset:this.offset,message:`Unexpected ${this.type} token in YAML document`,source:this.source}}*scalar(e){if(this.type==="map-value-ind"){const n=D4(this.peek(2)),r=Ax(n);let i;e.end?(i=e.end,i.push(this.sourceToken),delete e.end):i=[this.sourceToken];const s={type:"block-map",offset:e.offset,indent:e.indent,items:[{start:r,key:e,sep:i}]};this.onKeyLine=!0,this.stack[this.stack.length-1]=s}else yield*this.lineEnd(e)}*blockScalar(e){switch(this.type){case"space":case"comment":case"newline":e.props.push(this.sourceToken);return;case"scalar":if(e.source=this.source,this.atNewLine=!0,this.indent=0,this.onNewLine){let n=this.source.indexOf(`
`)+1;for(;n!==0;)this.onNewLine(this.offset+n),n=this.source.indexOf(`
`,n)+1}yield*this.pop();break;default:yield*this.pop(),yield*this.step()}}*blockMap(e){const n=e.items[e.items.length-1];switch(this.type){case"newline":if(this.onKeyLine=!1,n.value){const r="end"in n.value?n.value.end:void 0;(Array.isArray(r)?r[r.length-1]:void 0)?.type==="comment"?r?.push(this.sourceToken):e.items.push({start:[this.sourceToken]})}else n.sep?n.sep.push(this.sourceToken):n.start.push(this.sourceToken);return;case"space":case"comment":if(n.value)e.items.push({start:[this.sourceToken]});else if(n.sep)n.sep.push(this.sourceToken);else{if(this.atIndentedComment(n.start,e.indent)){const i=e.items[e.items.length-2]?.value?.end;if(Array.isArray(i)){Array.prototype.push.apply(i,n.start),i.push(this.sourceToken),e.items.pop();return}}n.start.push(this.sourceToken)}return}if(this.indent>=e.indent){const r=!this.onKeyLine&&this.indent===e.indent,i=r&&(n.sep||n.explicitKey)&&this.type!=="seq-item-ind";let s=[];if(i&&n.sep&&!n.value){const o=[];for(let a=0;a<n.sep.length;++a){const l=n.sep[a];switch(l.type){case"newline":o.push(a);break;case"space":break;case"comment":l.indent>e.indent&&(o.length=0);break;default:o.length=0}}o.length>=2&&(s=n.sep.splice(o[1]))}switch(this.type){case"anchor":case"tag":i||n.value?(s.push(this.sourceToken),e.items.push({start:s}),this.onKeyLine=!0):n.sep?n.sep.push(this.sourceToken):n.start.push(this.sourceToken);return;case"explicit-key-ind":!n.sep&&!n.explicitKey?(n.start.push(this.sourceToken),n.explicitKey=!0):i||n.value?(s.push(this.sourceToken),e.items.push({start:s,explicitKey:!0})):this.stack.push({type:"block-map",offset:this.offset,indent:this.indent,items:[{start:[this.sourceToken],explicitKey:!0}]}),this.onKeyLine=!0;return;case"map-value-ind":if(n.explicitKey)if(n.sep)if(n.value)e.items.push({start:[],key:null,sep:[this.sourceToken]});else if(Sy(n.sep,"map-value-ind"))this.stack.push({type:"block-map",offset:this.offset,indent:this.indent,items:[{start:s,key:null,sep:[this.sourceToken]}]});else if(fle(n.key)&&!Sy(n.sep,"newline")){const o=Ax(n.start),a=n.key,l=n.sep;l.push(this.sourceToken),delete n.key,delete n.sep,this.stack.push({type:"block-map",offset:this.offset,indent:this.indent,items:[{start:o,key:a,sep:l}]})}else s.length>0?n.sep=n.sep.concat(s,this.sourceToken):n.sep.push(this.sourceToken);else if(Sy(n.start,"newline"))Object.assign(n,{key:null,sep:[this.sourceToken]});else{const o=Ax(n.start);this.stack.push({type:"block-map",offset:this.offset,indent:this.indent,items:[{start:o,key:null,sep:[this.sourceToken]}]})}else n.sep?n.value||i?e.items.push({start:s,key:null,sep:[this.sourceToken]}):Sy(n.sep,"map-value-ind")?this.stack.push({type:"block-map",offset:this.offset,indent:this.indent,items:[{start:[],key:null,sep:[this.sourceToken]}]}):n.sep.push(this.sourceToken):Object.assign(n,{key:null,sep:[this.sourceToken]});this.onKeyLine=!0;return;case"alias":case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":{const o=this.flowScalar(this.type);i||n.value?(e.items.push({start:s,key:o,sep:[]}),this.onKeyLine=!0):n.sep?this.stack.push(o):(Object.assign(n,{key:o,sep:[]}),this.onKeyLine=!0);return}default:{const o=this.startBlockValue(e);if(o){if(o.type==="block-seq"){if(!n.explicitKey&&n.sep&&!Sy(n.sep,"newline")){yield*this.pop({type:"error",offset:this.offset,message:"Unexpected block-seq-ind on same line with key",source:this.source});return}}else r&&e.items.push({start:s});this.stack.push(o);return}}}}yield*this.pop(),yield*this.step()}*blockSequence(e){const n=e.items[e.items.length-1];switch(this.type){case"newline":if(n.value){const r="end"in n.value?n.value.end:void 0;(Array.isArray(r)?r[r.length-1]:void 0)?.type==="comment"?r?.push(this.sourceToken):e.items.push({start:[this.sourceToken]})}else n.start.push(this.sourceToken);return;case"space":case"comment":if(n.value)e.items.push({start:[this.sourceToken]});else{if(this.atIndentedComment(n.start,e.indent)){const i=e.items[e.items.length-2]?.value?.end;if(Array.isArray(i)){Array.prototype.push.apply(i,n.start),i.push(this.sourceToken),e.items.pop();return}}n.start.push(this.sourceToken)}return;case"anchor":case"tag":if(n.value||this.indent<=e.indent)break;n.start.push(this.sourceToken);return;case"seq-item-ind":if(this.indent!==e.indent)break;n.value||Sy(n.start,"seq-item-ind")?e.items.push({start:[this.sourceToken]}):n.start.push(this.sourceToken);return}if(this.indent>e.indent){const r=this.startBlockValue(e);if(r){this.stack.push(r);return}}yield*this.pop(),yield*this.step()}*flowCollection(e){const n=e.items[e.items.length-1];if(this.type==="flow-error-end"){let r;do yield*this.pop(),r=this.peek(1);while(r&&r.type==="flow-collection")}else if(e.end.length===0){switch(this.type){case"comma":case"explicit-key-ind":!n||n.sep?e.items.push({start:[this.sourceToken]}):n.start.push(this.sourceToken);return;case"map-value-ind":!n||n.value?e.items.push({start:[],key:null,sep:[this.sourceToken]}):n.sep?n.sep.push(this.sourceToken):Object.assign(n,{key:null,sep:[this.sourceToken]});return;case"space":case"comment":case"newline":case"anchor":case"tag":!n||n.value?e.items.push({start:[this.sourceToken]}):n.sep?n.sep.push(this.sourceToken):n.start.push(this.sourceToken);return;case"alias":case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":{const i=this.flowScalar(this.type);!n||n.value?e.items.push({start:[],key:i,sep:[]}):n.sep?this.stack.push(i):Object.assign(n,{key:i,sep:[]});return}case"flow-map-end":case"flow-seq-end":e.end.push(this.sourceToken);return}const r=this.startBlockValue(e);r?this.stack.push(r):(yield*this.pop(),yield*this.step())}else{const r=this.peek(2);if(r.type==="block-map"&&(this.type==="map-value-ind"&&r.indent===e.indent||this.type==="newline"&&!r.items[r.items.length-1].sep))yield*this.pop(),yield*this.step();else if(this.type==="map-value-ind"&&r.type!=="flow-collection"){const i=D4(r),s=Ax(i);yX(e);const o=e.end.splice(1,e.end.length);o.push(this.sourceToken);const a={type:"block-map",offset:e.offset,indent:e.indent,items:[{start:s,key:e,sep:o}]};this.onKeyLine=!0,this.stack[this.stack.length-1]=a}else yield*this.lineEnd(e)}}flowScalar(e){if(this.onNewLine){let n=this.source.indexOf(`
`)+1;for(;n!==0;)this.onNewLine(this.offset+n),n=this.source.indexOf(`
`,n)+1}return{type:e,offset:this.offset,indent:this.indent,source:this.source}}startBlockValue(e){switch(this.type){case"alias":case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":return this.flowScalar(this.type);case"block-scalar-header":return{type:"block-scalar",offset:this.offset,indent:this.indent,props:[this.sourceToken],source:""};case"flow-map-start":case"flow-seq-start":return{type:"flow-collection",offset:this.offset,indent:this.indent,start:this.sourceToken,items:[],end:[]};case"seq-item-ind":return{type:"block-seq",offset:this.offset,indent:this.indent,items:[{start:[this.sourceToken]}]};case"explicit-key-ind":{this.onKeyLine=!0;const n=D4(e),r=Ax(n);return r.push(this.sourceToken),{type:"block-map",offset:this.offset,indent:this.indent,items:[{start:r,explicitKey:!0}]}}case"map-value-ind":{this.onKeyLine=!0;const n=D4(e),r=Ax(n);return{type:"block-map",offset:this.offset,indent:this.indent,items:[{start:r,key:null,sep:[this.sourceToken]}]}}}return null}atIndentedComment(e,n){return this.type!=="comment"||this.indent<=n?!1:e.every(r=>r.type==="newline"||r.type==="space")}*documentEnd(e){this.type!=="doc-mode"&&(e.end?e.end.push(this.sourceToken):e.end=[this.sourceToken],this.type==="newline"&&(yield*this.pop()))}*lineEnd(e){switch(this.type){case"comma":case"doc-start":case"doc-end":case"flow-seq-end":case"flow-map-end":case"map-value-ind":yield*this.pop(),yield*this.step();break;case"newline":this.onKeyLine=!1;case"space":case"comment":default:e.end?e.end.push(this.sourceToken):e.end=[this.sourceToken],this.type==="newline"&&(yield*this.pop())}}}function dle(t){const e=t.prettyErrors!==!1;return{lineCounter:t.lineCounter||e&&new hle||null,prettyErrors:e}}function Q7e(t,e={}){const{lineCounter:n,prettyErrors:r}=dle(e),i=new dz(n?.addNewLine),s=new fz(e),o=Array.from(s.compose(i.parse(t)));if(r&&n)for(const a of o)a.errors.forEach(Y6(t,n)),a.warnings.forEach(Y6(t,n));return o.length>0?o:Object.assign([],{empty:!0},s.streamInfo())}function ple(t,e={}){const{lineCounter:n,prettyErrors:r}=dle(e),i=new dz(n?.addNewLine),s=new fz(e);let o=null;for(const a of s.compose(i.parse(t),!0,t.length))if(!o)o=a;else if(o.options.logLevel!=="silent"){o.errors.push(new ab(a.range.slice(0,2),"MULTIPLE_DOCS","Source contains multiple documents; please use YAML.parseAllDocuments()"));break}return r&&n&&(o.errors.forEach(Y6(t,n)),o.warnings.forEach(Y6(t,n))),o}function j7e(t,e,n){let r;typeof e=="function"?r=e:n===void 0&&e&&typeof e=="object"&&(n=e);const i=ple(t,n);if(!i)return null;if(i.warnings.forEach(s=>Rae(i.options.logLevel,s)),i.errors.length>0){if(i.options.logLevel!=="silent")throw i.errors[0];i.errors=[]}return i.toJS(Object.assign({reviver:r},n))}function U7e(t,e,n){let r=null;if(typeof e=="function"||Array.isArray(e)?r=e:n===void 0&&e&&(n=e),typeof n=="string"&&(n=n.length),typeof n=="number"){const i=Math.round(n);n=i<1?void 0:i>8?{indent:8}:{indent:i}}if(t===void 0){const{keepUndefined:i}=n??e??{};if(!i)return}return c_(t)&&!r?t.toString(n):new uO(t,r,n).toString(n)}const V7e=Object.freeze(Object.defineProperty({__proto__:null,Alias:$D,CST:B7e,Composer:fz,Document:uO,Lexer:cle,LineCounter:hle,Pair:tu,Parser:dz,Scalar:Nr,Schema:ZD,YAMLError:cz,YAMLMap:hh,YAMLParseError:ab,YAMLSeq:b1,YAMLWarning:Jae,isAlias:A1,isCollection:Fo,isDocument:c_,isMap:sO,isNode:$o,isPair:ko,isScalar:Ks,isSeq:oO,parse:j7e,parseAllDocuments:Q7e,parseDocument:ple,stringify:U7e,visit:h_,visitAsync:LD},Symbol.toStringTag,{value:"Module"}));function q7e(t){let e=null;try{e=V7e.parse(t.doc.toString())}catch{}const n=EN(t,Ws.YAML);return{data:e,pointers:n}}const mle=t=>{switch(t){case Ws.JSON:return kRe;case Ws.JSON5:return _ae;case Ws.YAML:return q7e}};function Z7e(t){return Object.entries(t)}function O3(t,e){if(typeof t=="string"||typeof t!="object"||t===null)return t;if(Array.isArray(t))return t.map(i=>O3(i,e));if(t instanceof Map){const i=new Map;for(const[s,o]of t){const a=s,l=O3(o,e);i.set(a,l)}return i}if(t instanceof Set){const i=new Set;for(const s of t){const o=O3(s,e);i.add(o)}return i}const n={};function r(i,s,o,a){o===i&&a===s?n[o]=O3(s,e):n[o]=a}for(const[i,s]of Z7e(t)){const o=e(i,s);if(o.length===2&&typeof o[0]=="string")r(i,s,o[0],o[1]);else for(const[a,l]of o)r(i,s,a,l)}return n}var X7e=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};class W7e{constructor(){this.completions=new Map,this.reservedKeys=new Set}reserve(e){this.reservedKeys.add(e)}add(e){this.reservedKeys.has(e.label)||this.completions.set(e.label,e)}}function W3(t){return!(!t||au(t)||t.name==="UnknownPropertyError"||t.type==="undefined")}class gle{constructor(e){var n,r,i;this.opts=e,this.originalSchema=null,this.schema=null,this.laxSchema=null,this.mode=Ws.JSON,this.mode=(n=e.mode)!==null&&n!==void 0?n:Ws.JSON,this.parser=(i=(r=this.opts)===null||r===void 0?void 0:r.jsonParser)!==null&&i!==void 0?i:mle(this.mode)}doComplete(e){var n;const r=TN(e.state);if(this.originalSchema!==r&&(this.schema=(n=Nv(r,r))!==null&&n!==void 0?n:r,this.laxSchema=Y7e(this.schema)),!this.schema||!this.laxSchema)return[];To.log("xxx","trying with original schema");const i=this.doCompleteForSchema(e,this.schema);return i.options.length!==0?i:(To.log("xxx","no completions with original schema, trying with lax schema"),this.doCompleteForSchema(e,this.laxSchema))}doCompleteForSchema(e,n){var r,i;const s={from:e.pos,to:e.pos,options:[],filter:!1},o=e.state.doc.sliceString(0);let a=rR(e.state,e.pos),l=e.state.sliceDoc(a.from,e.pos).replace(/^(["'])/,"");if(To.log("xxx","node",a,"prefix",l,"ctx",e),!(D5(a,this.mode)||g4(a,this.mode))&&!e.explicit)return To.log("xxx","no completions for non-word/primitive",a),s;const h=Vx(e.state.doc,a),f=Vx(e.state.doc,a,!1);if(a&&(D5(a,this.mode)||g4(a,this.mode)))s.from=a.from,s.to=a.to;else{const x=e.matchBefore(/[A-Za-z0-9._]*/),k=e.pos-h.length;To.log("xxx","overwriteStart after",k,"ctx.pos",e.pos,"word",x,"currentWord",h,"=>",o[k-1],"..",o[k],"..",o),s.from=a.name===Zr.INVALID?(r=x?.from)!==null&&r!==void 0?r:e.pos:k,s.to=e.pos}const p=new W7e;let g=!0;const b=Vq(a,Zr.PROPERTY_NAME,this.mode);if(b&&(To.log("xxx","closestPropertyNameNode",b,"node",a),a=b),g4(a,this.mode)){To.log("xxx","isPropertyNameNode",a);const x=a.parent;if(x){const k=Uq(x,this.mode);g=!k||k.name===Zr.INVALID&&k.from-k.to===0||(k.parent?jC(k.parent).length<=1:!1),To.log("xxx","addValue",g,Uq(x,this.mode),a),a=(i=Vq(x,Zr.OBJECT,this.mode))!==null&&i!==void 0?i:null}}if(To.log("xxx",a,h,e,"node at pos",rR(e.state,e.pos)),a&&[Zr.OBJECT,Zr.JSON_TEXT].includes(oa(a.name,this.mode))&&(g4(rR(e.state,e.pos),this.mode)||b)){if(a.from===e.pos)return To.log("xxx","no completions for just before opening brace"),s;this.getPropertyCompletions(n,e,a,p,g,f)}else{const x={},k=this.getValueCompletions(n,e,x,p);To.log("xxx","getValueCompletions res",k)}return s.options=Array.from(p.completions.values()).filter(x=>P5(x.label).startsWith(l)),To.log("xxx","result",s,"prefix",l,"collector.completions",p.completions,"reservedKeys",p.reservedKeys),s}applySnippetCompletion(e){return wu(typeof e.apply!="string"?e.label:e.apply,e)}getPropertyCompletions(e,n,r,i,s,o){const a=i5e(r,Zr.PROPERTY,this.mode);To.log("xxx","getPropertyCompletions",r,n,a),a.forEach(h=>{const f=Vx(n.state.doc,w9(h,Zr.PROPERTY_NAME,this.mode));i.reserve(P5(f))});const l=this.getSchemas(e,n);To.log("xxx","propertyCompletion schemas",l),l.forEach(h=>{if(typeof h!="object")return;const f=h.properties;f&&Object.entries(f).forEach(([g,b])=>{var x,k;if(typeof b=="object"){const T=(x=b.description)!==null&&x!==void 0?x:"",I=(k=b.type)!==null&&k!==void 0?k:"",M=Array.isArray(I)?I.toString():I,B={label:g,apply:this.getInsertTextForProperty(g,s,o,e,b),type:"property",detail:M,info:()=>Dp("div",{inner:Ew(T)})};i.add(this.applySnippetCompletion(B))}});const p=h.propertyNames;if(typeof p=="object"&&(p.enum&&p.enum.forEach(g=>{const b=g?.toString();if(b){const x={label:b,apply:this.getInsertTextForProperty(b,s,o,e),type:"property"};i.add(this.applySnippetCompletion(x))}}),p.const)){const g=p.const.toString(),b={label:g,apply:this.getInsertTextForProperty(g,s,o,e),type:"property"};i.add(this.applySnippetCompletion(b))}})}getInsertTextForProperty(e,n,r,i,s){s=s&&Nv(s,i);let o=this.getInsertTextForPropertyName(e,r);if(!n)return o;o+=": ";let a,l=0;if(typeof s=="object"){if(typeof s.default<"u")a||(a=this.getInsertTextForGuessedValue(s.default,"")),l++;else if(s.enum&&(!a&&s.enum.length===1&&(a=this.getInsertTextForGuessedValue(s.enum[0],"")),l+=s.enum.length),typeof s.const<"u"&&(a||(a=this.getInsertTextForGuessedValue(s.const,"")),l++),Array.isArray(s.examples)&&s.examples.length&&(a||(a=this.getInsertTextForGuessedValue(s.examples[0],"")),l+=s.examples.length),a===void 0&&l===0){let h=Array.isArray(s.type)?s.type[0]:s.type;switch(h||(s.properties?h="object":s.items&&(h="array")),h){case"boolean":a="#{}";break;case"string":a=this.getInsertTextForString("");break;case"object":switch(this.mode){case Ws.JSON5:a="{#{}}";break;case Ws.YAML:a="#{}";break;default:a="{#{}}";break}break;case"array":a="[#{}]";break;case"number":case"integer":a="#{0}";break;case"null":a="#{null}";break;default:a="#{}";break}}}return(!a||l>1)&&(To.log("xxx","value",a,"nValueProposals",l,s),a="#{}"),o+a}getInsertTextForPropertyName(e,n){switch(this.mode){case Ws.JSON5:case Ws.YAML:return n.startsWith('"')?`"${e}"`:n.startsWith("'")?`'${e}'`:e;default:return`"${e}"`}}getInsertTextForString(e,n="#"){switch(this.mode){case Ws.JSON5:return`'${n}{${e}}'`;case Ws.YAML:return`${n}{${e}}`;default:return`"${n}{${e}}"`}}getInsertTextForGuessedValue(e,n=""){switch(typeof e){case"object":return e===null?"${null}"+n:this.getInsertTextForValue(e,n);case"string":{let r=JSON.stringify(e);return r=r.substr(1,r.length-2),r=this.getInsertTextForPlainText(r),this.getInsertTextForString(r,"$")+n}case"number":case"boolean":return"${"+JSON.stringify(e)+"}"+n}return this.getInsertTextForValue(e,n)}getInsertTextForPlainText(e){return e.replace(/[\\$}]/g,"\\$&")}getInsertTextForValue(e,n){const r=JSON.stringify(e,null,"	");return r==="{}"?"{#{}}"+n:r==="[]"?"[#{}]"+n:this.getInsertTextForPlainText(r+n)}getValueCompletions(e,n,r,i){let s=ws(n.state).resolveInner(n.pos,-1),o=null,a;if(To.log("xxx","getValueCompletions",s,n),s&&D5(s,this.mode)&&(o=s,s=s.parent),!s){this.addSchemaValueCompletions(e,r,i);return}if(oa(s.name,this.mode)===Zr.PROPERTY){const h=w9(s,Zr.PROPERTY_NAME,this.mode);h&&(a=Vx(n.state.doc,h),s=s.parent)}if(To.log("xxx","node",s,"parentKey",a),s&&(a!==void 0||oa(s.name,this.mode)===Zr.ARRAY)){const h=this.getSchemas(e,n);for(const f of h){if(typeof f!="object")return;if(oa(s.name,this.mode)===Zr.ARRAY&&f.items){let p=i;if(f.uniqueItems&&(p=Object.assign(Object.assign({},p),{add(g){p.completions.has(g.label)||i.add(g)},reserve(g){i.reserve(g)}})),Array.isArray(f.items)){let g=0;if(o){const x=xse(s,o,this.mode);x>=0&&(g=x)}const b=f.items[g];b&&this.addSchemaValueCompletions(b,r,p)}else this.addSchemaValueCompletions(f.items,r,p)}if((f.type==null||f.type!=="object")&&this.addSchemaValueCompletions(f,r,i),a!==void 0){let p=!1;if(f.properties){const g=f.properties[a];g&&(p=!0,this.addSchemaValueCompletions(g,r,i))}if(f.patternProperties&&!p)for(const g of Object.keys(f.patternProperties)){const b=this.extendedRegExp(g);if(b?.test(a)){p=!0;const x=f.patternProperties[g];x&&this.addSchemaValueCompletions(x,r,i)}}if(f.additionalProperties&&!p){const g=f.additionalProperties;this.addSchemaValueCompletions(g,r,i)}}r.boolean&&(this.addBooleanValueCompletion(!0,i),this.addBooleanValueCompletion(!1,i)),r.null&&this.addNullValueCompletion(i)}}return{valuePrefix:o?Vx(n.state.doc,o,!0,!1):""}}addSchemaValueCompletions(e,n,r){typeof e=="object"&&(this.addEnumValueCompletions(e,r),this.addDefaultValueCompletions(e,r),this.collectTypes(e,n),Array.isArray(e.allOf)&&e.allOf.forEach(i=>this.addSchemaValueCompletions(i,n,r)),Array.isArray(e.anyOf)&&e.anyOf.forEach(i=>this.addSchemaValueCompletions(i,n,r)),Array.isArray(e.oneOf)&&e.oneOf.forEach(i=>this.addSchemaValueCompletions(i,n,r)))}addDefaultValueCompletions(e,n,r=0){let i=!1;if(typeof e.default<"u"){let s=e.type,o=e.default;for(let l=r;l>0;l--)o=[o],s="array";const a=Object.assign(Object.assign({type:s?.toString()},this.getAppliedValue(o)),{detail:"Default value"});n.add(a),i=!0}Array.isArray(e.examples)&&e.examples.forEach(s=>{let o=e.type,a=s;for(let l=r;l>0;l--)a=[a],o="array";n.add(Object.assign({type:o?.toString()},this.getAppliedValue(a))),i=!0}),!i&&typeof e.items=="object"&&!Array.isArray(e.items)&&r<5&&this.addDefaultValueCompletions(e.items,n,r+1)}addEnumValueCompletions(e,n){var r,i;if(typeof e.const<"u"&&n.add(Object.assign(Object.assign({type:(r=e.type)===null||r===void 0?void 0:r.toString()},this.getAppliedValue(e.const)),{info:e.description})),Array.isArray(e.enum))for(let s=0,o=e.enum.length;s<o;s++){const a=e.enum[s];n.add(Object.assign(Object.assign({type:(i=e.type)===null||i===void 0?void 0:i.toString()},this.getAppliedValue(a)),{info:e.description}))}}addBooleanValueCompletion(e,n){n.add({type:"boolean",label:e?"true":"false"})}addNullValueCompletion(e){e.add({type:"null",label:"null"})}collectTypes(e,n){if(Array.isArray(e.enum)||typeof e.const<"u")return;const r=e.type;Array.isArray(r)?r.forEach(i=>n[i]=!0):r&&(n[r]=!0)}getSchemas(e,n){var r,i,s;const{data:o}=this.parser(n.state),a=new loe(e);let l=bse(n.state,n.pos,-1,this.mode);if(l===""&&(l=void 0),l!=null&&l.endsWith("/")){l=l.substring(0,l.length-1);const x=vX(e,o,l);if(x!=null)return[x]}let h=l?.replace(/\/[^/]*$/,"");h===""&&(h=void 0);const f=vX(e,o,h),p=l?.split("/").pop(),g=p==null||p in((r=f?.properties)!==null&&r!==void 0?r:{});let b=a.getSchema({pointer:l,data:o??void 0});return!g&&b?.type==="null"&&this.mode==="yaml"&&(b=void 0),To.log("xxxx","draft.getSchema",b,"data",o,"pointer",l,"pointerPointsToKnownProperty",g),au(b)&&(b=(i=b.data)===null||i===void 0?void 0:i.schema),!W3(b)&&f?[f]:(W3(b)||(b=a.getSchema({pointer:h}),l=h),To.log("xxx","pointer..",JSON.stringify(l)),!W3(b)&&(!l||l==="/")&&(b=(s=Nv(e,e))!==null&&s!==void 0?s:e),To.log("xxx","subSchema..",b),b?Array.isArray(b.allOf)?[b,...b.allOf.map(x=>Nv(x,e))]:Array.isArray(b.oneOf)?[b,...b.oneOf.map(x=>Nv(x,e))]:Array.isArray(b.anyOf)?[b,...b.anyOf.map(x=>Nv(x,e))]:[b]:[])}getAppliedValue(e){const n=P5(JSON.stringify(e));switch(this.mode){case Ws.JSON5:return{label:n,apply:n5e(JSON.stringify(e))};case Ws.YAML:return{label:n,apply:n};default:return{label:n,apply:JSON.stringify(e)}}}getValueFromLabel(e){return JSON.parse(e)}extendedRegExp(e){let n="";e.startsWith("(?i)")&&(e=e.substring(4),n="i");try{return new RegExp(e,n+"u")}catch{try{return new RegExp(e,n)}catch{return}}}}function G7e(t={}){const e=new gle(t);return function(r){return e.doComplete(r)}}function Y7e(t){return O3(t,(e,n)=>e==="additionalProperties"&&n===!1?[]:e==="required"&&Array.isArray(n)?[]:e==="unevaluatedProperties"&&n===!1?[]:e==="unevaluatedItems"&&n===!1?[]:[e,n])}function vX(t,e,n){const r=new loe(t),i=r.getSchema({pointer:n,data:e??void 0});if(!W3(i))return;const s=yle(r,i),o={};for(let g of s){let b=K7e(n,g);const x=r.getSchema({pointer:b,data:e??void 0});W3(x)&&Object.assign(o,{[g]:x})}if(s.length===0||Object.keys(o).length===0)return;const a=i,{allOf:l,anyOf:h,oneOf:f}=a,p=X7e(a,["allOf","anyOf","oneOf"]);return Object.assign(Object.assign({},p),{properties:o})}function yle(t,e){if(e=Nv(e,t.rootSchema),typeof e!="object"||e==null)return[];const n=[];function r(i){const s=yle(t,i);n.push(...s)}if(typeof e.properties=="object"&&e.properties!=null&&n.push(...Object.keys(e.properties)),typeof e.then=="object"&&e.then!=null&&r(e.then),Array.isArray(e.allOf))for(const i of e.allOf)r(i);if(Array.isArray(e.anyOf))for(const i of e.anyOf)r(i);if(Array.isArray(e.oneOf))for(const i of e.oneOf)r(i);return n}function Nv(t,e){if(typeof t=="object"&&t.$ref){const n=H7e(e,t.$ref);if(typeof n=="object"){const r=Object.assign(Object.assign({},t),n);return Reflect.deleteProperty(r,"$ref"),r}}return t}function H7e(t,e){const n=e.split("/");let r=t;return n.forEach(i=>{if(i){if(i==="#"){r=t;return}typeof r=="object"&&(r=r[i])}}),r}function K7e(t,e){return t===void 0?`/${e}`:`${t}/${e}`}const nC=(t,e)=>{const n=t.length>2;let r=t.map((i,s)=>{const o="`"+(e?e(i):i)+"`";return s===t.length-1?"or "+o:o});return n?r.join(", "):r.join(" ")},J7e=t=>{var e,n,r;return!((e=t?.data)===null||e===void 0)&&e.pointer&&((n=t?.data)===null||n===void 0?void 0:n.pointer)!=="#"?t.data.pointer.slice(1):!((r=t?.data)===null||r===void 0)&&r.property?`/${t.data.property}`:""},vle=t=>t.startState.field(E6)!==t.state.field(E6);function eFe(t){const e=new ble(t);return n=>e.doValidation(n)}const tFe=["NoAdditionalPropertiesError","RequiredPropertyError","InvalidPropertyNameError","ForbiddenPropertyError","UndefinedValueError"];class ble{constructor(e){var n,r,i,s;this.options=e,this.schema=null,this.mode=Ws.JSON,this.rewriteError=o=>{var a,l,h,f,p;const g=o?.data,b=g?.errors;return o.code==="one-of-error"&&b?.length?`Expected one of ${nC(b,k=>k.data.expected)}`:o.code==="type-error"?`Expected \`${!((a=o?.data)===null||a===void 0)&&a.expected&&Array.isArray((l=o?.data)===null||l===void 0?void 0:l.expected)?nC((h=o?.data)===null||h===void 0?void 0:h.expected):(f=o?.data)===null||f===void 0?void 0:f.expected}\` but received \`${(p=o?.data)===null||p===void 0?void 0:p.received}\``:o.message.replaceAll("in `#` ","").replaceAll("at `#`","").replaceAll("/",".").replaceAll("#.","")},this.mode=(r=(n=this.options)===null||n===void 0?void 0:n.mode)!==null&&r!==void 0?r:Ws.JSON,this.parser=(s=(i=this.options)===null||i===void 0?void 0:i.jsonParser)!==null&&s!==void 0?s:mle(this.mode)}get schemaTitle(){var e,n,r;return(r=(n=(e=this.schema)===null||e===void 0?void 0:e.getSchema())===null||n===void 0?void 0:n.title)!==null&&r!==void 0?r:"json-schema"}doValidation(e){const n=TN(e.state);if(!n)return[];if(this.schema=new ooe(n),!this.schema)return[];const r=e.state.doc.toString();if(!r?.length)return[];const i=this.parser(e.state);if(i.data==null)return[];let s=[];try{s=this.schema.validate(i.data)}catch{}return To.log("xxx","validation errors",s,i.data),s.length?s.reduce((o,a)=>{const l=()=>{const p=this.rewriteError(a);o.push({from:0,to:0,message:p,severity:"error",source:this.schemaTitle,renderMessage:()=>{const g=Dp("div",{});return g.innerHTML=Ew(p),g}})},h=J7e(a),f=i.pointers.get(h);if(a.name==="MaxPropertiesError"||a.name==="MinPropertiesError"||h==="")l();else if(f){const p=tFe.includes(a.name),g=this.rewriteError(a),b=p?f.keyFrom:f.valueFrom,x=p?f.keyTo:f.valueTo;x!==void 0&&b!==void 0&&o.push({from:b,to:x,message:g,renderMessage:()=>{const k=Dp("div",{});return k.innerHTML=Ew(g),k},severity:"error",source:this.schemaTitle})}else l();return o},[]):[]}}function nFe(t){const e=new _le(t);return async function(r,i,s){return e.doHover(r,i,s)}}function bX(t){if(t.type)return t.$ref?`${t.$ref} (${t.type})`:t.type;if(t.$ref)return`${t.$ref}`}function RR(t,e,n){return`${e}: ${nC(t[e].map(r=>{try{const{data:i}=n.resolveRef({data:r,pointer:r.$ref});return bX(i||r)}catch{return r.type}}))}`}class _le{constructor(e){var n,r;this.opts=e,this.schema=null,this.mode=Ws.JSON,this.opts=Object.assign({parser:JSON.parse},this.opts),this.mode=(r=(n=this.opts)===null||n===void 0?void 0:n.mode)!==null&&r!==void 0?r:Ws.JSON}getDataForCursor(e,n,r){const i=TN(e.state);if(!i)return null;this.schema=new ooe(i);const s=bse(e.state,n,r,this.mode);let o;try{o=this.opts.parser(e.state.doc.toString())}catch{}if(!s)return null;let a=this.schema.getSchema({pointer:s,data:o,withSchemaWarning:!0});return au(a)&&(a?.data.schema.$ref?a=this.schema.resolveRef(a):a=a?.data.schema),{schema:a,pointer:s}}formatMessage(e){const{message:n,typeInfo:r}=e;return n?Dp("div",{class:"cm6-json-schema-hover"},[Dp("div",{class:"cm6-json-schema-hover--description",inner:Ew(n,!1)}),Dp("div",{class:"cm6-json-schema-hover--code-wrapper"},[Dp("div",{class:"cm6-json-schema-hover--code",inner:Ew(r,!1)})])]):Dp("div",{class:"cm6-json-schema-hover"},[Dp("div",{class:"cm6-json-schema-hover--code-wrapper"},[Dp("code",{class:"cm6-json-schema-hover--code",inner:Ew(r,!1)})])])}getHoverTexts(e,n){let r="",i=null;const{schema:s}=e;return s.oneOf&&(r=RR(s,"oneOf",n)),s.anyOf&&(r=RR(s,"anyOf",n)),s.allOf&&(r=RR(s,"allOf",n)),s.type&&(r=Array.isArray(s.type)?nC(s.type):s.type),s.$ref&&(r=` Reference: ${s.$ref}`),s.enum&&(r=`\`enum\`: ${nC(s.enum)}`),s.format&&(r+=`\`format\`: ${s.format}`),s.pattern&&(r+=`\`pattern\`: ${s.pattern}`),s.description&&(i=s.description),{message:i,typeInfo:r}}async doHover(e,n,r){var i,s,o,a;const l=n,h=n;try{const f=this.getDataForCursor(e,n,r);if(To.log("cursorData",f),!f?.schema)return null;const g=((s=(i=this.opts)===null||i===void 0?void 0:i.getHoverTexts)!==null&&s!==void 0?s:this.getHoverTexts)(f,this.schema),x=((a=(o=this.opts)===null||o===void 0?void 0:o.formatHover)!==null&&a!==void 0?a:this.formatMessage)(g);return{pos:l,end:h,arrow:!0,above:!0,create:k=>({dom:x})}}catch(f){return To.log(f),null}}}function rFe(t){return[ORe(),d6(xRe()),d6(eFe(),{needsRefresh:vle}),gae.data.of({autocomplete:G7e()}),QB(nFe()),wse(t)]}function iFe(t){const e=new ble(Object.assign({jsonParser:_ae,mode:Ws.JSON5},t));return n=>e.doValidation(n)}function sFe(t){const e=new _le(Object.assign(Object.assign({},t),{parser:i2.parse,mode:Ws.JSON5}));return async function(r,i,s){return e.doHover(r,i,s)}}function oFe(t={}){const e=new gle(Object.assign(Object.assign({},t),{mode:Ws.JSON5}));return function(r){return e.doComplete(r)}}function aFe(t){return[MRe(),d6(RRe()),d6(iFe(),{needsRefresh:vle}),vae.data.of({autocomplete:oFe()}),QB(sFe()),wse(t)]}const lFe="#e5c07b",_X="#e06c75",uFe="#56b6c2",cFe="#ffffff",Q5="#abb2bf",X9="#7d8799",hFe="#61afef",fFe="#98c379",xX="#d19a66",dFe="#c678dd",pFe="#21252b",wX="#2c313a",OX="#282c34",FR="#353a42",mFe="#3E4451",SX="#528bff",gFe=Cn.theme({"&":{color:Q5,backgroundColor:OX},".cm-content":{caretColor:SX},".cm-cursor, .cm-dropCursor":{borderLeftColor:SX},"&.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground, .cm-selectionBackground, .cm-content ::selection":{backgroundColor:mFe},".cm-panels":{backgroundColor:pFe,color:Q5},".cm-panels.cm-panels-top":{borderBottom:"2px solid black"},".cm-panels.cm-panels-bottom":{borderTop:"2px solid black"},".cm-searchMatch":{backgroundColor:"#72a1ff59",outline:"1px solid #457dff"},".cm-searchMatch.cm-searchMatch-selected":{backgroundColor:"#6199ff2f"},".cm-activeLine":{backgroundColor:"#6699ff0b"},".cm-selectionMatch":{backgroundColor:"#aafe661a"},"&.cm-focused .cm-matchingBracket, &.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bad0f847"},".cm-gutters":{backgroundColor:OX,color:X9,border:"none"},".cm-activeLineGutter":{backgroundColor:wX},".cm-foldPlaceholder":{backgroundColor:"transparent",border:"none",color:"#ddd"},".cm-tooltip":{border:"none",backgroundColor:FR},".cm-tooltip .cm-tooltip-arrow:before":{borderTopColor:"transparent",borderBottomColor:"transparent"},".cm-tooltip .cm-tooltip-arrow:after":{borderTopColor:FR,borderBottomColor:FR},".cm-tooltip-autocomplete":{"& > ul > li[aria-selected]":{backgroundColor:wX,color:Q5}}},{dark:!0}),yFe=BC.define([{tag:be.keyword,color:dFe},{tag:[be.name,be.deleted,be.character,be.propertyName,be.macroName],color:_X},{tag:[be.function(be.variableName),be.labelName],color:hFe},{tag:[be.color,be.constant(be.name),be.standard(be.name)],color:xX},{tag:[be.definition(be.name),be.separator],color:Q5},{tag:[be.typeName,be.className,be.number,be.changed,be.annotation,be.modifier,be.self,be.namespace],color:lFe},{tag:[be.operator,be.operatorKeyword,be.url,be.escape,be.regexp,be.link,be.special(be.string)],color:uFe},{tag:[be.meta,be.comment],color:X9},{tag:be.strong,fontWeight:"bold"},{tag:be.emphasis,fontStyle:"italic"},{tag:be.strikethrough,textDecoration:"line-through"},{tag:be.link,color:X9,textDecoration:"underline"},{tag:be.heading,fontWeight:"bold",color:_X},{tag:[be.atom,be.bool,be.special(be.variableName)],color:xX},{tag:[be.processingInstruction,be.string,be.inserted],color:fFe},{tag:be.invalid,color:cFe}]),vFe=[gFe,Une(yFe)];function bFe(){return[tOe(),iOe(),w2e(),s3e(),h2e(),g2e(),Xi.allowMultipleSelections.of(!0),BOe(),Une(jOe,{fallback:!0}),GOe(),$Se(),WSe(),R2e(),$2e(),E2e(),Tke(),Cn.domEventHandlers({keydown(t){t.stopPropagation()}}),RC.of([...QSe,...lke,...Wke,...p3e,...ire,...gke,{key:"Tab",preventDefault:!0,run:ske},{key:"Shift-Tab",preventDefault:!0,run:$re}])]}function _Fe(t,e){const n=Cn.theme({"&.cm-editor":{height:"100%"},".cm-scroller":{overflow:"auto"},"&.cm-focused":{outline:"none"},".cm-content":{fontFamily:"var(--font-mono)"},".cm-tooltip":{boxShadow:e.colorScheme=="light"?"0 2px 5px rgba(0,0,0,0.2)":"0 2px 5px rgba(0,0,0,1)"},".cm6-json-schema-hover":{padding:"6px"}}),r=Cn.updateListener.of(o=>{if(o.docChanged&&e.onChange){const a=o.state.doc.toString();e.onChange(a)}}),i=[];if(e.language=="json"&&i.push(rFe(e.json?.schema??{})),e.language=="json5"&&i.push(aFe(e.json?.schema??{})),e.language=="sql"){let o=e.sql?.table,a=e.sql?.columns;i.push(G4e({dialect:Y4e,upperCaseKeywords:!0,schema:o!=null?{[o]:a?.map(l=>({label:l.name,detail:l.type,type:"property"}))??[]}:void 0,defaultTable:o}))}e.language=="markdown"&&i.push(s4e());const s=new Cn({doc:e.initialText,parent:t,extensions:[...bFe(),B2e({parent:t.parentElement}),...i,...e.colorScheme=="dark"?[vFe]:[],n,r]});return{set:o=>{s.dispatch({changes:{from:0,to:s.state.doc.length,insert:o}})},destroy:()=>{s.destroy()}}}var xFe=gt('<div><div class="rounded-md overflow-hidden border border-slate-200 dark:border-slate-600 w-full h-full"></div></div>');function YD(t,e){Ln(e,!0);let n=Qs(e,["$$slots","$$events","$$legacy"]),r;xh(()=>{let o=xl(()=>e.value)??"",a=_Fe(r,{language:e.language??"plain",colorScheme:e.colorScheme??"light",initialText:xl(()=>e.value)??"",json:e.json,sql:e.sql,onChange:l=>{o=l,e.onChange?.(l)}});return Oo(()=>{e.value!=null&&e.value!=o&&(o=n.value,a.set(o))}),()=>{a.destroy()}});var i=xFe(),s=je(i);zu(s,o=>r=o,()=>r),Be(i),on(()=>Hi(i,1,_C(e.class??""))),Re(t,i),$n()}const wFe={$schema:"http://json-schema.org/draft-07/schema#",$ref:"#/definitions/BuiltinChartSpec",definitions:{BuiltinChartSpec:{anyOf:[{$ref:"#/definitions/ChartSpec"},{$ref:"#/definitions/ContentViewerSpec"},{$ref:"#/definitions/CountPlotSpec"},{$ref:"#/definitions/EmbeddingSpec"},{$ref:"#/definitions/MarkdownSpec"},{$ref:"#/definitions/PredicatesSpec"},{$ref:"#/definitions/TableSpec"}]},ChartSpec:{type:"object",properties:{title:{type:"string",description:"The title of the chart"},plotSize:{type:"object",properties:{width:{type:"number",description:"Width of the plot area"},height:{type:"number",description:"Height of the plot area"},aspectRatio:{type:"number",description:"Aspect ratio of the plot area"}},additionalProperties:!1,description:"Size configuration"},layers:{type:"array",items:{$ref:"#/definitions/Layer"},description:"Layers"},scale:{type:"object",properties:{x:{$ref:"#/definitions/Scale"},y:{$ref:"#/definitions/Scale"},color:{$ref:"#/definitions/Scale"},size:{$ref:"#/definitions/Scale"}},additionalProperties:!1,description:"Scale configurations"},axis:{type:"object",properties:{x:{$ref:"#/definitions/Axis"},y:{$ref:"#/definitions/Axis"}},additionalProperties:!1,description:"Axis configurations"},selection:{type:"object",additionalProperties:{$ref:"#/definitions/Selection"},description:"Selections"},widgets:{type:"array",items:{$ref:"#/definitions/Widget"},description:"Widgets"}},additionalProperties:!1,description:"Chart specification"},Layer:{type:"object",properties:{from:{$ref:"#/definitions/SQLTable",description:"Data source, default to the main data table"},filter:{type:"string",const:"$filter",description:"Filter the data. Use $filter to refer to the shared filter"},mark:{$ref:"#/definitions/MarkType",description:"Mark type"},style:{$ref:"#/definitions/MarkStyle",description:"Mark style"},zIndex:{type:"number",description:"z-index indicating the layer order. Default value is 0. If the value is negative, the mark will be drawn below grid lines."},orientation:{type:"string",enum:["vertical","horizontal"],description:"Orientation of bar marks"},interpolate:{$ref:"#/definitions/Interpolate",description:"Interpolate method for line and area marks"},width:{$ref:"#/definitions/Dimension",description:"Width of bar / rect marks"},height:{$ref:"#/definitions/Dimension",description:"Height of bar / rect marks"},encoding:{type:"object",properties:{x:{$ref:"#/definitions/Encoding"},y:{$ref:"#/definitions/Encoding"},x1:{$ref:"#/definitions/Encoding"},x2:{$ref:"#/definitions/Encoding"},y1:{$ref:"#/definitions/Encoding"},y2:{$ref:"#/definitions/Encoding"},color:{$ref:"#/definitions/Encoding"},size:{$ref:"#/definitions/Encoding"},group:{$ref:"#/definitions/Encoding"}},additionalProperties:!1,description:"Encoding"}},required:["mark"],additionalProperties:!1},SQLTable:{anyOf:[{type:"string"},{type:"object",properties:{sql:{type:"string"}},required:["sql"],additionalProperties:!1}],description:"Table name or SQL expression that produces a table"},MarkType:{type:"string",enum:["bar","rect","line","area","point","rule"],description:"Mark type"},MarkStyle:{type:"object",properties:{fillColor:{type:["string","null"],description:"Fill color. If `null`, disable fill. Default is based on mark type."},fillOpacity:{type:"number",description:"Fill opacity"},strokeColor:{type:["string","null"],description:"Stroke color. If `null`, disable stroke. Default is based on mark type."},strokeWidth:{type:"number",description:"Stroke width"},strokeOpacity:{type:"number",description:"Stroke opacity"},strokeCap:{type:"string",enum:["butt","round","square"],description:"Stroke cap"},strokeJoin:{type:"string",enum:["round","miter-clip","miter","bevel"],description:"Stroke join"},paintOrder:{type:"string",description:"Paint order"},opacity:{type:"number",description:"Opacity"}},additionalProperties:!1,description:"Mark style"},Interpolate:{type:"string",enum:["linear","cardinal","catmull-rom","natural","monotone","basis","step","step-before","step-after"],description:"Interpolate method for line or area"},Dimension:{anyOf:[{type:"object",properties:{gap:{type:"number"},clampToRatio:{type:"number"}},required:["gap"],additionalProperties:!1},{type:"object",properties:{ratio:{type:"number"}},required:["ratio"],additionalProperties:!1},{type:"number"}],description:"Mark dimension for width and height"},Encoding:{anyOf:[{type:"object",properties:{field:{$ref:"#/definitions/SQLField",description:"The data field"},bin:{type:"object",properties:{desiredCount:{type:"number",description:"Desired bin count"}},additionalProperties:!1}},required:["field"],additionalProperties:!1},{type:"object",properties:{aggregate:{anyOf:[{$ref:"#/definitions/AggregateFn"},{type:"object",properties:{sql:{type:"string"}},required:["sql"],additionalProperties:!1}],description:"Aggregate type"},field:{$ref:"#/definitions/SQLField",description:"The data field for the aggregate"},quantile:{type:"number",description:'For "quantile" aggregate, the quantile value (0-1)'},normalize:{type:"string",enum:["x","y"],description:"Normalize the value by x or y"}},required:["aggregate"],additionalProperties:!1},{type:"object",properties:{value:{$ref:"#/definitions/DataValue"}},required:["value"],additionalProperties:!1}],description:"Encoding"},SQLField:{anyOf:[{type:"string"},{type:"object",properties:{sql:{type:"string"}},required:["sql"],additionalProperties:!1}],description:"Field from the data table, can be a column name or a SQL expression"},AggregateFn:{type:"string",enum:["count","distinct","min","max","mean","average","median","stdev","stdevp","variance","variancep","sum","product","quantile","ecdf-value","ecdf-rank"]},DataValue:{anyOf:[{type:"string"},{type:"number"},{type:"array",items:{type:"number"},minItems:2,maxItems:2}],description:"Data value"},Scale:{type:"object",properties:{type:{$ref:"#/definitions/ScaleType",description:"Scale type for quantitative scales"},domain:{type:"array",items:{$ref:"#/definitions/DataValue"},description:"Scale domain"},specialValues:{type:"array",items:{type:"string"},description:"Special values. All represented as strings."},constant:{type:"number",description:"symlog constant."},range:{anyOf:[{type:"array",items:{type:["string","number"]}},{type:"string"}],description:"Scale range. Currently do not apply for x and y scales. For size scales, this should be [min, max] size. For nominal color scales, this should be a list of colors. For quantitative color scales, this should be a predefined interpolate scheme, or a list of colors to interpolate."}},additionalProperties:!1,description:"Scale"},ScaleType:{type:"string",enum:["linear","log","symlog","band"],description:"Scale type"},Axis:{type:"object",properties:{title:{type:"string",description:"Axis title"},values:{type:"array",items:{},description:"Values for ticks, grid lines, and labels"},desiredTickCount:{type:"number",description:"Desired number of ticks. Default 5."},extendScaleToTicks:{type:"boolean",description:"Extend scale to ticks. Default true."},labelPadding:{type:"number",description:"Padding to label"},labelFontFamily:{type:"string",description:"Label font family"},labelFontSize:{type:"number",description:"Label font size"},labelMaxWidth:{type:"number",description:"Label max width"}},additionalProperties:!1},Selection:{type:"object",properties:{encoding:{type:"string",enum:["x","y","xy"]}},required:["encoding"],additionalProperties:!1,description:"Chart selection"},Widget:{anyOf:[{type:"object",properties:{type:{type:"string",const:"scale.type"},channel:{$ref:"#/definitions/Channel"}},required:["type","channel"],additionalProperties:!1},{type:"object",properties:{type:{type:"string",const:"encoding.normalize"},layer:{anyOf:[{type:"number"},{type:"array",items:{type:"number"}}]},attribute:{$ref:"#/definitions/Attribute"},options:{type:"array",items:{type:"string",enum:["x","y"]}}},required:["type","layer","attribute","options"],additionalProperties:!1}],description:"Widget for editing a chart"},Channel:{type:"string",enum:["x","y","color","size"],description:"Encoding channel"},Attribute:{type:"string",enum:["x","y","x1","x2","y1","y2","color","size","group"],description:"Mark attribute"},ContentViewerSpec:{type:"object",properties:{type:{type:"string",const:"content-viewer"},title:{type:"string"},field:{type:"string"}},required:["type","field"],additionalProperties:!1},CountPlotSpec:{type:"object",properties:{type:{type:"string",const:"count-plot"},title:{type:"string"},data:{type:"object",properties:{field:{$ref:"#/definitions/SQLField",description:"The data field"},isList:{type:"boolean",description:"Indicate if the field contains list[str] data, default false"}},required:["field"],additionalProperties:!1},limit:{type:"number",description:"The max number of categories to show, default 10"},labels:{type:"string",enum:["%","#","#/#"],description:"Labeling method, '%': percentage, '#': count, '#/#': selected count over total count"},order:{anyOf:[{type:"string",const:"total-descending"},{type:"string",const:"total-ascending"},{type:"string",const:"selected-descending"},{type:"string",const:"selected-ascending"},{type:"string",const:"alphabetical"},{type:"array",items:{type:"string"}}],description:"Order the categories by total count, selected count, alphabetical, or custom order, default 'total-descending'"}},required:["type","data"],additionalProperties:!1},EmbeddingSpec:{type:"object",properties:{type:{type:"string",const:"embedding"},title:{type:"string"},data:{type:"object",properties:{x:{type:"string"},y:{type:"string"},text:{type:["string","null"]},category:{type:["string","null"]},isGis:{type:"boolean"}},required:["x","y"],additionalProperties:!1},mode:{type:"string",enum:["points","density"]},mapStyle:{type:["string","null"]},minimumDensity:{type:"number"},pointSize:{type:"number"},downsampleMaxPoints:{type:["number","null"],description:"Maximum number of points to render (for downsampling). Default: 4000000. Set to null to disable."},config:{$ref:"#/definitions/EmbeddingViewConfig"}},required:["type","title","data"],additionalProperties:!1},EmbeddingViewConfig:{type:"object",properties:{colorScheme:{type:["string","null"],enum:["light","dark",null],description:"Color scheme."},mode:{type:["string","null"],enum:["points","density",null],description:"View mode."},minimumDensity:{type:["number","null"],description:"Minimum average density for density contours to show up. The density is measured as number of points per square points (aka., px in CSS units)."},pointSize:{type:["number","null"],description:"Override the automatically calculated point size. If not specified, point size is calculated based on density."},autoLabelEnabled:{type:["boolean","null"],description:"Generate labels automatically. By default labels are generated automatically if the `labels` prop is not specified, and a `text` column is specified in the Mosaic view, or a `queryClusterLabels` callback is specified in the non-Mosaic view. Set this to `false` to disable automatic labels."},autoLabelDensityThreshold:{type:["number","null"],description:"The density threshold to filter the clusters before generating automatic labels. The value is relative to the max density."},autoLabelStopWords:{anyOf:[{type:"array",items:{type:"string"}},{type:"null"}],description:"The stop words for automatic label generation. By default use NLTK stop words."},downsampleMaxPoints:{type:["number","null"],description:"Approximate maximum number of points to render when downsampling is active. Points are sampled with bias toward sparse regions (fewer points kept in dense areas). The sampling probability is given by this formula: P(i) = (downsampleMaxPoints / numPointsInViewport) * (2 / (1 + density(p_i) / maxDensity * downsampleDensityWeight)) Default: 4,000,000. Set to null or Infinity to disable downsampling."},downsampleDensityWeight:{type:["number","null"],description:"Density weight for downsampling (0-10). Higher values mean more aggressive culling in dense areas. Default: 5"},isGis:{type:["boolean","null"],description:"Enable GIS mode (Mercator projection for the Y axis)."},mapStyle:{type:["string","null"],description:"MapLibre style URL."}},additionalProperties:!1},MarkdownSpec:{type:"object",properties:{type:{type:"string",const:"markdown"},title:{type:"string"},content:{type:"string"}},required:["type","content"],additionalProperties:!1},PredicatesSpec:{type:"object",properties:{type:{type:"string",const:"predicates"},title:{type:"string"},items:{type:"array",items:{type:"object",properties:{name:{type:"string"},predicate:{type:"string"}},required:["name","predicate"],additionalProperties:!1}}},required:["type"],additionalProperties:!1},TableSpec:{type:"object",properties:{type:{type:"string",const:"table"},title:{type:"string"},columns:{type:"array",items:{type:"string"}}},required:["type","title","columns"],additionalProperties:!1}}};function pz(t,e){Ln(e,!0);let n=i2.stringify(e.initialValue,{space:2,quote:'"'});function r(i){try{return JSON.parse(JSON.stringify(i2.parse(i)))}catch{return}}{let i=Fe(()=>({schema:wFe}));YD(t,{get class(){return e.class},get colorScheme(){return e.colorScheme},language:"json5",get json(){return F(i)},get value(){return n},onChange:s=>{let o=r(s);o?e.onChange?.(o):e.onChange?.(void 0)}})}$n()}var OFe=gt('<span class="mx-1"> </span>'),SFe=gt("<button><!> <!></button>");function My(t,e){Ln(e,!0);let n=jn(e,"label",3,null),r=jn(e,"icon",3,null),i=jn(e,"title",3,""),s=jn(e,"order",3,null);var o=SFe();o.__click=()=>{e.onClick?.()};let a;var l=je(o);{var h=g=>{const b=Fe(r);var x=ar(),k=pn(x);o0(k,()=>F(b),(T,I)=>{I(T,{class:"w-4 h-4"})}),Re(g,x)};Pt(l,g=>{r()!=null&&g(h)})}var f=lt(l,2);{var p=g=>{var b=OFe(),x=je(b,!0);Be(b),on(()=>Pr(x,n())),Re(g,b)};Pt(f,g=>{n()!=null&&n()!=""&&g(p)})}Be(o),on(()=>{Hi(o,1,`rounded-md flex select-none items-center px-1 py-1 text-slate-500 bg-slate-100 dark:text-slate-400 dark:bg-slate-800 focus-visible:outline-2 outline-blue-600 -outline-offset-1 ${e.class??""??""}`),St(o,"title",i()),a=lr(o,"",a,{order:s()})}),Re(t,o),$n()}Js(["click"]);var kFe=$r('<svg><path fill="currentColor" d="M8 1.75a.75.75 0 0 1 .75.75v4.75h4.75a.75.75 0 0 1 0 1.5H8.75v4.75a.75.75 0 0 1-1.5 0V8.75H2.5a.75.75 0 0 1 0-1.5h4.75V2.5A.75.75 0 0 1 8 1.75"></path></svg>');function xle(t,e){const n=Qs(e,["$$slots","$$events","$$legacy"]);var r=kFe();oo(r,()=>({viewBox:"0 0 16 16",width:"1.2em",height:"1.2em",...n})),Re(t,r)}var CFe=$r('<svg><path fill="currentColor" d="M7.22 4.22a.75.75 0 0 1 1.06 0l3.5 3.5a.75.75 0 0 1 0 1.06l-3.5 3.5a.75.75 0 0 1-1.06-1.06L9.44 9H1.75a.75.75 0 0 1 0-1.5h7.69L7.22 5.28a.75.75 0 0 1 0-1.06m7.28-.47a.75.75 0 0 0-1.5 0v8.5a.75.75 0 0 0 1.5 0z"></path></svg>');function AFe(t,e){const n=Qs(e,["$$slots","$$events","$$legacy"]);var r=CFe();oo(r,()=>({viewBox:"0 0 16 16",width:"1.2em",height:"1.2em",...n})),Re(t,r)}var EFe=$r('<svg><path fill="currentColor" d="M14.046 3.486a.75.75 0 0 1-.032 1.06l-7.93 7.474a.85.85 0 0 1-1.188-.022l-2.68-2.72a.75.75 0 1 1 1.068-1.053l2.234 2.267l7.468-7.038a.75.75 0 0 1 1.06.032"></path></svg>');function wle(t,e){const n=Qs(e,["$$slots","$$events","$$legacy"]);var r=EFe();oo(r,()=>({viewBox:"0 0 16 16",width:"1.2em",height:"1.2em",...n})),Re(t,r)}var TFe=$r('<svg><path fill="currentColor" d="M3.2 5.74a.75.75 0 0 1 1.06-.04L8 9.227L11.74 5.7a.75.75 0 1 1 1.02 1.1l-4.25 4a.75.75 0 0 1-1.02 0l-4.25-4a.75.75 0 0 1-.04-1.06"></path></svg>');function kX(t,e){const n=Qs(e,["$$slots","$$events","$$legacy"]);var r=TFe();oo(r,()=>({viewBox:"0 0 16 16",width:"1.2em",height:"1.2em",...n})),Re(t,r)}var PFe=$r('<svg><path fill="currentColor" d="M10.26 3.2a.75.75 0 0 1 .04 1.06L6.773 8l3.527 3.74a.75.75 0 1 1-1.1 1.02l-4-4.25a.75.75 0 0 1 0-1.02l4-4.25a.75.75 0 0 1 1.06-.04"></path></svg>');function DFe(t,e){const n=Qs(e,["$$slots","$$events","$$legacy"]);var r=PFe();oo(r,()=>({viewBox:"0 0 16 16",width:"1.2em",height:"1.2em",...n})),Re(t,r)}var IFe=$r('<svg><path fill="currentColor" d="M5.74 3.2a.75.75 0 0 0-.04 1.06L9.227 8L5.7 11.74a.75.75 0 1 0 1.1 1.02l4-4.25a.75.75 0 0 0 0-1.02l-4-4.25a.75.75 0 0 0-1.06-.04"></path></svg>');function MFe(t,e){const n=Qs(e,["$$slots","$$events","$$legacy"]);var r=IFe();oo(r,()=>({viewBox:"0 0 16 16",width:"1.2em",height:"1.2em",...n})),Re(t,r)}var RFe=$r('<svg><path fill="currentColor" d="M3.2 10.26a.75.75 0 0 0 1.06.04L8 6.773l3.74 3.527a.75.75 0 1 0 1.02-1.1l-4.25-4a.75.75 0 0 0-1.02 0l-4.25 4a.75.75 0 0 0-.04 1.06"></path></svg>');function CX(t,e){const n=Qs(e,["$$slots","$$events","$$legacy"]);var r=RFe();oo(r,()=>({viewBox:"0 0 16 16",width:"1.2em",height:"1.2em",...n})),Re(t,r)}var FFe=$r('<svg><path fill="currentColor" d="M2.75 2a.75.75 0 0 1 .75.75v12.5c0 .69.56 1.25 1.25 1.25h12.5a.75.75 0 0 1 0 1.5H4.75A2.75 2.75 0 0 1 2 15.25V2.75A.75.75 0 0 1 2.75 2M10 7.5a2.5 2.5 0 1 1-5 0a2.5 2.5 0 0 1 5 0m4.5.5a2.5 2.5 0 1 0 0-5a2.5 2.5 0 0 0 0 5m.5 4.5a2.5 2.5 0 1 1-5 0a2.5 2.5 0 0 1 5 0"></path></svg>');function LFe(t,e){const n=Qs(e,["$$slots","$$events","$$legacy"]);var r=FFe();oo(r,()=>({viewBox:"0 0 20 20",width:"1.2em",height:"1.2em",...n})),Re(t,r)}var $Fe=$r('<svg><path fill="currentColor" d="m2.397 2.554l.073-.084a.75.75 0 0 1 .976-.073l.084.073L8 6.939l4.47-4.47a.75.75 0 1 1 1.06 1.061L9.061 8l4.47 4.47a.75.75 0 0 1 .072.976l-.073.084a.75.75 0 0 1-.976.073l-.084-.073L8 9.061l-4.47 4.47a.75.75 0 0 1-1.06-1.061L6.939 8l-4.47-4.47a.75.75 0 0 1-.072-.976l.073-.084z"></path></svg>');function cO(t,e){const n=Qs(e,["$$slots","$$events","$$legacy"]);var r=$Fe();oo(r,()=>({viewBox:"0 0 16 16",width:"1.2em",height:"1.2em",...n})),Re(t,r)}var BFe=$r('<svg><path fill="currentColor" d="M9 1H6a2 2 0 0 0-2 2v2.205a5.5 5.5 0 0 1 4.666 9.791H12a2 2 0 0 0 2-2V6.001h-3.5A1.5 1.5 0 0 1 9 4.5zm4.997 4h-3.498a.5.5 0 0 1-.5-.5V1h.01zM10 10.5a4.5 4.5 0 1 1-9 0a4.5 4.5 0 0 1 9 0m-4.854 2.353l.003.003a.5.5 0 0 0 .348.144h.006a.5.5 0 0 0 .35-.146l2-2a.5.5 0 0 0-.707-.708L6 11.293V8.5a.5.5 0 0 0-1 0v2.793l-1.146-1.147a.5.5 0 0 0-.708.708z"></path></svg>');function LR(t,e){const n=Qs(e,["$$slots","$$events","$$legacy"]);var r=BFe();oo(r,()=>({viewBox:"0 0 16 16",width:"1.2em",height:"1.2em",...n})),Re(t,r)}var NFe=$r('<svg><path fill="currentColor" d="M10.529 1.764a2.621 2.621 0 1 1 3.707 3.707l-.779.779L9.75 2.543zM9.043 3.25L2.657 9.636a2.96 2.96 0 0 0-.772 1.354l-.87 3.386a.5.5 0 0 0 .61.608l3.385-.869a2.95 2.95 0 0 0 1.354-.772l6.386-6.386z"></path></svg>');function mz(t,e){const n=Qs(e,["$$slots","$$events","$$legacy"]);var r=NFe();oo(r,()=>({viewBox:"0 0 16 16",width:"1.2em",height:"1.2em",...n})),Re(t,r)}var zFe=$r('<svg><path fill="currentColor" d="M8 2a6 6 0 1 1 0 12A6 6 0 0 1 8 2m0 1a5 5 0 1 0 0 10A5 5 0 0 0 8 3m0 7a.75.75 0 1 1 0 1.5a.75.75 0 0 1 0-1.5m0-5.5a.5.5 0 0 1 .492.41L8.5 5v3.5a.5.5 0 0 1-.992.09L7.5 8.5V5a.5.5 0 0 1 .5-.5"></path></svg>');function Ole(t,e){const n=Qs(e,["$$slots","$$events","$$legacy"]);var r=zFe();oo(r,()=>({viewBox:"0 0 16 16",width:"1.2em",height:"1.2em",...n})),Re(t,r)}var QFe=$r('<svg><path fill="currentColor" d="M7 17H6a3 3 0 0 1-3-3v-1h4zm10-3a3 3 0 0 1-3 3H8v-4h9zM7 12H3V6a3 3 0 0 1 3-3h1zm7-9a3 3 0 0 1 3 3v6H8V3z"></path></svg>');function jFe(t,e){const n=Qs(e,["$$slots","$$events","$$legacy"]);var r=QFe();oo(r,()=>({viewBox:"0 0 20 20",width:"1.2em",height:"1.2em",...n})),Re(t,r)}var UFe=$r('<svg><path fill="currentColor" d="M3 14a3 3 0 0 0 3 3h8a3 3 0 0 0 3-3zm14-1v-2.5H3V13zm0-6v2.5H3V7zm0-1a3 3 0 0 0-3-3H6a3 3 0 0 0-3 3z"></path></svg>');function VFe(t,e){const n=Qs(e,["$$slots","$$events","$$legacy"]);var r=UFe();oo(r,()=>({viewBox:"0 0 20 20",width:"1.2em",height:"1.2em",...n})),Re(t,r)}var qFe=$r('<svg><path fill="currentColor" d="M2 6a3 3 0 0 1 3-3h10a3 3 0 0 1 3 3v7a3 3 0 0 1-3 3H5a3 3 0 0 1-3-3zm3-2a2 2 0 0 0-2 2v5h14V6a2 2 0 0 0-2-2z"></path></svg>');function ZFe(t,e){const n=Qs(e,["$$slots","$$events","$$legacy"]);var r=qFe();oo(r,()=>({viewBox:"0 0 20 20",width:"1.2em",height:"1.2em",...n})),Re(t,r)}var XFe=$r('<svg><path fill="currentColor" d="M15 3a3 3 0 0 1 3 3v7a3 3 0 0 1-3 3H5a3 3 0 0 1-3-3V6a3 3 0 0 1 3-3zM5 4a2 2 0 0 0-2 2v7a2 2 0 0 0 2 2h6.5V4z"></path></svg>');function WFe(t,e){const n=Qs(e,["$$slots","$$events","$$legacy"]);var r=XFe();oo(r,()=>({viewBox:"0 0 20 20",width:"1.2em",height:"1.2em",...n})),Re(t,r)}var GFe=$r('<svg><path fill="currentColor" d="M10.823 11.883a5.5 5.5 0 1 1 1.06-1.06l2.897 2.897a.75.75 0 1 1-1.06 1.06zM11.5 7.5a4 4 0 1 0-8 0a4 4 0 0 0 8 0"></path></svg>');function YFe(t,e){const n=Qs(e,["$$slots","$$events","$$legacy"]);var r=GFe();oo(r,()=>({viewBox:"0 0 16 16",width:"1.2em",height:"1.2em",...n})),Re(t,r)}var HFe=$r('<svg><path fill="currentColor" d="M2.267 6.153A6 6 0 0 1 3.53 3.98a.36.36 0 0 1 .382-.095l1.36.484a.71.71 0 0 0 .935-.538l.26-1.416a.35.35 0 0 1 .274-.282a6.1 6.1 0 0 1 2.52 0c.14.03.248.141.274.282l.26 1.416a.708.708 0 0 0 .935.538l1.36-.484a.36.36 0 0 1 .382.095a6 6 0 0 1 1.262 2.173a.35.35 0 0 1-.108.378l-1.102.931a.703.703 0 0 0 0 1.076l1.102.931c.11.093.152.242.108.378a6 6 0 0 1-1.262 2.173a.36.36 0 0 1-.382.095l-1.36-.484a.71.71 0 0 0-.935.538l-.26 1.416a.35.35 0 0 1-.275.282a6.1 6.1 0 0 1-2.519 0a.35.35 0 0 1-.275-.282l-.259-1.416a.708.708 0 0 0-.935-.538l-1.36.484a.36.36 0 0 1-.382-.095a6 6 0 0 1-1.262-2.173a.35.35 0 0 1 .108-.378l1.102-.931a.704.704 0 0 0 0-1.076l-1.102-.931a.35.35 0 0 1-.108-.378M6.25 8a1.75 1.75 0 1 0 3.5 0a1.75 1.75 0 0 0-3.5 0"></path></svg>');function Sle(t,e){const n=Qs(e,["$$slots","$$events","$$legacy"]);var r=HFe();oo(r,()=>({viewBox:"0 0 16 16",width:"1.2em",height:"1.2em",...n})),Re(t,r)}var KFe=$r('<svg><path fill="currentColor" d="M7.456 2a6 6 0 1 1-5.406 8.605a.5.5 0 0 1 .36-.71c1.276-.231 3.278-.937 4.078-3.07c.563-1.5.512-3.015.283-4.23a.5.5 0 0 1 .475-.591Q7.35 2 7.456 2"></path></svg>');function JFe(t,e){const n=Qs(e,["$$slots","$$events","$$legacy"]);var r=KFe();oo(r,()=>({viewBox:"0 0 16 16",width:"1.2em",height:"1.2em",...n})),Re(t,r)}var e9e=$r('<svg><path fill="currentColor" d="M8 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-1 0v-1A.5.5 0 0 1 8 1m0 10a3 3 0 1 0 0-6a3 3 0 0 0 0 6m6.5-2.5a.5.5 0 0 0 0-1h-1a.5.5 0 0 0 0 1zM8 13a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-1 0v-1A.5.5 0 0 1 8 13M2.5 8.5a.5.5 0 0 0 0-1h-1a.5.5 0 0 0 0 1zm.646-5.354a.5.5 0 0 1 .708 0l1 1a.5.5 0 1 1-.708.708l-1-1a.5.5 0 0 1 0-.708m.708 9.708a.5.5 0 1 1-.708-.707l1-1a.5.5 0 0 1 .708.707zm9-9.708a.5.5 0 0 0-.708 0l-1 1a.5.5 0 0 0 .708.708l1-1a.5.5 0 0 0 0-.708m-.708 9.708a.5.5 0 0 0 .708-.707l-1-1a.5.5 0 0 0-.708.707z"></path></svg>');function t9e(t,e){const n=Qs(e,["$$slots","$$events","$$legacy"]);var r=e9e();oo(r,()=>({viewBox:"0 0 16 16",width:"1.2em",height:"1.2em",...n})),Re(t,r)}var n9e=$r('<svg><path fill="currentColor" d="M12,1A11,11,0,1,0,23,12,11,11,0,0,0,12,1Zm0,19a8,8,0,1,1,8-8A8,8,0,0,1,12,20Z" opacity=".25"></path><path fill="currentColor" d="M10.72,19.9a8,8,0,0,1-6.5-9.79A7.77,7.77,0,0,1,10.4,4.16a8,8,0,0,1,9.49,6.52A1.54,1.54,0,0,0,21.38,12h.13a1.37,1.37,0,0,0,1.38-1.54,11,11,0,1,0-12.7,12.39A1.54,1.54,0,0,0,12,21.34h0A1.47,1.47,0,0,0,10.72,19.9Z"><animateTransform attributeName="transform" dur="0.75s" repeatCount="indefinite" type="rotate" values="0 12 12;360 12 12"></animateTransform></path></svg>');function gz(t,e){const n=Qs(e,["$$slots","$$events","$$legacy"]);var r=n9e();oo(r,()=>({viewBox:"0 0 24 24",width:"1.2em",height:"1.2em",...n})),Re(t,r)}function r9e(t){let e="";for(let n=0;n<t.length;n++)e+=String.fromCharCode(t[n]);return btoa(e)}function i9e(t){const e=atob(t);return new Uint8Array([...e].map(n=>n.charCodeAt(0)))}function Ex(t,e){if(t.length<e.length)return!1;for(let n=0;n<e.length;n++)if(t[n]!=e[n])return!1;return!0}function AX(t){return Ex(t,[137,80,78,71,13,10,26,10])?"image/png":Ex(t,[255,216,255])?"image/jpeg":Ex(t,[73,73,42,0])?"image/tiff":Ex(t,[66,77])?"image/bmp":Ex(t,[71,73,70,56,55,97])||Ex(t,[71,73,70,56,55,97])?"image/gif":"application/octet-stream"}function kle(t){if(t==null)return null;if(typeof t=="string")return t.startsWith("data:")||t.startsWith("http://")||t.startsWith("https://")?t:`data:${AX(i9e(t))};base64,`+t;{let e=null;if(t.bytes&&t.bytes instanceof Uint8Array&&(e=t.bytes),t instanceof Uint8Array&&(e=t),e!=null)return`data:${AX(e)};base64,`+r9e(e)}return null}class s9e{element;constructor(e,n){this.element=e,this.update(n)}update(e){if(e.value==null){this.element.innerText="(null)";return}let n=kle(e.value);if(n!=null){let r=e.size??100,i=document.createElement("img");i.referrerPolicy="no-referrer",i.src=n,i.style.maxHeight=r+"px",i.style.maxWidth=r+"px",this.element.replaceChildren(i)}else this.element.innerText="(unknown)"}}function yz(t,e){try{return JSON.stringify(t,(n,r)=>r instanceof Object&&ArrayBuffer.isView(r)?Array.from(r):r,e)}catch{return"(invalid)"}}class o9e{element;constructor(e,n){this.element=e,this.update(n)}update(e){let n=document.createElement("pre");n.className="text-sm",n.style.whiteSpace="pre-wrap",n.style.wordBreak="break-all",n.innerText=yz(e.value,2),this.element.replaceChildren(n)}}const{entries:Cle,setPrototypeOf:EX,isFrozen:a9e,getPrototypeOf:l9e,getOwnPropertyDescriptor:u9e}=Object;let{freeze:Qu,seal:kf,create:W9}=Object,{apply:G9,construct:Y9}=typeof Reflect<"u"&&Reflect;Qu||(Qu=function(e){return e});kf||(kf=function(e){return e});G9||(G9=function(e,n){for(var r=arguments.length,i=new Array(r>2?r-2:0),s=2;s<r;s++)i[s-2]=arguments[s];return e.apply(n,i)});Y9||(Y9=function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return new e(...r)});const I4=ju(Array.prototype.forEach),c9e=ju(Array.prototype.lastIndexOf),TX=ju(Array.prototype.pop),US=ju(Array.prototype.push),h9e=ju(Array.prototype.splice),j5=ju(String.prototype.toLowerCase),$R=ju(String.prototype.toString),BR=ju(String.prototype.match),VS=ju(String.prototype.replace),f9e=ju(String.prototype.indexOf),d9e=ju(String.prototype.trim),sd=ju(Object.prototype.hasOwnProperty),xu=ju(RegExp.prototype.test),qS=p9e(TypeError);function ju(t){return function(e){e instanceof RegExp&&(e.lastIndex=0);for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return G9(t,e,r)}}function p9e(t){return function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return Y9(t,n)}}function vi(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:j5;EX&&EX(t,null);let r=e.length;for(;r--;){let i=e[r];if(typeof i=="string"){const s=n(i);s!==i&&(a9e(e)||(e[r]=s),i=s)}t[i]=!0}return t}function m9e(t){for(let e=0;e<t.length;e++)sd(t,e)||(t[e]=null);return t}function _g(t){const e=W9(null);for(const[n,r]of Cle(t))sd(t,n)&&(Array.isArray(r)?e[n]=m9e(r):r&&typeof r=="object"&&r.constructor===Object?e[n]=_g(r):e[n]=r);return e}function ZS(t,e){for(;t!==null;){const r=u9e(t,e);if(r){if(r.get)return ju(r.get);if(typeof r.value=="function")return ju(r.value)}t=l9e(t)}function n(){return null}return n}const PX=Qu(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","search","section","select","shadow","slot","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),NR=Qu(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","enterkeyhint","exportparts","filter","font","g","glyph","glyphref","hkern","image","inputmode","line","lineargradient","marker","mask","metadata","mpath","part","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),zR=Qu(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),g9e=Qu(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),QR=Qu(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),y9e=Qu(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),DX=Qu(["#text"]),IX=Qu(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","exportparts","face","for","headers","height","hidden","high","href","hreflang","id","inert","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","part","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","slot","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),jR=Qu(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","mask-type","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),MX=Qu(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),M4=Qu(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),v9e=kf(/\{\{[\w\W]*|[\w\W]*\}\}/gm),b9e=kf(/<%[\w\W]*|[\w\W]*%>/gm),_9e=kf(/\$\{[\w\W]*/gm),x9e=kf(/^data-[\-\w.\u00B7-\uFFFF]+$/),w9e=kf(/^aria-[\-\w]+$/),Ale=kf(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp|matrix):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),O9e=kf(/^(?:\w+script|data):/i),S9e=kf(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),Ele=kf(/^html$/i),k9e=kf(/^[a-z][.\w]*(-[.\w]+)+$/i);var RX=Object.freeze({__proto__:null,ARIA_ATTR:w9e,ATTR_WHITESPACE:S9e,CUSTOM_ELEMENT:k9e,DATA_ATTR:x9e,DOCTYPE_NAME:Ele,ERB_EXPR:b9e,IS_ALLOWED_URI:Ale,IS_SCRIPT_OR_DATA:O9e,MUSTACHE_EXPR:v9e,TMPLIT_EXPR:_9e});const XS={element:1,text:3,progressingInstruction:7,comment:8,document:9},C9e=function(){return typeof window>"u"?null:window},A9e=function(e,n){if(typeof e!="object"||typeof e.createPolicy!="function")return null;let r=null;const i="data-tt-policy-suffix";n&&n.hasAttribute(i)&&(r=n.getAttribute(i));const s="dompurify"+(r?"#"+r:"");try{return e.createPolicy(s,{createHTML(o){return o},createScriptURL(o){return o}})}catch{return console.warn("TrustedTypes policy "+s+" could not be created."),null}},FX=function(){return{afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]}};function Tle(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:C9e();const e=an=>Tle(an);if(e.version="3.3.0",e.removed=[],!t||!t.document||t.document.nodeType!==XS.document||!t.Element)return e.isSupported=!1,e;let{document:n}=t;const r=n,i=r.currentScript,{DocumentFragment:s,HTMLTemplateElement:o,Node:a,Element:l,NodeFilter:h,NamedNodeMap:f=t.NamedNodeMap||t.MozNamedAttrMap,HTMLFormElement:p,DOMParser:g,trustedTypes:b}=t,x=l.prototype,k=ZS(x,"cloneNode"),T=ZS(x,"remove"),I=ZS(x,"nextSibling"),M=ZS(x,"childNodes"),B=ZS(x,"parentNode");if(typeof o=="function"){const an=n.createElement("template");an.content&&an.content.ownerDocument&&(n=an.content.ownerDocument)}let j,Q="";const{implementation:Z,createNodeIterator:q,createDocumentFragment:J,getElementsByTagName:oe}=n,{importNode:me}=r;let ae=FX();e.isSupported=typeof Cle=="function"&&typeof B=="function"&&Z&&Z.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:ce,ERB_EXPR:se,TMPLIT_EXPR:ge,DATA_ATTR:xe,ARIA_ATTR:Se,IS_SCRIPT_OR_DATA:De,ATTR_WHITESPACE:He,CUSTOM_ELEMENT:Ue}=RX;let{IS_ALLOWED_URI:yt}=RX,We=null;const at=vi({},[...PX,...NR,...zR,...QR,...DX]);let ut=null;const wt=vi({},[...IX,...jR,...MX,...M4]);let ot=Object.seal(W9(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),dt=null,Yt=null;const Ft=Object.seal(W9(null,{tagCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeCheck:{writable:!0,configurable:!1,enumerable:!0,value:null}}));let Ot=!0,Kt=!0,Dn=!1,Ut=!0,At=!1,zt=!0,nn=!1,Ze=!1,cn=!1,Fn=!1,An=!1,qn=!1,Er=!0,Mi=!1;const gi="user-content-";let fs=!0,Hr=!1,uo={},ei=null;const Ct=vi({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let Qi=null;const ki=vi({},["audio","video","img","source","image","track"]);let js=null;const Co=vi({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),Lt="http://www.w3.org/1998/Math/MathML",yn="http://www.w3.org/2000/svg",rn="http://www.w3.org/1999/xhtml";let Xr=rn,si=!1,Tn=null;const Ms=vi({},[Lt,yn,rn],$R);let Ri=vi({},["mi","mo","mn","ms","mtext"]),oi=vi({},["annotation-xml"]);const Fi=vi({},["title","style","font","a","script"]);let Oe=null;const ne=["application/xhtml+xml","text/html"],te="text/html";let fe=null,we=null;const ze=n.createElement("form"),Ge=function(ye){return ye instanceof RegExp||ye instanceof Function},et=function(){let ye=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!(we&&we===ye)){if((!ye||typeof ye!="object")&&(ye={}),ye=_g(ye),Oe=ne.indexOf(ye.PARSER_MEDIA_TYPE)===-1?te:ye.PARSER_MEDIA_TYPE,fe=Oe==="application/xhtml+xml"?$R:j5,We=sd(ye,"ALLOWED_TAGS")?vi({},ye.ALLOWED_TAGS,fe):at,ut=sd(ye,"ALLOWED_ATTR")?vi({},ye.ALLOWED_ATTR,fe):wt,Tn=sd(ye,"ALLOWED_NAMESPACES")?vi({},ye.ALLOWED_NAMESPACES,$R):Ms,js=sd(ye,"ADD_URI_SAFE_ATTR")?vi(_g(Co),ye.ADD_URI_SAFE_ATTR,fe):Co,Qi=sd(ye,"ADD_DATA_URI_TAGS")?vi(_g(ki),ye.ADD_DATA_URI_TAGS,fe):ki,ei=sd(ye,"FORBID_CONTENTS")?vi({},ye.FORBID_CONTENTS,fe):Ct,dt=sd(ye,"FORBID_TAGS")?vi({},ye.FORBID_TAGS,fe):_g({}),Yt=sd(ye,"FORBID_ATTR")?vi({},ye.FORBID_ATTR,fe):_g({}),uo=sd(ye,"USE_PROFILES")?ye.USE_PROFILES:!1,Ot=ye.ALLOW_ARIA_ATTR!==!1,Kt=ye.ALLOW_DATA_ATTR!==!1,Dn=ye.ALLOW_UNKNOWN_PROTOCOLS||!1,Ut=ye.ALLOW_SELF_CLOSE_IN_ATTR!==!1,At=ye.SAFE_FOR_TEMPLATES||!1,zt=ye.SAFE_FOR_XML!==!1,nn=ye.WHOLE_DOCUMENT||!1,Fn=ye.RETURN_DOM||!1,An=ye.RETURN_DOM_FRAGMENT||!1,qn=ye.RETURN_TRUSTED_TYPE||!1,cn=ye.FORCE_BODY||!1,Er=ye.SANITIZE_DOM!==!1,Mi=ye.SANITIZE_NAMED_PROPS||!1,fs=ye.KEEP_CONTENT!==!1,Hr=ye.IN_PLACE||!1,yt=ye.ALLOWED_URI_REGEXP||Ale,Xr=ye.NAMESPACE||rn,Ri=ye.MATHML_TEXT_INTEGRATION_POINTS||Ri,oi=ye.HTML_INTEGRATION_POINTS||oi,ot=ye.CUSTOM_ELEMENT_HANDLING||{},ye.CUSTOM_ELEMENT_HANDLING&&Ge(ye.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(ot.tagNameCheck=ye.CUSTOM_ELEMENT_HANDLING.tagNameCheck),ye.CUSTOM_ELEMENT_HANDLING&&Ge(ye.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(ot.attributeNameCheck=ye.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),ye.CUSTOM_ELEMENT_HANDLING&&typeof ye.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(ot.allowCustomizedBuiltInElements=ye.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),At&&(Kt=!1),An&&(Fn=!0),uo&&(We=vi({},DX),ut=[],uo.html===!0&&(vi(We,PX),vi(ut,IX)),uo.svg===!0&&(vi(We,NR),vi(ut,jR),vi(ut,M4)),uo.svgFilters===!0&&(vi(We,zR),vi(ut,jR),vi(ut,M4)),uo.mathMl===!0&&(vi(We,QR),vi(ut,MX),vi(ut,M4))),ye.ADD_TAGS&&(typeof ye.ADD_TAGS=="function"?Ft.tagCheck=ye.ADD_TAGS:(We===at&&(We=_g(We)),vi(We,ye.ADD_TAGS,fe))),ye.ADD_ATTR&&(typeof ye.ADD_ATTR=="function"?Ft.attributeCheck=ye.ADD_ATTR:(ut===wt&&(ut=_g(ut)),vi(ut,ye.ADD_ATTR,fe))),ye.ADD_URI_SAFE_ATTR&&vi(js,ye.ADD_URI_SAFE_ATTR,fe),ye.FORBID_CONTENTS&&(ei===Ct&&(ei=_g(ei)),vi(ei,ye.FORBID_CONTENTS,fe)),fs&&(We["#text"]=!0),nn&&vi(We,["html","head","body"]),We.table&&(vi(We,["tbody"]),delete dt.tbody),ye.TRUSTED_TYPES_POLICY){if(typeof ye.TRUSTED_TYPES_POLICY.createHTML!="function")throw qS('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof ye.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw qS('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');j=ye.TRUSTED_TYPES_POLICY,Q=j.createHTML("")}else j===void 0&&(j=A9e(b,i)),j!==null&&typeof Q=="string"&&(Q=j.createHTML(""));Qu&&Qu(ye),we=ye}},Ie=vi({},[...NR,...zR,...g9e]),ht=vi({},[...QR,...y9e]),_t=function(ye){let Je=B(ye);(!Je||!Je.tagName)&&(Je={namespaceURI:Xr,tagName:"template"});const ft=j5(ye.tagName),Wt=j5(Je.tagName);return Tn[ye.namespaceURI]?ye.namespaceURI===yn?Je.namespaceURI===rn?ft==="svg":Je.namespaceURI===Lt?ft==="svg"&&(Wt==="annotation-xml"||Ri[Wt]):!!Ie[ft]:ye.namespaceURI===Lt?Je.namespaceURI===rn?ft==="math":Je.namespaceURI===yn?ft==="math"&&oi[Wt]:!!ht[ft]:ye.namespaceURI===rn?Je.namespaceURI===yn&&!oi[Wt]||Je.namespaceURI===Lt&&!Ri[Wt]?!1:!ht[ft]&&(Fi[ft]||!Ie[ft]):!!(Oe==="application/xhtml+xml"&&Tn[ye.namespaceURI]):!1},rt=function(ye){US(e.removed,{element:ye});try{B(ye).removeChild(ye)}catch{T(ye)}},Bt=function(ye,Je){try{US(e.removed,{attribute:Je.getAttributeNode(ye),from:Je})}catch{US(e.removed,{attribute:null,from:Je})}if(Je.removeAttribute(ye),ye==="is")if(Fn||An)try{rt(Je)}catch{}else try{Je.setAttribute(ye,"")}catch{}},On=function(ye){let Je=null,ft=null;if(cn)ye="<remove></remove>"+ye;else{const mn=BR(ye,/^[\r\n\t ]+/);ft=mn&&mn[0]}Oe==="application/xhtml+xml"&&Xr===rn&&(ye='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+ye+"</body></html>");const Wt=j?j.createHTML(ye):ye;if(Xr===rn)try{Je=new g().parseFromString(Wt,Oe)}catch{}if(!Je||!Je.documentElement){Je=Z.createDocument(Xr,"template",null);try{Je.documentElement.innerHTML=si?Q:Wt}catch{}}const $t=Je.body||Je.documentElement;return ye&&ft&&$t.insertBefore(n.createTextNode(ft),$t.childNodes[0]||null),Xr===rn?oe.call(Je,nn?"html":"body")[0]:nn?Je.documentElement:$t},In=function(ye){return q.call(ye.ownerDocument||ye,ye,h.SHOW_ELEMENT|h.SHOW_COMMENT|h.SHOW_TEXT|h.SHOW_PROCESSING_INSTRUCTION|h.SHOW_CDATA_SECTION,null)},Ir=function(ye){return ye instanceof p&&(typeof ye.nodeName!="string"||typeof ye.textContent!="string"||typeof ye.removeChild!="function"||!(ye.attributes instanceof f)||typeof ye.removeAttribute!="function"||typeof ye.setAttribute!="function"||typeof ye.namespaceURI!="string"||typeof ye.insertBefore!="function"||typeof ye.hasChildNodes!="function")},Gn=function(ye){return typeof a=="function"&&ye instanceof a};function ur(an,ye,Je){I4(an,ft=>{ft.call(e,ye,Je,we)})}const Cr=function(ye){let Je=null;if(ur(ae.beforeSanitizeElements,ye,null),Ir(ye))return rt(ye),!0;const ft=fe(ye.nodeName);if(ur(ae.uponSanitizeElement,ye,{tagName:ft,allowedTags:We}),zt&&ye.hasChildNodes()&&!Gn(ye.firstElementChild)&&xu(/<[/\w!]/g,ye.innerHTML)&&xu(/<[/\w!]/g,ye.textContent)||ye.nodeType===XS.progressingInstruction||zt&&ye.nodeType===XS.comment&&xu(/<[/\w]/g,ye.data))return rt(ye),!0;if(!(Ft.tagCheck instanceof Function&&Ft.tagCheck(ft))&&(!We[ft]||dt[ft])){if(!dt[ft]&&ji(ft)&&(ot.tagNameCheck instanceof RegExp&&xu(ot.tagNameCheck,ft)||ot.tagNameCheck instanceof Function&&ot.tagNameCheck(ft)))return!1;if(fs&&!ei[ft]){const Wt=B(ye)||ye.parentNode,$t=M(ye)||ye.childNodes;if($t&&Wt){const mn=$t.length;for(let tr=mn-1;tr>=0;--tr){const rr=k($t[tr],!0);rr.__removalCount=(ye.__removalCount||0)+1,Wt.insertBefore(rr,I(ye))}}}return rt(ye),!0}return ye instanceof l&&!_t(ye)||(ft==="noscript"||ft==="noembed"||ft==="noframes")&&xu(/<\/no(script|embed|frames)/i,ye.innerHTML)?(rt(ye),!0):(At&&ye.nodeType===XS.text&&(Je=ye.textContent,I4([ce,se,ge],Wt=>{Je=VS(Je,Wt," ")}),ye.textContent!==Je&&(US(e.removed,{element:ye.cloneNode()}),ye.textContent=Je)),ur(ae.afterSanitizeElements,ye,null),!1)},ds=function(ye,Je,ft){if(Er&&(Je==="id"||Je==="name")&&(ft in n||ft in ze))return!1;if(!(Kt&&!Yt[Je]&&xu(xe,Je))){if(!(Ot&&xu(Se,Je))){if(!(Ft.attributeCheck instanceof Function&&Ft.attributeCheck(Je,ye))){if(!ut[Je]||Yt[Je]){if(!(ji(ye)&&(ot.tagNameCheck instanceof RegExp&&xu(ot.tagNameCheck,ye)||ot.tagNameCheck instanceof Function&&ot.tagNameCheck(ye))&&(ot.attributeNameCheck instanceof RegExp&&xu(ot.attributeNameCheck,Je)||ot.attributeNameCheck instanceof Function&&ot.attributeNameCheck(Je,ye))||Je==="is"&&ot.allowCustomizedBuiltInElements&&(ot.tagNameCheck instanceof RegExp&&xu(ot.tagNameCheck,ft)||ot.tagNameCheck instanceof Function&&ot.tagNameCheck(ft))))return!1}else if(!js[Je]){if(!xu(yt,VS(ft,He,""))){if(!((Je==="src"||Je==="xlink:href"||Je==="href")&&ye!=="script"&&f9e(ft,"data:")===0&&Qi[ye])){if(!(Dn&&!xu(De,VS(ft,He,"")))){if(ft)return!1}}}}}}}return!0},ji=function(ye){return ye!=="annotation-xml"&&BR(ye,Ue)},gr=function(ye){ur(ae.beforeSanitizeAttributes,ye,null);const{attributes:Je}=ye;if(!Je||Ir(ye))return;const ft={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:ut,forceKeepAttr:void 0};let Wt=Je.length;for(;Wt--;){const $t=Je[Wt],{name:mn,namespaceURI:tr,value:rr}=$t,Hn=fe(mn),ps=rr;let Mr=mn==="value"?ps:d9e(ps);if(ft.attrName=Hn,ft.attrValue=Mr,ft.keepAttr=!0,ft.forceKeepAttr=void 0,ur(ae.uponSanitizeAttribute,ye,ft),Mr=ft.attrValue,Mi&&(Hn==="id"||Hn==="name")&&(Bt(mn,ye),Mr=gi+Mr),zt&&xu(/((--!?|])>)|<\/(style|title|textarea)/i,Mr)){Bt(mn,ye);continue}if(Hn==="attributename"&&BR(Mr,"href")){Bt(mn,ye);continue}if(ft.forceKeepAttr)continue;if(!ft.keepAttr){Bt(mn,ye);continue}if(!Ut&&xu(/\/>/i,Mr)){Bt(mn,ye);continue}At&&I4([ce,se,ge],Ss=>{Mr=VS(Mr,Ss," ")});const Ci=fe(ye.nodeName);if(!ds(Ci,Hn,Mr)){Bt(mn,ye);continue}if(j&&typeof b=="object"&&typeof b.getAttributeType=="function"&&!tr)switch(b.getAttributeType(Ci,Hn)){case"TrustedHTML":{Mr=j.createHTML(Mr);break}case"TrustedScriptURL":{Mr=j.createScriptURL(Mr);break}}if(Mr!==ps)try{tr?ye.setAttributeNS(tr,mn,Mr):ye.setAttribute(mn,Mr),Ir(ye)?rt(ye):TX(e.removed)}catch{Bt(mn,ye)}}ur(ae.afterSanitizeAttributes,ye,null)},hi=function an(ye){let Je=null;const ft=In(ye);for(ur(ae.beforeSanitizeShadowDOM,ye,null);Je=ft.nextNode();)ur(ae.uponSanitizeShadowNode,Je,null),Cr(Je),gr(Je),Je.content instanceof s&&an(Je.content);ur(ae.afterSanitizeShadowDOM,ye,null)};return e.sanitize=function(an){let ye=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Je=null,ft=null,Wt=null,$t=null;if(si=!an,si&&(an="<!-->"),typeof an!="string"&&!Gn(an))if(typeof an.toString=="function"){if(an=an.toString(),typeof an!="string")throw qS("dirty is not a string, aborting")}else throw qS("toString is not a function");if(!e.isSupported)return an;if(Ze||et(ye),e.removed=[],typeof an=="string"&&(Hr=!1),Hr){if(an.nodeName){const rr=fe(an.nodeName);if(!We[rr]||dt[rr])throw qS("root node is forbidden and cannot be sanitized in-place")}}else if(an instanceof a)Je=On("<!---->"),ft=Je.ownerDocument.importNode(an,!0),ft.nodeType===XS.element&&ft.nodeName==="BODY"||ft.nodeName==="HTML"?Je=ft:Je.appendChild(ft);else{if(!Fn&&!At&&!nn&&an.indexOf("<")===-1)return j&&qn?j.createHTML(an):an;if(Je=On(an),!Je)return Fn?null:qn?Q:""}Je&&cn&&rt(Je.firstChild);const mn=In(Hr?an:Je);for(;Wt=mn.nextNode();)Cr(Wt),gr(Wt),Wt.content instanceof s&&hi(Wt.content);if(Hr)return an;if(Fn){if(An)for($t=J.call(Je.ownerDocument);Je.firstChild;)$t.appendChild(Je.firstChild);else $t=Je;return(ut.shadowroot||ut.shadowrootmode)&&($t=me.call(r,$t,!0)),$t}let tr=nn?Je.outerHTML:Je.innerHTML;return nn&&We["!doctype"]&&Je.ownerDocument&&Je.ownerDocument.doctype&&Je.ownerDocument.doctype.name&&xu(Ele,Je.ownerDocument.doctype.name)&&(tr="<!DOCTYPE "+Je.ownerDocument.doctype.name+`>
`+tr),At&&I4([ce,se,ge],rr=>{tr=VS(tr,rr," ")}),j&&qn?j.createHTML(tr):tr},e.setConfig=function(){let an=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};et(an),Ze=!0},e.clearConfig=function(){we=null,Ze=!1},e.isValidAttribute=function(an,ye,Je){we||et({});const ft=fe(an),Wt=fe(ye);return ds(ft,Wt,Je)},e.addHook=function(an,ye){typeof ye=="function"&&US(ae[an],ye)},e.removeHook=function(an,ye){if(ye!==void 0){const Je=c9e(ae[an],ye);return Je===-1?void 0:h9e(ae[an],Je,1)[0]}return TX(ae[an])},e.removeHooks=function(an){ae[an]=[]},e.removeAllHooks=function(){ae=FX()},e}var Ple=Tle();function vz(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}}var f_=vz();function Dle(t){f_=t}var G3={exec:()=>null};function rs(t,e=""){let n=typeof t=="string"?t:t.source,r={replace:(i,s)=>{let o=typeof s=="string"?s:s.source;return o=o.replace(Ru.caret,"$1"),n=n.replace(i,o),r},getRegex:()=>new RegExp(n,e)};return r}var E9e=(()=>{try{return!!new RegExp("(?<=1)(?<!1)")}catch{return!1}})(),Ru={codeRemoveIndent:/^(?: {1,4}| {0,3}\t)/gm,outputLinkReplace:/\\([\[\]])/g,indentCodeCompensation:/^(\s+)(?:```)/,beginningSpace:/^\s+/,endingHash:/#$/,startingSpaceChar:/^ /,endingSpaceChar:/ $/,nonSpaceChar:/[^ ]/,newLineCharGlobal:/\n/g,tabCharGlobal:/\t/g,multipleSpaceGlobal:/\s+/g,blankLine:/^[ \t]*$/,doubleBlankLine:/\n[ \t]*\n[ \t]*$/,blockquoteStart:/^ {0,3}>/,blockquoteSetextReplace:/\n {0,3}((?:=+|-+) *)(?=\n|$)/g,blockquoteSetextReplace2:/^ {0,3}>[ \t]?/gm,listReplaceTabs:/^\t+/,listReplaceNesting:/^ {1,4}(?=( {4})*[^ ])/g,listIsTask:/^\[[ xX]\] /,listReplaceTask:/^\[[ xX]\] +/,listTaskCheckbox:/\[[ xX]\]/,anyLine:/\n.*\n/,hrefBrackets:/^<(.*)>$/,tableDelimiter:/[:|]/,tableAlignChars:/^\||\| *$/g,tableRowBlankLine:/\n[ \t]*$/,tableAlignRight:/^ *-+: *$/,tableAlignCenter:/^ *:-+: *$/,tableAlignLeft:/^ *:-+ *$/,startATag:/^<a /i,endATag:/^<\/a>/i,startPreScriptTag:/^<(pre|code|kbd|script)(\s|>)/i,endPreScriptTag:/^<\/(pre|code|kbd|script)(\s|>)/i,startAngleBracket:/^</,endAngleBracket:/>$/,pedanticHrefTitle:/^([^'"]*[^\s])\s+(['"])(.*)\2/,unicodeAlphaNumeric:/[\p{L}\p{N}]/u,escapeTest:/[&<>"']/,escapeReplace:/[&<>"']/g,escapeTestNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,escapeReplaceNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/g,unescapeTest:/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig,caret:/(^|[^\[])\^/g,percentDecode:/%25/g,findPipe:/\|/g,splitPipe:/ \|/,slashPipe:/\\\|/g,carriageReturn:/\r\n|\r/g,spaceLine:/^ +$/gm,notSpaceStart:/^\S*/,endingNewline:/\n$/,listItemRegex:t=>new RegExp(`^( {0,3}${t})((?:[	 ][^\\n]*)?(?:\\n|$))`),nextBulletRegex:t=>new RegExp(`^ {0,${Math.min(3,t-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ 	][^\\n]*)?(?:\\n|$))`),hrRegex:t=>new RegExp(`^ {0,${Math.min(3,t-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),fencesBeginRegex:t=>new RegExp(`^ {0,${Math.min(3,t-1)}}(?:\`\`\`|~~~)`),headingBeginRegex:t=>new RegExp(`^ {0,${Math.min(3,t-1)}}#`),htmlBeginRegex:t=>new RegExp(`^ {0,${Math.min(3,t-1)}}<(?:[a-z].*>|!--)`,"i")},T9e=/^(?:[ \t]*(?:\n|$))+/,P9e=/^((?: {4}| {0,3}\t)[^\n]+(?:\n(?:[ \t]*(?:\n|$))*)?)+/,D9e=/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,JC=/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,I9e=/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,bz=/(?:[*+-]|\d{1,9}[.)])/,Ile=/^(?!bull |blockCode|fences|blockquote|heading|html|table)((?:.|\n(?!\s*?\n|bull |blockCode|fences|blockquote|heading|html|table))+?)\n {0,3}(=+|-+) *(?:\n+|$)/,Mle=rs(Ile).replace(/bull/g,bz).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/\|table/g,"").getRegex(),M9e=rs(Ile).replace(/bull/g,bz).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/table/g,/ {0,3}\|?(?:[:\- ]*\|)+[\:\- ]*\n/).getRegex(),_z=/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,R9e=/^[^\n]+/,xz=/(?!\s*\])(?:\\[\s\S]|[^\[\]\\])+/,F9e=rs(/^ {0,3}\[(label)\]: *(?:\n[ \t]*)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n[ \t]*)?| *\n[ \t]*)(title))? *(?:\n+|$)/).replace("label",xz).replace("title",/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/).getRegex(),L9e=rs(/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/).replace(/bull/g,bz).getRegex(),HD="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|search|section|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",wz=/<!--(?:-?>|[\s\S]*?(?:-->|$))/,$9e=rs("^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$))","i").replace("comment",wz).replace("tag",HD).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),Rle=rs(_z).replace("hr",JC).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",HD).getRegex(),B9e=rs(/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/).replace("paragraph",Rle).getRegex(),Oz={blockquote:B9e,code:P9e,def:F9e,fences:D9e,heading:I9e,hr:JC,html:$9e,lheading:Mle,list:L9e,newline:T9e,paragraph:Rle,table:G3,text:R9e},LX=rs("^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)").replace("hr",JC).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code","(?: {4}| {0,3}	)[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",HD).getRegex(),N9e={...Oz,lheading:M9e,table:LX,paragraph:rs(_z).replace("hr",JC).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",LX).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",HD).getRegex()},z9e={...Oz,html:rs(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",wz).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:G3,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:rs(_z).replace("hr",JC).replace("heading",` *#{1,6} *[^
]`).replace("lheading",Mle).replace("|table","").replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").replace("|tag","").getRegex()},Q9e=/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,j9e=/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,Fle=/^( {2,}|\\)\n(?!\s*$)/,U9e=/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,KD=/[\p{P}\p{S}]/u,Sz=/[\s\p{P}\p{S}]/u,Lle=/[^\s\p{P}\p{S}]/u,V9e=rs(/^((?![*_])punctSpace)/,"u").replace(/punctSpace/g,Sz).getRegex(),$le=/(?!~)[\p{P}\p{S}]/u,q9e=/(?!~)[\s\p{P}\p{S}]/u,Z9e=/(?:[^\s\p{P}\p{S}]|~)/u,X9e=rs(/link|precode-code|html/,"g").replace("link",/\[(?:[^\[\]`]|(?<a>`+)[^`]+\k<a>(?!`))*?\]\((?:\\[\s\S]|[^\\\(\)]|\((?:\\[\s\S]|[^\\\(\)])*\))*\)/).replace("precode-",E9e?"(?<!`)()":"(^^|[^`])").replace("code",/(?<b>`+)[^`]+\k<b>(?!`)/).replace("html",/<(?! )[^<>]*?>/).getRegex(),Ble=/^(?:\*+(?:((?!\*)punct)|[^\s*]))|^_+(?:((?!_)punct)|([^\s_]))/,W9e=rs(Ble,"u").replace(/punct/g,KD).getRegex(),G9e=rs(Ble,"u").replace(/punct/g,$le).getRegex(),Nle="^[^_*]*?__[^_*]*?\\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\\*)punct(\\*+)(?=[\\s]|$)|notPunctSpace(\\*+)(?!\\*)(?=punctSpace|$)|(?!\\*)punctSpace(\\*+)(?=notPunctSpace)|[\\s](\\*+)(?!\\*)(?=punct)|(?!\\*)punct(\\*+)(?!\\*)(?=punct)|notPunctSpace(\\*+)(?=notPunctSpace)",Y9e=rs(Nle,"gu").replace(/notPunctSpace/g,Lle).replace(/punctSpace/g,Sz).replace(/punct/g,KD).getRegex(),H9e=rs(Nle,"gu").replace(/notPunctSpace/g,Z9e).replace(/punctSpace/g,q9e).replace(/punct/g,$le).getRegex(),K9e=rs("^[^_*]*?\\*\\*[^_*]*?_[^_*]*?(?=\\*\\*)|[^_]+(?=[^_])|(?!_)punct(_+)(?=[\\s]|$)|notPunctSpace(_+)(?!_)(?=punctSpace|$)|(?!_)punctSpace(_+)(?=notPunctSpace)|[\\s](_+)(?!_)(?=punct)|(?!_)punct(_+)(?!_)(?=punct)","gu").replace(/notPunctSpace/g,Lle).replace(/punctSpace/g,Sz).replace(/punct/g,KD).getRegex(),J9e=rs(/\\(punct)/,"gu").replace(/punct/g,KD).getRegex(),eLe=rs(/^<(scheme:[^\s\x00-\x1f<>]*|email)>/).replace("scheme",/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/).replace("email",/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/).getRegex(),tLe=rs(wz).replace("(?:-->|$)","-->").getRegex(),nLe=rs("^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>").replace("comment",tLe).replace("attribute",/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/).getRegex(),K6=/(?:\[(?:\\[\s\S]|[^\[\]\\])*\]|\\[\s\S]|`+[^`]*?`+(?!`)|[^\[\]\\`])*?/,rLe=rs(/^!?\[(label)\]\(\s*(href)(?:(?:[ \t]*(?:\n[ \t]*)?)(title))?\s*\)/).replace("label",K6).replace("href",/<(?:\\.|[^\n<>\\])+>|[^ \t\n\x00-\x1f]*/).replace("title",/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/).getRegex(),zle=rs(/^!?\[(label)\]\[(ref)\]/).replace("label",K6).replace("ref",xz).getRegex(),Qle=rs(/^!?\[(ref)\](?:\[\])?/).replace("ref",xz).getRegex(),iLe=rs("reflink|nolink(?!\\()","g").replace("reflink",zle).replace("nolink",Qle).getRegex(),$X=/[hH][tT][tT][pP][sS]?|[fF][tT][pP]/,kz={_backpedal:G3,anyPunctuation:J9e,autolink:eLe,blockSkip:X9e,br:Fle,code:j9e,del:G3,emStrongLDelim:W9e,emStrongRDelimAst:Y9e,emStrongRDelimUnd:K9e,escape:Q9e,link:rLe,nolink:Qle,punctuation:V9e,reflink:zle,reflinkSearch:iLe,tag:nLe,text:U9e,url:G3},sLe={...kz,link:rs(/^!?\[(label)\]\((.*?)\)/).replace("label",K6).getRegex(),reflink:rs(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",K6).getRegex()},H9={...kz,emStrongRDelimAst:H9e,emStrongLDelim:G9e,url:rs(/^((?:protocol):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/).replace("protocol",$X).replace("email",/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/).getRegex(),_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])((?:\\[\s\S]|[^\\])*?(?:\\[\s\S]|[^\s~\\]))\1(?=[^~]|$)/,text:rs(/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|protocol:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/).replace("protocol",$X).getRegex()},oLe={...H9,br:rs(Fle).replace("{2,}","*").getRegex(),text:rs(H9.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()},R4={normal:Oz,gfm:N9e,pedantic:z9e},WS={normal:kz,gfm:H9,breaks:oLe,pedantic:sLe},aLe={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},BX=t=>aLe[t];function xg(t,e){if(e){if(Ru.escapeTest.test(t))return t.replace(Ru.escapeReplace,BX)}else if(Ru.escapeTestNoEncode.test(t))return t.replace(Ru.escapeReplaceNoEncode,BX);return t}function NX(t){try{t=encodeURI(t).replace(Ru.percentDecode,"%")}catch{return null}return t}function zX(t,e){let n=t.replace(Ru.findPipe,(s,o,a)=>{let l=!1,h=o;for(;--h>=0&&a[h]==="\\";)l=!l;return l?"|":" |"}),r=n.split(Ru.splitPipe),i=0;if(r[0].trim()||r.shift(),r.length>0&&!r.at(-1)?.trim()&&r.pop(),e)if(r.length>e)r.splice(e);else for(;r.length<e;)r.push("");for(;i<r.length;i++)r[i]=r[i].trim().replace(Ru.slashPipe,"|");return r}function GS(t,e,n){let r=t.length;if(r===0)return"";let i=0;for(;i<r&&t.charAt(r-i-1)===e;)i++;return t.slice(0,r-i)}function lLe(t,e){if(t.indexOf(e[1])===-1)return-1;let n=0;for(let r=0;r<t.length;r++)if(t[r]==="\\")r++;else if(t[r]===e[0])n++;else if(t[r]===e[1]&&(n--,n<0))return r;return n>0?-2:-1}function QX(t,e,n,r,i){let s=e.href,o=e.title||null,a=t[1].replace(i.other.outputLinkReplace,"$1");r.state.inLink=!0;let l={type:t[0].charAt(0)==="!"?"image":"link",raw:n,href:s,title:o,text:a,tokens:r.inlineTokens(a)};return r.state.inLink=!1,l}function uLe(t,e,n){let r=t.match(n.other.indentCodeCompensation);if(r===null)return e;let i=r[1];return e.split(`
`).map(s=>{let o=s.match(n.other.beginningSpace);if(o===null)return s;let[a]=o;return a.length>=i.length?s.slice(i.length):s}).join(`
`)}var J6=class{options;rules;lexer;constructor(e){this.options=e||f_}space(e){let n=this.rules.block.newline.exec(e);if(n&&n[0].length>0)return{type:"space",raw:n[0]}}code(e){let n=this.rules.block.code.exec(e);if(n){let r=n[0].replace(this.rules.other.codeRemoveIndent,"");return{type:"code",raw:n[0],codeBlockStyle:"indented",text:this.options.pedantic?r:GS(r,`
`)}}}fences(e){let n=this.rules.block.fences.exec(e);if(n){let r=n[0],i=uLe(r,n[3]||"",this.rules);return{type:"code",raw:r,lang:n[2]?n[2].trim().replace(this.rules.inline.anyPunctuation,"$1"):n[2],text:i}}}heading(e){let n=this.rules.block.heading.exec(e);if(n){let r=n[2].trim();if(this.rules.other.endingHash.test(r)){let i=GS(r,"#");(this.options.pedantic||!i||this.rules.other.endingSpaceChar.test(i))&&(r=i.trim())}return{type:"heading",raw:n[0],depth:n[1].length,text:r,tokens:this.lexer.inline(r)}}}hr(e){let n=this.rules.block.hr.exec(e);if(n)return{type:"hr",raw:GS(n[0],`
`)}}blockquote(e){let n=this.rules.block.blockquote.exec(e);if(n){let r=GS(n[0],`
`).split(`
`),i="",s="",o=[];for(;r.length>0;){let a=!1,l=[],h;for(h=0;h<r.length;h++)if(this.rules.other.blockquoteStart.test(r[h]))l.push(r[h]),a=!0;else if(!a)l.push(r[h]);else break;r=r.slice(h);let f=l.join(`
`),p=f.replace(this.rules.other.blockquoteSetextReplace,`
    $1`).replace(this.rules.other.blockquoteSetextReplace2,"");i=i?`${i}
${f}`:f,s=s?`${s}
${p}`:p;let g=this.lexer.state.top;if(this.lexer.state.top=!0,this.lexer.blockTokens(p,o,!0),this.lexer.state.top=g,r.length===0)break;let b=o.at(-1);if(b?.type==="code")break;if(b?.type==="blockquote"){let x=b,k=x.raw+`
`+r.join(`
`),T=this.blockquote(k);o[o.length-1]=T,i=i.substring(0,i.length-x.raw.length)+T.raw,s=s.substring(0,s.length-x.text.length)+T.text;break}else if(b?.type==="list"){let x=b,k=x.raw+`
`+r.join(`
`),T=this.list(k);o[o.length-1]=T,i=i.substring(0,i.length-b.raw.length)+T.raw,s=s.substring(0,s.length-x.raw.length)+T.raw,r=k.substring(o.at(-1).raw.length).split(`
`);continue}}return{type:"blockquote",raw:i,tokens:o,text:s}}}list(e){let n=this.rules.block.list.exec(e);if(n){let r=n[1].trim(),i=r.length>1,s={type:"list",raw:"",ordered:i,start:i?+r.slice(0,-1):"",loose:!1,items:[]};r=i?`\\d{1,9}\\${r.slice(-1)}`:`\\${r}`,this.options.pedantic&&(r=i?r:"[*+-]");let o=this.rules.other.listItemRegex(r),a=!1;for(;e;){let h=!1,f="",p="";if(!(n=o.exec(e))||this.rules.block.hr.test(e))break;f=n[0],e=e.substring(f.length);let g=n[2].split(`
`,1)[0].replace(this.rules.other.listReplaceTabs,I=>" ".repeat(3*I.length)),b=e.split(`
`,1)[0],x=!g.trim(),k=0;if(this.options.pedantic?(k=2,p=g.trimStart()):x?k=n[1].length+1:(k=n[2].search(this.rules.other.nonSpaceChar),k=k>4?1:k,p=g.slice(k),k+=n[1].length),x&&this.rules.other.blankLine.test(b)&&(f+=b+`
`,e=e.substring(b.length+1),h=!0),!h){let I=this.rules.other.nextBulletRegex(k),M=this.rules.other.hrRegex(k),B=this.rules.other.fencesBeginRegex(k),j=this.rules.other.headingBeginRegex(k),Q=this.rules.other.htmlBeginRegex(k);for(;e;){let Z=e.split(`
`,1)[0],q;if(b=Z,this.options.pedantic?(b=b.replace(this.rules.other.listReplaceNesting,"  "),q=b):q=b.replace(this.rules.other.tabCharGlobal,"    "),B.test(b)||j.test(b)||Q.test(b)||I.test(b)||M.test(b))break;if(q.search(this.rules.other.nonSpaceChar)>=k||!b.trim())p+=`
`+q.slice(k);else{if(x||g.replace(this.rules.other.tabCharGlobal,"    ").search(this.rules.other.nonSpaceChar)>=4||B.test(g)||j.test(g)||M.test(g))break;p+=`
`+b}!x&&!b.trim()&&(x=!0),f+=Z+`
`,e=e.substring(Z.length+1),g=q.slice(k)}}s.loose||(a?s.loose=!0:this.rules.other.doubleBlankLine.test(f)&&(a=!0));let T=null;this.options.gfm&&(T=this.rules.other.listIsTask.exec(p),T&&(p=p.replace(this.rules.other.listReplaceTask,""))),s.items.push({type:"list_item",raw:f,task:!!T,loose:!1,text:p,tokens:[]}),s.raw+=f}let l=s.items.at(-1);if(l)l.raw=l.raw.trimEnd(),l.text=l.text.trimEnd();else return;s.raw=s.raw.trimEnd();for(let h of s.items){if(this.lexer.state.top=!1,h.tokens=this.lexer.blockTokens(h.text,[]),h.task){let f=this.rules.other.listTaskCheckbox.exec(h.raw);if(f){let p={type:"checkbox",raw:f[0]+" ",checked:f[0]!=="[ ]"};h.checked=p.checked,s.loose?h.tokens[0]&&["paragraph","text"].includes(h.tokens[0].type)&&"tokens"in h.tokens[0]&&h.tokens[0].tokens?(h.tokens[0].raw=p.raw+h.tokens[0].raw,h.tokens[0].text=p.raw+h.tokens[0].text,h.tokens[0].tokens.unshift(p)):h.tokens.unshift({type:"paragraph",raw:p.raw,text:p.raw,tokens:[p]}):h.tokens.unshift(p)}}if(!s.loose){let f=h.tokens.filter(g=>g.type==="space"),p=f.length>0&&f.some(g=>this.rules.other.anyLine.test(g.raw));s.loose=p}}if(s.loose)for(let h of s.items){h.loose=!0;for(let f of h.tokens)f.type==="text"&&(f.type="paragraph")}return s}}html(e){let n=this.rules.block.html.exec(e);if(n)return{type:"html",block:!0,raw:n[0],pre:n[1]==="pre"||n[1]==="script"||n[1]==="style",text:n[0]}}def(e){let n=this.rules.block.def.exec(e);if(n){let r=n[1].toLowerCase().replace(this.rules.other.multipleSpaceGlobal," "),i=n[2]?n[2].replace(this.rules.other.hrefBrackets,"$1").replace(this.rules.inline.anyPunctuation,"$1"):"",s=n[3]?n[3].substring(1,n[3].length-1).replace(this.rules.inline.anyPunctuation,"$1"):n[3];return{type:"def",tag:r,raw:n[0],href:i,title:s}}}table(e){let n=this.rules.block.table.exec(e);if(!n||!this.rules.other.tableDelimiter.test(n[2]))return;let r=zX(n[1]),i=n[2].replace(this.rules.other.tableAlignChars,"").split("|"),s=n[3]?.trim()?n[3].replace(this.rules.other.tableRowBlankLine,"").split(`
`):[],o={type:"table",raw:n[0],header:[],align:[],rows:[]};if(r.length===i.length){for(let a of i)this.rules.other.tableAlignRight.test(a)?o.align.push("right"):this.rules.other.tableAlignCenter.test(a)?o.align.push("center"):this.rules.other.tableAlignLeft.test(a)?o.align.push("left"):o.align.push(null);for(let a=0;a<r.length;a++)o.header.push({text:r[a],tokens:this.lexer.inline(r[a]),header:!0,align:o.align[a]});for(let a of s)o.rows.push(zX(a,o.header.length).map((l,h)=>({text:l,tokens:this.lexer.inline(l),header:!1,align:o.align[h]})));return o}}lheading(e){let n=this.rules.block.lheading.exec(e);if(n)return{type:"heading",raw:n[0],depth:n[2].charAt(0)==="="?1:2,text:n[1],tokens:this.lexer.inline(n[1])}}paragraph(e){let n=this.rules.block.paragraph.exec(e);if(n){let r=n[1].charAt(n[1].length-1)===`
`?n[1].slice(0,-1):n[1];return{type:"paragraph",raw:n[0],text:r,tokens:this.lexer.inline(r)}}}text(e){let n=this.rules.block.text.exec(e);if(n)return{type:"text",raw:n[0],text:n[0],tokens:this.lexer.inline(n[0])}}escape(e){let n=this.rules.inline.escape.exec(e);if(n)return{type:"escape",raw:n[0],text:n[1]}}tag(e){let n=this.rules.inline.tag.exec(e);if(n)return!this.lexer.state.inLink&&this.rules.other.startATag.test(n[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&this.rules.other.endATag.test(n[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&this.rules.other.startPreScriptTag.test(n[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&this.rules.other.endPreScriptTag.test(n[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:n[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:n[0]}}link(e){let n=this.rules.inline.link.exec(e);if(n){let r=n[2].trim();if(!this.options.pedantic&&this.rules.other.startAngleBracket.test(r)){if(!this.rules.other.endAngleBracket.test(r))return;let o=GS(r.slice(0,-1),"\\");if((r.length-o.length)%2===0)return}else{let o=lLe(n[2],"()");if(o===-2)return;if(o>-1){let a=(n[0].indexOf("!")===0?5:4)+n[1].length+o;n[2]=n[2].substring(0,o),n[0]=n[0].substring(0,a).trim(),n[3]=""}}let i=n[2],s="";if(this.options.pedantic){let o=this.rules.other.pedanticHrefTitle.exec(i);o&&(i=o[1],s=o[3])}else s=n[3]?n[3].slice(1,-1):"";return i=i.trim(),this.rules.other.startAngleBracket.test(i)&&(this.options.pedantic&&!this.rules.other.endAngleBracket.test(r)?i=i.slice(1):i=i.slice(1,-1)),QX(n,{href:i&&i.replace(this.rules.inline.anyPunctuation,"$1"),title:s&&s.replace(this.rules.inline.anyPunctuation,"$1")},n[0],this.lexer,this.rules)}}reflink(e,n){let r;if((r=this.rules.inline.reflink.exec(e))||(r=this.rules.inline.nolink.exec(e))){let i=(r[2]||r[1]).replace(this.rules.other.multipleSpaceGlobal," "),s=n[i.toLowerCase()];if(!s){let o=r[0].charAt(0);return{type:"text",raw:o,text:o}}return QX(r,s,r[0],this.lexer,this.rules)}}emStrong(e,n,r=""){let i=this.rules.inline.emStrongLDelim.exec(e);if(!(!i||i[3]&&r.match(this.rules.other.unicodeAlphaNumeric))&&(!(i[1]||i[2])||!r||this.rules.inline.punctuation.exec(r))){let s=[...i[0]].length-1,o,a,l=s,h=0,f=i[0][0]==="*"?this.rules.inline.emStrongRDelimAst:this.rules.inline.emStrongRDelimUnd;for(f.lastIndex=0,n=n.slice(-1*e.length+s);(i=f.exec(n))!=null;){if(o=i[1]||i[2]||i[3]||i[4]||i[5]||i[6],!o)continue;if(a=[...o].length,i[3]||i[4]){l+=a;continue}else if((i[5]||i[6])&&s%3&&!((s+a)%3)){h+=a;continue}if(l-=a,l>0)continue;a=Math.min(a,a+l+h);let p=[...i[0]][0].length,g=e.slice(0,s+i.index+p+a);if(Math.min(s,a)%2){let x=g.slice(1,-1);return{type:"em",raw:g,text:x,tokens:this.lexer.inlineTokens(x)}}let b=g.slice(2,-2);return{type:"strong",raw:g,text:b,tokens:this.lexer.inlineTokens(b)}}}}codespan(e){let n=this.rules.inline.code.exec(e);if(n){let r=n[2].replace(this.rules.other.newLineCharGlobal," "),i=this.rules.other.nonSpaceChar.test(r),s=this.rules.other.startingSpaceChar.test(r)&&this.rules.other.endingSpaceChar.test(r);return i&&s&&(r=r.substring(1,r.length-1)),{type:"codespan",raw:n[0],text:r}}}br(e){let n=this.rules.inline.br.exec(e);if(n)return{type:"br",raw:n[0]}}del(e){let n=this.rules.inline.del.exec(e);if(n)return{type:"del",raw:n[0],text:n[2],tokens:this.lexer.inlineTokens(n[2])}}autolink(e){let n=this.rules.inline.autolink.exec(e);if(n){let r,i;return n[2]==="@"?(r=n[1],i="mailto:"+r):(r=n[1],i=r),{type:"link",raw:n[0],text:r,href:i,tokens:[{type:"text",raw:r,text:r}]}}}url(e){let n;if(n=this.rules.inline.url.exec(e)){let r,i;if(n[2]==="@")r=n[0],i="mailto:"+r;else{let s;do s=n[0],n[0]=this.rules.inline._backpedal.exec(n[0])?.[0]??"";while(s!==n[0]);r=n[0],n[1]==="www."?i="http://"+n[0]:i=n[0]}return{type:"link",raw:n[0],text:r,href:i,tokens:[{type:"text",raw:r,text:r}]}}}inlineText(e){let n=this.rules.inline.text.exec(e);if(n){let r=this.lexer.state.inRawBlock;return{type:"text",raw:n[0],text:n[0],escaped:r}}}},hd=class K9{tokens;options;state;tokenizer;inlineQueue;constructor(e){this.tokens=[],this.tokens.links=Object.create(null),this.options=e||f_,this.options.tokenizer=this.options.tokenizer||new J6,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};let n={other:Ru,block:R4.normal,inline:WS.normal};this.options.pedantic?(n.block=R4.pedantic,n.inline=WS.pedantic):this.options.gfm&&(n.block=R4.gfm,this.options.breaks?n.inline=WS.breaks:n.inline=WS.gfm),this.tokenizer.rules=n}static get rules(){return{block:R4,inline:WS}}static lex(e,n){return new K9(n).lex(e)}static lexInline(e,n){return new K9(n).inlineTokens(e)}lex(e){e=e.replace(Ru.carriageReturn,`
`),this.blockTokens(e,this.tokens);for(let n=0;n<this.inlineQueue.length;n++){let r=this.inlineQueue[n];this.inlineTokens(r.src,r.tokens)}return this.inlineQueue=[],this.tokens}blockTokens(e,n=[],r=!1){for(this.options.pedantic&&(e=e.replace(Ru.tabCharGlobal,"    ").replace(Ru.spaceLine,""));e;){let i;if(this.options.extensions?.block?.some(o=>(i=o.call({lexer:this},e,n))?(e=e.substring(i.raw.length),n.push(i),!0):!1))continue;if(i=this.tokenizer.space(e)){e=e.substring(i.raw.length);let o=n.at(-1);i.raw.length===1&&o!==void 0?o.raw+=`
`:n.push(i);continue}if(i=this.tokenizer.code(e)){e=e.substring(i.raw.length);let o=n.at(-1);o?.type==="paragraph"||o?.type==="text"?(o.raw+=(o.raw.endsWith(`
`)?"":`
`)+i.raw,o.text+=`
`+i.text,this.inlineQueue.at(-1).src=o.text):n.push(i);continue}if(i=this.tokenizer.fences(e)){e=e.substring(i.raw.length),n.push(i);continue}if(i=this.tokenizer.heading(e)){e=e.substring(i.raw.length),n.push(i);continue}if(i=this.tokenizer.hr(e)){e=e.substring(i.raw.length),n.push(i);continue}if(i=this.tokenizer.blockquote(e)){e=e.substring(i.raw.length),n.push(i);continue}if(i=this.tokenizer.list(e)){e=e.substring(i.raw.length),n.push(i);continue}if(i=this.tokenizer.html(e)){e=e.substring(i.raw.length),n.push(i);continue}if(i=this.tokenizer.def(e)){e=e.substring(i.raw.length);let o=n.at(-1);o?.type==="paragraph"||o?.type==="text"?(o.raw+=(o.raw.endsWith(`
`)?"":`
`)+i.raw,o.text+=`
`+i.raw,this.inlineQueue.at(-1).src=o.text):this.tokens.links[i.tag]||(this.tokens.links[i.tag]={href:i.href,title:i.title},n.push(i));continue}if(i=this.tokenizer.table(e)){e=e.substring(i.raw.length),n.push(i);continue}if(i=this.tokenizer.lheading(e)){e=e.substring(i.raw.length),n.push(i);continue}let s=e;if(this.options.extensions?.startBlock){let o=1/0,a=e.slice(1),l;this.options.extensions.startBlock.forEach(h=>{l=h.call({lexer:this},a),typeof l=="number"&&l>=0&&(o=Math.min(o,l))}),o<1/0&&o>=0&&(s=e.substring(0,o+1))}if(this.state.top&&(i=this.tokenizer.paragraph(s))){let o=n.at(-1);r&&o?.type==="paragraph"?(o.raw+=(o.raw.endsWith(`
`)?"":`
`)+i.raw,o.text+=`
`+i.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=o.text):n.push(i),r=s.length!==e.length,e=e.substring(i.raw.length);continue}if(i=this.tokenizer.text(e)){e=e.substring(i.raw.length);let o=n.at(-1);o?.type==="text"?(o.raw+=(o.raw.endsWith(`
`)?"":`
`)+i.raw,o.text+=`
`+i.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=o.text):n.push(i);continue}if(e){let o="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(o);break}else throw new Error(o)}}return this.state.top=!0,n}inline(e,n=[]){return this.inlineQueue.push({src:e,tokens:n}),n}inlineTokens(e,n=[]){let r=e,i=null;if(this.tokens.links){let l=Object.keys(this.tokens.links);if(l.length>0)for(;(i=this.tokenizer.rules.inline.reflinkSearch.exec(r))!=null;)l.includes(i[0].slice(i[0].lastIndexOf("[")+1,-1))&&(r=r.slice(0,i.index)+"["+"a".repeat(i[0].length-2)+"]"+r.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(i=this.tokenizer.rules.inline.anyPunctuation.exec(r))!=null;)r=r.slice(0,i.index)+"++"+r.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);let s;for(;(i=this.tokenizer.rules.inline.blockSkip.exec(r))!=null;)s=i[2]?i[2].length:0,r=r.slice(0,i.index+s)+"["+"a".repeat(i[0].length-s-2)+"]"+r.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);r=this.options.hooks?.emStrongMask?.call({lexer:this},r)??r;let o=!1,a="";for(;e;){o||(a=""),o=!1;let l;if(this.options.extensions?.inline?.some(f=>(l=f.call({lexer:this},e,n))?(e=e.substring(l.raw.length),n.push(l),!0):!1))continue;if(l=this.tokenizer.escape(e)){e=e.substring(l.raw.length),n.push(l);continue}if(l=this.tokenizer.tag(e)){e=e.substring(l.raw.length),n.push(l);continue}if(l=this.tokenizer.link(e)){e=e.substring(l.raw.length),n.push(l);continue}if(l=this.tokenizer.reflink(e,this.tokens.links)){e=e.substring(l.raw.length);let f=n.at(-1);l.type==="text"&&f?.type==="text"?(f.raw+=l.raw,f.text+=l.text):n.push(l);continue}if(l=this.tokenizer.emStrong(e,r,a)){e=e.substring(l.raw.length),n.push(l);continue}if(l=this.tokenizer.codespan(e)){e=e.substring(l.raw.length),n.push(l);continue}if(l=this.tokenizer.br(e)){e=e.substring(l.raw.length),n.push(l);continue}if(l=this.tokenizer.del(e)){e=e.substring(l.raw.length),n.push(l);continue}if(l=this.tokenizer.autolink(e)){e=e.substring(l.raw.length),n.push(l);continue}if(!this.state.inLink&&(l=this.tokenizer.url(e))){e=e.substring(l.raw.length),n.push(l);continue}let h=e;if(this.options.extensions?.startInline){let f=1/0,p=e.slice(1),g;this.options.extensions.startInline.forEach(b=>{g=b.call({lexer:this},p),typeof g=="number"&&g>=0&&(f=Math.min(f,g))}),f<1/0&&f>=0&&(h=e.substring(0,f+1))}if(l=this.tokenizer.inlineText(h)){e=e.substring(l.raw.length),l.raw.slice(-1)!=="_"&&(a=l.raw.slice(-1)),o=!0;let f=n.at(-1);f?.type==="text"?(f.raw+=l.raw,f.text+=l.text):n.push(l);continue}if(e){let f="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(f);break}else throw new Error(f)}}return n}},eP=class{options;parser;constructor(t){this.options=t||f_}space(t){return""}code({text:t,lang:e,escaped:n}){let r=(e||"").match(Ru.notSpaceStart)?.[0],i=t.replace(Ru.endingNewline,"")+`
`;return r?'<pre><code class="language-'+xg(r)+'">'+(n?i:xg(i,!0))+`</code></pre>
`:"<pre><code>"+(n?i:xg(i,!0))+`</code></pre>
`}blockquote({tokens:t}){return`<blockquote>
${this.parser.parse(t)}</blockquote>
`}html({text:t}){return t}def(t){return""}heading({tokens:t,depth:e}){return`<h${e}>${this.parser.parseInline(t)}</h${e}>
`}hr(t){return`<hr>
`}list(t){let e=t.ordered,n=t.start,r="";for(let o=0;o<t.items.length;o++){let a=t.items[o];r+=this.listitem(a)}let i=e?"ol":"ul",s=e&&n!==1?' start="'+n+'"':"";return"<"+i+s+`>
`+r+"</"+i+`>
`}listitem(t){return`<li>${this.parser.parse(t.tokens)}</li>
`}checkbox({checked:t}){return"<input "+(t?'checked="" ':"")+'disabled="" type="checkbox"> '}paragraph({tokens:t}){return`<p>${this.parser.parseInline(t)}</p>
`}table(t){let e="",n="";for(let i=0;i<t.header.length;i++)n+=this.tablecell(t.header[i]);e+=this.tablerow({text:n});let r="";for(let i=0;i<t.rows.length;i++){let s=t.rows[i];n="";for(let o=0;o<s.length;o++)n+=this.tablecell(s[o]);r+=this.tablerow({text:n})}return r&&(r=`<tbody>${r}</tbody>`),`<table>
<thead>
`+e+`</thead>
`+r+`</table>
`}tablerow({text:t}){return`<tr>
${t}</tr>
`}tablecell(t){let e=this.parser.parseInline(t.tokens),n=t.header?"th":"td";return(t.align?`<${n} align="${t.align}">`:`<${n}>`)+e+`</${n}>
`}strong({tokens:t}){return`<strong>${this.parser.parseInline(t)}</strong>`}em({tokens:t}){return`<em>${this.parser.parseInline(t)}</em>`}codespan({text:t}){return`<code>${xg(t,!0)}</code>`}br(t){return"<br>"}del({tokens:t}){return`<del>${this.parser.parseInline(t)}</del>`}link({href:t,title:e,tokens:n}){let r=this.parser.parseInline(n),i=NX(t);if(i===null)return r;t=i;let s='<a href="'+t+'"';return e&&(s+=' title="'+xg(e)+'"'),s+=">"+r+"</a>",s}image({href:t,title:e,text:n,tokens:r}){r&&(n=this.parser.parseInline(r,this.parser.textRenderer));let i=NX(t);if(i===null)return xg(n);t=i;let s=`<img src="${t}" alt="${n}"`;return e&&(s+=` title="${xg(e)}"`),s+=">",s}text(t){return"tokens"in t&&t.tokens?this.parser.parseInline(t.tokens):"escaped"in t&&t.escaped?t.text:xg(t.text)}},Cz=class{strong({text:t}){return t}em({text:t}){return t}codespan({text:t}){return t}del({text:t}){return t}html({text:t}){return t}text({text:t}){return t}link({text:t}){return""+t}image({text:t}){return""+t}br(){return""}checkbox({raw:t}){return t}},fd=class J9{options;renderer;textRenderer;constructor(e){this.options=e||f_,this.options.renderer=this.options.renderer||new eP,this.renderer=this.options.renderer,this.renderer.options=this.options,this.renderer.parser=this,this.textRenderer=new Cz}static parse(e,n){return new J9(n).parse(e)}static parseInline(e,n){return new J9(n).parseInline(e)}parse(e){let n="";for(let r=0;r<e.length;r++){let i=e[r];if(this.options.extensions?.renderers?.[i.type]){let o=i,a=this.options.extensions.renderers[o.type].call({parser:this},o);if(a!==!1||!["space","hr","heading","code","table","blockquote","list","html","def","paragraph","text"].includes(o.type)){n+=a||"";continue}}let s=i;switch(s.type){case"space":{n+=this.renderer.space(s);break}case"hr":{n+=this.renderer.hr(s);break}case"heading":{n+=this.renderer.heading(s);break}case"code":{n+=this.renderer.code(s);break}case"table":{n+=this.renderer.table(s);break}case"blockquote":{n+=this.renderer.blockquote(s);break}case"list":{n+=this.renderer.list(s);break}case"checkbox":{n+=this.renderer.checkbox(s);break}case"html":{n+=this.renderer.html(s);break}case"def":{n+=this.renderer.def(s);break}case"paragraph":{n+=this.renderer.paragraph(s);break}case"text":{n+=this.renderer.text(s);break}default:{let o='Token with "'+s.type+'" type was not found.';if(this.options.silent)return console.error(o),"";throw new Error(o)}}}return n}parseInline(e,n=this.renderer){let r="";for(let i=0;i<e.length;i++){let s=e[i];if(this.options.extensions?.renderers?.[s.type]){let a=this.options.extensions.renderers[s.type].call({parser:this},s);if(a!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(s.type)){r+=a||"";continue}}let o=s;switch(o.type){case"escape":{r+=n.text(o);break}case"html":{r+=n.html(o);break}case"link":{r+=n.link(o);break}case"image":{r+=n.image(o);break}case"checkbox":{r+=n.checkbox(o);break}case"strong":{r+=n.strong(o);break}case"em":{r+=n.em(o);break}case"codespan":{r+=n.codespan(o);break}case"br":{r+=n.br(o);break}case"del":{r+=n.del(o);break}case"text":{r+=n.text(o);break}default:{let a='Token with "'+o.type+'" type was not found.';if(this.options.silent)return console.error(a),"";throw new Error(a)}}}return r}},S3=class{options;block;constructor(t){this.options=t||f_}static passThroughHooks=new Set(["preprocess","postprocess","processAllTokens","emStrongMask"]);static passThroughHooksRespectAsync=new Set(["preprocess","postprocess","processAllTokens"]);preprocess(t){return t}postprocess(t){return t}processAllTokens(t){return t}emStrongMask(t){return t}provideLexer(){return this.block?hd.lex:hd.lexInline}provideParser(){return this.block?fd.parse:fd.parseInline}},cLe=class{defaults=vz();options=this.setOptions;parse=this.parseMarkdown(!0);parseInline=this.parseMarkdown(!1);Parser=fd;Renderer=eP;TextRenderer=Cz;Lexer=hd;Tokenizer=J6;Hooks=S3;constructor(...e){this.use(...e)}walkTokens(e,n){let r=[];for(let i of e)switch(r=r.concat(n.call(this,i)),i.type){case"table":{let s=i;for(let o of s.header)r=r.concat(this.walkTokens(o.tokens,n));for(let o of s.rows)for(let a of o)r=r.concat(this.walkTokens(a.tokens,n));break}case"list":{let s=i;r=r.concat(this.walkTokens(s.items,n));break}default:{let s=i;this.defaults.extensions?.childTokens?.[s.type]?this.defaults.extensions.childTokens[s.type].forEach(o=>{let a=s[o].flat(1/0);r=r.concat(this.walkTokens(a,n))}):s.tokens&&(r=r.concat(this.walkTokens(s.tokens,n)))}}return r}use(...e){let n=this.defaults.extensions||{renderers:{},childTokens:{}};return e.forEach(r=>{let i={...r};if(i.async=this.defaults.async||i.async||!1,r.extensions&&(r.extensions.forEach(s=>{if(!s.name)throw new Error("extension name required");if("renderer"in s){let o=n.renderers[s.name];o?n.renderers[s.name]=function(...a){let l=s.renderer.apply(this,a);return l===!1&&(l=o.apply(this,a)),l}:n.renderers[s.name]=s.renderer}if("tokenizer"in s){if(!s.level||s.level!=="block"&&s.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");let o=n[s.level];o?o.unshift(s.tokenizer):n[s.level]=[s.tokenizer],s.start&&(s.level==="block"?n.startBlock?n.startBlock.push(s.start):n.startBlock=[s.start]:s.level==="inline"&&(n.startInline?n.startInline.push(s.start):n.startInline=[s.start]))}"childTokens"in s&&s.childTokens&&(n.childTokens[s.name]=s.childTokens)}),i.extensions=n),r.renderer){let s=this.defaults.renderer||new eP(this.defaults);for(let o in r.renderer){if(!(o in s))throw new Error(`renderer '${o}' does not exist`);if(["options","parser"].includes(o))continue;let a=o,l=r.renderer[a],h=s[a];s[a]=(...f)=>{let p=l.apply(s,f);return p===!1&&(p=h.apply(s,f)),p||""}}i.renderer=s}if(r.tokenizer){let s=this.defaults.tokenizer||new J6(this.defaults);for(let o in r.tokenizer){if(!(o in s))throw new Error(`tokenizer '${o}' does not exist`);if(["options","rules","lexer"].includes(o))continue;let a=o,l=r.tokenizer[a],h=s[a];s[a]=(...f)=>{let p=l.apply(s,f);return p===!1&&(p=h.apply(s,f)),p}}i.tokenizer=s}if(r.hooks){let s=this.defaults.hooks||new S3;for(let o in r.hooks){if(!(o in s))throw new Error(`hook '${o}' does not exist`);if(["options","block"].includes(o))continue;let a=o,l=r.hooks[a],h=s[a];S3.passThroughHooks.has(o)?s[a]=f=>{if(this.defaults.async&&S3.passThroughHooksRespectAsync.has(o))return(async()=>{let g=await l.call(s,f);return h.call(s,g)})();let p=l.call(s,f);return h.call(s,p)}:s[a]=(...f)=>{if(this.defaults.async)return(async()=>{let g=await l.apply(s,f);return g===!1&&(g=await h.apply(s,f)),g})();let p=l.apply(s,f);return p===!1&&(p=h.apply(s,f)),p}}i.hooks=s}if(r.walkTokens){let s=this.defaults.walkTokens,o=r.walkTokens;i.walkTokens=function(a){let l=[];return l.push(o.call(this,a)),s&&(l=l.concat(s.call(this,a))),l}}this.defaults={...this.defaults,...i}}),this}setOptions(e){return this.defaults={...this.defaults,...e},this}lexer(e,n){return hd.lex(e,n??this.defaults)}parser(e,n){return fd.parse(e,n??this.defaults)}parseMarkdown(e){return(n,r)=>{let i={...r},s={...this.defaults,...i},o=this.onError(!!s.silent,!!s.async);if(this.defaults.async===!0&&i.async===!1)return o(new Error("marked(): The async option was set to true by an extension. Remove async: false from the parse options object to return a Promise."));if(typeof n>"u"||n===null)return o(new Error("marked(): input parameter is undefined or null"));if(typeof n!="string")return o(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(n)+", string expected"));if(s.hooks&&(s.hooks.options=s,s.hooks.block=e),s.async)return(async()=>{let a=s.hooks?await s.hooks.preprocess(n):n,l=await(s.hooks?await s.hooks.provideLexer():e?hd.lex:hd.lexInline)(a,s),h=s.hooks?await s.hooks.processAllTokens(l):l;s.walkTokens&&await Promise.all(this.walkTokens(h,s.walkTokens));let f=await(s.hooks?await s.hooks.provideParser():e?fd.parse:fd.parseInline)(h,s);return s.hooks?await s.hooks.postprocess(f):f})().catch(o);try{s.hooks&&(n=s.hooks.preprocess(n));let a=(s.hooks?s.hooks.provideLexer():e?hd.lex:hd.lexInline)(n,s);s.hooks&&(a=s.hooks.processAllTokens(a)),s.walkTokens&&this.walkTokens(a,s.walkTokens);let l=(s.hooks?s.hooks.provideParser():e?fd.parse:fd.parseInline)(a,s);return s.hooks&&(l=s.hooks.postprocess(l)),l}catch(a){return o(a)}}}onError(e,n){return r=>{if(r.message+=`
Please report this to https://github.com/markedjs/marked.`,e){let i="<p>An error occurred:</p><pre>"+xg(r.message+"",!0)+"</pre>";return n?Promise.resolve(i):i}if(n)return Promise.reject(r);throw r}}},Vb=new cLe;function Ds(t,e){return Vb.parse(t,e)}Ds.options=Ds.setOptions=function(t){return Vb.setOptions(t),Ds.defaults=Vb.defaults,Dle(Ds.defaults),Ds};Ds.getDefaults=vz;Ds.defaults=f_;Ds.use=function(...t){return Vb.use(...t),Ds.defaults=Vb.defaults,Dle(Ds.defaults),Ds};Ds.walkTokens=function(t,e){return Vb.walkTokens(t,e)};Ds.parseInline=Vb.parseInline;Ds.Parser=fd;Ds.parser=fd.parse;Ds.Renderer=eP;Ds.TextRenderer=Cz;Ds.Lexer=hd;Ds.lexer=hd.lex;Ds.Tokenizer=J6;Ds.Hooks=S3;Ds.parse=Ds;Ds.options;Ds.setOptions;Ds.use;Ds.walkTokens;Ds.parseInline;fd.parse;hd.lex;Ple.addHook("afterSanitizeAttributes",t=>{"target"in t&&(t.setAttribute("target","_blank"),t.setAttribute("rel","noopener noreferrer"))});function JD(t){let e=Ds(t,{async:!1,gfm:!0});return Ple.sanitize(e)}class hLe{element;constructor(e,n){this.element=e,this.update(n)}update(e){this.element.innerHTML='<div class="markdown-content">'+JD(e.value?.toString()??"(null)")+"</div>"}}function jle(t,e){if(t==null)return[];if(typeof t=="string"&&t.length>0)e.push({type:"text",text:t});else if(t instanceof Array)for(let n of t)jle(n,e);else typeof t=="object"&&(t.text!=null&&typeof t.text=="string"&&t.text.length>0&&e.push({type:"text",text:t.text}),t.image!=null&&typeof t.image=="string"&&t.image.length>0&&e.push({type:"image",imageUrl:t.image}),t.image_url!=null&&typeof t.image_url=="string"&&t.image_url.length>0&&e.push({type:"image",imageUrl:t.image_url}))}function fLe(t){if(t==null||typeof t!="object")return;let e=t.role?.toString()??"(null)",n=[],r={...t};delete r.role;for(let i of["content","contents"]){let s=t[i];s!=null&&(jle(s,n),delete r[i])}for(let i in r)r[i]==null&&delete r[i];return{role:e,content:n,remaining:r}}class dLe{element;constructor(e,n){this.element=e,this.update(n)}update(e){let n=document.createElement("div");if(e.value==null)n.innerText="(null)";else if(typeof e.value=="string")n.innerText=e.value;else if(e.value instanceof Array)for(let r of e.value){let i=fLe(r);i!=null&&n.appendChild(YS("div",{class:"mb-1 flex flex-col gap-1",children:[YS("div",{class:"text-xs font-bold border-b text-gray-400 dark:text-gray-500 border-gray-400 dark:border-gray-500",innerText:i.role}),...i.content.map(s=>{if(s.type=="text")return YS("div",{class:"prose dark:prose-invert max-w-none",innerHTML:JD(s.text)});if(s.type=="image")return YS("img",{class:"max-w-120 max-h-120 object-contain",attrs:{referrerpolicy:"no-referrer",src:s.imageUrl}})}),Object.keys(i.remaining).length>0?YS("pre",{class:"border rounded-md p-1 bg-gray-100 border-gray-200 dark:bg-gray-800 dark:border-gray-700 text-xs",innerText:yz(i.remaining,2)}):null]}))}this.element.replaceChildren(n)}}function YS(t,e){let n=document.createElement(t);if(e.innerText!=null&&(n.innerText=e.innerText),e.innerHTML!=null&&(n.innerHTML=e.innerHTML),e.class!=null&&(n.className=e.class),e.attrs!=null)for(let[r,i]of Object.entries(e.attrs))n.setAttribute(r,i);return e.children!=null&&n.replaceChildren(...e.children.filter(r=>r!=null)),n}class pLe{element;constructor(e,n){this.element=e,this.update(n)}update(e){if(e.value!=null){let n=document.createElement("a");n.href=e.value,n.innerText=e.value,n.className="underline",n.target="_blank",n.rel="noopener noreferrer",this.element.replaceChildren(n)}else this.element.innerText="(null)"}}let Ule={markdown:hLe,image:s9e,url:pLe,json:o9e,messages:dLe},mLe=[{renderer:"markdown",label:"Markdown"},{renderer:"image",label:"Image"},{renderer:"url",label:"Link"},{renderer:"json",label:"JSON"},{renderer:"messages",label:"Messages"}];function jX(t){if(t!=null)return typeof t=="string"?Ule[t]:t}function gLe(t){return typeof t=="string"&&(t.startsWith("http://")||t.startsWith("https://"))}function yLe(t){return t==null?!1:!!(typeof t=="string"&&t.startsWith("data:image/")||t.bytes&&t.bytes instanceof Uint8Array)}function Az(t){if(t==null)return"(null)";if(typeof t=="string")return t.toString();if(typeof t=="number")return t.toLocaleString();if(Array.isArray(t))return"["+t.map(e=>Az(e)).join(", ")+"]";try{return yz(t)}catch{return t.toString()}}var vLe=gt('<a class="underline" target="_blank" rel="noopener noreferrer"> </a>'),bLe=gt('<img alt="" referrerpolicy="no-referrer" class="max-w-24 max-h-24"/>'),_Le=gt("<div></div>");function eL(t,e){Ln(e,!0);let n=jn(e,"value",3,""),r=jn(e,"rendererOptions",19,()=>({})),i=Fe(()=>e.renderer!=null?Ule[e.renderer]??null:null);function s(f,p){let g=new p.class(f,{value:p.value,...p.options});return{update(b){g.update?.({value:b.value,...b.options})},destroy(){g.destroy?.()}}}var o=ar(),a=pn(o);{var l=f=>{var p=ar(),g=pn(p);{var b=k=>{var T=vLe(),I=je(T,!0);Be(T),on(()=>{St(T,"href",n()),Pr(I,n())}),Re(k,T)},x=k=>{var T=ar(),I=pn(T);{var M=j=>{var Q=bLe();on(Z=>St(Q,"src",Z),[()=>kle(n())]),Re(j,Q)},B=j=>{var Q=yb();on(Z=>Pr(Q,Z),[()=>Az(n())]),Re(j,Q)};Pt(I,j=>{yLe(n())?j(M):j(B,!1)},!0)}Re(k,T)};Pt(g,k=>{gLe(n())?k(b):k(x,!1)})}Re(f,p)},h=f=>{var p=ar(),g=pn(p);lT(g,()=>F(i),b=>{var x=_Le();Do(x,(k,T)=>s?.(k,T),()=>({class:F(i),value:n(),options:r()??{}})),Re(b,x)}),Re(f,p)};Pt(a,f=>{F(i)==null?f(l):f(h,!1)})}Re(t,o),$n()}var xLe=gt("<div><!></div>");function qb(t,e){let n=jn(e,"defaultWidth",3,null),r=jn(e,"defaultHeight",3,null),i=jn(e,"scrollX",3,!1),s=jn(e,"scrollY",3,!1),o=Fe(()=>e.width!=null?e.width:i()?void 0:n()),a=Fe(()=>e.height!=null?e.height:s()?void 0:r());var l=xLe();let h;var f=je(l);vf(f,()=>e.children),Be(l),on(()=>{Hi(l,1,`p-2 ${e.class??""??""}`),h=lr(l,"",h,{width:F(o)!=null?`${F(o)}px`:void 0,height:F(a)!=null?`${F(a)}px`:void 0,"overflow-x":i()&&e.width!=null?"auto":void 0,"overflow-y":s()&&e.height!=null?"auto":void 0})}),Re(t,l)}function wLe(t,e){Ln(e,!0);const n=()=>qo(s,"$columnStyles",r),[r,i]=Cf();let{columnStyles:s}=e.context,o=hn(void 0);Oo(()=>e.context.highlight.subscribe(async l=>{if(l==null)return;let h=await e.context.coordinator.query(Vn.from(e.context.table).select({value:e.spec.field}).where(ah(It(e.context.id,e.context.table),kn(l))));ct(o,h.get(0)?.value??void 0,!0)}));let a=Fe(()=>n()[e.spec.field]?.renderer);qb(t,{get width(){return e.width},get height(){return e.height},scrollY:!0,children:(l,h)=>{var f=ar(),p=pn(f);{var g=x=>{eL(x,{get value(){return F(o)},get renderer(){return F(a)}})},b=x=>{var k=yb("(null)");Re(x,k)};Pt(p,x=>{F(o)!=null?x(g):x(b,!1)})}Re(l,f)},$$slots:{default:!0}}),$n(),i()}var Pg={slate:{300:"oklch(86.9% 0.022 252.894)",400:"oklch(70.4% 0.04 256.788)",500:"oklch(55.4% 0.046 257.417)",700:"oklch(37.2% 0.044 257.287)"},gray:{500:"oklch(55.1% 0.027 264.364)"}};function UX(t){return t===void 0?"undefined":JSON.stringify(t)}function OLe(t){if(t!=="undefined")return JSON.parse(t)}var SLe=gt("<option disabled selected> </option>"),kLe=gt("<hr/>"),CLe=gt("<option> </option>"),ALe=gt("<select><!><!></select>");function tL(t,e){Ln(e,!0);let n=jn(e,"disabled",3,!1),r=jn(e,"placeholder",3,null),i=jn(e,"options",19,()=>[]),s=jn(e,"onChange",3,void 0),o,a=Fe(()=>i().filter(b=>b!=="---"&&b.value===void 0)[0]);var l=ALe();l.__change=()=>{o&&s()&&s()(OLe(o.value))};var h=je(l);{var f=b=>{var x=SLe(),k=je(x,!0);Be(x),x.value=x.__value="undefined",on(()=>Pr(k,r())),Re(b,x)};Pt(h,b=>{r()!=null&&!F(a)&&b(f)})}var p=lt(h);Wr(p,17,i,Wi,(b,x)=>{var k=ar(),T=pn(k);{var I=B=>{var j=kLe();Re(B,j)},M=B=>{var j=CLe(),Q=je(j,!0);Be(j);var Z={};on(q=>{Pr(Q,F(x).label),Z!==(Z=q)&&(j.value=(j.__value=q)??"")},[()=>UX(F(x).value)]),Re(B,j)};Pt(T,B=>{F(x)==="---"?B(I):B(M,!1)})}Re(b,k)}),Be(l),zu(l,b=>o=b,()=>o);var g;_H(l),on(b=>{Hi(l,1,_C(e.class)),lr(l,e.style),l.disabled=n(),g!==(g=b)&&(l.value=(l.__value=b)??"",uT(l,b))},[()=>UX(e.value)]),Re(t,l),$n()}Js(["change"]);function tP(t,e){Ln(e,!0);let n=Qs(e,["$$slots","$$events","$$legacy"]);const r="data:image/svg+xml;base64,"+btoa(`<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 10 20">
      <path d="M 2,8 L 5,12 L 8,8" style="stroke:${Pg.gray[500]};stroke-opacity:0.7;stroke-width:1.5;fill:none;stroke-linecap:round;stroke-linejoin:round" />
    </svg>`);tL(t,Ib(()=>n,{class:"form-select select-none text-center pl-[4px] pr-[16px] py-0 my-0 border-0 rounded text-sm! text-slate-500 bg-slate-100 dark:text-slate-400 dark:bg-slate-900",get style(){return`background-image:url(${r});background-position:right center`}})),$n()}var ELe=gt('<div class="absolute left-0 top-0 bottom-0 rounded-sm"></div>'),TLe=gt('<div class="absolute top-0 bottom-0 bg-white dark:bg-black w-[1.5px]"></div>'),PLe=gt('<div class="flex-1 h-4 relative overflow-hidden"><!> <!></div>'),DLe=gt('<div class="flex-1"></div>'),ILe=gt('<!> <div class="flex-none"><span> </span></div>',1);function MLe(t,e){Ln(e,!0);var n=ILe(),r=pn(n);{var i=f=>{var p=PLe(),g=je(p);Wr(g,17,()=>e.bars,Wi,(k,T)=>{const I=Fe(()=>Math.max(F(T).value/e.maxValue*e.width,F(T).value>0?.25:0));var M=ELe();let B;on(j=>B=lr(M,"",B,j),[()=>({background:F(T).color,width:`${Math.min(F(I),e.width)}px`})]),Re(k,M)});var b=lt(g,2);{var x=k=>{var T=ar(),I=pn(T);Wr(I,16,()=>({length:3}),Wi,(M,B,j)=>{var Q=TLe();let Z;on(()=>Z=lr(Q,"",Z,{left:`${e.width-j*3-4}px`})),Re(M,Q)}),Re(k,T)};Pt(b,k=>{e.bars.every(T=>T.value<=e.maxValue)||k(x)})}Be(p),Re(f,p)},s=f=>{var p=DLe();Re(f,p)};Pt(r,f=>{e.width>10?f(i):f(s,!1)})}var o=lt(r,2),a=je(o);let l;var h=je(a,!0);Be(a),Be(o),on(()=>{l=Hi(a,1,"text-slate-400 dark:text-slate-500",null,l,{"!text-gray-200":!e.selected,"dark:!text-gray-600":!e.selected}),St(a,"title",e.title),Pr(h,e.label)}),Re(t,n),$n()}function Vle(){return!(navigator.gpu==null||navigator.gpu.requestAdapter==null||navigator.gpu.wgslLanguageFeatures==null||!navigator.gpu.wgslLanguageFeatures.has("unrestricted_pointer_parameters"))}function RLe(t){return t==0&&(t=4),t%4!=0&&(t+=4-t%4),t}function e0(t,e,n,r){return(t.buffer==null||t.byteSize!=n||t.usage!=r)&&(t.buffer!=null&&t.buffer.destroy(),t.buffer=e.createBuffer({size:RLe(n),usage:r}),t.byteSize=n,t.destroy=()=>{t.buffer?.destroy()}),t.buffer}function UR(t,e,n,r){if(t.buffer!==n||t.data!==r){if(r!=null)if(r.byteLength%4!=0){let i=r.byteLength-r.byteLength%4;if(e.queue.writeBuffer(n,0,r,0,i),r instanceof Uint8Array){let s=new Uint8Array(4);for(let o=0;o<4;o++)i+o<r.length&&(s[o]=r[i+o]);e.queue.writeBuffer(n,i,s)}}else e.queue.writeBuffer(n,0,r,0);else e.queue.writeBuffer(n,0,new ArrayBuffer(n.size));t.buffer=n,t.data=r}return n}function VX(t,e,n,r,i,s){return(t.texture==null||t.width!=n||t.height!=r||t.format!=i||t.usage!=s)&&(t.texture!=null&&t.texture.destroy(),t.texture=e.createTexture({size:[n,r],format:i,usage:s}),t.destroy=()=>{t.texture?.destroy()}),t.texture}const lu=2,eI=4,tI=8,O0=16,S0=32,d_=64,nI=128,Gl=1024,Tc=2048,k0=4096,yh=8192,t0=16384,Ez=32768,w2=65536,qX=1<<17,qle=1<<18,hO=1<<19,Zle=1<<20,gf=256,nP=512,rP=32768,nL=1<<21,Tz=1<<22,Gy=1<<23,xb=Symbol("$state"),Xle=Symbol("legacy props"),FLe=Symbol(""),rw=new class extends Error{name="StaleReactionError";message="The reaction that called `getAbortSignal()` was re-run or destroyed"},Pz=3,fO=8,LLe=!1;var Wle=Array.isArray,$Le=Array.prototype.indexOf,Dz=Array.from,Gle=Object.defineProperty,Dw=Object.getOwnPropertyDescriptor,Yle=Object.getOwnPropertyDescriptors,BLe=Object.prototype,NLe=Array.prototype,Iz=Object.getPrototypeOf,ZX=Object.isExtensible;function zLe(t){for(var e=0;e<t.length;e++)t[e]()}function Hle(){var t,e,n=new Promise((r,i)=>{t=r,e=i});return{promise:n,resolve:t,reject:e}}function Kle(t){return t===this.v}function Jle(t,e){return t!=t?e==e:t!==e||t!==null&&typeof t=="object"||typeof t=="function"}function eue(t){return!Jle(t,this.v)}function tue(t){throw new Error("https://svelte.dev/e/lifecycle_outside_component")}function QLe(){throw new Error("https://svelte.dev/e/async_derived_orphan")}function jLe(t){throw new Error("https://svelte.dev/e/effect_in_teardown")}function ULe(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function VLe(t){throw new Error("https://svelte.dev/e/effect_orphan")}function qLe(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function ZLe(){throw new Error("https://svelte.dev/e/hydration_failed")}function XLe(t){throw new Error("https://svelte.dev/e/props_invalid_value")}function WLe(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function GLe(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function YLe(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}function HLe(){throw new Error("https://svelte.dev/e/svelte_boundary_reset_onerror")}let KLe=!1;const Mz=1,Rz=2,nue=4,JLe=8,e$e=16,t$e=1,n$e=4,r$e=8,i$e=16,s$e=1,o$e=2,rue="[",rI="[!",Fz="]",O2={},Vl=Symbol(),a$e="http://www.w3.org/1999/xhtml";let Pc=null;function S2(t){Pc=t}function p_(t,e=!1,n){Pc={p:Pc,i:!1,c:null,e:null,s:t,x:null,l:null}}function m_(t){var e=Pc,n=e.e;if(n!==null){e.e=null;for(var r of n)Pue(r)}return e.i=!0,Pc=e.p,{}}function iue(){return!0}let lb=[];function sue(){var t=lb;lb=[],zLe(t)}function dO(t){if(lb.length===0&&!Y3){var e=lb;queueMicrotask(()=>{e===lb&&sue()})}lb.push(t)}function l$e(){for(;lb.length>0;)sue()}function iI(t){console.warn("https://svelte.dev/e/hydration_mismatch")}function u$e(){console.warn("https://svelte.dev/e/svelte_boundary_reset_noop")}let ns=!1;function Ug(t){ns=t}let Gi;function Oc(t){if(t===null)throw iI(),O2;return Gi=t}function eA(){return Oc(Tm(Gi))}function Oa(t){if(ns){if(Tm(Gi)!==null)throw iI(),O2;Gi=t}}function oue(t=1){if(ns){for(var e=t,n=Gi;e--;)n=Tm(n);Gi=n}}function iP(t=!0){for(var e=0,n=Gi;;){if(n.nodeType===fO){var r=n.data;if(r===Fz){if(e===0)return n;e-=1}else(r===rue||r===rI)&&(e+=1)}var i=Tm(n);t&&n.remove(),n=i}}function aue(t){if(!t||t.nodeType!==fO)throw iI(),O2;return t.data}function ub(t){if(typeof t!="object"||t===null||xb in t)return t;const e=Iz(t);if(e!==BLe&&e!==NLe)return t;var n=new Map,r=Wle(t),i=Bs(0),s=wb,o=a=>{if(wb===s)return a();var l=wi,h=wb;bc(null),HX(s);var f=a();return bc(l),HX(h),f};return r&&n.set("length",Bs(t.length)),new Proxy(t,{defineProperty(a,l,h){(!("value"in h)||h.configurable===!1||h.enumerable===!1||h.writable===!1)&&WLe();var f=n.get(l);return f===void 0?f=o(()=>{var p=Bs(h.value);return n.set(l,p),p}):hr(f,h.value,!0),!0},deleteProperty(a,l){var h=n.get(l);if(h===void 0){if(l in a){const f=o(()=>Bs(Vl));n.set(l,f),H3(i)}}else hr(h,Vl),H3(i);return!0},get(a,l,h){if(l===xb)return t;var f=n.get(l),p=l in a;if(f===void 0&&(!p||Dw(a,l)?.writable)&&(f=o(()=>{var b=ub(p?a[l]:Vl),x=Bs(b);return x}),n.set(l,f)),f!==void 0){var g=Ce(f);return g===Vl?void 0:g}return Reflect.get(a,l,h)},getOwnPropertyDescriptor(a,l){var h=Reflect.getOwnPropertyDescriptor(a,l);if(h&&"value"in h){var f=n.get(l);f&&(h.value=Ce(f))}else if(h===void 0){var p=n.get(l),g=p?.v;if(p!==void 0&&g!==Vl)return{enumerable:!0,configurable:!0,value:g,writable:!0}}return h},has(a,l){if(l===xb)return!0;var h=n.get(l),f=h!==void 0&&h.v!==Vl||Reflect.has(a,l);if(h!==void 0||bi!==null&&(!f||Dw(a,l)?.writable)){h===void 0&&(h=o(()=>{var g=f?ub(a[l]):Vl,b=Bs(g);return b}),n.set(l,h));var p=Ce(h);if(p===Vl)return!1}return f},set(a,l,h,f){var p=n.get(l),g=l in a;if(r&&l==="length")for(var b=h;b<p.v;b+=1){var x=n.get(b+"");x!==void 0?hr(x,Vl):b in a&&(x=o(()=>Bs(Vl)),n.set(b+"",x))}if(p===void 0)(!g||Dw(a,l)?.writable)&&(p=o(()=>Bs(void 0)),hr(p,ub(h)),n.set(l,p));else{g=p.v!==Vl;var k=o(()=>ub(h));hr(p,k)}var T=Reflect.getOwnPropertyDescriptor(a,l);if(T?.set&&T.set.call(f,h),!g){if(r&&typeof l=="string"){var I=n.get("length"),M=Number(l);Number.isInteger(M)&&M>=I.v&&hr(I,M+1)}H3(i)}return!0},ownKeys(a){Ce(i);var l=Reflect.ownKeys(a).filter(p=>{var g=n.get(p);return g===void 0||g.v!==Vl});for(var[h,f]of n)f.v!==Vl&&!(h in a)&&l.push(h);return l},setPrototypeOf(){GLe()}})}var XX,lue,uue,cue;function rL(){if(XX===void 0){XX=window,lue=/Firefox/.test(navigator.userAgent);var t=Element.prototype,e=Node.prototype,n=Text.prototype;uue=Dw(e,"firstChild").get,cue=Dw(e,"nextSibling").get,ZX(t)&&(t.__click=void 0,t.__className=void 0,t.__attributes=null,t.__style=void 0,t.__e=void 0),ZX(n)&&(n.__t=void 0)}}function pm(t=""){return document.createTextNode(t)}function h0(t){return uue.call(t)}function Tm(t){return cue.call(t)}function tl(t,e){if(!ns)return h0(t);var n=h0(Gi);if(n===null)n=Gi.appendChild(pm());else if(e&&n.nodeType!==Pz){var r=pm();return n?.before(r),Oc(r),r}return Oc(n),n}function qx(t,e=!1){if(!ns){var n=h0(t);return n instanceof Comment&&n.data===""?Tm(n):n}if(e&&Gi?.nodeType!==Pz){var r=pm();return Gi?.before(r),Oc(r),r}return Gi}function yo(t,e=1,n=!1){let r=ns?Gi:t;for(var i;e--;)i=r,r=Tm(r);if(!ns)return r;if(n&&r?.nodeType!==Pz){var s=pm();return r===null?i?.after(s):r.before(s),Oc(s),s}return Oc(r),r}function hue(t){t.textContent=""}function c$e(){return!1}function fue(t){var e=bi;if(e===null)return wi.f|=Gy,t;if((e.f&Ez)===0){if((e.f&nI)===0)throw t;e.b.error(t)}else k2(t,e)}function k2(t,e){for(;e!==null;){if((e.f&nI)!==0)try{e.b.error(t);return}catch(n){t=n}e=e.parent}throw t}const F4=new Set;let Ra=null,gd=null,zp=[],sI=null,iL=!1,Y3=!1,cb=class sL{committed=!1;current=new Map;previous=new Map;#e=new Set;#t=new Set;#n=0;#r=0;#l=null;#a=[];#i=[];skipped_effects=new Set;is_fork=!1;process(e){zp=[],this.apply();var n={parent:null,effect:null,effects:[],render_effects:[],block_effects:[]};for(const r of e)this.#s(r,n);this.is_fork||this.#u(),this.#r>0||this.is_fork?(this.#o(n.effects),this.#o(n.render_effects),this.#o(n.block_effects)):(Ra=null,WX(n.render_effects),WX(n.effects),this.#l?.resolve()),gd=null}#s(e,n){e.f^=Gl;for(var r=e.first;r!==null;){var i=r.f,s=(i&(S0|d_))!==0,o=s&&(i&Gl)!==0,a=o||(i&yh)!==0||this.skipped_effects.has(r);if((r.f&nI)!==0&&r.b?.is_pending()&&(n={parent:n,effect:r,effects:[],render_effects:[],block_effects:[]}),!a&&r.fn!==null){s?r.f^=Gl:(i&eI)!==0?n.effects.push(r):tA(r)&&((r.f&O0)!==0&&n.block_effects.push(r),iC(r));var l=r.first;if(l!==null){r=l;continue}}var h=r.parent;for(r=r.next;r===null&&h!==null;)h===n.effect&&(this.#o(n.effects),this.#o(n.render_effects),this.#o(n.block_effects),n=n.parent),r=h.next,h=h.parent}}#o(e){for(const n of e)((n.f&Tc)!==0?this.#a:this.#i).push(n),nu(n,Gl)}capture(e,n){this.previous.has(e)||this.previous.set(e,n),(e.f&Gy)===0&&(this.current.set(e,e.v),gd?.set(e,e.v))}activate(){Ra=this,this.apply()}deactivate(){Ra=null,gd=null}flush(){if(this.activate(),zp.length>0){if(due(),Ra!==null&&Ra!==this)return}else this.#n===0&&this.process([]);this.deactivate()}discard(){for(const e of this.#t)e(this);this.#t.clear()}#u(){if(this.#r===0){for(const e of this.#e)e();this.#e.clear()}this.#n===0&&this.#c()}#c(){if(F4.size>1){this.previous.clear();var e=gd,n=!0,r={parent:null,effect:null,effects:[],render_effects:[],block_effects:[]};for(const i of F4){if(i===this){n=!1;continue}const s=[];for(const[a,l]of this.current){if(i.current.has(a))if(n&&l!==i.current.get(a))i.current.set(a,l);else continue;s.push(a)}if(s.length===0)continue;const o=[...i.current.keys()].filter(a=>!this.current.has(a));if(o.length>0){const a=new Set,l=new Map;for(const h of s)pue(h,o,a,l);if(zp.length>0){Ra=i,i.apply();for(const h of zp)i.#s(h,r);zp=[],i.deactivate()}}}Ra=null,gd=e}this.committed=!0,F4.delete(this)}increment(e){this.#n+=1,e&&(this.#r+=1)}decrement(e){this.#n-=1,e&&(this.#r-=1),this.revive()}revive(){for(const e of this.#a)nu(e,Tc),Zb(e);for(const e of this.#i)nu(e,k0),Zb(e);this.#a=[],this.#i=[],this.flush()}oncommit(e){this.#e.add(e)}ondiscard(e){this.#t.add(e)}settled(){return(this.#l??=Hle()).promise}static ensure(){if(Ra===null){const e=Ra=new sL;F4.add(Ra),Y3||sL.enqueue(()=>{Ra===e&&e.flush()})}return Ra}static enqueue(e){dO(e)}apply(){}};function h$e(t){var e=Y3;Y3=!0;try{for(var n;;){if(l$e(),zp.length===0&&(Ra?.flush(),zp.length===0))return sI=null,n;due()}}finally{Y3=e}}function due(){var t=Iw;iL=!0;try{var e=0;for(GX(!0);zp.length>0;){var n=cb.ensure();if(e++>1e3){var r,i;f$e()}n.process(zp),Yy.clear()}}finally{iL=!1,GX(t),sI=null}}function f$e(){try{qLe()}catch(t){k2(t,sI)}}let Ag=null;function WX(t){var e=t.length;if(e!==0){for(var n=0;n<e;){var r=t[n++];if((r.f&(t0|yh))===0&&tA(r)&&(Ag=new Set,iC(r),r.deps===null&&r.first===null&&r.nodes_start===null&&(r.teardown===null&&r.ac===null?Rue(r):r.fn=null),Ag?.size>0)){Yy.clear();for(const i of Ag){if((i.f&(t0|yh))!==0)continue;const s=[i];let o=i.parent;for(;o!==null;)Ag.has(o)&&(Ag.delete(o),s.push(o)),o=o.parent;for(let a=s.length-1;a>=0;a--){const l=s[a];(l.f&(t0|yh))===0&&iC(l)}}Ag.clear()}}Ag=null}}function pue(t,e,n,r){if(!n.has(t)&&(n.add(t),t.reactions!==null))for(const i of t.reactions){const s=i.f;(s&lu)!==0?pue(i,e,n,r):(s&(Tz|O0))!==0&&(s&Tc)===0&&mue(i,e,r)&&(nu(i,Tc),Zb(i))}}function mue(t,e,n){const r=n.get(t);if(r!==void 0)return r;if(t.deps!==null)for(const i of t.deps){if(e.includes(i))return!0;if((i.f&lu)!==0&&mue(i,e,n))return n.set(i,!0),!0}return n.set(t,!1),!1}function Zb(t){for(var e=sI=t;e.parent!==null;){e=e.parent;var n=e.f;if(iL&&e===bi&&(n&O0)!==0&&(n&qle)===0)return;if((n&(d_|S0))!==0){if((n&Gl)===0)return;e.f^=Gl}}zp.push(e)}function d$e(t){let e=0,n=Xb(0),r;return()=>{A$e()&&(Ce(n),Bz(()=>(e===0&&(r=y_(()=>t(()=>H3(n)))),e+=1,()=>{dO(()=>{e-=1,e===0&&(r?.(),r=void 0,H3(n))})})))}}var p$e=w2|hO|nI;function m$e(t,e,n){new g$e(t,e,n)}class g$e{parent;#e=!1;#t;#n=ns?Gi:null;#r;#l;#a;#i=null;#s=null;#o=null;#u=null;#c=null;#d=0;#h=0;#p=!1;#f=null;#y=d$e(()=>(this.#f=Xb(this.#d),()=>{this.#f=null}));constructor(e,n,r){this.#t=e,this.#r=n,this.#l=r,this.parent=bi.b,this.#e=!!this.#r.pending,this.#a=aI(()=>{if(bi.b=this,ns){const s=this.#n;eA(),s.nodeType===fO&&s.data===rI?this.#b():this.#v()}else{var i=this.#_();try{this.#i=ud(()=>r(i))}catch(s){this.error(s)}this.#h>0?this.#g():this.#e=!1}return()=>{this.#c?.remove()}},p$e),ns&&(this.#t=Gi)}#v(){try{this.#i=ud(()=>this.#l(this.#t))}catch(e){this.error(e)}this.#e=!1}#b(){const e=this.#r.pending;e&&(this.#s=ud(()=>e(this.#t)),cb.enqueue(()=>{var n=this.#_();this.#i=this.#m(()=>(cb.ensure(),ud(()=>this.#l(n)))),this.#h>0?this.#g():(Mw(this.#s,()=>{this.#s=null}),this.#e=!1)}))}#_(){var e=this.#t;return this.#e&&(this.#c=pm(),this.#t.before(this.#c),e=this.#c),e}is_pending(){return this.#e||!!this.parent&&this.parent.is_pending()}has_pending_snippet(){return!!this.#r.pending}#m(e){var n=bi,r=wi,i=Pc;mm(this.#a),bc(this.#a),S2(this.#a.ctx);try{return e()}catch(s){return fue(s),null}finally{mm(n),bc(r),S2(i)}}#g(){const e=this.#r.pending;this.#i!==null&&(this.#u=document.createDocumentFragment(),this.#u.append(this.#c),$ue(this.#i,this.#u)),this.#s===null&&(this.#s=ud(()=>e(this.#t)))}#x(e){if(!this.has_pending_snippet()){this.parent&&this.parent.#x(e);return}this.#h+=e,this.#h===0&&(this.#e=!1,this.#s&&Mw(this.#s,()=>{this.#s=null}),this.#u&&(this.#t.before(this.#u),this.#u=null))}update_pending_count(e){this.#x(e),this.#d+=e,this.#f&&C2(this.#f,this.#d)}get_effect_pending(){return this.#y(),Ce(this.#f)}error(e){var n=this.#r.onerror;let r=this.#r.failed;if(this.#p||!n&&!r)throw e;this.#i&&($u(this.#i),this.#i=null),this.#s&&($u(this.#s),this.#s=null),this.#o&&($u(this.#o),this.#o=null),ns&&(Oc(this.#n),oue(),Oc(iP()));var i=!1,s=!1;const o=()=>{if(i){u$e();return}i=!0,s&&HLe(),cb.ensure(),this.#d=0,this.#o!==null&&Mw(this.#o,()=>{this.#o=null}),this.#e=this.has_pending_snippet(),this.#i=this.#m(()=>(this.#p=!1,ud(()=>this.#l(this.#t)))),this.#h>0?this.#g():this.#e=!1};var a=wi;try{bc(null),s=!0,n?.(e,o),s=!1}catch(l){k2(l,this.#a&&this.#a.parent)}finally{bc(a)}r&&dO(()=>{this.#o=this.#m(()=>{cb.ensure(),this.#p=!0;try{return ud(()=>{r(this.#t,()=>e,()=>o)})}catch(l){return k2(l,this.#a.parent),null}finally{this.#p=!1}})})}}function y$e(t,e,n,r){const i=oI;if(n.length===0&&t.length===0){r(e.map(i));return}var s=Ra,o=bi,a=v$e();function l(){Promise.all(n.map(h=>b$e(h))).then(h=>{a();try{r([...e.map(i),...h])}catch(f){(o.f&t0)===0&&k2(f,o)}s?.deactivate(),sP()}).catch(h=>{k2(h,o)})}t.length>0?Promise.all(t).then(()=>{a();try{return l()}finally{s?.deactivate(),sP()}}):l()}function v$e(){var t=bi,e=wi,n=Pc,r=Ra;return function(i=!0){mm(t),bc(e),S2(n),i&&r?.activate()}}function sP(){mm(null),bc(null),S2(null)}function oI(t){var e=lu|Tc,n=wi!==null&&(wi.f&lu)!==0?wi:null;return bi===null||n!==null&&(n.f&gf)!==0?e|=gf:bi.f|=hO,{ctx:Pc,deps:null,effects:null,equals:Kle,f:e,fn:t,reactions:null,rv:0,v:Vl,wv:0,parent:n??bi,ac:null}}function b$e(t,e){let n=bi;n===null&&QLe();var r=n.b,i=void 0,s=Xb(Vl),o=!wi,a=new Map;return T$e(()=>{var l=Hle();i=l.promise;try{Promise.resolve(t()).then(l.resolve,l.reject).then(()=>{h===Ra&&h.committed&&h.deactivate(),sP()})}catch(g){l.reject(g),sP()}var h=Ra;if(o){var f=!r.is_pending();r.update_pending_count(1),h.increment(f),a.get(h)?.reject(rw),a.delete(h),a.set(h,l)}const p=(g,b=void 0)=>{if(h.activate(),b)b!==rw&&(s.f|=Gy,C2(s,b));else{(s.f&Gy)!==0&&(s.f^=Gy),C2(s,g);for(const[x,k]of a){if(a.delete(x),x===h)break;k.reject(rw)}}o&&(r.update_pending_count(-1),h.decrement(f))};l.promise.then(p,g=>p(null,g||"unknown"))}),Tue(()=>{for(const l of a.values())l.reject(rw)}),new Promise(l=>{function h(f){function p(){f===i?l(s):h(i)}f.then(p,p)}h(i)})}function cr(t){const e=oI(t);return wue(e),e}function gue(t){const e=oI(t);return e.equals=eue,e}function yue(t){var e=t.effects;if(e!==null){t.effects=null;for(var n=0;n<e.length;n+=1)$u(e[n])}}function _$e(t){for(var e=t.parent;e!==null;){if((e.f&lu)===0)return e;e=e.parent}return null}function Lz(t){var e,n=bi;mm(_$e(t));try{t.f&=~rP,yue(t),e=Cue(t)}finally{mm(n)}return e}function vue(t){var e=Lz(t);if(t.equals(e)||(t.v=e,t.wv=Sue()),!g_)if(gd!==null)gd.set(t,t.v);else{var n=(Ry||(t.f&gf)!==0)&&t.deps!==null?k0:Gl;nu(t,n)}}let oL=new Set;const Yy=new Map;let bue=!1;function Xb(t,e){var n={f:0,v:t,reactions:null,equals:Kle,rv:0,wv:0};return n}function Bs(t,e){const n=Xb(t);return wue(n),n}function _ue(t,e=!1,n=!0){const r=Xb(t);return e||(r.equals=eue),r}function hr(t,e,n=!1){wi!==null&&(!yd||(wi.f&qX)!==0)&&iue()&&(wi.f&(lu|O0|Tz|qX))!==0&&!n0?.includes(t)&&YLe();let r=n?ub(e):e;return C2(t,r)}function C2(t,e){if(!t.equals(e)){var n=t.v;g_?Yy.set(t,e):Yy.set(t,n),t.v=e;var r=cb.ensure();r.capture(t,n),(t.f&lu)!==0&&((t.f&Tc)!==0&&Lz(t),nu(t,(t.f&gf)===0?Gl:k0)),t.wv=Sue(),xue(t,Tc),bi!==null&&(bi.f&Gl)!==0&&(bi.f&(S0|d_))===0&&(Hh===null?w$e([t]):Hh.push(t)),!r.is_fork&&oL.size>0&&!bue&&x$e()}return e}function x$e(){bue=!1;const t=Array.from(oL);for(const e of t)(e.f&Gl)!==0&&nu(e,k0),tA(e)&&iC(e);oL.clear()}function H3(t){hr(t,t.v+1)}function xue(t,e){var n=t.reactions;if(n!==null)for(var r=n.length,i=0;i<r;i++){var s=n[i],o=s.f,a=(o&Tc)===0;a&&nu(s,e),(o&lu)!==0?(o&rP)===0&&(s.f|=rP,xue(s,k0)):a&&((o&O0)!==0&&Ag!==null&&Ag.add(s),Zb(s))}}function $z(t){var e=wi,n=bi;bc(null),mm(null);try{return t()}finally{bc(e),mm(n)}}let Iw=!1;function GX(t){Iw=t}let g_=!1;function YX(t){g_=t}let wi=null,yd=!1;function bc(t){wi=t}let bi=null;function mm(t){bi=t}let n0=null;function wue(t){wi!==null&&(n0===null?n0=[t]:n0.push(t))}let ku=null,nh=0,Hh=null;function w$e(t){Hh=t}let Oue=1,rC=0,wb=rC;function HX(t){wb=t}let Ry=!1;function Sue(){return++Oue}function tA(t){var e=t.f;if((e&Tc)!==0)return!0;if((e&k0)!==0){var n=t.deps,r=(e&gf)!==0;if(e&lu&&(t.f&=~rP),n!==null){var i,s,o=(e&nP)!==0,a=r&&bi!==null&&!Ry,l=n.length;if((o||a)&&(bi===null||(bi.f&t0)===0)){var h=t,f=h.parent;for(i=0;i<l;i++)s=n[i],(o||!s?.reactions?.includes(h))&&(s.reactions??=[]).push(h);o&&(h.f^=nP),a&&f!==null&&(f.f&gf)===0&&(h.f^=gf)}for(i=0;i<l;i++)if(s=n[i],tA(s)&&vue(s),s.wv>t.wv)return!0}(!r||bi!==null&&!Ry)&&nu(t,Gl)}return!1}function kue(t,e,n=!0){var r=t.reactions;if(r!==null&&!n0?.includes(t))for(var i=0;i<r.length;i++){var s=r[i];(s.f&lu)!==0?kue(s,e,!1):e===s&&(n?nu(s,Tc):(s.f&Gl)!==0&&nu(s,k0),Zb(s))}}function Cue(t){var e=ku,n=nh,r=Hh,i=wi,s=Ry,o=n0,a=Pc,l=yd,h=wb,f=t.f;ku=null,nh=0,Hh=null,Ry=(f&gf)!==0&&(yd||!Iw||wi===null),wi=(f&(S0|d_))===0?t:null,n0=null,S2(t.ctx),yd=!1,wb=++rC,t.ac!==null&&($z(()=>{t.ac.abort(rw)}),t.ac=null);try{t.f|=nL;var p=t.fn,g=p(),b=t.deps;if(ku!==null){var x;if(oP(t,nh),b!==null&&nh>0)for(b.length=nh+ku.length,x=0;x<ku.length;x++)b[nh+x]=ku[x];else t.deps=b=ku;if(!Ry||(f&lu)!==0&&t.reactions!==null)for(x=nh;x<b.length;x++)(b[x].reactions??=[]).push(t)}else b!==null&&nh<b.length&&(oP(t,nh),b.length=nh);if(iue()&&Hh!==null&&!yd&&b!==null&&(t.f&(lu|k0|Tc))===0)for(x=0;x<Hh.length;x++)kue(Hh[x],t);return i!==null&&i!==t&&(rC++,Hh!==null&&(r===null?r=Hh:r.push(...Hh))),(t.f&Gy)!==0&&(t.f^=Gy),g}catch(k){return fue(k)}finally{t.f^=nL,ku=e,nh=n,Hh=r,wi=i,Ry=s,n0=o,S2(a),yd=l,wb=h}}function O$e(t,e){let n=e.reactions;if(n!==null){var r=$Le.call(n,t);if(r!==-1){var i=n.length-1;i===0?n=e.reactions=null:(n[r]=n[i],n.pop())}}n===null&&(e.f&lu)!==0&&(ku===null||!ku.includes(e))&&(nu(e,k0),(e.f&(gf|nP))===0&&(e.f^=nP),yue(e),oP(e,0))}function oP(t,e){var n=t.deps;if(n!==null)for(var r=e;r<n.length;r++)O$e(t,n[r])}function iC(t){var e=t.f;if((e&t0)===0){nu(t,Gl);var n=bi,r=Iw;bi=t,Iw=!0;try{(e&O0)!==0?P$e(t):Mue(t),Iue(t);var i=Cue(t);t.teardown=typeof i=="function"?i:null,t.wv=Oue;var s;LLe&&KLe&&(t.f&Tc)!==0&&t.deps}finally{Iw=r,bi=n}}}function Ce(t){var e=t.f,n=(e&lu)!==0;if(wi!==null&&!yd){var r=bi!==null&&(bi.f&t0)!==0;if(!r&&!n0?.includes(t)){var i=wi.deps;if((wi.f&nL)!==0)t.rv<rC&&(t.rv=rC,ku===null&&i!==null&&i[nh]===t?nh++:ku===null?ku=[t]:(!Ry||!ku.includes(t))&&ku.push(t));else{(wi.deps??=[]).push(t);var s=t.reactions;s===null?t.reactions=[wi]:s.includes(wi)||s.push(wi)}}}else if(n&&t.deps===null&&t.effects===null){var o=t,a=o.parent;a!==null&&(a.f&gf)===0&&(o.f^=gf)}if(g_){if(Yy.has(t))return Yy.get(t);if(n){o=t;var l=o.v;return((o.f&Gl)===0&&o.reactions!==null||Aue(o))&&(l=Lz(o)),Yy.set(o,l),l}}else if(n){if(o=t,gd?.has(o))return gd.get(o);tA(o)&&vue(o)}if(gd?.has(t))return gd.get(t);if((t.f&Gy)!==0)throw t.v;return t.v}function Aue(t){if(t.v===Vl)return!0;if(t.deps===null)return!1;for(const e of t.deps)if(Yy.has(e)||(e.f&lu)!==0&&Aue(e))return!0;return!1}function y_(t){var e=yd;try{return yd=!0,t()}finally{yd=e}}const S$e=-7169;function nu(t,e){t.f=t.f&S$e|e}function k$e(t){if(!(typeof t!="object"||!t||t instanceof EventTarget)){if(xb in t)aL(t);else if(!Array.isArray(t))for(let e in t){const n=t[e];typeof n=="object"&&n&&xb in n&&aL(n)}}}function aL(t,e=new Set){if(typeof t=="object"&&t!==null&&!(t instanceof EventTarget)&&!e.has(t)){e.add(t),t instanceof Date&&t.getTime();for(let r in t)try{aL(t[r],e)}catch{}const n=Iz(t);if(n!==Object.prototype&&n!==Array.prototype&&n!==Map.prototype&&n!==Set.prototype&&n!==Date.prototype){const r=Yle(n);for(let i in r){const s=r[i].get;if(s)try{s.call(t)}catch{}}}}}function Eue(t){bi===null&&wi===null&&VLe(),wi!==null&&(wi.f&gf)!==0&&bi===null&&ULe(),g_&&jLe()}function C$e(t,e){var n=e.last;n===null?e.last=e.first=t:(n.next=t,t.prev=n,e.last=t)}function Pm(t,e,n,r=!0){var i=bi;i!==null&&(i.f&yh)!==0&&(t|=yh);var s={ctx:Pc,deps:null,nodes_start:null,nodes_end:null,f:t|Tc,first:null,fn:e,last:null,next:null,parent:i,b:i&&i.b,prev:null,teardown:null,transitions:null,wv:0,ac:null};if(n)try{iC(s),s.f|=Ez}catch(l){throw $u(s),l}else e!==null&&Zb(s);if(r){var o=s;if(n&&o.deps===null&&o.teardown===null&&o.nodes_start===null&&o.first===o.last&&(o.f&hO)===0&&(o=o.first,(t&O0)!==0&&(t&w2)!==0&&o!==null&&(o.f|=w2)),o!==null&&(o.parent=i,i!==null&&C$e(o,i),wi!==null&&(wi.f&lu)!==0&&(t&d_)===0)){var a=wi;(a.effects??=[]).push(o)}}return s}function A$e(){return wi!==null&&!yd}function Tue(t){const e=Pm(tI,null,!1);return nu(e,Gl),e.teardown=t,e}function Jh(t){Eue();var e=bi.f,n=!wi&&(e&S0)!==0&&(e&Ez)===0;if(n){var r=Pc;(r.e??=[]).push(t)}else return Pue(t)}function Pue(t){return Pm(eI|Zle,t,!1)}function K3(t){return Eue(),Pm(tI|Zle,t,!0)}function E$e(t){cb.ensure();const e=Pm(d_|hO,t,!0);return(n={})=>new Promise(r=>{n.outro?Mw(e,()=>{$u(e),r(void 0)}):($u(e),r(void 0))})}function Due(t){return Pm(eI,t,!1)}function T$e(t){return Pm(Tz|hO,t,!0)}function Bz(t,e=0){return Pm(tI|e,t,!0)}function fh(t,e=[],n=[],r=[],i=!1){y$e(r,e,n,s=>{Pm(i?eI:tI,()=>t(...s.map(Ce)),!0)})}function aI(t,e=0){var n=Pm(O0|e,t,!0);return n}function ud(t,e=!0){return Pm(S0|hO,t,!0,e)}function Iue(t){var e=t.teardown;if(e!==null){const n=g_,r=wi;YX(!0),bc(null);try{e.call(null)}finally{YX(n),bc(r)}}}function Mue(t,e=!1){var n=t.first;for(t.first=t.last=null;n!==null;){const i=n.ac;i!==null&&$z(()=>{i.abort(rw)});var r=n.next;(n.f&d_)!==0?n.parent=null:$u(n,e),n=r}}function P$e(t){for(var e=t.first;e!==null;){var n=e.next;(e.f&S0)===0&&$u(e),e=n}}function $u(t,e=!0){var n=!1;(e||(t.f&qle)!==0)&&t.nodes_start!==null&&t.nodes_end!==null&&(D$e(t.nodes_start,t.nodes_end),n=!0),Mue(t,e&&!n),oP(t,0),nu(t,t0);var r=t.transitions;if(r!==null)for(const s of r)s.stop();Iue(t);var i=t.parent;i!==null&&i.first!==null&&Rue(t),t.next=t.prev=t.teardown=t.ctx=t.deps=t.fn=t.nodes_start=t.nodes_end=t.ac=null}function D$e(t,e){for(;t!==null;){var n=t===e?null:Tm(t);t.remove(),t=n}}function Rue(t){var e=t.parent,n=t.prev,r=t.next;n!==null&&(n.next=r),r!==null&&(r.prev=n),e!==null&&(e.first===t&&(e.first=r),e.last===t&&(e.last=n))}function Mw(t,e,n=!0){var r=[];Nz(t,r,!0),Fue(r,()=>{n&&$u(t),e&&e()})}function Fue(t,e){var n=t.length;if(n>0){var r=()=>--n||e();for(var i of t)i.out(r)}else e()}function Nz(t,e,n){if((t.f&yh)===0){if(t.f^=yh,t.transitions!==null)for(const o of t.transitions)(o.is_global||n)&&e.push(o);for(var r=t.first;r!==null;){var i=r.next,s=(r.f&w2)!==0||(r.f&S0)!==0&&(t.f&O0)!==0;Nz(r,e,s?n:!1),r=i}}}function zz(t){Lue(t,!0)}function Lue(t,e){if((t.f&yh)!==0){t.f^=yh,(t.f&Gl)===0&&(nu(t,Tc),Zb(t));for(var n=t.first;n!==null;){var r=n.next,i=(n.f&w2)!==0||(n.f&S0)!==0;Lue(n,i?e:!1),n=r}if(t.transitions!==null)for(const s of t.transitions)(s.is_global||e)&&s.in()}}function $ue(t,e){for(var n=t.nodes_start,r=t.nodes_end;n!==null;){var i=n===r?null:Tm(n);e.append(n),n=i}}const Bue=new Set,lL=new Set;function I$e(t,e,n,r={}){function i(s){if(r.capture||k3.call(e,s),!s.cancelBubble)return $z(()=>n?.call(this,s))}return dO(()=>{e.addEventListener(t,i,r)}),i}function M$e(t,e,n,r,i){var s={capture:r,passive:i},o=I$e(t,e,n,s);(e===document.body||e===window||e===document||e instanceof HTMLMediaElement)&&Tue(()=>{e.removeEventListener(t,o,s)})}function R$e(t){for(var e=0;e<t.length;e++)Bue.add(t[e]);for(var n of lL)n(t)}let KX=null;function k3(t){var e=this,n=e.ownerDocument,r=t.type,i=t.composedPath?.()||[],s=i[0]||t.target;KX=t;var o=0,a=KX===t&&t.__root;if(a){var l=i.indexOf(a);if(l!==-1&&(e===document||e===window)){t.__root=e;return}var h=i.indexOf(e);if(h===-1)return;l<=h&&(o=l)}if(s=i[o]||t.target,s!==e){Gle(t,"currentTarget",{configurable:!0,get(){return s||n}});var f=wi,p=bi;bc(null),mm(null);try{for(var g,b=[];s!==null;){var x=s.assignedSlot||s.parentNode||s.host||null;try{var k=s["__"+r];k!=null&&(!s.disabled||t.target===s)&&k.call(s,t)}catch(T){g?b.push(T):g=T}if(t.cancelBubble||x===e||x===null)break;s=x}if(g){for(let T of b)queueMicrotask(()=>{throw T});throw g}}finally{t.__root=e,delete t.currentTarget,bc(f),mm(p)}}}function Nue(t){var e=document.createElement("template");return e.innerHTML=t.replaceAll("<!>","<!---->"),e.content}function Hy(t,e){var n=bi;n.nodes_start===null&&(n.nodes_start=t,n.nodes_end=e)}function E1(t,e){var n=(e&s$e)!==0,r=(e&o$e)!==0,i,s=!t.startsWith("<!>");return()=>{if(ns)return Hy(Gi,null),Gi;i===void 0&&(i=Nue(s?t:"<!>"+t),n||(i=h0(i)));var o=r||lue?document.importNode(i,!0):i.cloneNode(!0);if(n){var a=h0(o),l=o.lastChild;Hy(a,l)}else Hy(o,o);return o}}function F$e(t,e,n="svg"){var r=!t.startsWith("<!>"),i=`<${n}>${r?t:"<!>"+t}</${n}>`,s;return()=>{if(ns)return Hy(Gi,null),Gi;if(!s){var o=Nue(i),a=h0(o);s=h0(a)}var l=s.cloneNode(!0);return Hy(l,l),l}}function C0(t,e){return F$e(t,e,"svg")}function HS(){if(ns)return Hy(Gi,null),Gi;var t=document.createDocumentFragment(),e=document.createComment(""),n=pm();return t.append(e,n),Hy(e,n),t}function Vo(t,e){if(ns){bi.nodes_end=Gi,eA();return}t!==null&&t.before(e)}const L$e=["touchstart","touchmove"];function $$e(t){return L$e.includes(t)}function J3(t,e){var n=e==null?"":typeof e=="object"?e+"":e;n!==(t.__t??=t.nodeValue)&&(t.__t=n,t.nodeValue=n+"")}function zue(t,e){return Que(t,e)}function B$e(t,e){rL(),e.intro=e.intro??!1;const n=e.target,r=ns,i=Gi;try{for(var s=h0(n);s&&(s.nodeType!==fO||s.data!==rue);)s=Tm(s);if(!s)throw O2;Ug(!0),Oc(s);const o=Que(t,{...e,anchor:s});return Ug(!1),o}catch(o){if(o instanceof Error&&o.message.split(`
`).some(a=>a.startsWith("https://svelte.dev/e/")))throw o;return o!==O2&&console.warn("Failed to hydrate: ",o),e.recover===!1&&ZLe(),rL(),hue(n),Ug(!1),zue(t,e)}finally{Ug(r),Oc(i)}}const Tx=new Map;function Que(t,{target:e,anchor:n,props:r={},events:i,context:s,intro:o=!0}){rL();var a=new Set,l=p=>{for(var g=0;g<p.length;g++){var b=p[g];if(!a.has(b)){a.add(b);var x=$$e(b);e.addEventListener(b,k3,{passive:x});var k=Tx.get(b);k===void 0?(document.addEventListener(b,k3,{passive:x}),Tx.set(b,1)):Tx.set(b,k+1)}}};l(Dz(Bue)),lL.add(l);var h=void 0,f=E$e(()=>{var p=n??e.appendChild(pm());return m$e(p,{pending:()=>{}},g=>{if(s){p_({});var b=Pc;b.c=s}if(i&&(r.$$events=i),ns&&Hy(g,null),h=t(g,r)||{},ns&&(bi.nodes_end=Gi,Gi===null||Gi.nodeType!==fO||Gi.data!==Fz))throw iI(),O2;s&&m_()}),()=>{for(var g of a){e.removeEventListener(g,k3);var b=Tx.get(g);--b===0?(document.removeEventListener(g,k3),Tx.delete(g)):Tx.set(g,b)}lL.delete(l),p!==n&&p.parentNode?.removeChild(p)}});return uL.set(h,f),h}let uL=new WeakMap;function N$e(t,e){const n=uL.get(t);return n?(uL.delete(t),n(e)):Promise.resolve()}function z$e(t){return new Q$e(t)}class Q$e{#e;#t;constructor(e){var n=new Map,r=(s,o)=>{var a=_ue(o,!1,!1);return n.set(s,a),a};const i=new Proxy({...e.props||{},$$events:{}},{get(s,o){return Ce(n.get(o)??r(o,Reflect.get(s,o)))},has(s,o){return o===Xle?!0:(Ce(n.get(o)??r(o,Reflect.get(s,o))),Reflect.has(s,o))},set(s,o,a){return hr(n.get(o)??r(o,a),a),Reflect.set(s,o,a)}});this.#t=(e.hydrate?B$e:zue)(e.component,{target:e.target,anchor:e.anchor,props:i,context:e.context,intro:e.intro??!1,recover:e.recover}),(!e?.props?.$$host||e.sync===!1)&&h$e(),this.#e=i.$$events;for(const s of Object.keys(this.#t))s==="$set"||s==="$destroy"||s==="$on"||Gle(this,s,{get(){return this.#t[s]},set(o){this.#t[s]=o},enumerable:!0});this.#t.$set=s=>{Object.assign(i,s)},this.#t.$destroy=()=>{N$e(this.#t)}}$set(e){this.#t.$set(e)}$on(e,n){this.#e[e]=this.#e[e]||[];const r=(...i)=>n.call(this,...i);return this.#e[e].push(r),()=>{this.#e[e]=this.#e[e].filter(i=>i!==r)}}$destroy(){this.#t.$destroy()}}const j$e="5";typeof window<"u"&&((window.__svelte??={}).v??=new Set).add(j$e);class jue{anchor;#e=new Map;#t=new Map;#n=new Map;#r=!0;constructor(e,n=!0){this.anchor=e,this.#r=n}#l=()=>{var e=Ra;if(this.#e.has(e)){var n=this.#e.get(e),r=this.#t.get(n);if(r)zz(r);else{var i=this.#n.get(n);i&&(this.#t.set(n,i.effect),this.#n.delete(n),i.fragment.lastChild.remove(),this.anchor.before(i.fragment),r=i.effect)}for(const[s,o]of this.#e){if(this.#e.delete(s),s===e)break;const a=this.#n.get(o);a&&($u(a.effect),this.#n.delete(o))}for(const[s,o]of this.#t){if(s===n)continue;const a=()=>{if(Array.from(this.#e.values()).includes(s)){var l=document.createDocumentFragment();$ue(o,l),l.append(pm()),this.#n.set(s,{effect:o,fragment:l})}else $u(o);this.#t.delete(s)};this.#r||!r?Mw(o,a,!1):a()}}};#a=e=>{this.#e.delete(e);const n=Array.from(this.#e.values());for(const[r,i]of this.#n)n.includes(r)||($u(i.effect),this.#n.delete(r))};ensure(e,n){var r=Ra,i=c$e();n&&!this.#t.has(e)&&!this.#n.has(e)&&this.#t.set(e,ud(()=>n(this.anchor))),this.#e.set(r,e),i||(ns&&(this.anchor=Gi),this.#l())}}function Qz(t){Pc===null&&tue(),Jh(()=>{const e=y_(t);if(typeof e=="function")return e})}function U$e(t){Pc===null&&tue(),Qz(()=>()=>y_(t))}function tc(t,e,n=!1){ns&&eA();var r=new jue(t),i=n?w2:0;function s(o,a){if(ns){const h=aue(t)===rI;if(o===h){var l=iP();Oc(l),r.anchor=l,Ug(!1),r.ensure(o,a),Ug(!0);return}}r.ensure(o,a)}aI(()=>{var o=!1;e((a,l=!0)=>{o=!0,s(l,a)}),o||s(!1,null)},i)}function V$e(t,e,n){ns&&eA();var r=new jue(t);aI(()=>{var i=e();r.ensure(i,n)})}function VR(t,e){return e}function q$e(t,e,n){for(var r=t.items,i=[],s=e.length,o=0;o<s;o++)Nz(e[o].e,i,!0);var a=s>0&&i.length===0&&n!==null;if(a){var l=n.parentNode;hue(l),l.append(n),r.clear(),Tp(t,e[0].prev,e[s-1].next)}Fue(i,()=>{for(var h=0;h<s;h++){var f=e[h];a||(r.delete(f.k),Tp(t,f.prev,f.next)),$u(f.e,!a)}})}function qR(t,e,n,r,i,s=null){var o=t,a={flags:e,items:new Map,first:null},l=(e&nue)!==0;if(l){var h=t;o=ns?Oc(h0(h)):h.appendChild(pm())}ns&&eA();var f=null,p=!1,g=new Map,b=gue(()=>{var I=n();return Wle(I)?I:I==null?[]:Dz(I)}),x,k;function T(){Z$e(k,x,a,g,o,i,e,r,n),s!==null&&(x.length===0?f?zz(f):f=ud(()=>s(o)):f!==null&&Mw(f,()=>{f=null}))}aI(()=>{k??=bi,x=Ce(b);var I=x.length;if(p&&I===0)return;p=I===0;let M=!1;if(ns){var B=aue(o)===rI;B!==(I===0)&&(o=iP(),Oc(o),Ug(!1),M=!0)}if(ns){for(var j=null,Q,Z=0;Z<I;Z++){if(Gi.nodeType===fO&&Gi.data===Fz){o=Gi,M=!0,Ug(!1);break}var q=x[Z],J=r(q,Z);Q=Uue(Gi,a,j,null,q,J,Z,i,e,n),a.items.set(J,Q),j=Q}I>0&&Oc(iP())}ns?I===0&&s&&(f=ud(()=>s(o))):T(),M&&Ug(!0),Ce(b)}),ns&&(o=Gi)}function Z$e(t,e,n,r,i,s,o,a,l){var h=(o&JLe)!==0,f=(o&(Mz|Rz))!==0,p=e.length,g=n.items,b=n.first,x=b,k,T=null,I,M=[],B=[],j,Q,Z,q;if(h)for(q=0;q<p;q+=1)j=e[q],Q=a(j,q),Z=g.get(Q),Z!==void 0&&(Z.a?.measure(),(I??=new Set).add(Z));for(q=0;q<p;q+=1){if(j=e[q],Q=a(j,q),Z=g.get(Q),Z===void 0){var J=r.get(Q);if(J!==void 0){r.delete(Q),g.set(Q,J);var oe=T?T.next:x;Tp(n,T,J),Tp(n,J,oe),ZR(J,oe,i),T=J}else{var me=x?x.e.nodes_start:i;T=Uue(me,n,T,T===null?n.first:T.next,j,Q,q,s,o,l)}g.set(Q,T),M=[],B=[],x=T.next;continue}if(f&&X$e(Z,j,q,o),(Z.e.f&yh)!==0&&(zz(Z.e),h&&(Z.a?.unfix(),(I??=new Set).delete(Z))),Z!==x){if(k!==void 0&&k.has(Z)){if(M.length<B.length){var ae=B[0],ce;T=ae.prev;var se=M[0],ge=M[M.length-1];for(ce=0;ce<M.length;ce+=1)ZR(M[ce],ae,i);for(ce=0;ce<B.length;ce+=1)k.delete(B[ce]);Tp(n,se.prev,ge.next),Tp(n,T,se),Tp(n,ge,ae),x=ae,T=ge,q-=1,M=[],B=[]}else k.delete(Z),ZR(Z,x,i),Tp(n,Z.prev,Z.next),Tp(n,Z,T===null?n.first:T.next),Tp(n,T,Z),T=Z;continue}for(M=[],B=[];x!==null&&x.k!==Q;)(x.e.f&yh)===0&&(k??=new Set).add(x),B.push(x),x=x.next;if(x===null)continue;Z=x}M.push(Z),T=Z,x=Z.next}if(x!==null||k!==void 0){for(var xe=k===void 0?[]:Dz(k);x!==null;)(x.e.f&yh)===0&&xe.push(x),x=x.next;var Se=xe.length;if(Se>0){var De=(o&nue)!==0&&p===0?i:null;if(h){for(q=0;q<Se;q+=1)xe[q].a?.measure();for(q=0;q<Se;q+=1)xe[q].a?.fix()}q$e(n,xe,De)}}h&&dO(()=>{if(I!==void 0)for(Z of I)Z.a?.apply()}),t.first=n.first&&n.first.e,t.last=T&&T.e;for(var He of r.values())$u(He.e);r.clear()}function X$e(t,e,n,r){(r&Mz)!==0&&C2(t.v,e),(r&Rz)!==0?C2(t.i,n):t.i=n}function Uue(t,e,n,r,i,s,o,a,l,h,f){var p=(l&Mz)!==0,g=(l&e$e)===0,b=p?g?_ue(i,!1,!1):Xb(i):i,x=(l&Rz)===0?o:Xb(o),k={i:x,v:b,k:s,a:null,e:null,prev:n,next:r};try{if(t===null){var T=document.createDocumentFragment();T.append(t=pm())}return k.e=ud(()=>a(t,b,x,h),ns),k.e.prev=n&&n.e,k.e.next=r&&r.e,n===null?f||(e.first=k):(n.next=k,n.e.next=k.e),r!==null&&(r.prev=k,r.e.prev=k.e),k}finally{}}function ZR(t,e,n){for(var r=t.next?t.next.e.nodes_start:n,i=e?e.e.nodes_start:n,s=t.e.nodes_start;s!==null&&s!==r;){var o=Tm(s);i.before(s),s=o}}function Tp(t,e,n){e===null?t.first=n:(e.next=n,e.e.next=n&&n.e),n!==null&&(n.prev=e,n.e.prev=e&&e.e)}function od(t,e,n){Due(()=>{var r=y_(()=>e(t,n?.())||{});if(n&&r?.update){var i=!1,s={};Bz(()=>{var o=n();k$e(o),i&&Jle(s,o)&&(s=o,r.update(o))}),i=!0}if(r?.destroy)return()=>r.destroy()})}function JX(t,e=!1){var n=e?" !important;":";",r="";for(var i in t){var s=t[i];s!=null&&s!==""&&(r+=" "+i+": "+s+n)}return r}function W$e(t,e){if(e){var n="",r,i;return Array.isArray(e)?(r=e[0],i=e[1]):r=e,r&&(n+=JX(r)),i&&(n+=JX(i,!0)),n=n.trim(),n===""?null:n}return String(t)}function XR(t,e={},n,r){for(var i in n){var s=n[i];e[i]!==s&&(n[i]==null?t.style.removeProperty(i):t.style.setProperty(i,s,r))}}function zi(t,e,n,r){var i=t.__style;if(ns||i!==e){var s=W$e(e,r);(!ns||s!==t.getAttribute("style"))&&(s==null?t.removeAttribute("style"):t.style.cssText=s),t.__style=e}else r&&(Array.isArray(r)?(XR(t,n?.[0],r[0]),XR(t,n?.[1],r[1],"important")):XR(t,n,r));return r}const G$e=Symbol("is custom element"),Y$e=Symbol("is html");function Bn(t,e,n,r){var i=H$e(t);ns&&(i[e]=t.getAttribute(e),e==="src"||e==="srcset"||e==="href"&&t.nodeName==="LINK")||i[e]!==(i[e]=n)&&(e==="loading"&&(t[FLe]=n),n==null?t.removeAttribute(e):typeof n!="string"&&K$e(t).includes(e)?t[e]=n:t.setAttribute(e,n))}function H$e(t){return t.__attributes??={[G$e]:t.nodeName.includes("-"),[Y$e]:t.namespaceURI===a$e}}var eW=new Map;function K$e(t){var e=t.getAttribute("is")||t.nodeName,n=eW.get(e);if(n)return n;eW.set(e,n=[]);for(var r,i=t,s=Element.prototype;s!==i;){r=Yle(i);for(var o in r)r[o].set&&n.push(o);i=Iz(i)}return n}function tW(t,e){return t===e||t?.[xb]===e}function aP(t={},e,n,r){return Due(()=>{var i,s;return Bz(()=>{i=s,s=[],y_(()=>{t!==n(...s)&&(e(t,...s),i&&tW(n(...i),t)&&e(null,...i))})}),()=>{dO(()=>{s&&tW(n(...s),t)&&e(null,...s)})}}),t}let L4=!1;function J$e(t){var e=L4;try{return L4=!1,[t(),L4]}finally{L4=e}}function or(t,e,n,r){var i=(n&r$e)!==0,s=(n&i$e)!==0,o=r,a=!0,l=()=>(a&&(a=!1,o=s?y_(r):r),o),h;if(i){var f=xb in t||Xle in t;h=Dw(t,e)?.set??(f&&e in t?M=>t[e]=M:void 0)}var p,g=!1;i?[p,g]=J$e(()=>t[e]):p=t[e],p===void 0&&r!==void 0&&(p=l(),h&&(XLe(),h(p)));var b;if(b=()=>{var M=t[e];return M===void 0?l():(a=!0,M)},(n&n$e)===0)return b;if(h){var x=t.$$legacy;return(function(M,B){return arguments.length>0?((!B||x||g)&&h(B?b():M),M):b()})}var k=!1,T=((n&t$e)!==0?oI:gue)(()=>(k=!1,b()));i&&Ce(T);var I=bi;return(function(M,B){if(arguments.length>0){const j=B?Ce(T):i?ub(M):M;return hr(T,j),k=!0,o!==void 0&&(o=j),M}return g_&&k||(I.f&t0)!==0?T.v:Ce(T)})}var eBe=C0('<g><rect role="none"></rect><rect role="none"></rect><rect role="none"></rect><rect role="none"></rect><rect role="none"></rect><rect role="none"></rect><rect role="none"></rect><rect role="none"></rect><rect role="none"></rect></g>');function tBe(t,e){p_(e,!0);let n=cr(()=>e.pointLocation(e.value.xMin,e.value.yMin)),r=cr(()=>e.pointLocation(e.value.xMax,e.value.yMax));const i=8;function s(T){return I=>{e.preventHover(!0);let M=[Ce(n).x,Ce(n).y,Ce(r).x,Ce(r).y];return{move:B=>{let j=B.pageX-I.pageX,Q=B.pageY-I.pageY,Z=[j,Q,j,Q].map((oe,me)=>M[me]+oe*T[me]),q=e.coordinateAtPoint(Z[0],Z[1]),J=e.coordinateAtPoint(Z[2],Z[3]);e.onChange({xMin:Math.min(q.x,J.x),xMax:Math.max(q.x,J.x),yMin:Math.min(q.y,J.y),yMax:Math.max(q.y,J.y)})},up:()=>{e.preventHover(!1)},cancel:()=>{e.preventHover(!1)}}}}var o=eBe(),a=tl(o);zi(a,"",{},{stroke:"#fff",fill:"rgba(128,128,128,0.25)",cursor:"move"}),od(a,(T,I)=>vs?.(T,I),()=>({drag:s([1,1,1,1])}));var l=yo(a);Bn(l,"width",i),zi(l,"",{},{cursor:"ew-resize",stroke:"none",fill:"none","pointer-events":"all"}),od(l,(T,I)=>vs?.(T,I),()=>({drag:s([1,0,0,0])}));var h=yo(l);Bn(h,"width",i),zi(h,"",{},{cursor:"ew-resize",stroke:"none",fill:"none","pointer-events":"all"}),od(h,(T,I)=>vs?.(T,I),()=>({drag:s([0,0,1,0])}));var f=yo(h);Bn(f,"height",i),zi(f,"",{},{cursor:"ns-resize",stroke:"none",fill:"none","pointer-events":"all"}),od(f,(T,I)=>vs?.(T,I),()=>({drag:s([0,1,0,0])}));var p=yo(f);Bn(p,"height",i),zi(p,"",{},{cursor:"ns-resize",stroke:"none",fill:"none","pointer-events":"all"}),od(p,(T,I)=>vs?.(T,I),()=>({drag:s([0,0,0,1])}));var g=yo(p);Bn(g,"width",i),Bn(g,"height",i),zi(g,"",{},{cursor:"nesw-resize",stroke:"none",fill:"none","pointer-events":"all"}),od(g,(T,I)=>vs?.(T,I),()=>({drag:s([1,1,0,0])}));var b=yo(g);Bn(b,"width",i),Bn(b,"height",i),zi(b,"",{},{cursor:"nwse-resize",stroke:"none",fill:"none","pointer-events":"all"}),od(b,(T,I)=>vs?.(T,I),()=>({drag:s([1,0,0,1])}));var x=yo(b);Bn(x,"width",i),Bn(x,"height",i),zi(x,"",{},{cursor:"nwse-resize",stroke:"none",fill:"none","pointer-events":"all"}),od(x,(T,I)=>vs?.(T,I),()=>({drag:s([0,1,1,0])}));var k=yo(x);Bn(k,"width",i),Bn(k,"height",i),zi(k,"",{},{cursor:"nesw-resize",stroke:"none",fill:"none","pointer-events":"all"}),od(k,(T,I)=>vs?.(T,I),()=>({drag:s([0,0,1,1])})),Oa(o),fh((T,I,M,B,j,Q,Z,q,J,oe,me,ae)=>{Bn(a,"x",T),Bn(a,"width",I),Bn(a,"y",M),Bn(a,"height",B),Bn(l,"x",Ce(n).x-i/2),Bn(l,"y",j),Bn(l,"height",Q),Bn(h,"x",Ce(r).x-i/2),Bn(h,"y",Z),Bn(h,"height",q),Bn(f,"x",J),Bn(f,"width",oe),Bn(f,"y",Ce(n).y-i/2),Bn(p,"x",me),Bn(p,"width",ae),Bn(p,"y",Ce(r).y-i/2),Bn(g,"x",Ce(n).x-i/2),Bn(g,"y",Ce(n).y-i/2),Bn(b,"x",Ce(n).x-i/2),Bn(b,"y",Ce(r).y-i/2),Bn(x,"x",Ce(r).x-i/2),Bn(x,"y",Ce(n).y-i/2),Bn(k,"x",Ce(r).x-i/2),Bn(k,"y",Ce(r).y-i/2)},[()=>Math.min(Ce(n).x,Ce(r).x),()=>Math.abs(Ce(n).x-Ce(r).x),()=>Math.min(Ce(n).y,Ce(r).y),()=>Math.abs(Ce(n).y-Ce(r).y),()=>Math.min(Ce(n).y,Ce(r).y),()=>Math.abs(Ce(n).y-Ce(r).y),()=>Math.min(Ce(n).y,Ce(r).y),()=>Math.abs(Ce(n).y-Ce(r).y),()=>Math.min(Ce(n).x,Ce(r).x),()=>Math.abs(Ce(n).x-Ce(r).x),()=>Math.min(Ce(n).x,Ce(r).x),()=>Math.abs(Ce(n).x-Ce(r).x)]),Vo(t,o),m_()}function nBe(t,e){let n=!1,r,i,s,o=300,a=300,l=async f=>{n=!0;try{await t(f)}catch(p){console.error(p)}if(n=!1,r!==void 0){let p=r;r=void 0,h(p)}},h=async f=>{if(n){r=f;return}let p=new Date().getTime();e()&&(i=p);let g=!0;(i==null||p-i<a)&&(g=!1),g?(s&&clearTimeout(s),s=setTimeout(()=>l(f),o)):l(f)};return h}function rBe(t,e){let n=t.x-e.x,r=t.y-e.y;return Math.sqrt(n*n+r*r)}function iBe(t){return"M "+t.map(({x:e,y:n})=>`${e},${n}`).join(" L ")+" Z"}function Vue(t){let e=1/0,n=-1/0,r=1/0,i=-1/0;for(let{x:s,y:o}of t)e=Math.min(e,s),r=Math.min(r,o),n=Math.max(n,s),i=Math.max(i,o);return{xMin:e,yMin:r,xMax:n,yMax:i}}async function sBe(t){let e=JSON.stringify(t);return aBe(e)}function Fy(t,e){if(t===e)return!0;if(t===null||e===null||typeof t!="object"||typeof e!="object"||Object.keys(t).length!==Object.keys(e).length)return!1;for(let n in t)if(e.hasOwnProperty(n)){if(!Fy(t[n],e[n]))return!1}else return!1;return!0}function oBe(t,e=0){let n=3735928559^e,r=1103547991^e;for(let i=0;i<t.length;i++){let s=t[i];n=Math.imul(n^s,2654435761),r=Math.imul(r^s,1597334677)}return n=Math.imul(n^n>>>16,2246822507),n^=Math.imul(r^r>>>13,3266489909),r=Math.imul(r^r>>>16,2246822507),r^=Math.imul(n^n>>>13,3266489909),[r>>>0,n>>>0]}function aBe(t){let e=new TextEncoder().encode(t),n=oBe(e);return n[0].toString(16).padStart(8,"0")+n[1].toString(16).padStart(8,"0")}var lBe=C0("<path></path>");function uBe(t,e){p_(e,!0);let n=cr(()=>e.value.map(({x:i,y:s})=>e.pointLocation(i,s)));var r=lBe();zi(r,"",{},{stroke:"#fff",fill:"rgba(128,128,128,0.25)"}),fh(i=>Bn(r,"d",i),[()=>iBe(Ce(n))]),Vo(t,r),m_()}const cBe={marquee:"M7 5a2 2 0 1 1-4 0a2 2 0 0 1 4 0m1-.25c0 .414.336.75.75.75h6.5a.75.75 0 0 0 0-1.5h-6.5a.75.75 0 0 0-.75.75M4.75 8a.75.75 0 0 0-.75.75v6.5a.75.75 0 0 0 1.5 0v-6.5A.75.75 0 0 0 4.75 8m14.5 0a.75.75 0 0 0-.75.75v6.5a.75.75 0 0 0 1.5 0v-6.5a.75.75 0 0 0-.75-.75M8.75 20a.75.75 0 0 1 0-1.5h6.5a.75.75 0 0 1 0 1.5zM5 21a2 2 0 1 0 0-4a2 2 0 0 0 0 4M21 5a2 2 0 1 1-4 0a2 2 0 0 1 4 0m-2 16a2 2 0 1 0 0-4a2 2 0 0 0 0 4",lasso:"M9.703 2.265A10 10 0 0 1 12 2c.79 0 1.559.092 2.297.265a.75.75 0 1 1-.343 1.46A8.5 8.5 0 0 0 12 3.5a8.6 8.6 0 0 0-1.954.225a.75.75 0 1 1-.343-1.46m-1.93 1.47a.75.75 0 0 1-.242 1.033a8.55 8.55 0 0 0-2.763 2.763a.75.75 0 1 1-1.275-.79a10.05 10.05 0 0 1 3.248-3.248a.75.75 0 0 1 1.032.243m8.454 0a.75.75 0 0 1 1.032-.242a10.05 10.05 0 0 1 3.248 3.248a.75.75 0 1 1-1.275.79a8.55 8.55 0 0 0-2.763-2.763a.75.75 0 0 1-.242-1.032m-13.06 5.41a.75.75 0 0 1 .558.901A8.5 8.5 0 0 0 3.5 12c0 .673.078 1.327.225 1.954a.75.75 0 1 1-1.46.343A10 10 0 0 1 2 12c0-.79.092-1.559.265-2.297a.75.75 0 0 1 .902-.559m17.666 0a.75.75 0 0 1 .902.558a10.1 10.1 0 0 1 0 4.595a.75.75 0 1 1-1.46-.343a8.54 8.54 0 0 0-.001-3.908a.75.75 0 0 1 .559-.902M3.736 16.226a.75.75 0 0 1 1.032.242a8.55 8.55 0 0 0 2.763 2.763a.75.75 0 0 1-.79 1.275a10.05 10.05 0 0 1-3.248-3.248a.75.75 0 0 1 .243-1.032m16.685.858a.75.75 0 1 0-1.342-.67l-.002.004l-.015.029l-.069.123a8 8 0 0 1-.289.466a9.6 9.6 0 0 1-.965 1.219c-1.17-1.073-2.756-2.006-4.74-2.006c-2.347 0-3.99 1.203-3.99 2.875S10.653 22 13 22c1.942 0 3.495-.75 4.658-1.645a11.7 11.7 0 0 1 1.315 2.01q.05.099.073.149l.017.035l.004.009a.75.75 0 0 0 1.368-.615c-.087-.183 0-.001 0-.001v-.002l-.003-.004l-.007-.015l-.024-.052l-.091-.184a13.2 13.2 0 0 0-1.538-2.337a11 11 0 0 0 1.525-2.032l.09-.162l.024-.047l.007-.014l.002-.005zM13 17.75c1.433 0 2.644.652 3.616 1.512c-.95.7-2.155 1.238-3.616 1.238c-1.973 0-2.49-.922-2.49-1.375s.517-1.375 2.49-1.375"};var hBe=C0('<svg width="24" height="24" viewBox="0 0 24 24"><path></path></svg>'),fBe=E1("<button><!></button>");function nW(t,e){let n=or(e,"active",3,!1);var r=fBe();r.__click=function(...a){e.onClick?.apply(this,a)};let i;var s=tl(r);{var o=a=>{var l=hBe();zi(l,"",{},{width:"14px",height:"14px"});var h=tl(l);zi(h,"",{},{fill:"currentColor"}),Oa(l),fh(()=>Bn(h,"d",cBe[e.icon])),Vo(a,l)};tc(s,a=>{e.icon!=null&&a(o)})}Oa(r),fh(()=>{Bn(r,"title",e.title),i=zi(r,"",i,{border:"none",appearance:"none",background:n()?"color-mix(in srgb, currentColor 20%, transparent)":"none","border-radius":"2px",height:"16px",width:"16px",padding:"0",margin:"0","font-family":"inherit","font-size":"1em",color:"currentColor",display:"flex","flex-direction":"row","align-items":"center","justify-content":"center"})}),Vo(t,r)}R$e(["click"]);var dBe=E1('<div><div> </div> <svg height="6px"><line shape-rendering="crispEdges"></line><line shape-rendering="crispEdges"></line><line shape-rendering="crispEdges"></line></svg></div>');function pBe(t,e){function n(g,b){let x=Math.log10(b*g),k=Math.round(x),T=[.1,.2,.5,1,2,5,10],I=0,M=1e10;for(let B of T){let j=Math.abs(Math.log10(B)+k-x);j<M&&(I=B,M=j)}return I*Math.pow(10,k)}let r=cr(()=>n(e.distancePerPoint,30)),i=cr(()=>Ce(r)/e.distancePerPoint);var s=dBe();zi(s,"",{},{display:"flex","align-items":"center"});var o=tl(s);zi(o,"",{},{"padding-right":"4px"});var a=tl(o,!0);Oa(o);var l=yo(o,2),h=tl(l);Bn(h,"x1",1),Bn(h,"y1",3),Bn(h,"y2",3),zi(h,"",{},{stroke:"currentColor","stroke-width":"2","stroke-cap":"butt"});var f=yo(h);Bn(f,"x1",1),Bn(f,"x2",1),Bn(f,"y1",0),Bn(f,"y2",6),zi(f,"",{},{stroke:"currentColor"});var p=yo(f);Bn(p,"y1",0),Bn(p,"y2",6),zi(p,"",{},{stroke:"currentColor"}),Oa(l),Oa(s),fh(g=>{J3(a,g),Bn(l,"width",`${Ce(i)+2}px`),Bn(h,"x2",Ce(i)+1),Bn(p,"x1",Ce(i)+1),Bn(p,"x2",Ce(i)+1)},[()=>Ce(r).toLocaleString()]),Vo(t,s)}var mBe=E1("<div> </div>"),gBe=E1('<a target="_blank" rel="noopener noreferrer"> </a> <div style="border-right: 1px solid currentColor; margin: 4px 2px; opacity: 0.3; width: 0; height: 10px"></div>',1),yBe=E1('<div><div><!></div> <div></div> <div><!> <!> <!> <div style="border-right: 1px solid currentColor; margin: 4px 2px; opacity: 0.3; width: 0; height: 10px"></div> <!> <div style="border-right: 1px solid currentColor; margin: 4px 2px; opacity: 0.3; width: 0; height: 10px"></div> <span> </span></div></div>');function vBe(t,e){p_(e,!0);let n=or(e,"statusMessage",3,null);var r=yBe();let i;var s=tl(r);let o;var a=tl(s);{var l=B=>{var j=mBe();zi(j,"",{},{display:"inline-block"});var Q=tl(j,!0);Oa(j),fh(()=>J3(Q,n())),Vo(B,j)};tc(a,B=>{n()!=null&&B(l)})}Oa(s);var h=yo(s,2);zi(h,"",{},{flex:"1 1 0%"});var f=yo(h,2);let p;var g=tl(f);{var b=B=>{var j=gBe(),Q=qx(j);zi(Q,"",{},{color:"currentColor","text-decoration":"underline"});var Z=tl(Q,!0);Oa(Q),oue(2),fh(()=>{Bn(Q,"href",e.resolvedTheme.brandingLink.href),J3(Z,e.resolvedTheme.brandingLink.text)}),Vo(B,j)};tc(g,B=>{e.resolvedTheme.brandingLink!=null&&B(b)})}var x=yo(g,2);{let B=cr(()=>e.selectionMode=="marquee");nW(x,{icon:"marquee",get active(){return Ce(B)},title:"Toggle rectangle selection mode. In normal mode, use shift + drag for rectangle selection.",onClick:()=>e.onSelectionMode(e.selectionMode=="marquee"?"none":"marquee")})}var k=yo(x,2);{let B=cr(()=>e.selectionMode=="lasso");nW(k,{icon:"lasso",get active(){return Ce(B)},title:"Toggle lasso selection mode. In normal mode, use shift + meta + drag for lasso selection.",onClick:()=>e.onSelectionMode(e.selectionMode=="lasso"?"none":"lasso")})}var T=yo(k,4);pBe(T,{get distancePerPoint(){return e.distancePerPoint}});var I=yo(T,4),M=tl(I);Oa(I),Oa(f),Oa(r),fh(B=>{i=zi(r,"",i,{"font-size":"12px","line-height":"20px",height:"20px",color:e.resolvedTheme.statusBarTextColor,position:"absolute",bottom:"0px",left:"0px",right:"0px","user-select":"none","font-family":e.resolvedTheme.fontFamily,display:"flex","flex-direction":"row","z-index":"10"}),o=zi(s,"",o,{flex:"none",display:"flex","flex-direction":"row",gap:"4px",padding:"0px 4px","border-radius":"2px",background:e.resolvedTheme.statusBarBackgroundColor}),p=zi(f,"",p,{flex:"none",display:"flex","flex-direction":"row","align-items":"center",gap:"4px",padding:"0px 4px","border-radius":"2px",background:e.resolvedTheme.statusBarBackgroundColor}),J3(M,`${B??""} points`)},[()=>e.pointCount.toLocaleString()]),Vo(t,r),m_()}function bBe(t){return(e,n)=>{let r=new t(e,n);return{...r.update?{update:r.update.bind(r)}:{},...r.destroy?{destroy:r.destroy.bind(r)}:{}}}}let WR=new WeakMap;function que(t){let e=typeof t=="function"?t:t.class;if(WR.has(e))return WR.get(e);{let n=bBe(e);return WR.set(e,n),n}}function Zue(t,e){return typeof t=="function"?e:{...t.props??{},...e}}var _Be=E1("<div><div></div></div>");function xBe(t,e){p_(e,!0);let n=or(e,"margin",3,4),r,i,s=cr(()=>que(e.customTooltip)),o=cr(()=>Zue(e.customTooltip,{tooltip:e.tooltip}));Qz(()=>{K3(()=>{let h=Ce(s),f=null;return K3(()=>{i.style.left="0px",i.style.top="0px",i.style.pointerEvents=e.allowInteraction?"all":"none",f==null?f=h(i,Ce(o)):f.update?.(Ce(o));function p(T,I,M,B){let j=e.location.x,Q=e.location.y,Z=2,q=T/2,J=I+(e.targetHeight+n());j-q<M&&(q=j-M),j-q>B-T&&(q=j-B+T),Q-J<Z&&(J=-(e.targetHeight+n())),i.style.left=j-q+"px",i.style.top=Q-J+"px"}let g=r.getBoundingClientRect(),{width:b,height:x}=i.getBoundingClientRect();p(b,x,2,g.width-2);let k=requestAnimationFrame(()=>{k=null;let T=i.getBoundingClientRect();(T.width!=b||T.height!=x)&&p(T.width,T.height,2,g.width-2)});return()=>{k!=null&&cancelAnimationFrame(k)}}),()=>{f?.destroy?.(),i.replaceChildren()}})});var a=_Be();zi(a,"",{},{position:"absolute",width:"100%"});var l=tl(a);zi(l,"",{},{display:"flex",position:"absolute",width:"fit-content",height:"fit-content","z-index":"100"}),aP(l,h=>i=h,()=>i),Oa(a),aP(a,h=>r=h,()=>r),Vo(t,a),m_()}function Xue(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var cL={exports:{}},wBe=cL.exports,rW;function OBe(){return rW||(rW=1,(function(t,e){(function(n,r){t.exports=r()})(wBe,(function(){var n={},r={};function i(o,a,l){if(r[o]=l,o==="index"){var h="var sharedModule = {}; ("+r.shared+")(sharedModule); ("+r.worker+")(sharedModule);",f={};return r.shared(f),r.index(n,f),typeof window<"u"&&n.setWorkerUrl(window.URL.createObjectURL(new Blob([h],{type:"text/javascript"}))),n}}i("shared",["exports"],(function(o){function a(d,c,m,v){return new(m||(m=Promise))((function(S,P){function D(V){try{N(v.next(V))}catch(W){P(W)}}function R(V){try{N(v.throw(V))}catch(W){P(W)}}function N(V){var W;V.done?S(V.value):(W=V.value,W instanceof m?W:new m((function(Y){Y(W)}))).then(D,R)}N((v=v.apply(d,c||[])).next())}))}function l(d){return d&&d.__esModule&&Object.prototype.hasOwnProperty.call(d,"default")?d.default:d}typeof SuppressedError=="function"&&SuppressedError;var h=f;function f(d,c){this.x=d,this.y=c}f.prototype={clone:function(){return new f(this.x,this.y)},add:function(d){return this.clone()._add(d)},sub:function(d){return this.clone()._sub(d)},multByPoint:function(d){return this.clone()._multByPoint(d)},divByPoint:function(d){return this.clone()._divByPoint(d)},mult:function(d){return this.clone()._mult(d)},div:function(d){return this.clone()._div(d)},rotate:function(d){return this.clone()._rotate(d)},rotateAround:function(d,c){return this.clone()._rotateAround(d,c)},matMult:function(d){return this.clone()._matMult(d)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(d){return this.x===d.x&&this.y===d.y},dist:function(d){return Math.sqrt(this.distSqr(d))},distSqr:function(d){var c=d.x-this.x,m=d.y-this.y;return c*c+m*m},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(d){return Math.atan2(this.y-d.y,this.x-d.x)},angleWith:function(d){return this.angleWithSep(d.x,d.y)},angleWithSep:function(d,c){return Math.atan2(this.x*c-this.y*d,this.x*d+this.y*c)},_matMult:function(d){var c=d[2]*this.x+d[3]*this.y;return this.x=d[0]*this.x+d[1]*this.y,this.y=c,this},_add:function(d){return this.x+=d.x,this.y+=d.y,this},_sub:function(d){return this.x-=d.x,this.y-=d.y,this},_mult:function(d){return this.x*=d,this.y*=d,this},_div:function(d){return this.x/=d,this.y/=d,this},_multByPoint:function(d){return this.x*=d.x,this.y*=d.y,this},_divByPoint:function(d){return this.x/=d.x,this.y/=d.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var d=this.y;return this.y=this.x,this.x=-d,this},_rotate:function(d){var c=Math.cos(d),m=Math.sin(d),v=m*this.x+c*this.y;return this.x=c*this.x-m*this.y,this.y=v,this},_rotateAround:function(d,c){var m=Math.cos(d),v=Math.sin(d),S=c.y+v*(this.x-c.x)+m*(this.y-c.y);return this.x=c.x+m*(this.x-c.x)-v*(this.y-c.y),this.y=S,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},f.convert=function(d){return d instanceof f?d:Array.isArray(d)?new f(d[0],d[1]):d};var p=l(h),g=b;function b(d,c,m,v){this.cx=3*d,this.bx=3*(m-d)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*c,this.by=3*(v-c)-this.cy,this.ay=1-this.cy-this.by,this.p1x=d,this.p1y=c,this.p2x=m,this.p2y=v}b.prototype={sampleCurveX:function(d){return((this.ax*d+this.bx)*d+this.cx)*d},sampleCurveY:function(d){return((this.ay*d+this.by)*d+this.cy)*d},sampleCurveDerivativeX:function(d){return(3*this.ax*d+2*this.bx)*d+this.cx},solveCurveX:function(d,c){if(c===void 0&&(c=1e-6),d<0)return 0;if(d>1)return 1;for(var m=d,v=0;v<8;v++){var S=this.sampleCurveX(m)-d;if(Math.abs(S)<c)return m;var P=this.sampleCurveDerivativeX(m);if(Math.abs(P)<1e-6)break;m-=S/P}var D=0,R=1;for(m=d,v=0;v<20&&(S=this.sampleCurveX(m),!(Math.abs(S-d)<c));v++)d>S?D=m:R=m,m=.5*(R-D)+D;return m},solve:function(d,c){return this.sampleCurveY(this.solveCurveX(d,c))}};var x=l(g);let k,T;function I(){return k==null&&(k=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")&&typeof createImageBitmap=="function"),k}function M(){if(T==null&&(T=!1,I())){const d=new OffscreenCanvas(5,5).getContext("2d",{willReadFrequently:!0});if(d){for(let m=0;m<25;m++){const v=4*m;d.fillStyle=`rgb(${v},${v+1},${v+2})`,d.fillRect(m%5,Math.floor(m/5),1,1)}const c=d.getImageData(0,0,5,5).data;for(let m=0;m<100;m++)if(m%4!=3&&c[m]!==m){T=!0;break}}}return T||!1}function B(d,c,m,v){const S=new x(d,c,m,v);return P=>S.solve(P)}const j=B(.25,.1,.25,1);function Q(d,c,m){return Math.min(m,Math.max(c,d))}function Z(d,c,m){const v=m-c,S=((d-c)%v+v)%v+c;return S===c?m:S}function q(d,...c){for(const m of c)for(const v in m)d[v]=m[v];return d}let J=1;function oe(d,c,m){const v={};for(const S in d)v[S]=c.call(this,d[S],S,d);return v}function me(d,c,m){const v={};for(const S in d)c.call(this,d[S],S,d)&&(v[S]=d[S]);return v}function ae(d){return Array.isArray(d)?d.map(ae):typeof d=="object"&&d?oe(d,ae):d}const ce={};function se(d){ce[d]||(typeof console<"u"&&console.warn(d),ce[d]=!0)}function ge(d,c,m){return(m.y-d.y)*(c.x-d.x)>(c.y-d.y)*(m.x-d.x)}function xe(d){return typeof WorkerGlobalScope<"u"&&d!==void 0&&d instanceof WorkerGlobalScope}let Se=null;function De(d){return typeof ImageBitmap<"u"&&d instanceof ImageBitmap}const He="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";function Ue(d,c,m,v,S){return a(this,void 0,void 0,(function*(){if(typeof VideoFrame>"u")throw new Error("VideoFrame not supported");const P=new VideoFrame(d,{timestamp:0});try{const D=P?.format;if(!D||!D.startsWith("BGR")&&!D.startsWith("RGB"))throw new Error(`Unrecognized format ${D}`);const R=D.startsWith("BGR"),N=new Uint8ClampedArray(v*S*4);if(yield P.copyTo(N,(function(V,W,Y,ee,re){const he=4*Math.max(-W,0),ue=(Math.max(0,Y)-Y)*ee*4+he,Ae=4*ee,Te=Math.max(0,W),nt=Math.max(0,Y);return{rect:{x:Te,y:nt,width:Math.min(V.width,W+ee)-Te,height:Math.min(V.height,Y+re)-nt},layout:[{offset:ue,stride:Ae}]}})(d,c,m,v,S)),R)for(let V=0;V<N.length;V+=4){const W=N[V];N[V]=N[V+2],N[V+2]=W}return N}finally{P.close()}}))}let yt,We;const at="AbortError";function ut(){return new Error(at)}const wt={MAX_PARALLEL_IMAGE_REQUESTS:16,MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:8,MAX_TILE_CACHE_ZOOM_LEVELS:5,REGISTERED_PROTOCOLS:{},WORKER_URL:""};function ot(d){return wt.REGISTERED_PROTOCOLS[d.substring(0,d.indexOf("://"))]}const dt="global-dispatcher";class Yt extends Error{constructor(c,m,v,S){super(`AJAXError: ${m} (${c}): ${v}`),this.status=c,this.statusText=m,this.url=v,this.body=S}}const Ft=()=>xe(self)?self.worker&&self.worker.referrer:(window.location.protocol==="blob:"?window.parent:window).location.href,Ot=function(d,c){if(/:\/\//.test(d.url)&&!/^https?:|^file:/.test(d.url)){const v=ot(d.url);if(v)return v(d,c);if(xe(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:d,targetMapId:dt},c)}if(!(/^file:/.test(m=d.url)||/^file:/.test(Ft())&&!/^\w+:/.test(m))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return(function(v,S){return a(this,void 0,void 0,(function*(){const P=new Request(v.url,{method:v.method||"GET",body:v.body,credentials:v.credentials,headers:v.headers,cache:v.cache,referrer:Ft(),signal:S.signal});v.type!=="json"||P.headers.has("Accept")||P.headers.set("Accept","application/json");const D=yield fetch(P);if(!D.ok){const V=yield D.blob();throw new Yt(D.status,D.statusText,v.url,V)}let R;R=v.type==="arrayBuffer"||v.type==="image"?D.arrayBuffer():v.type==="json"?D.json():D.text();const N=yield R;if(S.signal.aborted)throw ut();return{data:N,cacheControl:D.headers.get("Cache-Control"),expires:D.headers.get("Expires")}}))})(d,c);if(xe(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:d,mustQueue:!0,targetMapId:dt},c)}var m;return(function(v,S){return new Promise(((P,D)=>{var R;const N=new XMLHttpRequest;N.open(v.method||"GET",v.url,!0),v.type!=="arrayBuffer"&&v.type!=="image"||(N.responseType="arraybuffer");for(const V in v.headers)N.setRequestHeader(V,v.headers[V]);v.type==="json"&&(N.responseType="text",!((R=v.headers)===null||R===void 0)&&R.Accept||N.setRequestHeader("Accept","application/json")),N.withCredentials=v.credentials==="include",N.onerror=()=>{D(new Error(N.statusText))},N.onload=()=>{if(!S.signal.aborted)if((N.status>=200&&N.status<300||N.status===0)&&N.response!==null){let V=N.response;if(v.type==="json")try{V=JSON.parse(N.response)}catch(W){return void D(W)}P({data:V,cacheControl:N.getResponseHeader("Cache-Control"),expires:N.getResponseHeader("Expires")})}else{const V=new Blob([N.response],{type:N.getResponseHeader("Content-Type")});D(new Yt(N.status,N.statusText,v.url,V))}},S.signal.addEventListener("abort",(()=>{N.abort(),D(ut())})),N.send(v.body)}))})(d,c)};function Kt(d){if(!d||d.indexOf("://")<=0||d.indexOf("data:image/")===0||d.indexOf("blob:")===0)return!0;const c=new URL(d),m=window.location;return c.protocol===m.protocol&&c.host===m.host}function Dn(d,c,m){m[d]&&m[d].indexOf(c)!==-1||(m[d]=m[d]||[],m[d].push(c))}function Ut(d,c,m){if(m&&m[d]){const v=m[d].indexOf(c);v!==-1&&m[d].splice(v,1)}}class At{constructor(c,m={}){q(this,m),this.type=c}}class zt extends At{constructor(c,m={}){super("error",q({error:c},m))}}class nn{on(c,m){return this._listeners=this._listeners||{},Dn(c,m,this._listeners),this}off(c,m){return Ut(c,m,this._listeners),Ut(c,m,this._oneTimeListeners),this}once(c,m){return m?(this._oneTimeListeners=this._oneTimeListeners||{},Dn(c,m,this._oneTimeListeners),this):new Promise((v=>this.once(c,v)))}fire(c,m){typeof c=="string"&&(c=new At(c,m||{}));const v=c.type;if(this.listens(v)){c.target=this;const S=this._listeners&&this._listeners[v]?this._listeners[v].slice():[];for(const R of S)R.call(this,c);const P=this._oneTimeListeners&&this._oneTimeListeners[v]?this._oneTimeListeners[v].slice():[];for(const R of P)Ut(v,R,this._oneTimeListeners),R.call(this,c);const D=this._eventedParent;D&&(q(c,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),D.fire(c))}else c instanceof zt&&console.error(c.error);return this}listens(c){return this._listeners&&this._listeners[c]&&this._listeners[c].length>0||this._oneTimeListeners&&this._oneTimeListeners[c]&&this._oneTimeListeners[c].length>0||this._eventedParent&&this._eventedParent.listens(c)}setEventedParent(c,m){return this._eventedParent=c,this._eventedParentData=m,this}}var Ze={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sky:{type:"sky"},projection:{type:"projection"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"sprite"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{},custom:{}},default:"mapbox"},redFactor:{type:"number",default:1},blueFactor:{type:"number",default:1},greenFactor:{type:"number",default:1},baseShift:{type:"number",default:0},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{required:!0,type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-variable-anchor-offset":{type:"variableAnchorOffsetCollection",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},sky:{"sky-color":{type:"color","property-type":"data-constant",default:"#88C6FC",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-ground-blend":{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-fog-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"sky-horizon-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"atmosphere-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1}},projection:{type:{type:"enum",default:"mercator",values:{mercator:{},globe:{}}}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};const cn=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function Fn(d,c){const m={};for(const v in d)v!=="ref"&&(m[v]=d[v]);return cn.forEach((v=>{v in c&&(m[v]=c[v])})),m}function An(d,c){if(Array.isArray(d)){if(!Array.isArray(c)||d.length!==c.length)return!1;for(let m=0;m<d.length;m++)if(!An(d[m],c[m]))return!1;return!0}if(typeof d=="object"&&d!==null&&c!==null){if(typeof c!="object"||Object.keys(d).length!==Object.keys(c).length)return!1;for(const m in d)if(!An(d[m],c[m]))return!1;return!0}return d===c}function qn(d,c){d.push(c)}function Er(d,c,m){qn(m,{command:"addSource",args:[d,c[d]]})}function Mi(d,c,m){qn(c,{command:"removeSource",args:[d]}),m[d]=!0}function gi(d,c,m,v){Mi(d,m,v),Er(d,c,m)}function fs(d,c,m){let v;for(v in d[m])if(Object.prototype.hasOwnProperty.call(d[m],v)&&v!=="data"&&!An(d[m][v],c[m][v]))return!1;for(v in c[m])if(Object.prototype.hasOwnProperty.call(c[m],v)&&v!=="data"&&!An(d[m][v],c[m][v]))return!1;return!0}function Hr(d,c,m,v,S,P){d=d||{},c=c||{};for(const D in d)Object.prototype.hasOwnProperty.call(d,D)&&(An(d[D],c[D])||m.push({command:P,args:[v,D,c[D],S]}));for(const D in c)Object.prototype.hasOwnProperty.call(c,D)&&!Object.prototype.hasOwnProperty.call(d,D)&&(An(d[D],c[D])||m.push({command:P,args:[v,D,c[D],S]}))}function uo(d){return d.id}function ei(d,c){return d[c.id]=c,d}class Ct{constructor(c,m,v,S){this.message=(c?`${c}: `:"")+v,S&&(this.identifier=S),m!=null&&m.__line__&&(this.line=m.__line__)}}function Qi(d,...c){for(const m of c)for(const v in m)d[v]=m[v];return d}class ki extends Error{constructor(c,m){super(m),this.message=m,this.key=c}}class js{constructor(c,m=[]){this.parent=c,this.bindings={};for(const[v,S]of m)this.bindings[v]=S}concat(c){return new js(this,c)}get(c){if(this.bindings[c])return this.bindings[c];if(this.parent)return this.parent.get(c);throw new Error(`${c} not found in scope.`)}has(c){return!!this.bindings[c]||!!this.parent&&this.parent.has(c)}}const Co={kind:"null"},Lt={kind:"number"},yn={kind:"string"},rn={kind:"boolean"},Xr={kind:"color"},si={kind:"object"},Tn={kind:"value"},Ms={kind:"collator"},Ri={kind:"formatted"},oi={kind:"padding"},Fi={kind:"resolvedImage"},Oe={kind:"variableAnchorOffsetCollection"};function ne(d,c){return{kind:"array",itemType:d,N:c}}function te(d){if(d.kind==="array"){const c=te(d.itemType);return typeof d.N=="number"?`array<${c}, ${d.N}>`:d.itemType.kind==="value"?"array":`array<${c}>`}return d.kind}const fe=[Co,Lt,yn,rn,Xr,Ri,si,ne(Tn),oi,Fi,Oe];function we(d,c){if(c.kind==="error")return null;if(d.kind==="array"){if(c.kind==="array"&&(c.N===0&&c.itemType.kind==="value"||!we(d.itemType,c.itemType))&&(typeof d.N!="number"||d.N===c.N))return null}else{if(d.kind===c.kind)return null;if(d.kind==="value"){for(const m of fe)if(!we(m,c))return null}}return`Expected ${te(d)} but found ${te(c)} instead.`}function ze(d,c){return c.some((m=>m.kind===d.kind))}function Ge(d,c){return c.some((m=>m==="null"?d===null:m==="array"?Array.isArray(d):m==="object"?d&&!Array.isArray(d)&&typeof d=="object":m===typeof d))}function et(d,c){return d.kind==="array"&&c.kind==="array"?d.itemType.kind===c.itemType.kind&&typeof d.N=="number":d.kind===c.kind}const Ie=.96422,ht=.82521,_t=4/29,rt=6/29,Bt=3*rt*rt,On=rt*rt*rt,In=Math.PI/180,Ir=180/Math.PI;function Gn(d){return(d%=360)<0&&(d+=360),d}function ur([d,c,m,v]){let S,P;const D=ds((.2225045*(d=Cr(d))+.7168786*(c=Cr(c))+.0606169*(m=Cr(m)))/1);d===c&&c===m?S=P=D:(S=ds((.4360747*d+.3850649*c+.1430804*m)/Ie),P=ds((.0139322*d+.0971045*c+.7141733*m)/ht));const R=116*D-16;return[R<0?0:R,500*(S-D),200*(D-P),v]}function Cr(d){return d<=.04045?d/12.92:Math.pow((d+.055)/1.055,2.4)}function ds(d){return d>On?Math.pow(d,1/3):d/Bt+_t}function ji([d,c,m,v]){let S=(d+16)/116,P=isNaN(c)?S:S+c/500,D=isNaN(m)?S:S-m/200;return S=1*hi(S),P=Ie*hi(P),D=ht*hi(D),[gr(3.1338561*P-1.6168667*S-.4906146*D),gr(-.9787684*P+1.9161415*S+.033454*D),gr(.0719453*P-.2289914*S+1.4052427*D),v]}function gr(d){return(d=d<=.00304?12.92*d:1.055*Math.pow(d,1/2.4)-.055)<0?0:d>1?1:d}function hi(d){return d>rt?d*d*d:Bt*(d-_t)}function an(d){return parseInt(d.padEnd(2,d),16)/255}function ye(d,c){return Je(c?d/100:d,0,1)}function Je(d,c,m){return Math.min(Math.max(c,d),m)}function ft(d){return!d.some(Number.isNaN)}const Wt={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};class $t{constructor(c,m,v,S=1,P=!0){this.r=c,this.g=m,this.b=v,this.a=S,P||(this.r*=S,this.g*=S,this.b*=S,S||this.overwriteGetter("rgb",[c,m,v,S]))}static parse(c){if(c instanceof $t)return c;if(typeof c!="string")return;const m=(function(v){if((v=v.toLowerCase().trim())==="transparent")return[0,0,0,0];const S=Wt[v];if(S){const[D,R,N]=S;return[D/255,R/255,N/255,1]}if(v.startsWith("#")&&/^#(?:[0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/.test(v)){const D=v.length<6?1:2;let R=1;return[an(v.slice(R,R+=D)),an(v.slice(R,R+=D)),an(v.slice(R,R+=D)),an(v.slice(R,R+D)||"ff")]}if(v.startsWith("rgb")){const D=v.match(/^rgba?\(\s*([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(D){const[R,N,V,W,Y,ee,re,he,ue,Ae,Te,nt]=D,Ve=[W||" ",re||" ",Ae].join("");if(Ve==="  "||Ve==="  /"||Ve===",,"||Ve===",,,"){const qe=[V,ee,ue].join(""),pt=qe==="%%%"?100:qe===""?255:0;if(pt){const Dt=[Je(+N/pt,0,1),Je(+Y/pt,0,1),Je(+he/pt,0,1),Te?ye(+Te,nt):1];if(ft(Dt))return Dt}}return}}const P=v.match(/^hsla?\(\s*([\de.+-]+)(?:deg)?(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(P){const[D,R,N,V,W,Y,ee,re,he]=P,ue=[N||" ",W||" ",ee].join("");if(ue==="  "||ue==="  /"||ue===",,"||ue===",,,"){const Ae=[+R,Je(+V,0,100),Je(+Y,0,100),re?ye(+re,he):1];if(ft(Ae))return(function([Te,nt,Ve,qe]){function pt(Dt){const ln=(Dt+Te/30)%12,zn=nt*Math.min(Ve,1-Ve);return Ve-zn*Math.max(-1,Math.min(ln-3,9-ln,1))}return Te=Gn(Te),nt/=100,Ve/=100,[pt(0),pt(8),pt(4),qe]})(Ae)}}})(c);return m?new $t(...m,!1):void 0}get rgb(){const{r:c,g:m,b:v,a:S}=this,P=S||1/0;return this.overwriteGetter("rgb",[c/P,m/P,v/P,S])}get hcl(){return this.overwriteGetter("hcl",(function(c){const[m,v,S,P]=ur(c),D=Math.sqrt(v*v+S*S);return[Math.round(1e4*D)?Gn(Math.atan2(S,v)*Ir):NaN,D,m,P]})(this.rgb))}get lab(){return this.overwriteGetter("lab",ur(this.rgb))}overwriteGetter(c,m){return Object.defineProperty(this,c,{value:m}),m}toString(){const[c,m,v,S]=this.rgb;return`rgba(${[c,m,v].map((P=>Math.round(255*P))).join(",")},${S})`}}$t.black=new $t(0,0,0,1),$t.white=new $t(1,1,1,1),$t.transparent=new $t(0,0,0,0),$t.red=new $t(1,0,0,1);class mn{constructor(c,m,v){this.sensitivity=c?m?"variant":"case":m?"accent":"base",this.locale=v,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(c,m){return this.collator.compare(c,m)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class tr{constructor(c,m,v,S,P){this.text=c,this.image=m,this.scale=v,this.fontStack=S,this.textColor=P}}class rr{constructor(c){this.sections=c}static fromString(c){return new rr([new tr(c,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some((c=>c.text.length!==0||c.image&&c.image.name.length!==0))}static factory(c){return c instanceof rr?c:rr.fromString(c)}toString(){return this.sections.length===0?"":this.sections.map((c=>c.text)).join("")}}class Hn{constructor(c){this.values=c.slice()}static parse(c){if(c instanceof Hn)return c;if(typeof c=="number")return new Hn([c,c,c,c]);if(Array.isArray(c)&&!(c.length<1||c.length>4)){for(const m of c)if(typeof m!="number")return;switch(c.length){case 1:c=[c[0],c[0],c[0],c[0]];break;case 2:c=[c[0],c[1],c[0],c[1]];break;case 3:c=[c[0],c[1],c[2],c[1]]}return new Hn(c)}}toString(){return JSON.stringify(this.values)}}const ps=new Set(["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"]);class Mr{constructor(c){this.values=c.slice()}static parse(c){if(c instanceof Mr)return c;if(Array.isArray(c)&&!(c.length<1)&&c.length%2==0){for(let m=0;m<c.length;m+=2){const v=c[m],S=c[m+1];if(typeof v!="string"||!ps.has(v)||!Array.isArray(S)||S.length!==2||typeof S[0]!="number"||typeof S[1]!="number")return}return new Mr(c)}}toString(){return JSON.stringify(this.values)}}class Ci{constructor(c){this.name=c.name,this.available=c.available}toString(){return this.name}static fromString(c){return c?new Ci({name:c,available:!1}):null}}function Ss(d,c,m,v){return typeof d=="number"&&d>=0&&d<=255&&typeof c=="number"&&c>=0&&c<=255&&typeof m=="number"&&m>=0&&m<=255?v===void 0||typeof v=="number"&&v>=0&&v<=1?null:`Invalid rgba value [${[d,c,m,v].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof v=="number"?[d,c,m,v]:[d,c,m]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function ha(d){if(d===null||typeof d=="string"||typeof d=="boolean"||typeof d=="number"||d instanceof $t||d instanceof mn||d instanceof rr||d instanceof Hn||d instanceof Mr||d instanceof Ci)return!0;if(Array.isArray(d)){for(const c of d)if(!ha(c))return!1;return!0}if(typeof d=="object"){for(const c in d)if(!ha(d[c]))return!1;return!0}return!1}function Rs(d){if(d===null)return Co;if(typeof d=="string")return yn;if(typeof d=="boolean")return rn;if(typeof d=="number")return Lt;if(d instanceof $t)return Xr;if(d instanceof mn)return Ms;if(d instanceof rr)return Ri;if(d instanceof Hn)return oi;if(d instanceof Mr)return Oe;if(d instanceof Ci)return Fi;if(Array.isArray(d)){const c=d.length;let m;for(const v of d){const S=Rs(v);if(m){if(m===S)continue;m=Tn;break}m=S}return ne(m||Tn,c)}return si}function Vu(d){const c=typeof d;return d===null?"":c==="string"||c==="number"||c==="boolean"?String(d):d instanceof $t||d instanceof rr||d instanceof Hn||d instanceof Mr||d instanceof Ci?d.toString():JSON.stringify(d)}class ks{constructor(c,m){this.type=c,this.value=m}static parse(c,m){if(c.length!==2)return m.error(`'literal' expression requires exactly one argument, but found ${c.length-1} instead.`);if(!ha(c[1]))return m.error("invalid value");const v=c[1];let S=Rs(v);const P=m.expectedType;return S.kind!=="array"||S.N!==0||!P||P.kind!=="array"||typeof P.N=="number"&&P.N!==0||(S=P),new ks(S,v)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}class Li{constructor(c){this.name="ExpressionEvaluationError",this.message=c}toJSON(){return this.message}}const kh={string:yn,number:Lt,boolean:rn,object:si};class hu{constructor(c,m){this.type=c,this.args=m}static parse(c,m){if(c.length<2)return m.error("Expected at least one argument.");let v,S=1;const P=c[0];if(P==="array"){let R,N;if(c.length>2){const V=c[1];if(typeof V!="string"||!(V in kh)||V==="object")return m.error('The item type argument of "array" must be one of string, number, boolean',1);R=kh[V],S++}else R=Tn;if(c.length>3){if(c[2]!==null&&(typeof c[2]!="number"||c[2]<0||c[2]!==Math.floor(c[2])))return m.error('The length argument to "array" must be a positive integer literal',2);N=c[2],S++}v=ne(R,N)}else{if(!kh[P])throw new Error(`Types doesn't contain name = ${P}`);v=kh[P]}const D=[];for(;S<c.length;S++){const R=m.parse(c[S],S,Tn);if(!R)return null;D.push(R)}return new hu(v,D)}evaluate(c){for(let m=0;m<this.args.length;m++){const v=this.args[m].evaluate(c);if(!we(this.type,Rs(v)))return v;if(m===this.args.length-1)throw new Li(`Expected value to be of type ${te(this.type)}, but found ${te(Rs(v))} instead.`)}throw new Error}eachChild(c){this.args.forEach(c)}outputDefined(){return this.args.every((c=>c.outputDefined()))}}const I0={"to-boolean":rn,"to-color":Xr,"to-number":Lt,"to-string":yn};class ja{constructor(c,m){this.type=c,this.args=m}static parse(c,m){if(c.length<2)return m.error("Expected at least one argument.");const v=c[0];if(!I0[v])throw new Error(`Can't parse ${v} as it is not part of the known types`);if((v==="to-boolean"||v==="to-string")&&c.length!==2)return m.error("Expected one argument.");const S=I0[v],P=[];for(let D=1;D<c.length;D++){const R=m.parse(c[D],D,Tn);if(!R)return null;P.push(R)}return new ja(S,P)}evaluate(c){switch(this.type.kind){case"boolean":return!!this.args[0].evaluate(c);case"color":{let m,v;for(const S of this.args){if(m=S.evaluate(c),v=null,m instanceof $t)return m;if(typeof m=="string"){const P=c.parseColor(m);if(P)return P}else if(Array.isArray(m)&&(v=m.length<3||m.length>4?`Invalid rbga value ${JSON.stringify(m)}: expected an array containing either three or four numeric values.`:Ss(m[0],m[1],m[2],m[3]),!v))return new $t(m[0]/255,m[1]/255,m[2]/255,m[3])}throw new Li(v||`Could not parse color from value '${typeof m=="string"?m:JSON.stringify(m)}'`)}case"padding":{let m;for(const v of this.args){m=v.evaluate(c);const S=Hn.parse(m);if(S)return S}throw new Li(`Could not parse padding from value '${typeof m=="string"?m:JSON.stringify(m)}'`)}case"variableAnchorOffsetCollection":{let m;for(const v of this.args){m=v.evaluate(c);const S=Mr.parse(m);if(S)return S}throw new Li(`Could not parse variableAnchorOffsetCollection from value '${typeof m=="string"?m:JSON.stringify(m)}'`)}case"number":{let m=null;for(const v of this.args){if(m=v.evaluate(c),m===null)return 0;const S=Number(m);if(!isNaN(S))return S}throw new Li(`Could not convert ${JSON.stringify(m)} to number.`)}case"formatted":return rr.fromString(Vu(this.args[0].evaluate(c)));case"resolvedImage":return Ci.fromString(Vu(this.args[0].evaluate(c)));default:return Vu(this.args[0].evaluate(c))}}eachChild(c){this.args.forEach(c)}outputDefined(){return this.args.every((c=>c.outputDefined()))}}const O_=["Unknown","Point","LineString","Polygon"];class M0{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?O_[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(c){let m=this._parseColorCache[c];return m||(m=this._parseColorCache[c]=$t.parse(c)),m}}class Ch{constructor(c,m,v=[],S,P=new js,D=[]){this.registry=c,this.path=v,this.key=v.map((R=>`[${R}]`)).join(""),this.scope=P,this.errors=D,this.expectedType=S,this._isConstant=m}parse(c,m,v,S,P={}){return m?this.concat(m,v,S)._parse(c,P):this._parse(c,P)}_parse(c,m){function v(S,P,D){return D==="assert"?new hu(P,[S]):D==="coerce"?new ja(P,[S]):S}if(c!==null&&typeof c!="string"&&typeof c!="boolean"&&typeof c!="number"||(c=["literal",c]),Array.isArray(c)){if(c.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const S=c[0];if(typeof S!="string")return this.error(`Expression name must be a string, but found ${typeof S} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const P=this.registry[S];if(P){let D=P.parse(c,this);if(!D)return null;if(this.expectedType){const R=this.expectedType,N=D.type;if(R.kind!=="string"&&R.kind!=="number"&&R.kind!=="boolean"&&R.kind!=="object"&&R.kind!=="array"||N.kind!=="value")if(R.kind!=="color"&&R.kind!=="formatted"&&R.kind!=="resolvedImage"||N.kind!=="value"&&N.kind!=="string")if(R.kind!=="padding"||N.kind!=="value"&&N.kind!=="number"&&N.kind!=="array")if(R.kind!=="variableAnchorOffsetCollection"||N.kind!=="value"&&N.kind!=="array"){if(this.checkSubtype(R,N))return null}else D=v(D,R,m.typeAnnotation||"coerce");else D=v(D,R,m.typeAnnotation||"coerce");else D=v(D,R,m.typeAnnotation||"coerce");else D=v(D,R,m.typeAnnotation||"assert")}if(!(D instanceof ks)&&D.type.kind!=="resolvedImage"&&this._isConstant(D)){const R=new M0;try{D=new ks(D.type,D.evaluate(R))}catch(N){return this.error(N.message),null}}return D}return this.error(`Unknown expression "${S}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(c===void 0?"'undefined' value invalid. Use null instead.":typeof c=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof c} instead.`)}concat(c,m,v){const S=typeof c=="number"?this.path.concat(c):this.path,P=v?this.scope.concat(v):this.scope;return new Ch(this.registry,this._isConstant,S,m||null,P,this.errors)}error(c,...m){const v=`${this.key}${m.map((S=>`[${S}]`)).join("")}`;this.errors.push(new ki(v,c))}checkSubtype(c,m){const v=we(c,m);return v&&this.error(v),v}}class Fc{constructor(c,m){this.type=m.type,this.bindings=[].concat(c),this.result=m}evaluate(c){return this.result.evaluate(c)}eachChild(c){for(const m of this.bindings)c(m[1]);c(this.result)}static parse(c,m){if(c.length<4)return m.error(`Expected at least 3 arguments, but found ${c.length-1} instead.`);const v=[];for(let P=1;P<c.length-1;P+=2){const D=c[P];if(typeof D!="string")return m.error(`Expected string, but found ${typeof D} instead.`,P);if(/[^a-zA-Z0-9_]/.test(D))return m.error("Variable names must contain only alphanumeric characters or '_'.",P);const R=m.parse(c[P+1],P+1);if(!R)return null;v.push([D,R])}const S=m.parse(c[c.length-1],c.length-1,m.expectedType,v);return S?new Fc(v,S):null}outputDefined(){return this.result.outputDefined()}}class ai{constructor(c,m){this.type=m.type,this.name=c,this.boundExpression=m}static parse(c,m){if(c.length!==2||typeof c[1]!="string")return m.error("'var' expression requires exactly one string literal argument.");const v=c[1];return m.scope.has(v)?new ai(v,m.scope.get(v)):m.error(`Unknown variable "${v}". Make sure "${v}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(c){return this.boundExpression.evaluate(c)}eachChild(){}outputDefined(){return!1}}class P1{constructor(c,m,v){this.type=c,this.index=m,this.input=v}static parse(c,m){if(c.length!==3)return m.error(`Expected 2 arguments, but found ${c.length-1} instead.`);const v=m.parse(c[1],1,Lt),S=m.parse(c[2],2,ne(m.expectedType||Tn));return v&&S?new P1(S.type.itemType,v,S):null}evaluate(c){const m=this.index.evaluate(c),v=this.input.evaluate(c);if(m<0)throw new Li(`Array index out of bounds: ${m} < 0.`);if(m>=v.length)throw new Li(`Array index out of bounds: ${m} > ${v.length-1}.`);if(m!==Math.floor(m))throw new Li(`Array index must be an integer, but found ${m} instead.`);return v[m]}eachChild(c){c(this.index),c(this.input)}outputDefined(){return!1}}class R0{constructor(c,m){this.type=rn,this.needle=c,this.haystack=m}static parse(c,m){if(c.length!==3)return m.error(`Expected 2 arguments, but found ${c.length-1} instead.`);const v=m.parse(c[1],1,Tn),S=m.parse(c[2],2,Tn);return v&&S?ze(v.type,[rn,yn,Lt,Co,Tn])?new R0(v,S):m.error(`Expected first argument to be of type boolean, string, number or null, but found ${te(v.type)} instead`):null}evaluate(c){const m=this.needle.evaluate(c),v=this.haystack.evaluate(c);if(!v)return!1;if(!Ge(m,["boolean","string","number","null"]))throw new Li(`Expected first argument to be of type boolean, string, number or null, but found ${te(Rs(m))} instead.`);if(!Ge(v,["string","array"]))throw new Li(`Expected second argument to be of type array or string, but found ${te(Rs(v))} instead.`);return v.indexOf(m)>=0}eachChild(c){c(this.needle),c(this.haystack)}outputDefined(){return!0}}class Ah{constructor(c,m,v){this.type=Lt,this.needle=c,this.haystack=m,this.fromIndex=v}static parse(c,m){if(c.length<=2||c.length>=5)return m.error(`Expected 3 or 4 arguments, but found ${c.length-1} instead.`);const v=m.parse(c[1],1,Tn),S=m.parse(c[2],2,Tn);if(!v||!S)return null;if(!ze(v.type,[rn,yn,Lt,Co,Tn]))return m.error(`Expected first argument to be of type boolean, string, number or null, but found ${te(v.type)} instead`);if(c.length===4){const P=m.parse(c[3],3,Lt);return P?new Ah(v,S,P):null}return new Ah(v,S)}evaluate(c){const m=this.needle.evaluate(c),v=this.haystack.evaluate(c);if(!Ge(m,["boolean","string","number","null"]))throw new Li(`Expected first argument to be of type boolean, string, number or null, but found ${te(Rs(m))} instead.`);let S;if(this.fromIndex&&(S=this.fromIndex.evaluate(c)),Ge(v,["string"])){const P=v.indexOf(m,S);return P===-1?-1:[...v.slice(0,P)].length}if(Ge(v,["array"]))return v.indexOf(m,S);throw new Li(`Expected second argument to be of type array or string, but found ${te(Rs(v))} instead.`)}eachChild(c){c(this.needle),c(this.haystack),this.fromIndex&&c(this.fromIndex)}outputDefined(){return!1}}class Fm{constructor(c,m,v,S,P,D){this.inputType=c,this.type=m,this.input=v,this.cases=S,this.outputs=P,this.otherwise=D}static parse(c,m){if(c.length<5)return m.error(`Expected at least 4 arguments, but found only ${c.length-1}.`);if(c.length%2!=1)return m.error("Expected an even number of arguments.");let v,S;m.expectedType&&m.expectedType.kind!=="value"&&(S=m.expectedType);const P={},D=[];for(let V=2;V<c.length-1;V+=2){let W=c[V];const Y=c[V+1];Array.isArray(W)||(W=[W]);const ee=m.concat(V);if(W.length===0)return ee.error("Expected at least one branch label.");for(const he of W){if(typeof he!="number"&&typeof he!="string")return ee.error("Branch labels must be numbers or strings.");if(typeof he=="number"&&Math.abs(he)>Number.MAX_SAFE_INTEGER)return ee.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof he=="number"&&Math.floor(he)!==he)return ee.error("Numeric branch labels must be integer values.");if(v){if(ee.checkSubtype(v,Rs(he)))return null}else v=Rs(he);if(P[String(he)]!==void 0)return ee.error("Branch labels must be unique.");P[String(he)]=D.length}const re=m.parse(Y,V,S);if(!re)return null;S=S||re.type,D.push(re)}const R=m.parse(c[1],1,Tn);if(!R)return null;const N=m.parse(c[c.length-1],c.length-1,S);return N?R.type.kind!=="value"&&m.concat(1).checkSubtype(v,R.type)?null:new Fm(v,S,R,P,D,N):null}evaluate(c){const m=this.input.evaluate(c);return(Rs(m)===this.inputType&&this.outputs[this.cases[m]]||this.otherwise).evaluate(c)}eachChild(c){c(this.input),this.outputs.forEach(c),c(this.otherwise)}outputDefined(){return this.outputs.every((c=>c.outputDefined()))&&this.otherwise.outputDefined()}}class Lc{constructor(c,m,v){this.type=c,this.branches=m,this.otherwise=v}static parse(c,m){if(c.length<4)return m.error(`Expected at least 3 arguments, but found only ${c.length-1}.`);if(c.length%2!=0)return m.error("Expected an odd number of arguments.");let v;m.expectedType&&m.expectedType.kind!=="value"&&(v=m.expectedType);const S=[];for(let D=1;D<c.length-1;D+=2){const R=m.parse(c[D],D,rn);if(!R)return null;const N=m.parse(c[D+1],D+1,v);if(!N)return null;S.push([R,N]),v=v||N.type}const P=m.parse(c[c.length-1],c.length-1,v);if(!P)return null;if(!v)throw new Error("Can't infer output type");return new Lc(v,S,P)}evaluate(c){for(const[m,v]of this.branches)if(m.evaluate(c))return v.evaluate(c);return this.otherwise.evaluate(c)}eachChild(c){for(const[m,v]of this.branches)c(m),c(v);c(this.otherwise)}outputDefined(){return this.branches.every((([c,m])=>m.outputDefined()))&&this.otherwise.outputDefined()}}class Ud{constructor(c,m,v,S){this.type=c,this.input=m,this.beginIndex=v,this.endIndex=S}static parse(c,m){if(c.length<=2||c.length>=5)return m.error(`Expected 3 or 4 arguments, but found ${c.length-1} instead.`);const v=m.parse(c[1],1,Tn),S=m.parse(c[2],2,Lt);if(!v||!S)return null;if(!ze(v.type,[ne(Tn),yn,Tn]))return m.error(`Expected first argument to be of type array or string, but found ${te(v.type)} instead`);if(c.length===4){const P=m.parse(c[3],3,Lt);return P?new Ud(v.type,v,S,P):null}return new Ud(v.type,v,S)}evaluate(c){const m=this.input.evaluate(c),v=this.beginIndex.evaluate(c);let S;if(this.endIndex&&(S=this.endIndex.evaluate(c)),Ge(m,["string"]))return[...m].slice(v,S).join("");if(Ge(m,["array"]))return m.slice(v,S);throw new Li(`Expected first argument to be of type array or string, but found ${te(Rs(m))} instead.`)}eachChild(c){c(this.input),c(this.beginIndex),this.endIndex&&c(this.endIndex)}outputDefined(){return!1}}function Lm(d,c){const m=d.length-1;let v,S,P=0,D=m,R=0;for(;P<=D;)if(R=Math.floor((P+D)/2),v=d[R],S=d[R+1],v<=c){if(R===m||c<S)return R;P=R+1}else{if(!(v>c))throw new Li("Input is not a number.");D=R-1}return 0}class Vd{constructor(c,m,v){this.type=c,this.input=m,this.labels=[],this.outputs=[];for(const[S,P]of v)this.labels.push(S),this.outputs.push(P)}static parse(c,m){if(c.length-1<4)return m.error(`Expected at least 4 arguments, but found only ${c.length-1}.`);if((c.length-1)%2!=0)return m.error("Expected an even number of arguments.");const v=m.parse(c[1],1,Lt);if(!v)return null;const S=[];let P=null;m.expectedType&&m.expectedType.kind!=="value"&&(P=m.expectedType);for(let D=1;D<c.length;D+=2){const R=D===1?-1/0:c[D],N=c[D+1],V=D,W=D+1;if(typeof R!="number")return m.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',V);if(S.length&&S[S.length-1][0]>=R)return m.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',V);const Y=m.parse(N,W,P);if(!Y)return null;P=P||Y.type,S.push([R,Y])}return new Vd(P,v,S)}evaluate(c){const m=this.labels,v=this.outputs;if(m.length===1)return v[0].evaluate(c);const S=this.input.evaluate(c);if(S<=m[0])return v[0].evaluate(c);const P=m.length;return S>=m[P-1]?v[P-1].evaluate(c):v[Lm(m,S)].evaluate(c)}eachChild(c){c(this.input);for(const m of this.outputs)c(m)}outputDefined(){return this.outputs.every((c=>c.outputDefined()))}}function D1(d){return d&&d.__esModule&&Object.prototype.hasOwnProperty.call(d,"default")?d.default:d}var S_=I1;function I1(d,c,m,v){this.cx=3*d,this.bx=3*(m-d)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*c,this.by=3*(v-c)-this.cy,this.ay=1-this.cy-this.by,this.p1x=d,this.p1y=c,this.p2x=m,this.p2y=v}I1.prototype={sampleCurveX:function(d){return((this.ax*d+this.bx)*d+this.cx)*d},sampleCurveY:function(d){return((this.ay*d+this.by)*d+this.cy)*d},sampleCurveDerivativeX:function(d){return(3*this.ax*d+2*this.bx)*d+this.cx},solveCurveX:function(d,c){if(c===void 0&&(c=1e-6),d<0)return 0;if(d>1)return 1;for(var m=d,v=0;v<8;v++){var S=this.sampleCurveX(m)-d;if(Math.abs(S)<c)return m;var P=this.sampleCurveDerivativeX(m);if(Math.abs(P)<1e-6)break;m-=S/P}var D=0,R=1;for(m=d,v=0;v<20&&(S=this.sampleCurveX(m),!(Math.abs(S-d)<c));v++)d>S?D=m:R=m,m=.5*(R-D)+D;return m},solve:function(d,c){return this.sampleCurveY(this.solveCurveX(d,c))}};var k_=D1(S_);function Pf(d,c,m){return d+m*(c-d)}function $m(d,c,m){return d.map(((v,S)=>Pf(v,c[S],m)))}const Ua={number:Pf,color:function(d,c,m,v="rgb"){switch(v){case"rgb":{const[S,P,D,R]=$m(d.rgb,c.rgb,m);return new $t(S,P,D,R,!1)}case"hcl":{const[S,P,D,R]=d.hcl,[N,V,W,Y]=c.hcl;let ee,re;if(isNaN(S)||isNaN(N))isNaN(S)?isNaN(N)?ee=NaN:(ee=N,D!==1&&D!==0||(re=V)):(ee=S,W!==1&&W!==0||(re=P));else{let nt=N-S;N>S&&nt>180?nt-=360:N<S&&S-N>180&&(nt+=360),ee=S+m*nt}const[he,ue,Ae,Te]=(function([nt,Ve,qe,pt]){return nt=isNaN(nt)?0:nt*In,ji([qe,Math.cos(nt)*Ve,Math.sin(nt)*Ve,pt])})([ee,re??Pf(P,V,m),Pf(D,W,m),Pf(R,Y,m)]);return new $t(he,ue,Ae,Te,!1)}case"lab":{const[S,P,D,R]=ji($m(d.lab,c.lab,m));return new $t(S,P,D,R,!1)}}},array:$m,padding:function(d,c,m){return new Hn($m(d.values,c.values,m))},variableAnchorOffsetCollection:function(d,c,m){const v=d.values,S=c.values;if(v.length!==S.length)throw new Li(`Cannot interpolate values of different length. from: ${d.toString()}, to: ${c.toString()}`);const P=[];for(let D=0;D<v.length;D+=2){if(v[D]!==S[D])throw new Li(`Cannot interpolate values containing mismatched anchors. from[${D}]: ${v[D]}, to[${D}]: ${S[D]}`);P.push(v[D]);const[R,N]=v[D+1],[V,W]=S[D+1];P.push([Pf(R,V,m),Pf(N,W,m)])}return new Mr(P)}};class Ea{constructor(c,m,v,S,P){this.type=c,this.operator=m,this.interpolation=v,this.input=S,this.labels=[],this.outputs=[];for(const[D,R]of P)this.labels.push(D),this.outputs.push(R)}static interpolationFactor(c,m,v,S){let P=0;if(c.name==="exponential")P=F0(m,c.base,v,S);else if(c.name==="linear")P=F0(m,1,v,S);else if(c.name==="cubic-bezier"){const D=c.controlPoints;P=new k_(D[0],D[1],D[2],D[3]).solve(F0(m,1,v,S))}return P}static parse(c,m){let[v,S,P,...D]=c;if(!Array.isArray(S)||S.length===0)return m.error("Expected an interpolation type expression.",1);if(S[0]==="linear")S={name:"linear"};else if(S[0]==="exponential"){const V=S[1];if(typeof V!="number")return m.error("Exponential interpolation requires a numeric base.",1,1);S={name:"exponential",base:V}}else{if(S[0]!=="cubic-bezier")return m.error(`Unknown interpolation type ${String(S[0])}`,1,0);{const V=S.slice(1);if(V.length!==4||V.some((W=>typeof W!="number"||W<0||W>1)))return m.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);S={name:"cubic-bezier",controlPoints:V}}}if(c.length-1<4)return m.error(`Expected at least 4 arguments, but found only ${c.length-1}.`);if((c.length-1)%2!=0)return m.error("Expected an even number of arguments.");if(P=m.parse(P,2,Lt),!P)return null;const R=[];let N=null;v==="interpolate-hcl"||v==="interpolate-lab"?N=Xr:m.expectedType&&m.expectedType.kind!=="value"&&(N=m.expectedType);for(let V=0;V<D.length;V+=2){const W=D[V],Y=D[V+1],ee=V+3,re=V+4;if(typeof W!="number")return m.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',ee);if(R.length&&R[R.length-1][0]>=W)return m.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',ee);const he=m.parse(Y,re,N);if(!he)return null;N=N||he.type,R.push([W,he])}return et(N,Lt)||et(N,Xr)||et(N,oi)||et(N,Oe)||et(N,ne(Lt))?new Ea(N,v,S,P,R):m.error(`Type ${te(N)} is not interpolatable.`)}evaluate(c){const m=this.labels,v=this.outputs;if(m.length===1)return v[0].evaluate(c);const S=this.input.evaluate(c);if(S<=m[0])return v[0].evaluate(c);const P=m.length;if(S>=m[P-1])return v[P-1].evaluate(c);const D=Lm(m,S),R=Ea.interpolationFactor(this.interpolation,S,m[D],m[D+1]),N=v[D].evaluate(c),V=v[D+1].evaluate(c);switch(this.operator){case"interpolate":return Ua[this.type.kind](N,V,R);case"interpolate-hcl":return Ua.color(N,V,R,"hcl");case"interpolate-lab":return Ua.color(N,V,R,"lab")}}eachChild(c){c(this.input);for(const m of this.outputs)c(m)}outputDefined(){return this.outputs.every((c=>c.outputDefined()))}}function F0(d,c,m,v){const S=v-m,P=d-m;return S===0?0:c===1?P/S:(Math.pow(c,P)-1)/(Math.pow(c,S)-1)}class L0{constructor(c,m){this.type=c,this.args=m}static parse(c,m){if(c.length<2)return m.error("Expectected at least one argument.");let v=null;const S=m.expectedType;S&&S.kind!=="value"&&(v=S);const P=[];for(const R of c.slice(1)){const N=m.parse(R,1+P.length,v,void 0,{typeAnnotation:"omit"});if(!N)return null;v=v||N.type,P.push(N)}if(!v)throw new Error("No output type");const D=S&&P.some((R=>we(S,R.type)));return new L0(D?Tn:v,P)}evaluate(c){let m,v=null,S=0;for(const P of this.args)if(S++,v=P.evaluate(c),v&&v instanceof Ci&&!v.available&&(m||(m=v.name),v=null,S===this.args.length&&(v=m)),v!==null)break;return v}eachChild(c){this.args.forEach(c)}outputDefined(){return this.args.every((c=>c.outputDefined()))}}function $0(d,c){return d==="=="||d==="!="?c.kind==="boolean"||c.kind==="string"||c.kind==="number"||c.kind==="null"||c.kind==="value":c.kind==="string"||c.kind==="number"||c.kind==="value"}function C_(d,c,m,v){return v.compare(c,m)===0}function Eh(d,c,m){const v=d!=="=="&&d!=="!=";return class Wue{constructor(P,D,R){this.type=rn,this.lhs=P,this.rhs=D,this.collator=R,this.hasUntypedArgument=P.type.kind==="value"||D.type.kind==="value"}static parse(P,D){if(P.length!==3&&P.length!==4)return D.error("Expected two or three arguments.");const R=P[0];let N=D.parse(P[1],1,Tn);if(!N)return null;if(!$0(R,N.type))return D.concat(1).error(`"${R}" comparisons are not supported for type '${te(N.type)}'.`);let V=D.parse(P[2],2,Tn);if(!V)return null;if(!$0(R,V.type))return D.concat(2).error(`"${R}" comparisons are not supported for type '${te(V.type)}'.`);if(N.type.kind!==V.type.kind&&N.type.kind!=="value"&&V.type.kind!=="value")return D.error(`Cannot compare types '${te(N.type)}' and '${te(V.type)}'.`);v&&(N.type.kind==="value"&&V.type.kind!=="value"?N=new hu(V.type,[N]):N.type.kind!=="value"&&V.type.kind==="value"&&(V=new hu(N.type,[V])));let W=null;if(P.length===4){if(N.type.kind!=="string"&&V.type.kind!=="string"&&N.type.kind!=="value"&&V.type.kind!=="value")return D.error("Cannot use collator to compare non-string types.");if(W=D.parse(P[3],3,Ms),!W)return null}return new Wue(N,V,W)}evaluate(P){const D=this.lhs.evaluate(P),R=this.rhs.evaluate(P);if(v&&this.hasUntypedArgument){const N=Rs(D),V=Rs(R);if(N.kind!==V.kind||N.kind!=="string"&&N.kind!=="number")throw new Li(`Expected arguments for "${d}" to be (string, string) or (number, number), but found (${N.kind}, ${V.kind}) instead.`)}if(this.collator&&!v&&this.hasUntypedArgument){const N=Rs(D),V=Rs(R);if(N.kind!=="string"||V.kind!=="string")return c(P,D,R)}return this.collator?m(P,D,R,this.collator.evaluate(P)):c(P,D,R)}eachChild(P){P(this.lhs),P(this.rhs),this.collator&&P(this.collator)}outputDefined(){return!0}}}const SO=Eh("==",(function(d,c,m){return c===m}),C_),A_=Eh("!=",(function(d,c,m){return c!==m}),(function(d,c,m,v){return!C_(0,c,m,v)})),E_=Eh("<",(function(d,c,m){return c<m}),(function(d,c,m,v){return v.compare(c,m)<0})),kO=Eh(">",(function(d,c,m){return c>m}),(function(d,c,m,v){return v.compare(c,m)>0})),CO=Eh("<=",(function(d,c,m){return c<=m}),(function(d,c,m,v){return v.compare(c,m)<=0})),ms=Eh(">=",(function(d,c,m){return c>=m}),(function(d,c,m,v){return v.compare(c,m)>=0}));class $i{constructor(c,m,v){this.type=Ms,this.locale=v,this.caseSensitive=c,this.diacriticSensitive=m}static parse(c,m){if(c.length!==2)return m.error("Expected one argument.");const v=c[1];if(typeof v!="object"||Array.isArray(v))return m.error("Collator options argument must be an object.");const S=m.parse(v["case-sensitive"]!==void 0&&v["case-sensitive"],1,rn);if(!S)return null;const P=m.parse(v["diacritic-sensitive"]!==void 0&&v["diacritic-sensitive"],1,rn);if(!P)return null;let D=null;return v.locale&&(D=m.parse(v.locale,1,yn),!D)?null:new $i(S,P,D)}evaluate(c){return new mn(this.caseSensitive.evaluate(c),this.diacriticSensitive.evaluate(c),this.locale?this.locale.evaluate(c):null)}eachChild(c){c(this.caseSensitive),c(this.diacriticSensitive),this.locale&&c(this.locale)}outputDefined(){return!1}}class M1{constructor(c,m,v,S,P){this.type=yn,this.number=c,this.locale=m,this.currency=v,this.minFractionDigits=S,this.maxFractionDigits=P}static parse(c,m){if(c.length!==3)return m.error("Expected two arguments.");const v=m.parse(c[1],1,Lt);if(!v)return null;const S=c[2];if(typeof S!="object"||Array.isArray(S))return m.error("NumberFormat options argument must be an object.");let P=null;if(S.locale&&(P=m.parse(S.locale,1,yn),!P))return null;let D=null;if(S.currency&&(D=m.parse(S.currency,1,yn),!D))return null;let R=null;if(S["min-fraction-digits"]&&(R=m.parse(S["min-fraction-digits"],1,Lt),!R))return null;let N=null;return S["max-fraction-digits"]&&(N=m.parse(S["max-fraction-digits"],1,Lt),!N)?null:new M1(v,P,D,R,N)}evaluate(c){return new Intl.NumberFormat(this.locale?this.locale.evaluate(c):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(c):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(c):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(c):void 0}).format(this.number.evaluate(c))}eachChild(c){c(this.number),this.locale&&c(this.locale),this.currency&&c(this.currency),this.minFractionDigits&&c(this.minFractionDigits),this.maxFractionDigits&&c(this.maxFractionDigits)}outputDefined(){return!1}}class B0{constructor(c){this.type=Ri,this.sections=c}static parse(c,m){if(c.length<2)return m.error("Expected at least one argument.");const v=c[1];if(!Array.isArray(v)&&typeof v=="object")return m.error("First argument must be an image or text section.");const S=[];let P=!1;for(let D=1;D<=c.length-1;++D){const R=c[D];if(P&&typeof R=="object"&&!Array.isArray(R)){P=!1;let N=null;if(R["font-scale"]&&(N=m.parse(R["font-scale"],1,Lt),!N))return null;let V=null;if(R["text-font"]&&(V=m.parse(R["text-font"],1,ne(yn)),!V))return null;let W=null;if(R["text-color"]&&(W=m.parse(R["text-color"],1,Xr),!W))return null;const Y=S[S.length-1];Y.scale=N,Y.font=V,Y.textColor=W}else{const N=m.parse(c[D],1,Tn);if(!N)return null;const V=N.type.kind;if(V!=="string"&&V!=="value"&&V!=="null"&&V!=="resolvedImage")return m.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");P=!0,S.push({content:N,scale:null,font:null,textColor:null})}}return new B0(S)}evaluate(c){return new rr(this.sections.map((m=>{const v=m.content.evaluate(c);return Rs(v)===Fi?new tr("",v,null,null,null):new tr(Vu(v),null,m.scale?m.scale.evaluate(c):null,m.font?m.font.evaluate(c).join(","):null,m.textColor?m.textColor.evaluate(c):null)})))}eachChild(c){for(const m of this.sections)c(m.content),m.scale&&c(m.scale),m.font&&c(m.font),m.textColor&&c(m.textColor)}outputDefined(){return!1}}class R1{constructor(c){this.type=Fi,this.input=c}static parse(c,m){if(c.length!==2)return m.error("Expected two arguments.");const v=m.parse(c[1],1,yn);return v?new R1(v):m.error("No image name provided.")}evaluate(c){const m=this.input.evaluate(c),v=Ci.fromString(m);return v&&c.availableImages&&(v.available=c.availableImages.indexOf(m)>-1),v}eachChild(c){c(this.input)}outputDefined(){return!1}}class F1{constructor(c){this.type=Lt,this.input=c}static parse(c,m){if(c.length!==2)return m.error(`Expected 1 argument, but found ${c.length-1} instead.`);const v=m.parse(c[1],1);return v?v.type.kind!=="array"&&v.type.kind!=="string"&&v.type.kind!=="value"?m.error(`Expected argument of type string or array, but found ${te(v.type)} instead.`):new F1(v):null}evaluate(c){const m=this.input.evaluate(c);if(typeof m=="string")return[...m].length;if(Array.isArray(m))return m.length;throw new Li(`Expected value to be of type string or array, but found ${te(Rs(m))} instead.`)}eachChild(c){c(this.input)}outputDefined(){return!1}}const qu=8192;function AO(d,c){const m=(180+d[0])/360,v=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+d[1]*Math.PI/360)))/360,S=Math.pow(2,c.z);return[Math.round(m*S*qu),Math.round(v*S*qu)]}function N0(d,c){const m=Math.pow(2,c.z);return[(S=(d[0]/qu+c.x)/m,360*S-180),(v=(d[1]/qu+c.y)/m,360/Math.PI*Math.atan(Math.exp((180-360*v)*Math.PI/180))-90)];var v,S}function Df(d,c){d[0]=Math.min(d[0],c[0]),d[1]=Math.min(d[1],c[1]),d[2]=Math.max(d[2],c[0]),d[3]=Math.max(d[3],c[1])}function Fs(d,c){return!(d[0]<=c[0]||d[2]>=c[2]||d[1]<=c[1]||d[3]>=c[3])}function fi(d,c,m){const v=d[0]-c[0],S=d[1]-c[1],P=d[0]-m[0],D=d[1]-m[1];return v*D-P*S==0&&v*P<=0&&S*D<=0}function Zu(d,c,m,v){return(S=[v[0]-m[0],v[1]-m[1]])[0]*(P=[c[0]-d[0],c[1]-d[1]])[1]-S[1]*P[0]!=0&&!(!$1(d,c,m,v)||!$1(m,v,d,c));var S,P}function T_(d,c,m){for(const v of m)for(let S=0;S<v.length-1;++S)if(Zu(d,c,v[S],v[S+1]))return!0;return!1}function Th(d,c,m=!1){let v=!1;for(const R of c)for(let N=0;N<R.length-1;N++){if(fi(d,R[N],R[N+1]))return m;(P=R[N])[1]>(S=d)[1]!=(D=R[N+1])[1]>S[1]&&S[0]<(D[0]-P[0])*(S[1]-P[1])/(D[1]-P[1])+P[0]&&(v=!v)}var S,P,D;return v}function Ol(d,c){for(const m of c)if(Th(d,m))return!0;return!1}function L1(d,c){for(const m of d)if(!Th(m,c))return!1;for(let m=0;m<d.length-1;++m)if(T_(d[m],d[m+1],c))return!1;return!0}function P_(d,c){for(const m of c)if(L1(d,m))return!0;return!1}function $1(d,c,m,v){const S=v[0]-m[0],P=v[1]-m[1],D=(d[0]-m[0])*P-S*(d[1]-m[1]),R=(c[0]-m[0])*P-S*(c[1]-m[1]);return D>0&&R<0||D<0&&R>0}function z0(d,c,m){const v=[];for(let S=0;S<d.length;S++){const P=[];for(let D=0;D<d[S].length;D++){const R=AO(d[S][D],m);Df(c,R),P.push(R)}v.push(P)}return v}function B1(d,c,m){const v=[];for(let S=0;S<d.length;S++){const P=z0(d[S],c,m);v.push(P)}return v}function N1(d,c,m,v){if(d[0]<m[0]||d[0]>m[2]){const S=.5*v;let P=d[0]-m[0]>S?-v:m[0]-d[0]>S?v:0;P===0&&(P=d[0]-m[2]>S?-v:m[2]-d[0]>S?v:0),d[0]+=P}Df(c,d)}function Va(d,c,m,v){const S=Math.pow(2,v.z)*qu,P=[v.x*qu,v.y*qu],D=[];for(const R of d)for(const N of R){const V=[N.x+P[0],N.y+P[1]];N1(V,c,m,S),D.push(V)}return D}function D_(d,c,m,v){const S=Math.pow(2,v.z)*qu,P=[v.x*qu,v.y*qu],D=[];for(const N of d){const V=[];for(const W of N){const Y=[W.x+P[0],W.y+P[1]];Df(c,Y),V.push(Y)}D.push(V)}if(c[2]-c[0]<=S/2){(R=c)[0]=R[1]=1/0,R[2]=R[3]=-1/0;for(const N of D)for(const V of N)N1(V,c,m,S)}var R;return D}class zo{constructor(c,m){this.type=rn,this.geojson=c,this.geometries=m}static parse(c,m){if(c.length!==2)return m.error(`'within' expression requires exactly one argument, but found ${c.length-1} instead.`);if(ha(c[1])){const v=c[1];if(v.type==="FeatureCollection"){const S=[];for(const P of v.features){const{type:D,coordinates:R}=P.geometry;D==="Polygon"&&S.push(R),D==="MultiPolygon"&&S.push(...R)}if(S.length)return new zo(v,{type:"MultiPolygon",coordinates:S})}else if(v.type==="Feature"){const S=v.geometry.type;if(S==="Polygon"||S==="MultiPolygon")return new zo(v,v.geometry)}else if(v.type==="Polygon"||v.type==="MultiPolygon")return new zo(v,v)}return m.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(c){if(c.geometry()!=null&&c.canonicalID()!=null){if(c.geometryType()==="Point")return(function(m,v){const S=[1/0,1/0,-1/0,-1/0],P=[1/0,1/0,-1/0,-1/0],D=m.canonicalID();if(v.type==="Polygon"){const R=z0(v.coordinates,P,D),N=Va(m.geometry(),S,P,D);if(!Fs(S,P))return!1;for(const V of N)if(!Th(V,R))return!1}if(v.type==="MultiPolygon"){const R=B1(v.coordinates,P,D),N=Va(m.geometry(),S,P,D);if(!Fs(S,P))return!1;for(const V of N)if(!Ol(V,R))return!1}return!0})(c,this.geometries);if(c.geometryType()==="LineString")return(function(m,v){const S=[1/0,1/0,-1/0,-1/0],P=[1/0,1/0,-1/0,-1/0],D=m.canonicalID();if(v.type==="Polygon"){const R=z0(v.coordinates,P,D),N=D_(m.geometry(),S,P,D);if(!Fs(S,P))return!1;for(const V of N)if(!L1(V,R))return!1}if(v.type==="MultiPolygon"){const R=B1(v.coordinates,P,D),N=D_(m.geometry(),S,P,D);if(!Fs(S,P))return!1;for(const V of N)if(!P_(V,R))return!1}return!0})(c,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}let I_=class{constructor(d=[],c=((m,v)=>m<v?-1:m>v?1:0)){if(this.data=d,this.length=this.data.length,this.compare=c,this.length>0)for(let m=(this.length>>1)-1;m>=0;m--)this._down(m)}push(d){this.data.push(d),this._up(this.length++)}pop(){if(this.length===0)return;const d=this.data[0],c=this.data.pop();return--this.length>0&&(this.data[0]=c,this._down(0)),d}peek(){return this.data[0]}_up(d){const{data:c,compare:m}=this,v=c[d];for(;d>0;){const S=d-1>>1,P=c[S];if(m(v,P)>=0)break;c[d]=P,d=S}c[d]=v}_down(d){const{data:c,compare:m}=this,v=this.length>>1,S=c[d];for(;d<v;){let P=1+(d<<1);const D=P+1;if(D<this.length&&m(c[D],c[P])<0&&(P=D),m(c[P],S)>=0)break;c[d]=c[P],d=P}c[d]=S}};function M_(d,c,m,v,S){$c(d,c,m,v||d.length-1,S||z1)}function $c(d,c,m,v,S){for(;v>m;){if(v-m>600){var P=v-m+1,D=c-m+1,R=Math.log(P),N=.5*Math.exp(2*R/3),V=.5*Math.sqrt(R*N*(P-N)/P)*(D-P/2<0?-1:1);$c(d,c,Math.max(m,Math.floor(c-D*N/P+V)),Math.min(v,Math.floor(c+(P-D)*N/P+V)),S)}var W=d[c],Y=m,ee=v;for(Ph(d,m,c),S(d[v],W)>0&&Ph(d,m,v);Y<ee;){for(Ph(d,Y,ee),Y++,ee--;S(d[Y],W)<0;)Y++;for(;S(d[ee],W)>0;)ee--}S(d[m],W)===0?Ph(d,m,ee):Ph(d,++ee,v),ee<=c&&(m=ee+1),c<=ee&&(v=ee-1)}}function Ph(d,c,m){var v=d[c];d[c]=d[m],d[m]=v}function z1(d,c){return d<c?-1:d>c?1:0}function ss(d,c){if(d.length<=1)return[d];const m=[];let v,S;for(const P of d){const D=Q1(P);D!==0&&(P.area=Math.abs(D),S===void 0&&(S=D<0),S===D<0?(v&&m.push(v),v=[P]):v.push(P))}if(v&&m.push(v),c>1)for(let P=0;P<m.length;P++)m[P].length<=c||(M_(m[P],c,1,m[P].length-1,Dh),m[P]=m[P].slice(0,c));return m}function Dh(d,c){return c.area-d.area}function Q1(d){let c=0;for(let m,v,S=0,P=d.length,D=P-1;S<P;D=S++)m=d[S],v=d[D],c+=(v.x-m.x)*(m.y+v.y);return c}const R_=1/298.257223563,Q0=R_*(2-R_),F_=Math.PI/180;class j1{constructor(c){const m=6378.137*F_*1e3,v=Math.cos(c*F_),S=1/(1-Q0*(1-v*v)),P=Math.sqrt(S);this.kx=m*P*v,this.ky=m*P*S*(1-Q0)}distance(c,m){const v=this.wrap(c[0]-m[0])*this.kx,S=(c[1]-m[1])*this.ky;return Math.sqrt(v*v+S*S)}pointOnLine(c,m){let v,S,P,D,R=1/0;for(let N=0;N<c.length-1;N++){let V=c[N][0],W=c[N][1],Y=this.wrap(c[N+1][0]-V)*this.kx,ee=(c[N+1][1]-W)*this.ky,re=0;Y===0&&ee===0||(re=(this.wrap(m[0]-V)*this.kx*Y+(m[1]-W)*this.ky*ee)/(Y*Y+ee*ee),re>1?(V=c[N+1][0],W=c[N+1][1]):re>0&&(V+=Y/this.kx*re,W+=ee/this.ky*re)),Y=this.wrap(m[0]-V)*this.kx,ee=(m[1]-W)*this.ky;const he=Y*Y+ee*ee;he<R&&(R=he,v=V,S=W,P=N,D=re)}return{point:[v,S],index:P,t:Math.max(0,Math.min(1,D))}}wrap(c){for(;c<-180;)c+=360;for(;c>180;)c-=360;return c}}function L_(d,c){return c[0]-d[0]}function Bm(d){return d[1]-d[0]+1}function Sl(d,c){return d[1]>=d[0]&&d[1]<c}function Ih(d,c){if(d[0]>d[1])return[null,null];const m=Bm(d);if(c){if(m===2)return[d,null];const S=Math.floor(m/2);return[[d[0],d[0]+S],[d[0]+S,d[1]]]}if(m===1)return[d,null];const v=Math.floor(m/2)-1;return[[d[0],d[0]+v],[d[0]+v+1,d[1]]]}function U1(d,c){if(!Sl(c,d.length))return[1/0,1/0,-1/0,-1/0];const m=[1/0,1/0,-1/0,-1/0];for(let v=c[0];v<=c[1];++v)Df(m,d[v]);return m}function j0(d){const c=[1/0,1/0,-1/0,-1/0];for(const m of d)for(const v of m)Df(c,v);return c}function Nm(d){return d[0]!==-1/0&&d[1]!==-1/0&&d[2]!==1/0&&d[3]!==1/0}function zm(d,c,m){if(!Nm(d)||!Nm(c))return NaN;let v=0,S=0;return d[2]<c[0]&&(v=c[0]-d[2]),d[0]>c[2]&&(v=d[0]-c[2]),d[1]>c[3]&&(S=d[1]-c[3]),d[3]<c[1]&&(S=c[1]-d[3]),m.distance([0,0],[v,S])}function Bc(d,c,m){const v=m.pointOnLine(c,d);return m.distance(d,v.point)}function U0(d,c,m,v,S){const P=Math.min(Bc(d,[m,v],S),Bc(c,[m,v],S)),D=Math.min(Bc(m,[d,c],S),Bc(v,[d,c],S));return Math.min(P,D)}function EO(d,c,m,v,S){if(!Sl(c,d.length)||!Sl(v,m.length))return 1/0;let P=1/0;for(let D=c[0];D<c[1];++D){const R=d[D],N=d[D+1];for(let V=v[0];V<v[1];++V){const W=m[V],Y=m[V+1];if(Zu(R,N,W,Y))return 0;P=Math.min(P,U0(R,N,W,Y,S))}}return P}function Ls(d,c,m,v,S){if(!Sl(c,d.length)||!Sl(v,m.length))return NaN;let P=1/0;for(let D=c[0];D<=c[1];++D)for(let R=v[0];R<=v[1];++R)if(P=Math.min(P,S.distance(d[D],m[R])),P===0)return P;return P}function V1(d,c,m){if(Th(d,c,!0))return 0;let v=1/0;for(const S of c){const P=S[0],D=S[S.length-1];if(P!==D&&(v=Math.min(v,Bc(d,[D,P],m)),v===0))return v;const R=m.pointOnLine(S,d);if(v=Math.min(v,m.distance(d,R.point)),v===0)return v}return v}function Rr(d,c,m,v){if(!Sl(c,d.length))return NaN;for(let P=c[0];P<=c[1];++P)if(Th(d[P],m,!0))return 0;let S=1/0;for(let P=c[0];P<c[1];++P){const D=d[P],R=d[P+1];for(const N of m)for(let V=0,W=N.length,Y=W-1;V<W;Y=V++){const ee=N[Y],re=N[V];if(Zu(D,R,ee,re))return 0;S=Math.min(S,U0(D,R,ee,re,v))}}return S}function Qm(d,c){for(const m of d)for(const v of m)if(Th(v,c,!0))return!0;return!1}function zr(d,c,m,v=1/0){const S=j0(d),P=j0(c);if(v!==1/0&&zm(S,P,m)>=v)return v;if(Fs(S,P)){if(Qm(d,c))return 0}else if(Qm(c,d))return 0;let D=1/0;for(const R of d)for(let N=0,V=R.length,W=V-1;N<V;W=N++){const Y=R[W],ee=R[N];for(const re of c)for(let he=0,ue=re.length,Ae=ue-1;he<ue;Ae=he++){const Te=re[Ae],nt=re[he];if(Zu(Y,ee,Te,nt))return 0;D=Math.min(D,U0(Y,ee,Te,nt,m))}}return D}function Ai(d,c,m,v,S,P){if(!P)return;const D=zm(U1(v,P),S,m);D<c&&d.push([D,P,[0,0]])}function fu(d,c,m,v,S,P,D){if(!P||!D)return;const R=zm(U1(v,P),U1(S,D),m);R<c&&d.push([R,P,D])}function qd(d,c,m,v,S=1/0){let P=Math.min(v.distance(d[0],m[0][0]),S);if(P===0)return P;const D=new I_([[0,[0,d.length-1],[0,0]]],L_),R=j0(m);for(;D.length>0;){const N=D.pop();if(N[0]>=P)continue;const V=N[1],W=c?50:100;if(Bm(V)<=W){if(!Sl(V,d.length))return NaN;if(c){const Y=Rr(d,V,m,v);if(isNaN(Y)||Y===0)return Y;P=Math.min(P,Y)}else for(let Y=V[0];Y<=V[1];++Y){const ee=V1(d[Y],m,v);if(P=Math.min(P,ee),P===0)return 0}}else{const Y=Ih(V,c);Ai(D,P,v,d,R,Y[0]),Ai(D,P,v,d,R,Y[1])}}return P}function Zd(d,c,m,v,S,P=1/0){let D=Math.min(P,S.distance(d[0],m[0]));if(D===0)return D;const R=new I_([[0,[0,d.length-1],[0,m.length-1]]],L_);for(;R.length>0;){const N=R.pop();if(N[0]>=D)continue;const V=N[1],W=N[2],Y=c?50:100,ee=v?50:100;if(Bm(V)<=Y&&Bm(W)<=ee){if(!Sl(V,d.length)&&Sl(W,m.length))return NaN;let re;if(c&&v)re=EO(d,V,m,W,S),D=Math.min(D,re);else if(c&&!v){const he=d.slice(V[0],V[1]+1);for(let ue=W[0];ue<=W[1];++ue)if(re=Bc(m[ue],he,S),D=Math.min(D,re),D===0)return D}else if(!c&&v){const he=m.slice(W[0],W[1]+1);for(let ue=V[0];ue<=V[1];++ue)if(re=Bc(d[ue],he,S),D=Math.min(D,re),D===0)return D}else re=Ls(d,V,m,W,S),D=Math.min(D,re)}else{const re=Ih(V,c),he=Ih(W,v);fu(R,D,S,d,m,re[0],he[0]),fu(R,D,S,d,m,re[0],he[1]),fu(R,D,S,d,m,re[1],he[0]),fu(R,D,S,d,m,re[1],he[1])}}return D}function q1(d){return d.type==="MultiPolygon"?d.coordinates.map((c=>({type:"Polygon",coordinates:c}))):d.type==="MultiLineString"?d.coordinates.map((c=>({type:"LineString",coordinates:c}))):d.type==="MultiPoint"?d.coordinates.map((c=>({type:"Point",coordinates:c}))):[d]}class If{constructor(c,m){this.type=Lt,this.geojson=c,this.geometries=m}static parse(c,m){if(c.length!==2)return m.error(`'distance' expression requires exactly one argument, but found ${c.length-1} instead.`);if(ha(c[1])){const v=c[1];if(v.type==="FeatureCollection")return new If(v,v.features.map((S=>q1(S.geometry))).flat());if(v.type==="Feature")return new If(v,q1(v.geometry));if("type"in v&&"coordinates"in v)return new If(v,q1(v))}return m.error("'distance' expression requires valid geojson object that contains polygon geometry type.")}evaluate(c){if(c.geometry()!=null&&c.canonicalID()!=null){if(c.geometryType()==="Point")return(function(m,v){const S=m.geometry(),P=S.flat().map((N=>N0([N.x,N.y],m.canonical)));if(S.length===0)return NaN;const D=new j1(P[0][1]);let R=1/0;for(const N of v){switch(N.type){case"Point":R=Math.min(R,Zd(P,!1,[N.coordinates],!1,D,R));break;case"LineString":R=Math.min(R,Zd(P,!1,N.coordinates,!0,D,R));break;case"Polygon":R=Math.min(R,qd(P,!1,N.coordinates,D,R))}if(R===0)return R}return R})(c,this.geometries);if(c.geometryType()==="LineString")return(function(m,v){const S=m.geometry(),P=S.flat().map((N=>N0([N.x,N.y],m.canonical)));if(S.length===0)return NaN;const D=new j1(P[0][1]);let R=1/0;for(const N of v){switch(N.type){case"Point":R=Math.min(R,Zd(P,!0,[N.coordinates],!1,D,R));break;case"LineString":R=Math.min(R,Zd(P,!0,N.coordinates,!0,D,R));break;case"Polygon":R=Math.min(R,qd(P,!0,N.coordinates,D,R))}if(R===0)return R}return R})(c,this.geometries);if(c.geometryType()==="Polygon")return(function(m,v){const S=m.geometry();if(S.length===0||S[0].length===0)return NaN;const P=ss(S,0).map((N=>N.map((V=>V.map((W=>N0([W.x,W.y],m.canonical))))))),D=new j1(P[0][0][0][1]);let R=1/0;for(const N of v)for(const V of P){switch(N.type){case"Point":R=Math.min(R,qd([N.coordinates],!1,V,D,R));break;case"LineString":R=Math.min(R,qd(N.coordinates,!0,V,D,R));break;case"Polygon":R=Math.min(R,zr(V,N.coordinates,D,R))}if(R===0)return R}return R})(c,this.geometries)}return NaN}eachChild(){}outputDefined(){return!0}}const Xd={"==":SO,"!=":A_,">":kO,"<":E_,">=":ms,"<=":CO,array:hu,at:P1,boolean:hu,case:Lc,coalesce:L0,collator:$i,format:B0,image:R1,in:R0,"index-of":Ah,interpolate:Ea,"interpolate-hcl":Ea,"interpolate-lab":Ea,length:F1,let:Fc,literal:ks,match:Fm,number:hu,"number-format":M1,object:hu,slice:Ud,step:Vd,string:hu,"to-boolean":ja,"to-color":ja,"to-number":ja,"to-string":ja,var:ai,within:zo,distance:If};class kl{constructor(c,m,v,S){this.name=c,this.type=m,this._evaluate=v,this.args=S}evaluate(c){return this._evaluate(c,this.args)}eachChild(c){this.args.forEach(c)}outputDefined(){return!1}static parse(c,m){const v=c[0],S=kl.definitions[v];if(!S)return m.error(`Unknown expression "${v}". If you wanted a literal array, use ["literal", [...]].`,0);const P=Array.isArray(S)?S[0]:S.type,D=Array.isArray(S)?[[S[1],S[2]]]:S.overloads,R=D.filter((([V])=>!Array.isArray(V)||V.length===c.length-1));let N=null;for(const[V,W]of R){N=new Ch(m.registry,Rf,m.path,null,m.scope);const Y=[];let ee=!1;for(let re=1;re<c.length;re++){const he=c[re],ue=Array.isArray(V)?V[re-1]:V.type,Ae=N.parse(he,1+Y.length,ue);if(!Ae){ee=!0;break}Y.push(Ae)}if(!ee)if(Array.isArray(V)&&V.length!==Y.length)N.error(`Expected ${V.length} arguments, but found ${Y.length} instead.`);else{for(let re=0;re<Y.length;re++){const he=Array.isArray(V)?V[re]:V.type,ue=Y[re];N.concat(re+1).checkSubtype(he,ue.type)}if(N.errors.length===0)return new kl(v,P,W,Y)}}if(R.length===1)m.errors.push(...N.errors);else{const V=(R.length?R:D).map((([Y])=>{return ee=Y,Array.isArray(ee)?`(${ee.map(te).join(", ")})`:`(${te(ee.type)}...)`;var ee})).join(" | "),W=[];for(let Y=1;Y<c.length;Y++){const ee=m.parse(c[Y],1+W.length);if(!ee)return null;W.push(te(ee.type))}m.error(`Expected arguments of type ${V}, but found (${W.join(", ")}) instead.`)}return null}static register(c,m){kl.definitions=m;for(const v in m)c[v]=kl}}function Z1(d,[c,m,v,S]){c=c.evaluate(d),m=m.evaluate(d),v=v.evaluate(d);const P=S?S.evaluate(d):1,D=Ss(c,m,v,P);if(D)throw new Li(D);return new $t(c/255,m/255,v/255,P,!1)}function Mh(d,c){return d in c}function X1(d,c){const m=c[d];return m===void 0?null:m}function Mf(d){return{type:d}}function Rf(d){if(d instanceof ai)return Rf(d.boundExpression);if(d instanceof kl&&d.name==="error"||d instanceof $i||d instanceof zo||d instanceof If)return!1;const c=d instanceof ja||d instanceof hu;let m=!0;return d.eachChild((v=>{m=c?m&&Rf(v):m&&v instanceof ks})),!!m&&Wd(d)&&Rh(d,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}function Wd(d){if(d instanceof kl&&(d.name==="get"&&d.args.length===1||d.name==="feature-state"||d.name==="has"&&d.args.length===1||d.name==="properties"||d.name==="geometry-type"||d.name==="id"||/^filter-/.test(d.name))||d instanceof zo||d instanceof If)return!1;let c=!0;return d.eachChild((m=>{c&&!Wd(m)&&(c=!1)})),c}function al(d){if(d instanceof kl&&d.name==="feature-state")return!1;let c=!0;return d.eachChild((m=>{c&&!al(m)&&(c=!1)})),c}function Rh(d,c){if(d instanceof kl&&c.indexOf(d.name)>=0)return!1;let m=!0;return d.eachChild((v=>{m&&!Rh(v,c)&&(m=!1)})),m}function V0(d){return{result:"success",value:d}}function Gd(d){return{result:"error",value:d}}function Yd(d){return d["property-type"]==="data-driven"||d["property-type"]==="cross-faded-data-driven"}function Ff(d){return!!d.expression&&d.expression.parameters.indexOf("zoom")>-1}function ll(d){return!!d.expression&&d.expression.interpolated}function li(d){return d instanceof Number?"number":d instanceof String?"string":d instanceof Boolean?"boolean":Array.isArray(d)?"array":d===null?"null":typeof d}function q0(d){return typeof d=="object"&&d!==null&&!Array.isArray(d)}function TO(d){return d}function $_(d,c){const m=c.type==="color",v=d.stops&&typeof d.stops[0][0]=="object",S=v||!(v||d.property!==void 0),P=d.type||(ll(c)?"exponential":"interval");if(m||c.type==="padding"){const W=m?$t.parse:Hn.parse;(d=Qi({},d)).stops&&(d.stops=d.stops.map((Y=>[Y[0],W(Y[1])]))),d.default=W(d.default?d.default:c.default)}if(d.colorSpace&&(D=d.colorSpace)!=="rgb"&&D!=="hcl"&&D!=="lab")throw new Error(`Unknown color space: "${d.colorSpace}"`);var D;let R,N,V;if(P==="exponential")R=tt;else if(P==="interval")R=Nc;else if(P==="categorical"){R=B_,N=Object.create(null);for(const W of d.stops)N[W[0]]=W[1];V=typeof d.stops[0][0]}else{if(P!=="identity")throw new Error(`Unknown function type "${P}"`);R=bt}if(v){const W={},Y=[];for(let he=0;he<d.stops.length;he++){const ue=d.stops[he],Ae=ue[0].zoom;W[Ae]===void 0&&(W[Ae]={zoom:Ae,type:d.type,property:d.property,default:d.default,stops:[]},Y.push(Ae)),W[Ae].stops.push([ue[0].value,ue[1]])}const ee=[];for(const he of Y)ee.push([W[he].zoom,$_(W[he],c)]);const re={name:"linear"};return{kind:"composite",interpolationType:re,interpolationFactor:Ea.interpolationFactor.bind(void 0,re),zoomStops:ee.map((he=>he[0])),evaluate:({zoom:he},ue)=>tt({stops:ee,base:d.base},c,he).evaluate(he,ue)}}if(S){const W=P==="exponential"?{name:"exponential",base:d.base!==void 0?d.base:1}:null;return{kind:"camera",interpolationType:W,interpolationFactor:Ea.interpolationFactor.bind(void 0,W),zoomStops:d.stops.map((Y=>Y[0])),evaluate:({zoom:Y})=>R(d,c,Y,N,V)}}return{kind:"source",evaluate(W,Y){const ee=Y&&Y.properties?Y.properties[d.property]:void 0;return ee===void 0?Hd(d.default,c.default):R(d,c,ee,N,V)}}}function Hd(d,c,m){return d!==void 0?d:c!==void 0?c:m!==void 0?m:void 0}function B_(d,c,m,v,S){return Hd(typeof m===S?v[m]:void 0,d.default,c.default)}function Nc(d,c,m){if(li(m)!=="number")return Hd(d.default,c.default);const v=d.stops.length;if(v===1||m<=d.stops[0][0])return d.stops[0][1];if(m>=d.stops[v-1][0])return d.stops[v-1][1];const S=Lm(d.stops.map((P=>P[0])),m);return d.stops[S][1]}function tt(d,c,m){const v=d.base!==void 0?d.base:1;if(li(m)!=="number")return Hd(d.default,c.default);const S=d.stops.length;if(S===1||m<=d.stops[0][0])return d.stops[0][1];if(m>=d.stops[S-1][0])return d.stops[S-1][1];const P=Lm(d.stops.map((W=>W[0])),m),D=(function(W,Y,ee,re){const he=re-ee,ue=W-ee;return he===0?0:Y===1?ue/he:(Math.pow(Y,ue)-1)/(Math.pow(Y,he)-1)})(m,v,d.stops[P][0],d.stops[P+1][0]),R=d.stops[P][1],N=d.stops[P+1][1],V=Ua[c.type]||TO;return typeof R.evaluate=="function"?{evaluate(...W){const Y=R.evaluate.apply(void 0,W),ee=N.evaluate.apply(void 0,W);if(Y!==void 0&&ee!==void 0)return V(Y,ee,D,d.colorSpace)}}:V(R,N,D,d.colorSpace)}function bt(d,c,m){switch(c.type){case"color":m=$t.parse(m);break;case"formatted":m=rr.fromString(m.toString());break;case"resolvedImage":m=Ci.fromString(m.toString());break;case"padding":m=Hn.parse(m);break;default:li(m)===c.type||c.type==="enum"&&c.values[m]||(m=void 0)}return Hd(m,d.default,c.default)}kl.register(Xd,{error:[{kind:"error"},[yn],(d,[c])=>{throw new Li(c.evaluate(d))}],typeof:[yn,[Tn],(d,[c])=>te(Rs(c.evaluate(d)))],"to-rgba":[ne(Lt,4),[Xr],(d,[c])=>{const[m,v,S,P]=c.evaluate(d).rgb;return[255*m,255*v,255*S,P]}],rgb:[Xr,[Lt,Lt,Lt],Z1],rgba:[Xr,[Lt,Lt,Lt,Lt],Z1],has:{type:rn,overloads:[[[yn],(d,[c])=>Mh(c.evaluate(d),d.properties())],[[yn,si],(d,[c,m])=>Mh(c.evaluate(d),m.evaluate(d))]]},get:{type:Tn,overloads:[[[yn],(d,[c])=>X1(c.evaluate(d),d.properties())],[[yn,si],(d,[c,m])=>X1(c.evaluate(d),m.evaluate(d))]]},"feature-state":[Tn,[yn],(d,[c])=>X1(c.evaluate(d),d.featureState||{})],properties:[si,[],d=>d.properties()],"geometry-type":[yn,[],d=>d.geometryType()],id:[Tn,[],d=>d.id()],zoom:[Lt,[],d=>d.globals.zoom],"heatmap-density":[Lt,[],d=>d.globals.heatmapDensity||0],"line-progress":[Lt,[],d=>d.globals.lineProgress||0],accumulated:[Tn,[],d=>d.globals.accumulated===void 0?null:d.globals.accumulated],"+":[Lt,Mf(Lt),(d,c)=>{let m=0;for(const v of c)m+=v.evaluate(d);return m}],"*":[Lt,Mf(Lt),(d,c)=>{let m=1;for(const v of c)m*=v.evaluate(d);return m}],"-":{type:Lt,overloads:[[[Lt,Lt],(d,[c,m])=>c.evaluate(d)-m.evaluate(d)],[[Lt],(d,[c])=>-c.evaluate(d)]]},"/":[Lt,[Lt,Lt],(d,[c,m])=>c.evaluate(d)/m.evaluate(d)],"%":[Lt,[Lt,Lt],(d,[c,m])=>c.evaluate(d)%m.evaluate(d)],ln2:[Lt,[],()=>Math.LN2],pi:[Lt,[],()=>Math.PI],e:[Lt,[],()=>Math.E],"^":[Lt,[Lt,Lt],(d,[c,m])=>Math.pow(c.evaluate(d),m.evaluate(d))],sqrt:[Lt,[Lt],(d,[c])=>Math.sqrt(c.evaluate(d))],log10:[Lt,[Lt],(d,[c])=>Math.log(c.evaluate(d))/Math.LN10],ln:[Lt,[Lt],(d,[c])=>Math.log(c.evaluate(d))],log2:[Lt,[Lt],(d,[c])=>Math.log(c.evaluate(d))/Math.LN2],sin:[Lt,[Lt],(d,[c])=>Math.sin(c.evaluate(d))],cos:[Lt,[Lt],(d,[c])=>Math.cos(c.evaluate(d))],tan:[Lt,[Lt],(d,[c])=>Math.tan(c.evaluate(d))],asin:[Lt,[Lt],(d,[c])=>Math.asin(c.evaluate(d))],acos:[Lt,[Lt],(d,[c])=>Math.acos(c.evaluate(d))],atan:[Lt,[Lt],(d,[c])=>Math.atan(c.evaluate(d))],min:[Lt,Mf(Lt),(d,c)=>Math.min(...c.map((m=>m.evaluate(d))))],max:[Lt,Mf(Lt),(d,c)=>Math.max(...c.map((m=>m.evaluate(d))))],abs:[Lt,[Lt],(d,[c])=>Math.abs(c.evaluate(d))],round:[Lt,[Lt],(d,[c])=>{const m=c.evaluate(d);return m<0?-Math.round(-m):Math.round(m)}],floor:[Lt,[Lt],(d,[c])=>Math.floor(c.evaluate(d))],ceil:[Lt,[Lt],(d,[c])=>Math.ceil(c.evaluate(d))],"filter-==":[rn,[yn,Tn],(d,[c,m])=>d.properties()[c.value]===m.value],"filter-id-==":[rn,[Tn],(d,[c])=>d.id()===c.value],"filter-type-==":[rn,[yn],(d,[c])=>d.geometryType()===c.value],"filter-<":[rn,[yn,Tn],(d,[c,m])=>{const v=d.properties()[c.value],S=m.value;return typeof v==typeof S&&v<S}],"filter-id-<":[rn,[Tn],(d,[c])=>{const m=d.id(),v=c.value;return typeof m==typeof v&&m<v}],"filter->":[rn,[yn,Tn],(d,[c,m])=>{const v=d.properties()[c.value],S=m.value;return typeof v==typeof S&&v>S}],"filter-id->":[rn,[Tn],(d,[c])=>{const m=d.id(),v=c.value;return typeof m==typeof v&&m>v}],"filter-<=":[rn,[yn,Tn],(d,[c,m])=>{const v=d.properties()[c.value],S=m.value;return typeof v==typeof S&&v<=S}],"filter-id-<=":[rn,[Tn],(d,[c])=>{const m=d.id(),v=c.value;return typeof m==typeof v&&m<=v}],"filter->=":[rn,[yn,Tn],(d,[c,m])=>{const v=d.properties()[c.value],S=m.value;return typeof v==typeof S&&v>=S}],"filter-id->=":[rn,[Tn],(d,[c])=>{const m=d.id(),v=c.value;return typeof m==typeof v&&m>=v}],"filter-has":[rn,[Tn],(d,[c])=>c.value in d.properties()],"filter-has-id":[rn,[],d=>d.id()!==null&&d.id()!==void 0],"filter-type-in":[rn,[ne(yn)],(d,[c])=>c.value.indexOf(d.geometryType())>=0],"filter-id-in":[rn,[ne(Tn)],(d,[c])=>c.value.indexOf(d.id())>=0],"filter-in-small":[rn,[yn,ne(Tn)],(d,[c,m])=>m.value.indexOf(d.properties()[c.value])>=0],"filter-in-large":[rn,[yn,ne(Tn)],(d,[c,m])=>(function(v,S,P,D){for(;P<=D;){const R=P+D>>1;if(S[R]===v)return!0;S[R]>v?D=R-1:P=R+1}return!1})(d.properties()[c.value],m.value,0,m.value.length-1)],all:{type:rn,overloads:[[[rn,rn],(d,[c,m])=>c.evaluate(d)&&m.evaluate(d)],[Mf(rn),(d,c)=>{for(const m of c)if(!m.evaluate(d))return!1;return!0}]]},any:{type:rn,overloads:[[[rn,rn],(d,[c,m])=>c.evaluate(d)||m.evaluate(d)],[Mf(rn),(d,c)=>{for(const m of c)if(m.evaluate(d))return!0;return!1}]]},"!":[rn,[rn],(d,[c])=>!c.evaluate(d)],"is-supported-script":[rn,[yn],(d,[c])=>{const m=d.globals&&d.globals.isSupportedScript;return!m||m(c.evaluate(d))}],upcase:[yn,[yn],(d,[c])=>c.evaluate(d).toUpperCase()],downcase:[yn,[yn],(d,[c])=>c.evaluate(d).toLowerCase()],concat:[yn,Mf(Tn),(d,c)=>c.map((m=>Vu(m.evaluate(d)))).join("")],"resolved-locale":[yn,[Ms],(d,[c])=>c.evaluate(d).resolvedLocale()]});class mt{constructor(c,m){var v;this.expression=c,this._warningHistory={},this._evaluator=new M0,this._defaultValue=m?(v=m).type==="color"&&q0(v.default)?new $t(0,0,0,0):v.type==="color"?$t.parse(v.default)||null:v.type==="padding"?Hn.parse(v.default)||null:v.type==="variableAnchorOffsetCollection"?Mr.parse(v.default)||null:v.default===void 0?null:v.default:null,this._enumValues=m&&m.type==="enum"?m.values:null}evaluateWithoutErrorHandling(c,m,v,S,P,D){return this._evaluator.globals=c,this._evaluator.feature=m,this._evaluator.featureState=v,this._evaluator.canonical=S,this._evaluator.availableImages=P||null,this._evaluator.formattedSection=D,this.expression.evaluate(this._evaluator)}evaluate(c,m,v,S,P,D){this._evaluator.globals=c,this._evaluator.feature=m||null,this._evaluator.featureState=v||null,this._evaluator.canonical=S,this._evaluator.availableImages=P||null,this._evaluator.formattedSection=D||null;try{const R=this.expression.evaluate(this._evaluator);if(R==null||typeof R=="number"&&R!=R)return this._defaultValue;if(this._enumValues&&!(R in this._enumValues))throw new Li(`Expected value to be one of ${Object.keys(this._enumValues).map((N=>JSON.stringify(N))).join(", ")}, but found ${JSON.stringify(R)} instead.`);return R}catch(R){return this._warningHistory[R.message]||(this._warningHistory[R.message]=!0,typeof console<"u"&&console.warn(R.message)),this._defaultValue}}}function xn(d){return Array.isArray(d)&&d.length>0&&typeof d[0]=="string"&&d[0]in Xd}function sr(d,c){const m=new Ch(Xd,Rf,[],c?(function(S){const P={color:Xr,string:yn,number:Lt,enum:yn,boolean:rn,formatted:Ri,padding:oi,resolvedImage:Fi,variableAnchorOffsetCollection:Oe};return S.type==="array"?ne(P[S.value]||Tn,S.length):P[S.type]})(c):void 0),v=m.parse(d,void 0,void 0,void 0,c&&c.type==="string"?{typeAnnotation:"coerce"}:void 0);return v?V0(new mt(v,c)):Gd(m.errors)}class ti{constructor(c,m){this.kind=c,this._styleExpression=m,this.isStateDependent=c!=="constant"&&!al(m.expression)}evaluateWithoutErrorHandling(c,m,v,S,P,D){return this._styleExpression.evaluateWithoutErrorHandling(c,m,v,S,P,D)}evaluate(c,m,v,S,P,D){return this._styleExpression.evaluate(c,m,v,S,P,D)}}class $s{constructor(c,m,v,S){this.kind=c,this.zoomStops=v,this._styleExpression=m,this.isStateDependent=c!=="camera"&&!al(m.expression),this.interpolationType=S}evaluateWithoutErrorHandling(c,m,v,S,P,D){return this._styleExpression.evaluateWithoutErrorHandling(c,m,v,S,P,D)}evaluate(c,m,v,S,P,D){return this._styleExpression.evaluate(c,m,v,S,P,D)}interpolationFactor(c,m,v){return this.interpolationType?Ea.interpolationFactor(this.interpolationType,c,m,v):0}}function Ui(d,c){const m=sr(d,c);if(m.result==="error")return m;const v=m.value.expression,S=Wd(v);if(!S&&!Yd(c))return Gd([new ki("","data expressions not supported")]);const P=Rh(v,["zoom"]);if(!P&&!Ff(c))return Gd([new ki("","zoom expressions not supported")]);const D=jm(v);return D||P?D instanceof ki?Gd([D]):D instanceof Ea&&!ll(c)?Gd([new ki("",'"interpolate" expressions cannot be used with this property')]):V0(D?new $s(S?"camera":"composite",m.value,D.labels,D instanceof Ea?D.interpolation:void 0):new ti(S?"constant":"source",m.value)):Gd([new ki("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class Fh{constructor(c,m){this._parameters=c,this._specification=m,Qi(this,$_(this._parameters,this._specification))}static deserialize(c){return new Fh(c._parameters,c._specification)}static serialize(c){return{_parameters:c._parameters,_specification:c._specification}}}function jm(d){let c=null;if(d instanceof Fc)c=jm(d.result);else if(d instanceof L0){for(const m of d.args)if(c=jm(m),c)break}else(d instanceof Vd||d instanceof Ea)&&d.input instanceof kl&&d.input.name==="zoom"&&(c=d);return c instanceof ki||d.eachChild((m=>{const v=jm(m);v instanceof ki?c=v:!c&&v?c=new ki("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):c&&v&&c!==v&&(c=new ki("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))})),c}function Ta(d){if(d===!0||d===!1)return!0;if(!Array.isArray(d)||d.length===0)return!1;switch(d[0]){case"has":return d.length>=2&&d[1]!=="$id"&&d[1]!=="$type";case"in":return d.length>=3&&(typeof d[1]!="string"||Array.isArray(d[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return d.length!==3||Array.isArray(d[1])||Array.isArray(d[2]);case"any":case"all":for(const c of d.slice(1))if(!Ta(c)&&typeof c!="boolean")return!1;return!0;default:return!0}}const Lf={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function W1(d){if(d==null)return{filter:()=>!0,needGeometry:!1};Ta(d)||(d=$f(d));const c=sr(d,Lf);if(c.result==="error")throw new Error(c.value.map((m=>`${m.key}: ${m.message}`)).join(", "));return{filter:(m,v,S)=>c.value.evaluate(m,v,{},S),needGeometry:Um(d)}}function Kd(d,c){return d<c?-1:d>c?1:0}function Um(d){if(!Array.isArray(d))return!1;if(d[0]==="within"||d[0]==="distance")return!0;for(let c=1;c<d.length;c++)if(Um(d[c]))return!0;return!1}function $f(d){if(!d)return!0;const c=d[0];return d.length<=1?c!=="any":c==="=="?Ei(d[1],d[2],"=="):c==="!="?Ao(Ei(d[1],d[2],"==")):c==="<"||c===">"||c==="<="||c===">="?Ei(d[1],d[2],c):c==="any"?(m=d.slice(1),["any"].concat(m.map($f))):c==="all"?["all"].concat(d.slice(1).map($f)):c==="none"?["all"].concat(d.slice(1).map($f).map(Ao)):c==="in"?Vm(d[1],d.slice(2)):c==="!in"?Ao(Vm(d[1],d.slice(2))):c==="has"?Jd(d[1]):c!=="!has"||Ao(Jd(d[1]));var m}function Ei(d,c,m){switch(d){case"$type":return[`filter-type-${m}`,c];case"$id":return[`filter-id-${m}`,c];default:return[`filter-${m}`,d,c]}}function Vm(d,c){if(c.length===0)return!1;switch(d){case"$type":return["filter-type-in",["literal",c]];case"$id":return["filter-id-in",["literal",c]];default:return c.length>200&&!c.some((m=>typeof m!=typeof c[0]))?["filter-in-large",d,["literal",c.sort(Kd)]]:["filter-in-small",d,["literal",c]]}}function Jd(d){switch(d){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",d]}}function Ao(d){return["!",d]}function Bf(d){const c=typeof d;if(c==="number"||c==="boolean"||c==="string"||d==null)return JSON.stringify(d);if(Array.isArray(d)){let S="[";for(const P of d)S+=`${Bf(P)},`;return`${S}]`}const m=Object.keys(d).sort();let v="{";for(let S=0;S<m.length;S++)v+=`${JSON.stringify(m[S])}:${Bf(d[m[S]])},`;return`${v}}`}function N_(d){let c="";for(const m of cn)c+=`/${Bf(d[m])}`;return c}function z_(d){const c=d.value;return c?[new Ct(d.key,c,"constants have been deprecated as of v8")]:[]}function Cs(d){return d instanceof Number||d instanceof String||d instanceof Boolean?d.valueOf():d}function Qo(d){if(Array.isArray(d))return d.map(Qo);if(d instanceof Object&&!(d instanceof Number||d instanceof String||d instanceof Boolean)){const c={};for(const m in d)c[m]=Qo(d[m]);return c}return Cs(d)}function fa(d){const c=d.key,m=d.value,v=d.valueSpec||{},S=d.objectElementValidators||{},P=d.style,D=d.styleSpec,R=d.validateSpec;let N=[];const V=li(m);if(V!=="object")return[new Ct(c,m,`object expected, ${V} found`)];for(const W in m){const Y=W.split(".")[0],ee=v[Y]||v["*"];let re;if(S[Y])re=S[Y];else if(v[Y])re=R;else if(S["*"])re=S["*"];else{if(!v["*"]){N.push(new Ct(c,m[W],`unknown property "${W}"`));continue}re=R}N=N.concat(re({key:(c&&`${c}.`)+W,value:m[W],valueSpec:ee,style:P,styleSpec:D,object:m,objectKey:W,validateSpec:R},m))}for(const W in v)S[W]||v[W].required&&v[W].default===void 0&&m[W]===void 0&&N.push(new Ct(c,m,`missing required property "${W}"`));return N}function ep(d){const c=d.value,m=d.valueSpec,v=d.style,S=d.styleSpec,P=d.key,D=d.arrayElementValidator||d.validateSpec;if(li(c)!=="array")return[new Ct(P,c,`array expected, ${li(c)} found`)];if(m.length&&c.length!==m.length)return[new Ct(P,c,`array length ${m.length} expected, length ${c.length} found`)];if(m["min-length"]&&c.length<m["min-length"])return[new Ct(P,c,`array length at least ${m["min-length"]} expected, length ${c.length} found`)];let R={type:m.value,values:m.values};S.$version<7&&(R.function=m.function),li(m.value)==="object"&&(R=m.value);let N=[];for(let V=0;V<c.length;V++)N=N.concat(D({array:c,arrayIndex:V,value:c[V],valueSpec:R,validateSpec:d.validateSpec,style:v,styleSpec:S,key:`${P}[${V}]`}));return N}function tp(d){const c=d.key,m=d.value,v=d.valueSpec;let S=li(m);return S==="number"&&m!=m&&(S="NaN"),S!=="number"?[new Ct(c,m,`number expected, ${S} found`)]:"minimum"in v&&m<v.minimum?[new Ct(c,m,`${m} is less than the minimum value ${v.minimum}`)]:"maximum"in v&&m>v.maximum?[new Ct(c,m,`${m} is greater than the maximum value ${v.maximum}`)]:[]}function qm(d){const c=d.valueSpec,m=Cs(d.value.type);let v,S,P,D={};const R=m!=="categorical"&&d.value.property===void 0,N=!R,V=li(d.value.stops)==="array"&&li(d.value.stops[0])==="array"&&li(d.value.stops[0][0])==="object",W=fa({key:d.key,value:d.value,valueSpec:d.styleSpec.function,validateSpec:d.validateSpec,style:d.style,styleSpec:d.styleSpec,objectElementValidators:{stops:function(re){if(m==="identity")return[new Ct(re.key,re.value,'identity function may not have a "stops" property')];let he=[];const ue=re.value;return he=he.concat(ep({key:re.key,value:ue,valueSpec:re.valueSpec,validateSpec:re.validateSpec,style:re.style,styleSpec:re.styleSpec,arrayElementValidator:Y})),li(ue)==="array"&&ue.length===0&&he.push(new Ct(re.key,ue,"array must have at least one stop")),he},default:function(re){return re.validateSpec({key:re.key,value:re.value,valueSpec:c,validateSpec:re.validateSpec,style:re.style,styleSpec:re.styleSpec})}}});return m==="identity"&&R&&W.push(new Ct(d.key,d.value,'missing required property "property"')),m==="identity"||d.value.stops||W.push(new Ct(d.key,d.value,'missing required property "stops"')),m==="exponential"&&d.valueSpec.expression&&!ll(d.valueSpec)&&W.push(new Ct(d.key,d.value,"exponential functions not supported")),d.styleSpec.$version>=8&&(N&&!Yd(d.valueSpec)?W.push(new Ct(d.key,d.value,"property functions not supported")):R&&!Ff(d.valueSpec)&&W.push(new Ct(d.key,d.value,"zoom functions not supported"))),m!=="categorical"&&!V||d.value.property!==void 0||W.push(new Ct(d.key,d.value,'"property" property is required')),W;function Y(re){let he=[];const ue=re.value,Ae=re.key;if(li(ue)!=="array")return[new Ct(Ae,ue,`array expected, ${li(ue)} found`)];if(ue.length!==2)return[new Ct(Ae,ue,`array length 2 expected, length ${ue.length} found`)];if(V){if(li(ue[0])!=="object")return[new Ct(Ae,ue,`object expected, ${li(ue[0])} found`)];if(ue[0].zoom===void 0)return[new Ct(Ae,ue,"object stop key must have zoom")];if(ue[0].value===void 0)return[new Ct(Ae,ue,"object stop key must have value")];if(P&&P>Cs(ue[0].zoom))return[new Ct(Ae,ue[0].zoom,"stop zoom values must appear in ascending order")];Cs(ue[0].zoom)!==P&&(P=Cs(ue[0].zoom),S=void 0,D={}),he=he.concat(fa({key:`${Ae}[0]`,value:ue[0],valueSpec:{zoom:{}},validateSpec:re.validateSpec,style:re.style,styleSpec:re.styleSpec,objectElementValidators:{zoom:tp,value:ee}}))}else he=he.concat(ee({key:`${Ae}[0]`,value:ue[0],validateSpec:re.validateSpec,style:re.style,styleSpec:re.styleSpec},ue));return xn(Qo(ue[1]))?he.concat([new Ct(`${Ae}[1]`,ue[1],"expressions are not allowed in function stops.")]):he.concat(re.validateSpec({key:`${Ae}[1]`,value:ue[1],valueSpec:c,validateSpec:re.validateSpec,style:re.style,styleSpec:re.styleSpec}))}function ee(re,he){const ue=li(re.value),Ae=Cs(re.value),Te=re.value!==null?re.value:he;if(v){if(ue!==v)return[new Ct(re.key,Te,`${ue} stop domain type must match previous stop domain type ${v}`)]}else v=ue;if(ue!=="number"&&ue!=="string"&&ue!=="boolean")return[new Ct(re.key,Te,"stop domain value must be a number, string, or boolean")];if(ue!=="number"&&m!=="categorical"){let nt=`number expected, ${ue} found`;return Yd(c)&&m===void 0&&(nt+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new Ct(re.key,Te,nt)]}return m!=="categorical"||ue!=="number"||isFinite(Ae)&&Math.floor(Ae)===Ae?m!=="categorical"&&ue==="number"&&S!==void 0&&Ae<S?[new Ct(re.key,Te,"stop domain values must appear in ascending order")]:(S=Ae,m==="categorical"&&Ae in D?[new Ct(re.key,Te,"stop domain values must be unique")]:(D[Ae]=!0,[])):[new Ct(re.key,Te,`integer expected, found ${Ae}`)]}}function Nf(d){const c=(d.expressionContext==="property"?Ui:sr)(Qo(d.value),d.valueSpec);if(c.result==="error")return c.value.map((v=>new Ct(`${d.key}${v.key}`,d.value,v.message)));const m=c.value.expression||c.value._styleExpression.expression;if(d.expressionContext==="property"&&d.propertyKey==="text-font"&&!m.outputDefined())return[new Ct(d.key,d.value,`Invalid data expression for "${d.propertyKey}". Output values must be contained as literals within the expression.`)];if(d.expressionContext==="property"&&d.propertyType==="layout"&&!al(m))return[new Ct(d.key,d.value,'"feature-state" data expressions are not supported with layout properties.')];if(d.expressionContext==="filter"&&!al(m))return[new Ct(d.key,d.value,'"feature-state" data expressions are not supported with filters.')];if(d.expressionContext&&d.expressionContext.indexOf("cluster")===0){if(!Rh(m,["zoom","feature-state"]))return[new Ct(d.key,d.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(d.expressionContext==="cluster-initial"&&!Wd(m))return[new Ct(d.key,d.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function Cl(d){const c=d.key,m=d.value,v=d.valueSpec,S=[];return Array.isArray(v.values)?v.values.indexOf(Cs(m))===-1&&S.push(new Ct(c,m,`expected one of [${v.values.join(", ")}], ${JSON.stringify(m)} found`)):Object.keys(v.values).indexOf(Cs(m))===-1&&S.push(new Ct(c,m,`expected one of [${Object.keys(v.values).join(", ")}], ${JSON.stringify(m)} found`)),S}function Z0(d){return Ta(Qo(d.value))?Nf(Qi({},d,{expressionContext:"filter",valueSpec:{value:"boolean"}})):Lh(d)}function Lh(d){const c=d.value,m=d.key;if(li(c)!=="array")return[new Ct(m,c,`array expected, ${li(c)} found`)];const v=d.styleSpec;let S,P=[];if(c.length<1)return[new Ct(m,c,"filter array must have at least 1 element")];switch(P=P.concat(Cl({key:`${m}[0]`,value:c[0],valueSpec:v.filter_operator,style:d.style,styleSpec:d.styleSpec})),Cs(c[0])){case"<":case"<=":case">":case">=":c.length>=2&&Cs(c[1])==="$type"&&P.push(new Ct(m,c,`"$type" cannot be use with operator "${c[0]}"`));case"==":case"!=":c.length!==3&&P.push(new Ct(m,c,`filter array for operator "${c[0]}" must have 3 elements`));case"in":case"!in":c.length>=2&&(S=li(c[1]),S!=="string"&&P.push(new Ct(`${m}[1]`,c[1],`string expected, ${S} found`)));for(let D=2;D<c.length;D++)S=li(c[D]),Cs(c[1])==="$type"?P=P.concat(Cl({key:`${m}[${D}]`,value:c[D],valueSpec:v.geometry_type,style:d.style,styleSpec:d.styleSpec})):S!=="string"&&S!=="number"&&S!=="boolean"&&P.push(new Ct(`${m}[${D}]`,c[D],`string, number, or boolean expected, ${S} found`));break;case"any":case"all":case"none":for(let D=1;D<c.length;D++)P=P.concat(Lh({key:`${m}[${D}]`,value:c[D],style:d.style,styleSpec:d.styleSpec}));break;case"has":case"!has":S=li(c[1]),c.length!==2?P.push(new Ct(m,c,`filter array for "${c[0]}" operator must have 2 elements`)):S!=="string"&&P.push(new Ct(`${m}[1]`,c[1],`string expected, ${S} found`))}return P}function zc(d,c){const m=d.key,v=d.validateSpec,S=d.style,P=d.styleSpec,D=d.value,R=d.objectKey,N=P[`${c}_${d.layerType}`];if(!N)return[];const V=R.match(/^(.*)-transition$/);if(c==="paint"&&V&&N[V[1]]&&N[V[1]].transition)return v({key:m,value:D,valueSpec:P.transition,style:S,styleSpec:P});const W=d.valueSpec||N[R];if(!W)return[new Ct(m,D,`unknown property "${R}"`)];let Y;if(li(D)==="string"&&Yd(W)&&!W.tokens&&(Y=/^{([^}]+)}$/.exec(D)))return[new Ct(m,D,`"${R}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(Y[1])} }\`.`)];const ee=[];return d.layerType==="symbol"&&(R==="text-field"&&S&&!S.glyphs&&ee.push(new Ct(m,D,'use of "text-field" requires a style "glyphs" property')),R==="text-font"&&q0(Qo(D))&&Cs(D.type)==="identity"&&ee.push(new Ct(m,D,'"text-font" does not support identity functions'))),ee.concat(v({key:d.key,value:D,valueSpec:W,style:S,styleSpec:P,expressionContext:"property",propertyType:c,propertyKey:R}))}function zf(d){return zc(d,"paint")}function G1(d){return zc(d,"layout")}function Y1(d){let c=[];const m=d.value,v=d.key,S=d.style,P=d.styleSpec;m.type||m.ref||c.push(new Ct(v,m,'either "type" or "ref" is required'));let D=Cs(m.type);const R=Cs(m.ref);if(m.id){const N=Cs(m.id);for(let V=0;V<d.arrayIndex;V++){const W=S.layers[V];Cs(W.id)===N&&c.push(new Ct(v,m.id,`duplicate layer id "${m.id}", previously used at line ${W.id.__line__}`))}}if("ref"in m){let N;["type","source","source-layer","filter","layout"].forEach((V=>{V in m&&c.push(new Ct(v,m[V],`"${V}" is prohibited for ref layers`))})),S.layers.forEach((V=>{Cs(V.id)===R&&(N=V)})),N?N.ref?c.push(new Ct(v,m.ref,"ref cannot reference another ref layer")):D=Cs(N.type):c.push(new Ct(v,m.ref,`ref layer "${R}" not found`))}else if(D!=="background")if(m.source){const N=S.sources&&S.sources[m.source],V=N&&Cs(N.type);N?V==="vector"&&D==="raster"?c.push(new Ct(v,m.source,`layer "${m.id}" requires a raster source`)):V!=="raster-dem"&&D==="hillshade"?c.push(new Ct(v,m.source,`layer "${m.id}" requires a raster-dem source`)):V==="raster"&&D!=="raster"?c.push(new Ct(v,m.source,`layer "${m.id}" requires a vector source`)):V!=="vector"||m["source-layer"]?V==="raster-dem"&&D!=="hillshade"?c.push(new Ct(v,m.source,"raster-dem source can only be used with layer type 'hillshade'.")):D!=="line"||!m.paint||!m.paint["line-gradient"]||V==="geojson"&&N.lineMetrics||c.push(new Ct(v,m,`layer "${m.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):c.push(new Ct(v,m,`layer "${m.id}" must specify a "source-layer"`)):c.push(new Ct(v,m.source,`source "${m.source}" not found`))}else c.push(new Ct(v,m,'missing required property "source"'));return c=c.concat(fa({key:v,value:m,valueSpec:P.layer,style:d.style,styleSpec:d.styleSpec,validateSpec:d.validateSpec,objectElementValidators:{"*":()=>[],type:()=>d.validateSpec({key:`${v}.type`,value:m.type,valueSpec:P.layer.type,style:d.style,styleSpec:d.styleSpec,validateSpec:d.validateSpec,object:m,objectKey:"type"}),filter:Z0,layout:N=>fa({layer:m,key:N.key,value:N.value,style:N.style,styleSpec:N.styleSpec,validateSpec:N.validateSpec,objectElementValidators:{"*":V=>G1(Qi({layerType:D},V))}}),paint:N=>fa({layer:m,key:N.key,value:N.value,style:N.style,styleSpec:N.styleSpec,validateSpec:N.validateSpec,objectElementValidators:{"*":V=>zf(Qi({layerType:D},V))}})}})),c}function Qf(d){const c=d.value,m=d.key,v=li(c);return v!=="string"?[new Ct(m,c,`string expected, ${v} found`)]:[]}const jf={promoteId:function({key:d,value:c}){if(li(c)==="string")return Qf({key:d,value:c});{const m=[];for(const v in c)m.push(...Qf({key:`${d}.${v}`,value:c[v]}));return m}}};function $h(d){const c=d.value,m=d.key,v=d.styleSpec,S=d.style,P=d.validateSpec;if(!c.type)return[new Ct(m,c,'"type" is required')];const D=Cs(c.type);let R;switch(D){case"vector":case"raster":return R=fa({key:m,value:c,valueSpec:v[`source_${D.replace("-","_")}`],style:d.style,styleSpec:v,objectElementValidators:jf,validateSpec:P}),R;case"raster-dem":return R=(function(N){var V;const W=(V=N.sourceName)!==null&&V!==void 0?V:"",Y=N.value,ee=N.styleSpec,re=ee.source_raster_dem,he=N.style;let ue=[];const Ae=li(Y);if(Y===void 0)return ue;if(Ae!=="object")return ue.push(new Ct("source_raster_dem",Y,`object expected, ${Ae} found`)),ue;const Te=Cs(Y.encoding)==="custom",nt=["redFactor","greenFactor","blueFactor","baseShift"],Ve=N.value.encoding?`"${N.value.encoding}"`:"Default";for(const qe in Y)!Te&&nt.includes(qe)?ue.push(new Ct(qe,Y[qe],`In "${W}": "${qe}" is only valid when "encoding" is set to "custom". ${Ve} encoding found`)):re[qe]?ue=ue.concat(N.validateSpec({key:qe,value:Y[qe],valueSpec:re[qe],validateSpec:N.validateSpec,style:he,styleSpec:ee})):ue.push(new Ct(qe,Y[qe],`unknown property "${qe}"`));return ue})({sourceName:m,value:c,style:d.style,styleSpec:v,validateSpec:P}),R;case"geojson":if(R=fa({key:m,value:c,valueSpec:v.source_geojson,style:S,styleSpec:v,validateSpec:P,objectElementValidators:jf}),c.cluster)for(const N in c.clusterProperties){const[V,W]=c.clusterProperties[N],Y=typeof V=="string"?[V,["accumulated"],["get",N]]:V;R.push(...Nf({key:`${m}.${N}.map`,value:W,expressionContext:"cluster-map"})),R.push(...Nf({key:`${m}.${N}.reduce`,value:Y,expressionContext:"cluster-reduce"}))}return R;case"video":return fa({key:m,value:c,valueSpec:v.source_video,style:S,validateSpec:P,styleSpec:v});case"image":return fa({key:m,value:c,valueSpec:v.source_image,style:S,validateSpec:P,styleSpec:v});case"canvas":return[new Ct(m,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return Cl({key:`${m}.type`,value:c.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]}})}}function Zm(d){const c=d.value,m=d.styleSpec,v=m.light,S=d.style;let P=[];const D=li(c);if(c===void 0)return P;if(D!=="object")return P=P.concat([new Ct("light",c,`object expected, ${D} found`)]),P;for(const R in c){const N=R.match(/^(.*)-transition$/);P=P.concat(N&&v[N[1]]&&v[N[1]].transition?d.validateSpec({key:R,value:c[R],valueSpec:m.transition,validateSpec:d.validateSpec,style:S,styleSpec:m}):v[R]?d.validateSpec({key:R,value:c[R],valueSpec:v[R],validateSpec:d.validateSpec,style:S,styleSpec:m}):[new Ct(R,c[R],`unknown property "${R}"`)])}return P}function H1(d){const c=d.value,m=d.styleSpec,v=m.sky,S=d.style,P=li(c);if(c===void 0)return[];if(P!=="object")return[new Ct("sky",c,`object expected, ${P} found`)];let D=[];for(const R in c)D=D.concat(v[R]?d.validateSpec({key:R,value:c[R],valueSpec:v[R],style:S,styleSpec:m}):[new Ct(R,c[R],`unknown property "${R}"`)]);return D}function X0(d){const c=d.value,m=d.styleSpec,v=m.terrain,S=d.style;let P=[];const D=li(c);if(c===void 0)return P;if(D!=="object")return P=P.concat([new Ct("terrain",c,`object expected, ${D} found`)]),P;for(const R in c)P=P.concat(v[R]?d.validateSpec({key:R,value:c[R],valueSpec:v[R],validateSpec:d.validateSpec,style:S,styleSpec:m}):[new Ct(R,c[R],`unknown property "${R}"`)]);return P}function K1(d){let c=[];const m=d.value,v=d.key;if(Array.isArray(m)){const S=[],P=[];for(const D in m)m[D].id&&S.includes(m[D].id)&&c.push(new Ct(v,m,`all the sprites' ids must be unique, but ${m[D].id} is duplicated`)),S.push(m[D].id),m[D].url&&P.includes(m[D].url)&&c.push(new Ct(v,m,`all the sprites' URLs must be unique, but ${m[D].url} is duplicated`)),P.push(m[D].url),c=c.concat(fa({key:`${v}[${D}]`,value:m[D],valueSpec:{id:{type:"string",required:!0},url:{type:"string",required:!0}},validateSpec:d.validateSpec}));return c}return Qf({key:v,value:m})}const W0={"*":()=>[],array:ep,boolean:function(d){const c=d.value,m=d.key,v=li(c);return v!=="boolean"?[new Ct(m,c,`boolean expected, ${v} found`)]:[]},number:tp,color:function(d){const c=d.key,m=d.value,v=li(m);return v!=="string"?[new Ct(c,m,`color expected, ${v} found`)]:$t.parse(String(m))?[]:[new Ct(c,m,`color expected, "${m}" found`)]},constants:z_,enum:Cl,filter:Z0,function:qm,layer:Y1,object:fa,source:$h,light:Zm,sky:H1,terrain:X0,projection:function(d){const c=d.value,m=d.styleSpec,v=m.projection,S=d.style,P=li(c);if(c===void 0)return[];if(P!=="object")return[new Ct("projection",c,`object expected, ${P} found`)];let D=[];for(const R in c)D=D.concat(v[R]?d.validateSpec({key:R,value:c[R],valueSpec:v[R],style:S,styleSpec:m}):[new Ct(R,c[R],`unknown property "${R}"`)]);return D},string:Qf,formatted:function(d){return Qf(d).length===0?[]:Nf(d)},resolvedImage:function(d){return Qf(d).length===0?[]:Nf(d)},padding:function(d){const c=d.key,m=d.value;if(li(m)==="array"){if(m.length<1||m.length>4)return[new Ct(c,m,`padding requires 1 to 4 values; ${m.length} values found`)];const v={type:"number"};let S=[];for(let P=0;P<m.length;P++)S=S.concat(d.validateSpec({key:`${c}[${P}]`,value:m[P],validateSpec:d.validateSpec,valueSpec:v}));return S}return tp({key:c,value:m,valueSpec:{}})},variableAnchorOffsetCollection:function(d){const c=d.key,m=d.value,v=li(m),S=d.styleSpec;if(v!=="array"||m.length<1||m.length%2!=0)return[new Ct(c,m,"variableAnchorOffsetCollection requires a non-empty array of even length")];let P=[];for(let D=0;D<m.length;D+=2)P=P.concat(Cl({key:`${c}[${D}]`,value:m[D],valueSpec:S.layout_symbol["text-anchor"]})),P=P.concat(ep({key:`${c}[${D+1}]`,value:m[D+1],valueSpec:{length:2,value:"number"},validateSpec:d.validateSpec,style:d.style,styleSpec:S}));return P},sprite:K1};function Us(d){const c=d.value,m=d.valueSpec,v=d.styleSpec;return d.validateSpec=Us,m.expression&&q0(Cs(c))?qm(d):m.expression&&xn(Qo(c))?Nf(d):m.type&&W0[m.type]?W0[m.type](d):fa(Qi({},d,{valueSpec:m.type?v[m.type]:m}))}function Yo(d){const c=d.value,m=d.key,v=Qf(d);return v.length||(c.indexOf("{fontstack}")===-1&&v.push(new Ct(m,c,'"glyphs" url must include a "{fontstack}" token')),c.indexOf("{range}")===-1&&v.push(new Ct(m,c,'"glyphs" url must include a "{range}" token'))),v}function Al(d,c=Ze){let m=[];return m=m.concat(Us({key:"",value:d,valueSpec:c.$root,styleSpec:c,style:d,validateSpec:Us,objectElementValidators:{glyphs:Yo,"*":()=>[]}})),d.constants&&(m=m.concat(z_({key:"constants",value:d.constants}))),G0(m)}function Xu(d){return function(c){return d({...c,validateSpec:Us})}}function G0(d){return[].concat(d).sort(((c,m)=>c.line-m.line))}function du(d){return function(...c){return G0(d.apply(this,c))}}Al.source=du(Xu($h)),Al.sprite=du(Xu(K1)),Al.glyphs=du(Xu(Yo)),Al.light=du(Xu(Zm)),Al.sky=du(Xu(H1)),Al.terrain=du(Xu(X0)),Al.layer=du(Xu(Y1)),Al.filter=du(Xu(Z0)),Al.paintProperty=du(Xu(zf)),Al.layoutProperty=du(Xu(G1));const Qc=Al,Xm=Qc.light,J1=Qc.sky,Uf=Qc.paintProperty,np=Qc.layoutProperty;function Vf(d,c){let m=!1;if(c&&c.length)for(const v of c)d.fire(new zt(new Error(v.message))),m=!0;return m}class jc{constructor(c,m,v){const S=this.cells=[];if(c instanceof ArrayBuffer){this.arrayBuffer=c;const D=new Int32Array(this.arrayBuffer);c=D[0],this.d=(m=D[1])+2*(v=D[2]);for(let N=0;N<this.d*this.d;N++){const V=D[3+N],W=D[3+N+1];S.push(V===W?null:D.subarray(V,W))}const R=D[3+S.length+1];this.keys=D.subarray(D[3+S.length],R),this.bboxes=D.subarray(R),this.insert=this._insertReadonly}else{this.d=m+2*v;for(let D=0;D<this.d*this.d;D++)S.push([]);this.keys=[],this.bboxes=[]}this.n=m,this.extent=c,this.padding=v,this.scale=m/c,this.uid=0;const P=v/m*c;this.min=-P,this.max=c+P}insert(c,m,v,S,P){this._forEachCell(m,v,S,P,this._insertCell,this.uid++,void 0,void 0),this.keys.push(c),this.bboxes.push(m),this.bboxes.push(v),this.bboxes.push(S),this.bboxes.push(P)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(c,m,v,S,P,D){this.cells[P].push(D)}query(c,m,v,S,P){const D=this.min,R=this.max;if(c<=D&&m<=D&&R<=v&&R<=S&&!P)return Array.prototype.slice.call(this.keys);{const N=[];return this._forEachCell(c,m,v,S,this._queryCell,N,{},P),N}}_queryCell(c,m,v,S,P,D,R,N){const V=this.cells[P];if(V!==null){const W=this.keys,Y=this.bboxes;for(let ee=0;ee<V.length;ee++){const re=V[ee];if(R[re]===void 0){const he=4*re;(N?N(Y[he+0],Y[he+1],Y[he+2],Y[he+3]):c<=Y[he+2]&&m<=Y[he+3]&&v>=Y[he+0]&&S>=Y[he+1])?(R[re]=!0,D.push(W[re])):R[re]=!1}}}}_forEachCell(c,m,v,S,P,D,R,N){const V=this._convertToCellCoord(c),W=this._convertToCellCoord(m),Y=this._convertToCellCoord(v),ee=this._convertToCellCoord(S);for(let re=V;re<=Y;re++)for(let he=W;he<=ee;he++){const ue=this.d*he+re;if((!N||N(this._convertFromCellCoord(re),this._convertFromCellCoord(he),this._convertFromCellCoord(re+1),this._convertFromCellCoord(he+1)))&&P.call(this,c,m,v,S,ue,D,R,N))return}}_convertFromCellCoord(c){return(c-this.padding)/this.scale}_convertToCellCoord(c){return Math.max(0,Math.min(this.d-1,Math.floor(c*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;const c=this.cells,m=3+this.cells.length+1+1;let v=0;for(let D=0;D<this.cells.length;D++)v+=this.cells[D].length;const S=new Int32Array(m+v+this.keys.length+this.bboxes.length);S[0]=this.extent,S[1]=this.n,S[2]=this.padding;let P=m;for(let D=0;D<c.length;D++){const R=c[D];S[3+D]=P,S.set(R,P),P+=R.length}return S[3+c.length]=P,S.set(this.keys,P),P+=this.keys.length,S[3+c.length+1]=P,S.set(this.bboxes,P),P+=this.bboxes.length,S.buffer}static serialize(c,m){const v=c.toArrayBuffer();return m&&m.push(v),{buffer:v}}static deserialize(c){return new jc(c.buffer)}}const Ho={};function dn(d,c,m={}){if(Ho[d])throw new Error(`${d} is already registered.`);Object.defineProperty(c,"_classRegistryKey",{value:d,writeable:!1}),Ho[d]={klass:c,omit:m.omit||[],shallow:m.shallow||[]}}dn("Object",Object),dn("TransferableGridIndex",jc),dn("Color",$t),dn("Error",Error),dn("AJAXError",Yt),dn("ResolvedImage",Ci),dn("StylePropertyFunction",Fh),dn("StyleExpression",mt,{omit:["_evaluator"]}),dn("ZoomDependentExpression",$s),dn("ZoomConstantExpression",ti),dn("CompoundExpression",kl,{omit:["_evaluate"]});for(const d in Xd)Xd[d]._classRegistryKey||dn(`Expression_${d}`,Xd[d]);function Y0(d){return d&&typeof ArrayBuffer<"u"&&(d instanceof ArrayBuffer||d.constructor&&d.constructor.name==="ArrayBuffer")}function ev(d){return d.$name||d.constructor._classRegistryKey}function Q_(d){return!(function(c){if(c===null||typeof c!="object")return!1;const m=ev(c);return!(!m||m==="Object")})(d)&&(d==null||typeof d=="boolean"||typeof d=="number"||typeof d=="string"||d instanceof Boolean||d instanceof Number||d instanceof String||d instanceof Date||d instanceof RegExp||d instanceof Blob||d instanceof Error||Y0(d)||De(d)||ArrayBuffer.isView(d)||d instanceof ImageData)}function rp(d,c){if(Q_(d))return(Y0(d)||De(d))&&c&&c.push(d),ArrayBuffer.isView(d)&&c&&c.push(d.buffer),d instanceof ImageData&&c&&c.push(d.data.buffer),d;if(Array.isArray(d)){const P=[];for(const D of d)P.push(rp(D,c));return P}if(typeof d!="object")throw new Error("can't serialize object of type "+typeof d);const m=ev(d);if(!m)throw new Error(`can't serialize object of unregistered class ${d.constructor.name}`);if(!Ho[m])throw new Error(`${m} is not registered.`);const{klass:v}=Ho[m],S=v.serialize?v.serialize(d,c):{};if(v.serialize){if(c&&S===c[c.length-1])throw new Error("statically serialized object won't survive transfer of $name property")}else{for(const P in d){if(!d.hasOwnProperty(P)||Ho[m].omit.indexOf(P)>=0)continue;const D=d[P];S[P]=Ho[m].shallow.indexOf(P)>=0?D:rp(D,c)}d instanceof Error&&(S.message=d.message)}if(S.$name)throw new Error("$name property is reserved for worker serialization logic.");return m!=="Object"&&(S.$name=m),S}function Uc(d){if(Q_(d))return d;if(Array.isArray(d))return d.map(Uc);if(typeof d!="object")throw new Error("can't deserialize object of type "+typeof d);const c=ev(d)||"Object";if(!Ho[c])throw new Error(`can't deserialize unregistered class ${c}`);const{klass:m}=Ho[c];if(!m)throw new Error(`can't deserialize unregistered class ${c}`);if(m.deserialize)return m.deserialize(d);const v=Object.create(m.prototype);for(const S of Object.keys(d)){if(S==="$name")continue;const P=d[S];v[S]=Ho[c].shallow.indexOf(S)>=0?P:Uc(P)}return v}class qf{constructor(){this.first=!0}update(c,m){const v=Math.floor(c);return this.first?(this.first=!1,this.lastIntegerZoom=v,this.lastIntegerZoomTime=0,this.lastZoom=c,this.lastFloorZoom=v,!0):(this.lastFloorZoom>v?(this.lastIntegerZoom=v+1,this.lastIntegerZoomTime=m):this.lastFloorZoom<v&&(this.lastIntegerZoom=v,this.lastIntegerZoomTime=m),c!==this.lastZoom&&(this.lastZoom=c,this.lastFloorZoom=v,!0))}}const Qr={"Latin-1 Supplement":d=>d>=128&&d<=255,"Hangul Jamo":d=>d>=4352&&d<=4607,Khmer:d=>d>=6016&&d<=6143,"General Punctuation":d=>d>=8192&&d<=8303,"Letterlike Symbols":d=>d>=8448&&d<=8527,"Number Forms":d=>d>=8528&&d<=8591,"Miscellaneous Technical":d=>d>=8960&&d<=9215,"Control Pictures":d=>d>=9216&&d<=9279,"Optical Character Recognition":d=>d>=9280&&d<=9311,"Enclosed Alphanumerics":d=>d>=9312&&d<=9471,"Geometric Shapes":d=>d>=9632&&d<=9727,"Miscellaneous Symbols":d=>d>=9728&&d<=9983,"Miscellaneous Symbols and Arrows":d=>d>=11008&&d<=11263,"Ideographic Description Characters":d=>d>=12272&&d<=12287,"CJK Symbols and Punctuation":d=>d>=12288&&d<=12351,Katakana:d=>d>=12448&&d<=12543,Kanbun:d=>d>=12688&&d<=12703,"CJK Strokes":d=>d>=12736&&d<=12783,"Enclosed CJK Letters and Months":d=>d>=12800&&d<=13055,"CJK Compatibility":d=>d>=13056&&d<=13311,"Yijing Hexagram Symbols":d=>d>=19904&&d<=19967,"Private Use Area":d=>d>=57344&&d<=63743,"Vertical Forms":d=>d>=65040&&d<=65055,"CJK Compatibility Forms":d=>d>=65072&&d<=65103,"Small Form Variants":d=>d>=65104&&d<=65135,"Halfwidth and Fullwidth Forms":d=>d>=65280&&d<=65519};function de(d){for(const c of d)if(tv(c.charCodeAt(0)))return!0;return!1}function ip(d){for(const c of d)if(!Fr(c.charCodeAt(0)))return!1;return!0}function sp(d){const c=d.map((m=>{try{return new RegExp(`\\p{sc=${m}}`,"u").source}catch{return null}})).filter((m=>m));return new RegExp(c.join("|"),"u")}const El=sp(["Arab","Dupl","Mong","Ougr","Syrc"]);function Fr(d){return!El.test(String.fromCodePoint(d))}const j_=sp(["Bopo","Hani","Hira","Kana","Kits","Nshu","Tang","Yiii"]);function tv(d){return!(d!==746&&d!==747&&(d<4352||!(Qr["CJK Compatibility Forms"](d)&&!(d>=65097&&d<=65103)||Qr["CJK Compatibility"](d)||Qr["CJK Strokes"](d)||!(!Qr["CJK Symbols and Punctuation"](d)||d>=12296&&d<=12305||d>=12308&&d<=12319||d===12336)||Qr["Enclosed CJK Letters and Months"](d)||Qr["Ideographic Description Characters"](d)||Qr.Kanbun(d)||Qr.Katakana(d)&&d!==12540||!(!Qr["Halfwidth and Fullwidth Forms"](d)||d===65288||d===65289||d===65293||d>=65306&&d<=65310||d===65339||d===65341||d===65343||d>=65371&&d<=65503||d===65507||d>=65512&&d<=65519)||!(!Qr["Small Form Variants"](d)||d>=65112&&d<=65118||d>=65123&&d<=65126)||Qr["Vertical Forms"](d)||Qr["Yijing Hexagram Symbols"](d)||/\p{sc=Cans}/u.test(String.fromCodePoint(d))||/\p{sc=Hang}/u.test(String.fromCodePoint(d))||j_.test(String.fromCodePoint(d)))))}function U_(d){return!(tv(d)||(function(c){return!!(Qr["Latin-1 Supplement"](c)&&(c===167||c===169||c===174||c===177||c===188||c===189||c===190||c===215||c===247)||Qr["General Punctuation"](c)&&(c===8214||c===8224||c===8225||c===8240||c===8241||c===8251||c===8252||c===8258||c===8263||c===8264||c===8265||c===8273)||Qr["Letterlike Symbols"](c)||Qr["Number Forms"](c)||Qr["Miscellaneous Technical"](c)&&(c>=8960&&c<=8967||c>=8972&&c<=8991||c>=8996&&c<=9e3||c===9003||c>=9085&&c<=9114||c>=9150&&c<=9165||c===9167||c>=9169&&c<=9179||c>=9186&&c<=9215)||Qr["Control Pictures"](c)&&c!==9251||Qr["Optical Character Recognition"](c)||Qr["Enclosed Alphanumerics"](c)||Qr["Geometric Shapes"](c)||Qr["Miscellaneous Symbols"](c)&&!(c>=9754&&c<=9759)||Qr["Miscellaneous Symbols and Arrows"](c)&&(c>=11026&&c<=11055||c>=11088&&c<=11097||c>=11192&&c<=11243)||Qr["CJK Symbols and Punctuation"](c)||Qr.Katakana(c)||Qr["Private Use Area"](c)||Qr["CJK Compatibility Forms"](c)||Qr["Small Form Variants"](c)||Qr["Halfwidth and Fullwidth Forms"](c)||c===8734||c===8756||c===8757||c>=9984&&c<=10087||c>=10102&&c<=10131||c===65532||c===65533)})(d))}const Zf=sp(["Adlm","Arab","Armi","Avst","Chrs","Cprt","Egyp","Elym","Gara","Hatr","Hebr","Hung","Khar","Lydi","Mand","Mani","Mend","Merc","Mero","Narb","Nbat","Nkoo","Orkh","Palm","Phli","Phlp","Phnx","Prti","Rohg","Samr","Sarb","Sogo","Syrc","Thaa","Todr","Yezi"]);function nv(d){return Zf.test(String.fromCodePoint(d))}function PO(d,c){return!(!c&&nv(d)||d>=2304&&d<=3583||d>=3840&&d<=4255||Qr.Khmer(d))}function DO(d){for(const c of d)if(nv(c.charCodeAt(0)))return!0;return!1}const ul=new class{constructor(){this.applyArabicShaping=null,this.processBidirectionalText=null,this.processStyledBidirectionalText=null,this.pluginStatus="unavailable",this.pluginURL=null}setState(d){this.pluginStatus=d.pluginStatus,this.pluginURL=d.pluginURL}getState(){return{pluginStatus:this.pluginStatus,pluginURL:this.pluginURL}}setMethods(d){this.applyArabicShaping=d.applyArabicShaping,this.processBidirectionalText=d.processBidirectionalText,this.processStyledBidirectionalText=d.processStyledBidirectionalText}isParsed(){return this.applyArabicShaping!=null&&this.processBidirectionalText!=null&&this.processStyledBidirectionalText!=null}getPluginURL(){return this.pluginURL}getRTLTextPluginStatus(){return this.pluginStatus}};class gs{constructor(c,m){this.zoom=c,m?(this.now=m.now,this.fadeDuration=m.fadeDuration,this.zoomHistory=m.zoomHistory,this.transition=m.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new qf,this.transition={})}isSupportedScript(c){return(function(m,v){for(const S of m)if(!PO(S.charCodeAt(0),v))return!1;return!0})(c,ul.getRTLTextPluginStatus()==="loaded")}crossFadingFactor(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const c=this.zoom,m=c-Math.floor(c),v=this.crossFadingFactor();return c>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:m+(1-m)*v}:{fromScale:.5,toScale:1,t:1-(1-v)*m}}}class qa{constructor(c,m){this.property=c,this.value=m,this.expression=(function(v,S){if(q0(v))return new Fh(v,S);if(xn(v)){const P=Ui(v,S);if(P.result==="error")throw new Error(P.value.map((D=>`${D.key}: ${D.message}`)).join(", "));return P.value}{let P=v;return S.type==="color"&&typeof v=="string"?P=$t.parse(v):S.type!=="padding"||typeof v!="number"&&!Array.isArray(v)?S.type==="variableAnchorOffsetCollection"&&Array.isArray(v)&&(P=Mr.parse(v)):P=Hn.parse(v),{kind:"constant",evaluate:()=>P}}})(m===void 0?c.specification.default:m,c.specification)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}possiblyEvaluate(c,m,v){return this.property.possiblyEvaluate(this,c,m,v)}}class H0{constructor(c){this.property=c,this.value=new qa(c,void 0)}transitioned(c,m){return new V_(this.property,this.value,m,q({},c.transition,this.transition),c.now)}untransitioned(){return new V_(this.property,this.value,null,{},0)}}class K0{constructor(c){this._properties=c,this._values=Object.create(c.defaultTransitionablePropertyValues)}getValue(c){return ae(this._values[c].value.value)}setValue(c,m){Object.prototype.hasOwnProperty.call(this._values,c)||(this._values[c]=new H0(this._values[c].property)),this._values[c].value=new qa(this._values[c].property,m===null?void 0:ae(m))}getTransition(c){return ae(this._values[c].transition)}setTransition(c,m){Object.prototype.hasOwnProperty.call(this._values,c)||(this._values[c]=new H0(this._values[c].property)),this._values[c].transition=ae(m)||void 0}serialize(){const c={};for(const m of Object.keys(this._values)){const v=this.getValue(m);v!==void 0&&(c[m]=v);const S=this.getTransition(m);S!==void 0&&(c[`${m}-transition`]=S)}return c}transitioned(c,m){const v=new Wm(this._properties);for(const S of Object.keys(this._values))v._values[S]=this._values[S].transitioned(c,m._values[S]);return v}untransitioned(){const c=new Wm(this._properties);for(const m of Object.keys(this._values))c._values[m]=this._values[m].untransitioned();return c}}class V_{constructor(c,m,v,S,P){this.property=c,this.value=m,this.begin=P+S.delay||0,this.end=this.begin+S.duration||0,c.specification.transition&&(S.delay||S.duration)&&(this.prior=v)}possiblyEvaluate(c,m,v){const S=c.now||0,P=this.value.possiblyEvaluate(c,m,v),D=this.prior;if(D){if(S>this.end)return this.prior=null,P;if(this.value.isDataDriven())return this.prior=null,P;if(S<this.begin)return D.possiblyEvaluate(c,m,v);{const R=(S-this.begin)/(this.end-this.begin);return this.property.interpolate(D.possiblyEvaluate(c,m,v),P,(function(N){if(N<=0)return 0;if(N>=1)return 1;const V=N*N,W=V*N;return 4*(N<.5?W:3*(N-V)+W-.75)})(R))}}return P}}class Wm{constructor(c){this._properties=c,this._values=Object.create(c.defaultTransitioningPropertyValues)}possiblyEvaluate(c,m,v){const S=new Ym(this._properties);for(const P of Object.keys(this._values))S._values[P]=this._values[P].possiblyEvaluate(c,m,v);return S}hasTransition(){for(const c of Object.keys(this._values))if(this._values[c].prior)return!0;return!1}}class Gm{constructor(c){this._properties=c,this._values=Object.create(c.defaultPropertyValues)}hasValue(c){return this._values[c].value!==void 0}getValue(c){return ae(this._values[c].value)}setValue(c,m){this._values[c]=new qa(this._values[c].property,m===null?void 0:ae(m))}serialize(){const c={};for(const m of Object.keys(this._values)){const v=this.getValue(m);v!==void 0&&(c[m]=v)}return c}possiblyEvaluate(c,m,v){const S=new Ym(this._properties);for(const P of Object.keys(this._values))S._values[P]=this._values[P].possiblyEvaluate(c,m,v);return S}}class jo{constructor(c,m,v){this.property=c,this.value=m,this.parameters=v}isConstant(){return this.value.kind==="constant"}constantOr(c){return this.value.kind==="constant"?this.value.value:c}evaluate(c,m,v,S){return this.property.evaluate(this.value,this.parameters,c,m,v,S)}}class Ym{constructor(c){this._properties=c,this._values=Object.create(c.defaultPossiblyEvaluatedValues)}get(c){return this._values[c]}}class Sn{constructor(c){this.specification=c}possiblyEvaluate(c,m){if(c.isDataDriven())throw new Error("Value should not be data driven");return c.expression.evaluate(m)}interpolate(c,m,v){const S=Ua[this.specification.type];return S?S(c,m,v):c}}class Qn{constructor(c,m){this.specification=c,this.overrides=m}possiblyEvaluate(c,m,v,S){return new jo(this,c.expression.kind==="constant"||c.expression.kind==="camera"?{kind:"constant",value:c.expression.evaluate(m,null,{},v,S)}:c.expression,m)}interpolate(c,m,v){if(c.value.kind!=="constant"||m.value.kind!=="constant")return c;if(c.value.value===void 0||m.value.value===void 0)return new jo(this,{kind:"constant",value:void 0},c.parameters);const S=Ua[this.specification.type];if(S){const P=S(c.value.value,m.value.value,v);return new jo(this,{kind:"constant",value:P},c.parameters)}return c}evaluate(c,m,v,S,P,D){return c.kind==="constant"?c.value:c.evaluate(m,v,S,P,D)}}class J0 extends Qn{possiblyEvaluate(c,m,v,S){if(c.value===void 0)return new jo(this,{kind:"constant",value:void 0},m);if(c.expression.kind==="constant"){const P=c.expression.evaluate(m,null,{},v,S),D=c.property.specification.type==="resolvedImage"&&typeof P!="string"?P.name:P,R=this._calculate(D,D,D,m);return new jo(this,{kind:"constant",value:R},m)}if(c.expression.kind==="camera"){const P=this._calculate(c.expression.evaluate({zoom:m.zoom-1}),c.expression.evaluate({zoom:m.zoom}),c.expression.evaluate({zoom:m.zoom+1}),m);return new jo(this,{kind:"constant",value:P},m)}return new jo(this,c.expression,m)}evaluate(c,m,v,S,P,D){if(c.kind==="source"){const R=c.evaluate(m,v,S,P,D);return this._calculate(R,R,R,m)}return c.kind==="composite"?this._calculate(c.evaluate({zoom:Math.floor(m.zoom)-1},v,S),c.evaluate({zoom:Math.floor(m.zoom)},v,S),c.evaluate({zoom:Math.floor(m.zoom)+1},v,S),m):c.value}_calculate(c,m,v,S){return S.zoom>S.zoomHistory.lastIntegerZoom?{from:c,to:m}:{from:v,to:m}}interpolate(c){return c}}class ey{constructor(c){this.specification=c}possiblyEvaluate(c,m,v,S){if(c.value!==void 0){if(c.expression.kind==="constant"){const P=c.expression.evaluate(m,null,{},v,S);return this._calculate(P,P,P,m)}return this._calculate(c.expression.evaluate(new gs(Math.floor(m.zoom-1),m)),c.expression.evaluate(new gs(Math.floor(m.zoom),m)),c.expression.evaluate(new gs(Math.floor(m.zoom+1),m)),m)}}_calculate(c,m,v,S){return S.zoom>S.zoomHistory.lastIntegerZoom?{from:c,to:m}:{from:v,to:m}}interpolate(c){return c}}class Vc{constructor(c){this.specification=c}possiblyEvaluate(c,m,v,S){return!!c.expression.evaluate(m,null,{},v,S)}interpolate(){return!1}}class E{constructor(c){this.properties=c,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(const m in c){const v=c[m];v.specification.overridable&&this.overridableProperties.push(m);const S=this.defaultPropertyValues[m]=new qa(v,void 0),P=this.defaultTransitionablePropertyValues[m]=new H0(v);this.defaultTransitioningPropertyValues[m]=P.untransitioned(),this.defaultPossiblyEvaluatedValues[m]=S.possiblyEvaluate({})}}}dn("DataDrivenProperty",Qn),dn("DataConstantProperty",Sn),dn("CrossFadedDataDrivenProperty",J0),dn("CrossFadedProperty",ey),dn("ColorRampProperty",Vc);const u="-transition";class y extends nn{constructor(c,m){if(super(),this.id=c.id,this.type=c.type,this._featureFilter={filter:()=>!0,needGeometry:!1},c.type!=="custom"&&(this.metadata=c.metadata,this.minzoom=c.minzoom,this.maxzoom=c.maxzoom,c.type!=="background"&&(this.source=c.source,this.sourceLayer=c["source-layer"],this.filter=c.filter),m.layout&&(this._unevaluatedLayout=new Gm(m.layout)),m.paint)){this._transitionablePaint=new K0(m.paint);for(const v in c.paint)this.setPaintProperty(v,c.paint[v],{validate:!1});for(const v in c.layout)this.setLayoutProperty(v,c.layout[v],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new Ym(m.paint)}}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(c){return c==="visibility"?this.visibility:this._unevaluatedLayout.getValue(c)}setLayoutProperty(c,m,v={}){m!=null&&this._validate(np,`layers.${this.id}.layout.${c}`,c,m,v)||(c!=="visibility"?this._unevaluatedLayout.setValue(c,m):this.visibility=m)}getPaintProperty(c){return c.endsWith(u)?this._transitionablePaint.getTransition(c.slice(0,-11)):this._transitionablePaint.getValue(c)}setPaintProperty(c,m,v={}){if(m!=null&&this._validate(Uf,`layers.${this.id}.paint.${c}`,c,m,v))return!1;if(c.endsWith(u))return this._transitionablePaint.setTransition(c.slice(0,-11),m||void 0),!1;{const S=this._transitionablePaint._values[c],P=S.property.specification["property-type"]==="cross-faded-data-driven",D=S.value.isDataDriven(),R=S.value;this._transitionablePaint.setValue(c,m),this._handleSpecialPaintPropertyUpdate(c);const N=this._transitionablePaint._values[c].value;return N.isDataDriven()||D||P||this._handleOverridablePaintPropertyUpdate(c,R,N)}}_handleSpecialPaintPropertyUpdate(c){}_handleOverridablePaintPropertyUpdate(c,m,v){return!1}isHidden(c){return!!(this.minzoom&&c<this.minzoom)||!!(this.maxzoom&&c>=this.maxzoom)||this.visibility==="none"}updateTransitions(c){this._transitioningPaint=this._transitionablePaint.transitioned(c,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(c,m){c.getCrossfadeParameters&&(this._crossfadeParameters=c.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(c,void 0,m)),this.paint=this._transitioningPaint.possiblyEvaluate(c,void 0,m)}serialize(){const c={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(c.layout=c.layout||{},c.layout.visibility=this.visibility),me(c,((m,v)=>!(m===void 0||v==="layout"&&!Object.keys(m).length||v==="paint"&&!Object.keys(m).length)))}_validate(c,m,v,S,P={}){return(!P||P.validate!==!1)&&Vf(this,c.call(Qc,{key:m,layerType:this.type,objectKey:v,value:S,styleSpec:Ze,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const c in this.paint._values){const m=this.paint.get(c);if(m instanceof jo&&Yd(m.property.specification)&&(m.value.kind==="source"||m.value.kind==="composite")&&m.value.isStateDependent)return!0}return!1}}const w={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class O{constructor(c,m){this._structArray=c,this._pos1=m*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class A{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(c,m){return c._trim(),m&&(c.isTransferred=!0,m.push(c.arrayBuffer)),{length:c.length,arrayBuffer:c.arrayBuffer}}static deserialize(c){const m=Object.create(this.prototype);return m.arrayBuffer=c.arrayBuffer,m.length=c.length,m.capacity=c.arrayBuffer.byteLength/m.bytesPerElement,m._refreshViews(),m}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(c){this.reserve(c),this.length=c}reserve(c){if(c>this.capacity){this.capacity=Math.max(c,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const m=this.uint8;this._refreshViews(),m&&this.uint8.set(m)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function $(d,c=1){let m=0,v=0;return{members:d.map((S=>{const P=w[S.type].BYTES_PER_ELEMENT,D=m=z(m,Math.max(c,P)),R=S.components||1;return v=Math.max(v,P),m+=P*R,{name:S.name,type:S.type,components:R,offset:D}})),size:z(m,Math.max(v,c)),alignment:c}}function z(d,c){return Math.ceil(d/c)*c}class U extends A{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(c,m){const v=this.length;return this.resize(v+1),this.emplace(v,c,m)}emplace(c,m,v){const S=2*c;return this.int16[S+0]=m,this.int16[S+1]=v,c}}U.prototype.bytesPerElement=4,dn("StructArrayLayout2i4",U);class G extends A{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(c,m,v){const S=this.length;return this.resize(S+1),this.emplace(S,c,m,v)}emplace(c,m,v,S){const P=3*c;return this.int16[P+0]=m,this.int16[P+1]=v,this.int16[P+2]=S,c}}G.prototype.bytesPerElement=6,dn("StructArrayLayout3i6",G);class H extends A{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(c,m,v,S){const P=this.length;return this.resize(P+1),this.emplace(P,c,m,v,S)}emplace(c,m,v,S,P){const D=4*c;return this.int16[D+0]=m,this.int16[D+1]=v,this.int16[D+2]=S,this.int16[D+3]=P,c}}H.prototype.bytesPerElement=8,dn("StructArrayLayout4i8",H);class K extends A{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(c,m,v,S,P,D){const R=this.length;return this.resize(R+1),this.emplace(R,c,m,v,S,P,D)}emplace(c,m,v,S,P,D,R){const N=6*c;return this.int16[N+0]=m,this.int16[N+1]=v,this.int16[N+2]=S,this.int16[N+3]=P,this.int16[N+4]=D,this.int16[N+5]=R,c}}K.prototype.bytesPerElement=12,dn("StructArrayLayout2i4i12",K);class le extends A{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(c,m,v,S,P,D){const R=this.length;return this.resize(R+1),this.emplace(R,c,m,v,S,P,D)}emplace(c,m,v,S,P,D,R){const N=4*c,V=8*c;return this.int16[N+0]=m,this.int16[N+1]=v,this.uint8[V+4]=S,this.uint8[V+5]=P,this.uint8[V+6]=D,this.uint8[V+7]=R,c}}le.prototype.bytesPerElement=8,dn("StructArrayLayout2i4ub8",le);class pe extends A{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(c,m){const v=this.length;return this.resize(v+1),this.emplace(v,c,m)}emplace(c,m,v){const S=2*c;return this.float32[S+0]=m,this.float32[S+1]=v,c}}pe.prototype.bytesPerElement=8,dn("StructArrayLayout2f8",pe);class _e extends A{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(c,m,v,S,P,D,R,N,V,W){const Y=this.length;return this.resize(Y+1),this.emplace(Y,c,m,v,S,P,D,R,N,V,W)}emplace(c,m,v,S,P,D,R,N,V,W,Y){const ee=10*c;return this.uint16[ee+0]=m,this.uint16[ee+1]=v,this.uint16[ee+2]=S,this.uint16[ee+3]=P,this.uint16[ee+4]=D,this.uint16[ee+5]=R,this.uint16[ee+6]=N,this.uint16[ee+7]=V,this.uint16[ee+8]=W,this.uint16[ee+9]=Y,c}}_e.prototype.bytesPerElement=20,dn("StructArrayLayout10ui20",_e);class Ee extends A{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(c,m,v,S,P,D,R,N,V,W,Y,ee){const re=this.length;return this.resize(re+1),this.emplace(re,c,m,v,S,P,D,R,N,V,W,Y,ee)}emplace(c,m,v,S,P,D,R,N,V,W,Y,ee,re){const he=12*c;return this.int16[he+0]=m,this.int16[he+1]=v,this.int16[he+2]=S,this.int16[he+3]=P,this.uint16[he+4]=D,this.uint16[he+5]=R,this.uint16[he+6]=N,this.uint16[he+7]=V,this.int16[he+8]=W,this.int16[he+9]=Y,this.int16[he+10]=ee,this.int16[he+11]=re,c}}Ee.prototype.bytesPerElement=24,dn("StructArrayLayout4i4ui4i24",Ee);class Me extends A{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(c,m,v){const S=this.length;return this.resize(S+1),this.emplace(S,c,m,v)}emplace(c,m,v,S){const P=3*c;return this.float32[P+0]=m,this.float32[P+1]=v,this.float32[P+2]=S,c}}Me.prototype.bytesPerElement=12,dn("StructArrayLayout3f12",Me);class Le extends A{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(c){const m=this.length;return this.resize(m+1),this.emplace(m,c)}emplace(c,m){return this.uint32[1*c+0]=m,c}}Le.prototype.bytesPerElement=4,dn("StructArrayLayout1ul4",Le);class Ne extends A{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(c,m,v,S,P,D,R,N,V){const W=this.length;return this.resize(W+1),this.emplace(W,c,m,v,S,P,D,R,N,V)}emplace(c,m,v,S,P,D,R,N,V,W){const Y=10*c,ee=5*c;return this.int16[Y+0]=m,this.int16[Y+1]=v,this.int16[Y+2]=S,this.int16[Y+3]=P,this.int16[Y+4]=D,this.int16[Y+5]=R,this.uint32[ee+3]=N,this.uint16[Y+8]=V,this.uint16[Y+9]=W,c}}Ne.prototype.bytesPerElement=20,dn("StructArrayLayout6i1ul2ui20",Ne);class ke extends A{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(c,m,v,S,P,D){const R=this.length;return this.resize(R+1),this.emplace(R,c,m,v,S,P,D)}emplace(c,m,v,S,P,D,R){const N=6*c;return this.int16[N+0]=m,this.int16[N+1]=v,this.int16[N+2]=S,this.int16[N+3]=P,this.int16[N+4]=D,this.int16[N+5]=R,c}}ke.prototype.bytesPerElement=12,dn("StructArrayLayout2i2i2i12",ke);class Xe extends A{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(c,m,v,S,P){const D=this.length;return this.resize(D+1),this.emplace(D,c,m,v,S,P)}emplace(c,m,v,S,P,D){const R=4*c,N=8*c;return this.float32[R+0]=m,this.float32[R+1]=v,this.float32[R+2]=S,this.int16[N+6]=P,this.int16[N+7]=D,c}}Xe.prototype.bytesPerElement=16,dn("StructArrayLayout2f1f2i16",Xe);class Ke extends A{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(c,m,v,S,P,D){const R=this.length;return this.resize(R+1),this.emplace(R,c,m,v,S,P,D)}emplace(c,m,v,S,P,D,R){const N=16*c,V=4*c,W=8*c;return this.uint8[N+0]=m,this.uint8[N+1]=v,this.float32[V+1]=S,this.float32[V+2]=P,this.int16[W+6]=D,this.int16[W+7]=R,c}}Ke.prototype.bytesPerElement=16,dn("StructArrayLayout2ub2f2i16",Ke);class st extends A{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(c,m,v){const S=this.length;return this.resize(S+1),this.emplace(S,c,m,v)}emplace(c,m,v,S){const P=3*c;return this.uint16[P+0]=m,this.uint16[P+1]=v,this.uint16[P+2]=S,c}}st.prototype.bytesPerElement=6,dn("StructArrayLayout3ui6",st);class xt extends A{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(c,m,v,S,P,D,R,N,V,W,Y,ee,re,he,ue,Ae,Te){const nt=this.length;return this.resize(nt+1),this.emplace(nt,c,m,v,S,P,D,R,N,V,W,Y,ee,re,he,ue,Ae,Te)}emplace(c,m,v,S,P,D,R,N,V,W,Y,ee,re,he,ue,Ae,Te,nt){const Ve=24*c,qe=12*c,pt=48*c;return this.int16[Ve+0]=m,this.int16[Ve+1]=v,this.uint16[Ve+2]=S,this.uint16[Ve+3]=P,this.uint32[qe+2]=D,this.uint32[qe+3]=R,this.uint32[qe+4]=N,this.uint16[Ve+10]=V,this.uint16[Ve+11]=W,this.uint16[Ve+12]=Y,this.float32[qe+7]=ee,this.float32[qe+8]=re,this.uint8[pt+36]=he,this.uint8[pt+37]=ue,this.uint8[pt+38]=Ae,this.uint32[qe+10]=Te,this.int16[Ve+22]=nt,c}}xt.prototype.bytesPerElement=48,dn("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",xt);class Qt extends A{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(c,m,v,S,P,D,R,N,V,W,Y,ee,re,he,ue,Ae,Te,nt,Ve,qe,pt,Dt,ln,zn,un,en,Pn,vn){const fn=this.length;return this.resize(fn+1),this.emplace(fn,c,m,v,S,P,D,R,N,V,W,Y,ee,re,he,ue,Ae,Te,nt,Ve,qe,pt,Dt,ln,zn,un,en,Pn,vn)}emplace(c,m,v,S,P,D,R,N,V,W,Y,ee,re,he,ue,Ae,Te,nt,Ve,qe,pt,Dt,ln,zn,un,en,Pn,vn,fn){const vt=32*c,Mn=16*c;return this.int16[vt+0]=m,this.int16[vt+1]=v,this.int16[vt+2]=S,this.int16[vt+3]=P,this.int16[vt+4]=D,this.int16[vt+5]=R,this.int16[vt+6]=N,this.int16[vt+7]=V,this.uint16[vt+8]=W,this.uint16[vt+9]=Y,this.uint16[vt+10]=ee,this.uint16[vt+11]=re,this.uint16[vt+12]=he,this.uint16[vt+13]=ue,this.uint16[vt+14]=Ae,this.uint16[vt+15]=Te,this.uint16[vt+16]=nt,this.uint16[vt+17]=Ve,this.uint16[vt+18]=qe,this.uint16[vt+19]=pt,this.uint16[vt+20]=Dt,this.uint16[vt+21]=ln,this.uint16[vt+22]=zn,this.uint32[Mn+12]=un,this.float32[Mn+13]=en,this.float32[Mn+14]=Pn,this.uint16[vt+30]=vn,this.uint16[vt+31]=fn,c}}Qt.prototype.bytesPerElement=64,dn("StructArrayLayout8i15ui1ul2f2ui64",Qt);class Gt extends A{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(c){const m=this.length;return this.resize(m+1),this.emplace(m,c)}emplace(c,m){return this.float32[1*c+0]=m,c}}Gt.prototype.bytesPerElement=4,dn("StructArrayLayout1f4",Gt);class tn extends A{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(c,m,v){const S=this.length;return this.resize(S+1),this.emplace(S,c,m,v)}emplace(c,m,v,S){const P=3*c;return this.uint16[6*c+0]=m,this.float32[P+1]=v,this.float32[P+2]=S,c}}tn.prototype.bytesPerElement=12,dn("StructArrayLayout1ui2f12",tn);class Zt extends A{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(c,m,v){const S=this.length;return this.resize(S+1),this.emplace(S,c,m,v)}emplace(c,m,v,S){const P=4*c;return this.uint32[2*c+0]=m,this.uint16[P+2]=v,this.uint16[P+3]=S,c}}Zt.prototype.bytesPerElement=8,dn("StructArrayLayout1ul2ui8",Zt);class Xt extends A{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(c,m){const v=this.length;return this.resize(v+1),this.emplace(v,c,m)}emplace(c,m,v){const S=2*c;return this.uint16[S+0]=m,this.uint16[S+1]=v,c}}Xt.prototype.bytesPerElement=4,dn("StructArrayLayout2ui4",Xt);class bn extends A{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(c){const m=this.length;return this.resize(m+1),this.emplace(m,c)}emplace(c,m){return this.uint16[1*c+0]=m,c}}bn.prototype.bytesPerElement=2,dn("StructArrayLayout1ui2",bn);class nr extends A{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(c,m,v,S){const P=this.length;return this.resize(P+1),this.emplace(P,c,m,v,S)}emplace(c,m,v,S,P){const D=4*c;return this.float32[D+0]=m,this.float32[D+1]=v,this.float32[D+2]=S,this.float32[D+3]=P,c}}nr.prototype.bytesPerElement=16,dn("StructArrayLayout4f16",nr);class Ht extends O{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new p(this.anchorPointX,this.anchorPointY)}}Ht.prototype.size=20;class Vt extends Ne{get(c){return new Ht(this,c)}}dn("CollisionBoxArray",Vt);class Wn extends O{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(c){this._structArray.uint8[this._pos1+37]=c}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(c){this._structArray.uint8[this._pos1+38]=c}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(c){this._structArray.uint32[this._pos4+10]=c}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}Wn.prototype.size=48;class os extends xt{get(c){return new Wn(this,c)}}dn("PlacedSymbolArray",os);class Yn extends O{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(c){this._structArray.uint32[this._pos4+12]=c}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+14]}get textAnchorOffsetStartIndex(){return this._structArray.uint16[this._pos2+30]}get textAnchorOffsetEndIndex(){return this._structArray.uint16[this._pos2+31]}}Yn.prototype.size=64;class Lr extends Qt{get(c){return new Yn(this,c)}}dn("SymbolInstanceArray",Lr);class Vi extends Gt{getoffsetX(c){return this.float32[1*c+0]}}dn("GlyphOffsetArray",Vi);class to extends G{getx(c){return this.int16[3*c+0]}gety(c){return this.int16[3*c+1]}gettileUnitDistanceFromAnchor(c){return this.int16[3*c+2]}}dn("SymbolLineVertexArray",to);class Tl extends O{get textAnchor(){return this._structArray.uint16[this._pos2+0]}get textOffset0(){return this._structArray.float32[this._pos4+1]}get textOffset1(){return this._structArray.float32[this._pos4+2]}}Tl.prototype.size=12;class Br extends tn{get(c){return new Tl(this,c)}}dn("TextAnchorOffsetArray",Br);class da extends O{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}da.prototype.size=8;class Pa extends Zt{get(c){return new da(this,c)}}dn("FeatureIndexArray",Pa);class pa extends U{}class Da extends U{}class Pl extends U{}class op extends K{}class Bh extends le{}class Xf extends pe{}class Dl extends _e{}class ty extends Ee{}class Wf extends Me{}class Il extends Le{}class Ml extends ke{}class Wu extends Ke{}class Rl extends st{}class Ko extends Xt{}const ma=$([{name:"a_pos",components:2,type:"Int16"}],4),{members:cl}=ma;class jr{constructor(c=[]){this.segments=c}prepareSegment(c,m,v,S){let P=this.segments[this.segments.length-1];return c>jr.MAX_VERTEX_ARRAY_LENGTH&&se(`Max vertices per segment is ${jr.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${c}`),(!P||P.vertexLength+c>jr.MAX_VERTEX_ARRAY_LENGTH||P.sortKey!==S)&&(P={vertexOffset:m.length,primitiveOffset:v.length,vertexLength:0,primitiveLength:0},S!==void 0&&(P.sortKey=S),this.segments.push(P)),P}get(){return this.segments}destroy(){for(const c of this.segments)for(const m in c.vaos)c.vaos[m].destroy()}static simpleSegment(c,m,v,S){return new jr([{vertexOffset:c,primitiveOffset:m,vertexLength:v,primitiveLength:S,vaos:{},sortKey:0}])}}function qc(d,c){return 256*(d=Q(Math.floor(d),0,255))+Q(Math.floor(c),0,255)}jr.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,dn("SegmentVector",jr);const ap=$([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]);var Nh={exports:{}},rv={exports:{}};rv.exports=function(d,c){var m,v,S,P,D,R,N,V;for(v=d.length-(m=3&d.length),S=c,D=3432918353,R=461845907,V=0;V<v;)N=255&d.charCodeAt(V)|(255&d.charCodeAt(++V))<<8|(255&d.charCodeAt(++V))<<16|(255&d.charCodeAt(++V))<<24,++V,S=27492+(65535&(P=5*(65535&(S=(S^=N=(65535&(N=(N=(65535&N)*D+(((N>>>16)*D&65535)<<16)&4294967295)<<15|N>>>17))*R+(((N>>>16)*R&65535)<<16)&4294967295)<<13|S>>>19))+((5*(S>>>16)&65535)<<16)&4294967295))+((58964+(P>>>16)&65535)<<16);switch(N=0,m){case 3:N^=(255&d.charCodeAt(V+2))<<16;case 2:N^=(255&d.charCodeAt(V+1))<<8;case 1:S^=N=(65535&(N=(N=(65535&(N^=255&d.charCodeAt(V)))*D+(((N>>>16)*D&65535)<<16)&4294967295)<<15|N>>>17))*R+(((N>>>16)*R&65535)<<16)&4294967295}return S^=d.length,S=2246822507*(65535&(S^=S>>>16))+((2246822507*(S>>>16)&65535)<<16)&4294967295,S=3266489909*(65535&(S^=S>>>13))+((3266489909*(S>>>16)&65535)<<16)&4294967295,(S^=S>>>16)>>>0};var q_=rv.exports,iv={exports:{}};iv.exports=function(d,c){for(var m,v=d.length,S=c^v,P=0;v>=4;)m=1540483477*(65535&(m=255&d.charCodeAt(P)|(255&d.charCodeAt(++P))<<8|(255&d.charCodeAt(++P))<<16|(255&d.charCodeAt(++P))<<24))+((1540483477*(m>>>16)&65535)<<16),S=1540483477*(65535&S)+((1540483477*(S>>>16)&65535)<<16)^(m=1540483477*(65535&(m^=m>>>24))+((1540483477*(m>>>16)&65535)<<16)),v-=4,++P;switch(v){case 3:S^=(255&d.charCodeAt(P+2))<<16;case 2:S^=(255&d.charCodeAt(P+1))<<8;case 1:S=1540483477*(65535&(S^=255&d.charCodeAt(P)))+((1540483477*(S>>>16)&65535)<<16)}return S=1540483477*(65535&(S^=S>>>13))+((1540483477*(S>>>16)&65535)<<16),(S^=S>>>15)>>>0};var pu=q_,Z_=iv.exports;Nh.exports=pu,Nh.exports.murmur3=pu,Nh.exports.murmur2=Z_;var Hm=l(Nh.exports);class lp{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(c,m,v,S){this.ids.push(ny(c)),this.positions.push(m,v,S)}getPositions(c){if(!this.indexed)throw new Error("Trying to get index, but feature positions are not indexed");const m=ny(c);let v=0,S=this.ids.length-1;for(;v<S;){const D=v+S>>1;this.ids[D]>=m?S=D:v=D+1}const P=[];for(;this.ids[v]===m;)P.push({index:this.positions[3*v],start:this.positions[3*v+1],end:this.positions[3*v+2]}),v++;return P}static serialize(c,m){const v=new Float64Array(c.ids),S=new Uint32Array(c.positions);return Km(v,S,0,v.length-1),m&&m.push(v.buffer,S.buffer),{ids:v,positions:S}}static deserialize(c){const m=new lp;return m.ids=c.ids,m.positions=c.positions,m.indexed=!0,m}}function ny(d){const c=+d;return!isNaN(c)&&c<=Number.MAX_SAFE_INTEGER?c:Hm(String(d))}function Km(d,c,m,v){for(;m<v;){const S=d[m+v>>1];let P=m-1,D=v+1;for(;;){do P++;while(d[P]<S);do D--;while(d[D]>S);if(P>=D)break;up(d,P,D),up(c,3*P,3*D),up(c,3*P+1,3*D+1),up(c,3*P+2,3*D+2)}D-m<v-D?(Km(d,c,m,D),m=D+1):(Km(d,c,D+1,v),v=D)}}function up(d,c,m){const v=d[c];d[c]=d[m],d[m]=v}dn("FeaturePositionMap",lp);class Gf{constructor(c,m){this.gl=c.gl,this.location=m}}class sv extends Gf{constructor(c,m){super(c,m),this.current=0}set(c){this.current!==c&&(this.current=c,this.gl.uniform1f(this.location,c))}}class X_ extends Gf{constructor(c,m){super(c,m),this.current=[0,0,0,0]}set(c){c[0]===this.current[0]&&c[1]===this.current[1]&&c[2]===this.current[2]&&c[3]===this.current[3]||(this.current=c,this.gl.uniform4f(this.location,c[0],c[1],c[2],c[3]))}}class mA extends Gf{constructor(c,m){super(c,m),this.current=$t.transparent}set(c){c.r===this.current.r&&c.g===this.current.g&&c.b===this.current.b&&c.a===this.current.a||(this.current=c,this.gl.uniform4f(this.location,c.r,c.g,c.b,c.a))}}const IO=new Float32Array(16);function Ur(d){return[qc(255*d.r,255*d.g),qc(255*d.b,255*d.a)]}class ov{constructor(c,m,v){this.value=c,this.uniformNames=m.map((S=>`u_${S}`)),this.type=v}setUniform(c,m,v){c.set(v.constantOr(this.value))}getBinding(c,m,v){return this.type==="color"?new mA(c,m):new sv(c,m)}}class ry{constructor(c,m){this.uniformNames=m.map((v=>`u_${v}`)),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(c,m){this.pixelRatioFrom=m.pixelRatio,this.pixelRatioTo=c.pixelRatio,this.patternFrom=m.tlbr,this.patternTo=c.tlbr}setUniform(c,m,v,S){const P=S==="u_pattern_to"?this.patternTo:S==="u_pattern_from"?this.patternFrom:S==="u_pixel_ratio_to"?this.pixelRatioTo:S==="u_pixel_ratio_from"?this.pixelRatioFrom:null;P&&c.set(P)}getBinding(c,m,v){return v.substr(0,9)==="u_pattern"?new X_(c,m):new sv(c,m)}}class mu{constructor(c,m,v,S){this.expression=c,this.type=v,this.maxValue=0,this.paintVertexAttributes=m.map((P=>({name:`a_${P}`,type:"Float32",components:v==="color"?2:1,offset:0}))),this.paintVertexArray=new S}populatePaintArray(c,m,v,S,P){const D=this.paintVertexArray.length,R=this.expression.evaluate(new gs(0),m,{},S,[],P);this.paintVertexArray.resize(c),this._setPaintValue(D,c,R)}updatePaintArray(c,m,v,S){const P=this.expression.evaluate({zoom:0},v,S);this._setPaintValue(c,m,P)}_setPaintValue(c,m,v){if(this.type==="color"){const S=Ur(v);for(let P=c;P<m;P++)this.paintVertexArray.emplace(P,S[0],S[1])}else{for(let S=c;S<m;S++)this.paintVertexArray.emplace(S,v);this.maxValue=Math.max(this.maxValue,Math.abs(v))}}upload(c){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=c.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class Gu{constructor(c,m,v,S,P,D){this.expression=c,this.uniformNames=m.map((R=>`u_${R}_t`)),this.type=v,this.useIntegerZoom=S,this.zoom=P,this.maxValue=0,this.paintVertexAttributes=m.map((R=>({name:`a_${R}`,type:"Float32",components:v==="color"?4:2,offset:0}))),this.paintVertexArray=new D}populatePaintArray(c,m,v,S,P){const D=this.expression.evaluate(new gs(this.zoom),m,{},S,[],P),R=this.expression.evaluate(new gs(this.zoom+1),m,{},S,[],P),N=this.paintVertexArray.length;this.paintVertexArray.resize(c),this._setPaintValue(N,c,D,R)}updatePaintArray(c,m,v,S){const P=this.expression.evaluate({zoom:this.zoom},v,S),D=this.expression.evaluate({zoom:this.zoom+1},v,S);this._setPaintValue(c,m,P,D)}_setPaintValue(c,m,v,S){if(this.type==="color"){const P=Ur(v),D=Ur(S);for(let R=c;R<m;R++)this.paintVertexArray.emplace(R,P[0],P[1],D[0],D[1])}else{for(let P=c;P<m;P++)this.paintVertexArray.emplace(P,v,S);this.maxValue=Math.max(this.maxValue,Math.abs(v),Math.abs(S))}}upload(c){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=c.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(c,m){const v=this.useIntegerZoom?Math.floor(m.zoom):m.zoom,S=Q(this.expression.interpolationFactor(v,this.zoom,this.zoom+1),0,1);c.set(S)}getBinding(c,m,v){return new sv(c,m)}}class cp{constructor(c,m,v,S,P,D){this.expression=c,this.type=m,this.useIntegerZoom=v,this.zoom=S,this.layerId=D,this.zoomInPaintVertexArray=new P,this.zoomOutPaintVertexArray=new P}populatePaintArray(c,m,v){const S=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(c),this.zoomOutPaintVertexArray.resize(c),this._setPaintValues(S,c,m.patterns&&m.patterns[this.layerId],v)}updatePaintArray(c,m,v,S,P){this._setPaintValues(c,m,v.patterns&&v.patterns[this.layerId],P)}_setPaintValues(c,m,v,S){if(!S||!v)return;const{min:P,mid:D,max:R}=v,N=S[P],V=S[D],W=S[R];if(N&&V&&W)for(let Y=c;Y<m;Y++)this.zoomInPaintVertexArray.emplace(Y,V.tl[0],V.tl[1],V.br[0],V.br[1],N.tl[0],N.tl[1],N.br[0],N.br[1],V.pixelRatio,N.pixelRatio),this.zoomOutPaintVertexArray.emplace(Y,V.tl[0],V.tl[1],V.br[0],V.br[1],W.tl[0],W.tl[1],W.br[0],W.br[1],V.pixelRatio,W.pixelRatio)}upload(c){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=c.createVertexBuffer(this.zoomInPaintVertexArray,ap.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=c.createVertexBuffer(this.zoomOutPaintVertexArray,ap.members,this.expression.isStateDependent))}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class gA{constructor(c,m,v){this.binders={},this._buffers=[];const S=[];for(const P in c.paint._values){if(!v(P))continue;const D=c.paint.get(P);if(!(D instanceof jo&&Yd(D.property.specification)))continue;const R=DI(P,c.type),N=D.value,V=D.property.specification.type,W=D.property.useIntegerZoom,Y=D.property.specification["property-type"],ee=Y==="cross-faded"||Y==="cross-faded-data-driven";if(N.kind==="constant")this.binders[P]=ee?new ry(N.value,R):new ov(N.value,R,V),S.push(`/u_${P}`);else if(N.kind==="source"||ee){const re=av(P,V,"source");this.binders[P]=ee?new cp(N,V,W,m,re,c.id):new mu(N,R,V,re),S.push(`/a_${P}`)}else{const re=av(P,V,"composite");this.binders[P]=new Gu(N,R,V,W,m,re),S.push(`/z_${P}`)}}this.cacheKey=S.sort().join("")}getMaxValue(c){const m=this.binders[c];return m instanceof mu||m instanceof Gu?m.maxValue:0}populatePaintArrays(c,m,v,S,P){for(const D in this.binders){const R=this.binders[D];(R instanceof mu||R instanceof Gu||R instanceof cp)&&R.populatePaintArray(c,m,v,S,P)}}setConstantPatternPositions(c,m){for(const v in this.binders){const S=this.binders[v];S instanceof ry&&S.setConstantPatternPositions(c,m)}}updatePaintArrays(c,m,v,S,P){let D=!1;for(const R in c){const N=m.getPositions(R);for(const V of N){const W=v.feature(V.index);for(const Y in this.binders){const ee=this.binders[Y];if((ee instanceof mu||ee instanceof Gu||ee instanceof cp)&&ee.expression.isStateDependent===!0){const re=S.paint.get(Y);ee.expression=re.value,ee.updatePaintArray(V.start,V.end,W,c[R],P),D=!0}}}}return D}defines(){const c=[];for(const m in this.binders){const v=this.binders[m];(v instanceof ov||v instanceof ry)&&c.push(...v.uniformNames.map((S=>`#define HAS_UNIFORM_${S}`)))}return c}getBinderAttributes(){const c=[];for(const m in this.binders){const v=this.binders[m];if(v instanceof mu||v instanceof Gu)for(let S=0;S<v.paintVertexAttributes.length;S++)c.push(v.paintVertexAttributes[S].name);else if(v instanceof cp)for(let S=0;S<ap.members.length;S++)c.push(ap.members[S].name)}return c}getBinderUniforms(){const c=[];for(const m in this.binders){const v=this.binders[m];if(v instanceof ov||v instanceof ry||v instanceof Gu)for(const S of v.uniformNames)c.push(S)}return c}getPaintVertexBuffers(){return this._buffers}getUniforms(c,m){const v=[];for(const S in this.binders){const P=this.binders[S];if(P instanceof ov||P instanceof ry||P instanceof Gu){for(const D of P.uniformNames)if(m[D]){const R=P.getBinding(c,m[D],D);v.push({name:D,property:S,binding:R})}}}return v}setUniforms(c,m,v,S){for(const{name:P,property:D,binding:R}of m)this.binders[D].setUniform(R,S,v.get(D),P)}updatePaintBuffers(c){this._buffers=[];for(const m in this.binders){const v=this.binders[m];if(c&&v instanceof cp){const S=c.fromScale===2?v.zoomInPaintVertexBuffer:v.zoomOutPaintVertexBuffer;S&&this._buffers.push(S)}else(v instanceof mu||v instanceof Gu)&&v.paintVertexBuffer&&this._buffers.push(v.paintVertexBuffer)}}upload(c){for(const m in this.binders){const v=this.binders[m];(v instanceof mu||v instanceof Gu||v instanceof cp)&&v.upload(c)}this.updatePaintBuffers()}destroy(){for(const c in this.binders){const m=this.binders[c];(m instanceof mu||m instanceof Gu||m instanceof cp)&&m.destroy()}}}class ga{constructor(c,m,v=(()=>!0)){this.programConfigurations={};for(const S of c)this.programConfigurations[S.id]=new gA(S,m,v);this.needsUpload=!1,this._featureMap=new lp,this._bufferOffset=0}populatePaintArrays(c,m,v,S,P,D){for(const R in this.programConfigurations)this.programConfigurations[R].populatePaintArrays(c,m,S,P,D);m.id!==void 0&&this._featureMap.add(m.id,v,this._bufferOffset,c),this._bufferOffset=c,this.needsUpload=!0}updatePaintArrays(c,m,v,S){for(const P of v)this.needsUpload=this.programConfigurations[P.id].updatePaintArrays(c,this._featureMap,m,P,S)||this.needsUpload}get(c){return this.programConfigurations[c]}upload(c){if(this.needsUpload){for(const m in this.programConfigurations)this.programConfigurations[m].upload(c);this.needsUpload=!1}}destroy(){for(const c in this.programConfigurations)this.programConfigurations[c].destroy()}}function DI(d,c){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[d]||[d.replace(`${c}-`,"").replace(/-/g,"_")]}function av(d,c,m){const v={color:{source:pe,composite:nr},number:{source:Gt,composite:pe}},S=(function(P){return{"line-pattern":{source:Dl,composite:Dl},"fill-pattern":{source:Dl,composite:Dl},"fill-extrusion-pattern":{source:Dl,composite:Dl}}[P]})(d);return S&&S[m]||v[c][m]}dn("ConstantBinder",ov),dn("CrossFadedConstantBinder",ry),dn("SourceExpressionBinder",mu),dn("CrossFadedCompositeBinder",cp),dn("CompositeExpressionBinder",Gu),dn("ProgramConfiguration",gA,{omit:["_buffers"]}),dn("ProgramConfigurationSet",ga);const no=8192,W_=Math.pow(2,14)-1,MO=-W_-1;function Jo(d){const c=no/d.extent,m=d.loadGeometry();for(let v=0;v<m.length;v++){const S=m[v];for(let P=0;P<S.length;P++){const D=S[P],R=Math.round(D.x*c),N=Math.round(D.y*c);D.x=Q(R,MO,W_),D.y=Q(N,MO,W_),(R<D.x||R>D.x+1||N<D.y||N>D.y+1)&&se("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return m}function Fl(d,c){return{type:d.type,id:d.id,properties:d.properties,geometry:c?Jo(d):[]}}function iy(d,c,m,v,S){d.emplaceBack(2*c+(v+1)/2,2*m+(S+1)/2)}class G_{constructor(c){this.zoom=c.zoom,this.overscaling=c.overscaling,this.layers=c.layers,this.layerIds=this.layers.map((m=>m.id)),this.index=c.index,this.hasPattern=!1,this.layoutVertexArray=new Da,this.indexArray=new Rl,this.segments=new jr,this.programConfigurations=new ga(c.layers,c.zoom),this.stateDependentLayerIds=this.layers.filter((m=>m.isStateDependent())).map((m=>m.id))}populate(c,m,v){const S=this.layers[0],P=[];let D=null,R=!1;S.type==="circle"&&(D=S.layout.get("circle-sort-key"),R=!D.isConstant());for(const{feature:N,id:V,index:W,sourceLayerIndex:Y}of c){const ee=this.layers[0]._featureFilter.needGeometry,re=Fl(N,ee);if(!this.layers[0]._featureFilter.filter(new gs(this.zoom),re,v))continue;const he=R?D.evaluate(re,{},v):void 0,ue={id:V,properties:N.properties,type:N.type,sourceLayerIndex:Y,index:W,geometry:ee?re.geometry:Jo(N),patterns:{},sortKey:he};P.push(ue)}R&&P.sort(((N,V)=>N.sortKey-V.sortKey));for(const N of P){const{geometry:V,index:W,sourceLayerIndex:Y}=N,ee=c[W].feature;this.addFeature(N,V,W,v),m.featureIndex.insert(ee,V,W,Y,this.index)}}update(c,m,v){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(c,m,this.stateDependentLayers,v)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(c){this.uploaded||(this.layoutVertexBuffer=c.createVertexBuffer(this.layoutVertexArray,cl),this.indexBuffer=c.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(c),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(c,m,v,S){for(const P of m)for(const D of P){const R=D.x,N=D.y;if(R<0||R>=no||N<0||N>=no)continue;const V=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,c.sortKey),W=V.vertexLength;iy(this.layoutVertexArray,R,N,-1,-1),iy(this.layoutVertexArray,R,N,1,-1),iy(this.layoutVertexArray,R,N,1,1),iy(this.layoutVertexArray,R,N,-1,1),this.indexArray.emplaceBack(W,W+1,W+2),this.indexArray.emplaceBack(W,W+3,W+2),V.vertexLength+=4,V.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,c,v,{},S)}}function lv(d,c){for(let m=0;m<d.length;m++)if(Jm(c,d[m]))return!0;for(let m=0;m<c.length;m++)if(Jm(d,c[m]))return!0;return!!uv(d,c)}function yA(d,c,m){return!!Jm(d,c)||!!zh(c,d,m)}function Y_(d,c){if(d.length===1)return Yf(c,d[0]);for(let m=0;m<c.length;m++){const v=c[m];for(let S=0;S<v.length;S++)if(Jm(d,v[S]))return!0}for(let m=0;m<d.length;m++)if(Yf(c,d[m]))return!0;for(let m=0;m<c.length;m++)if(uv(d,c[m]))return!0;return!1}function vA(d,c,m){if(d.length>1){if(uv(d,c))return!0;for(let v=0;v<c.length;v++)if(zh(c[v],d,m))return!0}for(let v=0;v<d.length;v++)if(zh(d[v],c,m))return!0;return!1}function uv(d,c){if(d.length===0||c.length===0)return!1;for(let m=0;m<d.length-1;m++){const v=d[m],S=d[m+1];for(let P=0;P<c.length-1;P++)if(RO(v,S,c[P],c[P+1]))return!0}return!1}function RO(d,c,m,v){return ge(d,m,v)!==ge(c,m,v)&&ge(d,c,m)!==ge(d,c,v)}function zh(d,c,m){const v=m*m;if(c.length===1)return d.distSqr(c[0])<v;for(let S=1;S<c.length;S++)if(bA(d,c[S-1],c[S])<v)return!0;return!1}function bA(d,c,m){const v=c.distSqr(m);if(v===0)return d.distSqr(c);const S=((d.x-c.x)*(m.x-c.x)+(d.y-c.y)*(m.y-c.y))/v;return d.distSqr(S<0?c:S>1?m:m.sub(c)._mult(S)._add(c))}function Yf(d,c){let m,v,S,P=!1;for(let D=0;D<d.length;D++){m=d[D];for(let R=0,N=m.length-1;R<m.length;N=R++)v=m[R],S=m[N],v.y>c.y!=S.y>c.y&&c.x<(S.x-v.x)*(c.y-v.y)/(S.y-v.y)+v.x&&(P=!P)}return P}function Jm(d,c){let m=!1;for(let v=0,S=d.length-1;v<d.length;S=v++){const P=d[v],D=d[S];P.y>c.y!=D.y>c.y&&c.x<(D.x-P.x)*(c.y-P.y)/(D.y-P.y)+P.x&&(m=!m)}return m}function _A(d,c,m){const v=m[0],S=m[2];if(d.x<v.x&&c.x<v.x||d.x>S.x&&c.x>S.x||d.y<v.y&&c.y<v.y||d.y>S.y&&c.y>S.y)return!1;const P=ge(d,c,m[0]);return P!==ge(d,c,m[1])||P!==ge(d,c,m[2])||P!==ge(d,c,m[3])}function eg(d,c,m){const v=c.paint.get(d).value;return v.kind==="constant"?v.value:m.programConfigurations.get(c.id).getMaxValue(d)}function H_(d){return Math.sqrt(d[0]*d[0]+d[1]*d[1])}function K_(d,c,m,v,S){if(!c[0]&&!c[1])return d;const P=p.convert(c)._mult(S);m==="viewport"&&P._rotate(-v);const D=[];for(let R=0;R<d.length;R++)D.push(d[R].sub(P));return D}let xA,FO;dn("CircleBucket",G_,{omit:["layers"]});var wA={get paint(){return FO=FO||new E({"circle-radius":new Qn(Ze.paint_circle["circle-radius"]),"circle-color":new Qn(Ze.paint_circle["circle-color"]),"circle-blur":new Qn(Ze.paint_circle["circle-blur"]),"circle-opacity":new Qn(Ze.paint_circle["circle-opacity"]),"circle-translate":new Sn(Ze.paint_circle["circle-translate"]),"circle-translate-anchor":new Sn(Ze.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new Sn(Ze.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new Sn(Ze.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new Qn(Ze.paint_circle["circle-stroke-width"]),"circle-stroke-color":new Qn(Ze.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new Qn(Ze.paint_circle["circle-stroke-opacity"])})},get layout(){return xA=xA||new E({"circle-sort-key":new Qn(Ze.layout_circle["circle-sort-key"])})}},Za=1e-6,tg=typeof Float32Array<"u"?Float32Array:Array;function J_(d){return d[0]=1,d[1]=0,d[2]=0,d[3]=0,d[4]=0,d[5]=1,d[6]=0,d[7]=0,d[8]=0,d[9]=0,d[10]=1,d[11]=0,d[12]=0,d[13]=0,d[14]=0,d[15]=1,d}function hl(d,c,m){var v=c[0],S=c[1],P=c[2],D=c[3],R=c[4],N=c[5],V=c[6],W=c[7],Y=c[8],ee=c[9],re=c[10],he=c[11],ue=c[12],Ae=c[13],Te=c[14],nt=c[15],Ve=m[0],qe=m[1],pt=m[2],Dt=m[3];return d[0]=Ve*v+qe*R+pt*Y+Dt*ue,d[1]=Ve*S+qe*N+pt*ee+Dt*Ae,d[2]=Ve*P+qe*V+pt*re+Dt*Te,d[3]=Ve*D+qe*W+pt*he+Dt*nt,d[4]=(Ve=m[4])*v+(qe=m[5])*R+(pt=m[6])*Y+(Dt=m[7])*ue,d[5]=Ve*S+qe*N+pt*ee+Dt*Ae,d[6]=Ve*P+qe*V+pt*re+Dt*Te,d[7]=Ve*D+qe*W+pt*he+Dt*nt,d[8]=(Ve=m[8])*v+(qe=m[9])*R+(pt=m[10])*Y+(Dt=m[11])*ue,d[9]=Ve*S+qe*N+pt*ee+Dt*Ae,d[10]=Ve*P+qe*V+pt*re+Dt*Te,d[11]=Ve*D+qe*W+pt*he+Dt*nt,d[12]=(Ve=m[12])*v+(qe=m[13])*R+(pt=m[14])*Y+(Dt=m[15])*ue,d[13]=Ve*S+qe*N+pt*ee+Dt*Ae,d[14]=Ve*P+qe*V+pt*re+Dt*Te,d[15]=Ve*D+qe*W+pt*he+Dt*nt,d}Math.hypot||(Math.hypot=function(){for(var d=0,c=arguments.length;c--;)d+=arguments[c]*arguments[c];return Math.sqrt(d)});var Ll,II=hl;function ex(d,c,m){var v=c[0],S=c[1],P=c[2],D=c[3];return d[0]=m[0]*v+m[4]*S+m[8]*P+m[12]*D,d[1]=m[1]*v+m[5]*S+m[9]*P+m[13]*D,d[2]=m[2]*v+m[6]*S+m[10]*P+m[14]*D,d[3]=m[3]*v+m[7]*S+m[11]*P+m[15]*D,d}Ll=new tg(4),tg!=Float32Array&&(Ll[0]=0,Ll[1]=0,Ll[2]=0,Ll[3]=0);class tx extends y{constructor(c){super(c,wA)}createBucket(c){return new G_(c)}queryRadius(c){const m=c;return eg("circle-radius",this,m)+eg("circle-stroke-width",this,m)+H_(this.paint.get("circle-translate"))}queryIntersectsFeature(c,m,v,S,P,D,R,N){const V=K_(c,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),D.angle,R),W=this.paint.get("circle-radius").evaluate(m,v)+this.paint.get("circle-stroke-width").evaluate(m,v),Y=this.paint.get("circle-pitch-alignment")==="map",ee=Y?V:(function(he,ue){return he.map((Ae=>ng(Ae,ue)))})(V,N),re=Y?W*R:W;for(const he of S)for(const ue of he){const Ae=Y?ue:ng(ue,N);let Te=re;const nt=ex([],[ue.x,ue.y,0,1],N);if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?Te*=nt[3]/D.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(Te*=D.cameraToCenterDistance/nt[3]),yA(ee,Ae,Te))return!0}return!1}}function ng(d,c){const m=ex([],[d.x,d.y,0,1],c);return new p(m[0]/m[3],m[1]/m[3])}class LO extends G_{}let $O;dn("HeatmapBucket",LO,{omit:["layers"]});var MI={get paint(){return $O=$O||new E({"heatmap-radius":new Qn(Ze.paint_heatmap["heatmap-radius"]),"heatmap-weight":new Qn(Ze.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new Sn(Ze.paint_heatmap["heatmap-intensity"]),"heatmap-color":new Vc(Ze.paint_heatmap["heatmap-color"]),"heatmap-opacity":new Sn(Ze.paint_heatmap["heatmap-opacity"])})}};function nx(d,{width:c,height:m},v,S){if(S){if(S instanceof Uint8ClampedArray)S=new Uint8Array(S.buffer);else if(S.length!==c*m*v)throw new RangeError(`mismatched image size. expected: ${S.length} but got: ${c*m*v}`)}else S=new Uint8Array(c*m*v);return d.width=c,d.height=m,d.data=S,d}function rg(d,{width:c,height:m},v){if(c===d.width&&m===d.height)return;const S=nx({},{width:c,height:m},v);ig(d,S,{x:0,y:0},{x:0,y:0},{width:Math.min(d.width,c),height:Math.min(d.height,m)},v),d.width=c,d.height=m,d.data=S.data}function ig(d,c,m,v,S,P){if(S.width===0||S.height===0)return c;if(S.width>d.width||S.height>d.height||m.x>d.width-S.width||m.y>d.height-S.height)throw new RangeError("out of range source coordinates for image copy");if(S.width>c.width||S.height>c.height||v.x>c.width-S.width||v.y>c.height-S.height)throw new RangeError("out of range destination coordinates for image copy");const D=d.data,R=c.data;if(D===R)throw new Error("srcData equals dstData, so image is already copied");for(let N=0;N<S.height;N++){const V=((m.y+N)*d.width+m.x)*P,W=((v.y+N)*c.width+v.x)*P;for(let Y=0;Y<S.width*P;Y++)R[W+Y]=D[V+Y]}return c}class cv{constructor(c,m){nx(this,c,1,m)}resize(c){rg(this,c,1)}clone(){return new cv({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(c,m,v,S,P){ig(c,m,v,S,P,1)}}class $l{constructor(c,m){nx(this,c,4,m)}resize(c){rg(this,c,4)}replace(c,m){m?this.data.set(c):this.data=c instanceof Uint8ClampedArray?new Uint8Array(c.buffer):c}clone(){return new $l({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(c,m,v,S,P){ig(c,m,v,S,P,4)}}function BO(d){const c={},m=d.resolution||256,v=d.clips?d.clips.length:1,S=d.image||new $l({width:m,height:v});if(Math.log(m)/Math.LN2%1!=0)throw new Error(`width is not a power of 2 - ${m}`);const P=(D,R,N)=>{c[d.evaluationKey]=N;const V=d.expression.evaluate(c);S.data[D+R+0]=Math.floor(255*V.r/V.a),S.data[D+R+1]=Math.floor(255*V.g/V.a),S.data[D+R+2]=Math.floor(255*V.b/V.a),S.data[D+R+3]=Math.floor(255*V.a)};if(d.clips)for(let D=0,R=0;D<v;++D,R+=4*m)for(let N=0,V=0;N<m;N++,V+=4){const W=N/(m-1),{start:Y,end:ee}=d.clips[D];P(R,V,Y*(1-W)+ee*W)}else for(let D=0,R=0;D<m;D++,R+=4)P(0,R,D/(m-1));return S}dn("AlphaImage",cv),dn("RGBAImage",$l);const sy="big-fb";class OA extends y{createBucket(c){return new LO(c)}constructor(c){super(c,MI),this.heatmapFbos=new Map,this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(c){c==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=BO({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbos.has(sy)&&this.heatmapFbos.delete(sy)}queryRadius(){return 0}queryIntersectsFeature(){return!1}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}}let hv;var NO={get paint(){return hv=hv||new E({"hillshade-illumination-direction":new Sn(Ze.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new Sn(Ze.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new Sn(Ze.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new Sn(Ze.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new Sn(Ze.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new Sn(Ze.paint_hillshade["hillshade-accent-color"])})}};class rx extends y{constructor(c){super(c,NO)}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}}const RI=$([{name:"a_pos",components:2,type:"Int16"}],4),{members:SA}=RI;function fv(d,c,m=2){const v=c&&c.length,S=v?c[0]*m:d.length;let P=zO(d,0,S,m,!0);const D=[];if(!P||P.next===P.prev)return D;let R,N,V;if(v&&(P=(function(W,Y,ee,re){const he=[];for(let ue=0,Ae=Y.length;ue<Ae;ue++){const Te=zO(W,Y[ue]*re,ue<Ae-1?Y[ue+1]*re:W.length,re,!1);Te===Te.next&&(Te.steiner=!0),he.push(Jf(Te))}he.sort(FI);for(let ue=0;ue<he.length;ue++)ee=EA(he[ue],ee);return ee})(d,c,P,m)),d.length>80*m){R=1/0,N=1/0;let W=-1/0,Y=-1/0;for(let ee=m;ee<S;ee+=m){const re=d[ee],he=d[ee+1];re<R&&(R=re),he<N&&(N=he),re>W&&(W=re),he>Y&&(Y=he)}V=Math.max(W-R,Y-N),V=V!==0?32767/V:0}return dv(P,D,m,R,N,V,0),D}function zO(d,c,m,v,S){let P;if(S===(function(D,R,N,V){let W=0;for(let Y=R,ee=N-V;Y<N;Y+=V)W+=(D[ee]-D[Y])*(D[Y+1]+D[ee+1]),ee=Y;return W})(d,c,m,v)>0)for(let D=c;D<m;D+=v)P=TA(D/v|0,d[D],d[D+1],P);else for(let D=m-v;D>=c;D-=v)P=TA(D/v|0,d[D],d[D+1],P);return P&&sg(P,P.next)&&(ug(P),P=P.next),P}function Hf(d,c){if(!d)return d;c||(c=d);let m,v=d;do if(m=!1,v.steiner||!sg(v,v.next)&&Vs(v.prev,v,v.next)!==0)v=v.next;else{if(ug(v),v=c=v.prev,v===v.next)break;m=!0}while(m||v!==c);return c}function dv(d,c,m,v,S,P,D){if(!d)return;!D&&P&&(function(N,V,W,Y){let ee=N;do ee.z===0&&(ee.z=QO(ee.x,ee.y,V,W,Y)),ee.prevZ=ee.prev,ee.nextZ=ee.next,ee=ee.next;while(ee!==N);ee.prevZ.nextZ=null,ee.prevZ=null,(function(re){let he,ue=1;do{let Ae,Te=re;re=null;let nt=null;for(he=0;Te;){he++;let Ve=Te,qe=0;for(let Dt=0;Dt<ue&&(qe++,Ve=Ve.nextZ,Ve);Dt++);let pt=ue;for(;qe>0||pt>0&&Ve;)qe!==0&&(pt===0||!Ve||Te.z<=Ve.z)?(Ae=Te,Te=Te.nextZ,qe--):(Ae=Ve,Ve=Ve.nextZ,pt--),nt?nt.nextZ=Ae:re=Ae,Ae.prevZ=nt,nt=Ae;Te=Ve}nt.nextZ=null,ue*=2}while(he>1)})(ee)})(d,v,S,P);let R=d;for(;d.prev!==d.next;){const N=d.prev,V=d.next;if(P?Kf(d,v,S,P):kA(d))c.push(N.i,d.i,V.i),ug(d),d=V.next,R=V.next;else if((d=V)===R){D?D===1?dv(d=CA(Hf(d),c),c,m,v,S,P,2):D===2&&AA(d,c,m,v,S,P):dv(Hf(d),c,m,v,S,P,1);break}}}function kA(d){const c=d.prev,m=d,v=d.next;if(Vs(c,m,v)>=0)return!1;const S=c.x,P=m.x,D=v.x,R=c.y,N=m.y,V=v.y,W=S<P?S<D?S:D:P<D?P:D,Y=R<N?R<V?R:V:N<V?N:V,ee=S>P?S>D?S:D:P>D?P:D,re=R>N?R>V?R:V:N>V?N:V;let he=v.next;for(;he!==c;){if(he.x>=W&&he.x<=ee&&he.y>=Y&&he.y<=re&&hp(S,R,P,N,D,V,he.x,he.y)&&Vs(he.prev,he,he.next)>=0)return!1;he=he.next}return!0}function Kf(d,c,m,v){const S=d.prev,P=d,D=d.next;if(Vs(S,P,D)>=0)return!1;const R=S.x,N=P.x,V=D.x,W=S.y,Y=P.y,ee=D.y,re=R<N?R<V?R:V:N<V?N:V,he=W<Y?W<ee?W:ee:Y<ee?Y:ee,ue=R>N?R>V?R:V:N>V?N:V,Ae=W>Y?W>ee?W:ee:Y>ee?Y:ee,Te=QO(re,he,c,m,v),nt=QO(ue,Ae,c,m,v);let Ve=d.prevZ,qe=d.nextZ;for(;Ve&&Ve.z>=Te&&qe&&qe.z<=nt;){if(Ve.x>=re&&Ve.x<=ue&&Ve.y>=he&&Ve.y<=Ae&&Ve!==S&&Ve!==D&&hp(R,W,N,Y,V,ee,Ve.x,Ve.y)&&Vs(Ve.prev,Ve,Ve.next)>=0||(Ve=Ve.prevZ,qe.x>=re&&qe.x<=ue&&qe.y>=he&&qe.y<=Ae&&qe!==S&&qe!==D&&hp(R,W,N,Y,V,ee,qe.x,qe.y)&&Vs(qe.prev,qe,qe.next)>=0))return!1;qe=qe.nextZ}for(;Ve&&Ve.z>=Te;){if(Ve.x>=re&&Ve.x<=ue&&Ve.y>=he&&Ve.y<=Ae&&Ve!==S&&Ve!==D&&hp(R,W,N,Y,V,ee,Ve.x,Ve.y)&&Vs(Ve.prev,Ve,Ve.next)>=0)return!1;Ve=Ve.prevZ}for(;qe&&qe.z<=nt;){if(qe.x>=re&&qe.x<=ue&&qe.y>=he&&qe.y<=Ae&&qe!==S&&qe!==D&&hp(R,W,N,Y,V,ee,qe.x,qe.y)&&Vs(qe.prev,qe,qe.next)>=0)return!1;qe=qe.nextZ}return!0}function CA(d,c){let m=d;do{const v=m.prev,S=m.next.next;!sg(v,S)&&og(v,m,m.next,S)&&lg(v,S)&&lg(S,v)&&(c.push(v.i,m.i,S.i),ug(m),ug(m.next),m=d=S),m=m.next}while(m!==d);return Hf(m)}function AA(d,c,m,v,S,P){let D=d;do{let R=D.next.next;for(;R!==D.prev;){if(D.i!==R.i&&jO(D,R)){let N=fp(D,R);return D=Hf(D,D.next),N=Hf(N,N.next),dv(D,c,m,v,S,P,0),void dv(N,c,m,v,S,P,0)}R=R.next}D=D.next}while(D!==d)}function FI(d,c){return d.x-c.x}function EA(d,c){const m=(function(S,P){let D=P;const R=S.x,N=S.y;let V,W=-1/0;do{if(N<=D.y&&N>=D.next.y&&D.next.y!==D.y){const ue=D.x+(N-D.y)*(D.next.x-D.x)/(D.next.y-D.y);if(ue<=R&&ue>W&&(W=ue,V=D.x<D.next.x?D:D.next,ue===R))return V}D=D.next}while(D!==P);if(!V)return null;const Y=V,ee=V.x,re=V.y;let he=1/0;D=V;do{if(R>=D.x&&D.x>=ee&&R!==D.x&&hp(N<re?R:W,N,ee,re,N<re?W:R,N,D.x,D.y)){const ue=Math.abs(N-D.y)/(R-D.x);lg(D,S)&&(ue<he||ue===he&&(D.x>V.x||D.x===V.x&&LI(V,D)))&&(V=D,he=ue)}D=D.next}while(D!==Y);return V})(d,c);if(!m)return c;const v=fp(m,d);return Hf(v,v.next),Hf(m,m.next)}function LI(d,c){return Vs(d.prev,d,c.prev)<0&&Vs(c.next,d,d.next)<0}function QO(d,c,m,v,S){return(d=1431655765&((d=858993459&((d=252645135&((d=16711935&((d=(d-m)*S|0)|d<<8))|d<<4))|d<<2))|d<<1))|(c=1431655765&((c=858993459&((c=252645135&((c=16711935&((c=(c-v)*S|0)|c<<8))|c<<4))|c<<2))|c<<1))<<1}function Jf(d){let c=d,m=d;do(c.x<m.x||c.x===m.x&&c.y<m.y)&&(m=c),c=c.next;while(c!==d);return m}function hp(d,c,m,v,S,P,D,R){return(S-D)*(c-R)>=(d-D)*(P-R)&&(d-D)*(v-R)>=(m-D)*(c-R)&&(m-D)*(P-R)>=(S-D)*(v-R)}function jO(d,c){return d.next.i!==c.i&&d.prev.i!==c.i&&!(function(m,v){let S=m;do{if(S.i!==m.i&&S.next.i!==m.i&&S.i!==v.i&&S.next.i!==v.i&&og(S,S.next,m,v))return!0;S=S.next}while(S!==m);return!1})(d,c)&&(lg(d,c)&&lg(c,d)&&(function(m,v){let S=m,P=!1;const D=(m.x+v.x)/2,R=(m.y+v.y)/2;do S.y>R!=S.next.y>R&&S.next.y!==S.y&&D<(S.next.x-S.x)*(R-S.y)/(S.next.y-S.y)+S.x&&(P=!P),S=S.next;while(S!==m);return P})(d,c)&&(Vs(d.prev,d,c.prev)||Vs(d,c.prev,c))||sg(d,c)&&Vs(d.prev,d,d.next)>0&&Vs(c.prev,c,c.next)>0)}function Vs(d,c,m){return(c.y-d.y)*(m.x-c.x)-(c.x-d.x)*(m.y-c.y)}function sg(d,c){return d.x===c.x&&d.y===c.y}function og(d,c,m,v){const S=ag(Vs(d,c,m)),P=ag(Vs(d,c,v)),D=ag(Vs(m,v,d)),R=ag(Vs(m,v,c));return S!==P&&D!==R||!(S!==0||!Kn(d,m,c))||!(P!==0||!Kn(d,v,c))||!(D!==0||!Kn(m,d,v))||!(R!==0||!Kn(m,c,v))}function Kn(d,c,m){return c.x<=Math.max(d.x,m.x)&&c.x>=Math.min(d.x,m.x)&&c.y<=Math.max(d.y,m.y)&&c.y>=Math.min(d.y,m.y)}function ag(d){return d>0?1:d<0?-1:0}function lg(d,c){return Vs(d.prev,d,d.next)<0?Vs(d,c,d.next)>=0&&Vs(d,d.prev,c)>=0:Vs(d,c,d.prev)<0||Vs(d,d.next,c)<0}function fp(d,c){const m=ix(d.i,d.x,d.y),v=ix(c.i,c.x,c.y),S=d.next,P=c.prev;return d.next=c,c.prev=d,m.next=S,S.prev=m,v.next=m,m.prev=v,P.next=v,v.prev=P,v}function TA(d,c,m,v){const S=ix(d,c,m);return v?(S.next=v.next,S.prev=v,v.next.prev=S,v.next=S):(S.prev=S,S.next=S),S}function ug(d){d.next.prev=d.prev,d.prev.next=d.next,d.prevZ&&(d.prevZ.nextZ=d.nextZ),d.nextZ&&(d.nextZ.prevZ=d.prevZ)}function ix(d,c,m){return{i:d,x:c,y:m,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}function ya(d,c,m){const v=m.patternDependencies;let S=!1;for(const P of c){const D=P.paint.get(`${d}-pattern`);D.isConstant()||(S=!0);const R=D.constantOr(null);R&&(S=!0,v[R.to]=!0,v[R.from]=!0)}return S}function UO(d,c,m,v,S){const P=S.patternDependencies;for(const D of c){const R=D.paint.get(`${d}-pattern`).value;if(R.kind!=="constant"){let N=R.evaluate({zoom:v-1},m,{},S.availableImages),V=R.evaluate({zoom:v},m,{},S.availableImages),W=R.evaluate({zoom:v+1},m,{},S.availableImages);N=N&&N.name?N.name:N,V=V&&V.name?V.name:V,W=W&&W.name?W.name:W,P[N]=!0,P[V]=!0,P[W]=!0,m.patterns[D.id]={min:N,mid:V,max:W}}}return m}class VO{constructor(c){this.zoom=c.zoom,this.overscaling=c.overscaling,this.layers=c.layers,this.layerIds=this.layers.map((m=>m.id)),this.index=c.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new Pl,this.indexArray=new Rl,this.indexArray2=new Ko,this.programConfigurations=new ga(c.layers,c.zoom),this.segments=new jr,this.segments2=new jr,this.stateDependentLayerIds=this.layers.filter((m=>m.isStateDependent())).map((m=>m.id))}populate(c,m,v){this.hasPattern=ya("fill",this.layers,m);const S=this.layers[0].layout.get("fill-sort-key"),P=!S.isConstant(),D=[];for(const{feature:R,id:N,index:V,sourceLayerIndex:W}of c){const Y=this.layers[0]._featureFilter.needGeometry,ee=Fl(R,Y);if(!this.layers[0]._featureFilter.filter(new gs(this.zoom),ee,v))continue;const re=P?S.evaluate(ee,{},v,m.availableImages):void 0,he={id:N,properties:R.properties,type:R.type,sourceLayerIndex:W,index:V,geometry:Y?ee.geometry:Jo(R),patterns:{},sortKey:re};D.push(he)}P&&D.sort(((R,N)=>R.sortKey-N.sortKey));for(const R of D){const{geometry:N,index:V,sourceLayerIndex:W}=R;if(this.hasPattern){const Y=UO("fill",this.layers,R,this.zoom,m);this.patternFeatures.push(Y)}else this.addFeature(R,N,V,v,{});m.featureIndex.insert(c[V].feature,N,V,W,this.index)}}update(c,m,v){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(c,m,this.stateDependentLayers,v)}addFeatures(c,m,v){for(const S of this.patternFeatures)this.addFeature(S,S.geometry,S.index,m,v)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(c){this.uploaded||(this.layoutVertexBuffer=c.createVertexBuffer(this.layoutVertexArray,SA),this.indexBuffer=c.createIndexBuffer(this.indexArray),this.indexBuffer2=c.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(c),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(c,m,v,S,P){for(const D of ss(m,500)){let R=0;for(const re of D)R+=re.length;const N=this.segments.prepareSegment(R,this.layoutVertexArray,this.indexArray),V=N.vertexLength,W=[],Y=[];for(const re of D){if(re.length===0)continue;re!==D[0]&&Y.push(W.length/2);const he=this.segments2.prepareSegment(re.length,this.layoutVertexArray,this.indexArray2),ue=he.vertexLength;this.layoutVertexArray.emplaceBack(re[0].x,re[0].y),this.indexArray2.emplaceBack(ue+re.length-1,ue),W.push(re[0].x),W.push(re[0].y);for(let Ae=1;Ae<re.length;Ae++)this.layoutVertexArray.emplaceBack(re[Ae].x,re[Ae].y),this.indexArray2.emplaceBack(ue+Ae-1,ue+Ae),W.push(re[Ae].x),W.push(re[Ae].y);he.vertexLength+=re.length,he.primitiveLength+=re.length}const ee=fv(W,Y);for(let re=0;re<ee.length;re+=3)this.indexArray.emplaceBack(V+ee[re],V+ee[re+1],V+ee[re+2]);N.vertexLength+=R,N.primitiveLength+=ee.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,c,v,P,S)}}let qO,PA;dn("FillBucket",VO,{omit:["layers","patternFeatures"]});var DA={get paint(){return PA=PA||new E({"fill-antialias":new Sn(Ze.paint_fill["fill-antialias"]),"fill-opacity":new Qn(Ze.paint_fill["fill-opacity"]),"fill-color":new Qn(Ze.paint_fill["fill-color"]),"fill-outline-color":new Qn(Ze.paint_fill["fill-outline-color"]),"fill-translate":new Sn(Ze.paint_fill["fill-translate"]),"fill-translate-anchor":new Sn(Ze.paint_fill["fill-translate-anchor"]),"fill-pattern":new J0(Ze.paint_fill["fill-pattern"])})},get layout(){return qO=qO||new E({"fill-sort-key":new Qn(Ze.layout_fill["fill-sort-key"])})}};class $I extends y{constructor(c){super(c,DA)}recalculate(c,m){super.recalculate(c,m);const v=this.paint._values["fill-outline-color"];v.value.kind==="constant"&&v.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(c){return new VO(c)}queryRadius(){return H_(this.paint.get("fill-translate"))}queryIntersectsFeature(c,m,v,S,P,D,R){return Y_(K_(c,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),D.angle,R),S)}isTileClipped(){return!0}}const BI=$([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),NI=$([{name:"a_centroid",components:2,type:"Int16"}],4),{members:ed}=BI;var _o={},ZO=h,IA=dp;function dp(d,c,m,v,S){this.properties={},this.extent=m,this.type=0,this._pbf=d,this._geometry=-1,this._keys=v,this._values=S,d.readFields(zI,this,c)}function zI(d,c,m){d==1?c.id=m.readVarint():d==2?(function(v,S){for(var P=v.readVarint()+v.pos;v.pos<P;){var D=S._keys[v.readVarint()],R=S._values[v.readVarint()];S.properties[D]=R}})(m,c):d==3?c.type=m.readVarint():d==4&&(c._geometry=m.pos)}function QI(d){for(var c,m,v=0,S=0,P=d.length,D=P-1;S<P;D=S++)v+=((m=d[D]).x-(c=d[S]).x)*(c.y+m.y);return v}dp.types=["Unknown","Point","LineString","Polygon"],dp.prototype.loadGeometry=function(){var d=this._pbf;d.pos=this._geometry;for(var c,m=d.readVarint()+d.pos,v=1,S=0,P=0,D=0,R=[];d.pos<m;){if(S<=0){var N=d.readVarint();v=7&N,S=N>>3}if(S--,v===1||v===2)P+=d.readSVarint(),D+=d.readSVarint(),v===1&&(c&&R.push(c),c=[]),c.push(new ZO(P,D));else{if(v!==7)throw new Error("unknown command "+v);c&&c.push(c[0].clone())}}return c&&R.push(c),R},dp.prototype.bbox=function(){var d=this._pbf;d.pos=this._geometry;for(var c=d.readVarint()+d.pos,m=1,v=0,S=0,P=0,D=1/0,R=-1/0,N=1/0,V=-1/0;d.pos<c;){if(v<=0){var W=d.readVarint();m=7&W,v=W>>3}if(v--,m===1||m===2)(S+=d.readSVarint())<D&&(D=S),S>R&&(R=S),(P+=d.readSVarint())<N&&(N=P),P>V&&(V=P);else if(m!==7)throw new Error("unknown command "+m)}return[D,N,R,V]},dp.prototype.toGeoJSON=function(d,c,m){var v,S,P=this.extent*Math.pow(2,m),D=this.extent*d,R=this.extent*c,N=this.loadGeometry(),V=dp.types[this.type];function W(re){for(var he=0;he<re.length;he++){var ue=re[he];re[he]=[360*(ue.x+D)/P-180,360/Math.PI*Math.atan(Math.exp((180-360*(ue.y+R)/P)*Math.PI/180))-90]}}switch(this.type){case 1:var Y=[];for(v=0;v<N.length;v++)Y[v]=N[v][0];W(N=Y);break;case 2:for(v=0;v<N.length;v++)W(N[v]);break;case 3:for(N=(function(re){var he=re.length;if(he<=1)return[re];for(var ue,Ae,Te=[],nt=0;nt<he;nt++){var Ve=QI(re[nt]);Ve!==0&&(Ae===void 0&&(Ae=Ve<0),Ae===Ve<0?(ue&&Te.push(ue),ue=[re[nt]]):ue.push(re[nt]))}return ue&&Te.push(ue),Te})(N),v=0;v<N.length;v++)for(S=0;S<N[v].length;S++)W(N[v][S])}N.length===1?N=N[0]:V="Multi"+V;var ee={type:"Feature",geometry:{type:V,coordinates:N},properties:this.properties};return"id"in this&&(ee.id=this.id),ee};var pv=IA,XO=WO;function WO(d,c){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=d,this._keys=[],this._values=[],this._features=[],d.readFields(jI,this,c),this.length=this._features.length}function jI(d,c,m){d===15?c.version=m.readVarint():d===1?c.name=m.readString():d===5?c.extent=m.readVarint():d===2?c._features.push(m.pos):d===3?c._keys.push(m.readString()):d===4&&c._values.push((function(v){for(var S=null,P=v.readVarint()+v.pos;v.pos<P;){var D=v.readVarint()>>3;S=D===1?v.readString():D===2?v.readFloat():D===3?v.readDouble():D===4?v.readVarint64():D===5?v.readVarint():D===6?v.readSVarint():D===7?v.readBoolean():null}return S})(m))}WO.prototype.feature=function(d){if(d<0||d>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[d];var c=this._pbf.readVarint()+this._pbf.pos;return new pv(this._pbf,c,this.extent,this._keys,this._values)};var UI=XO;function VI(d,c,m){if(d===3){var v=new UI(m,m.readVarint()+m.pos);v.length&&(c[v.name]=v)}}_o.VectorTile=function(d,c){this.layers=d.readFields(VI,{},c)},_o.VectorTileFeature=IA,_o.VectorTileLayer=XO;const qI=_o.VectorTileFeature.types,sx=Math.pow(2,13);function oy(d,c,m,v,S,P,D,R){d.emplaceBack(c,m,2*Math.floor(v*sx)+D,S*sx*2,P*sx*2,Math.round(R))}class GO{constructor(c){this.zoom=c.zoom,this.overscaling=c.overscaling,this.layers=c.layers,this.layerIds=this.layers.map((m=>m.id)),this.index=c.index,this.hasPattern=!1,this.layoutVertexArray=new op,this.centroidVertexArray=new pa,this.indexArray=new Rl,this.programConfigurations=new ga(c.layers,c.zoom),this.segments=new jr,this.stateDependentLayerIds=this.layers.filter((m=>m.isStateDependent())).map((m=>m.id))}populate(c,m,v){this.features=[],this.hasPattern=ya("fill-extrusion",this.layers,m);for(const{feature:S,id:P,index:D,sourceLayerIndex:R}of c){const N=this.layers[0]._featureFilter.needGeometry,V=Fl(S,N);if(!this.layers[0]._featureFilter.filter(new gs(this.zoom),V,v))continue;const W={id:P,sourceLayerIndex:R,index:D,geometry:N?V.geometry:Jo(S),properties:S.properties,type:S.type,patterns:{}};this.hasPattern?this.features.push(UO("fill-extrusion",this.layers,W,this.zoom,m)):this.addFeature(W,W.geometry,D,v,{}),m.featureIndex.insert(S,W.geometry,D,R,this.index,!0)}}addFeatures(c,m,v){for(const S of this.features){const{geometry:P}=S;this.addFeature(S,P,S.index,m,v)}}update(c,m,v){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(c,m,this.stateDependentLayers,v)}isEmpty(){return this.layoutVertexArray.length===0&&this.centroidVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(c){this.uploaded||(this.layoutVertexBuffer=c.createVertexBuffer(this.layoutVertexArray,ed),this.centroidVertexBuffer=c.createVertexBuffer(this.centroidVertexArray,NI.members,!0),this.indexBuffer=c.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(c),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.centroidVertexBuffer.destroy())}addFeature(c,m,v,S,P){for(const D of ss(m,500)){const R={x:0,y:0,vertexCount:0};let N=0;for(const he of D)N+=he.length;let V=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray);for(const he of D){if(he.length===0||MA(he))continue;let ue=0;for(let Ae=0;Ae<he.length;Ae++){const Te=he[Ae];if(Ae>=1){const nt=he[Ae-1];if(!YO(Te,nt)){V.vertexLength+4>jr.MAX_VERTEX_ARRAY_LENGTH&&(V=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));const Ve=Te.sub(nt)._perp()._unit(),qe=nt.dist(Te);ue+qe>32768&&(ue=0),oy(this.layoutVertexArray,Te.x,Te.y,Ve.x,Ve.y,0,0,ue),oy(this.layoutVertexArray,Te.x,Te.y,Ve.x,Ve.y,0,1,ue),R.x+=2*Te.x,R.y+=2*Te.y,R.vertexCount+=2,ue+=qe,oy(this.layoutVertexArray,nt.x,nt.y,Ve.x,Ve.y,0,0,ue),oy(this.layoutVertexArray,nt.x,nt.y,Ve.x,Ve.y,0,1,ue),R.x+=2*nt.x,R.y+=2*nt.y,R.vertexCount+=2;const pt=V.vertexLength;this.indexArray.emplaceBack(pt,pt+2,pt+1),this.indexArray.emplaceBack(pt+1,pt+2,pt+3),V.vertexLength+=4,V.primitiveLength+=2}}}}if(V.vertexLength+N>jr.MAX_VERTEX_ARRAY_LENGTH&&(V=this.segments.prepareSegment(N,this.layoutVertexArray,this.indexArray)),qI[c.type]!=="Polygon")continue;const W=[],Y=[],ee=V.vertexLength;for(const he of D)if(he.length!==0){he!==D[0]&&Y.push(W.length/2);for(let ue=0;ue<he.length;ue++){const Ae=he[ue];oy(this.layoutVertexArray,Ae.x,Ae.y,0,0,1,1,0),R.x+=Ae.x,R.y+=Ae.y,R.vertexCount+=1,W.push(Ae.x),W.push(Ae.y)}}const re=fv(W,Y);for(let he=0;he<re.length;he+=3)this.indexArray.emplaceBack(ee+re[he],ee+re[he+2],ee+re[he+1]);V.primitiveLength+=re.length/3,V.vertexLength+=N;for(let he=0;he<R.vertexCount;he++){const ue=Math.floor(R.x/R.vertexCount),Ae=Math.floor(R.y/R.vertexCount);this.centroidVertexArray.emplaceBack(ue,Ae)}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,c,v,P,S)}}function YO(d,c){return d.x===c.x&&(d.x<0||d.x>no)||d.y===c.y&&(d.y<0||d.y>no)}function MA(d){return d.every((c=>c.x<0))||d.every((c=>c.x>no))||d.every((c=>c.y<0))||d.every((c=>c.y>no))}let ay;dn("FillExtrusionBucket",GO,{omit:["layers","features"]});var HO={get paint(){return ay=ay||new E({"fill-extrusion-opacity":new Sn(Ze["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new Qn(Ze["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new Sn(Ze["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new Sn(Ze["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new J0(Ze["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new Qn(Ze["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new Qn(Ze["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new Sn(Ze["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})}};class RA extends y{constructor(c){super(c,HO)}createBucket(c){return new GO(c)}queryRadius(){return H_(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature(c,m,v,S,P,D,R,N){const V=K_(c,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),D.angle,R),W=this.paint.get("fill-extrusion-height").evaluate(m,v),Y=this.paint.get("fill-extrusion-base").evaluate(m,v),ee=(function(he,ue,Ae,Te){const nt=[];for(const Ve of he){const qe=[Ve.x,Ve.y,0,1];ex(qe,qe,ue),nt.push(new p(qe[0]/qe[3],qe[1]/qe[3]))}return nt})(V,N),re=(function(he,ue,Ae,Te){const nt=[],Ve=[],qe=Te[8]*ue,pt=Te[9]*ue,Dt=Te[10]*ue,ln=Te[11]*ue,zn=Te[8]*Ae,un=Te[9]*Ae,en=Te[10]*Ae,Pn=Te[11]*Ae;for(const vn of he){const fn=[],vt=[];for(const Mn of vn){const En=Mn.x,Jn=Mn.y,Ki=Te[0]*En+Te[4]*Jn+Te[12],Zi=Te[1]*En+Te[5]*Jn+Te[13],Uo=Te[2]*En+Te[6]*Jn+Te[14],zl=Te[3]*En+Te[7]*Jn+Te[15],ba=Uo+Dt,wo=zl+ln,Xa=Ki+zn,Wa=Zi+un,Ga=Uo+en,Vr=zl+Pn,Ti=new p((Ki+qe)/wo,(Zi+pt)/wo);Ti.z=ba/wo,fn.push(Ti);const Ia=new p(Xa/Vr,Wa/Vr);Ia.z=Ga/Vr,vt.push(Ia)}nt.push(fn),Ve.push(vt)}return[nt,Ve]})(S,Y,W,N);return(function(he,ue,Ae){let Te=1/0;Y_(Ae,ue)&&(Te=mv(Ae,ue[0]));for(let nt=0;nt<ue.length;nt++){const Ve=ue[nt],qe=he[nt];for(let pt=0;pt<Ve.length-1;pt++){const Dt=Ve[pt],ln=[Dt,Ve[pt+1],qe[pt+1],qe[pt],Dt];lv(Ae,ln)&&(Te=Math.min(Te,mv(Ae,ln)))}}return Te!==1/0&&Te})(re[0],re[1],ee)}}function ly(d,c){return d.x*c.x+d.y*c.y}function mv(d,c){if(d.length===1){let m=0;const v=c[m++];let S;for(;!S||v.equals(S);)if(S=c[m++],!S)return 1/0;for(;m<c.length;m++){const P=c[m],D=d[0],R=S.sub(v),N=P.sub(v),V=D.sub(v),W=ly(R,R),Y=ly(R,N),ee=ly(N,N),re=ly(V,R),he=ly(V,N),ue=W*ee-Y*Y,Ae=(ee*re-Y*he)/ue,Te=(W*he-Y*re)/ue,nt=v.z*(1-Ae-Te)+S.z*Ae+P.z*Te;if(isFinite(nt))return nt}return 1/0}{let m=1/0;for(const v of c)m=Math.min(m,v.z);return m}}const FA=$([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),{members:Qh}=FA,cg=$([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:ZI}=cg,LA=_o.VectorTileFeature.types,XI=Math.cos(Math.PI/180*37.5),$A=Math.pow(2,14)/.5;class KO{constructor(c){this.zoom=c.zoom,this.overscaling=c.overscaling,this.layers=c.layers,this.layerIds=this.layers.map((m=>m.id)),this.index=c.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach((m=>{this.gradients[m.id]={}})),this.layoutVertexArray=new Bh,this.layoutVertexArray2=new Xf,this.indexArray=new Rl,this.programConfigurations=new ga(c.layers,c.zoom),this.segments=new jr,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter((m=>m.isStateDependent())).map((m=>m.id))}populate(c,m,v){this.hasPattern=ya("line",this.layers,m);const S=this.layers[0].layout.get("line-sort-key"),P=!S.isConstant(),D=[];for(const{feature:R,id:N,index:V,sourceLayerIndex:W}of c){const Y=this.layers[0]._featureFilter.needGeometry,ee=Fl(R,Y);if(!this.layers[0]._featureFilter.filter(new gs(this.zoom),ee,v))continue;const re=P?S.evaluate(ee,{},v):void 0,he={id:N,properties:R.properties,type:R.type,sourceLayerIndex:W,index:V,geometry:Y?ee.geometry:Jo(R),patterns:{},sortKey:re};D.push(he)}P&&D.sort(((R,N)=>R.sortKey-N.sortKey));for(const R of D){const{geometry:N,index:V,sourceLayerIndex:W}=R;if(this.hasPattern){const Y=UO("line",this.layers,R,this.zoom,m);this.patternFeatures.push(Y)}else this.addFeature(R,N,V,v,{});m.featureIndex.insert(c[V].feature,N,V,W,this.index)}}update(c,m,v){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(c,m,this.stateDependentLayers,v)}addFeatures(c,m,v){for(const S of this.patternFeatures)this.addFeature(S,S.geometry,S.index,m,v)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(c){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=c.createVertexBuffer(this.layoutVertexArray2,ZI)),this.layoutVertexBuffer=c.createVertexBuffer(this.layoutVertexArray,Qh),this.indexBuffer=c.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(c),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(c){if(c.properties&&Object.prototype.hasOwnProperty.call(c.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(c.properties,"mapbox_clip_end"))return{start:+c.properties.mapbox_clip_start,end:+c.properties.mapbox_clip_end}}addFeature(c,m,v,S,P){const D=this.layers[0].layout,R=D.get("line-join").evaluate(c,{}),N=D.get("line-cap"),V=D.get("line-miter-limit"),W=D.get("line-round-limit");this.lineClips=this.lineFeatureClips(c);for(const Y of m)this.addLine(Y,c,R,N,V,W);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,c,v,P,S)}addLine(c,m,v,S,P,D){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(let Te=0;Te<c.length-1;Te++)this.totalDistance+=c[Te].dist(c[Te+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const R=LA[m.type]==="Polygon";let N=c.length;for(;N>=2&&c[N-1].equals(c[N-2]);)N--;let V=0;for(;V<N-1&&c[V].equals(c[V+1]);)V++;if(N<(R?3:2))return;v==="bevel"&&(P=1.05);const W=this.overscaling<=16?15*no/(512*this.overscaling):0,Y=this.segments.prepareSegment(10*N,this.layoutVertexArray,this.indexArray);let ee,re,he,ue,Ae;this.e1=this.e2=-1,R&&(ee=c[N-2],Ae=c[V].sub(ee)._unit()._perp());for(let Te=V;Te<N;Te++){if(he=Te===N-1?R?c[V+1]:void 0:c[Te+1],he&&c[Te].equals(he))continue;Ae&&(ue=Ae),ee&&(re=ee),ee=c[Te],Ae=he?he.sub(ee)._unit()._perp():ue,ue=ue||Ae;let nt=ue.add(Ae);nt.x===0&&nt.y===0||nt._unit();const Ve=ue.x*Ae.x+ue.y*Ae.y,qe=nt.x*Ae.x+nt.y*Ae.y,pt=qe!==0?1/qe:1/0,Dt=2*Math.sqrt(2-2*qe),ln=qe<XI&&re&&he,zn=ue.x*Ae.y-ue.y*Ae.x>0;if(ln&&Te>V){const Pn=ee.dist(re);if(Pn>2*W){const vn=ee.sub(ee.sub(re)._mult(W/Pn)._round());this.updateDistance(re,vn),this.addCurrentVertex(vn,ue,0,0,Y),re=vn}}const un=re&&he;let en=un?v:R?"butt":S;if(un&&en==="round"&&(pt<D?en="miter":pt<=2&&(en="fakeround")),en==="miter"&&pt>P&&(en="bevel"),en==="bevel"&&(pt>2&&(en="flipbevel"),pt<P&&(en="miter")),re&&this.updateDistance(re,ee),en==="miter")nt._mult(pt),this.addCurrentVertex(ee,nt,0,0,Y);else if(en==="flipbevel"){if(pt>100)nt=Ae.mult(-1);else{const Pn=pt*ue.add(Ae).mag()/ue.sub(Ae).mag();nt._perp()._mult(Pn*(zn?-1:1))}this.addCurrentVertex(ee,nt,0,0,Y),this.addCurrentVertex(ee,nt.mult(-1),0,0,Y)}else if(en==="bevel"||en==="fakeround"){const Pn=-Math.sqrt(pt*pt-1),vn=zn?Pn:0,fn=zn?0:Pn;if(re&&this.addCurrentVertex(ee,ue,vn,fn,Y),en==="fakeround"){const vt=Math.round(180*Dt/Math.PI/20);for(let Mn=1;Mn<vt;Mn++){let En=Mn/vt;if(En!==.5){const Ki=En-.5;En+=En*Ki*(En-1)*((1.0904+Ve*(Ve*(3.55645-1.43519*Ve)-3.2452))*Ki*Ki+(.848013+Ve*(.215638*Ve-1.06021)))}const Jn=Ae.sub(ue)._mult(En)._add(ue)._unit()._mult(zn?-1:1);this.addHalfVertex(ee,Jn.x,Jn.y,!1,zn,0,Y)}}he&&this.addCurrentVertex(ee,Ae,-vn,-fn,Y)}else if(en==="butt")this.addCurrentVertex(ee,nt,0,0,Y);else if(en==="square"){const Pn=re?1:-1;this.addCurrentVertex(ee,nt,Pn,Pn,Y)}else en==="round"&&(re&&(this.addCurrentVertex(ee,ue,0,0,Y),this.addCurrentVertex(ee,ue,1,1,Y,!0)),he&&(this.addCurrentVertex(ee,Ae,-1,-1,Y,!0),this.addCurrentVertex(ee,Ae,0,0,Y)));if(ln&&Te<N-1){const Pn=ee.dist(he);if(Pn>2*W){const vn=ee.add(he.sub(ee)._mult(W/Pn)._round());this.updateDistance(ee,vn),this.addCurrentVertex(vn,Ae,0,0,Y),ee=vn}}}}addCurrentVertex(c,m,v,S,P,D=!1){const R=m.y*S-m.x,N=-m.y-m.x*S;this.addHalfVertex(c,m.x+m.y*v,m.y-m.x*v,D,!1,v,P),this.addHalfVertex(c,R,N,D,!0,-S,P),this.distance>$A/2&&this.totalDistance===0&&(this.distance=0,this.updateScaledDistance(),this.addCurrentVertex(c,m,v,S,P,D))}addHalfVertex({x:c,y:m},v,S,P,D,R,N){const V=.5*(this.lineClips?this.scaledDistance*($A-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((c<<1)+(P?1:0),(m<<1)+(D?1:0),Math.round(63*v)+128,Math.round(63*S)+128,1+(R===0?0:R<0?-1:1)|(63&V)<<2,V>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);const W=N.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,W),N.primitiveLength++),D?this.e2=W:this.e1=W}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(c,m){this.distance+=c.dist(m),this.updateScaledDistance()}}let BA,NA;dn("LineBucket",KO,{omit:["layers","patternFeatures"]});var zA={get paint(){return NA=NA||new E({"line-opacity":new Qn(Ze.paint_line["line-opacity"]),"line-color":new Qn(Ze.paint_line["line-color"]),"line-translate":new Sn(Ze.paint_line["line-translate"]),"line-translate-anchor":new Sn(Ze.paint_line["line-translate-anchor"]),"line-width":new Qn(Ze.paint_line["line-width"]),"line-gap-width":new Qn(Ze.paint_line["line-gap-width"]),"line-offset":new Qn(Ze.paint_line["line-offset"]),"line-blur":new Qn(Ze.paint_line["line-blur"]),"line-dasharray":new ey(Ze.paint_line["line-dasharray"]),"line-pattern":new J0(Ze.paint_line["line-pattern"]),"line-gradient":new Vc(Ze.paint_line["line-gradient"])})},get layout(){return BA=BA||new E({"line-cap":new Sn(Ze.layout_line["line-cap"]),"line-join":new Qn(Ze.layout_line["line-join"]),"line-miter-limit":new Sn(Ze.layout_line["line-miter-limit"]),"line-round-limit":new Sn(Ze.layout_line["line-round-limit"]),"line-sort-key":new Qn(Ze.layout_line["line-sort-key"])})}};class WI extends Qn{possiblyEvaluate(c,m){return m=new gs(Math.floor(m.zoom),{now:m.now,fadeDuration:m.fadeDuration,zoomHistory:m.zoomHistory,transition:m.transition}),super.possiblyEvaluate(c,m)}evaluate(c,m,v,S){return m=q({},m,{zoom:Math.floor(m.zoom)}),super.evaluate(c,m,v,S)}}let ox;class GI extends y{constructor(c){super(c,zA),this.gradientVersion=0,ox||(ox=new WI(zA.paint.properties["line-width"].specification),ox.useIntegerZoom=!0)}_handleSpecialPaintPropertyUpdate(c){if(c==="line-gradient"){const m=this.gradientExpression();this.stepInterpolant=!!(function(v){return v._styleExpression!==void 0})(m)&&m._styleExpression.expression instanceof Vd,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(c,m){super.recalculate(c,m),this.paint._values["line-floorwidth"]=ox.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,c)}createBucket(c){return new KO(c)}queryRadius(c){const m=c,v=QA(eg("line-width",this,m),eg("line-gap-width",this,m)),S=eg("line-offset",this,m);return v/2+Math.abs(S)+H_(this.paint.get("line-translate"))}queryIntersectsFeature(c,m,v,S,P,D,R){const N=K_(c,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),D.angle,R),V=R/2*QA(this.paint.get("line-width").evaluate(m,v),this.paint.get("line-gap-width").evaluate(m,v)),W=this.paint.get("line-offset").evaluate(m,v);return W&&(S=(function(Y,ee){const re=[];for(let he=0;he<Y.length;he++){const ue=Y[he],Ae=[];for(let Te=0;Te<ue.length;Te++){const nt=ue[Te-1],Ve=ue[Te],qe=ue[Te+1],pt=Te===0?new p(0,0):Ve.sub(nt)._unit()._perp(),Dt=Te===ue.length-1?new p(0,0):qe.sub(Ve)._unit()._perp(),ln=pt._add(Dt)._unit(),zn=ln.x*Dt.x+ln.y*Dt.y;zn!==0&&ln._mult(1/zn),Ae.push(ln._mult(ee)._add(Ve))}re.push(Ae)}return re})(S,W*R)),(function(Y,ee,re){for(let he=0;he<ee.length;he++){const ue=ee[he];if(Y.length>=3){for(let Ae=0;Ae<ue.length;Ae++)if(Jm(Y,ue[Ae]))return!0}if(vA(Y,ue,re))return!0}return!1})(N,S,V)}isTileClipped(){return!0}}function QA(d,c){return c>0?c+2*d:d}const YI=$([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),jA=$([{name:"a_projected_pos",components:3,type:"Float32"}],4);$([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const UA=$([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"},{name:"a_box_real",components:2,type:"Int16"}]);$([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const JO=$([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),HI=$([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function KI(d,c,m){return d.sections.forEach((v=>{v.text=(function(S,P,D){const R=P.layout.get("text-transform").evaluate(D,{});return R==="uppercase"?S=S.toLocaleUpperCase():R==="lowercase"&&(S=S.toLocaleLowerCase()),ul.applyArabicShaping&&(S=ul.applyArabicShaping(S)),S})(v.text,c,m)})),d}$([{name:"triangle",components:3,type:"Uint16"}]),$([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),$([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",name:"collisionCircleDiameter"},{type:"Uint16",name:"textAnchorOffsetStartIndex"},{type:"Uint16",name:"textAnchorOffsetEndIndex"}]),$([{type:"Float32",name:"offsetX"}]),$([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]),$([{type:"Uint16",name:"textAnchor"},{type:"Float32",components:2,name:"textOffset"}]);const gv={"!":"ï¸","#":"ï¼",$:"ï¼","%":"ï¼","&":"ï¼","(":"ï¸µ",")":"ï¸¶","*":"ï¼","+":"ï¼",",":"ï¸","-":"ï¸²",".":"ã»","/":"ï¼",":":"ï¸",";":"ï¸","<":"ï¸¿","=":"ï¼",">":"ï¹","?":"ï¸","@":"ï¼ ","[":"ï¹","\\":"ï¼¼","]":"ï¹","^":"ï¼¾",_:"ï¸³","`":"ï½","{":"ï¸·","|":"â","}":"ï¸¸","~":"ï½","Â¢":"ï¿ ","Â£":"ï¿¡","Â¥":"ï¿¥","Â¦":"ï¿¤","Â¬":"ï¿¢","Â¯":"ï¿£","â":"ï¸²","â":"ï¸±","â":"ï¹","â":"ï¹","â":"ï¹","â":"ï¹","â¦":"ï¸","â§":"ã»","â©":"ï¿¦","ã":"ï¸","ã":"ï¸","ã":"ï¸¿","ã":"ï¹","ã":"ï¸½","ã":"ï¸¾","ã":"ï¹","ã":"ï¹","ã":"ï¹","ã":"ï¹","ã":"ï¸»","ã":"ï¸¼","ã":"ï¸¹","ã":"ï¸º","ã":"ï¸","ã":"ï¸","ï¼":"ï¸","ï¼":"ï¸µ","ï¼":"ï¸¶","ï¼":"ï¸","ï¼":"ï¸²","ï¼":"ã»","ï¼":"ï¸","ï¼":"ï¸","ï¼":"ï¸¿","ï¼":"ï¹","ï¼":"ï¸","ï¼»":"ï¹","ï¼½":"ï¹","ï¼¿":"ï¸³","ï½":"ï¸·","ï½":"â","ï½":"ï¸¸","ï½":"ï¸µ","ï½ ":"ï¸¶","ï½¡":"ï¸","ï½¢":"ï¹","ï½£":"ï¹"};var xo=24,VA=qi,qA=function(d,c,m,v,S){var P,D,R=8*S-v-1,N=(1<<R)-1,V=N>>1,W=-7,Y=S-1,ee=-1,re=d[c+Y];for(Y+=ee,P=re&(1<<-W)-1,re>>=-W,W+=R;W>0;P=256*P+d[c+Y],Y+=ee,W-=8);for(D=P&(1<<-W)-1,P>>=-W,W+=v;W>0;D=256*D+d[c+Y],Y+=ee,W-=8);if(P===0)P=1-V;else{if(P===N)return D?NaN:1/0*(re?-1:1);D+=Math.pow(2,v),P-=V}return(re?-1:1)*D*Math.pow(2,P-v)},ZA=function(d,c,m,v,S,P){var D,R,N,V=8*P-S-1,W=(1<<V)-1,Y=W>>1,ee=S===23?Math.pow(2,-24)-Math.pow(2,-77):0,re=0,he=1,ue=c<0||c===0&&1/c<0?1:0;for(c=Math.abs(c),isNaN(c)||c===1/0?(R=isNaN(c)?1:0,D=W):(D=Math.floor(Math.log(c)/Math.LN2),c*(N=Math.pow(2,-D))<1&&(D--,N*=2),(c+=D+Y>=1?ee/N:ee*Math.pow(2,1-Y))*N>=2&&(D++,N/=2),D+Y>=W?(R=0,D=W):D+Y>=1?(R=(c*N-1)*Math.pow(2,S),D+=Y):(R=c*Math.pow(2,Y-1)*Math.pow(2,S),D=0));S>=8;d[m+re]=255&R,re+=he,R/=256,S-=8);for(D=D<<S|R,V+=S;V>0;d[m+re]=255&D,re+=he,D/=256,V-=8);d[m+re-he]|=128*ue};function qi(d){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(d)?d:new Uint8Array(d||0),this.pos=0,this.type=0,this.length=this.buf.length}qi.Varint=0,qi.Fixed64=1,qi.Bytes=2,qi.Fixed32=5;var eS=4294967296,XA=1/eS,gu=typeof TextDecoder>"u"?null:new TextDecoder("utf-8");function td(d){return d.type===qi.Bytes?d.readVarint()+d.pos:d.pos+1}function JI(d,c,m){return m?4294967296*c+(d>>>0):4294967296*(c>>>0)+(d>>>0)}function WA(d,c,m){var v=c<=16383?1:c<=2097151?2:c<=268435455?3:Math.floor(Math.log(c)/(7*Math.LN2));m.realloc(v);for(var S=m.pos-1;S>=d;S--)m.buf[S+v]=m.buf[S]}function GA(d,c){for(var m=0;m<d.length;m++)c.writeVarint(d[m])}function e8(d,c){for(var m=0;m<d.length;m++)c.writeSVarint(d[m])}function t8(d,c){for(var m=0;m<d.length;m++)c.writeFloat(d[m])}function n8(d,c){for(var m=0;m<d.length;m++)c.writeDouble(d[m])}function r8(d,c){for(var m=0;m<d.length;m++)c.writeBoolean(d[m])}function tS(d,c){for(var m=0;m<d.length;m++)c.writeFixed32(d[m])}function i8(d,c){for(var m=0;m<d.length;m++)c.writeSFixed32(d[m])}function s8(d,c){for(var m=0;m<d.length;m++)c.writeFixed64(d[m])}function o8(d,c){for(var m=0;m<d.length;m++)c.writeSFixed64(d[m])}function ax(d,c){return(d[c]|d[c+1]<<8|d[c+2]<<16)+16777216*d[c+3]}function uy(d,c,m){d[m]=c,d[m+1]=c>>>8,d[m+2]=c>>>16,d[m+3]=c>>>24}function YA(d,c){return(d[c]|d[c+1]<<8|d[c+2]<<16)+(d[c+3]<<24)}qi.prototype={destroy:function(){this.buf=null},readFields:function(d,c,m){for(m=m||this.length;this.pos<m;){var v=this.readVarint(),S=v>>3,P=this.pos;this.type=7&v,d(S,c,this),this.pos===P&&this.skip(v)}return c},readMessage:function(d,c){return this.readFields(d,c,this.readVarint()+this.pos)},readFixed32:function(){var d=ax(this.buf,this.pos);return this.pos+=4,d},readSFixed32:function(){var d=YA(this.buf,this.pos);return this.pos+=4,d},readFixed64:function(){var d=ax(this.buf,this.pos)+ax(this.buf,this.pos+4)*eS;return this.pos+=8,d},readSFixed64:function(){var d=ax(this.buf,this.pos)+YA(this.buf,this.pos+4)*eS;return this.pos+=8,d},readFloat:function(){var d=qA(this.buf,this.pos,!0,23,4);return this.pos+=4,d},readDouble:function(){var d=qA(this.buf,this.pos,!0,52,8);return this.pos+=8,d},readVarint:function(d){var c,m,v=this.buf;return c=127&(m=v[this.pos++]),m<128?c:(c|=(127&(m=v[this.pos++]))<<7,m<128?c:(c|=(127&(m=v[this.pos++]))<<14,m<128?c:(c|=(127&(m=v[this.pos++]))<<21,m<128?c:(function(S,P,D){var R,N,V=D.buf;if(R=(112&(N=V[D.pos++]))>>4,N<128||(R|=(127&(N=V[D.pos++]))<<3,N<128)||(R|=(127&(N=V[D.pos++]))<<10,N<128)||(R|=(127&(N=V[D.pos++]))<<17,N<128)||(R|=(127&(N=V[D.pos++]))<<24,N<128)||(R|=(1&(N=V[D.pos++]))<<31,N<128))return JI(S,R,P);throw new Error("Expected varint not more than 10 bytes")})(c|=(15&(m=v[this.pos]))<<28,d,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var d=this.readVarint();return d%2==1?(d+1)/-2:d/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var d=this.readVarint()+this.pos,c=this.pos;return this.pos=d,d-c>=12&&gu?(function(m,v,S){return gu.decode(m.subarray(v,S))})(this.buf,c,d):(function(m,v,S){for(var P="",D=v;D<S;){var R,N,V,W=m[D],Y=null,ee=W>239?4:W>223?3:W>191?2:1;if(D+ee>S)break;ee===1?W<128&&(Y=W):ee===2?(192&(R=m[D+1]))==128&&(Y=(31&W)<<6|63&R)<=127&&(Y=null):ee===3?(N=m[D+2],(192&(R=m[D+1]))==128&&(192&N)==128&&((Y=(15&W)<<12|(63&R)<<6|63&N)<=2047||Y>=55296&&Y<=57343)&&(Y=null)):ee===4&&(N=m[D+2],V=m[D+3],(192&(R=m[D+1]))==128&&(192&N)==128&&(192&V)==128&&((Y=(15&W)<<18|(63&R)<<12|(63&N)<<6|63&V)<=65535||Y>=1114112)&&(Y=null)),Y===null?(Y=65533,ee=1):Y>65535&&(Y-=65536,P+=String.fromCharCode(Y>>>10&1023|55296),Y=56320|1023&Y),P+=String.fromCharCode(Y),D+=ee}return P})(this.buf,c,d)},readBytes:function(){var d=this.readVarint()+this.pos,c=this.buf.subarray(this.pos,d);return this.pos=d,c},readPackedVarint:function(d,c){if(this.type!==qi.Bytes)return d.push(this.readVarint(c));var m=td(this);for(d=d||[];this.pos<m;)d.push(this.readVarint(c));return d},readPackedSVarint:function(d){if(this.type!==qi.Bytes)return d.push(this.readSVarint());var c=td(this);for(d=d||[];this.pos<c;)d.push(this.readSVarint());return d},readPackedBoolean:function(d){if(this.type!==qi.Bytes)return d.push(this.readBoolean());var c=td(this);for(d=d||[];this.pos<c;)d.push(this.readBoolean());return d},readPackedFloat:function(d){if(this.type!==qi.Bytes)return d.push(this.readFloat());var c=td(this);for(d=d||[];this.pos<c;)d.push(this.readFloat());return d},readPackedDouble:function(d){if(this.type!==qi.Bytes)return d.push(this.readDouble());var c=td(this);for(d=d||[];this.pos<c;)d.push(this.readDouble());return d},readPackedFixed32:function(d){if(this.type!==qi.Bytes)return d.push(this.readFixed32());var c=td(this);for(d=d||[];this.pos<c;)d.push(this.readFixed32());return d},readPackedSFixed32:function(d){if(this.type!==qi.Bytes)return d.push(this.readSFixed32());var c=td(this);for(d=d||[];this.pos<c;)d.push(this.readSFixed32());return d},readPackedFixed64:function(d){if(this.type!==qi.Bytes)return d.push(this.readFixed64());var c=td(this);for(d=d||[];this.pos<c;)d.push(this.readFixed64());return d},readPackedSFixed64:function(d){if(this.type!==qi.Bytes)return d.push(this.readSFixed64());var c=td(this);for(d=d||[];this.pos<c;)d.push(this.readSFixed64());return d},skip:function(d){var c=7&d;if(c===qi.Varint)for(;this.buf[this.pos++]>127;);else if(c===qi.Bytes)this.pos=this.readVarint()+this.pos;else if(c===qi.Fixed32)this.pos+=4;else{if(c!==qi.Fixed64)throw new Error("Unimplemented type: "+c);this.pos+=8}},writeTag:function(d,c){this.writeVarint(d<<3|c)},realloc:function(d){for(var c=this.length||16;c<this.pos+d;)c*=2;if(c!==this.length){var m=new Uint8Array(c);m.set(this.buf),this.buf=m,this.length=c}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(d){this.realloc(4),uy(this.buf,d,this.pos),this.pos+=4},writeSFixed32:function(d){this.realloc(4),uy(this.buf,d,this.pos),this.pos+=4},writeFixed64:function(d){this.realloc(8),uy(this.buf,-1&d,this.pos),uy(this.buf,Math.floor(d*XA),this.pos+4),this.pos+=8},writeSFixed64:function(d){this.realloc(8),uy(this.buf,-1&d,this.pos),uy(this.buf,Math.floor(d*XA),this.pos+4),this.pos+=8},writeVarint:function(d){(d=+d||0)>268435455||d<0?(function(c,m){var v,S;if(c>=0?(v=c%4294967296|0,S=c/4294967296|0):(S=~(-c/4294967296),4294967295^(v=~(-c%4294967296))?v=v+1|0:(v=0,S=S+1|0)),c>=18446744073709552e3||c<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");m.realloc(10),(function(P,D,R){R.buf[R.pos++]=127&P|128,P>>>=7,R.buf[R.pos++]=127&P|128,P>>>=7,R.buf[R.pos++]=127&P|128,P>>>=7,R.buf[R.pos++]=127&P|128,R.buf[R.pos]=127&(P>>>=7)})(v,0,m),(function(P,D){var R=(7&P)<<4;D.buf[D.pos++]|=R|((P>>>=3)?128:0),P&&(D.buf[D.pos++]=127&P|((P>>>=7)?128:0),P&&(D.buf[D.pos++]=127&P|((P>>>=7)?128:0),P&&(D.buf[D.pos++]=127&P|((P>>>=7)?128:0),P&&(D.buf[D.pos++]=127&P|((P>>>=7)?128:0),P&&(D.buf[D.pos++]=127&P)))))})(S,m)})(d,this):(this.realloc(4),this.buf[this.pos++]=127&d|(d>127?128:0),d<=127||(this.buf[this.pos++]=127&(d>>>=7)|(d>127?128:0),d<=127||(this.buf[this.pos++]=127&(d>>>=7)|(d>127?128:0),d<=127||(this.buf[this.pos++]=d>>>7&127))))},writeSVarint:function(d){this.writeVarint(d<0?2*-d-1:2*d)},writeBoolean:function(d){this.writeVarint(!!d)},writeString:function(d){d=String(d),this.realloc(4*d.length),this.pos++;var c=this.pos;this.pos=(function(v,S,P){for(var D,R,N=0;N<S.length;N++){if((D=S.charCodeAt(N))>55295&&D<57344){if(!R){D>56319||N+1===S.length?(v[P++]=239,v[P++]=191,v[P++]=189):R=D;continue}if(D<56320){v[P++]=239,v[P++]=191,v[P++]=189,R=D;continue}D=R-55296<<10|D-56320|65536,R=null}else R&&(v[P++]=239,v[P++]=191,v[P++]=189,R=null);D<128?v[P++]=D:(D<2048?v[P++]=D>>6|192:(D<65536?v[P++]=D>>12|224:(v[P++]=D>>18|240,v[P++]=D>>12&63|128),v[P++]=D>>6&63|128),v[P++]=63&D|128)}return P})(this.buf,d,this.pos);var m=this.pos-c;m>=128&&WA(c,m,this),this.pos=c-1,this.writeVarint(m),this.pos+=m},writeFloat:function(d){this.realloc(4),ZA(this.buf,d,this.pos,!0,23,4),this.pos+=4},writeDouble:function(d){this.realloc(8),ZA(this.buf,d,this.pos,!0,52,8),this.pos+=8},writeBytes:function(d){var c=d.length;this.writeVarint(c),this.realloc(c);for(var m=0;m<c;m++)this.buf[this.pos++]=d[m]},writeRawMessage:function(d,c){this.pos++;var m=this.pos;d(c,this);var v=this.pos-m;v>=128&&WA(m,v,this),this.pos=m-1,this.writeVarint(v),this.pos+=v},writeMessage:function(d,c,m){this.writeTag(d,qi.Bytes),this.writeRawMessage(c,m)},writePackedVarint:function(d,c){c.length&&this.writeMessage(d,GA,c)},writePackedSVarint:function(d,c){c.length&&this.writeMessage(d,e8,c)},writePackedBoolean:function(d,c){c.length&&this.writeMessage(d,r8,c)},writePackedFloat:function(d,c){c.length&&this.writeMessage(d,t8,c)},writePackedDouble:function(d,c){c.length&&this.writeMessage(d,n8,c)},writePackedFixed32:function(d,c){c.length&&this.writeMessage(d,tS,c)},writePackedSFixed32:function(d,c){c.length&&this.writeMessage(d,i8,c)},writePackedFixed64:function(d,c){c.length&&this.writeMessage(d,s8,c)},writePackedSFixed64:function(d,c){c.length&&this.writeMessage(d,o8,c)},writeBytesField:function(d,c){this.writeTag(d,qi.Bytes),this.writeBytes(c)},writeFixed32Field:function(d,c){this.writeTag(d,qi.Fixed32),this.writeFixed32(c)},writeSFixed32Field:function(d,c){this.writeTag(d,qi.Fixed32),this.writeSFixed32(c)},writeFixed64Field:function(d,c){this.writeTag(d,qi.Fixed64),this.writeFixed64(c)},writeSFixed64Field:function(d,c){this.writeTag(d,qi.Fixed64),this.writeSFixed64(c)},writeVarintField:function(d,c){this.writeTag(d,qi.Varint),this.writeVarint(c)},writeSVarintField:function(d,c){this.writeTag(d,qi.Varint),this.writeSVarint(c)},writeStringField:function(d,c){this.writeTag(d,qi.Bytes),this.writeString(c)},writeFloatField:function(d,c){this.writeTag(d,qi.Fixed32),this.writeFloat(c)},writeDoubleField:function(d,c){this.writeTag(d,qi.Fixed64),this.writeDouble(c)},writeBooleanField:function(d,c){this.writeVarintField(d,!!c)}};var nS=l(VA);const rS=3;function a8(d,c,m){d===1&&m.readMessage(l8,c)}function l8(d,c,m){if(d===3){const{id:v,bitmap:S,width:P,height:D,left:R,top:N,advance:V}=m.readMessage(u8,{});c.push({id:v,bitmap:new cv({width:P+2*rS,height:D+2*rS},S),metrics:{width:P,height:D,left:R,top:N,advance:V}})}}function u8(d,c,m){d===1?c.id=m.readVarint():d===2?c.bitmap=m.readBytes():d===3?c.width=m.readVarint():d===4?c.height=m.readVarint():d===5?c.left=m.readSVarint():d===6?c.top=m.readSVarint():d===7&&(c.advance=m.readVarint())}const HA=rS;function KA(d){let c=0,m=0;for(const D of d)c+=D.w*D.h,m=Math.max(m,D.w);d.sort(((D,R)=>R.h-D.h));const v=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(c/.95)),m),h:1/0}];let S=0,P=0;for(const D of d)for(let R=v.length-1;R>=0;R--){const N=v[R];if(!(D.w>N.w||D.h>N.h)){if(D.x=N.x,D.y=N.y,P=Math.max(P,D.y+D.h),S=Math.max(S,D.x+D.w),D.w===N.w&&D.h===N.h){const V=v.pop();R<v.length&&(v[R]=V)}else D.h===N.h?(N.x+=D.w,N.w-=D.w):D.w===N.w?(N.y+=D.h,N.h-=D.h):(v.push({x:N.x+D.w,y:N.y,w:N.w-D.w,h:D.h}),N.y+=D.h,N.h-=D.h);break}}return{w:S,h:P,fill:c/(S*P)||0}}const fl=1;class iS{constructor(c,{pixelRatio:m,version:v,stretchX:S,stretchY:P,content:D,textFitWidth:R,textFitHeight:N}){this.paddedRect=c,this.pixelRatio=m,this.stretchX=S,this.stretchY=P,this.content=D,this.version=v,this.textFitWidth=R,this.textFitHeight=N}get tl(){return[this.paddedRect.x+fl,this.paddedRect.y+fl]}get br(){return[this.paddedRect.x+this.paddedRect.w-fl,this.paddedRect.y+this.paddedRect.h-fl]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2*fl)/this.pixelRatio,(this.paddedRect.h-2*fl)/this.pixelRatio]}}class JA{constructor(c,m){const v={},S={};this.haveRenderCallbacks=[];const P=[];this.addImages(c,v,P),this.addImages(m,S,P);const{w:D,h:R}=KA(P),N=new $l({width:D||1,height:R||1});for(const V in c){const W=c[V],Y=v[V].paddedRect;$l.copy(W.data,N,{x:0,y:0},{x:Y.x+fl,y:Y.y+fl},W.data)}for(const V in m){const W=m[V],Y=S[V].paddedRect,ee=Y.x+fl,re=Y.y+fl,he=W.data.width,ue=W.data.height;$l.copy(W.data,N,{x:0,y:0},{x:ee,y:re},W.data),$l.copy(W.data,N,{x:0,y:ue-1},{x:ee,y:re-1},{width:he,height:1}),$l.copy(W.data,N,{x:0,y:0},{x:ee,y:re+ue},{width:he,height:1}),$l.copy(W.data,N,{x:he-1,y:0},{x:ee-1,y:re},{width:1,height:ue}),$l.copy(W.data,N,{x:0,y:0},{x:ee+he,y:re},{width:1,height:ue})}this.image=N,this.iconPositions=v,this.patternPositions=S}addImages(c,m,v){for(const S in c){const P=c[S],D={x:0,y:0,w:P.data.width+2*fl,h:P.data.height+2*fl};v.push(D),m[S]=new iS(D,P),P.hasRenderCallback&&this.haveRenderCallbacks.push(S)}}patchUpdatedImages(c,m){c.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const v in c.updatedImages)this.patchUpdatedImage(this.iconPositions[v],c.getImage(v),m),this.patchUpdatedImage(this.patternPositions[v],c.getImage(v),m)}patchUpdatedImage(c,m,v){if(!c||!m||c.version===m.version)return;c.version=m.version;const[S,P]=c.tl;v.update(m.data,void 0,{x:S,y:P})}}var pp;dn("ImagePosition",iS),dn("ImageAtlas",JA),o.ah=void 0,(pp=o.ah||(o.ah={}))[pp.none=0]="none",pp[pp.horizontal=1]="horizontal",pp[pp.vertical=2]="vertical",pp[pp.horizontalOnly=3]="horizontalOnly";const yv=-17;class vv{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(c,m){const v=new vv;return v.scale=c||1,v.fontStack=m,v}static forImage(c){const m=new vv;return m.imageName=c,m}}class cy{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(c,m){const v=new cy;for(let S=0;S<c.sections.length;S++){const P=c.sections[S];P.image?v.addImageSection(P):v.addTextSection(P,m)}return v}length(){return this.text.length}getSection(c){return this.sections[this.sectionIndex[c]]}getSectionIndex(c){return this.sectionIndex[c]}getCharCode(c){return this.text.charCodeAt(c)}verticalizePunctuation(){this.text=(function(c){let m="";for(let v=0;v<c.length;v++){const S=c.charCodeAt(v+1)||null,P=c.charCodeAt(v-1)||null;m+=S&&U_(S)&&!gv[c[v+1]]||P&&U_(P)&&!gv[c[v-1]]||!gv[c[v]]?c[v]:gv[c[v]]}return m})(this.text)}trim(){let c=0;for(let v=0;v<this.text.length&&bv[this.text.charCodeAt(v)];v++)c++;let m=this.text.length;for(let v=this.text.length-1;v>=0&&v>=c&&bv[this.text.charCodeAt(v)];v--)m--;this.text=this.text.substring(c,m),this.sectionIndex=this.sectionIndex.slice(c,m)}substring(c,m){const v=new cy;return v.text=this.text.substring(c,m),v.sectionIndex=this.sectionIndex.slice(c,m),v.sections=this.sections,v}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce(((c,m)=>Math.max(c,this.sections[m].scale)),0)}addTextSection(c,m){this.text+=c.text,this.sections.push(vv.forText(c.scale,c.fontStack||m));const v=this.sections.length-1;for(let S=0;S<c.text.length;++S)this.sectionIndex.push(v)}addImageSection(c){const m=c.image?c.image.name:"";if(m.length===0)return void se("Can't add FormattedSection with an empty image.");const v=this.getNextImageSectionCharCode();v?(this.text+=String.fromCharCode(v),this.sections.push(vv.forImage(m)),this.sectionIndex.push(this.sections.length-1)):se("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function hy(d,c,m,v,S,P,D,R,N,V,W,Y,ee,re,he){const ue=cy.fromFeature(d,S);let Ae;Y===o.ah.vertical&&ue.verticalizePunctuation();const{processBidirectionalText:Te,processStyledBidirectionalText:nt}=ul;if(Te&&ue.sections.length===1){Ae=[];const pt=Te(ue.toString(),sS(ue,V,P,c,v,re));for(const Dt of pt){const ln=new cy;ln.text=Dt,ln.sections=ue.sections;for(let zn=0;zn<Dt.length;zn++)ln.sectionIndex.push(0);Ae.push(ln)}}else if(nt){Ae=[];const pt=nt(ue.text,ue.sectionIndex,sS(ue,V,P,c,v,re));for(const Dt of pt){const ln=new cy;ln.text=Dt[0],ln.sectionIndex=Dt[1],ln.sections=ue.sections,Ae.push(ln)}}else Ae=(function(pt,Dt){const ln=[],zn=pt.text;let un=0;for(const en of Dt)ln.push(pt.substring(un,en)),un=en;return un<zn.length&&ln.push(pt.substring(un,zn.length)),ln})(ue,sS(ue,V,P,c,v,re));const Ve=[],qe={positionedLines:Ve,text:ue.toString(),top:W[1],bottom:W[1],left:W[0],right:W[0],writingMode:Y,iconsInText:!1,verticalizable:!1};return(function(pt,Dt,ln,zn,un,en,Pn,vn,fn,vt,Mn,En){let Jn=0,Ki=yv,Zi=0,Uo=0;const zl=vn==="right"?1:vn==="left"?0:.5;let ba=0;for(const Vr of un){Vr.trim();const Ti=Vr.getMaxScale(),Ia=(Ti-1)*xo,_a={positionedGlyphs:[],lineOffset:0};pt.positionedLines[ba]=_a;const Ya=_a.positionedGlyphs;let ea=0;if(!Vr.length()){Ki+=en,++ba;continue}for(let dl=0;dl<Vr.length();dl++){const di=Vr.getSection(dl),Ji=Vr.getSectionIndex(dl),ys=Vr.getCharCode(dl);let Ql=0,Zs=null,fg=null,Xc=null,Vh=xo;const Yu=!(fn===o.ah.horizontal||!Mn&&!tv(ys)||Mn&&(bv[ys]||(wo=ys,/\p{sc=Arab}/u.test(String.fromCodePoint(wo)))));if(di.imageName){const vu=zn[di.imageName];if(!vu)continue;Xc=di.imageName,pt.iconsInText=pt.iconsInText||!0,fg=vu.paddedRect;const ta=vu.displaySize;di.scale=di.scale*xo/En,Zs={width:ta[0],height:ta[1],left:fl,top:-HA,advance:Yu?ta[1]:ta[0]},Ql=Ia+(xo-ta[1]*di.scale),Vh=Zs.advance;const jl=Yu?ta[0]*di.scale-xo*Ti:ta[1]*di.scale-xo*Ti;jl>0&&jl>ea&&(ea=jl)}else{const vu=ln[di.fontStack],ta=vu&&vu[ys];if(ta&&ta.rect)fg=ta.rect,Zs=ta.metrics;else{const jl=Dt[di.fontStack],Cv=jl&&jl[ys];if(!Cv)continue;Zs=Cv.metrics}Ql=(Ti-di.scale)*xo}Yu?(pt.verticalizable=!0,Ya.push({glyph:ys,imageName:Xc,x:Jn,y:Ki+Ql,vertical:Yu,scale:di.scale,fontStack:di.fontStack,sectionIndex:Ji,metrics:Zs,rect:fg}),Jn+=Vh*di.scale+vt):(Ya.push({glyph:ys,imageName:Xc,x:Jn,y:Ki+Ql,vertical:Yu,scale:di.scale,fontStack:di.fontStack,sectionIndex:Ji,metrics:Zs,rect:fg}),Jn+=Zs.advance*di.scale+vt)}Ya.length!==0&&(Zi=Math.max(Jn-vt,Zi),d8(Ya,0,Ya.length-1,zl,ea)),Jn=0;const yu=en*Ti+ea;_a.lineOffset=Math.max(ea,Ia),Ki+=yu,Uo=Math.max(yu,Uo),++ba}var wo;const Xa=Ki-yv,{horizontalAlign:Wa,verticalAlign:Ga}=lx(Pn);(function(Vr,Ti,Ia,_a,Ya,ea,yu,dl,di){const Ji=(Ti-Ia)*Ya;let ys=0;ys=ea!==yu?-dl*_a-yv:(-_a*di+.5)*yu;for(const Ql of Vr)for(const Zs of Ql.positionedGlyphs)Zs.x+=Ji,Zs.y+=ys})(pt.positionedLines,zl,Wa,Ga,Zi,Uo,en,Xa,un.length),pt.top+=-Ga*Xa,pt.bottom=pt.top+Xa,pt.left+=-Wa*Zi,pt.right=pt.left+Zi})(qe,c,m,v,Ae,D,R,N,Y,V,ee,he),!(function(pt){for(const Dt of pt)if(Dt.positionedGlyphs.length!==0)return!1;return!0})(Ve)&&qe}const bv={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},c8={10:!0,32:!0,38:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0},h8={40:!0};function eE(d,c,m,v,S,P){if(c.imageName){const D=v[c.imageName];return D?D.displaySize[0]*c.scale*xo/P+S:0}{const D=m[c.fontStack],R=D&&D[d];return R?R.metrics.advance*c.scale+S:0}}function tE(d,c,m,v){const S=Math.pow(d-c,2);return v?d<c?S/2:2*S:S+Math.abs(m)*m}function f8(d,c,m){let v=0;return d===10&&(v-=1e4),m&&(v+=150),d!==40&&d!==65288||(v+=50),c!==41&&c!==65289||(v+=50),v}function nE(d,c,m,v,S,P){let D=null,R=tE(c,m,S,P);for(const N of v){const V=tE(c-N.x,m,S,P)+N.badness;V<=R&&(D=N,R=V)}return{index:d,x:c,priorBreak:D,badness:R}}function rE(d){return d?rE(d.priorBreak).concat(d.index):[]}function sS(d,c,m,v,S,P){if(!d)return[];const D=[],R=(function(Y,ee,re,he,ue,Ae){let Te=0;for(let nt=0;nt<Y.length();nt++){const Ve=Y.getSection(nt);Te+=eE(Y.getCharCode(nt),Ve,he,ue,ee,Ae)}return Te/Math.max(1,Math.ceil(Te/re))})(d,c,m,v,S,P),N=d.text.indexOf("â")>=0;let V=0;for(let Y=0;Y<d.length();Y++){const ee=d.getSection(Y),re=d.getCharCode(Y);if(bv[re]||(V+=eE(re,ee,v,S,c,P)),Y<d.length()-1){const he=!((W=re)<11904)&&(!!Qr["CJK Compatibility Forms"](W)||!!Qr["CJK Compatibility"](W)||!!Qr["CJK Strokes"](W)||!!Qr["CJK Symbols and Punctuation"](W)||!!Qr["Enclosed CJK Letters and Months"](W)||!!Qr["Halfwidth and Fullwidth Forms"](W)||!!Qr["Ideographic Description Characters"](W)||!!Qr["Vertical Forms"](W)||j_.test(String.fromCodePoint(W)));(c8[re]||he||ee.imageName||Y!==d.length()-2&&h8[d.getCharCode(Y+1)])&&D.push(nE(Y+1,V,R,D,f8(re,d.getCharCode(Y+1),he&&N),!1))}}var W;return rE(nE(d.length(),V,R,D,0,!0))}function lx(d){let c=.5,m=.5;switch(d){case"right":case"top-right":case"bottom-right":c=1;break;case"left":case"top-left":case"bottom-left":c=0}switch(d){case"bottom":case"bottom-right":case"bottom-left":m=1;break;case"top":case"top-right":case"top-left":m=0}return{horizontalAlign:c,verticalAlign:m}}function d8(d,c,m,v,S){if(!v&&!S)return;const P=d[m],D=(d[m].x+P.metrics.advance*P.scale)*v;for(let R=c;R<=m;R++)d[R].x-=D,d[R].y+=S}function ux(d,c,m){const{horizontalAlign:v,verticalAlign:S}=lx(m),P=c[0]-d.displaySize[0]*v,D=c[1]-d.displaySize[1]*S;return{image:d,top:D,bottom:D+d.displaySize[1],left:P,right:P+d.displaySize[0]}}function iE(d){var c,m;let v=d.left,S=d.top,P=d.right-v,D=d.bottom-S;const R=(c=d.image.textFitWidth)!==null&&c!==void 0?c:"stretchOrShrink",N=(m=d.image.textFitHeight)!==null&&m!==void 0?m:"stretchOrShrink",V=(d.image.content[2]-d.image.content[0])/(d.image.content[3]-d.image.content[1]);if(N==="proportional"){if(R==="stretchOnly"&&P/D<V||R==="proportional"){const W=Math.ceil(D*V);v*=W/P,P=W}}else if(R==="proportional"&&N==="stretchOnly"&&V!==0&&P/D>V){const W=Math.ceil(P/V);S*=W/D,D=W}return{x1:v,y1:S,x2:v+P,y2:S+D}}function sE(d,c,m,v,S,P){const D=d.image;let R;if(D.content){const Ae=D.content,Te=D.pixelRatio||1;R=[Ae[0]/Te,Ae[1]/Te,D.displaySize[0]-Ae[2]/Te,D.displaySize[1]-Ae[3]/Te]}const N=c.left*P,V=c.right*P;let W,Y,ee,re;m==="width"||m==="both"?(re=S[0]+N-v[3],Y=S[0]+V+v[1]):(re=S[0]+(N+V-D.displaySize[0])/2,Y=re+D.displaySize[0]);const he=c.top*P,ue=c.bottom*P;return m==="height"||m==="both"?(W=S[1]+he-v[0],ee=S[1]+ue+v[2]):(W=S[1]+(he+ue-D.displaySize[1])/2,ee=W+D.displaySize[1]),{image:D,top:W,right:Y,bottom:ee,left:re,collisionPadding:R}}const _v=255,jh=128,mp=_v*jh;function oE(d,c){const{expression:m}=c;if(m.kind==="constant")return{kind:"constant",layoutSize:m.evaluate(new gs(d+1))};if(m.kind==="source")return{kind:"source"};{const{zoomStops:v,interpolationType:S}=m;let P=0;for(;P<v.length&&v[P]<=d;)P++;P=Math.max(0,P-1);let D=P;for(;D<v.length&&v[D]<d+1;)D++;D=Math.min(v.length-1,D);const R=v[P],N=v[D];return m.kind==="composite"?{kind:"composite",minZoom:R,maxZoom:N,interpolationType:S}:{kind:"camera",minZoom:R,maxZoom:N,minSize:m.evaluate(new gs(R)),maxSize:m.evaluate(new gs(N)),interpolationType:S}}}function oS(d,c,m){let v="never";const S=d.get(c);return S?v=S:d.get(m)&&(v="always"),v}const p8=_o.VectorTileFeature.types,m8=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function cx(d,c,m,v,S,P,D,R,N,V,W,Y,ee){const re=R?Math.min(mp,Math.round(R[0])):0,he=R?Math.min(mp,Math.round(R[1])):0;d.emplaceBack(c,m,Math.round(32*v),Math.round(32*S),P,D,(re<<1)+(N?1:0),he,16*V,16*W,256*Y,256*ee)}function aS(d,c,m){d.emplaceBack(c.x,c.y,m),d.emplaceBack(c.x,c.y,m),d.emplaceBack(c.x,c.y,m),d.emplaceBack(c.x,c.y,m)}function g8(d){for(const c of d.sections)if(DO(c.text))return!0;return!1}class lS{constructor(c){this.layoutVertexArray=new ty,this.indexArray=new Rl,this.programConfigurations=c,this.segments=new jr,this.dynamicLayoutVertexArray=new Wf,this.opacityVertexArray=new Il,this.hasVisibleVertices=!1,this.placedSymbolArray=new os}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(c,m,v,S){this.isEmpty()||(v&&(this.layoutVertexBuffer=c.createVertexBuffer(this.layoutVertexArray,YI.members),this.indexBuffer=c.createIndexBuffer(this.indexArray,m),this.dynamicLayoutVertexBuffer=c.createVertexBuffer(this.dynamicLayoutVertexArray,jA.members,!0),this.opacityVertexBuffer=c.createVertexBuffer(this.opacityVertexArray,m8,!0),this.opacityVertexBuffer.itemSize=1),(v||S)&&this.programConfigurations.upload(c))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}dn("SymbolBuffers",lS);class uS{constructor(c,m,v){this.layoutVertexArray=new c,this.layoutAttributes=m,this.indexArray=new v,this.segments=new jr,this.collisionVertexArray=new Wu}upload(c){this.layoutVertexBuffer=c.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=c.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=c.createVertexBuffer(this.collisionVertexArray,UA.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}dn("CollisionBuffers",uS);class fy{constructor(c){this.collisionBoxArray=c.collisionBoxArray,this.zoom=c.zoom,this.overscaling=c.overscaling,this.layers=c.layers,this.layerIds=this.layers.map((D=>D.id)),this.index=c.index,this.pixelRatio=c.pixelRatio,this.sourceLayerIndex=c.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=J_([]),this.placementViewportMatrix=J_([]);const m=this.layers[0]._unevaluatedLayout._values;this.textSizeData=oE(this.zoom,m["text-size"]),this.iconSizeData=oE(this.zoom,m["icon-size"]);const v=this.layers[0].layout,S=v.get("symbol-sort-key"),P=v.get("symbol-z-order");this.canOverlap=oS(v,"text-overlap","text-allow-overlap")!=="never"||oS(v,"icon-overlap","icon-allow-overlap")!=="never"||v.get("text-ignore-placement")||v.get("icon-ignore-placement"),this.sortFeaturesByKey=P!=="viewport-y"&&!S.isConstant(),this.sortFeaturesByY=(P==="viewport-y"||P==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,v.get("symbol-placement")==="point"&&(this.writingModes=v.get("text-writing-mode").map((D=>o.ah[D]))),this.stateDependentLayerIds=this.layers.filter((D=>D.isStateDependent())).map((D=>D.id)),this.sourceID=c.sourceID}createArrays(){this.text=new lS(new ga(this.layers,this.zoom,(c=>/^text/.test(c)))),this.icon=new lS(new ga(this.layers,this.zoom,(c=>/^icon/.test(c)))),this.glyphOffsetArray=new Vi,this.lineVertexArray=new to,this.symbolInstances=new Lr,this.textAnchorOffsets=new Br}calculateGlyphDependencies(c,m,v,S,P){for(let D=0;D<c.length;D++)if(m[c.charCodeAt(D)]=!0,(v||S)&&P){const R=gv[c.charAt(D)];R&&(m[R.charCodeAt(0)]=!0)}}populate(c,m,v){const S=this.layers[0],P=S.layout,D=P.get("text-font"),R=P.get("text-field"),N=P.get("icon-image"),V=(R.value.kind!=="constant"||R.value.value instanceof rr&&!R.value.value.isEmpty()||R.value.value.toString().length>0)&&(D.value.kind!=="constant"||D.value.value.length>0),W=N.value.kind!=="constant"||!!N.value.value||Object.keys(N.parameters).length>0,Y=P.get("symbol-sort-key");if(this.features=[],!V&&!W)return;const ee=m.iconDependencies,re=m.glyphDependencies,he=m.availableImages,ue=new gs(this.zoom);for(const{feature:Ae,id:Te,index:nt,sourceLayerIndex:Ve}of c){const qe=S._featureFilter.needGeometry,pt=Fl(Ae,qe);if(!S._featureFilter.filter(ue,pt,v))continue;let Dt,ln;if(qe||(pt.geometry=Jo(Ae)),V){const un=S.getValueAndResolveTokens("text-field",pt,v,he),en=rr.factory(un),Pn=this.hasRTLText=this.hasRTLText||g8(en);(!Pn||ul.getRTLTextPluginStatus()==="unavailable"||Pn&&ul.isParsed())&&(Dt=KI(en,S,pt))}if(W){const un=S.getValueAndResolveTokens("icon-image",pt,v,he);ln=un instanceof Ci?un:Ci.fromString(un)}if(!Dt&&!ln)continue;const zn=this.sortFeaturesByKey?Y.evaluate(pt,{},v):void 0;if(this.features.push({id:Te,text:Dt,icon:ln,index:nt,sourceLayerIndex:Ve,geometry:pt.geometry,properties:Ae.properties,type:p8[Ae.type],sortKey:zn}),ln&&(ee[ln.name]=!0),Dt){const un=D.evaluate(pt,{},v).join(","),en=P.get("text-rotation-alignment")!=="viewport"&&P.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(o.ah.vertical)>=0;for(const Pn of Dt.sections)if(Pn.image)ee[Pn.image.name]=!0;else{const vn=de(Dt.toString()),fn=Pn.fontStack||un,vt=re[fn]=re[fn]||{};this.calculateGlyphDependencies(Pn.text,vt,en,this.allowVerticalPlacement,vn)}}}P.get("symbol-placement")==="line"&&(this.features=(function(Ae){const Te={},nt={},Ve=[];let qe=0;function pt(un){Ve.push(Ae[un]),qe++}function Dt(un,en,Pn){const vn=nt[un];return delete nt[un],nt[en]=vn,Ve[vn].geometry[0].pop(),Ve[vn].geometry[0]=Ve[vn].geometry[0].concat(Pn[0]),vn}function ln(un,en,Pn){const vn=Te[en];return delete Te[en],Te[un]=vn,Ve[vn].geometry[0].shift(),Ve[vn].geometry[0]=Pn[0].concat(Ve[vn].geometry[0]),vn}function zn(un,en,Pn){const vn=Pn?en[0][en[0].length-1]:en[0][0];return`${un}:${vn.x}:${vn.y}`}for(let un=0;un<Ae.length;un++){const en=Ae[un],Pn=en.geometry,vn=en.text?en.text.toString():null;if(!vn){pt(un);continue}const fn=zn(vn,Pn),vt=zn(vn,Pn,!0);if(fn in nt&&vt in Te&&nt[fn]!==Te[vt]){const Mn=ln(fn,vt,Pn),En=Dt(fn,vt,Ve[Mn].geometry);delete Te[fn],delete nt[vt],nt[zn(vn,Ve[En].geometry,!0)]=En,Ve[Mn].geometry=null}else fn in nt?Dt(fn,vt,Pn):vt in Te?ln(fn,vt,Pn):(pt(un),Te[fn]=qe-1,nt[vt]=qe-1)}return Ve.filter((un=>un.geometry))})(this.features)),this.sortFeaturesByKey&&this.features.sort(((Ae,Te)=>Ae.sortKey-Te.sortKey))}update(c,m,v){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(c,m,this.layers,v),this.icon.programConfigurations.updatePaintArrays(c,m,this.layers,v))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(c){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(c),this.iconCollisionBox.upload(c)),this.text.upload(c,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(c,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(c,m){const v=this.lineVertexArray.length;if(c.segment!==void 0){let S=c.dist(m[c.segment+1]),P=c.dist(m[c.segment]);const D={};for(let R=c.segment+1;R<m.length;R++)D[R]={x:m[R].x,y:m[R].y,tileUnitDistanceFromAnchor:S},R<m.length-1&&(S+=m[R+1].dist(m[R]));for(let R=c.segment||0;R>=0;R--)D[R]={x:m[R].x,y:m[R].y,tileUnitDistanceFromAnchor:P},R>0&&(P+=m[R-1].dist(m[R]));for(let R=0;R<m.length;R++){const N=D[R];this.lineVertexArray.emplaceBack(N.x,N.y,N.tileUnitDistanceFromAnchor)}}return{lineStartIndex:v,lineLength:this.lineVertexArray.length-v}}addSymbols(c,m,v,S,P,D,R,N,V,W,Y,ee){const re=c.indexArray,he=c.layoutVertexArray,ue=c.segments.prepareSegment(4*m.length,he,re,this.canOverlap?D.sortKey:void 0),Ae=this.glyphOffsetArray.length,Te=ue.vertexLength,nt=this.allowVerticalPlacement&&R===o.ah.vertical?Math.PI/2:0,Ve=D.text&&D.text.sections;for(let qe=0;qe<m.length;qe++){const{tl:pt,tr:Dt,bl:ln,br:zn,tex:un,pixelOffsetTL:en,pixelOffsetBR:Pn,minFontScaleX:vn,minFontScaleY:fn,glyphOffset:vt,isSDF:Mn,sectionIndex:En}=m[qe],Jn=ue.vertexLength,Ki=vt[1];cx(he,N.x,N.y,pt.x,Ki+pt.y,un.x,un.y,v,Mn,en.x,en.y,vn,fn),cx(he,N.x,N.y,Dt.x,Ki+Dt.y,un.x+un.w,un.y,v,Mn,Pn.x,en.y,vn,fn),cx(he,N.x,N.y,ln.x,Ki+ln.y,un.x,un.y+un.h,v,Mn,en.x,Pn.y,vn,fn),cx(he,N.x,N.y,zn.x,Ki+zn.y,un.x+un.w,un.y+un.h,v,Mn,Pn.x,Pn.y,vn,fn),aS(c.dynamicLayoutVertexArray,N,nt),re.emplaceBack(Jn,Jn+1,Jn+2),re.emplaceBack(Jn+1,Jn+2,Jn+3),ue.vertexLength+=4,ue.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(vt[0]),qe!==m.length-1&&En===m[qe+1].sectionIndex||c.programConfigurations.populatePaintArrays(he.length,D,D.index,{},ee,Ve&&Ve[En])}c.placedSymbolArray.emplaceBack(N.x,N.y,Ae,this.glyphOffsetArray.length-Ae,Te,V,W,N.segment,v?v[0]:0,v?v[1]:0,S[0],S[1],R,0,!1,0,Y)}_addCollisionDebugVertex(c,m,v,S,P,D){return m.emplaceBack(0,0),c.emplaceBack(v.x,v.y,S,P,Math.round(D.x),Math.round(D.y))}addCollisionDebugVertices(c,m,v,S,P,D,R){const N=P.segments.prepareSegment(4,P.layoutVertexArray,P.indexArray),V=N.vertexLength,W=P.layoutVertexArray,Y=P.collisionVertexArray,ee=R.anchorX,re=R.anchorY;this._addCollisionDebugVertex(W,Y,D,ee,re,new p(c,m)),this._addCollisionDebugVertex(W,Y,D,ee,re,new p(v,m)),this._addCollisionDebugVertex(W,Y,D,ee,re,new p(v,S)),this._addCollisionDebugVertex(W,Y,D,ee,re,new p(c,S)),N.vertexLength+=4;const he=P.indexArray;he.emplaceBack(V,V+1),he.emplaceBack(V+1,V+2),he.emplaceBack(V+2,V+3),he.emplaceBack(V+3,V),N.primitiveLength+=4}addDebugCollisionBoxes(c,m,v,S){for(let P=c;P<m;P++){const D=this.collisionBoxArray.get(P);this.addCollisionDebugVertices(D.x1,D.y1,D.x2,D.y2,S?this.textCollisionBox:this.iconCollisionBox,D.anchorPoint,v)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new uS(Ml,JO.members,Ko),this.iconCollisionBox=new uS(Ml,JO.members,Ko);for(let c=0;c<this.symbolInstances.length;c++){const m=this.symbolInstances.get(c);this.addDebugCollisionBoxes(m.textBoxStartIndex,m.textBoxEndIndex,m,!0),this.addDebugCollisionBoxes(m.verticalTextBoxStartIndex,m.verticalTextBoxEndIndex,m,!0),this.addDebugCollisionBoxes(m.iconBoxStartIndex,m.iconBoxEndIndex,m,!1),this.addDebugCollisionBoxes(m.verticalIconBoxStartIndex,m.verticalIconBoxEndIndex,m,!1)}}_deserializeCollisionBoxesForSymbol(c,m,v,S,P,D,R,N,V){const W={};for(let Y=m;Y<v;Y++){const ee=c.get(Y);W.textBox={x1:ee.x1,y1:ee.y1,x2:ee.x2,y2:ee.y2,anchorPointX:ee.anchorPointX,anchorPointY:ee.anchorPointY},W.textFeatureIndex=ee.featureIndex;break}for(let Y=S;Y<P;Y++){const ee=c.get(Y);W.verticalTextBox={x1:ee.x1,y1:ee.y1,x2:ee.x2,y2:ee.y2,anchorPointX:ee.anchorPointX,anchorPointY:ee.anchorPointY},W.verticalTextFeatureIndex=ee.featureIndex;break}for(let Y=D;Y<R;Y++){const ee=c.get(Y);W.iconBox={x1:ee.x1,y1:ee.y1,x2:ee.x2,y2:ee.y2,anchorPointX:ee.anchorPointX,anchorPointY:ee.anchorPointY},W.iconFeatureIndex=ee.featureIndex;break}for(let Y=N;Y<V;Y++){const ee=c.get(Y);W.verticalIconBox={x1:ee.x1,y1:ee.y1,x2:ee.x2,y2:ee.y2,anchorPointX:ee.anchorPointX,anchorPointY:ee.anchorPointY},W.verticalIconFeatureIndex=ee.featureIndex;break}return W}deserializeCollisionBoxes(c){this.collisionArrays=[];for(let m=0;m<this.symbolInstances.length;m++){const v=this.symbolInstances.get(m);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(c,v.textBoxStartIndex,v.textBoxEndIndex,v.verticalTextBoxStartIndex,v.verticalTextBoxEndIndex,v.iconBoxStartIndex,v.iconBoxEndIndex,v.verticalIconBoxStartIndex,v.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(c,m){const v=c.placedSymbolArray.get(m),S=v.vertexStartIndex+4*v.numGlyphs;for(let P=v.vertexStartIndex;P<S;P+=4)c.indexArray.emplaceBack(P,P+1,P+2),c.indexArray.emplaceBack(P+1,P+2,P+3)}getSortedSymbolIndexes(c){if(this.sortedAngle===c&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const m=Math.sin(c),v=Math.cos(c),S=[],P=[],D=[];for(let R=0;R<this.symbolInstances.length;++R){D.push(R);const N=this.symbolInstances.get(R);S.push(0|Math.round(m*N.anchorX+v*N.anchorY)),P.push(N.featureIndex)}return D.sort(((R,N)=>S[R]-S[N]||P[N]-P[R])),D}addToSortKeyRanges(c,m){const v=this.sortKeyRanges[this.sortKeyRanges.length-1];v&&v.sortKey===m?v.symbolInstanceEnd=c+1:this.sortKeyRanges.push({sortKey:m,symbolInstanceStart:c,symbolInstanceEnd:c+1})}sortFeatures(c){if(this.sortFeaturesByY&&this.sortedAngle!==c&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(c),this.sortedAngle=c,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const m of this.symbolInstanceIndexes){const v=this.symbolInstances.get(m);this.featureSortOrder.push(v.featureIndex),[v.rightJustifiedTextSymbolIndex,v.centerJustifiedTextSymbolIndex,v.leftJustifiedTextSymbolIndex].forEach(((S,P,D)=>{S>=0&&D.indexOf(S)===P&&this.addIndicesForPlacedSymbol(this.text,S)})),v.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,v.verticalPlacedTextSymbolIndex),v.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,v.placedIconSymbolIndex),v.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,v.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}let aE,cS;dn("SymbolBucket",fy,{omit:["layers","collisionBoxArray","features","compareText"]}),fy.MAX_GLYPHS=65535,fy.addDynamicAttributes=aS;var hx={get paint(){return cS=cS||new E({"icon-opacity":new Qn(Ze.paint_symbol["icon-opacity"]),"icon-color":new Qn(Ze.paint_symbol["icon-color"]),"icon-halo-color":new Qn(Ze.paint_symbol["icon-halo-color"]),"icon-halo-width":new Qn(Ze.paint_symbol["icon-halo-width"]),"icon-halo-blur":new Qn(Ze.paint_symbol["icon-halo-blur"]),"icon-translate":new Sn(Ze.paint_symbol["icon-translate"]),"icon-translate-anchor":new Sn(Ze.paint_symbol["icon-translate-anchor"]),"text-opacity":new Qn(Ze.paint_symbol["text-opacity"]),"text-color":new Qn(Ze.paint_symbol["text-color"],{runtimeType:Xr,getOverride:d=>d.textColor,hasOverride:d=>!!d.textColor}),"text-halo-color":new Qn(Ze.paint_symbol["text-halo-color"]),"text-halo-width":new Qn(Ze.paint_symbol["text-halo-width"]),"text-halo-blur":new Qn(Ze.paint_symbol["text-halo-blur"]),"text-translate":new Sn(Ze.paint_symbol["text-translate"]),"text-translate-anchor":new Sn(Ze.paint_symbol["text-translate-anchor"])})},get layout(){return aE=aE||new E({"symbol-placement":new Sn(Ze.layout_symbol["symbol-placement"]),"symbol-spacing":new Sn(Ze.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new Sn(Ze.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new Qn(Ze.layout_symbol["symbol-sort-key"]),"symbol-z-order":new Sn(Ze.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new Sn(Ze.layout_symbol["icon-allow-overlap"]),"icon-overlap":new Sn(Ze.layout_symbol["icon-overlap"]),"icon-ignore-placement":new Sn(Ze.layout_symbol["icon-ignore-placement"]),"icon-optional":new Sn(Ze.layout_symbol["icon-optional"]),"icon-rotation-alignment":new Sn(Ze.layout_symbol["icon-rotation-alignment"]),"icon-size":new Qn(Ze.layout_symbol["icon-size"]),"icon-text-fit":new Sn(Ze.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new Sn(Ze.layout_symbol["icon-text-fit-padding"]),"icon-image":new Qn(Ze.layout_symbol["icon-image"]),"icon-rotate":new Qn(Ze.layout_symbol["icon-rotate"]),"icon-padding":new Qn(Ze.layout_symbol["icon-padding"]),"icon-keep-upright":new Sn(Ze.layout_symbol["icon-keep-upright"]),"icon-offset":new Qn(Ze.layout_symbol["icon-offset"]),"icon-anchor":new Qn(Ze.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new Sn(Ze.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new Sn(Ze.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new Sn(Ze.layout_symbol["text-rotation-alignment"]),"text-field":new Qn(Ze.layout_symbol["text-field"]),"text-font":new Qn(Ze.layout_symbol["text-font"]),"text-size":new Qn(Ze.layout_symbol["text-size"]),"text-max-width":new Qn(Ze.layout_symbol["text-max-width"]),"text-line-height":new Sn(Ze.layout_symbol["text-line-height"]),"text-letter-spacing":new Qn(Ze.layout_symbol["text-letter-spacing"]),"text-justify":new Qn(Ze.layout_symbol["text-justify"]),"text-radial-offset":new Qn(Ze.layout_symbol["text-radial-offset"]),"text-variable-anchor":new Sn(Ze.layout_symbol["text-variable-anchor"]),"text-variable-anchor-offset":new Qn(Ze.layout_symbol["text-variable-anchor-offset"]),"text-anchor":new Qn(Ze.layout_symbol["text-anchor"]),"text-max-angle":new Sn(Ze.layout_symbol["text-max-angle"]),"text-writing-mode":new Sn(Ze.layout_symbol["text-writing-mode"]),"text-rotate":new Qn(Ze.layout_symbol["text-rotate"]),"text-padding":new Sn(Ze.layout_symbol["text-padding"]),"text-keep-upright":new Sn(Ze.layout_symbol["text-keep-upright"]),"text-transform":new Qn(Ze.layout_symbol["text-transform"]),"text-offset":new Qn(Ze.layout_symbol["text-offset"]),"text-allow-overlap":new Sn(Ze.layout_symbol["text-allow-overlap"]),"text-overlap":new Sn(Ze.layout_symbol["text-overlap"]),"text-ignore-placement":new Sn(Ze.layout_symbol["text-ignore-placement"]),"text-optional":new Sn(Ze.layout_symbol["text-optional"])})}};class lE{constructor(c){if(c.property.overrides===void 0)throw new Error("overrides must be provided to instantiate FormatSectionOverride class");this.type=c.property.overrides?c.property.overrides.runtimeType:Co,this.defaultValue=c}evaluate(c){if(c.formattedSection){const m=this.defaultValue.property.overrides;if(m&&m.hasOverride(c.formattedSection))return m.getOverride(c.formattedSection)}return c.feature&&c.featureState?this.defaultValue.evaluate(c.feature,c.featureState):this.defaultValue.property.specification.default}eachChild(c){this.defaultValue.isConstant()||c(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}dn("FormatSectionOverride",lE,{omit:["defaultValue"]});class fx extends y{constructor(c){super(c,hx)}recalculate(c,m){if(super.recalculate(c,m),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")==="map"?"map":"viewport"),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){const v=this.layout.get("text-writing-mode");if(v){const S=[];for(const P of v)S.indexOf(P)<0&&S.push(P);this.layout._values["text-writing-mode"]=S}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(c,m,v,S){const P=this.layout.get(c).evaluate(m,{},v,S),D=this._unevaluatedLayout._values[c];return D.isDataDriven()||xn(D.value)||!P?P:(function(R,N){return N.replace(/{([^{}]+)}/g,((V,W)=>R&&W in R?String(R[W]):""))})(m.properties,P)}createBucket(c){return new fy(c)}queryRadius(){return 0}queryIntersectsFeature(){throw new Error("Should take a different path in FeatureIndex")}_setPaintOverrides(){for(const c of hx.paint.overridableProperties){if(!fx.hasPaintOverride(this.layout,c))continue;const m=this.paint.get(c),v=new lE(m),S=new mt(v,m.property.specification);let P=null;P=m.value.kind==="constant"||m.value.kind==="source"?new ti("source",S):new $s("composite",S,m.value.zoomStops),this.paint._values[c]=new jo(m.property,P,m.parameters)}}_handleOverridablePaintPropertyUpdate(c,m,v){return!(!this.layout||m.isDataDriven()||v.isDataDriven())&&fx.hasPaintOverride(this.layout,c)}static hasPaintOverride(c,m){const v=c.get("text-field"),S=hx.paint.properties[m];let P=!1;const D=R=>{for(const N of R)if(S.overrides&&S.overrides.hasOverride(N))return void(P=!0)};if(v.value.kind==="constant"&&v.value.value instanceof rr)D(v.value.value.sections);else if(v.value.kind==="source"){const R=V=>{P||(V instanceof ks&&Rs(V.value)===Ri?D(V.value.sections):V instanceof B0?D(V.sections):V.eachChild(R))},N=v.value;N._styleExpression&&R(N._styleExpression.expression)}return P}}let uE;var y8={get paint(){return uE=uE||new E({"background-color":new Sn(Ze.paint_background["background-color"]),"background-pattern":new ey(Ze.paint_background["background-pattern"]),"background-opacity":new Sn(Ze.paint_background["background-opacity"])})}};class dx extends y{constructor(c){super(c,y8)}}let cE;var v8={get paint(){return cE=cE||new E({"raster-opacity":new Sn(Ze.paint_raster["raster-opacity"]),"raster-hue-rotate":new Sn(Ze.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new Sn(Ze.paint_raster["raster-brightness-min"]),"raster-brightness-max":new Sn(Ze.paint_raster["raster-brightness-max"]),"raster-saturation":new Sn(Ze.paint_raster["raster-saturation"]),"raster-contrast":new Sn(Ze.paint_raster["raster-contrast"]),"raster-resampling":new Sn(Ze.paint_raster["raster-resampling"]),"raster-fade-duration":new Sn(Ze.paint_raster["raster-fade-duration"])})}};class b8 extends y{constructor(c){super(c,v8)}}class _8 extends y{constructor(c){super(c,{}),this.onAdd=m=>{this.implementation.onAdd&&this.implementation.onAdd(m,m.painter.context.gl)},this.onRemove=m=>{this.implementation.onRemove&&this.implementation.onRemove(m,m.painter.context.gl)},this.implementation=c}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){throw new Error("Custom layers cannot be serialized")}}class x8{constructor(c){this._methodToThrottle=c,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._methodToThrottle()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout((()=>{this._triggered=!1,this._methodToThrottle()}),0))}remove(){delete this._channel,this._methodToThrottle=()=>{}}}const hS=63710088e-1;class gp{constructor(c,m){if(isNaN(c)||isNaN(m))throw new Error(`Invalid LngLat object: (${c}, ${m})`);if(this.lng=+c,this.lat=+m,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new gp(Z(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(c){const m=Math.PI/180,v=this.lat*m,S=c.lat*m,P=Math.sin(v)*Math.sin(S)+Math.cos(v)*Math.cos(S)*Math.cos((c.lng-this.lng)*m);return hS*Math.acos(Math.min(P,1))}static convert(c){if(c instanceof gp)return c;if(Array.isArray(c)&&(c.length===2||c.length===3))return new gp(Number(c[0]),Number(c[1]));if(!Array.isArray(c)&&typeof c=="object"&&c!==null)return new gp(Number("lng"in c?c.lng:c.lon),Number(c.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}const hE=2*Math.PI*hS;function fE(d){return hE*Math.cos(d*Math.PI/180)}function dE(d){return(180+d)/360}function pE(d){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+d*Math.PI/360)))/360}function xv(d,c){return d/fE(c)}function fS(d){return 360/Math.PI*Math.atan(Math.exp((180-360*d)*Math.PI/180))-90}class dy{constructor(c,m,v=0){this.x=+c,this.y=+m,this.z=+v}static fromLngLat(c,m=0){const v=gp.convert(c);return new dy(dE(v.lng),pE(v.lat),xv(m,v.lat))}toLngLat(){return new gp(360*this.x-180,fS(this.y))}toAltitude(){return this.z*fE(fS(this.y))}meterInMercatorCoordinateUnits(){return 1/hE*(c=fS(this.y),1/Math.cos(c*Math.PI/180));var c}}function dS(d,c,m){var v=2*Math.PI*6378137/256/Math.pow(2,m);return[d*v-2*Math.PI*6378137/2,c*v-2*Math.PI*6378137/2]}class wv{constructor(c,m,v){if(!(function(S,P,D){return!(S<0||S>25||D<0||D>=Math.pow(2,S)||P<0||P>=Math.pow(2,S))})(c,m,v))throw new Error(`x=${m}, y=${v}, z=${c} outside of bounds. 0<=x<${Math.pow(2,c)}, 0<=y<${Math.pow(2,c)} 0<=z<=25 `);this.z=c,this.x=m,this.y=v,this.key=py(0,c,c,m,v)}equals(c){return this.z===c.z&&this.x===c.x&&this.y===c.y}url(c,m,v){const S=(D=this.y,R=this.z,N=dS(256*(P=this.x),256*(D=Math.pow(2,R)-D-1),R),V=dS(256*(P+1),256*(D+1),R),N[0]+","+N[1]+","+V[0]+","+V[1]);var P,D,R,N,V;const W=(function(Y,ee,re){let he,ue="";for(let Ae=Y;Ae>0;Ae--)he=1<<Ae-1,ue+=(ee&he?1:0)+(re&he?2:0);return ue})(this.z,this.x,this.y);return c[(this.x+this.y)%c.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(v==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,m>1?"@2x":"").replace(/{quadkey}/g,W).replace(/{bbox-epsg-3857}/g,S)}isChildOf(c){const m=this.z-c.z;return m>0&&c.x===this.x>>m&&c.y===this.y>>m}getTilePoint(c){const m=Math.pow(2,this.z);return new p((c.x*m-this.x)*no,(c.y*m-this.y)*no)}toString(){return`${this.z}/${this.x}/${this.y}`}}class pS{constructor(c,m){this.wrap=c,this.canonical=m,this.key=py(c,m.z,m.z,m.x,m.y)}}class Bl{constructor(c,m,v,S,P){if(c<v)throw new Error(`overscaledZ should be >= z; overscaledZ = ${c}; z = ${v}`);this.overscaledZ=c,this.wrap=m,this.canonical=new wv(v,+S,+P),this.key=py(m,c,v,S,P)}clone(){return new Bl(this.overscaledZ,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)}equals(c){return this.overscaledZ===c.overscaledZ&&this.wrap===c.wrap&&this.canonical.equals(c.canonical)}scaledTo(c){if(c>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${c}; overscaledZ = ${this.overscaledZ}`);const m=this.canonical.z-c;return c>this.canonical.z?new Bl(c,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new Bl(c,this.wrap,c,this.canonical.x>>m,this.canonical.y>>m)}calculateScaledKey(c,m){if(c>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${c}; overscaledZ = ${this.overscaledZ}`);const v=this.canonical.z-c;return c>this.canonical.z?py(this.wrap*+m,c,this.canonical.z,this.canonical.x,this.canonical.y):py(this.wrap*+m,c,c,this.canonical.x>>v,this.canonical.y>>v)}isChildOf(c){if(c.wrap!==this.wrap)return!1;const m=this.canonical.z-c.canonical.z;return c.overscaledZ===0||c.overscaledZ<this.overscaledZ&&c.canonical.x===this.canonical.x>>m&&c.canonical.y===this.canonical.y>>m}children(c){if(this.overscaledZ>=c)return[new Bl(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const m=this.canonical.z+1,v=2*this.canonical.x,S=2*this.canonical.y;return[new Bl(m,this.wrap,m,v,S),new Bl(m,this.wrap,m,v+1,S),new Bl(m,this.wrap,m,v,S+1),new Bl(m,this.wrap,m,v+1,S+1)]}isLessThan(c){return this.wrap<c.wrap||!(this.wrap>c.wrap)&&(this.overscaledZ<c.overscaledZ||!(this.overscaledZ>c.overscaledZ)&&(this.canonical.x<c.canonical.x||!(this.canonical.x>c.canonical.x)&&this.canonical.y<c.canonical.y))}wrapped(){return new Bl(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(c){return new Bl(this.overscaledZ,c,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new pS(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(c){return this.canonical.getTilePoint(new dy(c.x-this.wrap,c.y))}}function py(d,c,m,v,S){(d*=2)<0&&(d=-1*d-1);const P=1<<m;return(P*P*d+P*S+v).toString(36)+m.toString(36)+c.toString(36)}dn("CanonicalTileID",wv),dn("OverscaledTileID",Bl,{omit:["posMatrix"]});class mS{constructor(c,m,v,S=1,P=1,D=1,R=0){if(this.uid=c,m.height!==m.width)throw new RangeError("DEM tiles must be square");if(v&&!["mapbox","terrarium","custom"].includes(v))return void se(`"${v}" is not a valid encoding type. Valid types include "mapbox", "terrarium" and "custom".`);this.stride=m.height;const N=this.dim=m.height-2;switch(this.data=new Uint32Array(m.data.buffer),v){case"terrarium":this.redFactor=256,this.greenFactor=1,this.blueFactor=1/256,this.baseShift=32768;break;case"custom":this.redFactor=S,this.greenFactor=P,this.blueFactor=D,this.baseShift=R;break;default:this.redFactor=6553.6,this.greenFactor=25.6,this.blueFactor=.1,this.baseShift=1e4}for(let V=0;V<N;V++)this.data[this._idx(-1,V)]=this.data[this._idx(0,V)],this.data[this._idx(N,V)]=this.data[this._idx(N-1,V)],this.data[this._idx(V,-1)]=this.data[this._idx(V,0)],this.data[this._idx(V,N)]=this.data[this._idx(V,N-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(N,-1)]=this.data[this._idx(N-1,0)],this.data[this._idx(-1,N)]=this.data[this._idx(0,N-1)],this.data[this._idx(N,N)]=this.data[this._idx(N-1,N-1)],this.min=Number.MAX_SAFE_INTEGER,this.max=Number.MIN_SAFE_INTEGER;for(let V=0;V<N;V++)for(let W=0;W<N;W++){const Y=this.get(V,W);Y>this.max&&(this.max=Y),Y<this.min&&(this.min=Y)}}get(c,m){const v=new Uint8Array(this.data.buffer),S=4*this._idx(c,m);return this.unpack(v[S],v[S+1],v[S+2])}getUnpackVector(){return[this.redFactor,this.greenFactor,this.blueFactor,this.baseShift]}_idx(c,m){if(c<-1||c>=this.dim+1||m<-1||m>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(m+1)*this.stride+(c+1)}unpack(c,m,v){return c*this.redFactor+m*this.greenFactor+v*this.blueFactor-this.baseShift}getPixels(){return new $l({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(c,m,v){if(this.dim!==c.dim)throw new Error("dem dimension mismatch");let S=m*this.dim,P=m*this.dim+this.dim,D=v*this.dim,R=v*this.dim+this.dim;switch(m){case-1:S=P-1;break;case 1:P=S+1}switch(v){case-1:D=R-1;break;case 1:R=D+1}const N=-m*this.dim,V=-v*this.dim;for(let W=D;W<R;W++)for(let Y=S;Y<P;Y++)this.data[this._idx(Y,W)]=c.data[this._idx(Y+N,W+V)]}}dn("DEMData",mS);class mE{constructor(c){this._stringToNumber={},this._numberToString=[];for(let m=0;m<c.length;m++){const v=c[m];this._stringToNumber[v]=m,this._numberToString[m]=v}}encode(c){return this._stringToNumber[c]}decode(c){if(c>=this._numberToString.length)throw new Error(`Out of bounds. Index requested n=${c} can't be >= this._numberToString.length ${this._numberToString.length}`);return this._numberToString[c]}}class gE{constructor(c,m,v,S,P){this.type="Feature",this._vectorTileFeature=c,c._z=m,c._x=v,c._y=S,this.properties=c.properties,this.id=P}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry}set geometry(c){this._geometry=c}toJSON(){const c={geometry:this.geometry};for(const m in this)m!=="_geometry"&&m!=="_vectorTileFeature"&&(c[m]=this[m]);return c}}class yE{constructor(c,m){this.tileID=c,this.x=c.canonical.x,this.y=c.canonical.y,this.z=c.canonical.z,this.grid=new jc(no,16,0),this.grid3D=new jc(no,16,0),this.featureIndexArray=new Pa,this.promoteId=m}insert(c,m,v,S,P,D){const R=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(v,S,P);const N=D?this.grid3D:this.grid;for(let V=0;V<m.length;V++){const W=m[V],Y=[1/0,1/0,-1/0,-1/0];for(let ee=0;ee<W.length;ee++){const re=W[ee];Y[0]=Math.min(Y[0],re.x),Y[1]=Math.min(Y[1],re.y),Y[2]=Math.max(Y[2],re.x),Y[3]=Math.max(Y[3],re.y)}Y[0]<no&&Y[1]<no&&Y[2]>=0&&Y[3]>=0&&N.insert(R,Y[0],Y[1],Y[2],Y[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=new _o.VectorTile(new nS(this.rawTileData)).layers,this.sourceLayerCoder=new mE(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers}query(c,m,v,S){this.loadVTLayers();const P=c.params||{},D=no/c.tileSize/c.scale,R=W1(P.filter),N=c.queryGeometry,V=c.queryPadding*D,W=Sv(N),Y=this.grid.query(W.minX-V,W.minY-V,W.maxX+V,W.maxY+V),ee=Sv(c.cameraQueryGeometry),re=this.grid3D.query(ee.minX-V,ee.minY-V,ee.maxX+V,ee.maxY+V,((Ae,Te,nt,Ve)=>(function(qe,pt,Dt,ln,zn){for(const en of qe)if(pt<=en.x&&Dt<=en.y&&ln>=en.x&&zn>=en.y)return!0;const un=[new p(pt,Dt),new p(pt,zn),new p(ln,zn),new p(ln,Dt)];if(qe.length>2){for(const en of un)if(Jm(qe,en))return!0}for(let en=0;en<qe.length-1;en++)if(_A(qe[en],qe[en+1],un))return!0;return!1})(c.cameraQueryGeometry,Ae-V,Te-V,nt+V,Ve+V)));for(const Ae of re)Y.push(Ae);Y.sort(w8);const he={};let ue;for(let Ae=0;Ae<Y.length;Ae++){const Te=Y[Ae];if(Te===ue)continue;ue=Te;const nt=this.featureIndexArray.get(Te);let Ve=null;this.loadMatchingFeature(he,nt.bucketIndex,nt.sourceLayerIndex,nt.featureIndex,R,P.layers,P.availableImages,m,v,S,((qe,pt,Dt)=>(Ve||(Ve=Jo(qe)),pt.queryIntersectsFeature(N,qe,Dt,Ve,this.z,c.transform,D,c.pixelPosMatrix))))}return he}loadMatchingFeature(c,m,v,S,P,D,R,N,V,W,Y){const ee=this.bucketLayerIDs[m];if(D&&!(function(Ae,Te){for(let nt=0;nt<Ae.length;nt++)if(Te.indexOf(Ae[nt])>=0)return!0;return!1})(D,ee))return;const re=this.sourceLayerCoder.decode(v),he=this.vtLayers[re].feature(S);if(P.needGeometry){const Ae=Fl(he,!0);if(!P.filter(new gs(this.tileID.overscaledZ),Ae,this.tileID.canonical))return}else if(!P.filter(new gs(this.tileID.overscaledZ),he))return;const ue=this.getId(he,re);for(let Ae=0;Ae<ee.length;Ae++){const Te=ee[Ae];if(D&&D.indexOf(Te)<0)continue;const nt=N[Te];if(!nt)continue;let Ve={};ue&&W&&(Ve=W.getState(nt.sourceLayer||"_geojsonTileLayer",ue));const qe=q({},V[Te]);qe.paint=Ov(qe.paint,nt.paint,he,Ve,R),qe.layout=Ov(qe.layout,nt.layout,he,Ve,R);const pt=!Y||Y(he,nt,Ve);if(!pt)continue;const Dt=new gE(he,this.z,this.x,this.y,ue);Dt.layer=qe;let ln=c[Te];ln===void 0&&(ln=c[Te]=[]),ln.push({featureIndex:S,feature:Dt,intersectionZ:pt})}}lookupSymbolFeatures(c,m,v,S,P,D,R,N){const V={};this.loadVTLayers();const W=W1(P);for(const Y of c)this.loadMatchingFeature(V,v,S,Y,W,D,R,N,m);return V}hasLayer(c){for(const m of this.bucketLayerIDs)for(const v of m)if(c===v)return!0;return!1}getId(c,m){let v=c.id;return this.promoteId&&(v=c.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[m]],typeof v=="boolean"&&(v=Number(v))),v}}function Ov(d,c,m,v,S){return oe(d,((P,D)=>{const R=c instanceof Ym?c.get(D):null;return R&&R.evaluate?R.evaluate(m,v,S):R}))}function Sv(d){let c=1/0,m=1/0,v=-1/0,S=-1/0;for(const P of d)c=Math.min(c,P.x),m=Math.min(m,P.y),v=Math.max(v,P.x),S=Math.max(S,P.y);return{minX:c,minY:m,maxX:v,maxY:S}}function w8(d,c){return c-d}function vE(d,c,m,v,S){const P=[];for(let D=0;D<d.length;D++){const R=d[D];let N;for(let V=0;V<R.length-1;V++){let W=R[V],Y=R[V+1];W.x<c&&Y.x<c||(W.x<c?W=new p(c,W.y+(c-W.x)/(Y.x-W.x)*(Y.y-W.y))._round():Y.x<c&&(Y=new p(c,W.y+(c-W.x)/(Y.x-W.x)*(Y.y-W.y))._round()),W.y<m&&Y.y<m||(W.y<m?W=new p(W.x+(m-W.y)/(Y.y-W.y)*(Y.x-W.x),m)._round():Y.y<m&&(Y=new p(W.x+(m-W.y)/(Y.y-W.y)*(Y.x-W.x),m)._round()),W.x>=v&&Y.x>=v||(W.x>=v?W=new p(v,W.y+(v-W.x)/(Y.x-W.x)*(Y.y-W.y))._round():Y.x>=v&&(Y=new p(v,W.y+(v-W.x)/(Y.x-W.x)*(Y.y-W.y))._round()),W.y>=S&&Y.y>=S||(W.y>=S?W=new p(W.x+(S-W.y)/(Y.y-W.y)*(Y.x-W.x),S)._round():Y.y>=S&&(Y=new p(W.x+(S-W.y)/(Y.y-W.y)*(Y.x-W.x),S)._round()),N&&W.equals(N[N.length-1])||(N=[W],P.push(N)),N.push(Y)))))}}return P}dn("FeatureIndex",yE,{omit:["rawTileData","sourceLayerCoder"]});class Uh extends p{constructor(c,m,v,S){super(c,m),this.angle=v,S!==void 0&&(this.segment=S)}clone(){return new Uh(this.x,this.y,this.angle,this.segment)}}function gS(d,c,m,v,S){if(c.segment===void 0||m===0)return!0;let P=c,D=c.segment+1,R=0;for(;R>-m/2;){if(D--,D<0)return!1;R-=d[D].dist(P),P=d[D]}R+=d[D].dist(d[D+1]),D++;const N=[];let V=0;for(;R<m/2;){const W=d[D],Y=d[D+1];if(!Y)return!1;let ee=d[D-1].angleTo(W)-W.angleTo(Y);for(ee=Math.abs((ee+3*Math.PI)%(2*Math.PI)-Math.PI),N.push({distance:R,angleDelta:ee}),V+=ee;R-N[0].distance>v;)V-=N.shift().angleDelta;if(V>S)return!1;D++,R+=W.dist(Y)}return!0}function bE(d){let c=0;for(let m=0;m<d.length-1;m++)c+=d[m].dist(d[m+1]);return c}function _E(d,c,m){return d?.6*c*m:0}function xE(d,c){return Math.max(d?d.right-d.left:0,c?c.right-c.left:0)}function O8(d,c,m,v,S,P){const D=_E(m,S,P),R=xE(m,v)*P;let N=0;const V=bE(d)/2;for(let W=0;W<d.length-1;W++){const Y=d[W],ee=d[W+1],re=Y.dist(ee);if(N+re>V){const he=(V-N)/re,ue=Ua.number(Y.x,ee.x,he),Ae=Ua.number(Y.y,ee.y,he),Te=new Uh(ue,Ae,ee.angleTo(Y),W);return Te._round(),!D||gS(d,Te,R,D,c)?Te:void 0}N+=re}}function S8(d,c,m,v,S,P,D,R,N){const V=_E(v,P,D),W=xE(v,S),Y=W*D,ee=d[0].x===0||d[0].x===N||d[0].y===0||d[0].y===N;return c-Y<c/4&&(c=Y+c/4),wE(d,ee?c/2*R%c:(W/2+2*P)*D*R%c,c,V,m,Y,ee,!1,N)}function wE(d,c,m,v,S,P,D,R,N){const V=P/2,W=bE(d);let Y=0,ee=c-m,re=[];for(let he=0;he<d.length-1;he++){const ue=d[he],Ae=d[he+1],Te=ue.dist(Ae),nt=Ae.angleTo(ue);for(;ee+m<Y+Te;){ee+=m;const Ve=(ee-Y)/Te,qe=Ua.number(ue.x,Ae.x,Ve),pt=Ua.number(ue.y,Ae.y,Ve);if(qe>=0&&qe<N&&pt>=0&&pt<N&&ee-V>=0&&ee+V<=W){const Dt=new Uh(qe,pt,nt,he);Dt._round(),v&&!gS(d,Dt,P,v,S)||re.push(Dt)}}Y+=Te}return R||re.length||D||(re=wE(d,Y/2,m,v,S,P,D,!0,N)),re}dn("Anchor",Uh);const my=fl;function OE(d,c,m,v){const S=[],P=d.image,D=P.pixelRatio,R=P.paddedRect.w-2*my,N=P.paddedRect.h-2*my;let V={x1:d.left,y1:d.top,x2:d.right,y2:d.bottom};const W=P.stretchX||[[0,R]],Y=P.stretchY||[[0,N]],ee=(vt,Mn)=>vt+Mn[1]-Mn[0],re=W.reduce(ee,0),he=Y.reduce(ee,0),ue=R-re,Ae=N-he;let Te=0,nt=re,Ve=0,qe=he,pt=0,Dt=ue,ln=0,zn=Ae;if(P.content&&v){const vt=P.content,Mn=vt[2]-vt[0],En=vt[3]-vt[1];(P.textFitWidth||P.textFitHeight)&&(V=iE(d)),Te=px(W,0,vt[0]),Ve=px(Y,0,vt[1]),nt=px(W,vt[0],vt[2]),qe=px(Y,vt[1],vt[3]),pt=vt[0]-Te,ln=vt[1]-Ve,Dt=Mn-nt,zn=En-qe}const un=V.x1,en=V.y1,Pn=V.x2-un,vn=V.y2-en,fn=(vt,Mn,En,Jn)=>{const Ki=mx(vt.stretch-Te,nt,Pn,un),Zi=gx(vt.fixed-pt,Dt,vt.stretch,re),Uo=mx(Mn.stretch-Ve,qe,vn,en),zl=gx(Mn.fixed-ln,zn,Mn.stretch,he),ba=mx(En.stretch-Te,nt,Pn,un),wo=gx(En.fixed-pt,Dt,En.stretch,re),Xa=mx(Jn.stretch-Ve,qe,vn,en),Wa=gx(Jn.fixed-ln,zn,Jn.stretch,he),Ga=new p(Ki,Uo),Vr=new p(ba,Uo),Ti=new p(ba,Xa),Ia=new p(Ki,Xa),_a=new p(Zi/D,zl/D),Ya=new p(wo/D,Wa/D),ea=c*Math.PI/180;if(ea){const di=Math.sin(ea),Ji=Math.cos(ea),ys=[Ji,-di,di,Ji];Ga._matMult(ys),Vr._matMult(ys),Ia._matMult(ys),Ti._matMult(ys)}const yu=vt.stretch+vt.fixed,dl=Mn.stretch+Mn.fixed;return{tl:Ga,tr:Vr,bl:Ia,br:Ti,tex:{x:P.paddedRect.x+my+yu,y:P.paddedRect.y+my+dl,w:En.stretch+En.fixed-yu,h:Jn.stretch+Jn.fixed-dl},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:_a,pixelOffsetBR:Ya,minFontScaleX:Dt/D/Pn,minFontScaleY:zn/D/vn,isSDF:m}};if(v&&(P.stretchX||P.stretchY)){const vt=SE(W,ue,re),Mn=SE(Y,Ae,he);for(let En=0;En<vt.length-1;En++){const Jn=vt[En],Ki=vt[En+1];for(let Zi=0;Zi<Mn.length-1;Zi++)S.push(fn(Jn,Mn[Zi],Ki,Mn[Zi+1]))}}else S.push(fn({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:R+1},{fixed:0,stretch:N+1}));return S}function px(d,c,m){let v=0;for(const S of d)v+=Math.max(c,Math.min(m,S[1]))-Math.max(c,Math.min(m,S[0]));return v}function SE(d,c,m){const v=[{fixed:-my,stretch:0}];for(const[S,P]of d){const D=v[v.length-1];v.push({fixed:S-D.stretch,stretch:D.stretch}),v.push({fixed:S-D.stretch,stretch:D.stretch+(P-S)})}return v.push({fixed:c+my,stretch:m}),v}function mx(d,c,m,v){return d/c*m+v}function gx(d,c,m,v){return d-c*m/v}class Nl{constructor(c,m,v,S,P,D,R,N,V,W){var Y;if(this.boxStartIndex=c.length,V){let ee=D.top,re=D.bottom;const he=D.collisionPadding;he&&(ee-=he[1],re+=he[3]);let ue=re-ee;ue>0&&(ue=Math.max(10,ue),this.circleDiameter=ue)}else{const ee=!((Y=D.image)===null||Y===void 0)&&Y.content&&(D.image.textFitWidth||D.image.textFitHeight)?iE(D):{x1:D.left,y1:D.top,x2:D.right,y2:D.bottom};ee.y1=ee.y1*R-N[0],ee.y2=ee.y2*R+N[2],ee.x1=ee.x1*R-N[3],ee.x2=ee.x2*R+N[1];const re=D.collisionPadding;if(re&&(ee.x1-=re[0]*R,ee.y1-=re[1]*R,ee.x2+=re[2]*R,ee.y2+=re[3]*R),W){const he=new p(ee.x1,ee.y1),ue=new p(ee.x2,ee.y1),Ae=new p(ee.x1,ee.y2),Te=new p(ee.x2,ee.y2),nt=W*Math.PI/180;he._rotate(nt),ue._rotate(nt),Ae._rotate(nt),Te._rotate(nt),ee.x1=Math.min(he.x,ue.x,Ae.x,Te.x),ee.x2=Math.max(he.x,ue.x,Ae.x,Te.x),ee.y1=Math.min(he.y,ue.y,Ae.y,Te.y),ee.y2=Math.max(he.y,ue.y,Ae.y,Te.y)}c.emplaceBack(m.x,m.y,ee.x1,ee.y1,ee.x2,ee.y2,v,S,P)}this.boxEndIndex=c.length}}class k8{constructor(c=[],m=((v,S)=>v<S?-1:v>S?1:0)){if(this.data=c,this.length=this.data.length,this.compare=m,this.length>0)for(let v=(this.length>>1)-1;v>=0;v--)this._down(v)}push(c){this.data.push(c),this._up(this.length++)}pop(){if(this.length===0)return;const c=this.data[0],m=this.data.pop();return--this.length>0&&(this.data[0]=m,this._down(0)),c}peek(){return this.data[0]}_up(c){const{data:m,compare:v}=this,S=m[c];for(;c>0;){const P=c-1>>1,D=m[P];if(v(S,D)>=0)break;m[c]=D,c=P}m[c]=S}_down(c){const{data:m,compare:v}=this,S=this.length>>1,P=m[c];for(;c<S;){let D=1+(c<<1);const R=D+1;if(R<this.length&&v(m[R],m[D])<0&&(D=R),v(m[D],P)>=0)break;m[c]=m[D],c=D}m[c]=P}}function C8(d,c=1,m=!1){let v=1/0,S=1/0,P=-1/0,D=-1/0;const R=d[0];for(let re=0;re<R.length;re++){const he=R[re];(!re||he.x<v)&&(v=he.x),(!re||he.y<S)&&(S=he.y),(!re||he.x>P)&&(P=he.x),(!re||he.y>D)&&(D=he.y)}const N=Math.min(P-v,D-S);let V=N/2;const W=new k8([],hg);if(N===0)return new p(v,S);for(let re=v;re<P;re+=N)for(let he=S;he<D;he+=N)W.push(new yr(re+V,he+V,V,d));let Y=(function(re){let he=0,ue=0,Ae=0;const Te=re[0];for(let nt=0,Ve=Te.length,qe=Ve-1;nt<Ve;qe=nt++){const pt=Te[nt],Dt=Te[qe],ln=pt.x*Dt.y-Dt.x*pt.y;ue+=(pt.x+Dt.x)*ln,Ae+=(pt.y+Dt.y)*ln,he+=3*ln}return new yr(ue/he,Ae/he,0,re)})(d),ee=W.length;for(;W.length;){const re=W.pop();(re.d>Y.d||!Y.d)&&(Y=re,m&&console.log("found best %d after %d probes",Math.round(1e4*re.d)/1e4,ee)),re.max-Y.d<=c||(V=re.h/2,W.push(new yr(re.p.x-V,re.p.y-V,V,d)),W.push(new yr(re.p.x+V,re.p.y-V,V,d)),W.push(new yr(re.p.x-V,re.p.y+V,V,d)),W.push(new yr(re.p.x+V,re.p.y+V,V,d)),ee+=4)}return m&&(console.log(`num probes: ${ee}`),console.log(`best distance: ${Y.d}`)),Y.p}function hg(d,c){return c.max-d.max}function yr(d,c,m,v){this.p=new p(d,c),this.h=m,this.d=(function(S,P){let D=!1,R=1/0;for(let N=0;N<P.length;N++){const V=P[N];for(let W=0,Y=V.length,ee=Y-1;W<Y;ee=W++){const re=V[W],he=V[ee];re.y>S.y!=he.y>S.y&&S.x<(he.x-re.x)*(S.y-re.y)/(he.y-re.y)+re.x&&(D=!D),R=Math.min(R,bA(S,re,he))}}return(D?1:-1)*Math.sqrt(R)})(this.p,v),this.max=this.d+this.h*Math.SQRT2}var va;o.aq=void 0,(va=o.aq||(o.aq={}))[va.center=1]="center",va[va.left=2]="left",va[va.right=3]="right",va[va.top=4]="top",va[va.bottom=5]="bottom",va[va["top-left"]=6]="top-left",va[va["top-right"]=7]="top-right",va[va["bottom-left"]=8]="bottom-left",va[va["bottom-right"]=9]="bottom-right";const Eo=7,co=Number.POSITIVE_INFINITY;function kE(d,c){return c[1]!==co?(function(m,v,S){let P=0,D=0;switch(v=Math.abs(v),S=Math.abs(S),m){case"top-right":case"top-left":case"top":D=S-Eo;break;case"bottom-right":case"bottom-left":case"bottom":D=-S+Eo}switch(m){case"top-right":case"bottom-right":case"right":P=-v;break;case"top-left":case"bottom-left":case"left":P=v}return[P,D]})(d,c[0],c[1]):(function(m,v){let S=0,P=0;v<0&&(v=0);const D=v/Math.SQRT2;switch(m){case"top-right":case"top-left":P=D-Eo;break;case"bottom-right":case"bottom-left":P=-D+Eo;break;case"bottom":P=-v+Eo;break;case"top":P=v-Eo}switch(m){case"top-right":case"bottom-right":S=-D;break;case"top-left":case"bottom-left":S=D;break;case"left":S=v;break;case"right":S=-v}return[S,P]})(d,c[0])}function nd(d,c,m){var v;const S=d.layout,P=(v=S.get("text-variable-anchor-offset"))===null||v===void 0?void 0:v.evaluate(c,{},m);if(P){const R=P.values,N=[];for(let V=0;V<R.length;V+=2){const W=N[V]=R[V],Y=R[V+1].map((ee=>ee*xo));W.startsWith("top")?Y[1]-=Eo:W.startsWith("bottom")&&(Y[1]+=Eo),N[V+1]=Y}return new Mr(N)}const D=S.get("text-variable-anchor");if(D){let R;R=d._unevaluatedLayout.getValue("text-radial-offset")!==void 0?[S.get("text-radial-offset").evaluate(c,{},m)*xo,co]:S.get("text-offset").evaluate(c,{},m).map((V=>V*xo));const N=[];for(const V of D)N.push(V,kE(V,R));return new Mr(N)}return null}function yS(d){switch(d){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function A8(d,c,m,v,S,P,D,R,N,V,W){let Y=P.textMaxSize.evaluate(c,{});Y===void 0&&(Y=D);const ee=d.layers[0].layout,re=ee.get("icon-offset").evaluate(c,{},W),he=AE(m.horizontal),ue=D/24,Ae=d.tilePixelRatio*ue,Te=d.tilePixelRatio*Y/24,nt=d.tilePixelRatio*R,Ve=d.tilePixelRatio*ee.get("symbol-spacing"),qe=ee.get("text-padding")*d.tilePixelRatio,pt=(function(vt,Mn,En,Jn=1){const Ki=vt.get("icon-padding").evaluate(Mn,{},En),Zi=Ki&&Ki.values;return[Zi[0]*Jn,Zi[1]*Jn,Zi[2]*Jn,Zi[3]*Jn]})(ee,c,W,d.tilePixelRatio),Dt=ee.get("text-max-angle")/180*Math.PI,ln=ee.get("text-rotation-alignment")!=="viewport"&&ee.get("symbol-placement")!=="point",zn=ee.get("icon-rotation-alignment")==="map"&&ee.get("symbol-placement")!=="point",un=ee.get("symbol-placement"),en=Ve/2,Pn=ee.get("icon-text-fit");let vn;v&&Pn!=="none"&&(d.allowVerticalPlacement&&m.vertical&&(vn=sE(v,m.vertical,Pn,ee.get("icon-text-fit-padding"),re,ue)),he&&(v=sE(v,he,Pn,ee.get("icon-text-fit-padding"),re,ue)));const fn=(vt,Mn)=>{Mn.x<0||Mn.x>=no||Mn.y<0||Mn.y>=no||(function(En,Jn,Ki,Zi,Uo,zl,ba,wo,Xa,Wa,Ga,Vr,Ti,Ia,_a,Ya,ea,yu,dl,di,Ji,ys,Ql,Zs,fg){const Xc=En.addToLineVertexArray(Jn,Ki);let Vh,Yu,vu,ta,jl=0,Cv=0,EE=0,TE=0,OS=-1,SS=-1;const qh={};let kS=Hm("");if(En.allowVerticalPlacement&&Zi.vertical){const Ma=wo.layout.get("text-rotate").evaluate(Ji,{},Zs)+90;vu=new Nl(Xa,Jn,Wa,Ga,Vr,Zi.vertical,Ti,Ia,_a,Ma),ba&&(ta=new Nl(Xa,Jn,Wa,Ga,Vr,ba,ea,yu,_a,Ma))}if(Uo){const Ma=wo.layout.get("icon-rotate").evaluate(Ji,{}),Hu=wo.layout.get("icon-text-fit")!=="none",dg=OE(Uo,Ma,Ql,Hu),Zh=ba?OE(ba,Ma,Ql,Hu):void 0;Yu=new Nl(Xa,Jn,Wa,Ga,Vr,Uo,ea,yu,!1,Ma),jl=4*dg.length;const pg=En.iconSizeData;let Xh=null;pg.kind==="source"?(Xh=[jh*wo.layout.get("icon-size").evaluate(Ji,{})],Xh[0]>mp&&se(`${En.layerIds[0]}: Value for "icon-size" is >= ${_v}. Reduce your "icon-size".`)):pg.kind==="composite"&&(Xh=[jh*ys.compositeIconSizes[0].evaluate(Ji,{},Zs),jh*ys.compositeIconSizes[1].evaluate(Ji,{},Zs)],(Xh[0]>mp||Xh[1]>mp)&&se(`${En.layerIds[0]}: Value for "icon-size" is >= ${_v}. Reduce your "icon-size".`)),En.addSymbols(En.icon,dg,Xh,di,dl,Ji,o.ah.none,Jn,Xc.lineStartIndex,Xc.lineLength,-1,Zs),OS=En.icon.placedSymbolArray.length-1,Zh&&(Cv=4*Zh.length,En.addSymbols(En.icon,Zh,Xh,di,dl,Ji,o.ah.vertical,Jn,Xc.lineStartIndex,Xc.lineLength,-1,Zs),SS=En.icon.placedSymbolArray.length-1)}const PE=Object.keys(Zi.horizontal);for(const Ma of PE){const Hu=Zi.horizontal[Ma];if(!Vh){kS=Hm(Hu.text);const Zh=wo.layout.get("text-rotate").evaluate(Ji,{},Zs);Vh=new Nl(Xa,Jn,Wa,Ga,Vr,Hu,Ti,Ia,_a,Zh)}const dg=Hu.positionedLines.length===1;if(EE+=CE(En,Jn,Hu,zl,wo,_a,Ji,Ya,Xc,Zi.vertical?o.ah.horizontal:o.ah.horizontalOnly,dg?PE:[Ma],qh,OS,ys,Zs),dg)break}Zi.vertical&&(TE+=CE(En,Jn,Zi.vertical,zl,wo,_a,Ji,Ya,Xc,o.ah.vertical,["vertical"],qh,SS,ys,Zs));const P8=Vh?Vh.boxStartIndex:En.collisionBoxArray.length,D8=Vh?Vh.boxEndIndex:En.collisionBoxArray.length,I8=vu?vu.boxStartIndex:En.collisionBoxArray.length,M8=vu?vu.boxEndIndex:En.collisionBoxArray.length,R8=Yu?Yu.boxStartIndex:En.collisionBoxArray.length,F8=Yu?Yu.boxEndIndex:En.collisionBoxArray.length,L8=ta?ta.boxStartIndex:En.collisionBoxArray.length,$8=ta?ta.boxEndIndex:En.collisionBoxArray.length;let Wc=-1;const _x=(Ma,Hu)=>Ma&&Ma.circleDiameter?Math.max(Ma.circleDiameter,Hu):Hu;Wc=_x(Vh,Wc),Wc=_x(vu,Wc),Wc=_x(Yu,Wc),Wc=_x(ta,Wc);const DE=Wc>-1?1:0;DE&&(Wc*=fg/xo),En.glyphOffsetArray.length>=fy.MAX_GLYPHS&&se("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),Ji.sortKey!==void 0&&En.addToSortKeyRanges(En.symbolInstances.length,Ji.sortKey);const B8=nd(wo,Ji,Zs),[N8,z8]=(function(Ma,Hu){const dg=Ma.length,Zh=Hu?.values;if(Zh?.length>0)for(let pg=0;pg<Zh.length;pg+=2){const Xh=Zh[pg+1];Ma.emplaceBack(o.aq[Zh[pg]],Xh[0],Xh[1])}return[dg,Ma.length]})(En.textAnchorOffsets,B8);En.symbolInstances.emplaceBack(Jn.x,Jn.y,qh.right>=0?qh.right:-1,qh.center>=0?qh.center:-1,qh.left>=0?qh.left:-1,qh.vertical||-1,OS,SS,kS,P8,D8,I8,M8,R8,F8,L8,$8,Wa,EE,TE,jl,Cv,DE,0,Ti,Wc,N8,z8)})(d,Mn,vt,m,v,S,vn,d.layers[0],d.collisionBoxArray,c.index,c.sourceLayerIndex,d.index,Ae,[qe,qe,qe,qe],ln,N,nt,pt,zn,re,c,P,V,W,D)};if(un==="line")for(const vt of vE(c.geometry,0,0,no,no)){const Mn=S8(vt,Ve,Dt,m.vertical||he,v,24,Te,d.overscaling,no);for(const En of Mn)he&&E8(d,he.text,en,En)||fn(vt,En)}else if(un==="line-center"){for(const vt of c.geometry)if(vt.length>1){const Mn=O8(vt,Dt,m.vertical||he,v,24,Te);Mn&&fn(vt,Mn)}}else if(c.type==="Polygon")for(const vt of ss(c.geometry,0)){const Mn=C8(vt,16);fn(vt[0],new Uh(Mn.x,Mn.y,0))}else if(c.type==="LineString")for(const vt of c.geometry)fn(vt,new Uh(vt[0].x,vt[0].y,0));else if(c.type==="Point")for(const vt of c.geometry)for(const Mn of vt)fn([Mn],new Uh(Mn.x,Mn.y,0))}function CE(d,c,m,v,S,P,D,R,N,V,W,Y,ee,re,he){const ue=(function(nt,Ve,qe,pt,Dt,ln,zn,un){const en=pt.layout.get("text-rotate").evaluate(ln,{})*Math.PI/180,Pn=[];for(const vn of Ve.positionedLines)for(const fn of vn.positionedGlyphs){if(!fn.rect)continue;const vt=fn.rect||{};let Mn=HA+1,En=!0,Jn=1,Ki=0;const Zi=(Dt||un)&&fn.vertical,Uo=fn.metrics.advance*fn.scale/2;if(un&&Ve.verticalizable&&(Ki=vn.lineOffset/2-(fn.imageName?-(xo-fn.metrics.width*fn.scale)/2:(fn.scale-1)*xo)),fn.imageName){const di=zn[fn.imageName];En=di.sdf,Jn=di.pixelRatio,Mn=fl/Jn}const zl=Dt?[fn.x+Uo,fn.y]:[0,0];let ba=Dt?[0,0]:[fn.x+Uo+qe[0],fn.y+qe[1]-Ki],wo=[0,0];Zi&&(wo=ba,ba=[0,0]);const Xa=fn.metrics.isDoubleResolution?2:1,Wa=(fn.metrics.left-Mn)*fn.scale-Uo+ba[0],Ga=(-fn.metrics.top-Mn)*fn.scale+ba[1],Vr=Wa+vt.w/Xa*fn.scale/Jn,Ti=Ga+vt.h/Xa*fn.scale/Jn,Ia=new p(Wa,Ga),_a=new p(Vr,Ga),Ya=new p(Wa,Ti),ea=new p(Vr,Ti);if(Zi){const di=new p(-Uo,Uo-yv),Ji=-Math.PI/2,ys=xo/2-Uo,Ql=new p(5-yv-ys,-(fn.imageName?ys:0)),Zs=new p(...wo);Ia._rotateAround(Ji,di)._add(Ql)._add(Zs),_a._rotateAround(Ji,di)._add(Ql)._add(Zs),Ya._rotateAround(Ji,di)._add(Ql)._add(Zs),ea._rotateAround(Ji,di)._add(Ql)._add(Zs)}if(en){const di=Math.sin(en),Ji=Math.cos(en),ys=[Ji,-di,di,Ji];Ia._matMult(ys),_a._matMult(ys),Ya._matMult(ys),ea._matMult(ys)}const yu=new p(0,0),dl=new p(0,0);Pn.push({tl:Ia,tr:_a,bl:Ya,br:ea,tex:vt,writingMode:Ve.writingMode,glyphOffset:zl,sectionIndex:fn.sectionIndex,isSDF:En,pixelOffsetTL:yu,pixelOffsetBR:dl,minFontScaleX:0,minFontScaleY:0})}return Pn})(0,m,R,S,P,D,v,d.allowVerticalPlacement),Ae=d.textSizeData;let Te=null;Ae.kind==="source"?(Te=[jh*S.layout.get("text-size").evaluate(D,{})],Te[0]>mp&&se(`${d.layerIds[0]}: Value for "text-size" is >= ${_v}. Reduce your "text-size".`)):Ae.kind==="composite"&&(Te=[jh*re.compositeTextSizes[0].evaluate(D,{},he),jh*re.compositeTextSizes[1].evaluate(D,{},he)],(Te[0]>mp||Te[1]>mp)&&se(`${d.layerIds[0]}: Value for "text-size" is >= ${_v}. Reduce your "text-size".`)),d.addSymbols(d.text,ue,Te,R,P,D,V,c,N.lineStartIndex,N.lineLength,ee,he);for(const nt of W)Y[nt]=d.text.placedSymbolArray.length-1;return 4*ue.length}function AE(d){for(const c in d)return d[c];return null}function E8(d,c,m,v){const S=d.compareText;if(c in S){const P=S[c];for(let D=P.length-1;D>=0;D--)if(v.dist(P[D])<m)return!0}else S[c]=[];return S[c].push(v),!1}const yx=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class vS{static from(c){if(!(c instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[m,v]=new Uint8Array(c,0,2);if(m!==219)throw new Error("Data does not appear to be in a KDBush format.");const S=v>>4;if(S!==1)throw new Error(`Got v${S} data when expected v1.`);const P=yx[15&v];if(!P)throw new Error("Unrecognized array type.");const[D]=new Uint16Array(c,2,1),[R]=new Uint32Array(c,4,1);return new vS(R,D,P,c)}constructor(c,m=64,v=Float64Array,S){if(isNaN(c)||c<0)throw new Error(`Unpexpected numItems value: ${c}.`);this.numItems=+c,this.nodeSize=Math.min(Math.max(+m,2),65535),this.ArrayType=v,this.IndexArrayType=c<65536?Uint16Array:Uint32Array;const P=yx.indexOf(this.ArrayType),D=2*c*this.ArrayType.BYTES_PER_ELEMENT,R=c*this.IndexArrayType.BYTES_PER_ELEMENT,N=(8-R%8)%8;if(P<0)throw new Error(`Unexpected typed array class: ${v}.`);S&&S instanceof ArrayBuffer?(this.data=S,this.ids=new this.IndexArrayType(this.data,8,c),this.coords=new this.ArrayType(this.data,8+R+N,2*c),this._pos=2*c,this._finished=!0):(this.data=new ArrayBuffer(8+D+R+N),this.ids=new this.IndexArrayType(this.data,8,c),this.coords=new this.ArrayType(this.data,8+R+N,2*c),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+P]),new Uint16Array(this.data,2,1)[0]=m,new Uint32Array(this.data,4,1)[0]=c)}add(c,m){const v=this._pos>>1;return this.ids[v]=v,this.coords[this._pos++]=c,this.coords[this._pos++]=m,v}finish(){const c=this._pos>>1;if(c!==this.numItems)throw new Error(`Added ${c} items when expected ${this.numItems}.`);return Zc(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(c,m,v,S){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:P,coords:D,nodeSize:R}=this,N=[0,P.length-1,0],V=[];for(;N.length;){const W=N.pop()||0,Y=N.pop()||0,ee=N.pop()||0;if(Y-ee<=R){for(let Ae=ee;Ae<=Y;Ae++){const Te=D[2*Ae],nt=D[2*Ae+1];Te>=c&&Te<=v&&nt>=m&&nt<=S&&V.push(P[Ae])}continue}const re=ee+Y>>1,he=D[2*re],ue=D[2*re+1];he>=c&&he<=v&&ue>=m&&ue<=S&&V.push(P[re]),(W===0?c<=he:m<=ue)&&(N.push(ee),N.push(re-1),N.push(1-W)),(W===0?v>=he:S>=ue)&&(N.push(re+1),N.push(Y),N.push(1-W))}return V}within(c,m,v){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:S,coords:P,nodeSize:D}=this,R=[0,S.length-1,0],N=[],V=v*v;for(;R.length;){const W=R.pop()||0,Y=R.pop()||0,ee=R.pop()||0;if(Y-ee<=D){for(let Ae=ee;Ae<=Y;Ae++)ho(P[2*Ae],P[2*Ae+1],c,m)<=V&&N.push(S[Ae]);continue}const re=ee+Y>>1,he=P[2*re],ue=P[2*re+1];ho(he,ue,c,m)<=V&&N.push(S[re]),(W===0?c-v<=he:m-v<=ue)&&(R.push(ee),R.push(re-1),R.push(1-W)),(W===0?c+v>=he:m+v>=ue)&&(R.push(re+1),R.push(Y),R.push(1-W))}return N}}function Zc(d,c,m,v,S,P){if(S-v<=m)return;const D=v+S>>1;bS(d,c,D,v,S,P),Zc(d,c,m,v,D-1,1-P),Zc(d,c,m,D+1,S,1-P)}function bS(d,c,m,v,S,P){for(;S>v;){if(S-v>600){const V=S-v+1,W=m-v+1,Y=Math.log(V),ee=.5*Math.exp(2*Y/3),re=.5*Math.sqrt(Y*ee*(V-ee)/V)*(W-V/2<0?-1:1);bS(d,c,m,Math.max(v,Math.floor(m-W*ee/V+re)),Math.min(S,Math.floor(m+(V-W)*ee/V+re)),P)}const D=c[2*m+P];let R=v,N=S;for(yp(d,c,v,m),c[2*S+P]>D&&yp(d,c,v,S);R<N;){for(yp(d,c,R,N),R++,N--;c[2*R+P]<D;)R++;for(;c[2*N+P]>D;)N--}c[2*v+P]===D?yp(d,c,v,N):(N++,yp(d,c,N,S)),N<=m&&(v=N+1),m<=N&&(S=N-1)}}function yp(d,c,m,v){qs(d,m,v),qs(c,2*m,2*v),qs(c,2*m+1,2*v+1)}function qs(d,c,m){const v=d[c];d[c]=d[m],d[m]=v}function ho(d,c,m,v){const S=d-m,P=c-v;return S*S+P*P}var vx;o.bg=void 0,(vx=o.bg||(o.bg={})).create="create",vx.load="load",vx.fullLoad="fullLoad";let bx=null,kv=[];const _S=1e3/60,xS="loadTime",wS="fullLoadTime",T8={mark(d){performance.mark(d)},frame(d){const c=d;bx!=null&&kv.push(c-bx),bx=c},clearMetrics(){bx=null,kv=[],performance.clearMeasures(xS),performance.clearMeasures(wS);for(const d in o.bg)performance.clearMarks(o.bg[d])},getPerformanceMetrics(){performance.measure(xS,o.bg.create,o.bg.load),performance.measure(wS,o.bg.create,o.bg.fullLoad);const d=performance.getEntriesByName(xS)[0].duration,c=performance.getEntriesByName(wS)[0].duration,m=kv.length,v=1/(kv.reduce(((P,D)=>P+D),0)/m/1e3),S=kv.filter((P=>P>_S)).reduce(((P,D)=>P+(D-_S)/_S),0);return{loadTime:d,fullLoadTime:c,fps:v,percentDroppedFrames:S/(m+S)*100,totalFrames:m}}};o.$=class extends H{},o.A=tg,o.B=J1,o.C=function(d){if(Se==null){const c=d.navigator?d.navigator.userAgent:null;Se=!!d.safari||!(!c||!(/\b(iPad|iPhone|iPod)\b/.test(c)||c.match("Safari")&&!c.match("Chrome")))}return Se},o.D=Sn,o.E=nn,o.F=class{constructor(d,c){this.target=d,this.mapId=c,this.resolveRejects={},this.tasks={},this.taskQueue=[],this.abortControllers={},this.messageHandlers={},this.invoker=new x8((()=>this.process())),this.subscription=(function(m,v,S,P){return m.addEventListener(v,S,!1),{unsubscribe:()=>{m.removeEventListener(v,S,!1)}}})(this.target,"message",(m=>this.receive(m))),this.globalScope=xe(self)?d:window}registerMessageHandler(d,c){this.messageHandlers[d]=c}sendAsync(d,c){return new Promise(((m,v)=>{const S=Math.round(1e18*Math.random()).toString(36).substring(0,10);this.resolveRejects[S]={resolve:m,reject:v},c&&c.signal.addEventListener("abort",(()=>{delete this.resolveRejects[S];const R={id:S,type:"<cancel>",origin:location.origin,targetMapId:d.targetMapId,sourceMapId:this.mapId};this.target.postMessage(R)}),{once:!0});const P=[],D=Object.assign(Object.assign({},d),{id:S,sourceMapId:this.mapId,origin:location.origin,data:rp(d.data,P)});this.target.postMessage(D,{transfer:P})}))}receive(d){const c=d.data,m=c.id;if(!(c.origin!=="file://"&&location.origin!=="file://"&&c.origin!=="resource://android"&&location.origin!=="resource://android"&&c.origin!==location.origin||c.targetMapId&&this.mapId!==c.targetMapId)){if(c.type==="<cancel>"){delete this.tasks[m];const v=this.abortControllers[m];return delete this.abortControllers[m],void(v&&v.abort())}if(xe(self)||c.mustQueue)return this.tasks[m]=c,this.taskQueue.push(m),void this.invoker.trigger();this.processTask(m,c)}}process(){if(this.taskQueue.length===0)return;const d=this.taskQueue.shift(),c=this.tasks[d];delete this.tasks[d],this.taskQueue.length>0&&this.invoker.trigger(),c&&this.processTask(d,c)}processTask(d,c){return a(this,void 0,void 0,(function*(){if(c.type==="<response>"){const S=this.resolveRejects[d];return delete this.resolveRejects[d],S?void(c.error?S.reject(Uc(c.error)):S.resolve(Uc(c.data))):void 0}if(!this.messageHandlers[c.type])return void this.completeTask(d,new Error(`Could not find a registered handler for ${c.type}, map ID: ${this.mapId}, available handlers: ${Object.keys(this.messageHandlers).join(", ")}`));const m=Uc(c.data),v=new AbortController;this.abortControllers[d]=v;try{const S=yield this.messageHandlers[c.type](c.sourceMapId,m,v);this.completeTask(d,null,S)}catch(S){this.completeTask(d,S)}}))}completeTask(d,c,m){const v=[];delete this.abortControllers[d];const S={id:d,type:"<response>",sourceMapId:this.mapId,origin:location.origin,error:c?rp(c):null,data:rp(m,v)};this.target.postMessage(S,{transfer:v})}remove(){this.invoker.remove(),this.subscription.unsubscribe()}},o.G=dt,o.H=function(){var d=new tg(16);return tg!=Float32Array&&(d[1]=0,d[2]=0,d[3]=0,d[4]=0,d[6]=0,d[7]=0,d[8]=0,d[9]=0,d[11]=0,d[12]=0,d[13]=0,d[14]=0),d[0]=1,d[5]=1,d[10]=1,d[15]=1,d},o.I=iS,o.J=function(d,c,m){var v,S,P,D,R,N,V,W,Y,ee,re,he,ue=m[0],Ae=m[1],Te=m[2];return c===d?(d[12]=c[0]*ue+c[4]*Ae+c[8]*Te+c[12],d[13]=c[1]*ue+c[5]*Ae+c[9]*Te+c[13],d[14]=c[2]*ue+c[6]*Ae+c[10]*Te+c[14],d[15]=c[3]*ue+c[7]*Ae+c[11]*Te+c[15]):(S=c[1],P=c[2],D=c[3],R=c[4],N=c[5],V=c[6],W=c[7],Y=c[8],ee=c[9],re=c[10],he=c[11],d[0]=v=c[0],d[1]=S,d[2]=P,d[3]=D,d[4]=R,d[5]=N,d[6]=V,d[7]=W,d[8]=Y,d[9]=ee,d[10]=re,d[11]=he,d[12]=v*ue+R*Ae+Y*Te+c[12],d[13]=S*ue+N*Ae+ee*Te+c[13],d[14]=P*ue+V*Ae+re*Te+c[14],d[15]=D*ue+W*Ae+he*Te+c[15]),d},o.K=function(d,c,m){var v=m[0],S=m[1],P=m[2];return d[0]=c[0]*v,d[1]=c[1]*v,d[2]=c[2]*v,d[3]=c[3]*v,d[4]=c[4]*S,d[5]=c[5]*S,d[6]=c[6]*S,d[7]=c[7]*S,d[8]=c[8]*P,d[9]=c[9]*P,d[10]=c[10]*P,d[11]=c[11]*P,d[12]=c[12],d[13]=c[13],d[14]=c[14],d[15]=c[15],d},o.L=hl,o.M=function(d,c){const m={};for(let v=0;v<c.length;v++){const S=c[v];S in d&&(m[S]=d[S])}return m},o.N=gp,o.O=dE,o.P=p,o.Q=pE,o.R=$l,o.S=Bl,o.T=K0,o.U=I,o.V=M,o.W=Ue,o.X=no,o.Y=$,o.Z=dy,o._=a,o.a=wt,o.a$=function(d,c){var m=d[0],v=d[1],S=d[2],P=d[3],D=d[4],R=d[5],N=d[6],V=d[7],W=d[8],Y=d[9],ee=d[10],re=d[11],he=d[12],ue=d[13],Ae=d[14],Te=d[15],nt=c[0],Ve=c[1],qe=c[2],pt=c[3],Dt=c[4],ln=c[5],zn=c[6],un=c[7],en=c[8],Pn=c[9],vn=c[10],fn=c[11],vt=c[12],Mn=c[13],En=c[14],Jn=c[15];return Math.abs(m-nt)<=Za*Math.max(1,Math.abs(m),Math.abs(nt))&&Math.abs(v-Ve)<=Za*Math.max(1,Math.abs(v),Math.abs(Ve))&&Math.abs(S-qe)<=Za*Math.max(1,Math.abs(S),Math.abs(qe))&&Math.abs(P-pt)<=Za*Math.max(1,Math.abs(P),Math.abs(pt))&&Math.abs(D-Dt)<=Za*Math.max(1,Math.abs(D),Math.abs(Dt))&&Math.abs(R-ln)<=Za*Math.max(1,Math.abs(R),Math.abs(ln))&&Math.abs(N-zn)<=Za*Math.max(1,Math.abs(N),Math.abs(zn))&&Math.abs(V-un)<=Za*Math.max(1,Math.abs(V),Math.abs(un))&&Math.abs(W-en)<=Za*Math.max(1,Math.abs(W),Math.abs(en))&&Math.abs(Y-Pn)<=Za*Math.max(1,Math.abs(Y),Math.abs(Pn))&&Math.abs(ee-vn)<=Za*Math.max(1,Math.abs(ee),Math.abs(vn))&&Math.abs(re-fn)<=Za*Math.max(1,Math.abs(re),Math.abs(fn))&&Math.abs(he-vt)<=Za*Math.max(1,Math.abs(he),Math.abs(vt))&&Math.abs(ue-Mn)<=Za*Math.max(1,Math.abs(ue),Math.abs(Mn))&&Math.abs(Ae-En)<=Za*Math.max(1,Math.abs(Ae),Math.abs(En))&&Math.abs(Te-Jn)<=Za*Math.max(1,Math.abs(Te),Math.abs(Jn))},o.a0=jr,o.a1=wv,o.a2=Ct,o.a3=d=>{const c=window.document.createElement("video");return c.muted=!0,new Promise((m=>{c.onloadstart=()=>{m(c)};for(const v of d){const S=window.document.createElement("source");Kt(v)||(c.crossOrigin="Anonymous"),S.src=v,c.appendChild(S)}}))},o.a4=function(){return J++},o.a5=Vt,o.a6=fy,o.a7=W1,o.a8=Fl,o.a9=gE,o.aA=function(d){if(d.type==="custom")return new _8(d);switch(d.type){case"background":return new dx(d);case"circle":return new tx(d);case"fill":return new $I(d);case"fill-extrusion":return new RA(d);case"heatmap":return new OA(d);case"hillshade":return new rx(d);case"line":return new GI(d);case"raster":return new b8(d);case"symbol":return new fx(d)}},o.aB=ae,o.aC=function(d,c){if(!d)return[{command:"setStyle",args:[c]}];let m=[];try{if(!An(d.version,c.version))return[{command:"setStyle",args:[c]}];An(d.center,c.center)||m.push({command:"setCenter",args:[c.center]}),An(d.zoom,c.zoom)||m.push({command:"setZoom",args:[c.zoom]}),An(d.bearing,c.bearing)||m.push({command:"setBearing",args:[c.bearing]}),An(d.pitch,c.pitch)||m.push({command:"setPitch",args:[c.pitch]}),An(d.sprite,c.sprite)||m.push({command:"setSprite",args:[c.sprite]}),An(d.glyphs,c.glyphs)||m.push({command:"setGlyphs",args:[c.glyphs]}),An(d.transition,c.transition)||m.push({command:"setTransition",args:[c.transition]}),An(d.light,c.light)||m.push({command:"setLight",args:[c.light]}),An(d.terrain,c.terrain)||m.push({command:"setTerrain",args:[c.terrain]}),An(d.sky,c.sky)||m.push({command:"setSky",args:[c.sky]}),An(d.projection,c.projection)||m.push({command:"setProjection",args:[c.projection]});const v={},S=[];(function(D,R,N,V){let W;for(W in R=R||{},D=D||{})Object.prototype.hasOwnProperty.call(D,W)&&(Object.prototype.hasOwnProperty.call(R,W)||Mi(W,N,V));for(W in R)Object.prototype.hasOwnProperty.call(R,W)&&(Object.prototype.hasOwnProperty.call(D,W)?An(D[W],R[W])||(D[W].type==="geojson"&&R[W].type==="geojson"&&fs(D,R,W)?qn(N,{command:"setGeoJSONSourceData",args:[W,R[W].data]}):gi(W,R,N,V)):Er(W,R,N))})(d.sources,c.sources,S,v);const P=[];d.layers&&d.layers.forEach((D=>{"source"in D&&v[D.source]?m.push({command:"removeLayer",args:[D.id]}):P.push(D)})),m=m.concat(S),(function(D,R,N){R=R||[];const V=(D=D||[]).map(uo),W=R.map(uo),Y=D.reduce(ei,{}),ee=R.reduce(ei,{}),re=V.slice(),he=Object.create(null);let ue,Ae,Te,nt,Ve;for(let qe=0,pt=0;qe<V.length;qe++)ue=V[qe],Object.prototype.hasOwnProperty.call(ee,ue)?pt++:(qn(N,{command:"removeLayer",args:[ue]}),re.splice(re.indexOf(ue,pt),1));for(let qe=0,pt=0;qe<W.length;qe++)ue=W[W.length-1-qe],re[re.length-1-qe]!==ue&&(Object.prototype.hasOwnProperty.call(Y,ue)?(qn(N,{command:"removeLayer",args:[ue]}),re.splice(re.lastIndexOf(ue,re.length-pt),1)):pt++,nt=re[re.length-qe],qn(N,{command:"addLayer",args:[ee[ue],nt]}),re.splice(re.length-qe,0,ue),he[ue]=!0);for(let qe=0;qe<W.length;qe++)if(ue=W[qe],Ae=Y[ue],Te=ee[ue],!he[ue]&&!An(Ae,Te))if(An(Ae.source,Te.source)&&An(Ae["source-layer"],Te["source-layer"])&&An(Ae.type,Te.type)){for(Ve in Hr(Ae.layout,Te.layout,N,ue,null,"setLayoutProperty"),Hr(Ae.paint,Te.paint,N,ue,null,"setPaintProperty"),An(Ae.filter,Te.filter)||qn(N,{command:"setFilter",args:[ue,Te.filter]}),An(Ae.minzoom,Te.minzoom)&&An(Ae.maxzoom,Te.maxzoom)||qn(N,{command:"setLayerZoomRange",args:[ue,Te.minzoom,Te.maxzoom]}),Ae)Object.prototype.hasOwnProperty.call(Ae,Ve)&&Ve!=="layout"&&Ve!=="paint"&&Ve!=="filter"&&Ve!=="metadata"&&Ve!=="minzoom"&&Ve!=="maxzoom"&&(Ve.indexOf("paint.")===0?Hr(Ae[Ve],Te[Ve],N,ue,Ve.slice(6),"setPaintProperty"):An(Ae[Ve],Te[Ve])||qn(N,{command:"setLayerProperty",args:[ue,Ve,Te[Ve]]}));for(Ve in Te)Object.prototype.hasOwnProperty.call(Te,Ve)&&!Object.prototype.hasOwnProperty.call(Ae,Ve)&&Ve!=="layout"&&Ve!=="paint"&&Ve!=="filter"&&Ve!=="metadata"&&Ve!=="minzoom"&&Ve!=="maxzoom"&&(Ve.indexOf("paint.")===0?Hr(Ae[Ve],Te[Ve],N,ue,Ve.slice(6),"setPaintProperty"):An(Ae[Ve],Te[Ve])||qn(N,{command:"setLayerProperty",args:[ue,Ve,Te[Ve]]}))}else qn(N,{command:"removeLayer",args:[ue]}),nt=re[re.lastIndexOf(ue)+1],qn(N,{command:"addLayer",args:[Te,nt]})})(P,c.layers,m)}catch(v){console.warn("Unable to compute style diff:",v),m=[{command:"setStyle",args:[c]}]}return m},o.aD=function(d){const c=[],m=d.id;return m===void 0&&c.push({message:`layers.${m}: missing required property "id"`}),d.render===void 0&&c.push({message:`layers.${m}: missing required method "render"`}),d.renderingMode&&d.renderingMode!=="2d"&&d.renderingMode!=="3d"&&c.push({message:`layers.${m}: property "renderingMode" must be either "2d" or "3d"`}),c},o.aE=function d(c,m){if(Array.isArray(c)){if(!Array.isArray(m)||c.length!==m.length)return!1;for(let v=0;v<c.length;v++)if(!d(c[v],m[v]))return!1;return!0}if(typeof c=="object"&&c!==null&&m!==null){if(typeof m!="object"||Object.keys(c).length!==Object.keys(m).length)return!1;for(const v in c)if(!d(c[v],m[v]))return!1;return!0}return c===m},o.aF=oe,o.aG=me,o.aH=class extends Gf{constructor(d,c){super(d,c),this.current=0}set(d){this.current!==d&&(this.current=d,this.gl.uniform1i(this.location,d))}},o.aI=sv,o.aJ=class extends Gf{constructor(d,c){super(d,c),this.current=IO}set(d){if(d[12]!==this.current[12]||d[0]!==this.current[0])return this.current=d,void this.gl.uniformMatrix4fv(this.location,!1,d);for(let c=1;c<16;c++)if(d[c]!==this.current[c]){this.current=d,this.gl.uniformMatrix4fv(this.location,!1,d);break}}},o.aK=X_,o.aL=mA,o.aM=$t,o.aN=class extends Gf{constructor(d,c){super(d,c),this.current=[0,0,0]}set(d){d[0]===this.current[0]&&d[1]===this.current[1]&&d[2]===this.current[2]||(this.current=d,this.gl.uniform3f(this.location,d[0],d[1],d[2]))}},o.aO=class extends Gf{constructor(d,c){super(d,c),this.current=[0,0]}set(d){d[0]===this.current[0]&&d[1]===this.current[1]||(this.current=d,this.gl.uniform2f(this.location,d[0],d[1]))}},o.aP=function(d,c,m,v,S,P,D){var R=1/(c-m),N=1/(v-S),V=1/(P-D);return d[0]=-2*R,d[1]=0,d[2]=0,d[3]=0,d[4]=0,d[5]=-2*N,d[6]=0,d[7]=0,d[8]=0,d[9]=0,d[10]=2*V,d[11]=0,d[12]=(c+m)*R,d[13]=(S+v)*N,d[14]=(D+P)*V,d[15]=1,d},o.aQ=II,o.aR=class extends Xe{},o.aS=HI,o.aT=class extends st{},o.aU=sy,o.aV=function(d){return d<=1?1:Math.pow(2,Math.ceil(Math.log(d)/Math.LN2))},o.aW=BO,o.aX=pa,o.aY=Rl,o.aZ=class extends bn{},o.a_=function(d,c){return d[0]===c[0]&&d[1]===c[1]&&d[2]===c[2]&&d[3]===c[3]&&d[4]===c[4]&&d[5]===c[5]&&d[6]===c[6]&&d[7]===c[7]&&d[8]===c[8]&&d[9]===c[9]&&d[10]===c[10]&&d[11]===c[11]&&d[12]===c[12]&&d[13]===c[13]&&d[14]===c[14]&&d[15]===c[15]},o.aa=function(d){const c={};if(d.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,((m,v,S,P)=>{const D=S||P;return c[v]=!D||D.toLowerCase(),""})),c["max-age"]){const m=parseInt(c["max-age"],10);isNaN(m)?delete c["max-age"]:c["max-age"]=m}return c},o.ab=function(d,c){const m=[];for(const v in d)v in c||m.push(v);return m},o.ac=Q,o.ad=function(d,c,m){var v=Math.sin(m),S=Math.cos(m),P=c[0],D=c[1],R=c[2],N=c[3],V=c[4],W=c[5],Y=c[6],ee=c[7];return c!==d&&(d[8]=c[8],d[9]=c[9],d[10]=c[10],d[11]=c[11],d[12]=c[12],d[13]=c[13],d[14]=c[14],d[15]=c[15]),d[0]=P*S+V*v,d[1]=D*S+W*v,d[2]=R*S+Y*v,d[3]=N*S+ee*v,d[4]=V*S-P*v,d[5]=W*S-D*v,d[6]=Y*S-R*v,d[7]=ee*S-N*v,d},o.ae=function(d){var c=new tg(16);return c[0]=d[0],c[1]=d[1],c[2]=d[2],c[3]=d[3],c[4]=d[4],c[5]=d[5],c[6]=d[6],c[7]=d[7],c[8]=d[8],c[9]=d[9],c[10]=d[10],c[11]=d[11],c[12]=d[12],c[13]=d[13],c[14]=d[14],c[15]=d[15],c},o.af=ex,o.ag=function(d,c){let m=0,v=0;if(d.kind==="constant")v=d.layoutSize;else if(d.kind!=="source"){const{interpolationType:S,minZoom:P,maxZoom:D}=d,R=S?Q(Ea.interpolationFactor(S,c,P,D),0,1):0;d.kind==="camera"?v=Ua.number(d.minSize,d.maxSize,R):m=R}return{uSizeT:m,uSize:v}},o.ai=function(d,{uSize:c,uSizeT:m},{lowerSize:v,upperSize:S}){return d.kind==="source"?v/jh:d.kind==="composite"?Ua.number(v/jh,S/jh,m):c},o.aj=aS,o.ak=function(d,c,m,v){const S=c.y-d.y,P=c.x-d.x,D=v.y-m.y,R=v.x-m.x,N=D*P-R*S;if(N===0)return null;const V=(R*(d.y-m.y)-D*(d.x-m.x))/N;return new p(d.x+V*P,d.y+V*S)},o.al=vE,o.am=lv,o.an=J_,o.ao=function(d){let c=1/0,m=1/0,v=-1/0,S=-1/0;for(const P of d)c=Math.min(c,P.x),m=Math.min(m,P.y),v=Math.max(v,P.x),S=Math.max(S,P.y);return[c,m,v,S]},o.ap=xo,o.ar=oS,o.as=function(d,c){var m=c[0],v=c[1],S=c[2],P=c[3],D=c[4],R=c[5],N=c[6],V=c[7],W=c[8],Y=c[9],ee=c[10],re=c[11],he=c[12],ue=c[13],Ae=c[14],Te=c[15],nt=m*R-v*D,Ve=m*N-S*D,qe=m*V-P*D,pt=v*N-S*R,Dt=v*V-P*R,ln=S*V-P*N,zn=W*ue-Y*he,un=W*Ae-ee*he,en=W*Te-re*he,Pn=Y*Ae-ee*ue,vn=Y*Te-re*ue,fn=ee*Te-re*Ae,vt=nt*fn-Ve*vn+qe*Pn+pt*en-Dt*un+ln*zn;return vt?(d[0]=(R*fn-N*vn+V*Pn)*(vt=1/vt),d[1]=(S*vn-v*fn-P*Pn)*vt,d[2]=(ue*ln-Ae*Dt+Te*pt)*vt,d[3]=(ee*Dt-Y*ln-re*pt)*vt,d[4]=(N*en-D*fn-V*un)*vt,d[5]=(m*fn-S*en+P*un)*vt,d[6]=(Ae*qe-he*ln-Te*Ve)*vt,d[7]=(W*ln-ee*qe+re*Ve)*vt,d[8]=(D*vn-R*en+V*zn)*vt,d[9]=(v*en-m*vn-P*zn)*vt,d[10]=(he*Dt-ue*qe+Te*nt)*vt,d[11]=(Y*qe-W*Dt-re*nt)*vt,d[12]=(R*un-D*Pn-N*zn)*vt,d[13]=(m*Pn-v*un+S*zn)*vt,d[14]=(ue*Ve-he*pt-Ae*nt)*vt,d[15]=(W*pt-Y*Ve+ee*nt)*vt,d):null},o.at=yS,o.au=lx,o.av=vS,o.aw=function(){const d={},c=Ze.$version;for(const m in Ze.$root){const v=Ze.$root[m];if(v.required){let S=null;S=m==="version"?c:v.type==="array"?[]:{},S!=null&&(d[m]=S)}}return d},o.ax=qf,o.ay=Ft,o.az=function(d){d=d.slice();const c=Object.create(null);for(let m=0;m<d.length;m++)c[d[m].id]=d[m];for(let m=0;m<d.length;m++)"ref"in d[m]&&(d[m]=Fn(d[m],c[d[m].ref]));return d},o.b=De,o.b0=function(d,c){return d[0]=c[0],d[1]=c[1],d[2]=c[2],d[3]=c[3],d[4]=c[4],d[5]=c[5],d[6]=c[6],d[7]=c[7],d[8]=c[8],d[9]=c[9],d[10]=c[10],d[11]=c[11],d[12]=c[12],d[13]=c[13],d[14]=c[14],d[15]=c[15],d},o.b1=function(d,c,m){return d[0]=c[0]*m[0],d[1]=c[1]*m[1],d[2]=c[2]*m[2],d[3]=c[3]*m[3],d},o.b2=function(d,c){return d[0]*c[0]+d[1]*c[1]+d[2]*c[2]+d[3]*c[3]},o.b3=Z,o.b4=pS,o.b5=xv,o.b6=function(d,c,m,v,S){var P,D=1/Math.tan(c/2);return d[0]=D/m,d[1]=0,d[2]=0,d[3]=0,d[4]=0,d[5]=D,d[6]=0,d[7]=0,d[8]=0,d[9]=0,d[11]=-1,d[12]=0,d[13]=0,d[15]=0,S!=null&&S!==1/0?(d[10]=(S+v)*(P=1/(v-S)),d[14]=2*S*v*P):(d[10]=-1,d[14]=-2*v),d},o.b7=function(d,c,m){var v=Math.sin(m),S=Math.cos(m),P=c[4],D=c[5],R=c[6],N=c[7],V=c[8],W=c[9],Y=c[10],ee=c[11];return c!==d&&(d[0]=c[0],d[1]=c[1],d[2]=c[2],d[3]=c[3],d[12]=c[12],d[13]=c[13],d[14]=c[14],d[15]=c[15]),d[4]=P*S+V*v,d[5]=D*S+W*v,d[6]=R*S+Y*v,d[7]=N*S+ee*v,d[8]=V*S-P*v,d[9]=W*S-D*v,d[10]=Y*S-R*v,d[11]=ee*S-N*v,d},o.b8=B,o.b9=j,o.bA=VA,o.bB=function(d){return d.message===at},o.bC=sr,o.bD=ul,o.ba=function(d){return d*Math.PI/180},o.bb=function(d,c){const{x:m,y:v}=dy.fromLngLat(c);return!(d<0||d>25||v<0||v>=1||m<0||m>=1)},o.bc=function(d,c){return d[0]=c[0],d[1]=0,d[2]=0,d[3]=0,d[4]=0,d[5]=c[1],d[6]=0,d[7]=0,d[8]=0,d[9]=0,d[10]=c[2],d[11]=0,d[12]=0,d[13]=0,d[14]=0,d[15]=1,d},o.bd=class extends G{},o.be=hS,o.bf=T8,o.bh=Yt,o.bi=function(d,c){wt.REGISTERED_PROTOCOLS[d]=c},o.bj=function(d){delete wt.REGISTERED_PROTOCOLS[d]},o.bk=function(d,c){const m={};for(let S=0;S<d.length;S++){const P=c&&c[d[S].id]||N_(d[S]);c&&(c[d[S].id]=P);let D=m[P];D||(D=m[P]=[]),D.push(d[S])}const v=[];for(const S in m)v.push(m[S]);return v},o.bl=dn,o.bm=mE,o.bn=yE,o.bo=JA,o.bp=function(d){d.bucket.createArrays(),d.bucket.tilePixelRatio=no/(512*d.bucket.overscaling),d.bucket.compareText={},d.bucket.iconsNeedLinear=!1;const c=d.bucket.layers[0],m=c.layout,v=c._unevaluatedLayout._values,S={layoutIconSize:v["icon-size"].possiblyEvaluate(new gs(d.bucket.zoom+1),d.canonical),layoutTextSize:v["text-size"].possiblyEvaluate(new gs(d.bucket.zoom+1),d.canonical),textMaxSize:v["text-size"].possiblyEvaluate(new gs(18))};if(d.bucket.textSizeData.kind==="composite"){const{minZoom:V,maxZoom:W}=d.bucket.textSizeData;S.compositeTextSizes=[v["text-size"].possiblyEvaluate(new gs(V),d.canonical),v["text-size"].possiblyEvaluate(new gs(W),d.canonical)]}if(d.bucket.iconSizeData.kind==="composite"){const{minZoom:V,maxZoom:W}=d.bucket.iconSizeData;S.compositeIconSizes=[v["icon-size"].possiblyEvaluate(new gs(V),d.canonical),v["icon-size"].possiblyEvaluate(new gs(W),d.canonical)]}const P=m.get("text-line-height")*xo,D=m.get("text-rotation-alignment")!=="viewport"&&m.get("symbol-placement")!=="point",R=m.get("text-keep-upright"),N=m.get("text-size");for(const V of d.bucket.features){const W=m.get("text-font").evaluate(V,{},d.canonical).join(","),Y=N.evaluate(V,{},d.canonical),ee=S.layoutTextSize.evaluate(V,{},d.canonical),re=S.layoutIconSize.evaluate(V,{},d.canonical),he={horizontal:{},vertical:void 0},ue=V.text;let Ae,Te=[0,0];if(ue){const qe=ue.toString(),pt=m.get("text-letter-spacing").evaluate(V,{},d.canonical)*xo,Dt=ip(qe)?pt:0,ln=m.get("text-anchor").evaluate(V,{},d.canonical),zn=nd(c,V,d.canonical);if(!zn){const vn=m.get("text-radial-offset").evaluate(V,{},d.canonical);Te=vn?kE(ln,[vn*xo,co]):m.get("text-offset").evaluate(V,{},d.canonical).map((fn=>fn*xo))}let un=D?"center":m.get("text-justify").evaluate(V,{},d.canonical);const en=m.get("symbol-placement")==="point"?m.get("text-max-width").evaluate(V,{},d.canonical)*xo:1/0,Pn=()=>{d.bucket.allowVerticalPlacement&&de(qe)&&(he.vertical=hy(ue,d.glyphMap,d.glyphPositions,d.imagePositions,W,en,P,ln,"left",Dt,Te,o.ah.vertical,!0,ee,Y))};if(!D&&zn){const vn=new Set;if(un==="auto")for(let vt=0;vt<zn.values.length;vt+=2)vn.add(yS(zn.values[vt]));else vn.add(un);let fn=!1;for(const vt of vn)if(!he.horizontal[vt])if(fn)he.horizontal[vt]=he.horizontal[0];else{const Mn=hy(ue,d.glyphMap,d.glyphPositions,d.imagePositions,W,en,P,"center",vt,Dt,Te,o.ah.horizontal,!1,ee,Y);Mn&&(he.horizontal[vt]=Mn,fn=Mn.positionedLines.length===1)}Pn()}else{un==="auto"&&(un=yS(ln));const vn=hy(ue,d.glyphMap,d.glyphPositions,d.imagePositions,W,en,P,ln,un,Dt,Te,o.ah.horizontal,!1,ee,Y);vn&&(he.horizontal[un]=vn),Pn(),de(qe)&&D&&R&&(he.vertical=hy(ue,d.glyphMap,d.glyphPositions,d.imagePositions,W,en,P,ln,un,Dt,Te,o.ah.vertical,!1,ee,Y))}}let nt=!1;if(V.icon&&V.icon.name){const qe=d.imageMap[V.icon.name];qe&&(Ae=ux(d.imagePositions[V.icon.name],m.get("icon-offset").evaluate(V,{},d.canonical),m.get("icon-anchor").evaluate(V,{},d.canonical)),nt=!!qe.sdf,d.bucket.sdfIcons===void 0?d.bucket.sdfIcons=nt:d.bucket.sdfIcons!==nt&&se("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(qe.pixelRatio!==d.bucket.pixelRatio||m.get("icon-rotate").constantOr(1)!==0)&&(d.bucket.iconsNeedLinear=!0))}const Ve=AE(he.horizontal)||he.vertical;d.bucket.iconsInText=!!Ve&&Ve.iconsInText,(Ve||Ae)&&A8(d.bucket,V,he,Ae,d.imageMap,S,ee,re,Te,nt,d.canonical)}d.showCollisionBoxes&&d.bucket.generateCollisionDebugBuffers()},o.bq=KO,o.br=VO,o.bs=GO,o.bt=_o,o.bu=nS,o.bv=class{constructor(d){this._marks={start:[d.url,"start"].join("#"),end:[d.url,"end"].join("#"),measure:d.url.toString()},performance.mark(this._marks.start)}finish(){performance.mark(this._marks.end);let d=performance.getEntriesByName(this._marks.measure);return d.length===0&&(performance.measure(this._marks.measure,this._marks.start,this._marks.end),d=performance.getEntriesByName(this._marks.measure),performance.clearMarks(this._marks.start),performance.clearMarks(this._marks.end),performance.clearMeasures(this._marks.measure)),d}},o.bw=function(d,c,m,v,S){return a(this,void 0,void 0,(function*(){if(M())try{return yield Ue(d,c,m,v,S)}catch{}return(function(P,D,R,N,V){const W=P.width,Y=P.height;yt&&We||(yt=new OffscreenCanvas(W,Y),We=yt.getContext("2d",{willReadFrequently:!0})),yt.width=W,yt.height=Y,We.drawImage(P,0,0,W,Y);const ee=We.getImageData(D,R,N,V);return We.clearRect(0,0,W,Y),ee.data})(d,c,m,v,S)}))},o.bx=mS,o.by=l,o.bz=h,o.c=ut,o.d=d=>a(void 0,void 0,void 0,(function*(){if(d.byteLength===0)return createImageBitmap(new ImageData(1,1));const c=new Blob([new Uint8Array(d)],{type:"image/png"});try{return createImageBitmap(c)}catch(m){throw new Error(`Could not load image because of ${m.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`)}})),o.e=q,o.f=d=>new Promise(((c,m)=>{const v=new Image;v.onload=()=>{c(v),URL.revokeObjectURL(v.src),v.onload=null,window.requestAnimationFrame((()=>{v.src=He}))},v.onerror=()=>m(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const S=new Blob([new Uint8Array(d)],{type:"image/png"});v.src=d.byteLength?URL.createObjectURL(S):He})),o.g=ot,o.h=(d,c)=>Ot(q(d,{type:"json"}),c),o.i=xe,o.j=zt,o.k=At,o.l=(d,c)=>Ot(q(d,{type:"arrayBuffer"}),c),o.m=Ot,o.n=function(d){return new nS(d).readFields(a8,[])},o.o=cv,o.p=KA,o.q=E,o.r=Xm,o.s=Kt,o.t=Vf,o.u=Qc,o.v=Ze,o.w=se,o.x=function([d,c,m]){return c+=90,c*=Math.PI/180,m*=Math.PI/180,{x:d*Math.cos(c)*Math.sin(m),y:d*Math.sin(c)*Math.sin(m),z:d*Math.cos(m)}},o.y=Ua,o.z=gs})),i("worker",["./shared"],(function(o){class a{constructor(ne){this.keyCache={},ne&&this.replace(ne)}replace(ne){this._layerConfigs={},this._layers={},this.update(ne,[])}update(ne,te){for(const we of ne){this._layerConfigs[we.id]=we;const ze=this._layers[we.id]=o.aA(we);ze._featureFilter=o.a7(ze.filter),this.keyCache[we.id]&&delete this.keyCache[we.id]}for(const we of te)delete this.keyCache[we],delete this._layerConfigs[we],delete this._layers[we];this.familiesBySource={};const fe=o.bk(Object.values(this._layerConfigs),this.keyCache);for(const we of fe){const ze=we.map((rt=>this._layers[rt.id])),Ge=ze[0];if(Ge.visibility==="none")continue;const et=Ge.source||"";let Ie=this.familiesBySource[et];Ie||(Ie=this.familiesBySource[et]={});const ht=Ge.sourceLayer||"_geojsonTileLayer";let _t=Ie[ht];_t||(_t=Ie[ht]=[]),_t.push(ze)}}}class l{constructor(ne){const te={},fe=[];for(const et in ne){const Ie=ne[et],ht=te[et]={};for(const _t in Ie){const rt=Ie[+_t];if(!rt||rt.bitmap.width===0||rt.bitmap.height===0)continue;const Bt={x:0,y:0,w:rt.bitmap.width+2,h:rt.bitmap.height+2};fe.push(Bt),ht[_t]={rect:Bt,metrics:rt.metrics}}}const{w:we,h:ze}=o.p(fe),Ge=new o.o({width:we||1,height:ze||1});for(const et in ne){const Ie=ne[et];for(const ht in Ie){const _t=Ie[+ht];if(!_t||_t.bitmap.width===0||_t.bitmap.height===0)continue;const rt=te[et][ht].rect;o.o.copy(_t.bitmap,Ge,{x:0,y:0},{x:rt.x+1,y:rt.y+1},_t.bitmap)}}this.image=Ge,this.positions=te}}o.bl("GlyphAtlas",l);class h{constructor(ne){this.tileID=new o.S(ne.tileID.overscaledZ,ne.tileID.wrap,ne.tileID.canonical.z,ne.tileID.canonical.x,ne.tileID.canonical.y),this.uid=ne.uid,this.zoom=ne.zoom,this.pixelRatio=ne.pixelRatio,this.tileSize=ne.tileSize,this.source=ne.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=ne.showCollisionBoxes,this.collectResourceTiming=!!ne.collectResourceTiming,this.returnDependencies=!!ne.returnDependencies,this.promoteId=ne.promoteId,this.inFlightDependencies=[]}parse(ne,te,fe,we){return o._(this,void 0,void 0,(function*(){this.status="parsing",this.data=ne,this.collisionBoxArray=new o.a5;const ze=new o.bm(Object.keys(ne.layers).sort()),Ge=new o.bn(this.tileID,this.promoteId);Ge.bucketLayerIDs=[];const et={},Ie={featureIndex:Ge,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:fe},ht=te.familiesBySource[this.source];for(const gr in ht){const hi=ne.layers[gr];if(!hi)continue;hi.version===1&&o.w(`Vector tile source "${this.source}" layer "${gr}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const an=ze.encode(gr),ye=[];for(let Je=0;Je<hi.length;Je++){const ft=hi.feature(Je),Wt=Ge.getId(ft,gr);ye.push({feature:ft,id:Wt,index:Je,sourceLayerIndex:an})}for(const Je of ht[gr]){const ft=Je[0];ft.source!==this.source&&o.w(`layer.source = ${ft.source} does not equal this.source = ${this.source}`),ft.minzoom&&this.zoom<Math.floor(ft.minzoom)||ft.maxzoom&&this.zoom>=ft.maxzoom||ft.visibility!=="none"&&(f(Je,this.zoom,fe),(et[ft.id]=ft.createBucket({index:Ge.bucketLayerIDs.length,layers:Je,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:an,sourceID:this.source})).populate(ye,Ie,this.tileID.canonical),Ge.bucketLayerIDs.push(Je.map((Wt=>Wt.id))))}}const _t=o.aF(Ie.glyphDependencies,(gr=>Object.keys(gr).map(Number)));this.inFlightDependencies.forEach((gr=>gr?.abort())),this.inFlightDependencies=[];let rt=Promise.resolve({});if(Object.keys(_t).length){const gr=new AbortController;this.inFlightDependencies.push(gr),rt=we.sendAsync({type:"GG",data:{stacks:_t,source:this.source,tileID:this.tileID,type:"glyphs"}},gr)}const Bt=Object.keys(Ie.iconDependencies);let On=Promise.resolve({});if(Bt.length){const gr=new AbortController;this.inFlightDependencies.push(gr),On=we.sendAsync({type:"GI",data:{icons:Bt,source:this.source,tileID:this.tileID,type:"icons"}},gr)}const In=Object.keys(Ie.patternDependencies);let Ir=Promise.resolve({});if(In.length){const gr=new AbortController;this.inFlightDependencies.push(gr),Ir=we.sendAsync({type:"GI",data:{icons:In,source:this.source,tileID:this.tileID,type:"patterns"}},gr)}const[Gn,ur,Cr]=yield Promise.all([rt,On,Ir]),ds=new l(Gn),ji=new o.bo(ur,Cr);for(const gr in et){const hi=et[gr];hi instanceof o.a6?(f(hi.layers,this.zoom,fe),o.bp({bucket:hi,glyphMap:Gn,glyphPositions:ds.positions,imageMap:ur,imagePositions:ji.iconPositions,showCollisionBoxes:this.showCollisionBoxes,canonical:this.tileID.canonical})):hi.hasPattern&&(hi instanceof o.bq||hi instanceof o.br||hi instanceof o.bs)&&(f(hi.layers,this.zoom,fe),hi.addFeatures(Ie,this.tileID.canonical,ji.patternPositions))}return this.status="done",{buckets:Object.values(et).filter((gr=>!gr.isEmpty())),featureIndex:Ge,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:ds.image,imageAtlas:ji,glyphMap:this.returnDependencies?Gn:null,iconMap:this.returnDependencies?ur:null,glyphPositions:this.returnDependencies?ds.positions:null}}))}}function f(Oe,ne,te){const fe=new o.z(ne);for(const we of Oe)we.recalculate(fe,te)}class p{constructor(ne,te,fe){this.actor=ne,this.layerIndex=te,this.availableImages=fe,this.fetching={},this.loading={},this.loaded={}}loadVectorTile(ne,te){return o._(this,void 0,void 0,(function*(){const fe=yield o.l(ne.request,te);try{return{vectorTile:new o.bt.VectorTile(new o.bu(fe.data)),rawData:fe.data,cacheControl:fe.cacheControl,expires:fe.expires}}catch(we){const ze=new Uint8Array(fe.data);let Ge=`Unable to parse the tile at ${ne.request.url}, `;throw Ge+=ze[0]===31&&ze[1]===139?"please make sure the data is not gzipped and that you have configured the relevant header in the server":`got error: ${we.message}`,new Error(Ge)}}))}loadTile(ne){return o._(this,void 0,void 0,(function*(){const te=ne.uid,fe=!!(ne&&ne.request&&ne.request.collectResourceTiming)&&new o.bv(ne.request),we=new h(ne);this.loading[te]=we;const ze=new AbortController;we.abort=ze;try{const Ge=yield this.loadVectorTile(ne,ze);if(delete this.loading[te],!Ge)return null;const et=Ge.rawData,Ie={};Ge.expires&&(Ie.expires=Ge.expires),Ge.cacheControl&&(Ie.cacheControl=Ge.cacheControl);const ht={};if(fe){const rt=fe.finish();rt&&(ht.resourceTiming=JSON.parse(JSON.stringify(rt)))}we.vectorTile=Ge.vectorTile;const _t=we.parse(Ge.vectorTile,this.layerIndex,this.availableImages,this.actor);this.loaded[te]=we,this.fetching[te]={rawTileData:et,cacheControl:Ie,resourceTiming:ht};try{const rt=yield _t;return o.e({rawTileData:et.slice(0)},rt,Ie,ht)}finally{delete this.fetching[te]}}catch(Ge){throw delete this.loading[te],we.status="done",this.loaded[te]=we,Ge}}))}reloadTile(ne){return o._(this,void 0,void 0,(function*(){const te=ne.uid;if(!this.loaded||!this.loaded[te])throw new Error("Should not be trying to reload a tile that was never loaded or has been removed");const fe=this.loaded[te];if(fe.showCollisionBoxes=ne.showCollisionBoxes,fe.status==="parsing"){const we=yield fe.parse(fe.vectorTile,this.layerIndex,this.availableImages,this.actor);let ze;if(this.fetching[te]){const{rawTileData:Ge,cacheControl:et,resourceTiming:Ie}=this.fetching[te];delete this.fetching[te],ze=o.e({rawTileData:Ge.slice(0)},we,et,Ie)}else ze=we;return ze}if(fe.status==="done"&&fe.vectorTile)return fe.parse(fe.vectorTile,this.layerIndex,this.availableImages,this.actor)}))}abortTile(ne){return o._(this,void 0,void 0,(function*(){const te=this.loading,fe=ne.uid;te&&te[fe]&&te[fe].abort&&(te[fe].abort.abort(),delete te[fe])}))}removeTile(ne){return o._(this,void 0,void 0,(function*(){this.loaded&&this.loaded[ne.uid]&&delete this.loaded[ne.uid]}))}}class g{constructor(){this.loaded={}}loadTile(ne){return o._(this,void 0,void 0,(function*(){const{uid:te,encoding:fe,rawImageData:we,redFactor:ze,greenFactor:Ge,blueFactor:et,baseShift:Ie}=ne,ht=we.width+2,_t=we.height+2,rt=o.b(we)?new o.R({width:ht,height:_t},yield o.bw(we,-1,-1,ht,_t)):we,Bt=new o.bx(te,rt,fe,ze,Ge,et,Ie);return this.loaded=this.loaded||{},this.loaded[te]=Bt,Bt}))}removeTile(ne){const te=this.loaded,fe=ne.uid;te&&te[fe]&&delete te[fe]}}function b(Oe,ne){if(Oe.length!==0){x(Oe[0],ne);for(var te=1;te<Oe.length;te++)x(Oe[te],!ne)}}function x(Oe,ne){for(var te=0,fe=0,we=0,ze=Oe.length,Ge=ze-1;we<ze;Ge=we++){var et=(Oe[we][0]-Oe[Ge][0])*(Oe[Ge][1]+Oe[we][1]),Ie=te+et;fe+=Math.abs(te)>=Math.abs(et)?te-Ie+et:et-Ie+te,te=Ie}te+fe>=0!=!!ne&&Oe.reverse()}var k=o.by((function Oe(ne,te){var fe,we=ne&&ne.type;if(we==="FeatureCollection")for(fe=0;fe<ne.features.length;fe++)Oe(ne.features[fe],te);else if(we==="GeometryCollection")for(fe=0;fe<ne.geometries.length;fe++)Oe(ne.geometries[fe],te);else if(we==="Feature")Oe(ne.geometry,te);else if(we==="Polygon")b(ne.coordinates,te);else if(we==="MultiPolygon")for(fe=0;fe<ne.coordinates.length;fe++)b(ne.coordinates[fe],te);return ne}));const T=o.bt.VectorTileFeature.prototype.toGeoJSON;var I={exports:{}},M=o.bz,B=o.bt.VectorTileFeature,j=Q;function Q(Oe,ne){this.options=ne||{},this.features=Oe,this.length=Oe.length}function Z(Oe,ne){this.id=typeof Oe.id=="number"?Oe.id:void 0,this.type=Oe.type,this.rawGeometry=Oe.type===1?[Oe.geometry]:Oe.geometry,this.properties=Oe.tags,this.extent=ne||4096}Q.prototype.feature=function(Oe){return new Z(this.features[Oe],this.options.extent)},Z.prototype.loadGeometry=function(){var Oe=this.rawGeometry;this.geometry=[];for(var ne=0;ne<Oe.length;ne++){for(var te=Oe[ne],fe=[],we=0;we<te.length;we++)fe.push(new M(te[we][0],te[we][1]));this.geometry.push(fe)}return this.geometry},Z.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var Oe=this.geometry,ne=1/0,te=-1/0,fe=1/0,we=-1/0,ze=0;ze<Oe.length;ze++)for(var Ge=Oe[ze],et=0;et<Ge.length;et++){var Ie=Ge[et];ne=Math.min(ne,Ie.x),te=Math.max(te,Ie.x),fe=Math.min(fe,Ie.y),we=Math.max(we,Ie.y)}return[ne,fe,te,we]},Z.prototype.toGeoJSON=B.prototype.toGeoJSON;var q=o.bA,J=j;function oe(Oe){var ne=new q;return(function(te,fe){for(var we in te.layers)fe.writeMessage(3,me,te.layers[we])})(Oe,ne),ne.finish()}function me(Oe,ne){var te;ne.writeVarintField(15,Oe.version||1),ne.writeStringField(1,Oe.name||""),ne.writeVarintField(5,Oe.extent||4096);var fe={keys:[],values:[],keycache:{},valuecache:{}};for(te=0;te<Oe.length;te++)fe.feature=Oe.feature(te),ne.writeMessage(2,ae,fe);var we=fe.keys;for(te=0;te<we.length;te++)ne.writeStringField(3,we[te]);var ze=fe.values;for(te=0;te<ze.length;te++)ne.writeMessage(4,Se,ze[te])}function ae(Oe,ne){var te=Oe.feature;te.id!==void 0&&ne.writeVarintField(1,te.id),ne.writeMessage(2,ce,Oe),ne.writeVarintField(3,te.type),ne.writeMessage(4,xe,te)}function ce(Oe,ne){var te=Oe.feature,fe=Oe.keys,we=Oe.values,ze=Oe.keycache,Ge=Oe.valuecache;for(var et in te.properties){var Ie=te.properties[et],ht=ze[et];if(Ie!==null){ht===void 0&&(fe.push(et),ze[et]=ht=fe.length-1),ne.writeVarint(ht);var _t=typeof Ie;_t!=="string"&&_t!=="boolean"&&_t!=="number"&&(Ie=JSON.stringify(Ie));var rt=_t+":"+Ie,Bt=Ge[rt];Bt===void 0&&(we.push(Ie),Ge[rt]=Bt=we.length-1),ne.writeVarint(Bt)}}}function se(Oe,ne){return(ne<<3)+(7&Oe)}function ge(Oe){return Oe<<1^Oe>>31}function xe(Oe,ne){for(var te=Oe.loadGeometry(),fe=Oe.type,we=0,ze=0,Ge=te.length,et=0;et<Ge;et++){var Ie=te[et],ht=1;fe===1&&(ht=Ie.length),ne.writeVarint(se(1,ht));for(var _t=fe===3?Ie.length-1:Ie.length,rt=0;rt<_t;rt++){rt===1&&fe!==1&&ne.writeVarint(se(2,_t-1));var Bt=Ie[rt].x-we,On=Ie[rt].y-ze;ne.writeVarint(ge(Bt)),ne.writeVarint(ge(On)),we+=Bt,ze+=On}fe===3&&ne.writeVarint(se(7,1))}}function Se(Oe,ne){var te=typeof Oe;te==="string"?ne.writeStringField(1,Oe):te==="boolean"?ne.writeBooleanField(7,Oe):te==="number"&&(Oe%1!=0?ne.writeDoubleField(3,Oe):Oe<0?ne.writeSVarintField(6,Oe):ne.writeVarintField(5,Oe))}I.exports=oe,I.exports.fromVectorTileJs=oe,I.exports.fromGeojsonVt=function(Oe,ne){ne=ne||{};var te={};for(var fe in Oe)te[fe]=new J(Oe[fe].features,ne),te[fe].name=fe,te[fe].version=ne.version,te[fe].extent=ne.extent;return oe({layers:te})},I.exports.GeoJSONWrapper=J;var De=o.by(I.exports);const He={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:Oe=>Oe},Ue=Math.fround||(yt=new Float32Array(1),Oe=>(yt[0]=+Oe,yt[0]));var yt;const We=3,at=5,ut=6;class wt{constructor(ne){this.options=Object.assign(Object.create(He),ne),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(ne){const{log:te,minZoom:fe,maxZoom:we}=this.options;te&&console.time("total time");const ze=`prepare ${ne.length} points`;te&&console.time(ze),this.points=ne;const Ge=[];for(let Ie=0;Ie<ne.length;Ie++){const ht=ne[Ie];if(!ht.geometry)continue;const[_t,rt]=ht.geometry.coordinates,Bt=Ue(Yt(_t)),On=Ue(Ft(rt));Ge.push(Bt,On,1/0,Ie,-1,1),this.options.reduce&&Ge.push(0)}let et=this.trees[we+1]=this._createTree(Ge);te&&console.timeEnd(ze);for(let Ie=we;Ie>=fe;Ie--){const ht=+Date.now();et=this.trees[Ie]=this._createTree(this._cluster(et,Ie)),te&&console.log("z%d: %d clusters in %dms",Ie,et.numItems,+Date.now()-ht)}return te&&console.timeEnd("total time"),this}getClusters(ne,te){let fe=((ne[0]+180)%360+360)%360-180;const we=Math.max(-90,Math.min(90,ne[1]));let ze=ne[2]===180?180:((ne[2]+180)%360+360)%360-180;const Ge=Math.max(-90,Math.min(90,ne[3]));if(ne[2]-ne[0]>=360)fe=-180,ze=180;else if(fe>ze){const rt=this.getClusters([fe,we,180,Ge],te),Bt=this.getClusters([-180,we,ze,Ge],te);return rt.concat(Bt)}const et=this.trees[this._limitZoom(te)],Ie=et.range(Yt(fe),Ft(Ge),Yt(ze),Ft(we)),ht=et.data,_t=[];for(const rt of Ie){const Bt=this.stride*rt;_t.push(ht[Bt+at]>1?ot(ht,Bt,this.clusterProps):this.points[ht[Bt+We]])}return _t}getChildren(ne){const te=this._getOriginId(ne),fe=this._getOriginZoom(ne),we="No cluster with the specified id.",ze=this.trees[fe];if(!ze)throw new Error(we);const Ge=ze.data;if(te*this.stride>=Ge.length)throw new Error(we);const et=this.options.radius/(this.options.extent*Math.pow(2,fe-1)),Ie=ze.within(Ge[te*this.stride],Ge[te*this.stride+1],et),ht=[];for(const _t of Ie){const rt=_t*this.stride;Ge[rt+4]===ne&&ht.push(Ge[rt+at]>1?ot(Ge,rt,this.clusterProps):this.points[Ge[rt+We]])}if(ht.length===0)throw new Error(we);return ht}getLeaves(ne,te,fe){const we=[];return this._appendLeaves(we,ne,te=te||10,fe=fe||0,0),we}getTile(ne,te,fe){const we=this.trees[this._limitZoom(ne)],ze=Math.pow(2,ne),{extent:Ge,radius:et}=this.options,Ie=et/Ge,ht=(fe-Ie)/ze,_t=(fe+1+Ie)/ze,rt={features:[]};return this._addTileFeatures(we.range((te-Ie)/ze,ht,(te+1+Ie)/ze,_t),we.data,te,fe,ze,rt),te===0&&this._addTileFeatures(we.range(1-Ie/ze,ht,1,_t),we.data,ze,fe,ze,rt),te===ze-1&&this._addTileFeatures(we.range(0,ht,Ie/ze,_t),we.data,-1,fe,ze,rt),rt.features.length?rt:null}getClusterExpansionZoom(ne){let te=this._getOriginZoom(ne)-1;for(;te<=this.options.maxZoom;){const fe=this.getChildren(ne);if(te++,fe.length!==1)break;ne=fe[0].properties.cluster_id}return te}_appendLeaves(ne,te,fe,we,ze){const Ge=this.getChildren(te);for(const et of Ge){const Ie=et.properties;if(Ie&&Ie.cluster?ze+Ie.point_count<=we?ze+=Ie.point_count:ze=this._appendLeaves(ne,Ie.cluster_id,fe,we,ze):ze<we?ze++:ne.push(et),ne.length===fe)break}return ze}_createTree(ne){const te=new o.av(ne.length/this.stride|0,this.options.nodeSize,Float32Array);for(let fe=0;fe<ne.length;fe+=this.stride)te.add(ne[fe],ne[fe+1]);return te.finish(),te.data=ne,te}_addTileFeatures(ne,te,fe,we,ze,Ge){for(const et of ne){const Ie=et*this.stride,ht=te[Ie+at]>1;let _t,rt,Bt;if(ht)_t=dt(te,Ie,this.clusterProps),rt=te[Ie],Bt=te[Ie+1];else{const Ir=this.points[te[Ie+We]];_t=Ir.properties;const[Gn,ur]=Ir.geometry.coordinates;rt=Yt(Gn),Bt=Ft(ur)}const On={type:1,geometry:[[Math.round(this.options.extent*(rt*ze-fe)),Math.round(this.options.extent*(Bt*ze-we))]],tags:_t};let In;In=ht||this.options.generateId?te[Ie+We]:this.points[te[Ie+We]].id,In!==void 0&&(On.id=In),Ge.features.push(On)}}_limitZoom(ne){return Math.max(this.options.minZoom,Math.min(Math.floor(+ne),this.options.maxZoom+1))}_cluster(ne,te){const{radius:fe,extent:we,reduce:ze,minPoints:Ge}=this.options,et=fe/(we*Math.pow(2,te)),Ie=ne.data,ht=[],_t=this.stride;for(let rt=0;rt<Ie.length;rt+=_t){if(Ie[rt+2]<=te)continue;Ie[rt+2]=te;const Bt=Ie[rt],On=Ie[rt+1],In=ne.within(Ie[rt],Ie[rt+1],et),Ir=Ie[rt+at];let Gn=Ir;for(const ur of In){const Cr=ur*_t;Ie[Cr+2]>te&&(Gn+=Ie[Cr+at])}if(Gn>Ir&&Gn>=Ge){let ur,Cr=Bt*Ir,ds=On*Ir,ji=-1;const gr=((rt/_t|0)<<5)+(te+1)+this.points.length;for(const hi of In){const an=hi*_t;if(Ie[an+2]<=te)continue;Ie[an+2]=te;const ye=Ie[an+at];Cr+=Ie[an]*ye,ds+=Ie[an+1]*ye,Ie[an+4]=gr,ze&&(ur||(ur=this._map(Ie,rt,!0),ji=this.clusterProps.length,this.clusterProps.push(ur)),ze(ur,this._map(Ie,an)))}Ie[rt+4]=gr,ht.push(Cr/Gn,ds/Gn,1/0,gr,-1,Gn),ze&&ht.push(ji)}else{for(let ur=0;ur<_t;ur++)ht.push(Ie[rt+ur]);if(Gn>1)for(const ur of In){const Cr=ur*_t;if(!(Ie[Cr+2]<=te)){Ie[Cr+2]=te;for(let ds=0;ds<_t;ds++)ht.push(Ie[Cr+ds])}}}}return ht}_getOriginId(ne){return ne-this.points.length>>5}_getOriginZoom(ne){return(ne-this.points.length)%32}_map(ne,te,fe){if(ne[te+at]>1){const Ge=this.clusterProps[ne[te+ut]];return fe?Object.assign({},Ge):Ge}const we=this.points[ne[te+We]].properties,ze=this.options.map(we);return fe&&ze===we?Object.assign({},ze):ze}}function ot(Oe,ne,te){return{type:"Feature",id:Oe[ne+We],properties:dt(Oe,ne,te),geometry:{type:"Point",coordinates:[(fe=Oe[ne],360*(fe-.5)),Ot(Oe[ne+1])]}};var fe}function dt(Oe,ne,te){const fe=Oe[ne+at],we=fe>=1e4?`${Math.round(fe/1e3)}k`:fe>=1e3?Math.round(fe/100)/10+"k":fe,ze=Oe[ne+ut],Ge=ze===-1?{}:Object.assign({},te[ze]);return Object.assign(Ge,{cluster:!0,cluster_id:Oe[ne+We],point_count:fe,point_count_abbreviated:we})}function Yt(Oe){return Oe/360+.5}function Ft(Oe){const ne=Math.sin(Oe*Math.PI/180),te=.5-.25*Math.log((1+ne)/(1-ne))/Math.PI;return te<0?0:te>1?1:te}function Ot(Oe){const ne=(180-360*Oe)*Math.PI/180;return 360*Math.atan(Math.exp(ne))/Math.PI-90}function Kt(Oe,ne,te,fe){let we=fe;const ze=ne+(te-ne>>1);let Ge,et=te-ne;const Ie=Oe[ne],ht=Oe[ne+1],_t=Oe[te],rt=Oe[te+1];for(let Bt=ne+3;Bt<te;Bt+=3){const On=Dn(Oe[Bt],Oe[Bt+1],Ie,ht,_t,rt);if(On>we)Ge=Bt,we=On;else if(On===we){const In=Math.abs(Bt-ze);In<et&&(Ge=Bt,et=In)}}we>fe&&(Ge-ne>3&&Kt(Oe,ne,Ge,fe),Oe[Ge+2]=we,te-Ge>3&&Kt(Oe,Ge,te,fe))}function Dn(Oe,ne,te,fe,we,ze){let Ge=we-te,et=ze-fe;if(Ge!==0||et!==0){const Ie=((Oe-te)*Ge+(ne-fe)*et)/(Ge*Ge+et*et);Ie>1?(te=we,fe=ze):Ie>0&&(te+=Ge*Ie,fe+=et*Ie)}return Ge=Oe-te,et=ne-fe,Ge*Ge+et*et}function Ut(Oe,ne,te,fe){const we={id:Oe??null,type:ne,geometry:te,tags:fe,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};if(ne==="Point"||ne==="MultiPoint"||ne==="LineString")At(we,te);else if(ne==="Polygon")At(we,te[0]);else if(ne==="MultiLineString")for(const ze of te)At(we,ze);else if(ne==="MultiPolygon")for(const ze of te)At(we,ze[0]);return we}function At(Oe,ne){for(let te=0;te<ne.length;te+=3)Oe.minX=Math.min(Oe.minX,ne[te]),Oe.minY=Math.min(Oe.minY,ne[te+1]),Oe.maxX=Math.max(Oe.maxX,ne[te]),Oe.maxY=Math.max(Oe.maxY,ne[te+1])}function zt(Oe,ne,te,fe){if(!ne.geometry)return;const we=ne.geometry.coordinates;if(we&&we.length===0)return;const ze=ne.geometry.type,Ge=Math.pow(te.tolerance/((1<<te.maxZoom)*te.extent),2);let et=[],Ie=ne.id;if(te.promoteId?Ie=ne.properties[te.promoteId]:te.generateId&&(Ie=fe||0),ze==="Point")nn(we,et);else if(ze==="MultiPoint")for(const ht of we)nn(ht,et);else if(ze==="LineString")Ze(we,et,Ge,!1);else if(ze==="MultiLineString"){if(te.lineMetrics){for(const ht of we)et=[],Ze(ht,et,Ge,!1),Oe.push(Ut(Ie,"LineString",et,ne.properties));return}cn(we,et,Ge,!1)}else if(ze==="Polygon")cn(we,et,Ge,!0);else{if(ze!=="MultiPolygon"){if(ze==="GeometryCollection"){for(const ht of ne.geometry.geometries)zt(Oe,{id:Ie,geometry:ht,properties:ne.properties},te,fe);return}throw new Error("Input data is not a valid GeoJSON object.")}for(const ht of we){const _t=[];cn(ht,_t,Ge,!0),et.push(_t)}}Oe.push(Ut(Ie,ze,et,ne.properties))}function nn(Oe,ne){ne.push(Fn(Oe[0]),An(Oe[1]),0)}function Ze(Oe,ne,te,fe){let we,ze,Ge=0;for(let Ie=0;Ie<Oe.length;Ie++){const ht=Fn(Oe[Ie][0]),_t=An(Oe[Ie][1]);ne.push(ht,_t,0),Ie>0&&(Ge+=fe?(we*_t-ht*ze)/2:Math.sqrt(Math.pow(ht-we,2)+Math.pow(_t-ze,2))),we=ht,ze=_t}const et=ne.length-3;ne[2]=1,Kt(ne,0,et,te),ne[et+2]=1,ne.size=Math.abs(Ge),ne.start=0,ne.end=ne.size}function cn(Oe,ne,te,fe){for(let we=0;we<Oe.length;we++){const ze=[];Ze(Oe[we],ze,te,fe),ne.push(ze)}}function Fn(Oe){return Oe/360+.5}function An(Oe){const ne=Math.sin(Oe*Math.PI/180),te=.5-.25*Math.log((1+ne)/(1-ne))/Math.PI;return te<0?0:te>1?1:te}function qn(Oe,ne,te,fe,we,ze,Ge,et){if(fe/=ne,ze>=(te/=ne)&&Ge<fe)return Oe;if(Ge<te||ze>=fe)return null;const Ie=[];for(const ht of Oe){const _t=ht.geometry;let rt=ht.type;const Bt=we===0?ht.minX:ht.minY,On=we===0?ht.maxX:ht.maxY;if(Bt>=te&&On<fe){Ie.push(ht);continue}if(On<te||Bt>=fe)continue;let In=[];if(rt==="Point"||rt==="MultiPoint")Er(_t,In,te,fe,we);else if(rt==="LineString")Mi(_t,In,te,fe,we,!1,et.lineMetrics);else if(rt==="MultiLineString")fs(_t,In,te,fe,we,!1);else if(rt==="Polygon")fs(_t,In,te,fe,we,!0);else if(rt==="MultiPolygon")for(const Ir of _t){const Gn=[];fs(Ir,Gn,te,fe,we,!0),Gn.length&&In.push(Gn)}if(In.length){if(et.lineMetrics&&rt==="LineString"){for(const Ir of In)Ie.push(Ut(ht.id,rt,Ir,ht.tags));continue}rt!=="LineString"&&rt!=="MultiLineString"||(In.length===1?(rt="LineString",In=In[0]):rt="MultiLineString"),rt!=="Point"&&rt!=="MultiPoint"||(rt=In.length===3?"Point":"MultiPoint"),Ie.push(Ut(ht.id,rt,In,ht.tags))}}return Ie.length?Ie:null}function Er(Oe,ne,te,fe,we){for(let ze=0;ze<Oe.length;ze+=3){const Ge=Oe[ze+we];Ge>=te&&Ge<=fe&&Hr(ne,Oe[ze],Oe[ze+1],Oe[ze+2])}}function Mi(Oe,ne,te,fe,we,ze,Ge){let et=gi(Oe);const Ie=we===0?uo:ei;let ht,_t,rt=Oe.start;for(let Gn=0;Gn<Oe.length-3;Gn+=3){const ur=Oe[Gn],Cr=Oe[Gn+1],ds=Oe[Gn+2],ji=Oe[Gn+3],gr=Oe[Gn+4],hi=we===0?ur:Cr,an=we===0?ji:gr;let ye=!1;Ge&&(ht=Math.sqrt(Math.pow(ur-ji,2)+Math.pow(Cr-gr,2))),hi<te?an>te&&(_t=Ie(et,ur,Cr,ji,gr,te),Ge&&(et.start=rt+ht*_t)):hi>fe?an<fe&&(_t=Ie(et,ur,Cr,ji,gr,fe),Ge&&(et.start=rt+ht*_t)):Hr(et,ur,Cr,ds),an<te&&hi>=te&&(_t=Ie(et,ur,Cr,ji,gr,te),ye=!0),an>fe&&hi<=fe&&(_t=Ie(et,ur,Cr,ji,gr,fe),ye=!0),!ze&&ye&&(Ge&&(et.end=rt+ht*_t),ne.push(et),et=gi(Oe)),Ge&&(rt+=ht)}let Bt=Oe.length-3;const On=Oe[Bt],In=Oe[Bt+1],Ir=we===0?On:In;Ir>=te&&Ir<=fe&&Hr(et,On,In,Oe[Bt+2]),Bt=et.length-3,ze&&Bt>=3&&(et[Bt]!==et[0]||et[Bt+1]!==et[1])&&Hr(et,et[0],et[1],et[2]),et.length&&ne.push(et)}function gi(Oe){const ne=[];return ne.size=Oe.size,ne.start=Oe.start,ne.end=Oe.end,ne}function fs(Oe,ne,te,fe,we,ze){for(const Ge of Oe)Mi(Ge,ne,te,fe,we,ze,!1)}function Hr(Oe,ne,te,fe){Oe.push(ne,te,fe)}function uo(Oe,ne,te,fe,we,ze){const Ge=(ze-ne)/(fe-ne);return Hr(Oe,ze,te+(we-te)*Ge,1),Ge}function ei(Oe,ne,te,fe,we,ze){const Ge=(ze-te)/(we-te);return Hr(Oe,ne+(fe-ne)*Ge,ze,1),Ge}function Ct(Oe,ne){const te=[];for(let fe=0;fe<Oe.length;fe++){const we=Oe[fe],ze=we.type;let Ge;if(ze==="Point"||ze==="MultiPoint"||ze==="LineString")Ge=Qi(we.geometry,ne);else if(ze==="MultiLineString"||ze==="Polygon"){Ge=[];for(const et of we.geometry)Ge.push(Qi(et,ne))}else if(ze==="MultiPolygon"){Ge=[];for(const et of we.geometry){const Ie=[];for(const ht of et)Ie.push(Qi(ht,ne));Ge.push(Ie)}}te.push(Ut(we.id,ze,Ge,we.tags))}return te}function Qi(Oe,ne){const te=[];te.size=Oe.size,Oe.start!==void 0&&(te.start=Oe.start,te.end=Oe.end);for(let fe=0;fe<Oe.length;fe+=3)te.push(Oe[fe]+ne,Oe[fe+1],Oe[fe+2]);return te}function ki(Oe,ne){if(Oe.transformed)return Oe;const te=1<<Oe.z,fe=Oe.x,we=Oe.y;for(const ze of Oe.features){const Ge=ze.geometry,et=ze.type;if(ze.geometry=[],et===1)for(let Ie=0;Ie<Ge.length;Ie+=2)ze.geometry.push(js(Ge[Ie],Ge[Ie+1],ne,te,fe,we));else for(let Ie=0;Ie<Ge.length;Ie++){const ht=[];for(let _t=0;_t<Ge[Ie].length;_t+=2)ht.push(js(Ge[Ie][_t],Ge[Ie][_t+1],ne,te,fe,we));ze.geometry.push(ht)}}return Oe.transformed=!0,Oe}function js(Oe,ne,te,fe,we,ze){return[Math.round(te*(Oe*fe-we)),Math.round(te*(ne*fe-ze))]}function Co(Oe,ne,te,fe,we){const ze=ne===we.maxZoom?0:we.tolerance/((1<<ne)*we.extent),Ge={features:[],numPoints:0,numSimplified:0,numFeatures:Oe.length,source:null,x:te,y:fe,z:ne,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0};for(const et of Oe)Lt(Ge,et,ze,we);return Ge}function Lt(Oe,ne,te,fe){const we=ne.geometry,ze=ne.type,Ge=[];if(Oe.minX=Math.min(Oe.minX,ne.minX),Oe.minY=Math.min(Oe.minY,ne.minY),Oe.maxX=Math.max(Oe.maxX,ne.maxX),Oe.maxY=Math.max(Oe.maxY,ne.maxY),ze==="Point"||ze==="MultiPoint")for(let et=0;et<we.length;et+=3)Ge.push(we[et],we[et+1]),Oe.numPoints++,Oe.numSimplified++;else if(ze==="LineString")yn(Ge,we,Oe,te,!1,!1);else if(ze==="MultiLineString"||ze==="Polygon")for(let et=0;et<we.length;et++)yn(Ge,we[et],Oe,te,ze==="Polygon",et===0);else if(ze==="MultiPolygon")for(let et=0;et<we.length;et++){const Ie=we[et];for(let ht=0;ht<Ie.length;ht++)yn(Ge,Ie[ht],Oe,te,!0,ht===0)}if(Ge.length){let et=ne.tags||null;if(ze==="LineString"&&fe.lineMetrics){et={};for(const ht in ne.tags)et[ht]=ne.tags[ht];et.mapbox_clip_start=we.start/we.size,et.mapbox_clip_end=we.end/we.size}const Ie={geometry:Ge,type:ze==="Polygon"||ze==="MultiPolygon"?3:ze==="LineString"||ze==="MultiLineString"?2:1,tags:et};ne.id!==null&&(Ie.id=ne.id),Oe.features.push(Ie)}}function yn(Oe,ne,te,fe,we,ze){const Ge=fe*fe;if(fe>0&&ne.size<(we?Ge:fe))return void(te.numPoints+=ne.length/3);const et=[];for(let Ie=0;Ie<ne.length;Ie+=3)(fe===0||ne[Ie+2]>Ge)&&(te.numSimplified++,et.push(ne[Ie],ne[Ie+1])),te.numPoints++;we&&(function(Ie,ht){let _t=0;for(let rt=0,Bt=Ie.length,On=Bt-2;rt<Bt;On=rt,rt+=2)_t+=(Ie[rt]-Ie[On])*(Ie[rt+1]+Ie[On+1]);if(_t>0===ht)for(let rt=0,Bt=Ie.length;rt<Bt/2;rt+=2){const On=Ie[rt],In=Ie[rt+1];Ie[rt]=Ie[Bt-2-rt],Ie[rt+1]=Ie[Bt-1-rt],Ie[Bt-2-rt]=On,Ie[Bt-1-rt]=In}})(et,ze),Oe.push(et)}const rn={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0};class Xr{constructor(ne,te){const fe=(te=this.options=(function(ze,Ge){for(const et in Ge)ze[et]=Ge[et];return ze})(Object.create(rn),te)).debug;if(fe&&console.time("preprocess data"),te.maxZoom<0||te.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(te.promoteId&&te.generateId)throw new Error("promoteId and generateId cannot be used together.");let we=(function(ze,Ge){const et=[];if(ze.type==="FeatureCollection")for(let Ie=0;Ie<ze.features.length;Ie++)zt(et,ze.features[Ie],Ge,Ie);else zt(et,ze.type==="Feature"?ze:{geometry:ze},Ge);return et})(ne,te);this.tiles={},this.tileCoords=[],fe&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",te.indexMaxZoom,te.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),we=(function(ze,Ge){const et=Ge.buffer/Ge.extent;let Ie=ze;const ht=qn(ze,1,-1-et,et,0,-1,2,Ge),_t=qn(ze,1,1-et,2+et,0,-1,2,Ge);return(ht||_t)&&(Ie=qn(ze,1,-et,1+et,0,-1,2,Ge)||[],ht&&(Ie=Ct(ht,1).concat(Ie)),_t&&(Ie=Ie.concat(Ct(_t,-1)))),Ie})(we,te),we.length&&this.splitTile(we,0,0,0),fe&&(we.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}splitTile(ne,te,fe,we,ze,Ge,et){const Ie=[ne,te,fe,we],ht=this.options,_t=ht.debug;for(;Ie.length;){we=Ie.pop(),fe=Ie.pop(),te=Ie.pop(),ne=Ie.pop();const rt=1<<te,Bt=si(te,fe,we);let On=this.tiles[Bt];if(!On&&(_t>1&&console.time("creation"),On=this.tiles[Bt]=Co(ne,te,fe,we,ht),this.tileCoords.push({z:te,x:fe,y:we}),_t)){_t>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",te,fe,we,On.numFeatures,On.numPoints,On.numSimplified),console.timeEnd("creation"));const ye=`z${te}`;this.stats[ye]=(this.stats[ye]||0)+1,this.total++}if(On.source=ne,ze==null){if(te===ht.indexMaxZoom||On.numPoints<=ht.indexMaxPoints)continue}else{if(te===ht.maxZoom||te===ze)continue;if(ze!=null){const ye=ze-te;if(fe!==Ge>>ye||we!==et>>ye)continue}}if(On.source=null,ne.length===0)continue;_t>1&&console.time("clipping");const In=.5*ht.buffer/ht.extent,Ir=.5-In,Gn=.5+In,ur=1+In;let Cr=null,ds=null,ji=null,gr=null,hi=qn(ne,rt,fe-In,fe+Gn,0,On.minX,On.maxX,ht),an=qn(ne,rt,fe+Ir,fe+ur,0,On.minX,On.maxX,ht);ne=null,hi&&(Cr=qn(hi,rt,we-In,we+Gn,1,On.minY,On.maxY,ht),ds=qn(hi,rt,we+Ir,we+ur,1,On.minY,On.maxY,ht),hi=null),an&&(ji=qn(an,rt,we-In,we+Gn,1,On.minY,On.maxY,ht),gr=qn(an,rt,we+Ir,we+ur,1,On.minY,On.maxY,ht),an=null),_t>1&&console.timeEnd("clipping"),Ie.push(Cr||[],te+1,2*fe,2*we),Ie.push(ds||[],te+1,2*fe,2*we+1),Ie.push(ji||[],te+1,2*fe+1,2*we),Ie.push(gr||[],te+1,2*fe+1,2*we+1)}}getTile(ne,te,fe){ne=+ne,te=+te,fe=+fe;const we=this.options,{extent:ze,debug:Ge}=we;if(ne<0||ne>24)return null;const et=1<<ne,Ie=si(ne,te=te+et&et-1,fe);if(this.tiles[Ie])return ki(this.tiles[Ie],ze);Ge>1&&console.log("drilling down to z%d-%d-%d",ne,te,fe);let ht,_t=ne,rt=te,Bt=fe;for(;!ht&&_t>0;)_t--,rt>>=1,Bt>>=1,ht=this.tiles[si(_t,rt,Bt)];return ht&&ht.source?(Ge>1&&(console.log("found parent tile z%d-%d-%d",_t,rt,Bt),console.time("drilling down")),this.splitTile(ht.source,_t,rt,Bt,ne,te,fe),Ge>1&&console.timeEnd("drilling down"),this.tiles[Ie]?ki(this.tiles[Ie],ze):null):null}}function si(Oe,ne,te){return 32*((1<<Oe)*te+ne)+Oe}function Tn(Oe,ne){return ne?Oe.properties[ne]:Oe.id}function Ms(Oe,ne){if(Oe==null)return!0;if(Oe.type==="Feature")return Tn(Oe,ne)!=null;if(Oe.type==="FeatureCollection"){const te=new Set;for(const fe of Oe.features){const we=Tn(fe,ne);if(we==null||te.has(we))return!1;te.add(we)}return!0}return!1}function Ri(Oe,ne){const te=new Map;if(Oe!=null)if(Oe.type==="Feature")te.set(Tn(Oe,ne),Oe);else for(const fe of Oe.features)te.set(Tn(fe,ne),fe);return te}class oi extends p{constructor(){super(...arguments),this._dataUpdateable=new Map}loadVectorTile(ne,te){return o._(this,void 0,void 0,(function*(){const fe=ne.tileID.canonical;if(!this._geoJSONIndex)throw new Error("Unable to parse the data into a cluster or geojson");const we=this._geoJSONIndex.getTile(fe.z,fe.x,fe.y);if(!we)return null;const ze=new class{constructor(et){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=o.X,this.length=et.length,this._features=et}feature(et){return new class{constructor(Ie){this._feature=Ie,this.extent=o.X,this.type=Ie.type,this.properties=Ie.tags,"id"in Ie&&!isNaN(Ie.id)&&(this.id=parseInt(Ie.id,10))}loadGeometry(){if(this._feature.type===1){const Ie=[];for(const ht of this._feature.geometry)Ie.push([new o.P(ht[0],ht[1])]);return Ie}{const Ie=[];for(const ht of this._feature.geometry){const _t=[];for(const rt of ht)_t.push(new o.P(rt[0],rt[1]));Ie.push(_t)}return Ie}}toGeoJSON(Ie,ht,_t){return T.call(this,Ie,ht,_t)}}(this._features[et])}}(we.features);let Ge=De(ze);return Ge.byteOffset===0&&Ge.byteLength===Ge.buffer.byteLength||(Ge=new Uint8Array(Ge)),{vectorTile:ze,rawData:Ge.buffer}}))}loadData(ne){return o._(this,void 0,void 0,(function*(){var te;(te=this._pendingRequest)===null||te===void 0||te.abort();const fe=!!(ne&&ne.request&&ne.request.collectResourceTiming)&&new o.bv(ne.request);this._pendingRequest=new AbortController;try{this._pendingData=this.loadAndProcessGeoJSON(ne,this._pendingRequest),this._geoJSONIndex=ne.cluster?new wt((function({superclusterOptions:Ge,clusterProperties:et}){if(!et||!Ge)return Ge;const Ie={},ht={},_t={accumulated:null,zoom:0},rt={properties:null},Bt=Object.keys(et);for(const On of Bt){const[In,Ir]=et[On],Gn=o.bC(Ir),ur=o.bC(typeof In=="string"?[In,["accumulated"],["get",On]]:In);Ie[On]=Gn.value,ht[On]=ur.value}return Ge.map=On=>{rt.properties=On;const In={};for(const Ir of Bt)In[Ir]=Ie[Ir].evaluate(_t,rt);return In},Ge.reduce=(On,In)=>{rt.properties=In;for(const Ir of Bt)_t.accumulated=On[Ir],On[Ir]=ht[Ir].evaluate(_t,rt)},Ge})(ne)).load((yield this._pendingData).features):(we=yield this._pendingData,new Xr(we,ne.geojsonVtOptions)),this.loaded={};const ze={};if(fe){const Ge=fe.finish();Ge&&(ze.resourceTiming={},ze.resourceTiming[ne.source]=JSON.parse(JSON.stringify(Ge)))}return ze}catch(ze){if(delete this._pendingRequest,o.bB(ze))return{abandoned:!0};throw ze}var we}))}getData(){return o._(this,void 0,void 0,(function*(){return this._pendingData}))}reloadTile(ne){const te=this.loaded;return te&&te[ne.uid]?super.reloadTile(ne):this.loadTile(ne)}loadAndProcessGeoJSON(ne,te){return o._(this,void 0,void 0,(function*(){let fe=yield this.loadGeoJSON(ne,te);if(delete this._pendingRequest,typeof fe!="object")throw new Error(`Input data given to '${ne.source}' is not a valid GeoJSON object.`);if(k(fe,!0),ne.filter){const we=o.bC(ne.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(we.result==="error")throw new Error(we.value.map((ze=>`${ze.key}: ${ze.message}`)).join(", "));fe={type:"FeatureCollection",features:fe.features.filter((ze=>we.value.evaluate({zoom:0},ze)))}}return fe}))}loadGeoJSON(ne,te){return o._(this,void 0,void 0,(function*(){const{promoteId:fe}=ne;if(ne.request){const we=yield o.h(ne.request,te);return this._dataUpdateable=Ms(we.data,fe)?Ri(we.data,fe):void 0,we.data}if(typeof ne.data=="string")try{const we=JSON.parse(ne.data);return this._dataUpdateable=Ms(we,fe)?Ri(we,fe):void 0,we}catch{throw new Error(`Input data given to '${ne.source}' is not a valid GeoJSON object.`)}if(!ne.dataDiff)throw new Error(`Input data given to '${ne.source}' is not a valid GeoJSON object.`);if(!this._dataUpdateable)throw new Error(`Cannot update existing geojson data in ${ne.source}`);return(function(we,ze,Ge){var et,Ie,ht,_t;if(ze.removeAll&&we.clear(),ze.remove)for(const rt of ze.remove)we.delete(rt);if(ze.add)for(const rt of ze.add){const Bt=Tn(rt,Ge);Bt!=null&&we.set(Bt,rt)}if(ze.update)for(const rt of ze.update){let Bt=we.get(rt.id);if(Bt==null)continue;const On=!rt.removeAllProperties&&(((et=rt.removeProperties)===null||et===void 0?void 0:et.length)>0||((Ie=rt.addOrUpdateProperties)===null||Ie===void 0?void 0:Ie.length)>0);if((rt.newGeometry||rt.removeAllProperties||On)&&(Bt=Object.assign({},Bt),we.set(rt.id,Bt),On&&(Bt.properties=Object.assign({},Bt.properties))),rt.newGeometry&&(Bt.geometry=rt.newGeometry),rt.removeAllProperties)Bt.properties={};else if(((ht=rt.removeProperties)===null||ht===void 0?void 0:ht.length)>0)for(const In of rt.removeProperties)Object.prototype.hasOwnProperty.call(Bt.properties,In)&&delete Bt.properties[In];if(((_t=rt.addOrUpdateProperties)===null||_t===void 0?void 0:_t.length)>0)for(const{key:In,value:Ir}of rt.addOrUpdateProperties)Bt.properties[In]=Ir}})(this._dataUpdateable,ne.dataDiff,fe),{type:"FeatureCollection",features:Array.from(this._dataUpdateable.values())}}))}removeSource(ne){return o._(this,void 0,void 0,(function*(){this._pendingRequest&&this._pendingRequest.abort()}))}getClusterExpansionZoom(ne){return this._geoJSONIndex.getClusterExpansionZoom(ne.clusterId)}getClusterChildren(ne){return this._geoJSONIndex.getChildren(ne.clusterId)}getClusterLeaves(ne){return this._geoJSONIndex.getLeaves(ne.clusterId,ne.limit,ne.offset)}}class Fi{constructor(ne){this.self=ne,this.actor=new o.F(ne),this.layerIndexes={},this.availableImages={},this.workerSources={},this.demWorkerSources={},this.externalWorkerSourceTypes={},this.self.registerWorkerSource=(te,fe)=>{if(this.externalWorkerSourceTypes[te])throw new Error(`Worker source with name "${te}" already registered.`);this.externalWorkerSourceTypes[te]=fe},this.self.addProtocol=o.bi,this.self.removeProtocol=o.bj,this.self.registerRTLTextPlugin=te=>{if(o.bD.isParsed())throw new Error("RTL text plugin already registered.");o.bD.setMethods(te)},this.actor.registerMessageHandler("LDT",((te,fe)=>this._getDEMWorkerSource(te,fe.source).loadTile(fe))),this.actor.registerMessageHandler("RDT",((te,fe)=>o._(this,void 0,void 0,(function*(){this._getDEMWorkerSource(te,fe.source).removeTile(fe)})))),this.actor.registerMessageHandler("GCEZ",((te,fe)=>o._(this,void 0,void 0,(function*(){return this._getWorkerSource(te,fe.type,fe.source).getClusterExpansionZoom(fe)})))),this.actor.registerMessageHandler("GCC",((te,fe)=>o._(this,void 0,void 0,(function*(){return this._getWorkerSource(te,fe.type,fe.source).getClusterChildren(fe)})))),this.actor.registerMessageHandler("GCL",((te,fe)=>o._(this,void 0,void 0,(function*(){return this._getWorkerSource(te,fe.type,fe.source).getClusterLeaves(fe)})))),this.actor.registerMessageHandler("LD",((te,fe)=>this._getWorkerSource(te,fe.type,fe.source).loadData(fe))),this.actor.registerMessageHandler("GD",((te,fe)=>this._getWorkerSource(te,fe.type,fe.source).getData())),this.actor.registerMessageHandler("LT",((te,fe)=>this._getWorkerSource(te,fe.type,fe.source).loadTile(fe))),this.actor.registerMessageHandler("RT",((te,fe)=>this._getWorkerSource(te,fe.type,fe.source).reloadTile(fe))),this.actor.registerMessageHandler("AT",((te,fe)=>this._getWorkerSource(te,fe.type,fe.source).abortTile(fe))),this.actor.registerMessageHandler("RMT",((te,fe)=>this._getWorkerSource(te,fe.type,fe.source).removeTile(fe))),this.actor.registerMessageHandler("RS",((te,fe)=>o._(this,void 0,void 0,(function*(){if(!this.workerSources[te]||!this.workerSources[te][fe.type]||!this.workerSources[te][fe.type][fe.source])return;const we=this.workerSources[te][fe.type][fe.source];delete this.workerSources[te][fe.type][fe.source],we.removeSource!==void 0&&we.removeSource(fe)})))),this.actor.registerMessageHandler("RM",(te=>o._(this,void 0,void 0,(function*(){delete this.layerIndexes[te],delete this.availableImages[te],delete this.workerSources[te],delete this.demWorkerSources[te]})))),this.actor.registerMessageHandler("SR",((te,fe)=>o._(this,void 0,void 0,(function*(){this.referrer=fe})))),this.actor.registerMessageHandler("SRPS",((te,fe)=>this._syncRTLPluginState(te,fe))),this.actor.registerMessageHandler("IS",((te,fe)=>o._(this,void 0,void 0,(function*(){this.self.importScripts(fe)})))),this.actor.registerMessageHandler("SI",((te,fe)=>this._setImages(te,fe))),this.actor.registerMessageHandler("UL",((te,fe)=>o._(this,void 0,void 0,(function*(){this._getLayerIndex(te).update(fe.layers,fe.removedIds)})))),this.actor.registerMessageHandler("SL",((te,fe)=>o._(this,void 0,void 0,(function*(){this._getLayerIndex(te).replace(fe)}))))}_setImages(ne,te){return o._(this,void 0,void 0,(function*(){this.availableImages[ne]=te;for(const fe in this.workerSources[ne]){const we=this.workerSources[ne][fe];for(const ze in we)we[ze].availableImages=te}}))}_syncRTLPluginState(ne,te){return o._(this,void 0,void 0,(function*(){if(o.bD.isParsed())return o.bD.getState();if(te.pluginStatus!=="loading")return o.bD.setState(te),te;const fe=te.pluginURL;if(this.self.importScripts(fe),o.bD.isParsed()){const we={pluginStatus:"loaded",pluginURL:fe};return o.bD.setState(we),we}throw o.bD.setState({pluginStatus:"error",pluginURL:""}),new Error(`RTL Text Plugin failed to import scripts from ${fe}`)}))}_getAvailableImages(ne){let te=this.availableImages[ne];return te||(te=[]),te}_getLayerIndex(ne){let te=this.layerIndexes[ne];return te||(te=this.layerIndexes[ne]=new a),te}_getWorkerSource(ne,te,fe){if(this.workerSources[ne]||(this.workerSources[ne]={}),this.workerSources[ne][te]||(this.workerSources[ne][te]={}),!this.workerSources[ne][te][fe]){const we={sendAsync:(ze,Ge)=>(ze.targetMapId=ne,this.actor.sendAsync(ze,Ge))};switch(te){case"vector":this.workerSources[ne][te][fe]=new p(we,this._getLayerIndex(ne),this._getAvailableImages(ne));break;case"geojson":this.workerSources[ne][te][fe]=new oi(we,this._getLayerIndex(ne),this._getAvailableImages(ne));break;default:this.workerSources[ne][te][fe]=new this.externalWorkerSourceTypes[te](we,this._getLayerIndex(ne),this._getAvailableImages(ne))}}return this.workerSources[ne][te][fe]}_getDEMWorkerSource(ne,te){return this.demWorkerSources[ne]||(this.demWorkerSources[ne]={}),this.demWorkerSources[ne][te]||(this.demWorkerSources[ne][te]=new g),this.demWorkerSources[ne][te]}}return o.i(self)&&(self.worker=new Fi(self)),Fi})),i("index",["exports","./shared"],(function(o,a){var l="4.7.1";let h,f;const p={now:typeof performance<"u"&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),frameAsync:E=>new Promise(((u,y)=>{const w=requestAnimationFrame(u);E.signal.addEventListener("abort",(()=>{cancelAnimationFrame(w),y(a.c())}))})),getImageData(E,u=0){return this.getImageCanvasContext(E).getImageData(-u,-u,E.width+2*u,E.height+2*u)},getImageCanvasContext(E){const u=window.document.createElement("canvas"),y=u.getContext("2d",{willReadFrequently:!0});if(!y)throw new Error("failed to create canvas 2d context");return u.width=E.width,u.height=E.height,y.drawImage(E,0,0,E.width,E.height),y},resolveURL:E=>(h||(h=document.createElement("a")),h.href=E,h.href),hardwareConcurrency:typeof navigator<"u"&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return!!matchMedia&&(f==null&&(f=matchMedia("(prefers-reduced-motion: reduce)")),f.matches)}};class g{static testProp(u){if(!g.docStyle)return u[0];for(let y=0;y<u.length;y++)if(u[y]in g.docStyle)return u[y];return u[0]}static create(u,y,w){const O=window.document.createElement(u);return y!==void 0&&(O.className=y),w&&w.appendChild(O),O}static createNS(u,y){return window.document.createElementNS(u,y)}static disableDrag(){g.docStyle&&g.selectProp&&(g.userSelect=g.docStyle[g.selectProp],g.docStyle[g.selectProp]="none")}static enableDrag(){g.docStyle&&g.selectProp&&(g.docStyle[g.selectProp]=g.userSelect)}static setTransform(u,y){u.style[g.transformProp]=y}static addEventListener(u,y,w,O={}){u.addEventListener(y,w,"passive"in O?O:O.capture)}static removeEventListener(u,y,w,O={}){u.removeEventListener(y,w,"passive"in O?O:O.capture)}static suppressClickInternal(u){u.preventDefault(),u.stopPropagation(),window.removeEventListener("click",g.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",g.suppressClickInternal,!0),window.setTimeout((()=>{window.removeEventListener("click",g.suppressClickInternal,!0)}),0)}static getScale(u){const y=u.getBoundingClientRect();return{x:y.width/u.offsetWidth||1,y:y.height/u.offsetHeight||1,boundingClientRect:y}}static getPoint(u,y,w){const O=y.boundingClientRect;return new a.P((w.clientX-O.left)/y.x-u.clientLeft,(w.clientY-O.top)/y.y-u.clientTop)}static mousePos(u,y){const w=g.getScale(u);return g.getPoint(u,w,y)}static touchPos(u,y){const w=[],O=g.getScale(u);for(let A=0;A<y.length;A++)w.push(g.getPoint(u,O,y[A]));return w}static mouseButton(u){return u.button}static remove(u){u.parentNode&&u.parentNode.removeChild(u)}}g.docStyle=typeof window<"u"&&window.document&&window.document.documentElement.style,g.selectProp=g.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),g.transformProp=g.testProp(["transform","WebkitTransform"]);const b={supported:!1,testSupport:function(E){!T&&k&&(I?M(E):x=E)}};let x,k,T=!1,I=!1;function M(E){const u=E.createTexture();E.bindTexture(E.TEXTURE_2D,u);try{if(E.texImage2D(E.TEXTURE_2D,0,E.RGBA,E.RGBA,E.UNSIGNED_BYTE,k),E.isContextLost())return;b.supported=!0}catch{}E.deleteTexture(u),T=!0}var B;typeof document<"u"&&(k=document.createElement("img"),k.onload=()=>{x&&M(x),x=null,I=!0},k.onerror=()=>{T=!0,x=null},k.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA="),(function(E){let u,y,w,O;E.resetRequestQueue=()=>{u=[],y=0,w=0,O={}},E.addThrottleControl=U=>{const G=w++;return O[G]=U,G},E.removeThrottleControl=U=>{delete O[U],$()},E.getImage=(U,G,H=!0)=>new Promise(((K,le)=>{b.supported&&(U.headers||(U.headers={}),U.headers.accept="image/webp,*/*"),a.e(U,{type:"image"}),u.push({abortController:G,requestParameters:U,supportImageRefresh:H,state:"queued",onError:pe=>{le(pe)},onSuccess:pe=>{K(pe)}}),$()}));const A=U=>a._(this,void 0,void 0,(function*(){U.state="running";const{requestParameters:G,supportImageRefresh:H,onError:K,onSuccess:le,abortController:pe}=U,_e=H===!1&&!a.i(self)&&!a.g(G.url)&&(!G.headers||Object.keys(G.headers).reduce(((Le,Ne)=>Le&&Ne==="accept"),!0));y++;const Ee=_e?z(G,pe):a.m(G,pe);try{const Le=yield Ee;delete U.abortController,U.state="completed",Le.data instanceof HTMLImageElement||a.b(Le.data)?le(Le):Le.data&&le({data:yield(Me=Le.data,typeof createImageBitmap=="function"?a.d(Me):a.f(Me)),cacheControl:Le.cacheControl,expires:Le.expires})}catch(Le){delete U.abortController,K(Le)}finally{y--,$()}var Me})),$=()=>{const U=(()=>{for(const G of Object.keys(O))if(O[G]())return!0;return!1})()?a.a.MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:a.a.MAX_PARALLEL_IMAGE_REQUESTS;for(let G=y;G<U&&u.length>0;G++){const H=u.shift();H.abortController.signal.aborted?G--:A(H)}},z=(U,G)=>new Promise(((H,K)=>{const le=new Image,pe=U.url,_e=U.credentials;_e&&_e==="include"?le.crossOrigin="use-credentials":(_e&&_e==="same-origin"||!a.s(pe))&&(le.crossOrigin="anonymous"),G.signal.addEventListener("abort",(()=>{le.src="",K(a.c())})),le.fetchPriority="high",le.onload=()=>{le.onerror=le.onload=null,H({data:le})},le.onerror=()=>{le.onerror=le.onload=null,G.signal.aborted||K(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))},le.src=pe}))})(B||(B={})),B.resetRequestQueue();class j{constructor(u){this._transformRequestFn=u}transformRequest(u,y){return this._transformRequestFn&&this._transformRequestFn(u,y)||{url:u}}setTransformRequest(u){this._transformRequestFn=u}}function Q(E){var u=new a.A(3);return u[0]=E[0],u[1]=E[1],u[2]=E[2],u}var Z,q=function(E,u,y){return E[0]=u[0]-y[0],E[1]=u[1]-y[1],E[2]=u[2]-y[2],E};Z=new a.A(3),a.A!=Float32Array&&(Z[0]=0,Z[1]=0,Z[2]=0);var J=function(E){var u=E[0],y=E[1];return u*u+y*y};function oe(E){const u=[];if(typeof E=="string")u.push({id:"default",url:E});else if(E&&E.length>0){const y=[];for(const{id:w,url:O}of E){const A=`${w}${O}`;y.indexOf(A)===-1&&(y.push(A),u.push({id:w,url:O}))}}return u}function me(E,u,y){const w=E.split("?");return w[0]+=`${u}${y}`,w.join("?")}(function(){var E=new a.A(2);a.A!=Float32Array&&(E[0]=0,E[1]=0)})();class ae{constructor(u,y,w,O){this.context=u,this.format=w,this.texture=u.gl.createTexture(),this.update(y,O)}update(u,y,w){const{width:O,height:A}=u,$=!(this.size&&this.size[0]===O&&this.size[1]===A||w),{context:z}=this,{gl:U}=z;if(this.useMipmap=!!(y&&y.useMipmap),U.bindTexture(U.TEXTURE_2D,this.texture),z.pixelStoreUnpackFlipY.set(!1),z.pixelStoreUnpack.set(1),z.pixelStoreUnpackPremultiplyAlpha.set(this.format===U.RGBA&&(!y||y.premultiply!==!1)),$)this.size=[O,A],u instanceof HTMLImageElement||u instanceof HTMLCanvasElement||u instanceof HTMLVideoElement||u instanceof ImageData||a.b(u)?U.texImage2D(U.TEXTURE_2D,0,this.format,this.format,U.UNSIGNED_BYTE,u):U.texImage2D(U.TEXTURE_2D,0,this.format,O,A,0,this.format,U.UNSIGNED_BYTE,u.data);else{const{x:G,y:H}=w||{x:0,y:0};u instanceof HTMLImageElement||u instanceof HTMLCanvasElement||u instanceof HTMLVideoElement||u instanceof ImageData||a.b(u)?U.texSubImage2D(U.TEXTURE_2D,0,G,H,U.RGBA,U.UNSIGNED_BYTE,u):U.texSubImage2D(U.TEXTURE_2D,0,G,H,O,A,U.RGBA,U.UNSIGNED_BYTE,u.data)}this.useMipmap&&this.isSizePowerOfTwo()&&U.generateMipmap(U.TEXTURE_2D)}bind(u,y,w){const{context:O}=this,{gl:A}=O;A.bindTexture(A.TEXTURE_2D,this.texture),w!==A.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(w=A.LINEAR),u!==this.filter&&(A.texParameteri(A.TEXTURE_2D,A.TEXTURE_MAG_FILTER,u),A.texParameteri(A.TEXTURE_2D,A.TEXTURE_MIN_FILTER,w||u),this.filter=u),y!==this.wrap&&(A.texParameteri(A.TEXTURE_2D,A.TEXTURE_WRAP_S,y),A.texParameteri(A.TEXTURE_2D,A.TEXTURE_WRAP_T,y),this.wrap=y)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:u}=this.context;u.deleteTexture(this.texture),this.texture=null}}function ce(E){const{userImage:u}=E;return!!(u&&u.render&&u.render())&&(E.data.replace(new Uint8Array(u.data.buffer)),!0)}class se extends a.E{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new a.R({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(u){if(this.loaded!==u&&(this.loaded=u,u)){for(const{ids:y,promiseResolve:w}of this.requestors)w(this._getImagesForIds(y));this.requestors=[]}}getImage(u){const y=this.images[u];if(y&&!y.data&&y.spriteData){const w=y.spriteData;y.data=new a.R({width:w.width,height:w.height},w.context.getImageData(w.x,w.y,w.width,w.height).data),y.spriteData=null}return y}addImage(u,y){if(this.images[u])throw new Error(`Image id ${u} already exist, use updateImage instead`);this._validate(u,y)&&(this.images[u]=y)}_validate(u,y){let w=!0;const O=y.data||y.spriteData;return this._validateStretch(y.stretchX,O&&O.width)||(this.fire(new a.j(new Error(`Image "${u}" has invalid "stretchX" value`))),w=!1),this._validateStretch(y.stretchY,O&&O.height)||(this.fire(new a.j(new Error(`Image "${u}" has invalid "stretchY" value`))),w=!1),this._validateContent(y.content,y)||(this.fire(new a.j(new Error(`Image "${u}" has invalid "content" value`))),w=!1),w}_validateStretch(u,y){if(!u)return!0;let w=0;for(const O of u){if(O[0]<w||O[1]<O[0]||y<O[1])return!1;w=O[1]}return!0}_validateContent(u,y){if(!u)return!0;if(u.length!==4)return!1;const w=y.spriteData,O=w&&w.width||y.data.width,A=w&&w.height||y.data.height;return!(u[0]<0||O<u[0]||u[1]<0||A<u[1]||u[2]<0||O<u[2]||u[3]<0||A<u[3]||u[2]<u[0]||u[3]<u[1])}updateImage(u,y,w=!0){const O=this.getImage(u);if(w&&(O.data.width!==y.data.width||O.data.height!==y.data.height))throw new Error(`size mismatch between old image (${O.data.width}x${O.data.height}) and new image (${y.data.width}x${y.data.height}).`);y.version=O.version+1,this.images[u]=y,this.updatedImages[u]=!0}removeImage(u){const y=this.images[u];delete this.images[u],delete this.patterns[u],y.userImage&&y.userImage.onRemove&&y.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(u){return new Promise(((y,w)=>{let O=!0;if(!this.isLoaded())for(const A of u)this.images[A]||(O=!1);this.isLoaded()||O?y(this._getImagesForIds(u)):this.requestors.push({ids:u,promiseResolve:y})}))}_getImagesForIds(u){const y={};for(const w of u){let O=this.getImage(w);O||(this.fire(new a.k("styleimagemissing",{id:w})),O=this.getImage(w)),O?y[w]={data:O.data.clone(),pixelRatio:O.pixelRatio,sdf:O.sdf,version:O.version,stretchX:O.stretchX,stretchY:O.stretchY,content:O.content,textFitWidth:O.textFitWidth,textFitHeight:O.textFitHeight,hasRenderCallback:!!(O.userImage&&O.userImage.render)}:a.w(`Image "${w}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}return y}getPixelSize(){const{width:u,height:y}=this.atlasImage;return{width:u,height:y}}getPattern(u){const y=this.patterns[u],w=this.getImage(u);if(!w)return null;if(y&&y.position.version===w.version)return y.position;if(y)y.position.version=w.version;else{const O={w:w.data.width+2,h:w.data.height+2,x:0,y:0},A=new a.I(O,w);this.patterns[u]={bin:O,position:A}}return this._updatePatternAtlas(),this.patterns[u].position}bind(u){const y=u.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new ae(u,this.atlasImage,y.RGBA),this.atlasTexture.bind(y.LINEAR,y.CLAMP_TO_EDGE)}_updatePatternAtlas(){const u=[];for(const A in this.patterns)u.push(this.patterns[A].bin);const{w:y,h:w}=a.p(u),O=this.atlasImage;O.resize({width:y||1,height:w||1});for(const A in this.patterns){const{bin:$}=this.patterns[A],z=$.x+1,U=$.y+1,G=this.getImage(A).data,H=G.width,K=G.height;a.R.copy(G,O,{x:0,y:0},{x:z,y:U},{width:H,height:K}),a.R.copy(G,O,{x:0,y:K-1},{x:z,y:U-1},{width:H,height:1}),a.R.copy(G,O,{x:0,y:0},{x:z,y:U+K},{width:H,height:1}),a.R.copy(G,O,{x:H-1,y:0},{x:z-1,y:U},{width:1,height:K}),a.R.copy(G,O,{x:0,y:0},{x:z+H,y:U},{width:1,height:K})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(u){for(const y of u){if(this.callbackDispatchedThisFrame[y])continue;this.callbackDispatchedThisFrame[y]=!0;const w=this.getImage(y);w||a.w(`Image with ID: "${y}" was not found`),ce(w)&&this.updateImage(y,w)}}}const ge=1e20;function xe(E,u,y,w,O,A,$,z,U){for(let G=u;G<u+w;G++)Se(E,y*A+G,A,O,$,z,U);for(let G=y;G<y+O;G++)Se(E,G*A+u,1,w,$,z,U)}function Se(E,u,y,w,O,A,$){A[0]=0,$[0]=-ge,$[1]=ge,O[0]=E[u];for(let z=1,U=0,G=0;z<w;z++){O[z]=E[u+z*y];const H=z*z;do{const K=A[U];G=(O[z]-O[K]+H-K*K)/(z-K)/2}while(G<=$[U]&&--U>-1);U++,A[U]=z,$[U]=G,$[U+1]=ge}for(let z=0,U=0;z<w;z++){for(;$[U+1]<z;)U++;const G=A[U],H=z-G;E[u+z*y]=O[G]+H*H}}class De{constructor(u,y){this.requestManager=u,this.localIdeographFontFamily=y,this.entries={}}setURL(u){this.url=u}getGlyphs(u){return a._(this,void 0,void 0,(function*(){const y=[];for(const A in u)for(const $ of u[A])y.push(this._getAndCacheGlyphsPromise(A,$));const w=yield Promise.all(y),O={};for(const{stack:A,id:$,glyph:z}of w)O[A]||(O[A]={}),O[A][$]=z&&{id:z.id,bitmap:z.bitmap.clone(),metrics:z.metrics};return O}))}_getAndCacheGlyphsPromise(u,y){return a._(this,void 0,void 0,(function*(){let w=this.entries[u];w||(w=this.entries[u]={glyphs:{},requests:{},ranges:{}});let O=w.glyphs[y];if(O!==void 0)return{stack:u,id:y,glyph:O};if(O=this._tinySDF(w,u,y),O)return w.glyphs[y]=O,{stack:u,id:y,glyph:O};const A=Math.floor(y/256);if(256*A>65535)throw new Error("glyphs > 65535 not supported");if(w.ranges[A])return{stack:u,id:y,glyph:O};if(!this.url)throw new Error("glyphsUrl is not set");if(!w.requests[A]){const z=De.loadGlyphRange(u,A,this.url,this.requestManager);w.requests[A]=z}const $=yield w.requests[A];for(const z in $)this._doesCharSupportLocalGlyph(+z)||(w.glyphs[+z]=$[+z]);return w.ranges[A]=!0,{stack:u,id:y,glyph:$[y]||null}}))}_doesCharSupportLocalGlyph(u){return!!this.localIdeographFontFamily&&/\p{Ideo}|\p{sc=Hang}|\p{sc=Hira}|\p{sc=Kana}/u.test(String.fromCodePoint(u))}_tinySDF(u,y,w){const O=this.localIdeographFontFamily;if(!O||!this._doesCharSupportLocalGlyph(w))return;let A=u.tinySDF;if(!A){let z="400";/bold/i.test(y)?z="900":/medium/i.test(y)?z="500":/light/i.test(y)&&(z="200"),A=u.tinySDF=new De.TinySDF({fontSize:48,buffer:6,radius:16,cutoff:.25,fontFamily:O,fontWeight:z})}const $=A.draw(String.fromCharCode(w));return{id:w,bitmap:new a.o({width:$.width||60,height:$.height||60},$.data),metrics:{width:$.glyphWidth/2||24,height:$.glyphHeight/2||24,left:$.glyphLeft/2+.5||0,top:$.glyphTop/2-27.5||-8,advance:$.glyphAdvance/2||24,isDoubleResolution:!0}}}}De.loadGlyphRange=function(E,u,y,w){return a._(this,void 0,void 0,(function*(){const O=256*u,A=O+255,$=w.transformRequest(y.replace("{fontstack}",E).replace("{range}",`${O}-${A}`),"Glyphs"),z=yield a.l($,new AbortController);if(!z||!z.data)throw new Error(`Could not load glyph range. range: ${u}, ${O}-${A}`);const U={};for(const G of a.n(z.data))U[G.id]=G;return U}))},De.TinySDF=class{constructor({fontSize:E=24,buffer:u=3,radius:y=8,cutoff:w=.25,fontFamily:O="sans-serif",fontWeight:A="normal",fontStyle:$="normal"}={}){this.buffer=u,this.cutoff=w,this.radius=y;const z=this.size=E+4*u,U=this._createCanvas(z),G=this.ctx=U.getContext("2d",{willReadFrequently:!0});G.font=`${$} ${A} ${E}px ${O}`,G.textBaseline="alphabetic",G.textAlign="left",G.fillStyle="black",this.gridOuter=new Float64Array(z*z),this.gridInner=new Float64Array(z*z),this.f=new Float64Array(z),this.z=new Float64Array(z+1),this.v=new Uint16Array(z)}_createCanvas(E){const u=document.createElement("canvas");return u.width=u.height=E,u}draw(E){const{width:u,actualBoundingBoxAscent:y,actualBoundingBoxDescent:w,actualBoundingBoxLeft:O,actualBoundingBoxRight:A}=this.ctx.measureText(E),$=Math.ceil(y),z=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(A-O))),U=Math.min(this.size-this.buffer,$+Math.ceil(w)),G=z+2*this.buffer,H=U+2*this.buffer,K=Math.max(G*H,0),le=new Uint8ClampedArray(K),pe={data:le,width:G,height:H,glyphWidth:z,glyphHeight:U,glyphTop:$,glyphLeft:0,glyphAdvance:u};if(z===0||U===0)return pe;const{ctx:_e,buffer:Ee,gridInner:Me,gridOuter:Le}=this;_e.clearRect(Ee,Ee,z,U),_e.fillText(E,Ee,Ee+$);const Ne=_e.getImageData(Ee,Ee,z,U);Le.fill(ge,0,K),Me.fill(0,0,K);for(let ke=0;ke<U;ke++)for(let Xe=0;Xe<z;Xe++){const Ke=Ne.data[4*(ke*z+Xe)+3]/255;if(Ke===0)continue;const st=(ke+Ee)*G+Xe+Ee;if(Ke===1)Le[st]=0,Me[st]=ge;else{const xt=.5-Ke;Le[st]=xt>0?xt*xt:0,Me[st]=xt<0?xt*xt:0}}xe(Le,0,0,G,H,G,this.f,this.v,this.z),xe(Me,Ee,Ee,z,U,G,this.f,this.v,this.z);for(let ke=0;ke<K;ke++){const Xe=Math.sqrt(Le[ke])-Math.sqrt(Me[ke]);le[ke]=Math.round(255-255*(Xe/this.radius+this.cutoff))}return pe}};class He{constructor(){this.specification=a.v.light.position}possiblyEvaluate(u,y){return a.x(u.expression.evaluate(y))}interpolate(u,y,w){return{x:a.y.number(u.x,y.x,w),y:a.y.number(u.y,y.y,w),z:a.y.number(u.z,y.z,w)}}}let Ue;class yt extends a.E{constructor(u){super(),Ue=Ue||new a.q({anchor:new a.D(a.v.light.anchor),position:new He,color:new a.D(a.v.light.color),intensity:new a.D(a.v.light.intensity)}),this._transitionable=new a.T(Ue),this.setLight(u),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(u,y={}){if(!this._validate(a.r,u,y))for(const w in u){const O=u[w];w.endsWith("-transition")?this._transitionable.setTransition(w.slice(0,-11),O):this._transitionable.setValue(w,O)}}updateTransitions(u){this._transitioning=this._transitionable.transitioned(u,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(u){this.properties=this._transitioning.possiblyEvaluate(u)}_validate(u,y,w){return(!w||w.validate!==!1)&&a.t(this,u.call(a.u,{value:y,style:{glyphs:!0,sprite:!0},styleSpec:a.v}))}}const We=new a.q({"sky-color":new a.D(a.v.sky["sky-color"]),"horizon-color":new a.D(a.v.sky["horizon-color"]),"fog-color":new a.D(a.v.sky["fog-color"]),"fog-ground-blend":new a.D(a.v.sky["fog-ground-blend"]),"horizon-fog-blend":new a.D(a.v.sky["horizon-fog-blend"]),"sky-horizon-blend":new a.D(a.v.sky["sky-horizon-blend"]),"atmosphere-blend":new a.D(a.v.sky["atmosphere-blend"])});class at extends a.E{constructor(u){super(),this._transitionable=new a.T(We),this.setSky(u),this._transitioning=this._transitionable.untransitioned(),this.recalculate(new a.z(0))}setSky(u,y={}){if(!this._validate(a.B,u,y)){u||(u={"sky-color":"transparent","horizon-color":"transparent","fog-color":"transparent","fog-ground-blend":1,"atmosphere-blend":0});for(const w in u){const O=u[w];w.endsWith("-transition")?this._transitionable.setTransition(w.slice(0,-11),O):this._transitionable.setValue(w,O)}}}getSky(){return this._transitionable.serialize()}updateTransitions(u){this._transitioning=this._transitionable.transitioned(u,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(u){this.properties=this._transitioning.possiblyEvaluate(u)}_validate(u,y,w={}){return w?.validate!==!1&&a.t(this,u.call(a.u,a.e({value:y,style:{glyphs:!0,sprite:!0},styleSpec:a.v})))}calculateFogBlendOpacity(u){return u<60?0:u<70?(u-60)/10:1}}class ut{constructor(u,y){this.width=u,this.height=y,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(u,y){const w=u.join(",")+String(y);return this.dashEntry[w]||(this.dashEntry[w]=this.addDash(u,y)),this.dashEntry[w]}getDashRanges(u,y,w){const O=[];let A=u.length%2==1?-u[u.length-1]*w:0,$=u[0]*w,z=!0;O.push({left:A,right:$,isDash:z,zeroLength:u[0]===0});let U=u[0];for(let G=1;G<u.length;G++){z=!z;const H=u[G];A=U*w,U+=H,$=U*w,O.push({left:A,right:$,isDash:z,zeroLength:H===0})}return O}addRoundDash(u,y,w){const O=y/2;for(let A=-w;A<=w;A++){const $=this.width*(this.nextRow+w+A);let z=0,U=u[z];for(let G=0;G<this.width;G++){G/U.right>1&&(U=u[++z]);const H=Math.abs(G-U.left),K=Math.abs(G-U.right),le=Math.min(H,K);let pe;const _e=A/w*(O+1);if(U.isDash){const Ee=O-Math.abs(_e);pe=Math.sqrt(le*le+Ee*Ee)}else pe=O-Math.sqrt(le*le+_e*_e);this.data[$+G]=Math.max(0,Math.min(255,pe+128))}}}addRegularDash(u){for(let z=u.length-1;z>=0;--z){const U=u[z],G=u[z+1];U.zeroLength?u.splice(z,1):G&&G.isDash===U.isDash&&(G.left=U.left,u.splice(z,1))}const y=u[0],w=u[u.length-1];y.isDash===w.isDash&&(y.left=w.left-this.width,w.right=y.right+this.width);const O=this.width*this.nextRow;let A=0,$=u[A];for(let z=0;z<this.width;z++){z/$.right>1&&($=u[++A]);const U=Math.abs(z-$.left),G=Math.abs(z-$.right),H=Math.min(U,G);this.data[O+z]=Math.max(0,Math.min(255,($.isDash?H:-H)+128))}}addDash(u,y){const w=y?7:0,O=2*w+1;if(this.nextRow+O>this.height)return a.w("LineAtlas out of space"),null;let A=0;for(let z=0;z<u.length;z++)A+=u[z];if(A!==0){const z=this.width/A,U=this.getDashRanges(u,this.width,z);y?this.addRoundDash(U,z,w):this.addRegularDash(U)}const $={y:(this.nextRow+w+.5)/this.height,height:2*w/this.height,width:A};return this.nextRow+=O,this.dirty=!0,$}bind(u){const y=u.gl;this.texture?(y.bindTexture(y.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,y.texSubImage2D(y.TEXTURE_2D,0,0,0,this.width,this.height,y.ALPHA,y.UNSIGNED_BYTE,this.data))):(this.texture=y.createTexture(),y.bindTexture(y.TEXTURE_2D,this.texture),y.texParameteri(y.TEXTURE_2D,y.TEXTURE_WRAP_S,y.REPEAT),y.texParameteri(y.TEXTURE_2D,y.TEXTURE_WRAP_T,y.REPEAT),y.texParameteri(y.TEXTURE_2D,y.TEXTURE_MIN_FILTER,y.LINEAR),y.texParameteri(y.TEXTURE_2D,y.TEXTURE_MAG_FILTER,y.LINEAR),y.texImage2D(y.TEXTURE_2D,0,y.ALPHA,this.width,this.height,0,y.ALPHA,y.UNSIGNED_BYTE,this.data))}}const wt="maplibre_preloaded_worker_pool";class ot{constructor(){this.active={}}acquire(u){if(!this.workers)for(this.workers=[];this.workers.length<ot.workerCount;)this.workers.push(new Worker(a.a.WORKER_URL));return this.active[u]=!0,this.workers.slice()}release(u){delete this.active[u],this.numActive()===0&&(this.workers.forEach((y=>{y.terminate()})),this.workers=null)}isPreloaded(){return!!this.active[wt]}numActive(){return Object.keys(this.active).length}}const dt=Math.floor(p.hardwareConcurrency/2);let Yt,Ft;function Ot(){return Yt||(Yt=new ot),Yt}ot.workerCount=a.C(globalThis)?Math.max(Math.min(dt,3),1):1;class Kt{constructor(u,y){this.workerPool=u,this.actors=[],this.currentActor=0,this.id=y;const w=this.workerPool.acquire(y);for(let O=0;O<w.length;O++){const A=new a.F(w[O],y);A.name=`Worker ${O}`,this.actors.push(A)}if(!this.actors.length)throw new Error("No actors found")}broadcast(u,y){const w=[];for(const O of this.actors)w.push(O.sendAsync({type:u,data:y}));return Promise.all(w)}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(u=!0){this.actors.forEach((y=>{y.remove()})),this.actors=[],u&&this.workerPool.release(this.id)}registerMessageHandler(u,y){for(const w of this.actors)w.registerMessageHandler(u,y)}}function Dn(){return Ft||(Ft=new Kt(Ot(),a.G),Ft.registerMessageHandler("GR",((E,u,y)=>a.m(u,y)))),Ft}function Ut(E,u){const y=a.H();return a.J(y,y,[1,1,0]),a.K(y,y,[.5*E.width,.5*E.height,1]),a.L(y,y,E.calculatePosMatrix(u.toUnwrapped()))}function At(E,u,y,w,O,A){const $=(function(K,le,pe){if(K)for(const _e of K){const Ee=le[_e];if(Ee&&Ee.source===pe&&Ee.type==="fill-extrusion")return!0}else for(const _e in le){const Ee=le[_e];if(Ee.source===pe&&Ee.type==="fill-extrusion")return!0}return!1})(O&&O.layers,u,E.id),z=A.maxPitchScaleFactor(),U=E.tilesIn(w,z,$);U.sort(zt);const G=[];for(const K of U)G.push({wrappedTileID:K.tileID.wrapped().key,queryResults:K.tile.queryRenderedFeatures(u,y,E._state,K.queryGeometry,K.cameraQueryGeometry,K.scale,O,A,z,Ut(E.transform,K.tileID))});const H=(function(K){const le={},pe={};for(const _e of K){const Ee=_e.queryResults,Me=_e.wrappedTileID,Le=pe[Me]=pe[Me]||{};for(const Ne in Ee){const ke=Ee[Ne],Xe=Le[Ne]=Le[Ne]||{},Ke=le[Ne]=le[Ne]||[];for(const st of ke)Xe[st.featureIndex]||(Xe[st.featureIndex]=!0,Ke.push(st))}}return le})(G);for(const K in H)H[K].forEach((le=>{const pe=le.feature,_e=E.getFeatureState(pe.layer["source-layer"],pe.id);pe.source=pe.layer.source,pe.layer["source-layer"]&&(pe.sourceLayer=pe.layer["source-layer"]),pe.state=_e}));return H}function zt(E,u){const y=E.tileID,w=u.tileID;return y.overscaledZ-w.overscaledZ||y.canonical.y-w.canonical.y||y.wrap-w.wrap||y.canonical.x-w.canonical.x}function nn(E,u,y){return a._(this,void 0,void 0,(function*(){let w=E;if(E.url?w=(yield a.h(u.transformRequest(E.url,"Source"),y)).data:yield p.frameAsync(y),!w)return null;const O=a.M(a.e(w,E),["tiles","minzoom","maxzoom","attribution","bounds","scheme","tileSize","encoding"]);return"vector_layers"in w&&w.vector_layers&&(O.vectorLayerIds=w.vector_layers.map((A=>A.id))),O}))}class Ze{constructor(u,y){u&&(y?this.setSouthWest(u).setNorthEast(y):Array.isArray(u)&&(u.length===4?this.setSouthWest([u[0],u[1]]).setNorthEast([u[2],u[3]]):this.setSouthWest(u[0]).setNorthEast(u[1])))}setNorthEast(u){return this._ne=u instanceof a.N?new a.N(u.lng,u.lat):a.N.convert(u),this}setSouthWest(u){return this._sw=u instanceof a.N?new a.N(u.lng,u.lat):a.N.convert(u),this}extend(u){const y=this._sw,w=this._ne;let O,A;if(u instanceof a.N)O=u,A=u;else{if(!(u instanceof Ze))return Array.isArray(u)?u.length===4||u.every(Array.isArray)?this.extend(Ze.convert(u)):this.extend(a.N.convert(u)):u&&("lng"in u||"lon"in u)&&"lat"in u?this.extend(a.N.convert(u)):this;if(O=u._sw,A=u._ne,!O||!A)return this}return y||w?(y.lng=Math.min(O.lng,y.lng),y.lat=Math.min(O.lat,y.lat),w.lng=Math.max(A.lng,w.lng),w.lat=Math.max(A.lat,w.lat)):(this._sw=new a.N(O.lng,O.lat),this._ne=new a.N(A.lng,A.lat)),this}getCenter(){return new a.N((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new a.N(this.getWest(),this.getNorth())}getSouthEast(){return new a.N(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(u){const{lng:y,lat:w}=a.N.convert(u);let O=this._sw.lng<=y&&y<=this._ne.lng;return this._sw.lng>this._ne.lng&&(O=this._sw.lng>=y&&y>=this._ne.lng),this._sw.lat<=w&&w<=this._ne.lat&&O}static convert(u){return u instanceof Ze?u:u&&new Ze(u)}static fromLngLat(u,y=0){const w=360*y/40075017,O=w/Math.cos(Math.PI/180*u.lat);return new Ze(new a.N(u.lng-O,u.lat-w),new a.N(u.lng+O,u.lat+w))}adjustAntiMeridian(){const u=new a.N(this._sw.lng,this._sw.lat),y=new a.N(this._ne.lng,this._ne.lat);return new Ze(u,u.lng>y.lng?new a.N(y.lng+360,y.lat):y)}}class cn{constructor(u,y,w){this.bounds=Ze.convert(this.validateBounds(u)),this.minzoom=y||0,this.maxzoom=w||24}validateBounds(u){return Array.isArray(u)&&u.length===4?[Math.max(-180,u[0]),Math.max(-90,u[1]),Math.min(180,u[2]),Math.min(90,u[3])]:[-180,-90,180,90]}contains(u){const y=Math.pow(2,u.z),w=Math.floor(a.O(this.bounds.getWest())*y),O=Math.floor(a.Q(this.bounds.getNorth())*y),A=Math.ceil(a.O(this.bounds.getEast())*y),$=Math.ceil(a.Q(this.bounds.getSouth())*y);return u.x>=w&&u.x<A&&u.y>=O&&u.y<$}}class Fn extends a.E{constructor(u,y,w,O){if(super(),this.id=u,this.dispatcher=w,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,a.e(this,a.M(y,["url","scheme","tileSize","promoteId"])),this._options=a.e({type:"vector"},y),this._collectResourceTiming=y.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(O)}load(){return a._(this,void 0,void 0,(function*(){this._loaded=!1,this.fire(new a.k("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const u=yield nn(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,this.map.style.sourceCaches[this.id].clearTiles(),u&&(a.e(this,u),u.bounds&&(this.tileBounds=new cn(u.bounds,this.minzoom,this.maxzoom)),this.fire(new a.k("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new a.k("data",{dataType:"source",sourceDataType:"content"})))}catch(u){this._tileJSONRequest=null,this.fire(new a.j(u))}}))}loaded(){return this._loaded}hasTile(u){return!this.tileBounds||this.tileBounds.contains(u.canonical)}onAdd(u){this.map=u,this.load()}setSourceProperty(u){this._tileJSONRequest&&this._tileJSONRequest.abort(),u(),this.load()}setTiles(u){return this.setSourceProperty((()=>{this._options.tiles=u})),this}setUrl(u){return this.setSourceProperty((()=>{this.url=u,this._options.url=u})),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}serialize(){return a.e({},this._options)}loadTile(u){return a._(this,void 0,void 0,(function*(){const y=u.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),w={request:this.map._requestManager.transformRequest(y,"Tile"),uid:u.uid,tileID:u.tileID,zoom:u.tileID.overscaledZ,tileSize:this.tileSize*u.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};w.request.collectResourceTiming=this._collectResourceTiming;let O="RT";if(u.actor&&u.state!=="expired"){if(u.state==="loading")return new Promise(((A,$)=>{u.reloadPromise={resolve:A,reject:$}}))}else u.actor=this.dispatcher.getActor(),O="LT";u.abortController=new AbortController;try{const A=yield u.actor.sendAsync({type:O,data:w},u.abortController);if(delete u.abortController,u.aborted)return;this._afterTileLoadWorkerResponse(u,A)}catch(A){if(delete u.abortController,u.aborted)return;if(A&&A.status!==404)throw A;this._afterTileLoadWorkerResponse(u,null)}}))}_afterTileLoadWorkerResponse(u,y){if(y&&y.resourceTiming&&(u.resourceTiming=y.resourceTiming),y&&this.map._refreshExpiredTiles&&u.setExpiryData(y),u.loadVectorData(y,this.map.painter),u.reloadPromise){const w=u.reloadPromise;u.reloadPromise=null,this.loadTile(u).then(w.resolve).catch(w.reject)}}abortTile(u){return a._(this,void 0,void 0,(function*(){u.abortController&&(u.abortController.abort(),delete u.abortController),u.actor&&(yield u.actor.sendAsync({type:"AT",data:{uid:u.uid,type:this.type,source:this.id}}))}))}unloadTile(u){return a._(this,void 0,void 0,(function*(){u.unloadVectorData(),u.actor&&(yield u.actor.sendAsync({type:"RMT",data:{uid:u.uid,type:this.type,source:this.id}}))}))}hasTransition(){return!1}}class An extends a.E{constructor(u,y,w,O){super(),this.id=u,this.dispatcher=w,this.setEventedParent(O),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=a.e({type:"raster"},y),a.e(this,a.M(y,["url","scheme","tileSize"]))}load(){return a._(this,void 0,void 0,(function*(){this._loaded=!1,this.fire(new a.k("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const u=yield nn(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,u&&(a.e(this,u),u.bounds&&(this.tileBounds=new cn(u.bounds,this.minzoom,this.maxzoom)),this.fire(new a.k("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new a.k("data",{dataType:"source",sourceDataType:"content"})))}catch(u){this._tileJSONRequest=null,this.fire(new a.j(u))}}))}loaded(){return this._loaded}onAdd(u){this.map=u,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}setSourceProperty(u){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null),u(),this.load()}setTiles(u){return this.setSourceProperty((()=>{this._options.tiles=u})),this}setUrl(u){return this.setSourceProperty((()=>{this.url=u,this._options.url=u})),this}serialize(){return a.e({},this._options)}hasTile(u){return!this.tileBounds||this.tileBounds.contains(u.canonical)}loadTile(u){return a._(this,void 0,void 0,(function*(){const y=u.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);u.abortController=new AbortController;try{const w=yield B.getImage(this.map._requestManager.transformRequest(y,"Tile"),u.abortController,this.map._refreshExpiredTiles);if(delete u.abortController,u.aborted)return void(u.state="unloaded");if(w&&w.data){this.map._refreshExpiredTiles&&w.cacheControl&&w.expires&&u.setExpiryData({cacheControl:w.cacheControl,expires:w.expires});const O=this.map.painter.context,A=O.gl,$=w.data;u.texture=this.map.painter.getTileTexture($.width),u.texture?u.texture.update($,{useMipmap:!0}):(u.texture=new ae(O,$,A.RGBA,{useMipmap:!0}),u.texture.bind(A.LINEAR,A.CLAMP_TO_EDGE,A.LINEAR_MIPMAP_NEAREST)),u.state="loaded"}}catch(w){if(delete u.abortController,u.aborted)u.state="unloaded";else if(w)throw u.state="errored",w}}))}abortTile(u){return a._(this,void 0,void 0,(function*(){u.abortController&&(u.abortController.abort(),delete u.abortController)}))}unloadTile(u){return a._(this,void 0,void 0,(function*(){u.texture&&this.map.painter.saveTileTexture(u.texture)}))}hasTransition(){return!1}}class qn extends An{constructor(u,y,w,O){super(u,y,w,O),this.type="raster-dem",this.maxzoom=22,this._options=a.e({type:"raster-dem"},y),this.encoding=y.encoding||"mapbox",this.redFactor=y.redFactor,this.greenFactor=y.greenFactor,this.blueFactor=y.blueFactor,this.baseShift=y.baseShift}loadTile(u){return a._(this,void 0,void 0,(function*(){const y=u.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),w=this.map._requestManager.transformRequest(y,"Tile");u.neighboringTiles=this._getNeighboringTiles(u.tileID),u.abortController=new AbortController;try{const O=yield B.getImage(w,u.abortController,this.map._refreshExpiredTiles);if(delete u.abortController,u.aborted)return void(u.state="unloaded");if(O&&O.data){const A=O.data;this.map._refreshExpiredTiles&&O.cacheControl&&O.expires&&u.setExpiryData({cacheControl:O.cacheControl,expires:O.expires});const $=a.b(A)&&a.U()?A:yield this.readImageNow(A),z={type:this.type,uid:u.uid,source:this.id,rawImageData:$,encoding:this.encoding,redFactor:this.redFactor,greenFactor:this.greenFactor,blueFactor:this.blueFactor,baseShift:this.baseShift};if(!u.actor||u.state==="expired"){u.actor=this.dispatcher.getActor();const U=yield u.actor.sendAsync({type:"LDT",data:z});u.dem=U,u.needsHillshadePrepare=!0,u.needsTerrainPrepare=!0,u.state="loaded"}}}catch(O){if(delete u.abortController,u.aborted)u.state="unloaded";else if(O)throw u.state="errored",O}}))}readImageNow(u){return a._(this,void 0,void 0,(function*(){if(typeof VideoFrame<"u"&&a.V()){const y=u.width+2,w=u.height+2;try{return new a.R({width:y,height:w},yield a.W(u,-1,-1,y,w))}catch{}}return p.getImageData(u,1)}))}_getNeighboringTiles(u){const y=u.canonical,w=Math.pow(2,y.z),O=(y.x-1+w)%w,A=y.x===0?u.wrap-1:u.wrap,$=(y.x+1+w)%w,z=y.x+1===w?u.wrap+1:u.wrap,U={};return U[new a.S(u.overscaledZ,A,y.z,O,y.y).key]={backfilled:!1},U[new a.S(u.overscaledZ,z,y.z,$,y.y).key]={backfilled:!1},y.y>0&&(U[new a.S(u.overscaledZ,A,y.z,O,y.y-1).key]={backfilled:!1},U[new a.S(u.overscaledZ,u.wrap,y.z,y.x,y.y-1).key]={backfilled:!1},U[new a.S(u.overscaledZ,z,y.z,$,y.y-1).key]={backfilled:!1}),y.y+1<w&&(U[new a.S(u.overscaledZ,A,y.z,O,y.y+1).key]={backfilled:!1},U[new a.S(u.overscaledZ,u.wrap,y.z,y.x,y.y+1).key]={backfilled:!1},U[new a.S(u.overscaledZ,z,y.z,$,y.y+1).key]={backfilled:!1}),U}unloadTile(u){return a._(this,void 0,void 0,(function*(){u.demTexture&&this.map.painter.saveTileTexture(u.demTexture),u.fbo&&(u.fbo.destroy(),delete u.fbo),u.dem&&delete u.dem,delete u.neighboringTiles,u.state="unloaded",u.actor&&(yield u.actor.sendAsync({type:"RDT",data:{type:this.type,uid:u.uid,source:this.id}}))}))}}class Er extends a.E{constructor(u,y,w,O){super(),this.id=u,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._pendingLoads=0,this.actor=w.getActor(),this.setEventedParent(O),this._data=y.data,this._options=a.e({},y),this._collectResourceTiming=y.collectResourceTiming,y.maxzoom!==void 0&&(this.maxzoom=y.maxzoom),y.type&&(this.type=y.type),y.attribution&&(this.attribution=y.attribution),this.promoteId=y.promoteId;const A=a.X/this.tileSize;y.clusterMaxZoom!==void 0&&this.maxzoom<=y.clusterMaxZoom&&a.w(`The maxzoom value "${this.maxzoom}" is expected to be greater than the clusterMaxZoom value "${y.clusterMaxZoom}".`),this.workerOptions=a.e({source:this.id,cluster:y.cluster||!1,geojsonVtOptions:{buffer:(y.buffer!==void 0?y.buffer:128)*A,tolerance:(y.tolerance!==void 0?y.tolerance:.375)*A,extent:a.X,maxZoom:this.maxzoom,lineMetrics:y.lineMetrics||!1,generateId:y.generateId||!1},superclusterOptions:{maxZoom:y.clusterMaxZoom!==void 0?y.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,y.clusterMinPoints||2),extent:a.X,radius:(y.clusterRadius||50)*A,log:!1,generateId:y.generateId||!1},clusterProperties:y.clusterProperties,filter:y.filter},y.workerOptions),typeof this.promoteId=="string"&&(this.workerOptions.promoteId=this.promoteId)}load(){return a._(this,void 0,void 0,(function*(){yield this._updateWorkerData()}))}onAdd(u){this.map=u,this.load()}setData(u){return this._data=u,this._updateWorkerData(),this}updateData(u){return this._updateWorkerData(u),this}getData(){return a._(this,void 0,void 0,(function*(){const u=a.e({type:this.type},this.workerOptions);return this.actor.sendAsync({type:"GD",data:u})}))}setClusterOptions(u){return this.workerOptions.cluster=u.cluster,u&&(u.clusterRadius!==void 0&&(this.workerOptions.superclusterOptions.radius=u.clusterRadius),u.clusterMaxZoom!==void 0&&(this.workerOptions.superclusterOptions.maxZoom=u.clusterMaxZoom)),this._updateWorkerData(),this}getClusterExpansionZoom(u){return this.actor.sendAsync({type:"GCEZ",data:{type:this.type,clusterId:u,source:this.id}})}getClusterChildren(u){return this.actor.sendAsync({type:"GCC",data:{type:this.type,clusterId:u,source:this.id}})}getClusterLeaves(u,y,w){return this.actor.sendAsync({type:"GCL",data:{type:this.type,source:this.id,clusterId:u,limit:y,offset:w}})}_updateWorkerData(u){return a._(this,void 0,void 0,(function*(){const y=a.e({type:this.type},this.workerOptions);u?y.dataDiff=u:typeof this._data=="string"?(y.request=this.map._requestManager.transformRequest(p.resolveURL(this._data),"Source"),y.request.collectResourceTiming=this._collectResourceTiming):y.data=JSON.stringify(this._data),this._pendingLoads++,this.fire(new a.k("dataloading",{dataType:"source"}));try{const w=yield this.actor.sendAsync({type:"LD",data:y});if(this._pendingLoads--,this._removed||w.abandoned)return void this.fire(new a.k("dataabort",{dataType:"source"}));let O=null;w.resourceTiming&&w.resourceTiming[this.id]&&(O=w.resourceTiming[this.id].slice(0));const A={dataType:"source"};this._collectResourceTiming&&O&&O.length>0&&a.e(A,{resourceTiming:O}),this.fire(new a.k("data",Object.assign(Object.assign({},A),{sourceDataType:"metadata"}))),this.fire(new a.k("data",Object.assign(Object.assign({},A),{sourceDataType:"content"})))}catch(w){if(this._pendingLoads--,this._removed)return void this.fire(new a.k("dataabort",{dataType:"source"}));this.fire(new a.j(w))}}))}loaded(){return this._pendingLoads===0}loadTile(u){return a._(this,void 0,void 0,(function*(){const y=u.actor?"RT":"LT";u.actor=this.actor;const w={type:this.type,uid:u.uid,tileID:u.tileID,zoom:u.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};u.abortController=new AbortController;const O=yield this.actor.sendAsync({type:y,data:w},u.abortController);delete u.abortController,u.unloadVectorData(),u.aborted||u.loadVectorData(O,this.map.painter,y==="RT")}))}abortTile(u){return a._(this,void 0,void 0,(function*(){u.abortController&&(u.abortController.abort(),delete u.abortController),u.aborted=!0}))}unloadTile(u){return a._(this,void 0,void 0,(function*(){u.unloadVectorData(),yield this.actor.sendAsync({type:"RMT",data:{uid:u.uid,type:this.type,source:this.id}})}))}onRemove(){this._removed=!0,this.actor.sendAsync({type:"RS",data:{type:this.type,source:this.id}})}serialize(){return a.e({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}}var Mi=a.Y([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class gi extends a.E{constructor(u,y,w,O){super(),this.id=u,this.dispatcher=w,this.coordinates=y.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(O),this.options=y}load(u){return a._(this,void 0,void 0,(function*(){this._loaded=!1,this.fire(new a.k("dataloading",{dataType:"source"})),this.url=this.options.url,this._request=new AbortController;try{const y=yield B.getImage(this.map._requestManager.transformRequest(this.url,"Image"),this._request);this._request=null,this._loaded=!0,y&&y.data&&(this.image=y.data,u&&(this.coordinates=u),this._finishLoading())}catch(y){this._request=null,this._loaded=!0,this.fire(new a.j(y))}}))}loaded(){return this._loaded}updateImage(u){return u.url?(this._request&&(this._request.abort(),this._request=null),this.options.url=u.url,this.load(u.coordinates).finally((()=>{this.texture=null})),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new a.k("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(u){this.map=u,this.load()}onRemove(){this._request&&(this._request.abort(),this._request=null)}setCoordinates(u){this.coordinates=u;const y=u.map(a.Z.fromLngLat);this.tileID=(function(O){let A=1/0,$=1/0,z=-1/0,U=-1/0;for(const le of O)A=Math.min(A,le.x),$=Math.min($,le.y),z=Math.max(z,le.x),U=Math.max(U,le.y);const G=Math.max(z-A,U-$),H=Math.max(0,Math.floor(-Math.log(G)/Math.LN2)),K=Math.pow(2,H);return new a.a1(H,Math.floor((A+z)/2*K),Math.floor(($+U)/2*K))})(y),this.minzoom=this.maxzoom=this.tileID.z;const w=y.map((O=>this.tileID.getTilePoint(O)._round()));return this._boundsArray=new a.$,this._boundsArray.emplaceBack(w[0].x,w[0].y,0,0),this._boundsArray.emplaceBack(w[1].x,w[1].y,a.X,0),this._boundsArray.emplaceBack(w[3].x,w[3].y,0,a.X),this._boundsArray.emplaceBack(w[2].x,w[2].y,a.X,a.X),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new a.k("data",{dataType:"source",sourceDataType:"content"})),this}prepare(){if(Object.keys(this.tiles).length===0||!this.image)return;const u=this.map.painter.context,y=u.gl;this.boundsBuffer||(this.boundsBuffer=u.createVertexBuffer(this._boundsArray,Mi.members)),this.boundsSegments||(this.boundsSegments=a.a0.simpleSegment(0,0,4,2)),this.texture||(this.texture=new ae(u,this.image,y.RGBA),this.texture.bind(y.LINEAR,y.CLAMP_TO_EDGE));let w=!1;for(const O in this.tiles){const A=this.tiles[O];A.state!=="loaded"&&(A.state="loaded",A.texture=this.texture,w=!0)}w&&this.fire(new a.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}loadTile(u){return a._(this,void 0,void 0,(function*(){this.tileID&&this.tileID.equals(u.tileID.canonical)?(this.tiles[String(u.tileID.wrap)]=u,u.buckets={}):u.state="errored"}))}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}}class fs extends gi{constructor(u,y,w,O){super(u,y,w,O),this.roundZoom=!0,this.type="video",this.options=y}load(){return a._(this,void 0,void 0,(function*(){this._loaded=!1;const u=this.options;this.urls=[];for(const y of u.urls)this.urls.push(this.map._requestManager.transformRequest(y,"Source").url);try{const y=yield a.a3(this.urls);if(this._loaded=!0,!y)return;this.video=y,this.video.loop=!0,this.video.addEventListener("playing",(()=>{this.map.triggerRepaint()})),this.map&&this.video.play(),this._finishLoading()}catch(y){this.fire(new a.j(y))}}))}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(u){if(this.video){const y=this.video.seekable;u<y.start(0)||u>y.end(0)?this.fire(new a.j(new a.a2(`sources.${this.id}`,null,`Playback for this video can be set only between the ${y.start(0)} and ${y.end(0)}-second mark.`))):this.video.currentTime=u}}getVideo(){return this.video}onAdd(u){this.map||(this.map=u,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const u=this.map.painter.context,y=u.gl;this.boundsBuffer||(this.boundsBuffer=u.createVertexBuffer(this._boundsArray,Mi.members)),this.boundsSegments||(this.boundsSegments=a.a0.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(y.LINEAR,y.CLAMP_TO_EDGE),y.texSubImage2D(y.TEXTURE_2D,0,0,0,y.RGBA,y.UNSIGNED_BYTE,this.video)):(this.texture=new ae(u,this.video,y.RGBA),this.texture.bind(y.LINEAR,y.CLAMP_TO_EDGE));let w=!1;for(const O in this.tiles){const A=this.tiles[O];A.state!=="loaded"&&(A.state="loaded",A.texture=this.texture,w=!0)}w&&this.fire(new a.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}}class Hr extends gi{constructor(u,y,w,O){super(u,y,w,O),y.coordinates?Array.isArray(y.coordinates)&&y.coordinates.length===4&&!y.coordinates.some((A=>!Array.isArray(A)||A.length!==2||A.some(($=>typeof $!="number"))))||this.fire(new a.j(new a.a2(`sources.${u}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new a.j(new a.a2(`sources.${u}`,null,'missing required property "coordinates"'))),y.animate&&typeof y.animate!="boolean"&&this.fire(new a.j(new a.a2(`sources.${u}`,null,'optional "animate" property must be a boolean value'))),y.canvas?typeof y.canvas=="string"||y.canvas instanceof HTMLCanvasElement||this.fire(new a.j(new a.a2(`sources.${u}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new a.j(new a.a2(`sources.${u}`,null,'missing required property "canvas"'))),this.options=y,this.animate=y.animate===void 0||y.animate}load(){return a._(this,void 0,void 0,(function*(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new a.j(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())}))}getCanvas(){return this.canvas}onAdd(u){this.map=u,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let u=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,u=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,u=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const y=this.map.painter.context,w=y.gl;this.boundsBuffer||(this.boundsBuffer=y.createVertexBuffer(this._boundsArray,Mi.members)),this.boundsSegments||(this.boundsSegments=a.a0.simpleSegment(0,0,4,2)),this.texture?(u||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new ae(y,this.canvas,w.RGBA,{premultiply:!0});let O=!1;for(const A in this.tiles){const $=this.tiles[A];$.state!=="loaded"&&($.state="loaded",$.texture=this.texture,O=!0)}O&&this.fire(new a.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const u of[this.canvas.width,this.canvas.height])if(isNaN(u)||u<=0)return!0;return!1}}const uo={},ei=E=>{switch(E){case"geojson":return Er;case"image":return gi;case"raster":return An;case"raster-dem":return qn;case"vector":return Fn;case"video":return fs;case"canvas":return Hr}return uo[E]},Ct="RTLPluginLoaded";class Qi extends a.E{constructor(){super(...arguments),this.status="unavailable",this.url=null,this.dispatcher=Dn()}_syncState(u){return this.status=u,this.dispatcher.broadcast("SRPS",{pluginStatus:u,pluginURL:this.url}).catch((y=>{throw this.status="error",y}))}getRTLTextPluginStatus(){return this.status}clearRTLTextPlugin(){this.status="unavailable",this.url=null}setRTLTextPlugin(u){return a._(this,arguments,void 0,(function*(y,w=!1){if(this.url)throw new Error("setRTLTextPlugin cannot be called multiple times.");if(this.url=p.resolveURL(y),!this.url)throw new Error(`requested url ${y} is invalid`);if(this.status==="unavailable"){if(!w)return this._requestImport();this.status="deferred",this._syncState(this.status)}else if(this.status==="requested")return this._requestImport()}))}_requestImport(){return a._(this,void 0,void 0,(function*(){yield this._syncState("loading"),this.status="loaded",this.fire(new a.k(Ct))}))}lazyLoad(){this.status==="unavailable"?this.status="requested":this.status==="deferred"&&this._requestImport()}}let ki=null;function js(){return ki||(ki=new Qi),ki}class Co{constructor(u,y){this.timeAdded=0,this.fadeEndTime=0,this.tileID=u,this.uid=a.a4(),this.uses=0,this.tileSize=y,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.rtt=[],this.rttCoords={},this.expiredRequestCount=0,this.state="loading"}registerFadeDuration(u){const y=u+this.timeAdded;y<this.fadeEndTime||(this.fadeEndTime=y)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}clearTextures(u){this.demTexture&&u.saveTileTexture(this.demTexture),this.demTexture=null}loadVectorData(u,y,w){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",u){u.featureIndex&&(this.latestFeatureIndex=u.featureIndex,u.rawTileData?(this.latestRawTileData=u.rawTileData,this.latestFeatureIndex.rawTileData=u.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=u.collisionBoxArray,this.buckets=(function(O,A){const $={};if(!A)return $;for(const z of O){const U=z.layerIds.map((G=>A.getLayer(G))).filter(Boolean);if(U.length!==0){z.layers=U,z.stateDependentLayerIds&&(z.stateDependentLayers=z.stateDependentLayerIds.map((G=>U.filter((H=>H.id===G))[0])));for(const G of U)$[G.id]=z}}return $})(u.buckets,y.style),this.hasSymbolBuckets=!1;for(const O in this.buckets){const A=this.buckets[O];if(A instanceof a.a6){if(this.hasSymbolBuckets=!0,!w)break;A.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const O in this.buckets){const A=this.buckets[O];if(A instanceof a.a6&&A.hasRTLText){this.hasRTLText=!0,js().lazyLoad();break}}this.queryPadding=0;for(const O in this.buckets){const A=this.buckets[O];this.queryPadding=Math.max(this.queryPadding,y.style.getLayer(O).queryRadius(A))}u.imageAtlas&&(this.imageAtlas=u.imageAtlas),u.glyphAtlasImage&&(this.glyphAtlasImage=u.glyphAtlasImage)}else this.collisionBoxArray=new a.a5}unloadVectorData(){for(const u in this.buckets)this.buckets[u].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(u){return this.buckets[u.id]}upload(u){for(const w in this.buckets){const O=this.buckets[w];O.uploadPending()&&O.upload(u)}const y=u.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new ae(u,this.imageAtlas.image,y.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new ae(u,this.glyphAtlasImage,y.ALPHA),this.glyphAtlasImage=null)}prepare(u){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(u,this.imageAtlasTexture)}queryRenderedFeatures(u,y,w,O,A,$,z,U,G,H){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:O,cameraQueryGeometry:A,scale:$,tileSize:this.tileSize,pixelPosMatrix:H,transform:U,params:z,queryPadding:this.queryPadding*G},u,y,w):{}}querySourceFeatures(u,y){const w=this.latestFeatureIndex;if(!w||!w.rawTileData)return;const O=w.loadVTLayers(),A=y&&y.sourceLayer?y.sourceLayer:"",$=O._geojsonTileLayer||O[A];if(!$)return;const z=a.a7(y&&y.filter),{z:U,x:G,y:H}=this.tileID.canonical,K={z:U,x:G,y:H};for(let le=0;le<$.length;le++){const pe=$.feature(le);if(z.needGeometry){const Me=a.a8(pe,!0);if(!z.filter(new a.z(this.tileID.overscaledZ),Me,this.tileID.canonical))continue}else if(!z.filter(new a.z(this.tileID.overscaledZ),pe))continue;const _e=w.getId(pe,A),Ee=new a.a9(pe,U,G,H,_e);Ee.tile=K,u.push(Ee)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(u){const y=this.expirationTime;if(u.cacheControl){const w=a.aa(u.cacheControl);w["max-age"]&&(this.expirationTime=Date.now()+1e3*w["max-age"])}else u.expires&&(this.expirationTime=new Date(u.expires).getTime());if(this.expirationTime){const w=Date.now();let O=!1;if(this.expirationTime>w)O=!1;else if(y)if(this.expirationTime<y)O=!0;else{const A=this.expirationTime-y;A?this.expirationTime=w+Math.max(A,3e4):O=!0}else O=!0;O?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(u,y){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(u).length===0)return;const w=this.latestFeatureIndex.loadVTLayers();for(const O in this.buckets){if(!y.style.hasLayer(O))continue;const A=this.buckets[O],$=A.layers[0].sourceLayer||"_geojsonTileLayer",z=w[$],U=u[$];if(!z||!U||Object.keys(U).length===0)continue;A.update(U,z,this.imageAtlas&&this.imageAtlas.patternPositions||{});const G=y&&y.style&&y.style.getLayer(O);G&&(this.queryPadding=Math.max(this.queryPadding,G.queryRadius(A)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<p.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(u){this.symbolFadeHoldUntil=p.now()+u}setDependencies(u,y){const w={};for(const O of y)w[O]=!0;this.dependencies[u]=w}hasDependency(u,y){for(const w of u){const O=this.dependencies[w];if(O){for(const A of y)if(O[A])return!0}}return!1}}class Lt{constructor(u,y){this.max=u,this.onRemove=y,this.reset()}reset(){for(const u in this.data)for(const y of this.data[u])y.timeout&&clearTimeout(y.timeout),this.onRemove(y.value);return this.data={},this.order=[],this}add(u,y,w){const O=u.wrapped().key;this.data[O]===void 0&&(this.data[O]=[]);const A={value:y,timeout:void 0};if(w!==void 0&&(A.timeout=setTimeout((()=>{this.remove(u,A)}),w)),this.data[O].push(A),this.order.push(O),this.order.length>this.max){const $=this._getAndRemoveByKey(this.order[0]);$&&this.onRemove($)}return this}has(u){return u.wrapped().key in this.data}getAndRemove(u){return this.has(u)?this._getAndRemoveByKey(u.wrapped().key):null}_getAndRemoveByKey(u){const y=this.data[u].shift();return y.timeout&&clearTimeout(y.timeout),this.data[u].length===0&&delete this.data[u],this.order.splice(this.order.indexOf(u),1),y.value}getByKey(u){const y=this.data[u];return y?y[0].value:null}get(u){return this.has(u)?this.data[u.wrapped().key][0].value:null}remove(u,y){if(!this.has(u))return this;const w=u.wrapped().key,O=y===void 0?0:this.data[w].indexOf(y),A=this.data[w][O];return this.data[w].splice(O,1),A.timeout&&clearTimeout(A.timeout),this.data[w].length===0&&delete this.data[w],this.onRemove(A.value),this.order.splice(this.order.indexOf(w),1),this}setMaxSize(u){for(this.max=u;this.order.length>this.max;){const y=this._getAndRemoveByKey(this.order[0]);y&&this.onRemove(y)}return this}filter(u){const y=[];for(const w in this.data)for(const O of this.data[w])u(O.value)||y.push(O);for(const w of y)this.remove(w.value.tileID,w)}}class yn{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(u,y,w){const O=String(y);if(this.stateChanges[u]=this.stateChanges[u]||{},this.stateChanges[u][O]=this.stateChanges[u][O]||{},a.e(this.stateChanges[u][O],w),this.deletedStates[u]===null){this.deletedStates[u]={};for(const A in this.state[u])A!==O&&(this.deletedStates[u][A]=null)}else if(this.deletedStates[u]&&this.deletedStates[u][O]===null){this.deletedStates[u][O]={};for(const A in this.state[u][O])w[A]||(this.deletedStates[u][O][A]=null)}else for(const A in w)this.deletedStates[u]&&this.deletedStates[u][O]&&this.deletedStates[u][O][A]===null&&delete this.deletedStates[u][O][A]}removeFeatureState(u,y,w){if(this.deletedStates[u]===null)return;const O=String(y);if(this.deletedStates[u]=this.deletedStates[u]||{},w&&y!==void 0)this.deletedStates[u][O]!==null&&(this.deletedStates[u][O]=this.deletedStates[u][O]||{},this.deletedStates[u][O][w]=null);else if(y!==void 0)if(this.stateChanges[u]&&this.stateChanges[u][O])for(w in this.deletedStates[u][O]={},this.stateChanges[u][O])this.deletedStates[u][O][w]=null;else this.deletedStates[u][O]=null;else this.deletedStates[u]=null}getState(u,y){const w=String(y),O=a.e({},(this.state[u]||{})[w],(this.stateChanges[u]||{})[w]);if(this.deletedStates[u]===null)return{};if(this.deletedStates[u]){const A=this.deletedStates[u][y];if(A===null)return{};for(const $ in A)delete O[$]}return O}initializeTileState(u,y){u.setFeatureState(this.state,y)}coalesceChanges(u,y){const w={};for(const O in this.stateChanges){this.state[O]=this.state[O]||{};const A={};for(const $ in this.stateChanges[O])this.state[O][$]||(this.state[O][$]={}),a.e(this.state[O][$],this.stateChanges[O][$]),A[$]=this.state[O][$];w[O]=A}for(const O in this.deletedStates){this.state[O]=this.state[O]||{};const A={};if(this.deletedStates[O]===null)for(const $ in this.state[O])A[$]={},this.state[O][$]={};else for(const $ in this.deletedStates[O]){if(this.deletedStates[O][$]===null)this.state[O][$]={};else for(const z of Object.keys(this.deletedStates[O][$]))delete this.state[O][$][z];A[$]=this.state[O][$]}w[O]=w[O]||{},a.e(w[O],A)}if(this.stateChanges={},this.deletedStates={},Object.keys(w).length!==0)for(const O in u)u[O].setFeatureState(w,y)}}class rn extends a.E{constructor(u,y,w){super(),this.id=u,this.dispatcher=w,this.on("data",(O=>this._dataHandler(O))),this.on("dataloading",(()=>{this._sourceErrored=!1})),this.on("error",(()=>{this._sourceErrored=this._source.loaded()})),this._source=((O,A,$,z)=>{const U=new(ei(A.type))(O,A,$,z);if(U.id!==O)throw new Error(`Expected Source id to be ${O} instead of ${U.id}`);return U})(u,y,w,this),this._tiles={},this._cache=new Lt(0,(O=>this._unloadTile(O))),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._maxTileCacheZoomLevels=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new yn,this._didEmitContent=!1,this._updated=!1}onAdd(u){this.map=u,this._maxTileCacheSize=u?u._maxTileCacheSize:null,this._maxTileCacheZoomLevels=u?u._maxTileCacheZoomLevels:null,this._source&&this._source.onAdd&&this._source.onAdd(u)}onRemove(u){this.clearTiles(),this._source&&this._source.onRemove&&this._source.onRemove(u)}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;if(!(this.used===void 0&&this.usedForTerrain===void 0||this.used||this.usedForTerrain))return!0;if(!this._updated)return!1;for(const u in this._tiles){const y=this._tiles[u];if(y.state!=="loaded"&&y.state!=="errored")return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const u=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,u&&this.reload(),this.transform&&this.update(this.transform,this.terrain)}_loadTile(u,y,w){return a._(this,void 0,void 0,(function*(){try{yield this._source.loadTile(u),this._tileLoaded(u,y,w)}catch(O){u.state="errored",O.status!==404?this._source.fire(new a.j(O,{tile:u})):this.update(this.transform,this.terrain)}}))}_unloadTile(u){this._source.unloadTile&&this._source.unloadTile(u)}_abortTile(u){this._source.abortTile&&this._source.abortTile(u),this._source.fire(new a.k("dataabort",{tile:u,coord:u.tileID,dataType:"source"}))}serialize(){return this._source.serialize()}prepare(u){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const y in this._tiles){const w=this._tiles[y];w.upload(u),w.prepare(this.map.style.imageManager)}}getIds(){return Object.values(this._tiles).map((u=>u.tileID)).sort(Xr).map((u=>u.key))}getRenderableIds(u){const y=[];for(const w in this._tiles)this._isIdRenderable(w,u)&&y.push(this._tiles[w]);return u?y.sort(((w,O)=>{const A=w.tileID,$=O.tileID,z=new a.P(A.canonical.x,A.canonical.y)._rotate(this.transform.angle),U=new a.P($.canonical.x,$.canonical.y)._rotate(this.transform.angle);return A.overscaledZ-$.overscaledZ||U.y-z.y||U.x-z.x})).map((w=>w.tileID.key)):y.map((w=>w.tileID)).sort(Xr).map((w=>w.key))}hasRenderableParent(u){const y=this.findLoadedParent(u,0);return!!y&&this._isIdRenderable(y.tileID.key)}_isIdRenderable(u,y){return this._tiles[u]&&this._tiles[u].hasData()&&!this._coveredTiles[u]&&(y||!this._tiles[u].holdingForFade())}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const u in this._tiles)this._tiles[u].state!=="errored"&&this._reloadTile(u,"reloading")}}_reloadTile(u,y){return a._(this,void 0,void 0,(function*(){const w=this._tiles[u];w&&(w.state!=="loading"&&(w.state=y),yield this._loadTile(w,u,y))}))}_tileLoaded(u,y,w){u.timeAdded=p.now(),w==="expired"&&(u.refreshedUponExpiration=!0),this._setTileReloadTimer(y,u),this.getSource().type==="raster-dem"&&u.dem&&this._backfillDEM(u),this._state.initializeTileState(u,this.map?this.map.painter:null),u.aborted||this._source.fire(new a.k("data",{dataType:"source",tile:u,coord:u.tileID}))}_backfillDEM(u){const y=this.getRenderableIds();for(let O=0;O<y.length;O++){const A=y[O];if(u.neighboringTiles&&u.neighboringTiles[A]){const $=this.getTileByID(A);w(u,$),w($,u)}}function w(O,A){O.needsHillshadePrepare=!0,O.needsTerrainPrepare=!0;let $=A.tileID.canonical.x-O.tileID.canonical.x;const z=A.tileID.canonical.y-O.tileID.canonical.y,U=Math.pow(2,O.tileID.canonical.z),G=A.tileID.key;$===0&&z===0||Math.abs(z)>1||(Math.abs($)>1&&(Math.abs($+U)===1?$+=U:Math.abs($-U)===1&&($-=U)),A.dem&&O.dem&&(O.dem.backfillBorder(A.dem,$,z),O.neighboringTiles&&O.neighboringTiles[G]&&(O.neighboringTiles[G].backfilled=!0)))}}getTile(u){return this.getTileByID(u.key)}getTileByID(u){return this._tiles[u]}_retainLoadedChildren(u,y,w,O){for(const A in this._tiles){let $=this._tiles[A];if(O[A]||!$.hasData()||$.tileID.overscaledZ<=y||$.tileID.overscaledZ>w)continue;let z=$.tileID;for(;$&&$.tileID.overscaledZ>y+1;){const G=$.tileID.scaledTo($.tileID.overscaledZ-1);$=this._tiles[G.key],$&&$.hasData()&&(z=G)}let U=z;for(;U.overscaledZ>y;)if(U=U.scaledTo(U.overscaledZ-1),u[U.key]){O[z.key]=z;break}}}findLoadedParent(u,y){if(u.key in this._loadedParentTiles){const w=this._loadedParentTiles[u.key];return w&&w.tileID.overscaledZ>=y?w:null}for(let w=u.overscaledZ-1;w>=y;w--){const O=u.scaledTo(w),A=this._getLoadedTile(O);if(A)return A}}findLoadedSibling(u){return this._getLoadedTile(u)}_getLoadedTile(u){const y=this._tiles[u.key];return y&&y.hasData()?y:this._cache.getByKey(u.wrapped().key)}updateCacheSize(u){const y=Math.ceil(u.width/this._source.tileSize)+1,w=Math.ceil(u.height/this._source.tileSize)+1,O=Math.floor(y*w*(this._maxTileCacheZoomLevels===null?a.a.MAX_TILE_CACHE_ZOOM_LEVELS:this._maxTileCacheZoomLevels)),A=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,O):O;this._cache.setMaxSize(A)}handleWrapJump(u){const y=Math.round((u-(this._prevLng===void 0?u:this._prevLng))/360);if(this._prevLng=u,y){const w={};for(const O in this._tiles){const A=this._tiles[O];A.tileID=A.tileID.unwrapTo(A.tileID.wrap+y),w[A.tileID.key]=A}this._tiles=w;for(const O in this._timers)clearTimeout(this._timers[O]),delete this._timers[O];for(const O in this._tiles)this._setTileReloadTimer(O,this._tiles[O])}}_updateCoveredAndRetainedTiles(u,y,w,O,A,$){const z={},U={},G=Object.keys(u),H=p.now();for(const K of G){const le=u[K],pe=this._tiles[K];if(!pe||pe.fadeEndTime!==0&&pe.fadeEndTime<=H)continue;const _e=this.findLoadedParent(le,y),Ee=this.findLoadedSibling(le),Me=_e||Ee||null;Me&&(this._addTile(Me.tileID),z[Me.tileID.key]=Me.tileID),U[K]=le}this._retainLoadedChildren(U,O,w,u);for(const K in z)u[K]||(this._coveredTiles[K]=!0,u[K]=z[K]);if($){const K={},le={};for(const pe of A)this._tiles[pe.key].hasData()?K[pe.key]=pe:le[pe.key]=pe;for(const pe in le){const _e=le[pe].children(this._source.maxzoom);this._tiles[_e[0].key]&&this._tiles[_e[1].key]&&this._tiles[_e[2].key]&&this._tiles[_e[3].key]&&(K[_e[0].key]=u[_e[0].key]=_e[0],K[_e[1].key]=u[_e[1].key]=_e[1],K[_e[2].key]=u[_e[2].key]=_e[2],K[_e[3].key]=u[_e[3].key]=_e[3],delete le[pe])}for(const pe in le){const _e=le[pe],Ee=this.findLoadedParent(_e,this._source.minzoom),Me=this.findLoadedSibling(_e),Le=Ee||Me||null;if(Le){K[Le.tileID.key]=u[Le.tileID.key]=Le.tileID;for(const Ne in K)K[Ne].isChildOf(Le.tileID)&&delete K[Ne]}}for(const pe in this._tiles)K[pe]||(this._coveredTiles[pe]=!0)}}update(u,y){if(!this._sourceLoaded||this._paused)return;let w;this.transform=u,this.terrain=y,this.updateCacheSize(u),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?w=u.getVisibleUnwrappedCoordinates(this._source.tileID).map((H=>new a.S(H.canonical.z,H.wrap,H.canonical.z,H.canonical.x,H.canonical.y))):(w=u.coveringTiles({tileSize:this.usedForTerrain?this.tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:!this.usedForTerrain&&this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled,terrain:y}),this._source.hasTile&&(w=w.filter((H=>this._source.hasTile(H))))):w=[];const O=u.coveringZoomLevel(this._source),A=Math.max(O-rn.maxOverzooming,this._source.minzoom),$=Math.max(O+rn.maxUnderzooming,this._source.minzoom);if(this.usedForTerrain){const H={};for(const K of w)if(K.canonical.z>this._source.minzoom){const le=K.scaledTo(K.canonical.z-1);H[le.key]=le;const pe=K.scaledTo(Math.max(this._source.minzoom,Math.min(K.canonical.z,5)));H[pe.key]=pe}w=w.concat(Object.values(H))}const z=w.length===0&&!this._updated&&this._didEmitContent;this._updated=!0,z&&this.fire(new a.k("data",{sourceDataType:"idle",dataType:"source",sourceId:this.id}));const U=this._updateRetainedTiles(w,O);si(this._source.type)&&this._updateCoveredAndRetainedTiles(U,A,$,O,w,y);for(const H in U)this._tiles[H].clearFadeHold();const G=a.ab(this._tiles,U);for(const H of G){const K=this._tiles[H];K.hasSymbolBuckets&&!K.holdingForFade()?K.setHoldDuration(this.map._fadeDuration):K.hasSymbolBuckets&&!K.symbolFadeFinished()||this._removeTile(H)}this._updateLoadedParentTileCache(),this._updateLoadedSiblingTileCache()}releaseSymbolFadeTiles(){for(const u in this._tiles)this._tiles[u].holdingForFade()&&this._removeTile(u)}_updateRetainedTiles(u,y){var w;const O={},A={},$=Math.max(y-rn.maxOverzooming,this._source.minzoom),z=Math.max(y+rn.maxUnderzooming,this._source.minzoom),U={};for(const G of u){const H=this._addTile(G);O[G.key]=G,H.hasData()||y<this._source.maxzoom&&(U[G.key]=G)}this._retainLoadedChildren(U,y,z,O);for(const G of u){let H=this._tiles[G.key];if(H.hasData())continue;if(y+1>this._source.maxzoom){const le=G.children(this._source.maxzoom)[0],pe=this.getTile(le);if(pe&&pe.hasData()){O[le.key]=le;continue}}else{const le=G.children(this._source.maxzoom);if(O[le[0].key]&&O[le[1].key]&&O[le[2].key]&&O[le[3].key])continue}let K=H.wasRequested();for(let le=G.overscaledZ-1;le>=$;--le){const pe=G.scaledTo(le);if(A[pe.key])break;if(A[pe.key]=!0,H=this.getTile(pe),!H&&K&&(H=this._addTile(pe)),H){const _e=H.hasData();if((_e||!(!((w=this.map)===null||w===void 0)&&w.cancelPendingTileRequestsWhileZooming)||K)&&(O[pe.key]=pe),K=H.wasRequested(),_e)break}}}return O}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const u in this._tiles){const y=[];let w,O=this._tiles[u].tileID;for(;O.overscaledZ>0;){if(O.key in this._loadedParentTiles){w=this._loadedParentTiles[O.key];break}y.push(O.key);const A=O.scaledTo(O.overscaledZ-1);if(w=this._getLoadedTile(A),w)break;O=A}for(const A of y)this._loadedParentTiles[A]=w}}_updateLoadedSiblingTileCache(){this._loadedSiblingTiles={};for(const u in this._tiles){const y=this._tiles[u].tileID,w=this._getLoadedTile(y);this._loadedSiblingTiles[y.key]=w}}_addTile(u){let y=this._tiles[u.key];if(y)return y;y=this._cache.getAndRemove(u),y&&(this._setTileReloadTimer(u.key,y),y.tileID=u,this._state.initializeTileState(y,this.map?this.map.painter:null),this._cacheTimers[u.key]&&(clearTimeout(this._cacheTimers[u.key]),delete this._cacheTimers[u.key],this._setTileReloadTimer(u.key,y)));const w=y;return y||(y=new Co(u,this._source.tileSize*u.overscaleFactor()),this._loadTile(y,u.key,y.state)),y.uses++,this._tiles[u.key]=y,w||this._source.fire(new a.k("dataloading",{tile:y,coord:y.tileID,dataType:"source"})),y}_setTileReloadTimer(u,y){u in this._timers&&(clearTimeout(this._timers[u]),delete this._timers[u]);const w=y.getExpiryTimeout();w&&(this._timers[u]=setTimeout((()=>{this._reloadTile(u,"expired"),delete this._timers[u]}),w))}_removeTile(u){const y=this._tiles[u];y&&(y.uses--,delete this._tiles[u],this._timers[u]&&(clearTimeout(this._timers[u]),delete this._timers[u]),y.uses>0||(y.hasData()&&y.state!=="reloading"?this._cache.add(y.tileID,y,y.getExpiryTimeout()):(y.aborted=!0,this._abortTile(y),this._unloadTile(y))))}_dataHandler(u){const y=u.sourceDataType;u.dataType==="source"&&y==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&u.dataType==="source"&&y==="content"&&(this.reload(),this.transform&&this.update(this.transform,this.terrain),this._didEmitContent=!0)}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const u in this._tiles)this._removeTile(u);this._cache.reset()}tilesIn(u,y,w){const O=[],A=this.transform;if(!A)return O;const $=w?A.getCameraQueryGeometry(u):u,z=u.map((_e=>A.pointCoordinate(_e,this.terrain))),U=$.map((_e=>A.pointCoordinate(_e,this.terrain))),G=this.getIds();let H=1/0,K=1/0,le=-1/0,pe=-1/0;for(const _e of U)H=Math.min(H,_e.x),K=Math.min(K,_e.y),le=Math.max(le,_e.x),pe=Math.max(pe,_e.y);for(let _e=0;_e<G.length;_e++){const Ee=this._tiles[G[_e]];if(Ee.holdingForFade())continue;const Me=Ee.tileID,Le=Math.pow(2,A.zoom-Ee.tileID.overscaledZ),Ne=y*Ee.queryPadding*a.X/Ee.tileSize/Le,ke=[Me.getTilePoint(new a.Z(H,K)),Me.getTilePoint(new a.Z(le,pe))];if(ke[0].x-Ne<a.X&&ke[0].y-Ne<a.X&&ke[1].x+Ne>=0&&ke[1].y+Ne>=0){const Xe=z.map((st=>Me.getTilePoint(st))),Ke=U.map((st=>Me.getTilePoint(st)));O.push({tile:Ee,tileID:Me,queryGeometry:Xe,cameraQueryGeometry:Ke,scale:Le})}}return O}getVisibleCoordinates(u){const y=this.getRenderableIds(u).map((w=>this._tiles[w].tileID));for(const w of y)w.posMatrix=this.transform.calculatePosMatrix(w.toUnwrapped());return y}hasTransition(){if(this._source.hasTransition())return!0;if(si(this._source.type)){const u=p.now();for(const y in this._tiles)if(this._tiles[y].fadeEndTime>=u)return!0}return!1}setFeatureState(u,y,w){this._state.updateState(u=u||"_geojsonTileLayer",y,w)}removeFeatureState(u,y,w){this._state.removeFeatureState(u=u||"_geojsonTileLayer",y,w)}getFeatureState(u,y){return this._state.getState(u=u||"_geojsonTileLayer",y)}setDependencies(u,y,w){const O=this._tiles[u];O&&O.setDependencies(y,w)}reloadTilesForDependencies(u,y){for(const w in this._tiles)this._tiles[w].hasDependency(u,y)&&this._reloadTile(w,"reloading");this._cache.filter((w=>!w.hasDependency(u,y)))}}function Xr(E,u){const y=Math.abs(2*E.wrap)-+(E.wrap<0),w=Math.abs(2*u.wrap)-+(u.wrap<0);return E.overscaledZ-u.overscaledZ||w-y||u.canonical.y-E.canonical.y||u.canonical.x-E.canonical.x}function si(E){return E==="raster"||E==="image"||E==="video"}rn.maxOverzooming=10,rn.maxUnderzooming=3;class Tn{constructor(u,y){this.reset(u,y)}reset(u,y){this.points=u||[],this._distances=[0];for(let w=1;w<this.points.length;w++)this._distances[w]=this._distances[w-1]+this.points[w].dist(this.points[w-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(y||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(u){if(this.points.length===1)return this.points[0];u=a.ac(u,0,1);let y=1,w=this._distances[y];const O=u*this.paddedLength+this.padding;for(;w<O&&y<this._distances.length;)w=this._distances[++y];const A=y-1,$=this._distances[A],z=w-$,U=z>0?(O-$)/z:0;return this.points[A].mult(1-U).add(this.points[y].mult(U))}}function Ms(E,u){let y=!0;return E==="always"||E!=="never"&&u!=="never"||(y=!1),y}class Ri{constructor(u,y,w){const O=this.boxCells=[],A=this.circleCells=[];this.xCellCount=Math.ceil(u/w),this.yCellCount=Math.ceil(y/w);for(let $=0;$<this.xCellCount*this.yCellCount;$++)O.push([]),A.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=u,this.height=y,this.xScale=this.xCellCount/u,this.yScale=this.yCellCount/y,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(u,y,w,O,A){this._forEachCell(y,w,O,A,this._insertBoxCell,this.boxUid++),this.boxKeys.push(u),this.bboxes.push(y),this.bboxes.push(w),this.bboxes.push(O),this.bboxes.push(A)}insertCircle(u,y,w,O){this._forEachCell(y-O,w-O,y+O,w+O,this._insertCircleCell,this.circleUid++),this.circleKeys.push(u),this.circles.push(y),this.circles.push(w),this.circles.push(O)}_insertBoxCell(u,y,w,O,A,$){this.boxCells[A].push($)}_insertCircleCell(u,y,w,O,A,$){this.circleCells[A].push($)}_query(u,y,w,O,A,$,z){if(w<0||u>this.width||O<0||y>this.height)return[];const U=[];if(u<=0&&y<=0&&this.width<=w&&this.height<=O){if(A)return[{key:null,x1:u,y1:y,x2:w,y2:O}];for(let G=0;G<this.boxKeys.length;G++)U.push({key:this.boxKeys[G],x1:this.bboxes[4*G],y1:this.bboxes[4*G+1],x2:this.bboxes[4*G+2],y2:this.bboxes[4*G+3]});for(let G=0;G<this.circleKeys.length;G++){const H=this.circles[3*G],K=this.circles[3*G+1],le=this.circles[3*G+2];U.push({key:this.circleKeys[G],x1:H-le,y1:K-le,x2:H+le,y2:K+le})}}else this._forEachCell(u,y,w,O,this._queryCell,U,{hitTest:A,overlapMode:$,seenUids:{box:{},circle:{}}},z);return U}query(u,y,w,O){return this._query(u,y,w,O,!1,null)}hitTest(u,y,w,O,A,$){return this._query(u,y,w,O,!0,A,$).length>0}hitTestCircle(u,y,w,O,A){const $=u-w,z=u+w,U=y-w,G=y+w;if(z<0||$>this.width||G<0||U>this.height)return!1;const H=[];return this._forEachCell($,U,z,G,this._queryCellCircle,H,{hitTest:!0,overlapMode:O,circle:{x:u,y,radius:w},seenUids:{box:{},circle:{}}},A),H.length>0}_queryCell(u,y,w,O,A,$,z,U){const{seenUids:G,hitTest:H,overlapMode:K}=z,le=this.boxCells[A];if(le!==null){const _e=this.bboxes;for(const Ee of le)if(!G.box[Ee]){G.box[Ee]=!0;const Me=4*Ee,Le=this.boxKeys[Ee];if(u<=_e[Me+2]&&y<=_e[Me+3]&&w>=_e[Me+0]&&O>=_e[Me+1]&&(!U||U(Le))&&(!H||!Ms(K,Le.overlapMode))&&($.push({key:Le,x1:_e[Me],y1:_e[Me+1],x2:_e[Me+2],y2:_e[Me+3]}),H))return!0}}const pe=this.circleCells[A];if(pe!==null){const _e=this.circles;for(const Ee of pe)if(!G.circle[Ee]){G.circle[Ee]=!0;const Me=3*Ee,Le=this.circleKeys[Ee];if(this._circleAndRectCollide(_e[Me],_e[Me+1],_e[Me+2],u,y,w,O)&&(!U||U(Le))&&(!H||!Ms(K,Le.overlapMode))){const Ne=_e[Me],ke=_e[Me+1],Xe=_e[Me+2];if($.push({key:Le,x1:Ne-Xe,y1:ke-Xe,x2:Ne+Xe,y2:ke+Xe}),H)return!0}}}return!1}_queryCellCircle(u,y,w,O,A,$,z,U){const{circle:G,seenUids:H,overlapMode:K}=z,le=this.boxCells[A];if(le!==null){const _e=this.bboxes;for(const Ee of le)if(!H.box[Ee]){H.box[Ee]=!0;const Me=4*Ee,Le=this.boxKeys[Ee];if(this._circleAndRectCollide(G.x,G.y,G.radius,_e[Me+0],_e[Me+1],_e[Me+2],_e[Me+3])&&(!U||U(Le))&&!Ms(K,Le.overlapMode))return $.push(!0),!0}}const pe=this.circleCells[A];if(pe!==null){const _e=this.circles;for(const Ee of pe)if(!H.circle[Ee]){H.circle[Ee]=!0;const Me=3*Ee,Le=this.circleKeys[Ee];if(this._circlesCollide(_e[Me],_e[Me+1],_e[Me+2],G.x,G.y,G.radius)&&(!U||U(Le))&&!Ms(K,Le.overlapMode))return $.push(!0),!0}}}_forEachCell(u,y,w,O,A,$,z,U){const G=this._convertToXCellCoord(u),H=this._convertToYCellCoord(y),K=this._convertToXCellCoord(w),le=this._convertToYCellCoord(O);for(let pe=G;pe<=K;pe++)for(let _e=H;_e<=le;_e++)if(A.call(this,u,y,w,O,this.xCellCount*_e+pe,$,z,U))return}_convertToXCellCoord(u){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(u*this.xScale)))}_convertToYCellCoord(u){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(u*this.yScale)))}_circlesCollide(u,y,w,O,A,$){const z=O-u,U=A-y,G=w+$;return G*G>z*z+U*U}_circleAndRectCollide(u,y,w,O,A,$,z){const U=($-O)/2,G=Math.abs(u-(O+U));if(G>U+w)return!1;const H=(z-A)/2,K=Math.abs(y-(A+H));if(K>H+w)return!1;if(G<=U||K<=H)return!0;const le=G-U,pe=K-H;return le*le+pe*pe<=w*w}}function oi(E,u,y,w,O){const A=a.H();return u?(a.K(A,A,[1/O,1/O,1]),y||a.ad(A,A,w.angle)):a.L(A,w.labelPlaneMatrix,E),A}function Fi(E,u,y,w,O){if(u){const A=a.ae(E);return a.K(A,A,[O,O,1]),y||a.ad(A,A,-w.angle),A}return w.glCoordMatrix}function Oe(E,u,y,w){let O;w?(O=[E,u,w(E,u),1],a.af(O,O,y)):(O=[E,u,0,1],Ir(O,O,y));const A=O[3];return{point:new a.P(O[0]/A,O[1]/A),signedDistanceFromCamera:A,isOccluded:!1}}function ne(E,u){return .5+E/u*.5}function te(E,u){return E.x>=-u[0]&&E.x<=u[0]&&E.y>=-u[1]&&E.y<=u[1]}function fe(E,u,y,w,O,A,$,z,U,G,H,K,le,pe,_e){const Ee=w?E.textSizeData:E.iconSizeData,Me=a.ag(Ee,y.transform.zoom),Le=[256/y.width*2+1,256/y.height*2+1],Ne=w?E.text.dynamicLayoutVertexArray:E.icon.dynamicLayoutVertexArray;Ne.clear();const ke=E.lineVertexArray,Xe=w?E.text.placedSymbolArray:E.icon.placedSymbolArray,Ke=y.transform.width/y.transform.height;let st=!1;for(let xt=0;xt<Xe.length;xt++){const Qt=Xe.get(xt);if(Qt.hidden||Qt.writingMode===a.ah.vertical&&!st){In(Qt.numGlyphs,Ne);continue}st=!1;const Gt=Oe(Qt.anchorX,Qt.anchorY,u,_e);if(!te(Gt.point,Le)){In(Qt.numGlyphs,Ne);continue}const tn=ne(y.transform.cameraToCenterDistance,Gt.signedDistanceFromCamera),Zt=a.ai(Ee,Me,Qt),Xt=$?Zt/tn:Zt*tn,bn={getElevation:_e,labelPlaneMatrix:O,lineVertexArray:ke,pitchWithMap:$,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},projection:G,tileAnchorPoint:new a.P(Qt.anchorX,Qt.anchorY),unwrappedTileID:H,width:K,height:le,translation:pe},nr=Ge(bn,Qt,Xt,!1,z,u,A,E.glyphOffsetArray,Ne,Ke,U);st=nr.useVertical,(nr.notEnoughRoom||st||nr.needsFlipping&&Ge(bn,Qt,Xt,!0,z,u,A,E.glyphOffsetArray,Ne,Ke,U).notEnoughRoom)&&In(Qt.numGlyphs,Ne)}w?E.text.dynamicLayoutVertexBuffer.updateData(Ne):E.icon.dynamicLayoutVertexBuffer.updateData(Ne)}function we(E,u,y,w,O,A,$,z){const U=A.glyphStartIndex+A.numGlyphs,G=A.lineStartIndex,H=A.lineStartIndex+A.lineLength,K=u.getoffsetX(A.glyphStartIndex),le=u.getoffsetX(U-1),pe=Bt(E*K,y,w,O,A.segment,G,H,z,$);if(!pe)return null;const _e=Bt(E*le,y,w,O,A.segment,G,H,z,$);return _e?z.projectionCache.anyProjectionOccluded?null:{first:pe,last:_e}:null}function ze(E,u,y,w){return E===a.ah.horizontal&&Math.abs(y.y-u.y)>Math.abs(y.x-u.x)*w?{useVertical:!0}:(E===a.ah.vertical?u.y<y.y:u.x>y.x)?{needsFlipping:!0}:null}function Ge(E,u,y,w,O,A,$,z,U,G,H){const K=y/24,le=u.lineOffsetX*K,pe=u.lineOffsetY*K;let _e;if(u.numGlyphs>1){const Ee=u.glyphStartIndex+u.numGlyphs,Me=u.lineStartIndex,Le=u.lineStartIndex+u.lineLength,Ne=we(K,z,le,pe,w,u,H,E);if(!Ne)return{notEnoughRoom:!0};const ke=Oe(Ne.first.point.x,Ne.first.point.y,$,E.getElevation).point,Xe=Oe(Ne.last.point.x,Ne.last.point.y,$,E.getElevation).point;if(O&&!w){const Ke=ze(u.writingMode,ke,Xe,G);if(Ke)return Ke}_e=[Ne.first];for(let Ke=u.glyphStartIndex+1;Ke<Ee-1;Ke++)_e.push(Bt(K*z.getoffsetX(Ke),le,pe,w,u.segment,Me,Le,E,H));_e.push(Ne.last)}else{if(O&&!w){const Me=Oe(E.tileAnchorPoint.x,E.tileAnchorPoint.y,A,E.getElevation).point,Le=u.lineStartIndex+u.segment+1,Ne=new a.P(E.lineVertexArray.getx(Le),E.lineVertexArray.gety(Le)),ke=Oe(Ne.x,Ne.y,A,E.getElevation),Xe=ke.signedDistanceFromCamera>0?ke.point:(function(st,xt,Qt,Gt,tn,Zt){return et(st,xt,Qt,1,tn,Zt)})(E.tileAnchorPoint,Ne,Me,0,A,E),Ke=ze(u.writingMode,Me,Xe,G);if(Ke)return Ke}const Ee=Bt(K*z.getoffsetX(u.glyphStartIndex),le,pe,w,u.segment,u.lineStartIndex,u.lineStartIndex+u.lineLength,E,H);if(!Ee||E.projectionCache.anyProjectionOccluded)return{notEnoughRoom:!0};_e=[Ee]}for(const Ee of _e)a.aj(U,Ee.point,Ee.angle);return{}}function et(E,u,y,w,O,A){const $=E.add(E.sub(u)._unit()),z=O!==void 0?Oe($.x,$.y,O,A.getElevation).point:ht($.x,$.y,A).point,U=y.sub(z);return y.add(U._mult(w/U.mag()))}function Ie(E,u,y){const w=u.projectionCache;if(w.projections[E])return w.projections[E];const O=new a.P(u.lineVertexArray.getx(E),u.lineVertexArray.gety(E)),A=ht(O.x,O.y,u);if(A.signedDistanceFromCamera>0)return w.projections[E]=A.point,w.anyProjectionOccluded=w.anyProjectionOccluded||A.isOccluded,A.point;const $=E-y.direction;return(function(z,U,G,H,K){return et(z,U,G,H,void 0,K)})(y.distanceFromAnchor===0?u.tileAnchorPoint:new a.P(u.lineVertexArray.getx($),u.lineVertexArray.gety($)),O,y.previousVertex,y.absOffsetX-y.distanceFromAnchor+1,u)}function ht(E,u,y){const w=E+y.translation[0],O=u+y.translation[1];let A;return!y.pitchWithMap&&y.projection.useSpecialProjectionForSymbols?(A=y.projection.projectTileCoordinates(w,O,y.unwrappedTileID,y.getElevation),A.point.x=(.5*A.point.x+.5)*y.width,A.point.y=(.5*-A.point.y+.5)*y.height):(A=Oe(w,O,y.labelPlaneMatrix,y.getElevation),A.isOccluded=!1),A}function _t(E,u,y){return E._unit()._perp()._mult(u*y)}function rt(E,u,y,w,O,A,$,z,U){if(z.projectionCache.offsets[E])return z.projectionCache.offsets[E];const G=y.add(u);if(E+U.direction<w||E+U.direction>=O)return z.projectionCache.offsets[E]=G,G;const H=Ie(E+U.direction,z,U),K=_t(H.sub(y),$,U.direction),le=y.add(K),pe=H.add(K);return z.projectionCache.offsets[E]=a.ak(A,G,le,pe)||G,z.projectionCache.offsets[E]}function Bt(E,u,y,w,O,A,$,z,U){const G=w?E-u:E+u;let H=G>0?1:-1,K=0;w&&(H*=-1,K=Math.PI),H<0&&(K+=Math.PI);let le,pe=H>0?A+O:A+O+1;z.projectionCache.cachedAnchorPoint?le=z.projectionCache.cachedAnchorPoint:(le=ht(z.tileAnchorPoint.x,z.tileAnchorPoint.y,z).point,z.projectionCache.cachedAnchorPoint=le);let _e,Ee,Me=le,Le=le,Ne=0,ke=0;const Xe=Math.abs(G),Ke=[];let st;for(;Ne+ke<=Xe;){if(pe+=H,pe<A||pe>=$)return null;Ne+=ke,Le=Me,Ee=_e;const Gt={absOffsetX:Xe,direction:H,distanceFromAnchor:Ne,previousVertex:Le};if(Me=Ie(pe,z,Gt),y===0)Ke.push(Le),st=Me.sub(Le);else{let tn;const Zt=Me.sub(Le);tn=Zt.mag()===0?_t(Ie(pe+H,z,Gt).sub(Me),y,H):_t(Zt,y,H),Ee||(Ee=Le.add(tn)),_e=rt(pe,tn,Me,A,$,Ee,y,z,Gt),Ke.push(Ee),st=_e.sub(Ee)}ke=st.mag()}const xt=st._mult((Xe-Ne)/ke)._add(Ee||Le),Qt=K+Math.atan2(Me.y-Le.y,Me.x-Le.x);return Ke.push(xt),{point:xt,angle:U?Qt:0,path:Ke}}const On=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function In(E,u){for(let y=0;y<E;y++){const w=u.length;u.resize(w+4),u.float32.set(On,3*w)}}function Ir(E,u,y){const w=u[0],O=u[1];return E[0]=y[0]*w+y[4]*O+y[12],E[1]=y[1]*w+y[5]*O+y[13],E[3]=y[3]*w+y[7]*O+y[15],E}const Gn=100;class ur{constructor(u,y,w=new Ri(u.width+200,u.height+200,25),O=new Ri(u.width+200,u.height+200,25)){this.transform=u,this.mapProjection=y,this.grid=w,this.ignoredGrid=O,this.pitchFactor=Math.cos(u._pitch)*u.cameraToCenterDistance,this.screenRightBoundary=u.width+Gn,this.screenBottomBoundary=u.height+Gn,this.gridRightBoundary=u.width+200,this.gridBottomBoundary=u.height+200,this.perspectiveRatioCutoff=.6}placeCollisionBox(u,y,w,O,A,$,z,U,G,H,K){const le=u.anchorPointX+U[0],pe=u.anchorPointY+U[1],_e=this.projectAndGetPerspectiveRatio(O,le,pe,A,H),Ee=w*_e.perspectiveRatio;let Me;if($||z)Me=this._projectCollisionBox(u,Ee,O,A,$,z,U,_e,H,K);else{const Ke=_e.point.x+(K?K.x*Ee:0),st=_e.point.y+(K?K.y*Ee:0);Me={allPointsOccluded:!1,box:[Ke+u.x1*Ee,st+u.y1*Ee,Ke+u.x2*Ee,st+u.y2*Ee]}}const[Le,Ne,ke,Xe]=Me.box;return this.mapProjection.useSpecialProjectionForSymbols&&($?Me.allPointsOccluded:this.mapProjection.isOccluded(le,pe,A))||_e.perspectiveRatio<this.perspectiveRatioCutoff||!this.isInsideGrid(Le,Ne,ke,Xe)||y!=="always"&&this.grid.hitTest(Le,Ne,ke,Xe,y,G)?{box:[Le,Ne,ke,Xe],placeable:!1,offscreen:!1}:{box:[Le,Ne,ke,Xe],placeable:!0,offscreen:this.isOffscreen(Le,Ne,ke,Xe)}}placeCollisionCircles(u,y,w,O,A,$,z,U,G,H,K,le,pe,_e,Ee,Me){const Le=[],Ne=new a.P(y.anchorX,y.anchorY),ke=this.getPerspectiveRatio($,Ne.x,Ne.y,z,Me),Xe=(K?A/ke:A*ke)/a.ap,Ke={getElevation:Me,labelPlaneMatrix:U,lineVertexArray:w,pitchWithMap:K,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},projection:this.mapProjection,tileAnchorPoint:Ne,unwrappedTileID:z,width:this.transform.width,height:this.transform.height,translation:Ee},st=we(Xe,O,y.lineOffsetX*Xe,y.lineOffsetY*Xe,!1,y,!1,Ke);let xt=!1,Qt=!1,Gt=!0;if(st){const tn=.5*pe*ke+_e,Zt=new a.P(-100,-100),Xt=new a.P(this.screenRightBoundary,this.screenBottomBoundary),bn=new Tn,nr=st.first,Ht=st.last;let Vt=[];for(let Yn=nr.path.length-1;Yn>=1;Yn--)Vt.push(nr.path[Yn]);for(let Yn=1;Yn<Ht.path.length;Yn++)Vt.push(Ht.path[Yn]);const Wn=2.5*tn;if(G){const Yn=this.projectPathToScreenSpace(Vt,Ke,G);Vt=Yn.some((Lr=>Lr.signedDistanceFromCamera<=0))?[]:Yn.map((Lr=>Lr.point))}let os=[];if(Vt.length>0){const Yn=Vt[0].clone(),Lr=Vt[0].clone();for(let Vi=1;Vi<Vt.length;Vi++)Yn.x=Math.min(Yn.x,Vt[Vi].x),Yn.y=Math.min(Yn.y,Vt[Vi].y),Lr.x=Math.max(Lr.x,Vt[Vi].x),Lr.y=Math.max(Lr.y,Vt[Vi].y);os=Yn.x>=Zt.x&&Lr.x<=Xt.x&&Yn.y>=Zt.y&&Lr.y<=Xt.y?[Vt]:Lr.x<Zt.x||Yn.x>Xt.x||Lr.y<Zt.y||Yn.y>Xt.y?[]:a.al([Vt],Zt.x,Zt.y,Xt.x,Xt.y)}for(const Yn of os){bn.reset(Yn,.25*tn);let Lr=0;Lr=bn.length<=.5*tn?1:Math.ceil(bn.paddedLength/Wn)+1;for(let Vi=0;Vi<Lr;Vi++){const to=Vi/Math.max(Lr-1,1),Tl=bn.lerp(to),Br=Tl.x+Gn,da=Tl.y+Gn;Le.push(Br,da,tn,0);const Pa=Br-tn,pa=da-tn,Da=Br+tn,Pl=da+tn;if(Gt=Gt&&this.isOffscreen(Pa,pa,Da,Pl),Qt=Qt||this.isInsideGrid(Pa,pa,Da,Pl),u!=="always"&&this.grid.hitTestCircle(Br,da,tn,u,le)&&(xt=!0,!H))return{circles:[],offscreen:!1,collisionDetected:xt}}}}return{circles:!H&&xt||!Qt||ke<this.perspectiveRatioCutoff?[]:Le,offscreen:Gt,collisionDetected:xt}}projectPathToScreenSpace(u,y,w){return u.map((O=>Oe(O.x,O.y,w,y.getElevation)))}queryRenderedSymbols(u){if(u.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const y=[];let w=1/0,O=1/0,A=-1/0,$=-1/0;for(const H of u){const K=new a.P(H.x+Gn,H.y+Gn);w=Math.min(w,K.x),O=Math.min(O,K.y),A=Math.max(A,K.x),$=Math.max($,K.y),y.push(K)}const z=this.grid.query(w,O,A,$).concat(this.ignoredGrid.query(w,O,A,$)),U={},G={};for(const H of z){const K=H.key;if(U[K.bucketInstanceId]===void 0&&(U[K.bucketInstanceId]={}),U[K.bucketInstanceId][K.featureIndex])continue;const le=[new a.P(H.x1,H.y1),new a.P(H.x2,H.y1),new a.P(H.x2,H.y2),new a.P(H.x1,H.y2)];a.am(y,le)&&(U[K.bucketInstanceId][K.featureIndex]=!0,G[K.bucketInstanceId]===void 0&&(G[K.bucketInstanceId]=[]),G[K.bucketInstanceId].push(K.featureIndex))}return G}insertCollisionBox(u,y,w,O,A,$){(w?this.ignoredGrid:this.grid).insert({bucketInstanceId:O,featureIndex:A,collisionGroupID:$,overlapMode:y},u[0],u[1],u[2],u[3])}insertCollisionCircles(u,y,w,O,A,$){const z=w?this.ignoredGrid:this.grid,U={bucketInstanceId:O,featureIndex:A,collisionGroupID:$,overlapMode:y};for(let G=0;G<u.length;G+=4)z.insertCircle(U,u[G],u[G+1],u[G+2])}projectAndGetPerspectiveRatio(u,y,w,O,A){let $;A?($=[y,w,A(y,w),1],a.af($,$,u)):($=[y,w,0,1],Ir($,$,u));const z=$[3];return{point:new a.P(($[0]/z+1)/2*this.transform.width+Gn,(-$[1]/z+1)/2*this.transform.height+Gn),perspectiveRatio:.5+this.transform.cameraToCenterDistance/z*.5,isOccluded:!1,signedDistanceFromCamera:z}}getPerspectiveRatio(u,y,w,O,A){const $=this.mapProjection.useSpecialProjectionForSymbols?this.mapProjection.projectTileCoordinates(y,w,O,A):Oe(y,w,u,A);return .5+this.transform.cameraToCenterDistance/$.signedDistanceFromCamera*.5}isOffscreen(u,y,w,O){return w<Gn||u>=this.screenRightBoundary||O<Gn||y>this.screenBottomBoundary}isInsideGrid(u,y,w,O){return w>=0&&u<this.gridRightBoundary&&O>=0&&y<this.gridBottomBoundary}getViewportMatrix(){const u=a.an([]);return a.J(u,u,[-100,-100,0]),u}_projectCollisionBox(u,y,w,O,A,$,z,U,G,H){let K=new a.P(1,0),le=new a.P(0,1);const pe=new a.P(u.anchorPointX+z[0],u.anchorPointY+z[1]);if($&&!A){const Gt=this.projectAndGetPerspectiveRatio(w,pe.x+1,pe.y,O,G).point.sub(U.point).unit(),tn=Math.atan(Gt.y/Gt.x)+(Gt.x<0?Math.PI:0),Zt=Math.sin(tn),Xt=Math.cos(tn);K=new a.P(Xt,Zt),le=new a.P(-Zt,Xt)}else if(!$&&A){const Gt=-this.transform.angle,tn=Math.sin(Gt),Zt=Math.cos(Gt);K=new a.P(Zt,tn),le=new a.P(-tn,Zt)}let _e=U.point,Ee=y;if(A){_e=pe;const Gt=this.transform.zoom-Math.floor(this.transform.zoom);Ee=Math.pow(2,-Gt),Ee*=this.mapProjection.getPitchedTextCorrection(this.transform,pe,O),H||(Ee*=a.ac(.5+U.signedDistanceFromCamera/this.transform.cameraToCenterDistance*.5,0,4))}H&&(_e=_e.add(K.mult(H.x*Ee)).add(le.mult(H.y*Ee)));const Me=u.x1*Ee,Le=u.x2*Ee,Ne=(Me+Le)/2,ke=u.y1*Ee,Xe=u.y2*Ee,Ke=(ke+Xe)/2,st=[{offsetX:Me,offsetY:ke},{offsetX:Ne,offsetY:ke},{offsetX:Le,offsetY:ke},{offsetX:Le,offsetY:Ke},{offsetX:Le,offsetY:Xe},{offsetX:Ne,offsetY:Xe},{offsetX:Me,offsetY:Xe},{offsetX:Me,offsetY:Ke}];let xt=[];for(const{offsetX:Gt,offsetY:tn}of st)xt.push(new a.P(_e.x+K.x*Gt+le.x*tn,_e.y+K.y*Gt+le.y*tn));let Qt=!1;if(A){const Gt=xt.map((tn=>this.projectAndGetPerspectiveRatio(w,tn.x,tn.y,O,G)));Qt=Gt.some((tn=>!tn.isOccluded)),xt=Gt.map((tn=>tn.point))}else Qt=!0;return{box:a.ao(xt),allPointsOccluded:!Qt}}}function Cr(E,u,y){return u*(a.X/(E.tileSize*Math.pow(2,y-E.tileID.overscaledZ)))}class ds{constructor(u,y,w,O){this.opacity=u?Math.max(0,Math.min(1,u.opacity+(u.placed?y:-y))):O&&w?1:0,this.placed=w}isHidden(){return this.opacity===0&&!this.placed}}class ji{constructor(u,y,w,O,A){this.text=new ds(u?u.text:null,y,w,A),this.icon=new ds(u?u.icon:null,y,O,A)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class gr{constructor(u,y,w){this.text=u,this.icon=y,this.skipFade=w}}class hi{constructor(){this.invProjMatrix=a.H(),this.viewportMatrix=a.H(),this.circles=[]}}class an{constructor(u,y,w,O,A){this.bucketInstanceId=u,this.featureIndex=y,this.sourceLayerIndex=w,this.bucketIndex=O,this.tileID=A}}class ye{constructor(u){this.crossSourceCollisions=u,this.maxGroupID=0,this.collisionGroups={}}get(u){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[u]){const y=++this.maxGroupID;this.collisionGroups[u]={ID:y,predicate:w=>w.collisionGroupID===y}}return this.collisionGroups[u]}}function Je(E,u,y,w,O){const{horizontalAlign:A,verticalAlign:$}=a.au(E);return new a.P(-(A-.5)*u+w[0]*O,-($-.5)*y+w[1]*O)}class ft{constructor(u,y,w,O,A,$){this.transform=u.clone(),this.terrain=w,this.collisionIndex=new ur(this.transform,y),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=O,this.retainedQueryData={},this.collisionGroups=new ye(A),this.collisionCircleArrays={},this.collisionBoxArrays=new Map,this.prevPlacement=$,$&&($.prevPlacement=void 0),this.placedOrientations={}}_getTerrainElevationFunc(u){const y=this.terrain;return y?(w,O)=>y.getElevation(u,w,O):null}getBucketParts(u,y,w,O){const A=w.getBucket(y),$=w.latestFeatureIndex;if(!A||!$||y.id!==A.layerIds[0])return;const z=w.collisionBoxArray,U=A.layers[0].layout,G=A.layers[0].paint,H=Math.pow(2,this.transform.zoom-w.tileID.overscaledZ),K=w.tileSize/a.X,le=w.tileID.toUnwrapped(),pe=this.transform.calculatePosMatrix(le),_e=U.get("text-pitch-alignment")==="map",Ee=U.get("text-rotation-alignment")==="map",Me=Cr(w,1,this.transform.zoom),Le=this.collisionIndex.mapProjection.translatePosition(this.transform,w,G.get("text-translate"),G.get("text-translate-anchor")),Ne=this.collisionIndex.mapProjection.translatePosition(this.transform,w,G.get("icon-translate"),G.get("icon-translate-anchor")),ke=oi(pe,_e,Ee,this.transform,Me);let Xe=null;if(_e){const st=Fi(pe,_e,Ee,this.transform,Me);Xe=a.L([],this.transform.labelPlaneMatrix,st)}this.retainedQueryData[A.bucketInstanceId]=new an(A.bucketInstanceId,$,A.sourceLayerIndex,A.index,w.tileID);const Ke={bucket:A,layout:U,translationText:Le,translationIcon:Ne,posMatrix:pe,unwrappedTileID:le,textLabelPlaneMatrix:ke,labelToScreenMatrix:Xe,scale:H,textPixelRatio:K,holdingForFade:w.holdingForFade(),collisionBoxArray:z,partiallyEvaluatedTextSize:a.ag(A.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(A.sourceID)};if(O)for(const st of A.sortKeyRanges){const{sortKey:xt,symbolInstanceStart:Qt,symbolInstanceEnd:Gt}=st;u.push({sortKey:xt,symbolInstanceStart:Qt,symbolInstanceEnd:Gt,parameters:Ke})}else u.push({symbolInstanceStart:0,symbolInstanceEnd:A.symbolInstances.length,parameters:Ke})}attemptAnchorPlacement(u,y,w,O,A,$,z,U,G,H,K,le,pe,_e,Ee,Me,Le,Ne,ke){const Xe=a.aq[u.textAnchor],Ke=[u.textOffset0,u.textOffset1],st=Je(Xe,w,O,Ke,A),xt=this.collisionIndex.placeCollisionBox(y,le,U,G,H,z,$,Me,K.predicate,ke,st);if((!Ne||this.collisionIndex.placeCollisionBox(Ne,le,U,G,H,z,$,Le,K.predicate,ke,st).placeable)&&xt.placeable){let Qt;if(this.prevPlacement&&this.prevPlacement.variableOffsets[pe.crossTileID]&&this.prevPlacement.placements[pe.crossTileID]&&this.prevPlacement.placements[pe.crossTileID].text&&(Qt=this.prevPlacement.variableOffsets[pe.crossTileID].anchor),pe.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");return this.variableOffsets[pe.crossTileID]={textOffset:Ke,width:w,height:O,anchor:Xe,textBoxScale:A,prevAnchor:Qt},this.markUsedJustification(_e,Xe,pe,Ee),_e.allowVerticalPlacement&&(this.markUsedOrientation(_e,Ee,pe),this.placedOrientations[pe.crossTileID]=Ee),{shift:st,placedGlyphBoxes:xt}}}placeLayerBucketPart(u,y,w){const{bucket:O,layout:A,translationText:$,translationIcon:z,posMatrix:U,unwrappedTileID:G,textLabelPlaneMatrix:H,labelToScreenMatrix:K,textPixelRatio:le,holdingForFade:pe,collisionBoxArray:_e,partiallyEvaluatedTextSize:Ee,collisionGroup:Me}=u.parameters,Le=A.get("text-optional"),Ne=A.get("icon-optional"),ke=a.ar(A,"text-overlap","text-allow-overlap"),Xe=ke==="always",Ke=a.ar(A,"icon-overlap","icon-allow-overlap"),st=Ke==="always",xt=A.get("text-rotation-alignment")==="map",Qt=A.get("text-pitch-alignment")==="map",Gt=A.get("icon-text-fit")!=="none",tn=A.get("symbol-z-order")==="viewport-y",Zt=Xe&&(st||!O.hasIconData()||Ne),Xt=st&&(Xe||!O.hasTextData()||Le);!O.collisionArrays&&_e&&O.deserializeCollisionBoxes(_e);const bn=this._getTerrainElevationFunc(this.retainedQueryData[O.bucketInstanceId].tileID),nr=(Ht,Vt,Wn)=>{var os,Yn;if(y[Ht.crossTileID])return;if(pe)return void(this.placements[Ht.crossTileID]=new gr(!1,!1,!1));let Lr=!1,Vi=!1,to=!0,Tl=null,Br={box:null,placeable:!1,offscreen:null},da={placeable:!1},Pa=null,pa=null,Da=null,Pl=0,op=0,Bh=0;Vt.textFeatureIndex?Pl=Vt.textFeatureIndex:Ht.useRuntimeCollisionCircles&&(Pl=Ht.featureIndex),Vt.verticalTextFeatureIndex&&(op=Vt.verticalTextFeatureIndex);const Xf=Vt.textBox;if(Xf){const Il=Ko=>{let ma=a.ah.horizontal;if(O.allowVerticalPlacement&&!Ko&&this.prevPlacement){const cl=this.prevPlacement.placedOrientations[Ht.crossTileID];cl&&(this.placedOrientations[Ht.crossTileID]=cl,ma=cl,this.markUsedOrientation(O,ma,Ht))}return ma},Ml=(Ko,ma)=>{if(O.allowVerticalPlacement&&Ht.numVerticalGlyphVertices>0&&Vt.verticalTextBox){for(const cl of O.writingModes)if(cl===a.ah.vertical?(Br=ma(),da=Br):Br=Ko(),Br&&Br.placeable)break}else Br=Ko()},Wu=Ht.textAnchorOffsetStartIndex,Rl=Ht.textAnchorOffsetEndIndex;if(Rl===Wu){const Ko=(ma,cl)=>{const jr=this.collisionIndex.placeCollisionBox(ma,ke,le,U,G,Qt,xt,$,Me.predicate,bn);return jr&&jr.placeable&&(this.markUsedOrientation(O,cl,Ht),this.placedOrientations[Ht.crossTileID]=cl),jr};Ml((()=>Ko(Xf,a.ah.horizontal)),(()=>{const ma=Vt.verticalTextBox;return O.allowVerticalPlacement&&Ht.numVerticalGlyphVertices>0&&ma?Ko(ma,a.ah.vertical):{box:null,offscreen:null}})),Il(Br&&Br.placeable)}else{let Ko=a.aq[(Yn=(os=this.prevPlacement)===null||os===void 0?void 0:os.variableOffsets[Ht.crossTileID])===null||Yn===void 0?void 0:Yn.anchor];const ma=(jr,qc,ap)=>{const Nh=jr.x2-jr.x1,rv=jr.y2-jr.y1,q_=Ht.textBoxScale,iv=Gt&&Ke==="never"?qc:null;let pu=null,Z_=ke==="never"?1:2,Hm="never";Ko&&Z_++;for(let lp=0;lp<Z_;lp++){for(let ny=Wu;ny<Rl;ny++){const Km=O.textAnchorOffsets.get(ny);if(Ko&&Km.textAnchor!==Ko)continue;const up=this.attemptAnchorPlacement(Km,jr,Nh,rv,q_,xt,Qt,le,U,G,Me,Hm,Ht,O,ap,$,z,iv,bn);if(up&&(pu=up.placedGlyphBoxes,pu&&pu.placeable))return Lr=!0,Tl=up.shift,pu}Ko?Ko=null:Hm=ke}return w&&!pu&&(pu={box:this.collisionIndex.placeCollisionBox(Xf,"always",le,U,G,Qt,xt,$,Me.predicate,bn,new a.P(0,0)).box,offscreen:!1,placeable:!1}),pu};Ml((()=>ma(Xf,Vt.iconBox,a.ah.horizontal)),(()=>{const jr=Vt.verticalTextBox;return O.allowVerticalPlacement&&(!Br||!Br.placeable)&&Ht.numVerticalGlyphVertices>0&&jr?ma(jr,Vt.verticalIconBox,a.ah.vertical):{box:null,occluded:!0,offscreen:null}})),Br&&(Lr=Br.placeable,to=Br.offscreen);const cl=Il(Br&&Br.placeable);if(!Lr&&this.prevPlacement){const jr=this.prevPlacement.variableOffsets[Ht.crossTileID];jr&&(this.variableOffsets[Ht.crossTileID]=jr,this.markUsedJustification(O,jr.anchor,Ht,cl))}}}if(Pa=Br,Lr=Pa&&Pa.placeable,to=Pa&&Pa.offscreen,Ht.useRuntimeCollisionCircles){const Il=O.text.placedSymbolArray.get(Ht.centerJustifiedTextSymbolIndex),Ml=a.ai(O.textSizeData,Ee,Il),Wu=A.get("text-padding");pa=this.collisionIndex.placeCollisionCircles(ke,Il,O.lineVertexArray,O.glyphOffsetArray,Ml,U,G,H,K,w,Qt,Me.predicate,Ht.collisionCircleDiameter,Wu,$,bn),pa.circles.length&&pa.collisionDetected&&!w&&a.w("Collisions detected, but collision boxes are not shown"),Lr=Xe||pa.circles.length>0&&!pa.collisionDetected,to=to&&pa.offscreen}if(Vt.iconFeatureIndex&&(Bh=Vt.iconFeatureIndex),Vt.iconBox){const Il=Ml=>this.collisionIndex.placeCollisionBox(Ml,Ke,le,U,G,Qt,xt,z,Me.predicate,bn,Gt&&Tl?Tl:void 0);da&&da.placeable&&Vt.verticalIconBox?(Da=Il(Vt.verticalIconBox),Vi=Da.placeable):(Da=Il(Vt.iconBox),Vi=Da.placeable),to=to&&Da.offscreen}const Dl=Le||Ht.numHorizontalGlyphVertices===0&&Ht.numVerticalGlyphVertices===0,ty=Ne||Ht.numIconVertices===0;Dl||ty?ty?Dl||(Vi=Vi&&Lr):Lr=Vi&&Lr:Vi=Lr=Vi&&Lr;const Wf=Vi&&Da.placeable;if(Lr&&Pa.placeable&&this.collisionIndex.insertCollisionBox(Pa.box,ke,A.get("text-ignore-placement"),O.bucketInstanceId,da&&da.placeable&&op?op:Pl,Me.ID),Wf&&this.collisionIndex.insertCollisionBox(Da.box,Ke,A.get("icon-ignore-placement"),O.bucketInstanceId,Bh,Me.ID),pa&&Lr&&this.collisionIndex.insertCollisionCircles(pa.circles,ke,A.get("text-ignore-placement"),O.bucketInstanceId,Pl,Me.ID),w&&this.storeCollisionData(O.bucketInstanceId,Wn,Vt,Pa,Da,pa),Ht.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");if(O.bucketInstanceId===0)throw new Error("bucket.bucketInstanceId can't be 0");this.placements[Ht.crossTileID]=new gr(Lr||Zt,Vi||Xt,to||O.justReloaded),y[Ht.crossTileID]=!0};if(tn){if(u.symbolInstanceStart!==0)throw new Error("bucket.bucketInstanceId should be 0");const Ht=O.getSortedSymbolIndexes(this.transform.angle);for(let Vt=Ht.length-1;Vt>=0;--Vt){const Wn=Ht[Vt];nr(O.symbolInstances.get(Wn),O.collisionArrays[Wn],Wn)}}else for(let Ht=u.symbolInstanceStart;Ht<u.symbolInstanceEnd;Ht++)nr(O.symbolInstances.get(Ht),O.collisionArrays[Ht],Ht);if(w&&O.bucketInstanceId in this.collisionCircleArrays){const Ht=this.collisionCircleArrays[O.bucketInstanceId];a.as(Ht.invProjMatrix,U),Ht.viewportMatrix=this.collisionIndex.getViewportMatrix()}O.justReloaded=!1}storeCollisionData(u,y,w,O,A,$){if(w.textBox||w.iconBox){let z,U;this.collisionBoxArrays.has(u)?z=this.collisionBoxArrays.get(u):(z=new Map,this.collisionBoxArrays.set(u,z)),z.has(y)?U=z.get(y):(U={text:null,icon:null},z.set(y,U)),w.textBox&&(U.text=O.box),w.iconBox&&(U.icon=A.box)}if($){let z=this.collisionCircleArrays[u];z===void 0&&(z=this.collisionCircleArrays[u]=new hi);for(let U=0;U<$.circles.length;U+=4)z.circles.push($.circles[U+0]),z.circles.push($.circles[U+1]),z.circles.push($.circles[U+2]),z.circles.push($.collisionDetected?1:0)}}markUsedJustification(u,y,w,O){let A;A=O===a.ah.vertical?w.verticalPlacedTextSymbolIndex:{left:w.leftJustifiedTextSymbolIndex,center:w.centerJustifiedTextSymbolIndex,right:w.rightJustifiedTextSymbolIndex}[a.at(y)];const $=[w.leftJustifiedTextSymbolIndex,w.centerJustifiedTextSymbolIndex,w.rightJustifiedTextSymbolIndex,w.verticalPlacedTextSymbolIndex];for(const z of $)z>=0&&(u.text.placedSymbolArray.get(z).crossTileID=A>=0&&z!==A?0:w.crossTileID)}markUsedOrientation(u,y,w){const O=y===a.ah.horizontal||y===a.ah.horizontalOnly?y:0,A=y===a.ah.vertical?y:0,$=[w.leftJustifiedTextSymbolIndex,w.centerJustifiedTextSymbolIndex,w.rightJustifiedTextSymbolIndex];for(const z of $)u.text.placedSymbolArray.get(z).placedOrientation=O;w.verticalPlacedTextSymbolIndex&&(u.text.placedSymbolArray.get(w.verticalPlacedTextSymbolIndex).placedOrientation=A)}commit(u){this.commitTime=u,this.zoomAtLastRecencyCheck=this.transform.zoom;const y=this.prevPlacement;let w=!1;this.prevZoomAdjustment=y?y.zoomAdjustment(this.transform.zoom):0;const O=y?y.symbolFadeChange(u):1,A=y?y.opacities:{},$=y?y.variableOffsets:{},z=y?y.placedOrientations:{};for(const U in this.placements){const G=this.placements[U],H=A[U];H?(this.opacities[U]=new ji(H,O,G.text,G.icon),w=w||G.text!==H.text.placed||G.icon!==H.icon.placed):(this.opacities[U]=new ji(null,O,G.text,G.icon,G.skipFade),w=w||G.text||G.icon)}for(const U in A){const G=A[U];if(!this.opacities[U]){const H=new ji(G,O,!1,!1);H.isHidden()||(this.opacities[U]=H,w=w||G.text.placed||G.icon.placed)}}for(const U in $)this.variableOffsets[U]||!this.opacities[U]||this.opacities[U].isHidden()||(this.variableOffsets[U]=$[U]);for(const U in z)this.placedOrientations[U]||!this.opacities[U]||this.opacities[U].isHidden()||(this.placedOrientations[U]=z[U]);if(y&&y.lastPlacementChangeTime===void 0)throw new Error("Last placement time for previous placement is not defined");w?this.lastPlacementChangeTime=u:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=y?y.lastPlacementChangeTime:u)}updateLayerOpacities(u,y){const w={};for(const O of y){const A=O.getBucket(u);A&&O.latestFeatureIndex&&u.id===A.layerIds[0]&&this.updateBucketOpacities(A,O.tileID,w,O.collisionBoxArray)}}updateBucketOpacities(u,y,w,O){u.hasTextData()&&(u.text.opacityVertexArray.clear(),u.text.hasVisibleVertices=!1),u.hasIconData()&&(u.icon.opacityVertexArray.clear(),u.icon.hasVisibleVertices=!1),u.hasIconCollisionBoxData()&&u.iconCollisionBox.collisionVertexArray.clear(),u.hasTextCollisionBoxData()&&u.textCollisionBox.collisionVertexArray.clear();const A=u.layers[0],$=A.layout,z=new ji(null,0,!1,!1,!0),U=$.get("text-allow-overlap"),G=$.get("icon-allow-overlap"),H=A._unevaluatedLayout.hasValue("text-variable-anchor")||A._unevaluatedLayout.hasValue("text-variable-anchor-offset"),K=$.get("text-rotation-alignment")==="map",le=$.get("text-pitch-alignment")==="map",pe=$.get("icon-text-fit")!=="none",_e=new ji(null,0,U&&(G||!u.hasIconData()||$.get("icon-optional")),G&&(U||!u.hasTextData()||$.get("text-optional")),!0);!u.collisionArrays&&O&&(u.hasIconCollisionBoxData()||u.hasTextCollisionBoxData())&&u.deserializeCollisionBoxes(O);const Ee=(Le,Ne,ke)=>{for(let Xe=0;Xe<Ne/4;Xe++)Le.opacityVertexArray.emplaceBack(ke);Le.hasVisibleVertices=Le.hasVisibleVertices||ke!==Ss},Me=this.collisionBoxArrays.get(u.bucketInstanceId);for(let Le=0;Le<u.symbolInstances.length;Le++){const Ne=u.symbolInstances.get(Le),{numHorizontalGlyphVertices:ke,numVerticalGlyphVertices:Xe,crossTileID:Ke}=Ne;let st=this.opacities[Ke];w[Ke]?st=z:st||(st=_e,this.opacities[Ke]=st),w[Ke]=!0;const xt=Ne.numIconVertices>0,Qt=this.placedOrientations[Ne.crossTileID],Gt=Qt===a.ah.vertical,tn=Qt===a.ah.horizontal||Qt===a.ah.horizontalOnly;if(ke>0||Xe>0){const Xt=Ci(st.text);Ee(u.text,ke,Gt?Ss:Xt),Ee(u.text,Xe,tn?Ss:Xt);const bn=st.text.isHidden();[Ne.rightJustifiedTextSymbolIndex,Ne.centerJustifiedTextSymbolIndex,Ne.leftJustifiedTextSymbolIndex].forEach((Vt=>{Vt>=0&&(u.text.placedSymbolArray.get(Vt).hidden=bn||Gt?1:0)})),Ne.verticalPlacedTextSymbolIndex>=0&&(u.text.placedSymbolArray.get(Ne.verticalPlacedTextSymbolIndex).hidden=bn||tn?1:0);const nr=this.variableOffsets[Ne.crossTileID];nr&&this.markUsedJustification(u,nr.anchor,Ne,Qt);const Ht=this.placedOrientations[Ne.crossTileID];Ht&&(this.markUsedJustification(u,"left",Ne,Ht),this.markUsedOrientation(u,Ht,Ne))}if(xt){const Xt=Ci(st.icon),bn=!(pe&&Ne.verticalPlacedIconSymbolIndex&&Gt);Ne.placedIconSymbolIndex>=0&&(Ee(u.icon,Ne.numIconVertices,bn?Xt:Ss),u.icon.placedSymbolArray.get(Ne.placedIconSymbolIndex).hidden=st.icon.isHidden()),Ne.verticalPlacedIconSymbolIndex>=0&&(Ee(u.icon,Ne.numVerticalIconVertices,bn?Ss:Xt),u.icon.placedSymbolArray.get(Ne.verticalPlacedIconSymbolIndex).hidden=st.icon.isHidden())}const Zt=Me&&Me.has(Le)?Me.get(Le):{text:null,icon:null};if(u.hasIconCollisionBoxData()||u.hasTextCollisionBoxData()){const Xt=u.collisionArrays[Le];if(Xt){let bn=new a.P(0,0);if(Xt.textBox||Xt.verticalTextBox){let nr=!0;if(H){const Ht=this.variableOffsets[Ke];Ht?(bn=Je(Ht.anchor,Ht.width,Ht.height,Ht.textOffset,Ht.textBoxScale),K&&bn._rotate(le?this.transform.angle:-this.transform.angle)):nr=!1}if(Xt.textBox||Xt.verticalTextBox){let Ht;Xt.textBox&&(Ht=Gt),Xt.verticalTextBox&&(Ht=tn),Wt(u.textCollisionBox.collisionVertexArray,st.text.placed,!nr||Ht,Zt.text,bn.x,bn.y)}}if(Xt.iconBox||Xt.verticalIconBox){const nr=!!(!tn&&Xt.verticalIconBox);let Ht;Xt.iconBox&&(Ht=nr),Xt.verticalIconBox&&(Ht=!nr),Wt(u.iconCollisionBox.collisionVertexArray,st.icon.placed,Ht,Zt.icon,pe?bn.x:0,pe?bn.y:0)}}}}if(u.sortFeatures(this.transform.angle),this.retainedQueryData[u.bucketInstanceId]&&(this.retainedQueryData[u.bucketInstanceId].featureSortOrder=u.featureSortOrder),u.hasTextData()&&u.text.opacityVertexBuffer&&u.text.opacityVertexBuffer.updateData(u.text.opacityVertexArray),u.hasIconData()&&u.icon.opacityVertexBuffer&&u.icon.opacityVertexBuffer.updateData(u.icon.opacityVertexArray),u.hasIconCollisionBoxData()&&u.iconCollisionBox.collisionVertexBuffer&&u.iconCollisionBox.collisionVertexBuffer.updateData(u.iconCollisionBox.collisionVertexArray),u.hasTextCollisionBoxData()&&u.textCollisionBox.collisionVertexBuffer&&u.textCollisionBox.collisionVertexBuffer.updateData(u.textCollisionBox.collisionVertexArray),u.text.opacityVertexArray.length!==u.text.layoutVertexArray.length/4)throw new Error(`bucket.text.opacityVertexArray.length (= ${u.text.opacityVertexArray.length}) !== bucket.text.layoutVertexArray.length (= ${u.text.layoutVertexArray.length}) / 4`);if(u.icon.opacityVertexArray.length!==u.icon.layoutVertexArray.length/4)throw new Error(`bucket.icon.opacityVertexArray.length (= ${u.icon.opacityVertexArray.length}) !== bucket.icon.layoutVertexArray.length (= ${u.icon.layoutVertexArray.length}) / 4`);if(u.bucketInstanceId in this.collisionCircleArrays){const Le=this.collisionCircleArrays[u.bucketInstanceId];u.placementInvProjMatrix=Le.invProjMatrix,u.placementViewportMatrix=Le.viewportMatrix,u.collisionCircleArray=Le.circles,delete this.collisionCircleArrays[u.bucketInstanceId]}}symbolFadeChange(u){return this.fadeDuration===0?1:(u-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(u){return Math.max(0,(this.transform.zoom-u)/1.5)}hasTransitions(u){return this.stale||u-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(u,y){const w=this.zoomAtLastRecencyCheck===y?1-this.zoomAdjustment(y):1;return this.zoomAtLastRecencyCheck=y,this.commitTime+this.fadeDuration*w>u}setStale(){this.stale=!0}}function Wt(E,u,y,w,O,A){w&&w.length!==0||(w=[0,0,0,0]);const $=w[0]-Gn,z=w[1]-Gn,U=w[2]-Gn,G=w[3]-Gn;E.emplaceBack(u?1:0,y?1:0,O||0,A||0,$,z),E.emplaceBack(u?1:0,y?1:0,O||0,A||0,U,z),E.emplaceBack(u?1:0,y?1:0,O||0,A||0,U,G),E.emplaceBack(u?1:0,y?1:0,O||0,A||0,$,G)}const $t=Math.pow(2,25),mn=Math.pow(2,24),tr=Math.pow(2,17),rr=Math.pow(2,16),Hn=Math.pow(2,9),ps=Math.pow(2,8),Mr=Math.pow(2,1);function Ci(E){if(E.opacity===0&&!E.placed)return 0;if(E.opacity===1&&E.placed)return 4294967295;const u=E.placed?1:0,y=Math.floor(127*E.opacity);return y*$t+u*mn+y*tr+u*rr+y*Hn+u*ps+y*Mr+u}const Ss=0;function ha(){return{isOccluded:(E,u,y)=>!1,getPitchedTextCorrection:(E,u,y)=>1,get useSpecialProjectionForSymbols(){return!1},projectTileCoordinates(E,u,y,w){throw new Error("Not implemented.")},translatePosition:(E,u,y,w)=>(function(O,A,$,z,U=!1){if(!$[0]&&!$[1])return[0,0];const G=U?z==="map"?O.angle:0:z==="viewport"?-O.angle:0;if(G){const H=Math.sin(G),K=Math.cos(G);$=[$[0]*K-$[1]*H,$[0]*H+$[1]*K]}return[U?$[0]:Cr(A,$[0],O.zoom),U?$[1]:Cr(A,$[1],O.zoom)]})(E,u,y,w),getCircleRadiusCorrection:E=>1}}class Rs{constructor(u){this._sortAcrossTiles=u.layout.get("symbol-z-order")!=="viewport-y"&&!u.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(u,y,w,O,A){const $=this._bucketParts;for(;this._currentTileIndex<u.length;)if(y.getBucketParts($,O,u[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,A())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,$.sort(((z,U)=>z.sortKey-U.sortKey)));this._currentPartIndex<$.length;)if(y.placeLayerBucketPart($[this._currentPartIndex],this._seenCrossTileIDs,w),this._currentPartIndex++,A())return!0;return!1}}class Vu{constructor(u,y,w,O,A,$,z,U){this.placement=new ft(u,ha(),y,$,z,U),this._currentPlacementIndex=w.length-1,this._forceFullPlacement=O,this._showCollisionBoxes=A,this._done=!1}isDone(){return this._done}continuePlacement(u,y,w){const O=p.now(),A=()=>!this._forceFullPlacement&&p.now()-O>2;for(;this._currentPlacementIndex>=0;){const $=y[u[this._currentPlacementIndex]],z=this.placement.collisionIndex.transform.zoom;if($.type==="symbol"&&(!$.minzoom||$.minzoom<=z)&&(!$.maxzoom||$.maxzoom>z)){if(this._inProgressLayer||(this._inProgressLayer=new Rs($)),this._inProgressLayer.continuePlacement(w[$.source],this.placement,this._showCollisionBoxes,$,A))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(u){return this.placement.commit(u),this.placement}}const ks=512/a.X/2;class Li{constructor(u,y,w){this.tileID=u,this.bucketInstanceId=w,this._symbolsByKey={};const O=new Map;for(let A=0;A<y.length;A++){const $=y.get(A),z=$.key,U=O.get(z);U?U.push($):O.set(z,[$])}for(const[A,$]of O){const z={positions:$.map((U=>({x:Math.floor(U.anchorX*ks),y:Math.floor(U.anchorY*ks)}))),crossTileIDs:$.map((U=>U.crossTileID))};if(z.positions.length>128){const U=new a.av(z.positions.length,16,Uint16Array);for(const{x:G,y:H}of z.positions)U.add(G,H);U.finish(),delete z.positions,z.index=U}this._symbolsByKey[A]=z}}getScaledCoordinates(u,y){const{x:w,y:O,z:A}=this.tileID.canonical,{x:$,y:z,z:U}=y.canonical,G=ks/Math.pow(2,U-A),H=(z*a.X+u.anchorY)*G,K=O*a.X*ks;return{x:Math.floor(($*a.X+u.anchorX)*G-w*a.X*ks),y:Math.floor(H-K)}}findMatches(u,y,w){const O=this.tileID.canonical.z<y.canonical.z?1:Math.pow(2,this.tileID.canonical.z-y.canonical.z);for(let A=0;A<u.length;A++){const $=u.get(A);if($.crossTileID)continue;const z=this._symbolsByKey[$.key];if(!z)continue;const U=this.getScaledCoordinates($,y);if(z.index){const G=z.index.range(U.x-O,U.y-O,U.x+O,U.y+O).sort();for(const H of G){const K=z.crossTileIDs[H];if(!w[K]){w[K]=!0,$.crossTileID=K;break}}}else if(z.positions)for(let G=0;G<z.positions.length;G++){const H=z.positions[G],K=z.crossTileIDs[G];if(Math.abs(H.x-U.x)<=O&&Math.abs(H.y-U.y)<=O&&!w[K]){w[K]=!0,$.crossTileID=K;break}}}}getCrossTileIDsLists(){return Object.values(this._symbolsByKey).map((({crossTileIDs:u})=>u))}}class kh{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class hu{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(u){const y=Math.round((u-this.lng)/360);if(y!==0)for(const w in this.indexes){const O=this.indexes[w],A={};for(const $ in O){const z=O[$];z.tileID=z.tileID.unwrapTo(z.tileID.wrap+y),A[z.tileID.key]=z}this.indexes[w]=A}this.lng=u}addBucket(u,y,w){if(this.indexes[u.overscaledZ]&&this.indexes[u.overscaledZ][u.key]){if(this.indexes[u.overscaledZ][u.key].bucketInstanceId===y.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(u.overscaledZ,this.indexes[u.overscaledZ][u.key])}for(let A=0;A<y.symbolInstances.length;A++)y.symbolInstances.get(A).crossTileID=0;this.usedCrossTileIDs[u.overscaledZ]||(this.usedCrossTileIDs[u.overscaledZ]={});const O=this.usedCrossTileIDs[u.overscaledZ];for(const A in this.indexes){const $=this.indexes[A];if(Number(A)>u.overscaledZ)for(const z in $){const U=$[z];U.tileID.isChildOf(u)&&U.findMatches(y.symbolInstances,u,O)}else{const z=$[u.scaledTo(Number(A)).key];z&&z.findMatches(y.symbolInstances,u,O)}}for(let A=0;A<y.symbolInstances.length;A++){const $=y.symbolInstances.get(A);$.crossTileID||($.crossTileID=w.generate(),O[$.crossTileID]=!0)}return this.indexes[u.overscaledZ]===void 0&&(this.indexes[u.overscaledZ]={}),this.indexes[u.overscaledZ][u.key]=new Li(u,y.symbolInstances,y.bucketInstanceId),!0}removeBucketCrossTileIDs(u,y){for(const w of y.getCrossTileIDsLists())for(const O of w)delete this.usedCrossTileIDs[u][O]}removeStaleBuckets(u){let y=!1;for(const w in this.indexes){const O=this.indexes[w];for(const A in O)u[O[A].bucketInstanceId]||(this.removeBucketCrossTileIDs(w,O[A]),delete O[A],y=!0)}return y}}class I0{constructor(){this.layerIndexes={},this.crossTileIDs=new kh,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(u,y,w){let O=this.layerIndexes[u.id];O===void 0&&(O=this.layerIndexes[u.id]=new hu);let A=!1;const $={};O.handleWrapJump(w);for(const z of y){const U=z.getBucket(u);U&&u.id===U.layerIds[0]&&(U.bucketInstanceId||(U.bucketInstanceId=++this.maxBucketInstanceId),O.addBucket(z.tileID,U,this.crossTileIDs)&&(A=!0),$[U.bucketInstanceId]=!0)}return O.removeStaleBuckets($)&&(A=!0),A}pruneUnusedLayers(u){const y={};u.forEach((w=>{y[w]=!0}));for(const w in this.layerIndexes)y[w]||delete this.layerIndexes[w]}}const ja=(E,u)=>a.t(E,u&&u.filter((y=>y.identifier!=="source.canvas"))),O_=a.aw();class M0 extends a.E{constructor(u,y={}){super(),this._rtlPluginLoaded=()=>{for(const w in this.sourceCaches){const O=this.sourceCaches[w].getSource().type;O!=="vector"&&O!=="geojson"||this.sourceCaches[w].reload()}},this.map=u,this.dispatcher=new Kt(Ot(),u._getMapId()),this.dispatcher.registerMessageHandler("GG",((w,O)=>this.getGlyphs(w,O))),this.dispatcher.registerMessageHandler("GI",((w,O)=>this.getImages(w,O))),this.imageManager=new se,this.imageManager.setEventedParent(this),this.glyphManager=new De(u._requestManager,y.localIdeographFontFamily),this.lineAtlas=new ut(256,512),this.crossTileSymbolIndex=new I0,this._spritesImagesIds={},this._layers={},this._order=[],this.sourceCaches={},this.zoomHistory=new a.ax,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("SR",a.ay()),js().on(Ct,this._rtlPluginLoaded),this.on("data",(w=>{if(w.dataType!=="source"||w.sourceDataType!=="metadata")return;const O=this.sourceCaches[w.sourceId];if(!O)return;const A=O.getSource();if(A&&A.vectorLayerIds)for(const $ in this._layers){const z=this._layers[$];z.source===A.id&&this._validateLayer(z)}}))}loadURL(u,y={},w){this.fire(new a.k("dataloading",{dataType:"style"})),y.validate=typeof y.validate!="boolean"||y.validate;const O=this.map._requestManager.transformRequest(u,"Style");this._loadStyleRequest=new AbortController;const A=this._loadStyleRequest;a.h(O,this._loadStyleRequest).then(($=>{this._loadStyleRequest=null,this._load($.data,y,w)})).catch(($=>{this._loadStyleRequest=null,$&&!A.signal.aborted&&this.fire(new a.j($))}))}loadJSON(u,y={},w){this.fire(new a.k("dataloading",{dataType:"style"})),this._frameRequest=new AbortController,p.frameAsync(this._frameRequest).then((()=>{this._frameRequest=null,y.validate=y.validate!==!1,this._load(u,y,w)})).catch((()=>{}))}loadEmpty(){this.fire(new a.k("dataloading",{dataType:"style"})),this._load(O_,{validate:!1})}_load(u,y,w){var O;const A=y.transformStyle?y.transformStyle(w,u):u;if(!y.validate||!ja(this,a.u(A))){this._loaded=!0,this.stylesheet=A;for(const $ in A.sources)this.addSource($,A.sources[$],{validate:!1});A.sprite?this._loadSprite(A.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(A.glyphs),this._createLayers(),this.light=new yt(this.stylesheet.light),this.sky=new at(this.stylesheet.sky),this.map.setTerrain((O=this.stylesheet.terrain)!==null&&O!==void 0?O:null),this.fire(new a.k("data",{dataType:"style"})),this.fire(new a.k("style.load"))}}_createLayers(){const u=a.az(this.stylesheet.layers);this.dispatcher.broadcast("SL",u),this._order=u.map((y=>y.id)),this._layers={},this._serializedLayers=null;for(const y of u){const w=a.aA(y);w.setEventedParent(this,{layer:{id:y.id}}),this._layers[y.id]=w}}_loadSprite(u,y=!1,w=void 0){let O;this.imageManager.setLoaded(!1),this._spriteRequest=new AbortController,(function(A,$,z,U){return a._(this,void 0,void 0,(function*(){const G=oe(A),H=z>1?"@2x":"",K={},le={};for(const{id:pe,url:_e}of G){const Ee=$.transformRequest(me(_e,H,".json"),"SpriteJSON");K[pe]=a.h(Ee,U);const Me=$.transformRequest(me(_e,H,".png"),"SpriteImage");le[pe]=B.getImage(Me,U)}return yield Promise.all([...Object.values(K),...Object.values(le)]),(function(pe,_e){return a._(this,void 0,void 0,(function*(){const Ee={};for(const Me in pe){Ee[Me]={};const Le=p.getImageCanvasContext((yield _e[Me]).data),Ne=(yield pe[Me]).data;for(const ke in Ne){const{width:Xe,height:Ke,x:st,y:xt,sdf:Qt,pixelRatio:Gt,stretchX:tn,stretchY:Zt,content:Xt,textFitWidth:bn,textFitHeight:nr}=Ne[ke];Ee[Me][ke]={data:null,pixelRatio:Gt,sdf:Qt,stretchX:tn,stretchY:Zt,content:Xt,textFitWidth:bn,textFitHeight:nr,spriteData:{width:Xe,height:Ke,x:st,y:xt,context:Le}}}}return Ee}))})(K,le)}))})(u,this.map._requestManager,this.map.getPixelRatio(),this._spriteRequest).then((A=>{if(this._spriteRequest=null,A)for(const $ in A){this._spritesImagesIds[$]=[];const z=this._spritesImagesIds[$]?this._spritesImagesIds[$].filter((U=>!(U in A))):[];for(const U of z)this.imageManager.removeImage(U),this._changedImages[U]=!0;for(const U in A[$]){const G=$==="default"?U:`${$}:${U}`;this._spritesImagesIds[$].push(G),G in this.imageManager.images?this.imageManager.updateImage(G,A[$][U],!1):this.imageManager.addImage(G,A[$][U]),y&&(this._changedImages[G]=!0)}}})).catch((A=>{this._spriteRequest=null,O=A,this.fire(new a.j(O))})).finally((()=>{this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),y&&(this._changed=!0),this.dispatcher.broadcast("SI",this._availableImages),this.fire(new a.k("data",{dataType:"style"})),w&&w(O)}))}_unloadSprite(){for(const u of Object.values(this._spritesImagesIds).flat())this.imageManager.removeImage(u),this._changedImages[u]=!0;this._spritesImagesIds={},this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new a.k("data",{dataType:"style"}))}_validateLayer(u){const y=this.sourceCaches[u.source];if(!y)return;const w=u.sourceLayer;if(!w)return;const O=y.getSource();(O.type==="geojson"||O.vectorLayerIds&&O.vectorLayerIds.indexOf(w)===-1)&&this.fire(new a.j(new Error(`Source layer "${w}" does not exist on source "${O.id}" as specified by style layer "${u.id}".`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const u in this.sourceCaches)if(!this.sourceCaches[u].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeByIds(u,y=!1){const w=this._serializedAllLayers();if(!u||u.length===0)return Object.values(y?a.aB(w):w);const O=[];for(const A of u)if(w[A]){const $=y?a.aB(w[A]):w[A];O.push($)}return O}_serializedAllLayers(){let u=this._serializedLayers;if(u)return u;u=this._serializedLayers={};const y=Object.keys(this._layers);for(const w of y){const O=this._layers[w];O.type!=="custom"&&(u[w]=O.serialize())}return u}hasTransitions(){if(this.light&&this.light.hasTransition()||this.sky&&this.sky.hasTransition())return!0;for(const u in this.sourceCaches)if(this.sourceCaches[u].hasTransition())return!0;for(const u in this._layers)if(this._layers[u].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading.")}update(u){if(!this._loaded)return;const y=this._changed;if(y){const O=Object.keys(this._updatedLayers),A=Object.keys(this._removedLayers);(O.length||A.length)&&this._updateWorkerLayers(O,A);for(const $ in this._updatedSources){const z=this._updatedSources[$];if(z==="reload")this._reloadSource($);else{if(z!=="clear")throw new Error(`Invalid action ${z}`);this._clearSource($)}}this._updateTilesForChangedImages(),this._updateTilesForChangedGlyphs();for(const $ in this._updatedPaintProps)this._layers[$].updateTransitions(u);this.light.updateTransitions(u),this.sky.updateTransitions(u),this._resetUpdates()}const w={};for(const O in this.sourceCaches){const A=this.sourceCaches[O];w[O]=A.used,A.used=!1}for(const O of this._order){const A=this._layers[O];A.recalculate(u,this._availableImages),!A.isHidden(u.zoom)&&A.source&&(this.sourceCaches[A.source].used=!0)}for(const O in w){const A=this.sourceCaches[O];!!w[O]!=!!A.used&&A.fire(new a.k("data",{sourceDataType:"visibility",dataType:"source",sourceId:O}))}this.light.recalculate(u),this.sky.recalculate(u),this.z=u.zoom,y&&this.fire(new a.k("data",{dataType:"style"}))}_updateTilesForChangedImages(){const u=Object.keys(this._changedImages);if(u.length){for(const y in this.sourceCaches)this.sourceCaches[y].reloadTilesForDependencies(["icons","patterns"],u);this._changedImages={}}}_updateTilesForChangedGlyphs(){if(this._glyphsDidChange){for(const u in this.sourceCaches)this.sourceCaches[u].reloadTilesForDependencies(["glyphs"],[""]);this._glyphsDidChange=!1}}_updateWorkerLayers(u,y){this.dispatcher.broadcast("UL",{layers:this._serializeByIds(u,!1),removedIds:y})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={},this._glyphsDidChange=!1}setState(u,y={}){var w;this._checkLoaded();const O=this.serialize();if(u=y.transformStyle?y.transformStyle(O,u):u,((w=y.validate)===null||w===void 0||w)&&ja(this,a.u(u)))return!1;(u=a.aB(u)).layers=a.az(u.layers);const A=a.aC(O,u),$=this._getOperationsToPerform(A);if($.unimplemented.length>0)throw new Error(`Unimplemented: ${$.unimplemented.join(", ")}.`);if($.operations.length===0)return!1;for(const z of $.operations)z();return this.stylesheet=u,this._serializedLayers=null,!0}_getOperationsToPerform(u){const y=[],w=[];for(const O of u)switch(O.command){case"setCenter":case"setZoom":case"setBearing":case"setPitch":continue;case"addLayer":y.push((()=>this.addLayer.apply(this,O.args)));break;case"removeLayer":y.push((()=>this.removeLayer.apply(this,O.args)));break;case"setPaintProperty":y.push((()=>this.setPaintProperty.apply(this,O.args)));break;case"setLayoutProperty":y.push((()=>this.setLayoutProperty.apply(this,O.args)));break;case"setFilter":y.push((()=>this.setFilter.apply(this,O.args)));break;case"addSource":y.push((()=>this.addSource.apply(this,O.args)));break;case"removeSource":y.push((()=>this.removeSource.apply(this,O.args)));break;case"setLayerZoomRange":y.push((()=>this.setLayerZoomRange.apply(this,O.args)));break;case"setLight":y.push((()=>this.setLight.apply(this,O.args)));break;case"setGeoJSONSourceData":y.push((()=>this.setGeoJSONSourceData.apply(this,O.args)));break;case"setGlyphs":y.push((()=>this.setGlyphs.apply(this,O.args)));break;case"setSprite":y.push((()=>this.setSprite.apply(this,O.args)));break;case"setSky":y.push((()=>this.setSky.apply(this,O.args)));break;case"setTerrain":y.push((()=>this.map.setTerrain.apply(this,O.args)));break;case"setTransition":y.push((()=>{}));break;default:w.push(O.command)}return{operations:y,unimplemented:w}}addImage(u,y){if(this.getImage(u))return this.fire(new a.j(new Error(`An image named "${u}" already exists.`)));this.imageManager.addImage(u,y),this._afterImageUpdated(u)}updateImage(u,y){this.imageManager.updateImage(u,y)}getImage(u){return this.imageManager.getImage(u)}removeImage(u){if(!this.getImage(u))return this.fire(new a.j(new Error(`An image named "${u}" does not exist.`)));this.imageManager.removeImage(u),this._afterImageUpdated(u)}_afterImageUpdated(u){this._availableImages=this.imageManager.listImages(),this._changedImages[u]=!0,this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new a.k("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(u,y,w={}){if(this._checkLoaded(),this.sourceCaches[u]!==void 0)throw new Error(`Source "${u}" already exists.`);if(!y.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(y).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(y.type)>=0&&this._validate(a.u.source,`sources.${u}`,y,null,w))return;this.map&&this.map._collectResourceTiming&&(y.collectResourceTiming=!0);const O=this.sourceCaches[u]=new rn(u,y,this.dispatcher);O.style=this,O.setEventedParent(this,(()=>({isSourceLoaded:O.loaded(),source:O.serialize(),sourceId:u}))),O.onAdd(this.map),this._changed=!0}removeSource(u){if(this._checkLoaded(),this.sourceCaches[u]===void 0)throw new Error("There is no source with this ID");for(const w in this._layers)if(this._layers[w].source===u)return this.fire(new a.j(new Error(`Source "${u}" cannot be removed while layer "${w}" is using it.`)));const y=this.sourceCaches[u];delete this.sourceCaches[u],delete this._updatedSources[u],y.fire(new a.k("data",{sourceDataType:"metadata",dataType:"source",sourceId:u})),y.setEventedParent(null),y.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(u,y){if(this._checkLoaded(),this.sourceCaches[u]===void 0)throw new Error(`There is no source with this ID=${u}`);const w=this.sourceCaches[u].getSource();if(w.type!=="geojson")throw new Error(`geojsonSource.type is ${w.type}, which is !== 'geojson`);w.setData(y),this._changed=!0}getSource(u){return this.sourceCaches[u]&&this.sourceCaches[u].getSource()}addLayer(u,y,w={}){this._checkLoaded();const O=u.id;if(this.getLayer(O))return void this.fire(new a.j(new Error(`Layer "${O}" already exists on this map.`)));let A;if(u.type==="custom"){if(ja(this,a.aD(u)))return;A=a.aA(u)}else{if("source"in u&&typeof u.source=="object"&&(this.addSource(O,u.source),u=a.aB(u),u=a.e(u,{source:O})),this._validate(a.u.layer,`layers.${O}`,u,{arrayIndex:-1},w))return;A=a.aA(u),this._validateLayer(A),A.setEventedParent(this,{layer:{id:O}})}const $=y?this._order.indexOf(y):this._order.length;if(y&&$===-1)this.fire(new a.j(new Error(`Cannot add layer "${O}" before non-existing layer "${y}".`)));else{if(this._order.splice($,0,O),this._layerOrderChanged=!0,this._layers[O]=A,this._removedLayers[O]&&A.source&&A.type!=="custom"){const z=this._removedLayers[O];delete this._removedLayers[O],z.type!==A.type?this._updatedSources[A.source]="clear":(this._updatedSources[A.source]="reload",this.sourceCaches[A.source].pause())}this._updateLayer(A),A.onAdd&&A.onAdd(this.map)}}moveLayer(u,y){if(this._checkLoaded(),this._changed=!0,!this._layers[u])return void this.fire(new a.j(new Error(`The layer '${u}' does not exist in the map's style and cannot be moved.`)));if(u===y)return;const w=this._order.indexOf(u);this._order.splice(w,1);const O=y?this._order.indexOf(y):this._order.length;y&&O===-1?this.fire(new a.j(new Error(`Cannot move layer "${u}" before non-existing layer "${y}".`))):(this._order.splice(O,0,u),this._layerOrderChanged=!0)}removeLayer(u){this._checkLoaded();const y=this._layers[u];if(!y)return void this.fire(new a.j(new Error(`Cannot remove non-existing layer "${u}".`)));y.setEventedParent(null);const w=this._order.indexOf(u);this._order.splice(w,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[u]=y,delete this._layers[u],this._serializedLayers&&delete this._serializedLayers[u],delete this._updatedLayers[u],delete this._updatedPaintProps[u],y.onRemove&&y.onRemove(this.map)}getLayer(u){return this._layers[u]}getLayersOrder(){return[...this._order]}hasLayer(u){return u in this._layers}setLayerZoomRange(u,y,w){this._checkLoaded();const O=this.getLayer(u);O?O.minzoom===y&&O.maxzoom===w||(y!=null&&(O.minzoom=y),w!=null&&(O.maxzoom=w),this._updateLayer(O)):this.fire(new a.j(new Error(`Cannot set the zoom range of non-existing layer "${u}".`)))}setFilter(u,y,w={}){this._checkLoaded();const O=this.getLayer(u);if(O){if(!a.aE(O.filter,y))return y==null?(O.filter=void 0,void this._updateLayer(O)):void(this._validate(a.u.filter,`layers.${O.id}.filter`,y,null,w)||(O.filter=a.aB(y),this._updateLayer(O)))}else this.fire(new a.j(new Error(`Cannot filter non-existing layer "${u}".`)))}getFilter(u){return a.aB(this.getLayer(u).filter)}setLayoutProperty(u,y,w,O={}){this._checkLoaded();const A=this.getLayer(u);A?a.aE(A.getLayoutProperty(y),w)||(A.setLayoutProperty(y,w,O),this._updateLayer(A)):this.fire(new a.j(new Error(`Cannot style non-existing layer "${u}".`)))}getLayoutProperty(u,y){const w=this.getLayer(u);if(w)return w.getLayoutProperty(y);this.fire(new a.j(new Error(`Cannot get style of non-existing layer "${u}".`)))}setPaintProperty(u,y,w,O={}){this._checkLoaded();const A=this.getLayer(u);A?a.aE(A.getPaintProperty(y),w)||(A.setPaintProperty(y,w,O)&&this._updateLayer(A),this._changed=!0,this._updatedPaintProps[u]=!0,this._serializedLayers=null):this.fire(new a.j(new Error(`Cannot style non-existing layer "${u}".`)))}getPaintProperty(u,y){return this.getLayer(u).getPaintProperty(y)}setFeatureState(u,y){this._checkLoaded();const w=u.source,O=u.sourceLayer,A=this.sourceCaches[w];if(A===void 0)return void this.fire(new a.j(new Error(`The source '${w}' does not exist in the map's style.`)));const $=A.getSource().type;$==="geojson"&&O?this.fire(new a.j(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):$!=="vector"||O?(u.id===void 0&&this.fire(new a.j(new Error("The feature id parameter must be provided."))),A.setFeatureState(O,u.id,y)):this.fire(new a.j(new Error("The sourceLayer parameter must be provided for vector source types.")))}removeFeatureState(u,y){this._checkLoaded();const w=u.source,O=this.sourceCaches[w];if(O===void 0)return void this.fire(new a.j(new Error(`The source '${w}' does not exist in the map's style.`)));const A=O.getSource().type,$=A==="vector"?u.sourceLayer:void 0;A!=="vector"||$?y&&typeof u.id!="string"&&typeof u.id!="number"?this.fire(new a.j(new Error("A feature id is required to remove its specific state property."))):O.removeFeatureState($,u.id,y):this.fire(new a.j(new Error("The sourceLayer parameter must be provided for vector source types.")))}getFeatureState(u){this._checkLoaded();const y=u.source,w=u.sourceLayer,O=this.sourceCaches[y];if(O!==void 0)return O.getSource().type!=="vector"||w?(u.id===void 0&&this.fire(new a.j(new Error("The feature id parameter must be provided."))),O.getFeatureState(w,u.id)):void this.fire(new a.j(new Error("The sourceLayer parameter must be provided for vector source types.")));this.fire(new a.j(new Error(`The source '${y}' does not exist in the map's style.`)))}getTransition(){return a.e({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){if(!this._loaded)return;const u=a.aF(this.sourceCaches,(A=>A.serialize())),y=this._serializeByIds(this._order,!0),w=this.map.getTerrain()||void 0,O=this.stylesheet;return a.aG({version:O.version,name:O.name,metadata:O.metadata,light:O.light,sky:O.sky,center:O.center,zoom:O.zoom,bearing:O.bearing,pitch:O.pitch,sprite:O.sprite,glyphs:O.glyphs,transition:O.transition,sources:u,layers:y,terrain:w},(A=>A!==void 0))}_updateLayer(u){this._updatedLayers[u.id]=!0,u.source&&!this._updatedSources[u.source]&&this.sourceCaches[u.source].getSource().type!=="raster"&&(this._updatedSources[u.source]="reload",this.sourceCaches[u.source].pause()),this._serializedLayers=null,this._changed=!0}_flattenAndSortRenderedFeatures(u){const y=$=>this._layers[$].type==="fill-extrusion",w={},O=[];for(let $=this._order.length-1;$>=0;$--){const z=this._order[$];if(y(z)){w[z]=$;for(const U of u){const G=U[z];if(G)for(const H of G)O.push(H)}}}O.sort((($,z)=>z.intersectionZ-$.intersectionZ));const A=[];for(let $=this._order.length-1;$>=0;$--){const z=this._order[$];if(y(z))for(let U=O.length-1;U>=0;U--){const G=O[U].feature;if(w[G.layer.id]<$)break;A.push(G),O.pop()}else for(const U of u){const G=U[z];if(G)for(const H of G)A.push(H.feature)}}return A}queryRenderedFeatures(u,y,w){y&&y.filter&&this._validate(a.u.filter,"queryRenderedFeatures.filter",y.filter,null,y);const O={};if(y&&y.layers){if(!Array.isArray(y.layers))return this.fire(new a.j(new Error("parameters.layers must be an Array."))),[];for(const z of y.layers){const U=this._layers[z];if(!U)return this.fire(new a.j(new Error(`The layer '${z}' does not exist in the map's style and cannot be queried for features.`))),[];O[U.source]=!0}}const A=[];y.availableImages=this._availableImages;const $=this._serializedAllLayers();for(const z in this.sourceCaches)y.layers&&!O[z]||A.push(At(this.sourceCaches[z],this._layers,$,u,y,w));return this.placement&&A.push((function(z,U,G,H,K,le,pe){const _e={},Ee=le.queryRenderedSymbols(H),Me=[];for(const Le of Object.keys(Ee).map(Number))Me.push(pe[Le]);Me.sort(zt);for(const Le of Me){const Ne=Le.featureIndex.lookupSymbolFeatures(Ee[Le.bucketInstanceId],U,Le.bucketIndex,Le.sourceLayerIndex,K.filter,K.layers,K.availableImages,z);for(const ke in Ne){const Xe=_e[ke]=_e[ke]||[],Ke=Ne[ke];Ke.sort(((st,xt)=>{const Qt=Le.featureSortOrder;if(Qt){const Gt=Qt.indexOf(st.featureIndex);return Qt.indexOf(xt.featureIndex)-Gt}return xt.featureIndex-st.featureIndex}));for(const st of Ke)Xe.push(st)}}for(const Le in _e)_e[Le].forEach((Ne=>{const ke=Ne.feature,Xe=G[z[Le].source].getFeatureState(ke.layer["source-layer"],ke.id);ke.source=ke.layer.source,ke.layer["source-layer"]&&(ke.sourceLayer=ke.layer["source-layer"]),ke.state=Xe}));return _e})(this._layers,$,this.sourceCaches,u,y,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(A)}querySourceFeatures(u,y){y&&y.filter&&this._validate(a.u.filter,"querySourceFeatures.filter",y.filter,null,y);const w=this.sourceCaches[u];return w?(function(O,A){const $=O.getRenderableIds().map((G=>O.getTileByID(G))),z=[],U={};for(let G=0;G<$.length;G++){const H=$[G],K=H.tileID.canonical.key;U[K]||(U[K]=!0,H.querySourceFeatures(z,A))}return z})(w,y):[]}getLight(){return this.light.getLight()}setLight(u,y={}){this._checkLoaded();const w=this.light.getLight();let O=!1;for(const $ in u)if(!a.aE(u[$],w[$])){O=!0;break}if(!O)return;const A={now:p.now(),transition:a.e({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(u,y),this.light.updateTransitions(A)}getSky(){var u;return(u=this.stylesheet)===null||u===void 0?void 0:u.sky}setSky(u,y={}){const w=this.getSky();let O=!1;if(!u&&!w)return;if(u&&!w)O=!0;else if(!u&&w)O=!0;else for(const $ in u)if(!a.aE(u[$],w[$])){O=!0;break}if(!O)return;const A={now:p.now(),transition:a.e({duration:300,delay:0},this.stylesheet.transition)};this.stylesheet.sky=u,this.sky.setSky(u,y),this.sky.updateTransitions(A)}_validate(u,y,w,O,A={}){return(!A||A.validate!==!1)&&ja(this,u.call(a.u,a.e({key:y,style:this.serialize(),value:w,styleSpec:a.v},O)))}_remove(u=!0){this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._loadStyleRequest&&(this._loadStyleRequest.abort(),this._loadStyleRequest=null),this._spriteRequest&&(this._spriteRequest.abort(),this._spriteRequest=null),js().off(Ct,this._rtlPluginLoaded);for(const y in this._layers)this._layers[y].setEventedParent(null);for(const y in this.sourceCaches){const w=this.sourceCaches[y];w.setEventedParent(null),w.onRemove(this.map)}this.imageManager.setEventedParent(null),this.setEventedParent(null),u&&this.dispatcher.broadcast("RM",void 0),this.dispatcher.remove(u)}_clearSource(u){this.sourceCaches[u].clearTiles()}_reloadSource(u){this.sourceCaches[u].resume(),this.sourceCaches[u].reload()}_updateSources(u){for(const y in this.sourceCaches)this.sourceCaches[y].update(u,this.map.terrain)}_generateCollisionBoxes(){for(const u in this.sourceCaches)this._reloadSource(u)}_updatePlacement(u,y,w,O,A=!1){let $=!1,z=!1;const U={};for(const G of this._order){const H=this._layers[G];if(H.type!=="symbol")continue;if(!U[H.source]){const le=this.sourceCaches[H.source];U[H.source]=le.getRenderableIds(!0).map((pe=>le.getTileByID(pe))).sort(((pe,_e)=>_e.tileID.overscaledZ-pe.tileID.overscaledZ||(pe.tileID.isLessThan(_e.tileID)?-1:1)))}const K=this.crossTileSymbolIndex.addLayer(H,U[H.source],u.center.lng);$=$||K}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((A=A||this._layerOrderChanged||w===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(p.now(),u.zoom))&&(this.pauseablePlacement=new Vu(u,this.map.terrain,this._order,A,y,w,O,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,U),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(p.now()),z=!0),$&&this.pauseablePlacement.placement.setStale()),z||$)for(const G of this._order){const H=this._layers[G];H.type==="symbol"&&this.placement.updateLayerOpacities(H,U[H.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(p.now())}_releaseSymbolFadeTiles(){for(const u in this.sourceCaches)this.sourceCaches[u].releaseSymbolFadeTiles()}getImages(u,y){return a._(this,void 0,void 0,(function*(){const w=yield this.imageManager.getImages(y.icons);this._updateTilesForChangedImages();const O=this.sourceCaches[y.source];return O&&O.setDependencies(y.tileID.key,y.type,y.icons),w}))}getGlyphs(u,y){return a._(this,void 0,void 0,(function*(){const w=yield this.glyphManager.getGlyphs(y.stacks),O=this.sourceCaches[y.source];return O&&O.setDependencies(y.tileID.key,y.type,[""]),w}))}getGlyphsUrl(){return this.stylesheet.glyphs||null}setGlyphs(u,y={}){this._checkLoaded(),u&&this._validate(a.u.glyphs,"glyphs",u,null,y)||(this._glyphsDidChange=!0,this.stylesheet.glyphs=u,this.glyphManager.entries={},this.glyphManager.setURL(u))}addSprite(u,y,w={},O){this._checkLoaded();const A=[{id:u,url:y}],$=[...oe(this.stylesheet.sprite),...A];this._validate(a.u.sprite,"sprite",$,null,w)||(this.stylesheet.sprite=$,this._loadSprite(A,!0,O))}removeSprite(u){this._checkLoaded();const y=oe(this.stylesheet.sprite);if(y.find((w=>w.id===u))){if(this._spritesImagesIds[u])for(const w of this._spritesImagesIds[u])this.imageManager.removeImage(w),this._changedImages[w]=!0;y.splice(y.findIndex((w=>w.id===u)),1),this.stylesheet.sprite=y.length>0?y:void 0,delete this._spritesImagesIds[u],this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new a.k("data",{dataType:"style"}))}else this.fire(new a.j(new Error(`Sprite "${u}" doesn't exists on this map.`)))}getSprite(){return oe(this.stylesheet.sprite)}setSprite(u,y={},w){this._checkLoaded(),u&&this._validate(a.u.sprite,"sprite",u,null,y)||(this.stylesheet.sprite=u,u?this._loadSprite(u,!0,w):(this._unloadSprite(),w&&w(null)))}}var Ch=a.Y([{name:"a_pos",type:"Int16",components:2}]);const Fc={prelude:ai(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}
#ifdef TERRAIN3D
uniform sampler2D u_terrain;uniform float u_terrain_dim;uniform mat4 u_terrain_matrix;uniform vec4 u_terrain_unpack;uniform float u_terrain_exaggeration;uniform highp sampler2D u_depth;
#endif
const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitShifts=vec4(1.)/bitSh;highp float unpack(highp vec4 color) {return dot(color,bitShifts);}highp float depthOpacity(vec3 frag) {
#ifdef TERRAIN3D
highp float d=unpack(texture2D(u_depth,frag.xy*0.5+0.5))+0.0001-frag.z;return 1.0-max(0.0,min(1.0,-d*500.0));
#else
return 1.0;
#endif
}float calculate_visibility(vec4 pos) {
#ifdef TERRAIN3D
vec3 frag=pos.xyz/pos.w;highp float d=depthOpacity(frag);if (d > 0.95) return 1.0;return (d+depthOpacity(frag+vec3(0.0,0.01,0.0)))/2.0;
#else
return 1.0;
#endif
}float ele(vec2 pos) {
#ifdef TERRAIN3D
vec4 rgb=(texture2D(u_terrain,pos)*255.0)*u_terrain_unpack;return rgb.r+rgb.g+rgb.b-u_terrain_unpack.a;
#else
return 0.0;
#endif
}float get_elevation(vec2 pos) {
#ifdef TERRAIN3D
vec2 coord=(u_terrain_matrix*vec4(pos,0.0,1.0)).xy*u_terrain_dim+1.0;vec2 f=fract(coord);vec2 c=(floor(coord)+0.5)/(u_terrain_dim+2.0);float d=1.0/(u_terrain_dim+2.0);float tl=ele(c);float tr=ele(c+vec2(d,0.0));float bl=ele(c+vec2(0.0,d));float br=ele(c+vec2(d,d));float elevation=mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);return elevation*u_terrain_exaggeration;
#else
return 0.0;
#endif
}`),background:ai(`uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),backgroundPattern:ai(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:ai(`varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);float antialiased_blur=v_data.z;float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=v_visibility*opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);float ele=get_elevation(circle_center);v_visibility=calculate_visibility(u_matrix*vec4(circle_center,ele,1.0));if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,ele,1);} else {gl_Position=u_matrix*vec4(circle_center,ele,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}float antialiasblur=-max(1.0/u_device_pixel_ratio/(radius+stroke_width),blur);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),clippingMask:ai("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:ai(`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,get_elevation(floor(a_pos*0.5)),1);gl_Position=u_matrix*pos;}`),heatmapTexture:ai(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:ai("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_anchor_pos;attribute vec2 a_placed;attribute vec2 a_box_real;uniform mat4 u_matrix;uniform vec2 u_pixel_extrude_scale;varying float v_placed;varying float v_notUsed;vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_matrix*vec4(posInTile,elevation,1.0);}void main() {gl_Position=projectTileWithElevation(a_anchor_pos,get_elevation(a_anchor_pos));gl_Position.xy=((a_box_real+0.5)*u_pixel_extrude_scale*2.0-1.0)*vec2(1.0,-1.0)*gl_Position.w;if (gl_Position.z/gl_Position.w < 1.1) {gl_Position.z=0.5;}v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:ai("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),debug:ai("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,get_elevation(a_pos),1);}"),fill:ai(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_FragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);}`),fillOutline:ai(`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillOutlinePattern:ai(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillPattern:ai(`#ifdef GL_ES
precision highp float;
#endif
uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),fillExtrusion:ai(`varying vec4 v_color;void main() {gl_FragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),fillExtrusionPattern:ai(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),hillshadePrepare:ai(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:ai(`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;
#define PI 3.141592653589793
void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),line:ai(`uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),lineGradient:ai(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),linePattern:ai(`#ifdef GL_ES
precision highp float;
#endif
uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),lineSDF:ai(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`),raster:ai(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),symbolIcon:ai(`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;varying vec2 v_tex;varying float v_fade_opacity;vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_matrix*vec4(posInTile,elevation,1.0);}
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}gl_Position=finalPos;v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float visibility=calculate_visibility(projectedPoint);v_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));}`),symbolSDF:ai(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float inner_edge=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);inner_edge=inner_edge+gamma*gamma_scale;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(inner_edge-gamma_scaled,inner_edge+gamma_scaled,dist);if (u_is_halo) {lowp float halo_edge=(6.0-halo_width/fontScale)/SDF_PX;alpha=min(smoothstep(halo_edge-gamma_scaled,halo_edge+gamma_scaled,dist),1.0-alpha);}gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_translation;uniform float u_pitched_scale;varying vec2 v_data0;varying vec3 v_data1;vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_matrix*vec4(posInTile,elevation,1.0);}
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),symbolTextAndIcon:ai(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;varying vec4 v_data0;varying vec4 v_data1;vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_matrix*vec4(posInTile,elevation,1.0);}
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`),terrain:ai("uniform sampler2D u_texture;uniform vec4 u_fog_color;uniform vec4 u_horizon_color;uniform float u_fog_ground_blend;uniform float u_fog_ground_blend_opacity;uniform float u_horizon_fog_blend;varying vec2 v_texture_pos;varying float v_fog_depth;const float gamma=2.2;vec4 gammaToLinear(vec4 color) {return pow(color,vec4(gamma));}vec4 linearToGamma(vec4 color) {return pow(color,vec4(1.0/gamma));}void main() {vec4 surface_color=texture2D(u_texture,v_texture_pos);if (v_fog_depth > u_fog_ground_blend) {vec4 surface_color_linear=gammaToLinear(surface_color);float blend_color=smoothstep(0.0,1.0,max((v_fog_depth-u_horizon_fog_blend)/(1.0-u_horizon_fog_blend),0.0));vec4 fog_horizon_color_linear=mix(gammaToLinear(u_fog_color),gammaToLinear(u_horizon_color),blend_color);float factor_fog=max(v_fog_depth-u_fog_ground_blend,0.0)/(1.0-u_fog_ground_blend);gl_FragColor=linearToGamma(mix(surface_color_linear,fog_horizon_color_linear,pow(factor_fog,2.0)*u_fog_ground_blend_opacity));} else {gl_FragColor=surface_color;}}","attribute vec3 a_pos3d;uniform mat4 u_matrix;uniform mat4 u_fog_matrix;uniform float u_ele_delta;varying vec2 v_texture_pos;varying float v_fog_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=u_matrix*vec4(a_pos3d.xy,ele-ele_delta,1.0);vec4 pos=u_fog_matrix*vec4(a_pos3d.xy,ele,1.0);v_fog_depth=pos.z/pos.w*0.5+0.5;}"),terrainDepth:ai("varying float v_depth;const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitMsk=vec4(0.,vec3(1./256.0));highp vec4 pack(highp float value) {highp vec4 comp=fract(value*bitSh);comp-=comp.xxyz*bitMsk;return comp;}void main() {gl_FragColor=pack(v_depth);}","attribute vec3 a_pos3d;uniform mat4 u_matrix;uniform float u_ele_delta;varying float v_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;gl_Position=u_matrix*vec4(a_pos3d.xy,ele-ele_delta,1.0);v_depth=gl_Position.z/gl_Position.w;}"),terrainCoords:ai("precision mediump float;uniform sampler2D u_texture;uniform float u_terrain_coords_id;varying vec2 v_texture_pos;void main() {vec4 rgba=texture2D(u_texture,v_texture_pos);gl_FragColor=vec4(rgba.r,rgba.g,rgba.b,u_terrain_coords_id);}","attribute vec3 a_pos3d;uniform mat4 u_matrix;uniform float u_ele_delta;varying vec2 v_texture_pos;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=u_matrix*vec4(a_pos3d.xy,ele-ele_delta,1.0);}"),sky:ai("uniform vec4 u_sky_color;uniform vec4 u_horizon_color;uniform float u_horizon;uniform float u_sky_horizon_blend;void main() {float y=gl_FragCoord.y;if (y > u_horizon) {float blend=y-u_horizon;if (blend < u_sky_horizon_blend) {gl_FragColor=mix(u_sky_color,u_horizon_color,pow(1.0-blend/u_sky_horizon_blend,2.0));} else {gl_FragColor=u_sky_color;}}}","attribute vec2 a_pos;void main() {gl_Position=vec4(a_pos,1.0,1.0);}")};function ai(E,u){const y=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,w=u.match(/attribute ([\w]+) ([\w]+)/g),O=E.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),A=u.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),$=A?A.concat(O):O,z={};return{fragmentSource:E=E.replace(y,((U,G,H,K,le)=>(z[le]=!0,G==="define"?`
#ifndef HAS_UNIFORM_u_${le}
varying ${H} ${K} ${le};
#else
uniform ${H} ${K} u_${le};
#endif
`:`
#ifdef HAS_UNIFORM_u_${le}
    ${H} ${K} ${le} = u_${le};
#endif
`))),vertexSource:u=u.replace(y,((U,G,H,K,le)=>{const pe=K==="float"?"vec2":"vec4",_e=le.match(/color/)?"color":pe;return z[le]?G==="define"?`
#ifndef HAS_UNIFORM_u_${le}
uniform lowp float u_${le}_t;
attribute ${H} ${pe} a_${le};
varying ${H} ${K} ${le};
#else
uniform ${H} ${K} u_${le};
#endif
`:_e==="vec4"?`
#ifndef HAS_UNIFORM_u_${le}
    ${le} = a_${le};
#else
    ${H} ${K} ${le} = u_${le};
#endif
`:`
#ifndef HAS_UNIFORM_u_${le}
    ${le} = unpack_mix_${_e}(a_${le}, u_${le}_t);
#else
    ${H} ${K} ${le} = u_${le};
#endif
`:G==="define"?`
#ifndef HAS_UNIFORM_u_${le}
uniform lowp float u_${le}_t;
attribute ${H} ${pe} a_${le};
#else
uniform ${H} ${K} u_${le};
#endif
`:_e==="vec4"?`
#ifndef HAS_UNIFORM_u_${le}
    ${H} ${K} ${le} = a_${le};
#else
    ${H} ${K} ${le} = u_${le};
#endif
`:`
#ifndef HAS_UNIFORM_u_${le}
    ${H} ${K} ${le} = unpack_mix_${_e}(a_${le}, u_${le}_t);
#else
    ${H} ${K} ${le} = u_${le};
#endif
`})),staticAttributes:w,staticUniforms:$}}class P1{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(u,y,w,O,A,$,z,U,G){this.context=u;let H=this.boundPaintVertexBuffers.length!==O.length;for(let K=0;!H&&K<O.length;K++)this.boundPaintVertexBuffers[K]!==O[K]&&(H=!0);!this.vao||this.boundProgram!==y||this.boundLayoutVertexBuffer!==w||H||this.boundIndexBuffer!==A||this.boundVertexOffset!==$||this.boundDynamicVertexBuffer!==z||this.boundDynamicVertexBuffer2!==U||this.boundDynamicVertexBuffer3!==G?this.freshBind(y,w,O,A,$,z,U,G):(u.bindVertexArray.set(this.vao),z&&z.bind(),A&&A.dynamicDraw&&A.bind(),U&&U.bind(),G&&G.bind())}freshBind(u,y,w,O,A,$,z,U){const G=u.numAttributes,H=this.context,K=H.gl;this.vao&&this.destroy(),this.vao=H.createVertexArray(),H.bindVertexArray.set(this.vao),this.boundProgram=u,this.boundLayoutVertexBuffer=y,this.boundPaintVertexBuffers=w,this.boundIndexBuffer=O,this.boundVertexOffset=A,this.boundDynamicVertexBuffer=$,this.boundDynamicVertexBuffer2=z,this.boundDynamicVertexBuffer3=U,y.enableAttributes(K,u);for(const le of w)le.enableAttributes(K,u);$&&$.enableAttributes(K,u),z&&z.enableAttributes(K,u),U&&U.enableAttributes(K,u),y.bind(),y.setVertexAttribPointers(K,u,A);for(const le of w)le.bind(),le.setVertexAttribPointers(K,u,A);$&&($.bind(),$.setVertexAttribPointers(K,u,A)),O&&O.bind(),z&&(z.bind(),z.setVertexAttribPointers(K,u,A)),U&&(U.bind(),U.setVertexAttribPointers(K,u,A)),H.currentNumAttributes=G}destroy(){this.vao&&(this.context.deleteVertexArray(this.vao),this.vao=null)}}const R0=(E,u,y,w,O)=>({u_matrix:E,u_texture:0,u_ele_delta:u,u_fog_matrix:y,u_fog_color:w?w.properties.get("fog-color"):a.aM.white,u_fog_ground_blend:w?w.properties.get("fog-ground-blend"):1,u_fog_ground_blend_opacity:w?w.calculateFogBlendOpacity(O):0,u_horizon_color:w?w.properties.get("horizon-color"):a.aM.white,u_horizon_fog_blend:w?w.properties.get("horizon-fog-blend"):1});function Ah(E){const u=[];for(let y=0;y<E.length;y++){if(E[y]===null)continue;const w=E[y].split(" ");u.push(w.pop())}return u}class Fm{constructor(u,y,w,O,A,$){const z=u.gl;this.program=z.createProgram();const U=Ah(y.staticAttributes),G=w?w.getBinderAttributes():[],H=U.concat(G),K=Fc.prelude.staticUniforms?Ah(Fc.prelude.staticUniforms):[],le=y.staticUniforms?Ah(y.staticUniforms):[],pe=w?w.getBinderUniforms():[],_e=K.concat(le).concat(pe),Ee=[];for(const st of _e)Ee.indexOf(st)<0&&Ee.push(st);const Me=w?w.defines():[];A&&Me.push("#define OVERDRAW_INSPECTOR;"),$&&Me.push("#define TERRAIN3D;");const Le=Me.concat(Fc.prelude.fragmentSource,y.fragmentSource).join(`
`),Ne=Me.concat(Fc.prelude.vertexSource,y.vertexSource).join(`
`),ke=z.createShader(z.FRAGMENT_SHADER);if(z.isContextLost())return void(this.failedToCreate=!0);if(z.shaderSource(ke,Le),z.compileShader(ke),!z.getShaderParameter(ke,z.COMPILE_STATUS))throw new Error(`Could not compile fragment shader: ${z.getShaderInfoLog(ke)}`);z.attachShader(this.program,ke);const Xe=z.createShader(z.VERTEX_SHADER);if(z.isContextLost())return void(this.failedToCreate=!0);if(z.shaderSource(Xe,Ne),z.compileShader(Xe),!z.getShaderParameter(Xe,z.COMPILE_STATUS))throw new Error(`Could not compile vertex shader: ${z.getShaderInfoLog(Xe)}`);z.attachShader(this.program,Xe),this.attributes={};const Ke={};this.numAttributes=H.length;for(let st=0;st<this.numAttributes;st++)H[st]&&(z.bindAttribLocation(this.program,st,H[st]),this.attributes[H[st]]=st);if(z.linkProgram(this.program),!z.getProgramParameter(this.program,z.LINK_STATUS))throw new Error(`Program failed to link: ${z.getProgramInfoLog(this.program)}`);z.deleteShader(Xe),z.deleteShader(ke);for(let st=0;st<Ee.length;st++){const xt=Ee[st];if(xt&&!Ke[xt]){const Qt=z.getUniformLocation(this.program,xt);Qt&&(Ke[xt]=Qt)}}this.fixedUniforms=O(u,Ke),this.terrainUniforms=((st,xt)=>({u_depth:new a.aH(st,xt.u_depth),u_terrain:new a.aH(st,xt.u_terrain),u_terrain_dim:new a.aI(st,xt.u_terrain_dim),u_terrain_matrix:new a.aJ(st,xt.u_terrain_matrix),u_terrain_unpack:new a.aK(st,xt.u_terrain_unpack),u_terrain_exaggeration:new a.aI(st,xt.u_terrain_exaggeration)}))(u,Ke),this.binderUniforms=w?w.getUniforms(u,Ke):[]}draw(u,y,w,O,A,$,z,U,G,H,K,le,pe,_e,Ee,Me,Le,Ne){const ke=u.gl;if(this.failedToCreate)return;if(u.program.set(this.program),u.setDepthMode(w),u.setStencilMode(O),u.setColorMode(A),u.setCullFace($),U){u.activeTexture.set(ke.TEXTURE2),ke.bindTexture(ke.TEXTURE_2D,U.depthTexture),u.activeTexture.set(ke.TEXTURE3),ke.bindTexture(ke.TEXTURE_2D,U.texture);for(const Ke in this.terrainUniforms)this.terrainUniforms[Ke].set(U[Ke])}for(const Ke in this.fixedUniforms)this.fixedUniforms[Ke].set(z[Ke]);Ee&&Ee.setUniforms(u,this.binderUniforms,pe,{zoom:_e});let Xe=0;switch(y){case ke.LINES:Xe=2;break;case ke.TRIANGLES:Xe=3;break;case ke.LINE_STRIP:Xe=1}for(const Ke of le.get()){const st=Ke.vaos||(Ke.vaos={});(st[G]||(st[G]=new P1)).bind(u,this,H,Ee?Ee.getPaintVertexBuffers():[],K,Ke.vertexOffset,Me,Le,Ne),ke.drawElements(y,Ke.primitiveLength*Xe,ke.UNSIGNED_SHORT,Ke.primitiveOffset*Xe*2)}}}function Lc(E,u,y){const w=1/Cr(y,1,u.transform.tileZoom),O=Math.pow(2,y.tileID.overscaledZ),A=y.tileSize*Math.pow(2,u.transform.tileZoom)/O,$=A*(y.tileID.canonical.x+y.tileID.wrap*O),z=A*y.tileID.canonical.y;return{u_image:0,u_texsize:y.imageAtlasTexture.size,u_scale:[w,E.fromScale,E.toScale],u_fade:E.t,u_pixel_coord_upper:[$>>16,z>>16],u_pixel_coord_lower:[65535&$,65535&z]}}const Ud=(E,u,y,w)=>{const O=u.style.light,A=O.properties.get("position"),$=[A.x,A.y,A.z],z=(function(){var G=new a.A(9);return a.A!=Float32Array&&(G[1]=0,G[2]=0,G[3]=0,G[5]=0,G[6]=0,G[7]=0),G[0]=1,G[4]=1,G[8]=1,G})();O.properties.get("anchor")==="viewport"&&(function(G,H){var K=Math.sin(H),le=Math.cos(H);G[0]=le,G[1]=K,G[2]=0,G[3]=-K,G[4]=le,G[5]=0,G[6]=0,G[7]=0,G[8]=1})(z,-u.transform.angle),(function(G,H,K){var le=H[0],pe=H[1],_e=H[2];G[0]=le*K[0]+pe*K[3]+_e*K[6],G[1]=le*K[1]+pe*K[4]+_e*K[7],G[2]=le*K[2]+pe*K[5]+_e*K[8]})($,$,z);const U=O.properties.get("color");return{u_matrix:E,u_lightpos:$,u_lightintensity:O.properties.get("intensity"),u_lightcolor:[U.r,U.g,U.b],u_vertical_gradient:+y,u_opacity:w}},Lm=(E,u,y,w,O,A,$)=>a.e(Ud(E,u,y,w),Lc(A,u,$),{u_height_factor:-Math.pow(2,O.overscaledZ)/$.tileSize/8}),Vd=E=>({u_matrix:E}),D1=(E,u,y,w)=>a.e(Vd(E),Lc(y,u,w)),S_=(E,u)=>({u_matrix:E,u_world:u}),I1=(E,u,y,w,O)=>a.e(D1(E,u,y,w),{u_world:O}),k_=(E,u,y,w)=>{const O=E.transform;let A,$;if(w.paint.get("circle-pitch-alignment")==="map"){const z=Cr(y,1,O.zoom);A=!0,$=[z,z]}else A=!1,$=O.pixelsToGLUnits;return{u_camera_to_center_distance:O.cameraToCenterDistance,u_scale_with_map:+(w.paint.get("circle-pitch-scale")==="map"),u_matrix:E.translatePosMatrix(u.posMatrix,y,w.paint.get("circle-translate"),w.paint.get("circle-translate-anchor")),u_pitch_with_map:+A,u_device_pixel_ratio:E.pixelRatio,u_extrude_scale:$}},Pf=(E,u,y)=>({u_matrix:E,u_inv_matrix:u,u_camera_to_center_distance:y.cameraToCenterDistance,u_viewport_size:[y.width,y.height]}),$m=(E,u,y=1)=>({u_matrix:E,u_color:u,u_overlay:0,u_overlay_scale:y}),Ua=E=>({u_matrix:E}),Ea=(E,u,y,w)=>({u_matrix:E,u_extrude_scale:Cr(u,1,y),u_intensity:w}),F0=(E,u,y,w)=>{const O=a.H();a.aP(O,0,E.width,E.height,0,0,1);const A=E.context.gl;return{u_matrix:O,u_world:[A.drawingBufferWidth,A.drawingBufferHeight],u_image:y,u_color_ramp:w,u_opacity:u.paint.get("heatmap-opacity")}};function L0(E,u){const y=Math.pow(2,u.canonical.z),w=u.canonical.y;return[new a.Z(0,w/y).toLngLat().lat,new a.Z(0,(w+1)/y).toLngLat().lat]}const $0=(E,u,y,w)=>{const O=E.transform;return{u_matrix:E_(E,u,y,w),u_ratio:1/Cr(u,1,O.zoom),u_device_pixel_ratio:E.pixelRatio,u_units_to_pixels:[1/O.pixelsToGLUnits[0],1/O.pixelsToGLUnits[1]]}},C_=(E,u,y,w,O)=>a.e($0(E,u,y,O),{u_image:0,u_image_height:w}),Eh=(E,u,y,w,O)=>{const A=E.transform,$=A_(u,A);return{u_matrix:E_(E,u,y,O),u_texsize:u.imageAtlasTexture.size,u_ratio:1/Cr(u,1,A.zoom),u_device_pixel_ratio:E.pixelRatio,u_image:0,u_scale:[$,w.fromScale,w.toScale],u_fade:w.t,u_units_to_pixels:[1/A.pixelsToGLUnits[0],1/A.pixelsToGLUnits[1]]}},SO=(E,u,y,w,O,A)=>{const $=E.lineAtlas,z=A_(u,E.transform),U=y.layout.get("line-cap")==="round",G=$.getDash(w.from,U),H=$.getDash(w.to,U),K=G.width*O.fromScale,le=H.width*O.toScale;return a.e($0(E,u,y,A),{u_patternscale_a:[z/K,-G.height/2],u_patternscale_b:[z/le,-H.height/2],u_sdfgamma:$.width/(256*Math.min(K,le)*E.pixelRatio)/2,u_image:0,u_tex_y_a:G.y,u_tex_y_b:H.y,u_mix:O.t})};function A_(E,u){return 1/Cr(E,1,u.tileZoom)}function E_(E,u,y,w){return E.translatePosMatrix(w?w.posMatrix:u.tileID.posMatrix,u,y.paint.get("line-translate"),y.paint.get("line-translate-anchor"))}const kO=(E,u,y,w,O)=>{return{u_matrix:E,u_tl_parent:u,u_scale_parent:y,u_buffer_scale:1,u_fade_t:w.mix,u_opacity:w.opacity*O.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:O.paint.get("raster-brightness-min"),u_brightness_high:O.paint.get("raster-brightness-max"),u_saturation_factor:($=O.paint.get("raster-saturation"),$>0?1-1/(1.001-$):-$),u_contrast_factor:(A=O.paint.get("raster-contrast"),A>0?1/(1-A):1+A),u_spin_weights:CO(O.paint.get("raster-hue-rotate"))};var A,$};function CO(E){E*=Math.PI/180;const u=Math.sin(E),y=Math.cos(E);return[(2*y+1)/3,(-Math.sqrt(3)*u-y+1)/3,(Math.sqrt(3)*u-y+1)/3]}const ms=(E,u,y,w,O,A,$,z,U,G,H,K,le,pe)=>{const _e=$.transform;return{u_is_size_zoom_constant:+(E==="constant"||E==="source"),u_is_size_feature_constant:+(E==="constant"||E==="camera"),u_size_t:u?u.uSizeT:0,u_size:u?u.uSize:0,u_camera_to_center_distance:_e.cameraToCenterDistance,u_pitch:_e.pitch/360*2*Math.PI,u_rotate_symbol:+y,u_aspect_ratio:_e.width/_e.height,u_fade_change:$.options.fadeDuration?$.symbolFadeChange:1,u_matrix:z,u_label_plane_matrix:U,u_coord_matrix:G,u_is_text:+K,u_pitch_with_map:+w,u_is_along_line:O,u_is_variable_anchor:A,u_texsize:le,u_texture:0,u_translation:H,u_pitched_scale:pe}},$i=(E,u,y,w,O,A,$,z,U,G,H,K,le,pe,_e)=>{const Ee=$.transform;return a.e(ms(E,u,y,w,O,A,$,z,U,G,H,K,le,_e),{u_gamma_scale:w?Math.cos(Ee._pitch)*Ee.cameraToCenterDistance:1,u_device_pixel_ratio:$.pixelRatio,u_is_halo:1})},M1=(E,u,y,w,O,A,$,z,U,G,H,K,le,pe)=>a.e($i(E,u,y,w,O,A,$,z,U,G,H,!0,K,!0,pe),{u_texsize_icon:le,u_texture_icon:1}),B0=(E,u,y)=>({u_matrix:E,u_opacity:u,u_color:y}),R1=(E,u,y,w,O,A)=>a.e((function($,z,U,G){const H=U.imageManager.getPattern($.from.toString()),K=U.imageManager.getPattern($.to.toString()),{width:le,height:pe}=U.imageManager.getPixelSize(),_e=Math.pow(2,G.tileID.overscaledZ),Ee=G.tileSize*Math.pow(2,U.transform.tileZoom)/_e,Me=Ee*(G.tileID.canonical.x+G.tileID.wrap*_e),Le=Ee*G.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:H.tl,u_pattern_br_a:H.br,u_pattern_tl_b:K.tl,u_pattern_br_b:K.br,u_texsize:[le,pe],u_mix:z.t,u_pattern_size_a:H.displaySize,u_pattern_size_b:K.displaySize,u_scale_a:z.fromScale,u_scale_b:z.toScale,u_tile_units_to_pixels:1/Cr(G,1,U.transform.tileZoom),u_pixel_coord_upper:[Me>>16,Le>>16],u_pixel_coord_lower:[65535&Me,65535&Le]}})(w,A,y,O),{u_matrix:E,u_opacity:u}),F1={fillExtrusion:(E,u)=>({u_matrix:new a.aJ(E,u.u_matrix),u_lightpos:new a.aN(E,u.u_lightpos),u_lightintensity:new a.aI(E,u.u_lightintensity),u_lightcolor:new a.aN(E,u.u_lightcolor),u_vertical_gradient:new a.aI(E,u.u_vertical_gradient),u_opacity:new a.aI(E,u.u_opacity)}),fillExtrusionPattern:(E,u)=>({u_matrix:new a.aJ(E,u.u_matrix),u_lightpos:new a.aN(E,u.u_lightpos),u_lightintensity:new a.aI(E,u.u_lightintensity),u_lightcolor:new a.aN(E,u.u_lightcolor),u_vertical_gradient:new a.aI(E,u.u_vertical_gradient),u_height_factor:new a.aI(E,u.u_height_factor),u_image:new a.aH(E,u.u_image),u_texsize:new a.aO(E,u.u_texsize),u_pixel_coord_upper:new a.aO(E,u.u_pixel_coord_upper),u_pixel_coord_lower:new a.aO(E,u.u_pixel_coord_lower),u_scale:new a.aN(E,u.u_scale),u_fade:new a.aI(E,u.u_fade),u_opacity:new a.aI(E,u.u_opacity)}),fill:(E,u)=>({u_matrix:new a.aJ(E,u.u_matrix)}),fillPattern:(E,u)=>({u_matrix:new a.aJ(E,u.u_matrix),u_image:new a.aH(E,u.u_image),u_texsize:new a.aO(E,u.u_texsize),u_pixel_coord_upper:new a.aO(E,u.u_pixel_coord_upper),u_pixel_coord_lower:new a.aO(E,u.u_pixel_coord_lower),u_scale:new a.aN(E,u.u_scale),u_fade:new a.aI(E,u.u_fade)}),fillOutline:(E,u)=>({u_matrix:new a.aJ(E,u.u_matrix),u_world:new a.aO(E,u.u_world)}),fillOutlinePattern:(E,u)=>({u_matrix:new a.aJ(E,u.u_matrix),u_world:new a.aO(E,u.u_world),u_image:new a.aH(E,u.u_image),u_texsize:new a.aO(E,u.u_texsize),u_pixel_coord_upper:new a.aO(E,u.u_pixel_coord_upper),u_pixel_coord_lower:new a.aO(E,u.u_pixel_coord_lower),u_scale:new a.aN(E,u.u_scale),u_fade:new a.aI(E,u.u_fade)}),circle:(E,u)=>({u_camera_to_center_distance:new a.aI(E,u.u_camera_to_center_distance),u_scale_with_map:new a.aH(E,u.u_scale_with_map),u_pitch_with_map:new a.aH(E,u.u_pitch_with_map),u_extrude_scale:new a.aO(E,u.u_extrude_scale),u_device_pixel_ratio:new a.aI(E,u.u_device_pixel_ratio),u_matrix:new a.aJ(E,u.u_matrix)}),collisionBox:(E,u)=>({u_matrix:new a.aJ(E,u.u_matrix),u_pixel_extrude_scale:new a.aO(E,u.u_pixel_extrude_scale)}),collisionCircle:(E,u)=>({u_matrix:new a.aJ(E,u.u_matrix),u_inv_matrix:new a.aJ(E,u.u_inv_matrix),u_camera_to_center_distance:new a.aI(E,u.u_camera_to_center_distance),u_viewport_size:new a.aO(E,u.u_viewport_size)}),debug:(E,u)=>({u_color:new a.aL(E,u.u_color),u_matrix:new a.aJ(E,u.u_matrix),u_overlay:new a.aH(E,u.u_overlay),u_overlay_scale:new a.aI(E,u.u_overlay_scale)}),clippingMask:(E,u)=>({u_matrix:new a.aJ(E,u.u_matrix)}),heatmap:(E,u)=>({u_extrude_scale:new a.aI(E,u.u_extrude_scale),u_intensity:new a.aI(E,u.u_intensity),u_matrix:new a.aJ(E,u.u_matrix)}),heatmapTexture:(E,u)=>({u_matrix:new a.aJ(E,u.u_matrix),u_world:new a.aO(E,u.u_world),u_image:new a.aH(E,u.u_image),u_color_ramp:new a.aH(E,u.u_color_ramp),u_opacity:new a.aI(E,u.u_opacity)}),hillshade:(E,u)=>({u_matrix:new a.aJ(E,u.u_matrix),u_image:new a.aH(E,u.u_image),u_latrange:new a.aO(E,u.u_latrange),u_light:new a.aO(E,u.u_light),u_shadow:new a.aL(E,u.u_shadow),u_highlight:new a.aL(E,u.u_highlight),u_accent:new a.aL(E,u.u_accent)}),hillshadePrepare:(E,u)=>({u_matrix:new a.aJ(E,u.u_matrix),u_image:new a.aH(E,u.u_image),u_dimension:new a.aO(E,u.u_dimension),u_zoom:new a.aI(E,u.u_zoom),u_unpack:new a.aK(E,u.u_unpack)}),line:(E,u)=>({u_matrix:new a.aJ(E,u.u_matrix),u_ratio:new a.aI(E,u.u_ratio),u_device_pixel_ratio:new a.aI(E,u.u_device_pixel_ratio),u_units_to_pixels:new a.aO(E,u.u_units_to_pixels)}),lineGradient:(E,u)=>({u_matrix:new a.aJ(E,u.u_matrix),u_ratio:new a.aI(E,u.u_ratio),u_device_pixel_ratio:new a.aI(E,u.u_device_pixel_ratio),u_units_to_pixels:new a.aO(E,u.u_units_to_pixels),u_image:new a.aH(E,u.u_image),u_image_height:new a.aI(E,u.u_image_height)}),linePattern:(E,u)=>({u_matrix:new a.aJ(E,u.u_matrix),u_texsize:new a.aO(E,u.u_texsize),u_ratio:new a.aI(E,u.u_ratio),u_device_pixel_ratio:new a.aI(E,u.u_device_pixel_ratio),u_image:new a.aH(E,u.u_image),u_units_to_pixels:new a.aO(E,u.u_units_to_pixels),u_scale:new a.aN(E,u.u_scale),u_fade:new a.aI(E,u.u_fade)}),lineSDF:(E,u)=>({u_matrix:new a.aJ(E,u.u_matrix),u_ratio:new a.aI(E,u.u_ratio),u_device_pixel_ratio:new a.aI(E,u.u_device_pixel_ratio),u_units_to_pixels:new a.aO(E,u.u_units_to_pixels),u_patternscale_a:new a.aO(E,u.u_patternscale_a),u_patternscale_b:new a.aO(E,u.u_patternscale_b),u_sdfgamma:new a.aI(E,u.u_sdfgamma),u_image:new a.aH(E,u.u_image),u_tex_y_a:new a.aI(E,u.u_tex_y_a),u_tex_y_b:new a.aI(E,u.u_tex_y_b),u_mix:new a.aI(E,u.u_mix)}),raster:(E,u)=>({u_matrix:new a.aJ(E,u.u_matrix),u_tl_parent:new a.aO(E,u.u_tl_parent),u_scale_parent:new a.aI(E,u.u_scale_parent),u_buffer_scale:new a.aI(E,u.u_buffer_scale),u_fade_t:new a.aI(E,u.u_fade_t),u_opacity:new a.aI(E,u.u_opacity),u_image0:new a.aH(E,u.u_image0),u_image1:new a.aH(E,u.u_image1),u_brightness_low:new a.aI(E,u.u_brightness_low),u_brightness_high:new a.aI(E,u.u_brightness_high),u_saturation_factor:new a.aI(E,u.u_saturation_factor),u_contrast_factor:new a.aI(E,u.u_contrast_factor),u_spin_weights:new a.aN(E,u.u_spin_weights)}),symbolIcon:(E,u)=>({u_is_size_zoom_constant:new a.aH(E,u.u_is_size_zoom_constant),u_is_size_feature_constant:new a.aH(E,u.u_is_size_feature_constant),u_size_t:new a.aI(E,u.u_size_t),u_size:new a.aI(E,u.u_size),u_camera_to_center_distance:new a.aI(E,u.u_camera_to_center_distance),u_pitch:new a.aI(E,u.u_pitch),u_rotate_symbol:new a.aH(E,u.u_rotate_symbol),u_aspect_ratio:new a.aI(E,u.u_aspect_ratio),u_fade_change:new a.aI(E,u.u_fade_change),u_matrix:new a.aJ(E,u.u_matrix),u_label_plane_matrix:new a.aJ(E,u.u_label_plane_matrix),u_coord_matrix:new a.aJ(E,u.u_coord_matrix),u_is_text:new a.aH(E,u.u_is_text),u_pitch_with_map:new a.aH(E,u.u_pitch_with_map),u_is_along_line:new a.aH(E,u.u_is_along_line),u_is_variable_anchor:new a.aH(E,u.u_is_variable_anchor),u_texsize:new a.aO(E,u.u_texsize),u_texture:new a.aH(E,u.u_texture),u_translation:new a.aO(E,u.u_translation),u_pitched_scale:new a.aI(E,u.u_pitched_scale)}),symbolSDF:(E,u)=>({u_is_size_zoom_constant:new a.aH(E,u.u_is_size_zoom_constant),u_is_size_feature_constant:new a.aH(E,u.u_is_size_feature_constant),u_size_t:new a.aI(E,u.u_size_t),u_size:new a.aI(E,u.u_size),u_camera_to_center_distance:new a.aI(E,u.u_camera_to_center_distance),u_pitch:new a.aI(E,u.u_pitch),u_rotate_symbol:new a.aH(E,u.u_rotate_symbol),u_aspect_ratio:new a.aI(E,u.u_aspect_ratio),u_fade_change:new a.aI(E,u.u_fade_change),u_matrix:new a.aJ(E,u.u_matrix),u_label_plane_matrix:new a.aJ(E,u.u_label_plane_matrix),u_coord_matrix:new a.aJ(E,u.u_coord_matrix),u_is_text:new a.aH(E,u.u_is_text),u_pitch_with_map:new a.aH(E,u.u_pitch_with_map),u_is_along_line:new a.aH(E,u.u_is_along_line),u_is_variable_anchor:new a.aH(E,u.u_is_variable_anchor),u_texsize:new a.aO(E,u.u_texsize),u_texture:new a.aH(E,u.u_texture),u_gamma_scale:new a.aI(E,u.u_gamma_scale),u_device_pixel_ratio:new a.aI(E,u.u_device_pixel_ratio),u_is_halo:new a.aH(E,u.u_is_halo),u_translation:new a.aO(E,u.u_translation),u_pitched_scale:new a.aI(E,u.u_pitched_scale)}),symbolTextAndIcon:(E,u)=>({u_is_size_zoom_constant:new a.aH(E,u.u_is_size_zoom_constant),u_is_size_feature_constant:new a.aH(E,u.u_is_size_feature_constant),u_size_t:new a.aI(E,u.u_size_t),u_size:new a.aI(E,u.u_size),u_camera_to_center_distance:new a.aI(E,u.u_camera_to_center_distance),u_pitch:new a.aI(E,u.u_pitch),u_rotate_symbol:new a.aH(E,u.u_rotate_symbol),u_aspect_ratio:new a.aI(E,u.u_aspect_ratio),u_fade_change:new a.aI(E,u.u_fade_change),u_matrix:new a.aJ(E,u.u_matrix),u_label_plane_matrix:new a.aJ(E,u.u_label_plane_matrix),u_coord_matrix:new a.aJ(E,u.u_coord_matrix),u_is_text:new a.aH(E,u.u_is_text),u_pitch_with_map:new a.aH(E,u.u_pitch_with_map),u_is_along_line:new a.aH(E,u.u_is_along_line),u_is_variable_anchor:new a.aH(E,u.u_is_variable_anchor),u_texsize:new a.aO(E,u.u_texsize),u_texsize_icon:new a.aO(E,u.u_texsize_icon),u_texture:new a.aH(E,u.u_texture),u_texture_icon:new a.aH(E,u.u_texture_icon),u_gamma_scale:new a.aI(E,u.u_gamma_scale),u_device_pixel_ratio:new a.aI(E,u.u_device_pixel_ratio),u_is_halo:new a.aH(E,u.u_is_halo),u_translation:new a.aO(E,u.u_translation),u_pitched_scale:new a.aI(E,u.u_pitched_scale)}),background:(E,u)=>({u_matrix:new a.aJ(E,u.u_matrix),u_opacity:new a.aI(E,u.u_opacity),u_color:new a.aL(E,u.u_color)}),backgroundPattern:(E,u)=>({u_matrix:new a.aJ(E,u.u_matrix),u_opacity:new a.aI(E,u.u_opacity),u_image:new a.aH(E,u.u_image),u_pattern_tl_a:new a.aO(E,u.u_pattern_tl_a),u_pattern_br_a:new a.aO(E,u.u_pattern_br_a),u_pattern_tl_b:new a.aO(E,u.u_pattern_tl_b),u_pattern_br_b:new a.aO(E,u.u_pattern_br_b),u_texsize:new a.aO(E,u.u_texsize),u_mix:new a.aI(E,u.u_mix),u_pattern_size_a:new a.aO(E,u.u_pattern_size_a),u_pattern_size_b:new a.aO(E,u.u_pattern_size_b),u_scale_a:new a.aI(E,u.u_scale_a),u_scale_b:new a.aI(E,u.u_scale_b),u_pixel_coord_upper:new a.aO(E,u.u_pixel_coord_upper),u_pixel_coord_lower:new a.aO(E,u.u_pixel_coord_lower),u_tile_units_to_pixels:new a.aI(E,u.u_tile_units_to_pixels)}),terrain:(E,u)=>({u_matrix:new a.aJ(E,u.u_matrix),u_texture:new a.aH(E,u.u_texture),u_ele_delta:new a.aI(E,u.u_ele_delta),u_fog_matrix:new a.aJ(E,u.u_fog_matrix),u_fog_color:new a.aL(E,u.u_fog_color),u_fog_ground_blend:new a.aI(E,u.u_fog_ground_blend),u_fog_ground_blend_opacity:new a.aI(E,u.u_fog_ground_blend_opacity),u_horizon_color:new a.aL(E,u.u_horizon_color),u_horizon_fog_blend:new a.aI(E,u.u_horizon_fog_blend)}),terrainDepth:(E,u)=>({u_matrix:new a.aJ(E,u.u_matrix),u_ele_delta:new a.aI(E,u.u_ele_delta)}),terrainCoords:(E,u)=>({u_matrix:new a.aJ(E,u.u_matrix),u_texture:new a.aH(E,u.u_texture),u_terrain_coords_id:new a.aI(E,u.u_terrain_coords_id),u_ele_delta:new a.aI(E,u.u_ele_delta)}),sky:(E,u)=>({u_sky_color:new a.aL(E,u.u_sky_color),u_horizon_color:new a.aL(E,u.u_horizon_color),u_horizon:new a.aI(E,u.u_horizon),u_sky_horizon_blend:new a.aI(E,u.u_sky_horizon_blend)})};class qu{constructor(u,y,w){this.context=u;const O=u.gl;this.buffer=O.createBuffer(),this.dynamicDraw=!!w,this.context.unbindVAO(),u.bindElementBuffer.set(this.buffer),O.bufferData(O.ELEMENT_ARRAY_BUFFER,y.arrayBuffer,this.dynamicDraw?O.DYNAMIC_DRAW:O.STATIC_DRAW),this.dynamicDraw||delete y.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(u){const y=this.context.gl;if(!this.dynamicDraw)throw new Error("Attempted to update data while not in dynamic mode.");this.context.unbindVAO(),this.bind(),y.bufferSubData(y.ELEMENT_ARRAY_BUFFER,0,u.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const AO={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class N0{constructor(u,y,w,O){this.length=y.length,this.attributes=w,this.itemSize=y.bytesPerElement,this.dynamicDraw=O,this.context=u;const A=u.gl;this.buffer=A.createBuffer(),u.bindVertexBuffer.set(this.buffer),A.bufferData(A.ARRAY_BUFFER,y.arrayBuffer,this.dynamicDraw?A.DYNAMIC_DRAW:A.STATIC_DRAW),this.dynamicDraw||delete y.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(u){if(u.length!==this.length)throw new Error(`Length of new data is ${u.length}, which doesn't match current length of ${this.length}`);const y=this.context.gl;this.bind(),y.bufferSubData(y.ARRAY_BUFFER,0,u.arrayBuffer)}enableAttributes(u,y){for(let w=0;w<this.attributes.length;w++){const O=y.attributes[this.attributes[w].name];O!==void 0&&u.enableVertexAttribArray(O)}}setVertexAttribPointers(u,y,w){for(let O=0;O<this.attributes.length;O++){const A=this.attributes[O],$=y.attributes[A.name];$!==void 0&&u.vertexAttribPointer($,A.components,u[AO[A.type]],!1,this.itemSize,A.offset+this.itemSize*(w||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const Df=new WeakMap;function Fs(E){var u;if(Df.has(E))return Df.get(E);{const y=(u=E.getParameter(E.VERSION))===null||u===void 0?void 0:u.startsWith("WebGL 2.0");return Df.set(E,y),y}}class fi{constructor(u){this.gl=u.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(u){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class Zu extends fi{getDefault(){return a.aM.transparent}set(u){const y=this.current;(u.r!==y.r||u.g!==y.g||u.b!==y.b||u.a!==y.a||this.dirty)&&(this.gl.clearColor(u.r,u.g,u.b,u.a),this.current=u,this.dirty=!1)}}class T_ extends fi{getDefault(){return 1}set(u){(u!==this.current||this.dirty)&&(this.gl.clearDepth(u),this.current=u,this.dirty=!1)}}class Th extends fi{getDefault(){return 0}set(u){(u!==this.current||this.dirty)&&(this.gl.clearStencil(u),this.current=u,this.dirty=!1)}}class Ol extends fi{getDefault(){return[!0,!0,!0,!0]}set(u){const y=this.current;(u[0]!==y[0]||u[1]!==y[1]||u[2]!==y[2]||u[3]!==y[3]||this.dirty)&&(this.gl.colorMask(u[0],u[1],u[2],u[3]),this.current=u,this.dirty=!1)}}class L1 extends fi{getDefault(){return!0}set(u){(u!==this.current||this.dirty)&&(this.gl.depthMask(u),this.current=u,this.dirty=!1)}}class P_ extends fi{getDefault(){return 255}set(u){(u!==this.current||this.dirty)&&(this.gl.stencilMask(u),this.current=u,this.dirty=!1)}}class $1 extends fi{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(u){const y=this.current;(u.func!==y.func||u.ref!==y.ref||u.mask!==y.mask||this.dirty)&&(this.gl.stencilFunc(u.func,u.ref,u.mask),this.current=u,this.dirty=!1)}}class z0 extends fi{getDefault(){const u=this.gl;return[u.KEEP,u.KEEP,u.KEEP]}set(u){const y=this.current;(u[0]!==y[0]||u[1]!==y[1]||u[2]!==y[2]||this.dirty)&&(this.gl.stencilOp(u[0],u[1],u[2]),this.current=u,this.dirty=!1)}}class B1 extends fi{getDefault(){return!1}set(u){if(u===this.current&&!this.dirty)return;const y=this.gl;u?y.enable(y.STENCIL_TEST):y.disable(y.STENCIL_TEST),this.current=u,this.dirty=!1}}class N1 extends fi{getDefault(){return[0,1]}set(u){const y=this.current;(u[0]!==y[0]||u[1]!==y[1]||this.dirty)&&(this.gl.depthRange(u[0],u[1]),this.current=u,this.dirty=!1)}}class Va extends fi{getDefault(){return!1}set(u){if(u===this.current&&!this.dirty)return;const y=this.gl;u?y.enable(y.DEPTH_TEST):y.disable(y.DEPTH_TEST),this.current=u,this.dirty=!1}}class D_ extends fi{getDefault(){return this.gl.LESS}set(u){(u!==this.current||this.dirty)&&(this.gl.depthFunc(u),this.current=u,this.dirty=!1)}}class zo extends fi{getDefault(){return!1}set(u){if(u===this.current&&!this.dirty)return;const y=this.gl;u?y.enable(y.BLEND):y.disable(y.BLEND),this.current=u,this.dirty=!1}}class I_ extends fi{getDefault(){const u=this.gl;return[u.ONE,u.ZERO]}set(u){const y=this.current;(u[0]!==y[0]||u[1]!==y[1]||this.dirty)&&(this.gl.blendFunc(u[0],u[1]),this.current=u,this.dirty=!1)}}class M_ extends fi{getDefault(){return a.aM.transparent}set(u){const y=this.current;(u.r!==y.r||u.g!==y.g||u.b!==y.b||u.a!==y.a||this.dirty)&&(this.gl.blendColor(u.r,u.g,u.b,u.a),this.current=u,this.dirty=!1)}}class $c extends fi{getDefault(){return this.gl.FUNC_ADD}set(u){(u!==this.current||this.dirty)&&(this.gl.blendEquation(u),this.current=u,this.dirty=!1)}}class Ph extends fi{getDefault(){return!1}set(u){if(u===this.current&&!this.dirty)return;const y=this.gl;u?y.enable(y.CULL_FACE):y.disable(y.CULL_FACE),this.current=u,this.dirty=!1}}class z1 extends fi{getDefault(){return this.gl.BACK}set(u){(u!==this.current||this.dirty)&&(this.gl.cullFace(u),this.current=u,this.dirty=!1)}}class ss extends fi{getDefault(){return this.gl.CCW}set(u){(u!==this.current||this.dirty)&&(this.gl.frontFace(u),this.current=u,this.dirty=!1)}}class Dh extends fi{getDefault(){return null}set(u){(u!==this.current||this.dirty)&&(this.gl.useProgram(u),this.current=u,this.dirty=!1)}}class Q1 extends fi{getDefault(){return this.gl.TEXTURE0}set(u){(u!==this.current||this.dirty)&&(this.gl.activeTexture(u),this.current=u,this.dirty=!1)}}class R_ extends fi{getDefault(){const u=this.gl;return[0,0,u.drawingBufferWidth,u.drawingBufferHeight]}set(u){const y=this.current;(u[0]!==y[0]||u[1]!==y[1]||u[2]!==y[2]||u[3]!==y[3]||this.dirty)&&(this.gl.viewport(u[0],u[1],u[2],u[3]),this.current=u,this.dirty=!1)}}class Q0 extends fi{getDefault(){return null}set(u){if(u===this.current&&!this.dirty)return;const y=this.gl;y.bindFramebuffer(y.FRAMEBUFFER,u),this.current=u,this.dirty=!1}}class F_ extends fi{getDefault(){return null}set(u){if(u===this.current&&!this.dirty)return;const y=this.gl;y.bindRenderbuffer(y.RENDERBUFFER,u),this.current=u,this.dirty=!1}}class j1 extends fi{getDefault(){return null}set(u){if(u===this.current&&!this.dirty)return;const y=this.gl;y.bindTexture(y.TEXTURE_2D,u),this.current=u,this.dirty=!1}}class L_ extends fi{getDefault(){return null}set(u){if(u===this.current&&!this.dirty)return;const y=this.gl;y.bindBuffer(y.ARRAY_BUFFER,u),this.current=u,this.dirty=!1}}class Bm extends fi{getDefault(){return null}set(u){const y=this.gl;y.bindBuffer(y.ELEMENT_ARRAY_BUFFER,u),this.current=u,this.dirty=!1}}class Sl extends fi{getDefault(){return null}set(u){var y;if(u===this.current&&!this.dirty)return;const w=this.gl;Fs(w)?w.bindVertexArray(u):(y=w.getExtension("OES_vertex_array_object"))===null||y===void 0||y.bindVertexArrayOES(u),this.current=u,this.dirty=!1}}class Ih extends fi{getDefault(){return 4}set(u){if(u===this.current&&!this.dirty)return;const y=this.gl;y.pixelStorei(y.UNPACK_ALIGNMENT,u),this.current=u,this.dirty=!1}}class U1 extends fi{getDefault(){return!1}set(u){if(u===this.current&&!this.dirty)return;const y=this.gl;y.pixelStorei(y.UNPACK_PREMULTIPLY_ALPHA_WEBGL,u),this.current=u,this.dirty=!1}}class j0 extends fi{getDefault(){return!1}set(u){if(u===this.current&&!this.dirty)return;const y=this.gl;y.pixelStorei(y.UNPACK_FLIP_Y_WEBGL,u),this.current=u,this.dirty=!1}}class Nm extends fi{constructor(u,y){super(u),this.context=u,this.parent=y}getDefault(){return null}}class zm extends Nm{setDirty(){this.dirty=!0}set(u){if(u===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const y=this.gl;y.framebufferTexture2D(y.FRAMEBUFFER,y.COLOR_ATTACHMENT0,y.TEXTURE_2D,u,0),this.current=u,this.dirty=!1}}class Bc extends Nm{set(u){if(u===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const y=this.gl;y.framebufferRenderbuffer(y.FRAMEBUFFER,y.DEPTH_ATTACHMENT,y.RENDERBUFFER,u),this.current=u,this.dirty=!1}}class U0 extends Nm{set(u){if(u===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const y=this.gl;y.framebufferRenderbuffer(y.FRAMEBUFFER,y.DEPTH_STENCIL_ATTACHMENT,y.RENDERBUFFER,u),this.current=u,this.dirty=!1}}class EO{constructor(u,y,w,O,A){this.context=u,this.width=y,this.height=w;const $=u.gl,z=this.framebuffer=$.createFramebuffer();if(this.colorAttachment=new zm(u,z),O)this.depthAttachment=A?new U0(u,z):new Bc(u,z);else if(A)throw new Error("Stencil cannot be set without depth");if($.checkFramebufferStatus($.FRAMEBUFFER)!==$.FRAMEBUFFER_COMPLETE)throw new Error("Framebuffer is not complete")}destroy(){const u=this.context.gl,y=this.colorAttachment.get();if(y&&u.deleteTexture(y),this.depthAttachment){const w=this.depthAttachment.get();w&&u.deleteRenderbuffer(w)}u.deleteFramebuffer(this.framebuffer)}}class Ls{constructor(u,y,w){this.blendFunction=u,this.blendColor=y,this.mask=w}}Ls.Replace=[1,0],Ls.disabled=new Ls(Ls.Replace,a.aM.transparent,[!1,!1,!1,!1]),Ls.unblended=new Ls(Ls.Replace,a.aM.transparent,[!0,!0,!0,!0]),Ls.alphaBlended=new Ls([1,771],a.aM.transparent,[!0,!0,!0,!0]);class V1{constructor(u){var y,w;if(this.gl=u,this.clearColor=new Zu(this),this.clearDepth=new T_(this),this.clearStencil=new Th(this),this.colorMask=new Ol(this),this.depthMask=new L1(this),this.stencilMask=new P_(this),this.stencilFunc=new $1(this),this.stencilOp=new z0(this),this.stencilTest=new B1(this),this.depthRange=new N1(this),this.depthTest=new Va(this),this.depthFunc=new D_(this),this.blend=new zo(this),this.blendFunc=new I_(this),this.blendColor=new M_(this),this.blendEquation=new $c(this),this.cullFace=new Ph(this),this.cullFaceSide=new z1(this),this.frontFace=new ss(this),this.program=new Dh(this),this.activeTexture=new Q1(this),this.viewport=new R_(this),this.bindFramebuffer=new Q0(this),this.bindRenderbuffer=new F_(this),this.bindTexture=new j1(this),this.bindVertexBuffer=new L_(this),this.bindElementBuffer=new Bm(this),this.bindVertexArray=new Sl(this),this.pixelStoreUnpack=new Ih(this),this.pixelStoreUnpackPremultiplyAlpha=new U1(this),this.pixelStoreUnpackFlipY=new j0(this),this.extTextureFilterAnisotropic=u.getExtension("EXT_texture_filter_anisotropic")||u.getExtension("MOZ_EXT_texture_filter_anisotropic")||u.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=u.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.maxTextureSize=u.getParameter(u.MAX_TEXTURE_SIZE),Fs(u)){this.HALF_FLOAT=u.HALF_FLOAT;const O=u.getExtension("EXT_color_buffer_half_float");this.RGBA16F=(y=u.RGBA16F)!==null&&y!==void 0?y:O?.RGBA16F_EXT,this.RGB16F=(w=u.RGB16F)!==null&&w!==void 0?w:O?.RGB16F_EXT,u.getExtension("EXT_color_buffer_float")}else{u.getExtension("EXT_color_buffer_half_float"),u.getExtension("OES_texture_half_float_linear");const O=u.getExtension("OES_texture_half_float");this.HALF_FLOAT=O?.HALF_FLOAT_OES}}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.bindVertexArray.dirty=!0,this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(u,y){return new qu(this,u,y)}createVertexBuffer(u,y,w){return new N0(this,u,y,w)}createRenderbuffer(u,y,w){const O=this.gl,A=O.createRenderbuffer();return this.bindRenderbuffer.set(A),O.renderbufferStorage(O.RENDERBUFFER,u,y,w),this.bindRenderbuffer.set(null),A}createFramebuffer(u,y,w,O){return new EO(this,u,y,w,O)}clear({color:u,depth:y,stencil:w}){const O=this.gl;let A=0;u&&(A|=O.COLOR_BUFFER_BIT,this.clearColor.set(u),this.colorMask.set([!0,!0,!0,!0])),y!==void 0&&(A|=O.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(y),this.depthMask.set(!0)),w!==void 0&&(A|=O.STENCIL_BUFFER_BIT,this.clearStencil.set(w),this.stencilMask.set(255)),O.clear(A)}setCullFace(u){u.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(u.mode),this.frontFace.set(u.frontFace))}setDepthMode(u){u.func!==this.gl.ALWAYS||u.mask?(this.depthTest.set(!0),this.depthFunc.set(u.func),this.depthMask.set(u.mask),this.depthRange.set(u.range)):this.depthTest.set(!1)}setStencilMode(u){u.test.func!==this.gl.ALWAYS||u.mask?(this.stencilTest.set(!0),this.stencilMask.set(u.mask),this.stencilOp.set([u.fail,u.depthFail,u.pass]),this.stencilFunc.set({func:u.test.func,ref:u.ref,mask:u.test.mask})):this.stencilTest.set(!1)}setColorMode(u){a.aE(u.blendFunction,Ls.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(u.blendFunction),this.blendColor.set(u.blendColor)),this.colorMask.set(u.mask)}createVertexArray(){var u;return Fs(this.gl)?this.gl.createVertexArray():(u=this.gl.getExtension("OES_vertex_array_object"))===null||u===void 0?void 0:u.createVertexArrayOES()}deleteVertexArray(u){var y;return Fs(this.gl)?this.gl.deleteVertexArray(u):(y=this.gl.getExtension("OES_vertex_array_object"))===null||y===void 0?void 0:y.deleteVertexArrayOES(u)}unbindVAO(){this.bindVertexArray.set(null)}}class Rr{constructor(u,y,w){this.func=u,this.mask=y,this.range=w}}Rr.ReadOnly=!1,Rr.ReadWrite=!0,Rr.disabled=new Rr(519,Rr.ReadOnly,[0,1]);const Qm=7680;class zr{constructor(u,y,w,O,A,$){this.test=u,this.ref=y,this.mask=w,this.fail=O,this.depthFail=A,this.pass=$}}zr.disabled=new zr({func:519,mask:0},0,0,Qm,Qm,Qm);class Ai{constructor(u,y,w){this.enable=u,this.mode=y,this.frontFace=w}}let fu;function qd(E,u,y,w,O){const A=E.context,$=A.gl,z=E.useProgram("collisionBox"),U=[];let G=0,H=0;for(let Le=0;Le<w.length;Le++){const Ne=w[Le],ke=u.getTile(Ne).getBucket(y);if(!ke)continue;const Xe=O?ke.textCollisionBox:ke.iconCollisionBox,Ke=ke.collisionCircleArray;if(Ke.length>0){const st=a.H();a.aQ(st,ke.placementInvProjMatrix,E.transform.glCoordMatrix),a.aQ(st,st,ke.placementViewportMatrix),U.push({circleArray:Ke,circleOffset:H,transform:Ne.posMatrix,invTransform:st,coord:Ne}),G+=Ke.length/4,H=G}Xe&&z.draw(A,$.LINES,Rr.disabled,zr.disabled,E.colorModeForRenderPass(),Ai.disabled,{u_matrix:Ne.posMatrix,u_pixel_extrude_scale:[1/(K=E.transform).width,1/K.height]},E.style.map.terrain&&E.style.map.terrain.getTerrainData(Ne),y.id,Xe.layoutVertexBuffer,Xe.indexBuffer,Xe.segments,null,E.transform.zoom,null,null,Xe.collisionVertexBuffer)}var K;if(!O||!U.length)return;const le=E.useProgram("collisionCircle"),pe=new a.aR;pe.resize(4*G),pe._trim();let _e=0;for(const Le of U)for(let Ne=0;Ne<Le.circleArray.length/4;Ne++){const ke=4*Ne,Xe=Le.circleArray[ke+0],Ke=Le.circleArray[ke+1],st=Le.circleArray[ke+2],xt=Le.circleArray[ke+3];pe.emplace(_e++,Xe,Ke,st,xt,0),pe.emplace(_e++,Xe,Ke,st,xt,1),pe.emplace(_e++,Xe,Ke,st,xt,2),pe.emplace(_e++,Xe,Ke,st,xt,3)}(!fu||fu.length<2*G)&&(fu=(function(Le){const Ne=2*Le,ke=new a.aT;ke.resize(Ne),ke._trim();for(let Xe=0;Xe<Ne;Xe++){const Ke=6*Xe;ke.uint16[Ke+0]=4*Xe+0,ke.uint16[Ke+1]=4*Xe+1,ke.uint16[Ke+2]=4*Xe+2,ke.uint16[Ke+3]=4*Xe+2,ke.uint16[Ke+4]=4*Xe+3,ke.uint16[Ke+5]=4*Xe+0}return ke})(G));const Ee=A.createIndexBuffer(fu,!0),Me=A.createVertexBuffer(pe,a.aS.members,!0);for(const Le of U){const Ne=Pf(Le.transform,Le.invTransform,E.transform);le.draw(A,$.TRIANGLES,Rr.disabled,zr.disabled,E.colorModeForRenderPass(),Ai.disabled,Ne,E.style.map.terrain&&E.style.map.terrain.getTerrainData(Le.coord),y.id,Me,Ee,a.a0.simpleSegment(0,2*Le.circleOffset,Le.circleArray.length,Le.circleArray.length/2),null,E.transform.zoom,null,null,null)}Me.destroy(),Ee.destroy()}Ai.disabled=new Ai(!1,1029,2305),Ai.backCCW=new Ai(!0,1029,2305);const Zd=a.an(new Float32Array(16));function q1(E,u,y,w,O,A){const{horizontalAlign:$,verticalAlign:z}=a.au(E);return new a.P((-($-.5)*u/O+w[0])*A,(-(z-.5)*y/O+w[1])*A)}function If(E,u,y,w,O,A){const $=u.tileAnchorPoint.add(new a.P(u.translation[0],u.translation[1]));if(u.pitchWithMap){let z=w.mult(A);y||(z=z.rotate(-O));const U=$.add(z);return Oe(U.x,U.y,u.labelPlaneMatrix,u.getElevation).point}if(y){const z=ht(u.tileAnchorPoint.x+1,u.tileAnchorPoint.y,u).point.sub(E),U=Math.atan(z.y/z.x)+(z.x<0?Math.PI:0);return E.add(w.rotate(U))}return E.add(w)}function Xd(E,u,y,w,O,A,$,z,U,G,H,K,le,pe){const _e=E.text.placedSymbolArray,Ee=E.text.dynamicLayoutVertexArray,Me=E.icon.dynamicLayoutVertexArray,Le={};Ee.clear();for(let Ne=0;Ne<_e.length;Ne++){const ke=_e.get(Ne),Xe=ke.hidden||!ke.crossTileID||E.allowVerticalPlacement&&!ke.placedOrientation?null:w[ke.crossTileID];if(Xe){const Ke=new a.P(ke.anchorX,ke.anchorY),st={getElevation:pe,width:O.width,height:O.height,labelPlaneMatrix:A,pitchWithMap:y,projection:H,tileAnchorPoint:Ke,translation:K,unwrappedTileID:le},xt=y?Oe(Ke.x,Ke.y,$,pe):ht(Ke.x,Ke.y,st),Qt=ne(O.cameraToCenterDistance,xt.signedDistanceFromCamera);let Gt=a.ai(E.textSizeData,U,ke)*Qt/a.ap;y&&(Gt*=E.tilePixelRatio/z);const{width:tn,height:Zt,anchor:Xt,textOffset:bn,textBoxScale:nr}=Xe,Ht=q1(Xt,tn,Zt,bn,nr,Gt),Vt=H.getPitchedTextCorrection(O,Ke.add(new a.P(K[0],K[1])),le),Wn=If(xt.point,st,u,Ht,O.angle,Vt),os=E.allowVerticalPlacement&&ke.placedOrientation===a.ah.vertical?Math.PI/2:0;for(let Yn=0;Yn<ke.numGlyphs;Yn++)a.aj(Ee,Wn,os);G&&ke.associatedIconIndex>=0&&(Le[ke.associatedIconIndex]={shiftedAnchor:Wn,angle:os})}else In(ke.numGlyphs,Ee)}if(G){Me.clear();const Ne=E.icon.placedSymbolArray;for(let ke=0;ke<Ne.length;ke++){const Xe=Ne.get(ke);if(Xe.hidden)In(Xe.numGlyphs,Me);else{const Ke=Le[ke];if(Ke)for(let st=0;st<Xe.numGlyphs;st++)a.aj(Me,Ke.shiftedAnchor,Ke.angle);else In(Xe.numGlyphs,Me)}}E.icon.dynamicLayoutVertexBuffer.updateData(Me)}E.text.dynamicLayoutVertexBuffer.updateData(Ee)}function kl(E,u,y){return y.iconsInText&&u?"symbolTextAndIcon":E?"symbolSDF":"symbolIcon"}function Z1(E,u,y,w,O,A,$,z,U,G,H,K){const le=E.context,pe=le.gl,_e=E.transform,Ee=ha(),Me=z==="map",Le=U==="map",Ne=z!=="viewport"&&y.layout.get("symbol-placement")!=="point",ke=Me&&!Le&&!Ne,Xe=!Le&&Ne,Ke=!y.layout.get("symbol-sort-key").isConstant();let st=!1;const xt=E.depthModeForSublayer(0,Rr.ReadOnly),Qt=y._unevaluatedLayout.hasValue("text-variable-anchor")||y._unevaluatedLayout.hasValue("text-variable-anchor-offset"),Gt=[],tn=Ee.getCircleRadiusCorrection(_e);for(const Zt of w){const Xt=u.getTile(Zt),bn=Xt.getBucket(y);if(!bn)continue;const nr=O?bn.text:bn.icon;if(!nr||!nr.segments.get().length||!nr.hasVisibleVertices)continue;const Ht=nr.programConfigurations.get(y.id),Vt=O||bn.sdfIcons,Wn=O?bn.textSizeData:bn.iconSizeData,os=Le||_e.pitch!==0,Yn=E.useProgram(kl(Vt,O,bn),Ht),Lr=a.ag(Wn,_e.zoom),Vi=E.style.map.terrain&&E.style.map.terrain.getTerrainData(Zt);let to,Tl,Br,da,Pa=[0,0],pa=null;if(O)Tl=Xt.glyphAtlasTexture,Br=pe.LINEAR,to=Xt.glyphAtlasTexture.size,bn.iconsInText&&(Pa=Xt.imageAtlasTexture.size,pa=Xt.imageAtlasTexture,da=os||E.options.rotating||E.options.zooming||Wn.kind==="composite"||Wn.kind==="camera"?pe.LINEAR:pe.NEAREST);else{const jr=y.layout.get("icon-size").constantOr(0)!==1||bn.iconsNeedLinear;Tl=Xt.imageAtlasTexture,Br=Vt||E.options.rotating||E.options.zooming||jr||os?pe.LINEAR:pe.NEAREST,to=Xt.imageAtlasTexture.size}const Da=Cr(Xt,1,E.transform.zoom),Pl=Xe?Zt.posMatrix:Zd,op=oi(Pl,Le,Me,E.transform,Da),Bh=Fi(Pl,Le,Me,E.transform,Da),Xf=Fi(Zt.posMatrix,Le,Me,E.transform,Da),Dl=Ee.translatePosition(E.transform,Xt,A,$),ty=Qt&&bn.hasTextData(),Wf=y.layout.get("icon-text-fit")!=="none"&&ty&&bn.hasIconData();if(Ne){const jr=E.style.map.terrain?(ap,Nh)=>E.style.map.terrain.getElevation(Zt,ap,Nh):null,qc=y.layout.get("text-rotation-alignment")==="map";fe(bn,Zt.posMatrix,E,O,op,Xf,Le,G,qc,Ee,Zt.toUnwrapped(),_e.width,_e.height,Dl,jr)}const Il=Zt.posMatrix,Ml=O&&Qt||Wf,Wu=Ne||Ml?Zd:op,Rl=Bh,Ko=Vt&&y.paint.get(O?"text-halo-width":"icon-halo-width").constantOr(1)!==0;let ma;ma=Vt?bn.iconsInText?M1(Wn.kind,Lr,ke,Le,Ne,Ml,E,Il,Wu,Rl,Dl,to,Pa,tn):$i(Wn.kind,Lr,ke,Le,Ne,Ml,E,Il,Wu,Rl,Dl,O,to,!0,tn):ms(Wn.kind,Lr,ke,Le,Ne,Ml,E,Il,Wu,Rl,Dl,O,to,tn);const cl={program:Yn,buffers:nr,uniformValues:ma,atlasTexture:Tl,atlasTextureIcon:pa,atlasInterpolation:Br,atlasInterpolationIcon:da,isSDF:Vt,hasHalo:Ko};if(Ke&&bn.canOverlap){st=!0;const jr=nr.segments.get();for(const qc of jr)Gt.push({segments:new a.a0([qc]),sortKey:qc.sortKey,state:cl,terrainData:Vi})}else Gt.push({segments:nr.segments,sortKey:0,state:cl,terrainData:Vi})}st&&Gt.sort(((Zt,Xt)=>Zt.sortKey-Xt.sortKey));for(const Zt of Gt){const Xt=Zt.state;if(le.activeTexture.set(pe.TEXTURE0),Xt.atlasTexture.bind(Xt.atlasInterpolation,pe.CLAMP_TO_EDGE),Xt.atlasTextureIcon&&(le.activeTexture.set(pe.TEXTURE1),Xt.atlasTextureIcon&&Xt.atlasTextureIcon.bind(Xt.atlasInterpolationIcon,pe.CLAMP_TO_EDGE)),Xt.isSDF){const bn=Xt.uniformValues;Xt.hasHalo&&(bn.u_is_halo=1,Mh(Xt.buffers,Zt.segments,y,E,Xt.program,xt,H,K,bn,Zt.terrainData)),bn.u_is_halo=0}Mh(Xt.buffers,Zt.segments,y,E,Xt.program,xt,H,K,Xt.uniformValues,Zt.terrainData)}}function Mh(E,u,y,w,O,A,$,z,U,G){const H=w.context;O.draw(H,H.gl.TRIANGLES,A,$,z,Ai.disabled,U,G,y.id,E.layoutVertexBuffer,E.indexBuffer,u,y.paint,w.transform.zoom,E.programConfigurations.get(y.id),E.dynamicLayoutVertexBuffer,E.opacityVertexBuffer)}function X1(E,u,y,w){const O=E.context,A=O.gl,$=zr.disabled,z=new Ls([A.ONE,A.ONE],a.aM.transparent,[!0,!0,!0,!0]),U=u.getBucket(y);if(!U)return;const G=w.key;let H=y.heatmapFbos.get(G);H||(H=Rf(O,u.tileSize,u.tileSize),y.heatmapFbos.set(G,H)),O.bindFramebuffer.set(H.framebuffer),O.viewport.set([0,0,u.tileSize,u.tileSize]),O.clear({color:a.aM.transparent});const K=U.programConfigurations.get(y.id),le=E.useProgram("heatmap",K),pe=E.style.map.terrain.getTerrainData(w);le.draw(O,A.TRIANGLES,Rr.disabled,$,z,Ai.disabled,Ea(w.posMatrix,u,E.transform.zoom,y.paint.get("heatmap-intensity")),pe,y.id,U.layoutVertexBuffer,U.indexBuffer,U.segments,y.paint,E.transform.zoom,K)}function Mf(E,u,y){const w=E.context,O=w.gl;w.setColorMode(E.colorModeForRenderPass());const A=Wd(w,u),$=y.key,z=u.heatmapFbos.get($);z&&(w.activeTexture.set(O.TEXTURE0),O.bindTexture(O.TEXTURE_2D,z.colorAttachment.get()),w.activeTexture.set(O.TEXTURE1),A.bind(O.LINEAR,O.CLAMP_TO_EDGE),E.useProgram("heatmapTexture").draw(w,O.TRIANGLES,Rr.disabled,zr.disabled,E.colorModeForRenderPass(),Ai.disabled,F0(E,u,0,1),null,u.id,E.rasterBoundsBuffer,E.quadTriangleIndexBuffer,E.rasterBoundsSegments,u.paint,E.transform.zoom),z.destroy(),u.heatmapFbos.delete($))}function Rf(E,u,y){var w,O;const A=E.gl,$=A.createTexture();A.bindTexture(A.TEXTURE_2D,$),A.texParameteri(A.TEXTURE_2D,A.TEXTURE_WRAP_S,A.CLAMP_TO_EDGE),A.texParameteri(A.TEXTURE_2D,A.TEXTURE_WRAP_T,A.CLAMP_TO_EDGE),A.texParameteri(A.TEXTURE_2D,A.TEXTURE_MIN_FILTER,A.LINEAR),A.texParameteri(A.TEXTURE_2D,A.TEXTURE_MAG_FILTER,A.LINEAR);const z=(w=E.HALF_FLOAT)!==null&&w!==void 0?w:A.UNSIGNED_BYTE,U=(O=E.RGBA16F)!==null&&O!==void 0?O:A.RGBA;A.texImage2D(A.TEXTURE_2D,0,U,u,y,0,A.RGBA,z,null);const G=E.createFramebuffer(u,y,!1,!1);return G.colorAttachment.set($),G}function Wd(E,u){return u.colorRampTexture||(u.colorRampTexture=new ae(E,u.colorRamp,E.gl.RGBA)),u.colorRampTexture}function al(E,u,y,w,O){if(!y||!w||!w.imageAtlas)return;const A=w.imageAtlas.patternPositions;let $=A[y.to.toString()],z=A[y.from.toString()];if(!$&&z&&($=z),!z&&$&&(z=$),!$||!z){const U=O.getPaintProperty(u);$=A[U],z=A[U]}$&&z&&E.setConstantPatternPositions($,z)}function Rh(E,u,y,w,O,A,$){const z=E.context.gl,U="fill-pattern",G=y.paint.get(U),H=G&&G.constantOr(1),K=y.getCrossfadeParameters();let le,pe,_e,Ee,Me;$?(pe=H&&!y.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",le=z.LINES):(pe=H?"fillPattern":"fill",le=z.TRIANGLES);const Le=G.constantOr(null);for(const Ne of w){const ke=u.getTile(Ne);if(H&&!ke.patternsLoaded())continue;const Xe=ke.getBucket(y);if(!Xe)continue;const Ke=Xe.programConfigurations.get(y.id),st=E.useProgram(pe,Ke),xt=E.style.map.terrain&&E.style.map.terrain.getTerrainData(Ne);H&&(E.context.activeTexture.set(z.TEXTURE0),ke.imageAtlasTexture.bind(z.LINEAR,z.CLAMP_TO_EDGE),Ke.updatePaintBuffers(K)),al(Ke,U,Le,ke,y);const Qt=xt?Ne:null,Gt=E.translatePosMatrix(Qt?Qt.posMatrix:Ne.posMatrix,ke,y.paint.get("fill-translate"),y.paint.get("fill-translate-anchor"));if($){Ee=Xe.indexBuffer2,Me=Xe.segments2;const tn=[z.drawingBufferWidth,z.drawingBufferHeight];_e=pe==="fillOutlinePattern"&&H?I1(Gt,E,K,ke,tn):S_(Gt,tn)}else Ee=Xe.indexBuffer,Me=Xe.segments,_e=H?D1(Gt,E,K,ke):Vd(Gt);st.draw(E.context,le,O,E.stencilModeForClipping(Ne),A,Ai.disabled,_e,xt,y.id,Xe.layoutVertexBuffer,Ee,Me,y.paint,E.transform.zoom,Ke)}}function V0(E,u,y,w,O,A,$){const z=E.context,U=z.gl,G="fill-extrusion-pattern",H=y.paint.get(G),K=H.constantOr(1),le=y.getCrossfadeParameters(),pe=y.paint.get("fill-extrusion-opacity"),_e=H.constantOr(null);for(const Ee of w){const Me=u.getTile(Ee),Le=Me.getBucket(y);if(!Le)continue;const Ne=E.style.map.terrain&&E.style.map.terrain.getTerrainData(Ee),ke=Le.programConfigurations.get(y.id),Xe=E.useProgram(K?"fillExtrusionPattern":"fillExtrusion",ke);K&&(E.context.activeTexture.set(U.TEXTURE0),Me.imageAtlasTexture.bind(U.LINEAR,U.CLAMP_TO_EDGE),ke.updatePaintBuffers(le)),al(ke,G,_e,Me,y);const Ke=E.translatePosMatrix(Ee.posMatrix,Me,y.paint.get("fill-extrusion-translate"),y.paint.get("fill-extrusion-translate-anchor")),st=y.paint.get("fill-extrusion-vertical-gradient"),xt=K?Lm(Ke,E,st,pe,Ee,le,Me):Ud(Ke,E,st,pe);Xe.draw(z,z.gl.TRIANGLES,O,A,$,Ai.backCCW,xt,Ne,y.id,Le.layoutVertexBuffer,Le.indexBuffer,Le.segments,y.paint,E.transform.zoom,ke,E.style.map.terrain&&Le.centroidVertexBuffer)}}function Gd(E,u,y,w,O,A,$){const z=E.context,U=z.gl,G=y.fbo;if(!G)return;const H=E.useProgram("hillshade"),K=E.style.map.terrain&&E.style.map.terrain.getTerrainData(u);z.activeTexture.set(U.TEXTURE0),U.bindTexture(U.TEXTURE_2D,G.colorAttachment.get()),H.draw(z,U.TRIANGLES,O,A,$,Ai.disabled,((le,pe,_e,Ee)=>{const Me=_e.paint.get("hillshade-shadow-color"),Le=_e.paint.get("hillshade-highlight-color"),Ne=_e.paint.get("hillshade-accent-color");let ke=_e.paint.get("hillshade-illumination-direction")*(Math.PI/180);_e.paint.get("hillshade-illumination-anchor")==="viewport"&&(ke-=le.transform.angle);const Xe=!le.options.moving;return{u_matrix:Ee?Ee.posMatrix:le.transform.calculatePosMatrix(pe.tileID.toUnwrapped(),Xe),u_image:0,u_latrange:L0(0,pe.tileID),u_light:[_e.paint.get("hillshade-exaggeration"),ke],u_shadow:Me,u_highlight:Le,u_accent:Ne}})(E,y,w,K?u:null),K,w.id,E.rasterBoundsBuffer,E.quadTriangleIndexBuffer,E.rasterBoundsSegments)}function Yd(E,u,y,w,O,A){const $=E.context,z=$.gl,U=u.dem;if(U&&U.data){const G=U.dim,H=U.stride,K=U.getPixels();if($.activeTexture.set(z.TEXTURE1),$.pixelStoreUnpackPremultiplyAlpha.set(!1),u.demTexture=u.demTexture||E.getTileTexture(H),u.demTexture){const pe=u.demTexture;pe.update(K,{premultiply:!1}),pe.bind(z.NEAREST,z.CLAMP_TO_EDGE)}else u.demTexture=new ae($,K,z.RGBA,{premultiply:!1}),u.demTexture.bind(z.NEAREST,z.CLAMP_TO_EDGE);$.activeTexture.set(z.TEXTURE0);let le=u.fbo;if(!le){const pe=new ae($,{width:G,height:G,data:null},z.RGBA);pe.bind(z.LINEAR,z.CLAMP_TO_EDGE),le=u.fbo=$.createFramebuffer(G,G,!0,!1),le.colorAttachment.set(pe.texture)}$.bindFramebuffer.set(le.framebuffer),$.viewport.set([0,0,G,G]),E.useProgram("hillshadePrepare").draw($,z.TRIANGLES,w,O,A,Ai.disabled,((pe,_e)=>{const Ee=_e.stride,Me=a.H();return a.aP(Me,0,a.X,-a.X,0,0,1),a.J(Me,Me,[0,-a.X,0]),{u_matrix:Me,u_image:1,u_dimension:[Ee,Ee],u_zoom:pe.overscaledZ,u_unpack:_e.getUnpackVector()}})(u.tileID,U),null,y.id,E.rasterBoundsBuffer,E.quadTriangleIndexBuffer,E.rasterBoundsSegments),u.needsHillshadePrepare=!1}}function Ff(E,u,y,w,O,A){const $=w.paint.get("raster-fade-duration");if(!A&&$>0){const z=p.now(),U=(z-E.timeAdded)/$,G=u?(z-u.timeAdded)/$:-1,H=y.getSource(),K=O.coveringZoomLevel({tileSize:H.tileSize,roundZoom:H.roundZoom}),le=!u||Math.abs(u.tileID.overscaledZ-K)>Math.abs(E.tileID.overscaledZ-K),pe=le&&E.refreshedUponExpiration?1:a.ac(le?U:1-G,0,1);return E.refreshedUponExpiration&&U>=1&&(E.refreshedUponExpiration=!1),u?{opacity:1,mix:1-pe}:{opacity:pe,mix:0}}return{opacity:1,mix:0}}const ll=new a.aM(1,0,0,1),li=new a.aM(0,1,0,1),q0=new a.aM(0,0,1,1),TO=new a.aM(1,0,1,1),$_=new a.aM(0,1,1,1);function Hd(E,u,y,w){Nc(E,0,u+y/2,E.transform.width,y,w)}function B_(E,u,y,w){Nc(E,u-y/2,0,y,E.transform.height,w)}function Nc(E,u,y,w,O,A){const $=E.context,z=$.gl;z.enable(z.SCISSOR_TEST),z.scissor(u*E.pixelRatio,y*E.pixelRatio,w*E.pixelRatio,O*E.pixelRatio),$.clear({color:A}),z.disable(z.SCISSOR_TEST)}function tt(E,u,y){const w=E.context,O=w.gl,A=y.posMatrix,$=E.useProgram("debug"),z=Rr.disabled,U=zr.disabled,G=E.colorModeForRenderPass(),H="$debug",K=E.style.map.terrain&&E.style.map.terrain.getTerrainData(y);w.activeTexture.set(O.TEXTURE0);const le=u.getTileByID(y.key).latestRawTileData,pe=Math.floor((le&&le.byteLength||0)/1024),_e=u.getTile(y).tileSize,Ee=512/Math.min(_e,512)*(y.overscaledZ/E.transform.zoom)*.5;let Me=y.canonical.toString();y.overscaledZ!==y.canonical.z&&(Me+=` => ${y.overscaledZ}`),(function(Le,Ne){Le.initDebugOverlayCanvas();const ke=Le.debugOverlayCanvas,Xe=Le.context.gl,Ke=Le.debugOverlayCanvas.getContext("2d");Ke.clearRect(0,0,ke.width,ke.height),Ke.shadowColor="white",Ke.shadowBlur=2,Ke.lineWidth=1.5,Ke.strokeStyle="white",Ke.textBaseline="top",Ke.font="bold 36px Open Sans, sans-serif",Ke.fillText(Ne,5,5),Ke.strokeText(Ne,5,5),Le.debugOverlayTexture.update(ke),Le.debugOverlayTexture.bind(Xe.LINEAR,Xe.CLAMP_TO_EDGE)})(E,`${Me} ${pe}kB`),$.draw(w,O.TRIANGLES,z,U,Ls.alphaBlended,Ai.disabled,$m(A,a.aM.transparent,Ee),null,H,E.debugBuffer,E.quadTriangleIndexBuffer,E.debugSegments),$.draw(w,O.LINE_STRIP,z,U,G,Ai.disabled,$m(A,a.aM.red),K,H,E.debugBuffer,E.tileBorderIndexBuffer,E.debugSegments)}function bt(E,u,y){const w=E.context,O=w.gl,A=E.colorModeForRenderPass(),$=new Rr(O.LEQUAL,Rr.ReadWrite,E.depthRangeFor3D),z=E.useProgram("terrain"),U=u.getTerrainMesh();w.bindFramebuffer.set(null),w.viewport.set([0,0,E.width,E.height]);for(const G of y){const H=E.renderToTexture.getTexture(G),K=u.getTerrainData(G.tileID);w.activeTexture.set(O.TEXTURE0),O.bindTexture(O.TEXTURE_2D,H.texture);const le=E.transform.calculatePosMatrix(G.tileID.toUnwrapped()),pe=u.getMeshFrameDelta(E.transform.zoom),_e=E.transform.calculateFogMatrix(G.tileID.toUnwrapped()),Ee=R0(le,pe,_e,E.style.sky,E.transform.pitch);z.draw(w,O.TRIANGLES,$,zr.disabled,A,Ai.backCCW,Ee,K,"terrain",U.vertexBuffer,U.indexBuffer,U.segments)}}class mt{constructor(u,y,w){this.vertexBuffer=u,this.indexBuffer=y,this.segments=w}destroy(){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.vertexBuffer=null,this.indexBuffer=null,this.segments=null}}class xn{constructor(u,y){this.context=new V1(u),this.transform=y,this._tileTextures={},this.terrainFacilitator={dirty:!0,matrix:a.an(new Float64Array(16)),renderTime:0},this.setup(),this.numSublayers=rn.maxUnderzooming+rn.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new I0}resize(u,y,w){if(this.width=Math.floor(u*w),this.height=Math.floor(y*w),this.pixelRatio=w,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const O of this.style._order)this.style._layers[O].resize()}setup(){const u=this.context,y=new a.aX;y.emplaceBack(0,0),y.emplaceBack(a.X,0),y.emplaceBack(0,a.X),y.emplaceBack(a.X,a.X),this.tileExtentBuffer=u.createVertexBuffer(y,Ch.members),this.tileExtentSegments=a.a0.simpleSegment(0,0,4,2);const w=new a.aX;w.emplaceBack(0,0),w.emplaceBack(a.X,0),w.emplaceBack(0,a.X),w.emplaceBack(a.X,a.X),this.debugBuffer=u.createVertexBuffer(w,Ch.members),this.debugSegments=a.a0.simpleSegment(0,0,4,5);const O=new a.$;O.emplaceBack(0,0,0,0),O.emplaceBack(a.X,0,a.X,0),O.emplaceBack(0,a.X,0,a.X),O.emplaceBack(a.X,a.X,a.X,a.X),this.rasterBoundsBuffer=u.createVertexBuffer(O,Mi.members),this.rasterBoundsSegments=a.a0.simpleSegment(0,0,4,2);const A=new a.aX;A.emplaceBack(0,0),A.emplaceBack(1,0),A.emplaceBack(0,1),A.emplaceBack(1,1),this.viewportBuffer=u.createVertexBuffer(A,Ch.members),this.viewportSegments=a.a0.simpleSegment(0,0,4,2);const $=new a.aZ;$.emplaceBack(0),$.emplaceBack(1),$.emplaceBack(3),$.emplaceBack(2),$.emplaceBack(0),this.tileBorderIndexBuffer=u.createIndexBuffer($);const z=new a.aY;z.emplaceBack(0,1,2),z.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=u.createIndexBuffer(z);const U=this.context.gl;this.stencilClearMode=new zr({func:U.ALWAYS,mask:0},0,255,U.ZERO,U.ZERO,U.ZERO)}clearStencil(){const u=this.context,y=u.gl;this.nextStencilID=1,this.currentStencilSource=void 0;const w=a.H();a.aP(w,0,this.width,this.height,0,0,1),a.K(w,w,[y.drawingBufferWidth,y.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(u,y.TRIANGLES,Rr.disabled,this.stencilClearMode,Ls.disabled,Ai.disabled,Ua(w),null,"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(u,y){if(this.currentStencilSource===u.source||!u.isTileClipped()||!y||!y.length)return;this.currentStencilSource=u.source;const w=this.context,O=w.gl;this.nextStencilID+y.length>256&&this.clearStencil(),w.setColorMode(Ls.disabled),w.setDepthMode(Rr.disabled);const A=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(const $ of y){const z=this._tileClippingMaskIDs[$.key]=this.nextStencilID++,U=this.style.map.terrain&&this.style.map.terrain.getTerrainData($);A.draw(w,O.TRIANGLES,Rr.disabled,new zr({func:O.ALWAYS,mask:0},z,255,O.KEEP,O.KEEP,O.REPLACE),Ls.disabled,Ai.disabled,Ua($.posMatrix),U,"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const u=this.nextStencilID++,y=this.context.gl;return new zr({func:y.NOTEQUAL,mask:255},u,255,y.KEEP,y.KEEP,y.REPLACE)}stencilModeForClipping(u){const y=this.context.gl;return new zr({func:y.EQUAL,mask:255},this._tileClippingMaskIDs[u.key],0,y.KEEP,y.KEEP,y.REPLACE)}stencilConfigForOverlap(u){const y=this.context.gl,w=u.sort((($,z)=>z.overscaledZ-$.overscaledZ)),O=w[w.length-1].overscaledZ,A=w[0].overscaledZ-O+1;if(A>1){this.currentStencilSource=void 0,this.nextStencilID+A>256&&this.clearStencil();const $={};for(let z=0;z<A;z++)$[z+O]=new zr({func:y.GEQUAL,mask:255},z+this.nextStencilID,255,y.KEEP,y.KEEP,y.REPLACE);return this.nextStencilID+=A,[$,w]}return[{[O]:zr.disabled},w]}colorModeForRenderPass(){const u=this.context.gl;return this._showOverdrawInspector?new Ls([u.CONSTANT_COLOR,u.ONE],new a.aM(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?Ls.unblended:Ls.alphaBlended}depthModeForSublayer(u,y,w){if(!this.opaquePassEnabledForLayer())return Rr.disabled;const O=1-((1+this.currentLayer)*this.numSublayers+u)*this.depthEpsilon;return new Rr(w||this.context.gl.LEQUAL,y,[O,O])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(u,y){this.style=u,this.options=y,this.lineAtlas=u.lineAtlas,this.imageManager=u.imageManager,this.glyphManager=u.glyphManager,this.symbolFadeChange=u.placement.symbolFadeChange(p.now()),this.imageManager.beginFrame();const w=this.style._order,O=this.style.sourceCaches,A={},$={},z={};for(const U in O){const G=O[U];G.used&&G.prepare(this.context),A[U]=G.getVisibleCoordinates(),$[U]=A[U].slice().reverse(),z[U]=G.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let U=0;U<w.length;U++)if(this.style._layers[w[U]].is3D()){this.opaquePassCutoff=U;break}this.maybeDrawDepthAndCoords(!1),this.renderToTexture&&(this.renderToTexture.prepareForRender(this.style,this.transform.zoom),this.opaquePassCutoff=0),this.renderPass="offscreen";for(const U of w){const G=this.style._layers[U];if(!G.hasOffscreenPass()||G.isHidden(this.transform.zoom))continue;const H=$[G.source];(G.type==="custom"||H.length)&&this.renderLayer(this,O[G.source],G,H)}if(this.context.bindFramebuffer.set(null),this.context.clear({color:y.showOverdrawInspector?a.aM.black:a.aM.transparent,depth:1}),this.clearStencil(),this.style.sky&&(function(U,G){const H=U.context,K=H.gl,le=((Le,Ne,ke)=>({u_sky_color:Le.properties.get("sky-color"),u_horizon_color:Le.properties.get("horizon-color"),u_horizon:(Ne.height/2+Ne.getHorizon())*ke,u_sky_horizon_blend:Le.properties.get("sky-horizon-blend")*Ne.height/2*ke}))(G,U.style.map.transform,U.pixelRatio),pe=new Rr(K.LEQUAL,Rr.ReadWrite,[0,1]),_e=zr.disabled,Ee=U.colorModeForRenderPass(),Me=U.useProgram("sky");if(!G.mesh){const Le=new a.aX;Le.emplaceBack(-1,-1),Le.emplaceBack(1,-1),Le.emplaceBack(1,1),Le.emplaceBack(-1,1);const Ne=new a.aY;Ne.emplaceBack(0,1,2),Ne.emplaceBack(0,2,3),G.mesh=new mt(H.createVertexBuffer(Le,Ch.members),H.createIndexBuffer(Ne),a.a0.simpleSegment(0,0,Le.length,Ne.length))}Me.draw(H,K.TRIANGLES,pe,_e,Ee,Ai.disabled,le,void 0,"sky",G.mesh.vertexBuffer,G.mesh.indexBuffer,G.mesh.segments)})(this,this.style.sky),this._showOverdrawInspector=y.showOverdrawInspector,this.depthRangeFor3D=[0,1-(u._order.length+2)*this.numSublayers*this.depthEpsilon],!this.renderToTexture)for(this.renderPass="opaque",this.currentLayer=w.length-1;this.currentLayer>=0;this.currentLayer--){const U=this.style._layers[w[this.currentLayer]],G=O[U.source],H=A[U.source];this._renderTileClippingMasks(U,H),this.renderLayer(this,G,U,H)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<w.length;this.currentLayer++){const U=this.style._layers[w[this.currentLayer]],G=O[U.source];if(this.renderToTexture&&this.renderToTexture.renderLayer(U))continue;const H=(U.type==="symbol"?z:$)[U.source];this._renderTileClippingMasks(U,A[U.source]),this.renderLayer(this,G,U,H)}if(this.options.showTileBoundaries){const U=(function(G,H){let K=null;const le=Object.values(G._layers).flatMap((Me=>Me.source&&!Me.isHidden(H)?[G.sourceCaches[Me.source]]:[])),pe=le.filter((Me=>Me.getSource().type==="vector")),_e=le.filter((Me=>Me.getSource().type!=="vector")),Ee=Me=>{(!K||K.getSource().maxzoom<Me.getSource().maxzoom)&&(K=Me)};return pe.forEach((Me=>Ee(Me))),K||_e.forEach((Me=>Ee(Me))),K})(this.style,this.transform.zoom);U&&(function(G,H,K){for(let le=0;le<K.length;le++)tt(G,H,K[le])})(this,U,U.getVisibleCoordinates())}this.options.showPadding&&(function(U){const G=U.transform.padding;Hd(U,U.transform.height-(G.top||0),3,ll),Hd(U,G.bottom||0,3,li),B_(U,G.left||0,3,q0),B_(U,U.transform.width-(G.right||0),3,TO);const H=U.transform.centerPoint;(function(K,le,pe,_e){Nc(K,le-1,pe-10,2,20,_e),Nc(K,le-10,pe-1,20,2,_e)})(U,H.x,U.transform.height-H.y,$_)})(this),this.context.setDefault()}maybeDrawDepthAndCoords(u){if(!this.style||!this.style.map||!this.style.map.terrain)return;const y=this.terrainFacilitator.matrix,w=this.transform.modelViewProjectionMatrix;let O=this.terrainFacilitator.dirty;O||(O=u?!a.a_(y,w):!a.a$(y,w)),O||(O=this.style.map.terrain.sourceCache.tilesAfterTime(this.terrainFacilitator.renderTime).length>0),O&&(a.b0(y,w),this.terrainFacilitator.renderTime=Date.now(),this.terrainFacilitator.dirty=!1,(function(A,$){const z=A.context,U=z.gl,G=Ls.unblended,H=new Rr(U.LEQUAL,Rr.ReadWrite,[0,1]),K=$.getTerrainMesh(),le=$.sourceCache.getRenderableTiles(),pe=A.useProgram("terrainDepth");z.bindFramebuffer.set($.getFramebuffer("depth").framebuffer),z.viewport.set([0,0,A.width/devicePixelRatio,A.height/devicePixelRatio]),z.clear({color:a.aM.transparent,depth:1});for(const _e of le){const Ee=$.getTerrainData(_e.tileID),Me={u_matrix:A.transform.calculatePosMatrix(_e.tileID.toUnwrapped()),u_ele_delta:$.getMeshFrameDelta(A.transform.zoom)};pe.draw(z,U.TRIANGLES,H,zr.disabled,G,Ai.backCCW,Me,Ee,"terrain",K.vertexBuffer,K.indexBuffer,K.segments)}z.bindFramebuffer.set(null),z.viewport.set([0,0,A.width,A.height])})(this,this.style.map.terrain),(function(A,$){const z=A.context,U=z.gl,G=Ls.unblended,H=new Rr(U.LEQUAL,Rr.ReadWrite,[0,1]),K=$.getTerrainMesh(),le=$.getCoordsTexture(),pe=$.sourceCache.getRenderableTiles(),_e=A.useProgram("terrainCoords");z.bindFramebuffer.set($.getFramebuffer("coords").framebuffer),z.viewport.set([0,0,A.width/devicePixelRatio,A.height/devicePixelRatio]),z.clear({color:a.aM.transparent,depth:1}),$.coordsIndex=[];for(const Ee of pe){const Me=$.getTerrainData(Ee.tileID);z.activeTexture.set(U.TEXTURE0),U.bindTexture(U.TEXTURE_2D,le.texture);const Le={u_matrix:A.transform.calculatePosMatrix(Ee.tileID.toUnwrapped()),u_terrain_coords_id:(255-$.coordsIndex.length)/255,u_texture:0,u_ele_delta:$.getMeshFrameDelta(A.transform.zoom)};_e.draw(z,U.TRIANGLES,H,zr.disabled,G,Ai.backCCW,Le,Me,"terrain",K.vertexBuffer,K.indexBuffer,K.segments),$.coordsIndex.push(Ee.tileID.key)}z.bindFramebuffer.set(null),z.viewport.set([0,0,A.width,A.height])})(this,this.style.map.terrain))}renderLayer(u,y,w,O){if(!w.isHidden(this.transform.zoom)&&(w.type==="background"||w.type==="custom"||(O||[]).length))switch(this.id=w.id,w.type){case"symbol":(function(A,$,z,U,G){if(A.renderPass!=="translucent")return;const H=zr.disabled,K=A.colorModeForRenderPass();(z._unevaluatedLayout.hasValue("text-variable-anchor")||z._unevaluatedLayout.hasValue("text-variable-anchor-offset"))&&(function(le,pe,_e,Ee,Me,Le,Ne,ke,Xe){const Ke=pe.transform,st=ha(),xt=Me==="map",Qt=Le==="map";for(const Gt of le){const tn=Ee.getTile(Gt),Zt=tn.getBucket(_e);if(!Zt||!Zt.text||!Zt.text.segments.get().length)continue;const Xt=a.ag(Zt.textSizeData,Ke.zoom),bn=Cr(tn,1,pe.transform.zoom),nr=oi(Gt.posMatrix,Qt,xt,pe.transform,bn),Ht=_e.layout.get("icon-text-fit")!=="none"&&Zt.hasIconData();if(Xt){const Vt=Math.pow(2,Ke.zoom-tn.tileID.overscaledZ),Wn=pe.style.map.terrain?(Yn,Lr)=>pe.style.map.terrain.getElevation(Gt,Yn,Lr):null,os=st.translatePosition(Ke,tn,Ne,ke);Xd(Zt,xt,Qt,Xe,Ke,nr,Gt.posMatrix,Vt,Xt,Ht,st,os,Gt.toUnwrapped(),Wn)}}})(U,A,z,$,z.layout.get("text-rotation-alignment"),z.layout.get("text-pitch-alignment"),z.paint.get("text-translate"),z.paint.get("text-translate-anchor"),G),z.paint.get("icon-opacity").constantOr(1)!==0&&Z1(A,$,z,U,!1,z.paint.get("icon-translate"),z.paint.get("icon-translate-anchor"),z.layout.get("icon-rotation-alignment"),z.layout.get("icon-pitch-alignment"),z.layout.get("icon-keep-upright"),H,K),z.paint.get("text-opacity").constantOr(1)!==0&&Z1(A,$,z,U,!0,z.paint.get("text-translate"),z.paint.get("text-translate-anchor"),z.layout.get("text-rotation-alignment"),z.layout.get("text-pitch-alignment"),z.layout.get("text-keep-upright"),H,K),$.map.showCollisionBoxes&&(qd(A,$,z,U,!0),qd(A,$,z,U,!1))})(u,y,w,O,this.style.placement.variableOffsets);break;case"circle":(function(A,$,z,U){if(A.renderPass!=="translucent")return;const G=z.paint.get("circle-opacity"),H=z.paint.get("circle-stroke-width"),K=z.paint.get("circle-stroke-opacity"),le=!z.layout.get("circle-sort-key").isConstant();if(G.constantOr(1)===0&&(H.constantOr(1)===0||K.constantOr(1)===0))return;const pe=A.context,_e=pe.gl,Ee=A.depthModeForSublayer(0,Rr.ReadOnly),Me=zr.disabled,Le=A.colorModeForRenderPass(),Ne=[];for(let ke=0;ke<U.length;ke++){const Xe=U[ke],Ke=$.getTile(Xe),st=Ke.getBucket(z);if(!st)continue;const xt=st.programConfigurations.get(z.id),Qt=A.useProgram("circle",xt),Gt=st.layoutVertexBuffer,tn=st.indexBuffer,Zt=A.style.map.terrain&&A.style.map.terrain.getTerrainData(Xe),Xt={programConfiguration:xt,program:Qt,layoutVertexBuffer:Gt,indexBuffer:tn,uniformValues:k_(A,Xe,Ke,z),terrainData:Zt};if(le){const bn=st.segments.get();for(const nr of bn)Ne.push({segments:new a.a0([nr]),sortKey:nr.sortKey,state:Xt})}else Ne.push({segments:st.segments,sortKey:0,state:Xt})}le&&Ne.sort(((ke,Xe)=>ke.sortKey-Xe.sortKey));for(const ke of Ne){const{programConfiguration:Xe,program:Ke,layoutVertexBuffer:st,indexBuffer:xt,uniformValues:Qt,terrainData:Gt}=ke.state;Ke.draw(pe,_e.TRIANGLES,Ee,Me,Le,Ai.disabled,Qt,Gt,z.id,st,xt,ke.segments,z.paint,A.transform.zoom,Xe)}})(u,y,w,O);break;case"heatmap":(function(A,$,z,U){if(z.paint.get("heatmap-opacity")===0)return;const G=A.context;if(A.style.map.terrain){for(const H of U){const K=$.getTile(H);$.hasRenderableParent(H)||(A.renderPass==="offscreen"?X1(A,K,z,H):A.renderPass==="translucent"&&Mf(A,z,H))}G.viewport.set([0,0,A.width,A.height])}else A.renderPass==="offscreen"?(function(H,K,le,pe){const _e=H.context,Ee=_e.gl,Me=zr.disabled,Le=new Ls([Ee.ONE,Ee.ONE],a.aM.transparent,[!0,!0,!0,!0]);(function(Ne,ke,Xe){const Ke=Ne.gl;Ne.activeTexture.set(Ke.TEXTURE1),Ne.viewport.set([0,0,ke.width/4,ke.height/4]);let st=Xe.heatmapFbos.get(a.aU);st?(Ke.bindTexture(Ke.TEXTURE_2D,st.colorAttachment.get()),Ne.bindFramebuffer.set(st.framebuffer)):(st=Rf(Ne,ke.width/4,ke.height/4),Xe.heatmapFbos.set(a.aU,st))})(_e,H,le),_e.clear({color:a.aM.transparent});for(let Ne=0;Ne<pe.length;Ne++){const ke=pe[Ne];if(K.hasRenderableParent(ke))continue;const Xe=K.getTile(ke),Ke=Xe.getBucket(le);if(!Ke)continue;const st=Ke.programConfigurations.get(le.id),xt=H.useProgram("heatmap",st),{zoom:Qt}=H.transform;xt.draw(_e,Ee.TRIANGLES,Rr.disabled,Me,Le,Ai.disabled,Ea(ke.posMatrix,Xe,Qt,le.paint.get("heatmap-intensity")),null,le.id,Ke.layoutVertexBuffer,Ke.indexBuffer,Ke.segments,le.paint,H.transform.zoom,st)}_e.viewport.set([0,0,H.width,H.height])})(A,$,z,U):A.renderPass==="translucent"&&(function(H,K){const le=H.context,pe=le.gl;le.setColorMode(H.colorModeForRenderPass());const _e=K.heatmapFbos.get(a.aU);_e&&(le.activeTexture.set(pe.TEXTURE0),pe.bindTexture(pe.TEXTURE_2D,_e.colorAttachment.get()),le.activeTexture.set(pe.TEXTURE1),Wd(le,K).bind(pe.LINEAR,pe.CLAMP_TO_EDGE),H.useProgram("heatmapTexture").draw(le,pe.TRIANGLES,Rr.disabled,zr.disabled,H.colorModeForRenderPass(),Ai.disabled,F0(H,K,0,1),null,K.id,H.viewportBuffer,H.quadTriangleIndexBuffer,H.viewportSegments,K.paint,H.transform.zoom))})(A,z)})(u,y,w,O);break;case"line":(function(A,$,z,U){if(A.renderPass!=="translucent")return;const G=z.paint.get("line-opacity"),H=z.paint.get("line-width");if(G.constantOr(1)===0||H.constantOr(1)===0)return;const K=A.depthModeForSublayer(0,Rr.ReadOnly),le=A.colorModeForRenderPass(),pe=z.paint.get("line-dasharray"),_e=z.paint.get("line-pattern"),Ee=_e.constantOr(1),Me=z.paint.get("line-gradient"),Le=z.getCrossfadeParameters(),Ne=Ee?"linePattern":pe?"lineSDF":Me?"lineGradient":"line",ke=A.context,Xe=ke.gl;let Ke=!0;for(const st of U){const xt=$.getTile(st);if(Ee&&!xt.patternsLoaded())continue;const Qt=xt.getBucket(z);if(!Qt)continue;const Gt=Qt.programConfigurations.get(z.id),tn=A.context.program.get(),Zt=A.useProgram(Ne,Gt),Xt=Ke||Zt.program!==tn,bn=A.style.map.terrain&&A.style.map.terrain.getTerrainData(st),nr=_e.constantOr(null);if(nr&&xt.imageAtlas){const Wn=xt.imageAtlas,os=Wn.patternPositions[nr.to.toString()],Yn=Wn.patternPositions[nr.from.toString()];os&&Yn&&Gt.setConstantPatternPositions(os,Yn)}const Ht=bn?st:null,Vt=Ee?Eh(A,xt,z,Le,Ht):pe?SO(A,xt,z,pe,Le,Ht):Me?C_(A,xt,z,Qt.lineClipsArray.length,Ht):$0(A,xt,z,Ht);if(Ee)ke.activeTexture.set(Xe.TEXTURE0),xt.imageAtlasTexture.bind(Xe.LINEAR,Xe.CLAMP_TO_EDGE),Gt.updatePaintBuffers(Le);else if(pe&&(Xt||A.lineAtlas.dirty))ke.activeTexture.set(Xe.TEXTURE0),A.lineAtlas.bind(ke);else if(Me){const Wn=Qt.gradients[z.id];let os=Wn.texture;if(z.gradientVersion!==Wn.version){let Yn=256;if(z.stepInterpolant){const Lr=$.getSource().maxzoom,Vi=st.canonical.z===Lr?Math.ceil(1<<A.transform.maxZoom-st.canonical.z):1;Yn=a.ac(a.aV(Qt.maxLineLength/a.X*1024*Vi),256,ke.maxTextureSize)}Wn.gradient=a.aW({expression:z.gradientExpression(),evaluationKey:"lineProgress",resolution:Yn,image:Wn.gradient||void 0,clips:Qt.lineClipsArray}),Wn.texture?Wn.texture.update(Wn.gradient):Wn.texture=new ae(ke,Wn.gradient,Xe.RGBA),Wn.version=z.gradientVersion,os=Wn.texture}ke.activeTexture.set(Xe.TEXTURE0),os.bind(z.stepInterpolant?Xe.NEAREST:Xe.LINEAR,Xe.CLAMP_TO_EDGE)}Zt.draw(ke,Xe.TRIANGLES,K,A.stencilModeForClipping(st),le,Ai.disabled,Vt,bn,z.id,Qt.layoutVertexBuffer,Qt.indexBuffer,Qt.segments,z.paint,A.transform.zoom,Gt,Qt.layoutVertexBuffer2),Ke=!1}})(u,y,w,O);break;case"fill":(function(A,$,z,U){const G=z.paint.get("fill-color"),H=z.paint.get("fill-opacity");if(H.constantOr(1)===0)return;const K=A.colorModeForRenderPass(),le=z.paint.get("fill-pattern"),pe=A.opaquePassEnabledForLayer()&&!le.constantOr(1)&&G.constantOr(a.aM.transparent).a===1&&H.constantOr(0)===1?"opaque":"translucent";if(A.renderPass===pe){const _e=A.depthModeForSublayer(1,A.renderPass==="opaque"?Rr.ReadWrite:Rr.ReadOnly);Rh(A,$,z,U,_e,K,!1)}if(A.renderPass==="translucent"&&z.paint.get("fill-antialias")){const _e=A.depthModeForSublayer(z.getPaintProperty("fill-outline-color")?2:0,Rr.ReadOnly);Rh(A,$,z,U,_e,K,!0)}})(u,y,w,O);break;case"fill-extrusion":(function(A,$,z,U){const G=z.paint.get("fill-extrusion-opacity");if(G!==0&&A.renderPass==="translucent"){const H=new Rr(A.context.gl.LEQUAL,Rr.ReadWrite,A.depthRangeFor3D);if(G!==1||z.paint.get("fill-extrusion-pattern").constantOr(1))V0(A,$,z,U,H,zr.disabled,Ls.disabled),V0(A,$,z,U,H,A.stencilModeFor3D(),A.colorModeForRenderPass());else{const K=A.colorModeForRenderPass();V0(A,$,z,U,H,zr.disabled,K)}}})(u,y,w,O);break;case"hillshade":(function(A,$,z,U){if(A.renderPass!=="offscreen"&&A.renderPass!=="translucent")return;const G=A.context,H=A.depthModeForSublayer(0,Rr.ReadOnly),K=A.colorModeForRenderPass(),[le,pe]=A.renderPass==="translucent"?A.stencilConfigForOverlap(U):[{},U];for(const _e of pe){const Ee=$.getTile(_e);Ee.needsHillshadePrepare!==void 0&&Ee.needsHillshadePrepare&&A.renderPass==="offscreen"?Yd(A,Ee,z,H,zr.disabled,K):A.renderPass==="translucent"&&Gd(A,_e,Ee,z,H,le[_e.overscaledZ],K)}G.viewport.set([0,0,A.width,A.height])})(u,y,w,O);break;case"raster":(function(A,$,z,U){if(A.renderPass!=="translucent"||z.paint.get("raster-opacity")===0||!U.length)return;const G=A.context,H=G.gl,K=$.getSource(),le=A.useProgram("raster"),pe=A.colorModeForRenderPass(),[_e,Ee]=K instanceof gi?[{},U]:A.stencilConfigForOverlap(U),Me=Ee[Ee.length-1].overscaledZ,Le=!A.options.moving;for(const Ne of Ee){const ke=A.depthModeForSublayer(Ne.overscaledZ-Me,z.paint.get("raster-opacity")===1?Rr.ReadWrite:Rr.ReadOnly,H.LESS),Xe=$.getTile(Ne);Xe.registerFadeDuration(z.paint.get("raster-fade-duration"));const Ke=$.findLoadedParent(Ne,0),st=$.findLoadedSibling(Ne),xt=Ff(Xe,Ke||st||null,$,z,A.transform,A.style.map.terrain);let Qt,Gt;const tn=z.paint.get("raster-resampling")==="nearest"?H.NEAREST:H.LINEAR;G.activeTexture.set(H.TEXTURE0),Xe.texture.bind(tn,H.CLAMP_TO_EDGE,H.LINEAR_MIPMAP_NEAREST),G.activeTexture.set(H.TEXTURE1),Ke?(Ke.texture.bind(tn,H.CLAMP_TO_EDGE,H.LINEAR_MIPMAP_NEAREST),Qt=Math.pow(2,Ke.tileID.overscaledZ-Xe.tileID.overscaledZ),Gt=[Xe.tileID.canonical.x*Qt%1,Xe.tileID.canonical.y*Qt%1]):Xe.texture.bind(tn,H.CLAMP_TO_EDGE,H.LINEAR_MIPMAP_NEAREST),Xe.texture.useMipmap&&G.extTextureFilterAnisotropic&&A.transform.pitch>20&&H.texParameterf(H.TEXTURE_2D,G.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,G.extTextureFilterAnisotropicMax);const Zt=A.style.map.terrain&&A.style.map.terrain.getTerrainData(Ne),Xt=Zt?Ne:null,bn=Xt?Xt.posMatrix:A.transform.calculatePosMatrix(Ne.toUnwrapped(),Le),nr=kO(bn,Gt||[0,0],Qt||1,xt,z);K instanceof gi?le.draw(G,H.TRIANGLES,ke,zr.disabled,pe,Ai.disabled,nr,Zt,z.id,K.boundsBuffer,A.quadTriangleIndexBuffer,K.boundsSegments):le.draw(G,H.TRIANGLES,ke,_e[Ne.overscaledZ],pe,Ai.disabled,nr,Zt,z.id,A.rasterBoundsBuffer,A.quadTriangleIndexBuffer,A.rasterBoundsSegments)}})(u,y,w,O);break;case"background":(function(A,$,z,U){const G=z.paint.get("background-color"),H=z.paint.get("background-opacity");if(H===0)return;const K=A.context,le=K.gl,pe=A.transform,_e=pe.tileSize,Ee=z.paint.get("background-pattern");if(A.isPatternMissing(Ee))return;const Me=!Ee&&G.a===1&&H===1&&A.opaquePassEnabledForLayer()?"opaque":"translucent";if(A.renderPass!==Me)return;const Le=zr.disabled,Ne=A.depthModeForSublayer(0,Me==="opaque"?Rr.ReadWrite:Rr.ReadOnly),ke=A.colorModeForRenderPass(),Xe=A.useProgram(Ee?"backgroundPattern":"background"),Ke=U||pe.coveringTiles({tileSize:_e,terrain:A.style.map.terrain});Ee&&(K.activeTexture.set(le.TEXTURE0),A.imageManager.bind(A.context));const st=z.getCrossfadeParameters();for(const xt of Ke){const Qt=U?xt.posMatrix:A.transform.calculatePosMatrix(xt.toUnwrapped()),Gt=Ee?R1(Qt,H,A,Ee,{tileID:xt,tileSize:_e},st):B0(Qt,H,G),tn=A.style.map.terrain&&A.style.map.terrain.getTerrainData(xt);Xe.draw(K,le.TRIANGLES,Ne,Le,ke,Ai.disabled,Gt,tn,z.id,A.tileExtentBuffer,A.quadTriangleIndexBuffer,A.tileExtentSegments)}})(u,0,w,O);break;case"custom":(function(A,$,z){const U=A.context,G=z.implementation;if(A.renderPass==="offscreen"){const H=G.prerender;H&&(A.setCustomLayerDefaults(),U.setColorMode(A.colorModeForRenderPass()),H.call(G,U.gl,A.transform.customLayerMatrix()),U.setDirty(),A.setBaseState())}else if(A.renderPass==="translucent"){A.setCustomLayerDefaults(),U.setColorMode(A.colorModeForRenderPass()),U.setStencilMode(zr.disabled);const H=G.renderingMode==="3d"?new Rr(A.context.gl.LEQUAL,Rr.ReadWrite,A.depthRangeFor3D):A.depthModeForSublayer(0,Rr.ReadOnly);U.setDepthMode(H),G.render(U.gl,A.transform.customLayerMatrix(),{farZ:A.transform.farZ,nearZ:A.transform.nearZ,fov:A.transform._fov,modelViewProjectionMatrix:A.transform.modelViewProjectionMatrix,projectionMatrix:A.transform.projectionMatrix}),U.setDirty(),A.setBaseState(),U.bindFramebuffer.set(null)}})(u,0,w)}}translatePosMatrix(u,y,w,O,A){if(!w[0]&&!w[1])return u;const $=A?O==="map"?this.transform.angle:0:O==="viewport"?-this.transform.angle:0;if($){const G=Math.sin($),H=Math.cos($);w=[w[0]*H-w[1]*G,w[0]*G+w[1]*H]}const z=[A?w[0]:Cr(y,w[0],this.transform.zoom),A?w[1]:Cr(y,w[1],this.transform.zoom),0],U=new Float32Array(16);return a.J(U,u,z),U}saveTileTexture(u){const y=this._tileTextures[u.size[0]];y?y.push(u):this._tileTextures[u.size[0]]=[u]}getTileTexture(u){const y=this._tileTextures[u];return y&&y.length>0?y.pop():null}isPatternMissing(u){if(!u)return!1;if(!u.from||!u.to)return!0;const y=this.imageManager.getPattern(u.from.toString()),w=this.imageManager.getPattern(u.to.toString());return!y||!w}useProgram(u,y){this.cache=this.cache||{};const w=u+(y?y.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"")+(this.style.map.terrain?"/terrain":"");return this.cache[w]||(this.cache[w]=new Fm(this.context,Fc[u],y,F1[u],this._showOverdrawInspector,this.style.map.terrain)),this.cache[w]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const u=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(u.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new ae(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this.debugOverlayTexture&&this.debugOverlayTexture.destroy()}overLimit(){const{drawingBufferWidth:u,drawingBufferHeight:y}=this.context.gl;return this.width!==u||this.height!==y}}class sr{constructor(u,y){this.points=u,this.planes=y}static fromInvProjectionMatrix(u,y,w){const O=Math.pow(2,w),A=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map((z=>{const U=1/(z=a.af([],z,u))[3]/y*O;return a.b1(z,z,[U,U,1/z[3],U])})),$=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map((z=>{const U=(function(le,pe){var _e=pe[0],Ee=pe[1],Me=pe[2],Le=_e*_e+Ee*Ee+Me*Me;return Le>0&&(Le=1/Math.sqrt(Le)),le[0]=pe[0]*Le,le[1]=pe[1]*Le,le[2]=pe[2]*Le,le})([],(function(le,pe,_e){var Ee=pe[0],Me=pe[1],Le=pe[2],Ne=_e[0],ke=_e[1],Xe=_e[2];return le[0]=Me*Xe-Le*ke,le[1]=Le*Ne-Ee*Xe,le[2]=Ee*ke-Me*Ne,le})([],q([],A[z[0]],A[z[1]]),q([],A[z[2]],A[z[1]]))),G=-((H=U)[0]*(K=A[z[1]])[0]+H[1]*K[1]+H[2]*K[2]);var H,K;return U.concat(G)}));return new sr(A,$)}}class ti{constructor(u,y){this.min=u,this.max=y,this.center=(function(w,O,A){return w[0]=.5*O[0],w[1]=.5*O[1],w[2]=.5*O[2],w})([],(function(w,O,A){return w[0]=O[0]+A[0],w[1]=O[1]+A[1],w[2]=O[2]+A[2],w})([],this.min,this.max))}quadrant(u){const y=[u%2==0,u<2],w=Q(this.min),O=Q(this.max);for(let A=0;A<y.length;A++)w[A]=y[A]?this.min[A]:this.center[A],O[A]=y[A]?this.center[A]:this.max[A];return O[2]=this.max[2],new ti(w,O)}distanceX(u){return Math.max(Math.min(this.max[0],u[0]),this.min[0])-u[0]}distanceY(u){return Math.max(Math.min(this.max[1],u[1]),this.min[1])-u[1]}intersects(u){const y=[[this.min[0],this.min[1],this.min[2],1],[this.max[0],this.min[1],this.min[2],1],[this.max[0],this.max[1],this.min[2],1],[this.min[0],this.max[1],this.min[2],1],[this.min[0],this.min[1],this.max[2],1],[this.max[0],this.min[1],this.max[2],1],[this.max[0],this.max[1],this.max[2],1],[this.min[0],this.max[1],this.max[2],1]];let w=!0;for(let O=0;O<u.planes.length;O++){const A=u.planes[O];let $=0;for(let z=0;z<y.length;z++)a.b2(A,y[z])>=0&&$++;if($===0)return 0;$!==y.length&&(w=!1)}if(w)return 2;for(let O=0;O<3;O++){let A=Number.MAX_VALUE,$=-Number.MAX_VALUE;for(let z=0;z<u.points.length;z++){const U=u.points[z][O]-this.min[O];A=Math.min(A,U),$=Math.max($,U)}if($<0||A>this.max[O]-this.min[O])return 0}return 1}}class $s{constructor(u=0,y=0,w=0,O=0){if(isNaN(u)||u<0||isNaN(y)||y<0||isNaN(w)||w<0||isNaN(O)||O<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=u,this.bottom=y,this.left=w,this.right=O}interpolate(u,y,w){return y.top!=null&&u.top!=null&&(this.top=a.y.number(u.top,y.top,w)),y.bottom!=null&&u.bottom!=null&&(this.bottom=a.y.number(u.bottom,y.bottom,w)),y.left!=null&&u.left!=null&&(this.left=a.y.number(u.left,y.left,w)),y.right!=null&&u.right!=null&&(this.right=a.y.number(u.right,y.right,w)),this}getCenter(u,y){const w=a.ac((this.left+u-this.right)/2,0,u),O=a.ac((this.top+y-this.bottom)/2,0,y);return new a.P(w,O)}equals(u){return this.top===u.top&&this.bottom===u.bottom&&this.left===u.left&&this.right===u.right}clone(){return new $s(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}const Ui=85.051129;class Fh{constructor(u,y,w,O,A){this.tileSize=512,this._renderWorldCopies=A===void 0||!!A,this._minZoom=u||0,this._maxZoom=y||22,this._minPitch=w??0,this._maxPitch=O??60,this.setMaxBounds(),this.width=0,this.height=0,this._center=new a.N(0,0),this._elevation=0,this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new $s,this._posMatrixCache={},this._alignedPosMatrixCache={},this._fogMatrixCache={},this.minElevationForCurrentTile=0}clone(){const u=new Fh(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return u.apply(this),u}apply(u){this.tileSize=u.tileSize,this.latRange=u.latRange,this.lngRange=u.lngRange,this.width=u.width,this.height=u.height,this._center=u._center,this._elevation=u._elevation,this.minElevationForCurrentTile=u.minElevationForCurrentTile,this.zoom=u.zoom,this.angle=u.angle,this._fov=u._fov,this._pitch=u._pitch,this._unmodified=u._unmodified,this._edgeInsets=u._edgeInsets.clone(),this._calcMatrices()}get minZoom(){return this._minZoom}set minZoom(u){this._minZoom!==u&&(this._minZoom=u,this.zoom=Math.max(this.zoom,u))}get maxZoom(){return this._maxZoom}set maxZoom(u){this._maxZoom!==u&&(this._maxZoom=u,this.zoom=Math.min(this.zoom,u))}get minPitch(){return this._minPitch}set minPitch(u){this._minPitch!==u&&(this._minPitch=u,this.pitch=Math.max(this.pitch,u))}get maxPitch(){return this._maxPitch}set maxPitch(u){this._maxPitch!==u&&(this._maxPitch=u,this.pitch=Math.min(this.pitch,u))}get renderWorldCopies(){return this._renderWorldCopies}set renderWorldCopies(u){u===void 0?u=!0:u===null&&(u=!1),this._renderWorldCopies=u}get worldSize(){return this.tileSize*this.scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new a.P(this.width,this.height)}get bearing(){return-this.angle/Math.PI*180}set bearing(u){const y=-a.b3(u,-180,180)*Math.PI/180;this.angle!==y&&(this._unmodified=!1,this.angle=y,this._calcMatrices(),this.rotationMatrix=(function(){var w=new a.A(4);return a.A!=Float32Array&&(w[1]=0,w[2]=0),w[0]=1,w[3]=1,w})(),(function(w,O,A){var $=O[0],z=O[1],U=O[2],G=O[3],H=Math.sin(A),K=Math.cos(A);w[0]=$*K+U*H,w[1]=z*K+G*H,w[2]=$*-H+U*K,w[3]=z*-H+G*K})(this.rotationMatrix,this.rotationMatrix,this.angle))}get pitch(){return this._pitch/Math.PI*180}set pitch(u){const y=a.ac(u,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==y&&(this._unmodified=!1,this._pitch=y,this._calcMatrices())}get fov(){return this._fov/Math.PI*180}set fov(u){u=Math.max(.01,Math.min(60,u)),this._fov!==u&&(this._unmodified=!1,this._fov=u/180*Math.PI,this._calcMatrices())}get zoom(){return this._zoom}set zoom(u){const y=Math.min(Math.max(u,this.minZoom),this.maxZoom);this._zoom!==y&&(this._unmodified=!1,this._zoom=y,this.tileZoom=Math.max(0,Math.floor(y)),this.scale=this.zoomScale(y),this._constrain(),this._calcMatrices())}get center(){return this._center}set center(u){u.lat===this._center.lat&&u.lng===this._center.lng||(this._unmodified=!1,this._center=u,this._constrain(),this._calcMatrices())}get elevation(){return this._elevation}set elevation(u){u!==this._elevation&&(this._elevation=u,this._constrain(),this._calcMatrices())}get padding(){return this._edgeInsets.toJSON()}set padding(u){this._edgeInsets.equals(u)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,u,1),this._calcMatrices())}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}isPaddingEqual(u){return this._edgeInsets.equals(u)}interpolatePadding(u,y,w){this._unmodified=!1,this._edgeInsets.interpolate(u,y,w),this._constrain(),this._calcMatrices()}coveringZoomLevel(u){const y=(u.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/u.tileSize));return Math.max(0,y)}getVisibleUnwrappedCoordinates(u){const y=[new a.b4(0,u)];if(this._renderWorldCopies){const w=this.pointCoordinate(new a.P(0,0)),O=this.pointCoordinate(new a.P(this.width,0)),A=this.pointCoordinate(new a.P(this.width,this.height)),$=this.pointCoordinate(new a.P(0,this.height)),z=Math.floor(Math.min(w.x,O.x,A.x,$.x)),U=Math.floor(Math.max(w.x,O.x,A.x,$.x)),G=1;for(let H=z-G;H<=U+G;H++)H!==0&&y.push(new a.b4(H,u))}return y}coveringTiles(u){var y,w;let O=this.coveringZoomLevel(u);const A=O;if(u.minzoom!==void 0&&O<u.minzoom)return[];u.maxzoom!==void 0&&O>u.maxzoom&&(O=u.maxzoom);const $=this.pointCoordinate(this.getCameraPoint()),z=a.Z.fromLngLat(this.center),U=Math.pow(2,O),G=[U*$.x,U*$.y,0],H=[U*z.x,U*z.y,0],K=sr.fromInvProjectionMatrix(this.invModelViewProjectionMatrix,this.worldSize,O);let le=u.minzoom||0;!u.terrain&&this.pitch<=60&&this._edgeInsets.top<.1&&(le=O);const pe=u.terrain?2/Math.min(this.tileSize,u.tileSize)*this.tileSize:3,_e=ke=>({aabb:new ti([ke*U,0,0],[(ke+1)*U,U,0]),zoom:0,x:0,y:0,wrap:ke,fullyVisible:!1}),Ee=[],Me=[],Le=O,Ne=u.reparseOverscaled?A:O;if(this._renderWorldCopies)for(let ke=1;ke<=3;ke++)Ee.push(_e(-ke)),Ee.push(_e(ke));for(Ee.push(_e(0));Ee.length>0;){const ke=Ee.pop(),Xe=ke.x,Ke=ke.y;let st=ke.fullyVisible;if(!st){const Zt=ke.aabb.intersects(K);if(Zt===0)continue;st=Zt===2}const xt=u.terrain?G:H,Qt=ke.aabb.distanceX(xt),Gt=ke.aabb.distanceY(xt),tn=Math.max(Math.abs(Qt),Math.abs(Gt));if(ke.zoom===Le||tn>pe+(1<<Le-ke.zoom)-2&&ke.zoom>=le){const Zt=Le-ke.zoom,Xt=G[0]-.5-(Xe<<Zt),bn=G[1]-.5-(Ke<<Zt);Me.push({tileID:new a.S(ke.zoom===Le?Ne:ke.zoom,ke.wrap,ke.zoom,Xe,Ke),distanceSq:J([H[0]-.5-Xe,H[1]-.5-Ke]),tileDistanceToCamera:Math.sqrt(Xt*Xt+bn*bn)})}else for(let Zt=0;Zt<4;Zt++){const Xt=(Xe<<1)+Zt%2,bn=(Ke<<1)+(Zt>>1),nr=ke.zoom+1;let Ht=ke.aabb.quadrant(Zt);if(u.terrain){const Vt=new a.S(nr,ke.wrap,nr,Xt,bn),Wn=u.terrain.getMinMaxElevation(Vt),os=(y=Wn.minElevation)!==null&&y!==void 0?y:this.elevation,Yn=(w=Wn.maxElevation)!==null&&w!==void 0?w:this.elevation;Ht=new ti([Ht.min[0],Ht.min[1],os],[Ht.max[0],Ht.max[1],Yn])}Ee.push({aabb:Ht,zoom:nr,x:Xt,y:bn,wrap:ke.wrap,fullyVisible:st})}}return Me.sort(((ke,Xe)=>ke.distanceSq-Xe.distanceSq)).map((ke=>ke.tileID))}resize(u,y){this.width=u,this.height=y,this.pixelsToGLUnits=[2/u,-2/y],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(u){return Math.pow(2,u)}scaleZoom(u){return Math.log(u)/Math.LN2}project(u){const y=a.ac(u.lat,-85.051129,Ui);return new a.P(a.O(u.lng)*this.worldSize,a.Q(y)*this.worldSize)}unproject(u){return new a.Z(u.x/this.worldSize,u.y/this.worldSize).toLngLat()}get point(){return this.project(this.center)}getCameraPosition(){return{lngLat:this.pointLocation(this.getCameraPoint()),altitude:Math.cos(this._pitch)*this.cameraToCenterDistance/this._pixelPerMeter+this.elevation}}recalculateZoom(u){const y=this.elevation,w=Math.cos(this._pitch)*this.cameraToCenterDistance/this._pixelPerMeter,O=this.pointLocation(this.centerPoint,u),A=u.getElevationForLngLatZoom(O,this.tileZoom);if(!(this.elevation-A))return;const $=w+y-A,z=Math.cos(this._pitch)*this.cameraToCenterDistance/$/a.b5(1,O.lat),U=this.scaleZoom(z/this.tileSize);this._elevation=A,this._center=O,this.zoom=U}setLocationAtPoint(u,y){const w=this.pointCoordinate(y),O=this.pointCoordinate(this.centerPoint),A=this.locationCoordinate(u),$=new a.Z(A.x-(w.x-O.x),A.y-(w.y-O.y));this.center=this.coordinateLocation($),this._renderWorldCopies&&(this.center=this.center.wrap())}locationPoint(u,y){return y?this.coordinatePoint(this.locationCoordinate(u),y.getElevationForLngLatZoom(u,this.tileZoom),this.pixelMatrix3D):this.coordinatePoint(this.locationCoordinate(u))}pointLocation(u,y){return this.coordinateLocation(this.pointCoordinate(u,y))}locationCoordinate(u){return a.Z.fromLngLat(u)}coordinateLocation(u){return u&&u.toLngLat()}pointCoordinate(u,y){if(y){const le=y.pointCoordinate(u);if(le!=null)return le}const w=[u.x,u.y,0,1],O=[u.x,u.y,1,1];a.af(w,w,this.pixelMatrixInverse),a.af(O,O,this.pixelMatrixInverse);const A=w[3],$=O[3],z=w[1]/A,U=O[1]/$,G=w[2]/A,H=O[2]/$,K=G===H?0:(0-G)/(H-G);return new a.Z(a.y.number(w[0]/A,O[0]/$,K)/this.worldSize,a.y.number(z,U,K)/this.worldSize)}coordinatePoint(u,y=0,w=this.pixelMatrix){const O=[u.x*this.worldSize,u.y*this.worldSize,y,1];return a.af(O,O,w),new a.P(O[0]/O[3],O[1]/O[3])}getBounds(){const u=Math.max(0,this.height/2-this.getHorizon());return new Ze().extend(this.pointLocation(new a.P(0,u))).extend(this.pointLocation(new a.P(this.width,u))).extend(this.pointLocation(new a.P(this.width,this.height))).extend(this.pointLocation(new a.P(0,this.height)))}getMaxBounds(){return this.latRange&&this.latRange.length===2&&this.lngRange&&this.lngRange.length===2?new Ze([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null}getHorizon(){return Math.tan(Math.PI/2-this._pitch)*this.cameraToCenterDistance*.85}setMaxBounds(u){u?(this.lngRange=[u.getWest(),u.getEast()],this.latRange=[u.getSouth(),u.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-85.051129,Ui])}calculateTileMatrix(u){const y=u.canonical,w=this.worldSize/this.zoomScale(y.z),O=y.x+Math.pow(2,y.z)*u.wrap,A=a.an(new Float64Array(16));return a.J(A,A,[O*w,y.y*w,0]),a.K(A,A,[w/a.X,w/a.X,1]),A}calculatePosMatrix(u,y=!1){const w=u.key,O=y?this._alignedPosMatrixCache:this._posMatrixCache;if(O[w])return O[w];const A=this.calculateTileMatrix(u);return a.L(A,y?this.alignedModelViewProjectionMatrix:this.modelViewProjectionMatrix,A),O[w]=new Float32Array(A),O[w]}calculateFogMatrix(u){const y=u.key,w=this._fogMatrixCache;if(w[y])return w[y];const O=this.calculateTileMatrix(u);return a.L(O,this.fogMatrix,O),w[y]=new Float32Array(O),w[y]}customLayerMatrix(){return this.mercatorMatrix.slice()}getConstrained(u,y){y=a.ac(+y,this.minZoom,this.maxZoom);const w={center:new a.N(u.lng,u.lat),zoom:y};let O=this.lngRange;if(!this._renderWorldCopies&&O===null){const ke=179.9999999999;O=[-ke,ke]}const A=this.tileSize*this.zoomScale(w.zoom);let $=0,z=A,U=0,G=A,H=0,K=0;const{x:le,y:pe}=this.size;if(this.latRange){const ke=this.latRange;$=a.Q(ke[1])*A,z=a.Q(ke[0])*A,z-$<pe&&(H=pe/(z-$))}O&&(U=a.b3(a.O(O[0])*A,0,A),G=a.b3(a.O(O[1])*A,0,A),G<U&&(G+=A),G-U<le&&(K=le/(G-U)));const{x:_e,y:Ee}=this.project.call({worldSize:A},u);let Me,Le;const Ne=Math.max(K||0,H||0);if(Ne){const ke=new a.P(K?(G+U)/2:_e,H?(z+$)/2:Ee);return w.center=this.unproject.call({worldSize:A},ke).wrap(),w.zoom+=this.scaleZoom(Ne),w}if(this.latRange){const ke=pe/2;Ee-ke<$&&(Le=$+ke),Ee+ke>z&&(Le=z-ke)}if(O){const ke=(U+G)/2;let Xe=_e;this._renderWorldCopies&&(Xe=a.b3(_e,ke-A/2,ke+A/2));const Ke=le/2;Xe-Ke<U&&(Me=U+Ke),Xe+Ke>G&&(Me=G-Ke)}if(Me!==void 0||Le!==void 0){const ke=new a.P(Me??_e,Le??Ee);w.center=this.unproject.call({worldSize:A},ke).wrap()}return w}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;const u=this._unmodified,{center:y,zoom:w}=this.getConstrained(this.center,this.zoom);this.center=y,this.zoom=w,this._unmodified=u,this._constraining=!1}_calcMatrices(){if(!this.height)return;const u=this.centerOffset,y=this.point.x,w=this.point.y;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height,this._pixelPerMeter=a.b5(1,this.center.lat)*this.worldSize;let O=a.an(new Float64Array(16));a.K(O,O,[this.width/2,-this.height/2,1]),a.J(O,O,[1,-1,0]),this.labelPlaneMatrix=O,O=a.an(new Float64Array(16)),a.K(O,O,[1,-1,1]),a.J(O,O,[-1,-1,0]),a.K(O,O,[2/this.width,2/this.height,1]),this.glCoordMatrix=O;const A=this.cameraToCenterDistance+this._elevation*this._pixelPerMeter/Math.cos(this._pitch),$=Math.min(this.elevation,this.minElevationForCurrentTile),z=A-$*this._pixelPerMeter/Math.cos(this._pitch),U=$<0?z:A,G=Math.PI/2+this._pitch,H=this._fov*(.5+u.y/this.height),K=Math.sin(H)*U/Math.sin(a.ac(Math.PI-G-H,.01,Math.PI-.01)),le=this.getHorizon(),pe=2*Math.atan(le/this.cameraToCenterDistance)*(.5+u.y/(2*le)),_e=Math.sin(pe)*U/Math.sin(a.ac(Math.PI-G-pe,.01,Math.PI-.01)),Ee=Math.min(K,_e);this.farZ=1.01*(Math.cos(Math.PI/2-this._pitch)*Ee+U),this.nearZ=this.height/50,O=new Float64Array(16),a.b6(O,this._fov,this.width/this.height,this.nearZ,this.farZ),O[8]=2*-u.x/this.width,O[9]=2*u.y/this.height,this.projectionMatrix=a.ae(O),a.K(O,O,[1,-1,1]),a.J(O,O,[0,0,-this.cameraToCenterDistance]),a.b7(O,O,this._pitch),a.ad(O,O,this.angle),a.J(O,O,[-y,-w,0]),this.mercatorMatrix=a.K([],O,[this.worldSize,this.worldSize,this.worldSize]),a.K(O,O,[1,1,this._pixelPerMeter]),this.pixelMatrix=a.L(new Float64Array(16),this.labelPlaneMatrix,O),a.J(O,O,[0,0,-this.elevation]),this.modelViewProjectionMatrix=O,this.invModelViewProjectionMatrix=a.as([],O),this.fogMatrix=new Float64Array(16),a.b6(this.fogMatrix,this._fov,this.width/this.height,A,this.farZ),this.fogMatrix[8]=2*-u.x/this.width,this.fogMatrix[9]=2*u.y/this.height,a.K(this.fogMatrix,this.fogMatrix,[1,-1,1]),a.J(this.fogMatrix,this.fogMatrix,[0,0,-this.cameraToCenterDistance]),a.b7(this.fogMatrix,this.fogMatrix,this._pitch),a.ad(this.fogMatrix,this.fogMatrix,this.angle),a.J(this.fogMatrix,this.fogMatrix,[-y,-w,0]),a.K(this.fogMatrix,this.fogMatrix,[1,1,this._pixelPerMeter]),a.J(this.fogMatrix,this.fogMatrix,[0,0,-this.elevation]),this.pixelMatrix3D=a.L(new Float64Array(16),this.labelPlaneMatrix,O);const Me=this.width%2/2,Le=this.height%2/2,Ne=Math.cos(this.angle),ke=Math.sin(this.angle),Xe=y-Math.round(y)+Ne*Me+ke*Le,Ke=w-Math.round(w)+Ne*Le+ke*Me,st=new Float64Array(O);if(a.J(st,st,[Xe>.5?Xe-1:Xe,Ke>.5?Ke-1:Ke,0]),this.alignedModelViewProjectionMatrix=st,O=a.as(new Float64Array(16),this.pixelMatrix),!O)throw new Error("failed to invert matrix");this.pixelMatrixInverse=O,this._posMatrixCache={},this._alignedPosMatrixCache={},this._fogMatrixCache={}}maxPitchScaleFactor(){if(!this.pixelMatrixInverse)return 1;const u=this.pointCoordinate(new a.P(0,0)),y=[u.x*this.worldSize,u.y*this.worldSize,0,1];return a.af(y,y,this.pixelMatrix)[3]/this.cameraToCenterDistance}getCameraPoint(){const u=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new a.P(0,u))}getCameraQueryGeometry(u){const y=this.getCameraPoint();if(u.length===1)return[u[0],y];{let w=y.x,O=y.y,A=y.x,$=y.y;for(const z of u)w=Math.min(w,z.x),O=Math.min(O,z.y),A=Math.max(A,z.x),$=Math.max($,z.y);return[new a.P(w,O),new a.P(A,O),new a.P(A,$),new a.P(w,$),new a.P(w,O)]}}lngLatToCameraDepth(u,y){const w=this.locationCoordinate(u),O=[w.x*this.worldSize,w.y*this.worldSize,y,1];return a.af(O,O,this.modelViewProjectionMatrix),O[2]/O[3]}}function jm(E,u){let y,w=!1,O=null,A=null;const $=()=>{O=null,w&&(E.apply(A,y),O=setTimeout($,u),w=!1)};return(...z)=>(w=!0,A=this,y=z,O||$(),O)}class Ta{constructor(u){this._getCurrentHash=()=>{const y=window.location.hash.replace("#","");if(this._hashName){let w;return y.split("&").map((O=>O.split("="))).forEach((O=>{O[0]===this._hashName&&(w=O)})),(w&&w[1]||"").split("/")}return y.split("/")},this._onHashChange=()=>{const y=this._getCurrentHash();if(y.length>=3&&!y.some((w=>isNaN(w)))){const w=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(y[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+y[2],+y[1]],zoom:+y[0],bearing:w,pitch:+(y[4]||0)}),!0}return!1},this._updateHashUnthrottled=()=>{const y=window.location.href.replace(/(#.*)?$/,this.getHashString());window.history.replaceState(window.history.state,null,y)},this._removeHash=()=>{const y=this._getCurrentHash();if(y.length===0)return;const w=y.join("/");let O=w;O.split("&").length>0&&(O=O.split("&")[0]),this._hashName&&(O=`${this._hashName}=${w}`);let A=window.location.hash.replace(O,"");A.startsWith("#&")?A=A.slice(0,1)+A.slice(2):A==="#"&&(A="");let $=window.location.href.replace(/(#.+)?$/,A);$=$.replace("&&","&"),window.history.replaceState(window.history.state,null,$)},this._updateHash=jm(this._updateHashUnthrottled,300),this._hashName=u&&encodeURIComponent(u)}addTo(u){return this._map=u,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),this._removeHash(),delete this._map,this}getHashString(u){const y=this._map.getCenter(),w=Math.round(100*this._map.getZoom())/100,O=Math.ceil((w*Math.LN2+Math.log(512/360/.5))/Math.LN10),A=Math.pow(10,O),$=Math.round(y.lng*A)/A,z=Math.round(y.lat*A)/A,U=this._map.getBearing(),G=this._map.getPitch();let H="";if(H+=u?`/${$}/${z}/${w}`:`${w}/${z}/${$}`,(U||G)&&(H+="/"+Math.round(10*U)/10),G&&(H+=`/${Math.round(G)}`),this._hashName){const K=this._hashName;let le=!1;const pe=window.location.hash.slice(1).split("&").map((_e=>{const Ee=_e.split("=")[0];return Ee===K?(le=!0,`${Ee}=${H}`):_e})).filter((_e=>_e));return le||pe.push(`${K}=${H}`),`#${pe.join("&")}`}return`#${H}`}}const Lf={linearity:.3,easing:a.b8(0,0,.3,1)},W1=a.e({deceleration:2500,maxSpeed:1400},Lf),Kd=a.e({deceleration:20,maxSpeed:1400},Lf),Um=a.e({deceleration:1e3,maxSpeed:360},Lf),$f=a.e({deceleration:1e3,maxSpeed:90},Lf);class Ei{constructor(u){this._map=u,this.clear()}clear(){this._inertiaBuffer=[]}record(u){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:p.now(),settings:u})}_drainInertiaBuffer(){const u=this._inertiaBuffer,y=p.now();for(;u.length>0&&y-u[0].time>160;)u.shift()}_onMoveEnd(u){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const y={zoom:0,bearing:0,pitch:0,pan:new a.P(0,0),pinchAround:void 0,around:void 0};for(const{settings:A}of this._inertiaBuffer)y.zoom+=A.zoomDelta||0,y.bearing+=A.bearingDelta||0,y.pitch+=A.pitchDelta||0,A.panDelta&&y.pan._add(A.panDelta),A.around&&(y.around=A.around),A.pinchAround&&(y.pinchAround=A.pinchAround);const w=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,O={};if(y.pan.mag()){const A=Jd(y.pan.mag(),w,a.e({},W1,u||{}));O.offset=y.pan.mult(A.amount/y.pan.mag()),O.center=this._map.transform.center,Vm(O,A)}if(y.zoom){const A=Jd(y.zoom,w,Kd);O.zoom=this._map.transform.zoom+A.amount,Vm(O,A)}if(y.bearing){const A=Jd(y.bearing,w,Um);O.bearing=this._map.transform.bearing+a.ac(A.amount,-179,179),Vm(O,A)}if(y.pitch){const A=Jd(y.pitch,w,$f);O.pitch=this._map.transform.pitch+A.amount,Vm(O,A)}if(O.zoom||O.bearing){const A=y.pinchAround===void 0?y.around:y.pinchAround;O.around=A?this._map.unproject(A):this._map.getCenter()}return this.clear(),a.e(O,{noMoveStart:!0})}}function Vm(E,u){(!E.duration||E.duration<u.duration)&&(E.duration=u.duration,E.easing=u.easing)}function Jd(E,u,y){const{maxSpeed:w,linearity:O,deceleration:A}=y,$=a.ac(E*O/(u/1e3),-w,w),z=Math.abs($)/(A*O);return{easing:y.easing,duration:1e3*z,amount:$*(z/2)}}class Ao extends a.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(u,y,w,O={}){const A=g.mousePos(y.getCanvas(),w),$=y.unproject(A);super(u,a.e({point:A,lngLat:$,originalEvent:w},O)),this._defaultPrevented=!1,this.target=y}}class Bf extends a.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(u,y,w){const O=u==="touchend"?w.changedTouches:w.touches,A=g.touchPos(y.getCanvasContainer(),O),$=A.map((U=>y.unproject(U))),z=A.reduce(((U,G,H,K)=>U.add(G.div(K.length))),new a.P(0,0));super(u,{points:A,point:z,lngLats:$,lngLat:y.unproject(z),originalEvent:w}),this._defaultPrevented=!1}}class N_ extends a.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(u,y,w){super(u,{originalEvent:w}),this._defaultPrevented=!1}}class z_{constructor(u,y){this._map=u,this._clickTolerance=y.clickTolerance}reset(){delete this._mousedownPos}wheel(u){return this._firePreventable(new N_(u.type,this._map,u))}mousedown(u,y){return this._mousedownPos=y,this._firePreventable(new Ao(u.type,this._map,u))}mouseup(u){this._map.fire(new Ao(u.type,this._map,u))}click(u,y){this._mousedownPos&&this._mousedownPos.dist(y)>=this._clickTolerance||this._map.fire(new Ao(u.type,this._map,u))}dblclick(u){return this._firePreventable(new Ao(u.type,this._map,u))}mouseover(u){this._map.fire(new Ao(u.type,this._map,u))}mouseout(u){this._map.fire(new Ao(u.type,this._map,u))}touchstart(u){return this._firePreventable(new Bf(u.type,this._map,u))}touchmove(u){this._map.fire(new Bf(u.type,this._map,u))}touchend(u){this._map.fire(new Bf(u.type,this._map,u))}touchcancel(u){this._map.fire(new Bf(u.type,this._map,u))}_firePreventable(u){if(this._map.fire(u),u.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Cs{constructor(u){this._map=u}reset(){this._delayContextMenu=!1,this._ignoreContextMenu=!0,delete this._contextMenuEvent}mousemove(u){this._map.fire(new Ao(u.type,this._map,u))}mousedown(){this._delayContextMenu=!0,this._ignoreContextMenu=!1}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new Ao("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(u){this._delayContextMenu?this._contextMenuEvent=u:this._ignoreContextMenu||this._map.fire(new Ao(u.type,this._map,u)),this._map.listens("contextmenu")&&u.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Qo{constructor(u){this._map=u}get transform(){return this._map._requestedCameraState||this._map.transform}get center(){return{lng:this.transform.center.lng,lat:this.transform.center.lat}}get zoom(){return this.transform.zoom}get pitch(){return this.transform.pitch}get bearing(){return this.transform.bearing}unproject(u){return this.transform.pointLocation(a.P.convert(u),this._map.terrain)}}class fa{constructor(u,y){this._map=u,this._tr=new Qo(u),this._el=u.getCanvasContainer(),this._container=u.getContainer(),this._clickTolerance=y.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(u,y){this.isEnabled()&&u.shiftKey&&u.button===0&&(g.disableDrag(),this._startPos=this._lastPos=y,this._active=!0)}mousemoveWindow(u,y){if(!this._active)return;const w=y;if(this._lastPos.equals(w)||!this._box&&w.dist(this._startPos)<this._clickTolerance)return;const O=this._startPos;this._lastPos=w,this._box||(this._box=g.create("div","maplibregl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair"),this._fireEvent("boxzoomstart",u));const A=Math.min(O.x,w.x),$=Math.max(O.x,w.x),z=Math.min(O.y,w.y),U=Math.max(O.y,w.y);g.setTransform(this._box,`translate(${A}px,${z}px)`),this._box.style.width=$-A+"px",this._box.style.height=U-z+"px"}mouseupWindow(u,y){if(!this._active||u.button!==0)return;const w=this._startPos,O=y;if(this.reset(),g.suppressClick(),w.x!==O.x||w.y!==O.y)return this._map.fire(new a.k("boxzoomend",{originalEvent:u})),{cameraAnimation:A=>A.fitScreenCoordinates(w,O,this._tr.bearing,{linear:!0})};this._fireEvent("boxzoomcancel",u)}keydown(u){this._active&&u.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",u))}reset(){this._active=!1,this._container.classList.remove("maplibregl-crosshair"),this._box&&(g.remove(this._box),this._box=null),g.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(u,y){return this._map.fire(new a.k(u,{originalEvent:y}))}}function ep(E,u){if(E.length!==u.length)throw new Error(`The number of touches and points are not equal - touches ${E.length}, points ${u.length}`);const y={};for(let w=0;w<E.length;w++)y[E[w].identifier]=u[w];return y}class tp{constructor(u){this.reset(),this.numTouches=u.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(u,y,w){(this.centroid||w.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=u.timeStamp),w.length===this.numTouches&&(this.centroid=(function(O){const A=new a.P(0,0);for(const $ of O)A._add($);return A.div(O.length)})(y),this.touches=ep(w,y)))}touchmove(u,y,w){if(this.aborted||!this.centroid)return;const O=ep(w,y);for(const A in this.touches){const $=O[A];(!$||$.dist(this.touches[A])>30)&&(this.aborted=!0)}}touchend(u,y,w){if((!this.centroid||u.timeStamp-this.startTime>500)&&(this.aborted=!0),w.length===0){const O=!this.aborted&&this.centroid;if(this.reset(),O)return O}}}class qm{constructor(u){this.singleTap=new tp(u),this.numTaps=u.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(u,y,w){this.singleTap.touchstart(u,y,w)}touchmove(u,y,w){this.singleTap.touchmove(u,y,w)}touchend(u,y,w){const O=this.singleTap.touchend(u,y,w);if(O){const A=u.timeStamp-this.lastTime<500,$=!this.lastTap||this.lastTap.dist(O)<30;if(A&&$||this.reset(),this.count++,this.lastTime=u.timeStamp,this.lastTap=O,this.count===this.numTaps)return this.reset(),O}}}class Nf{constructor(u){this._tr=new Qo(u),this._zoomIn=new qm({numTouches:1,numTaps:2}),this._zoomOut=new qm({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(u,y,w){this._zoomIn.touchstart(u,y,w),this._zoomOut.touchstart(u,y,w)}touchmove(u,y,w){this._zoomIn.touchmove(u,y,w),this._zoomOut.touchmove(u,y,w)}touchend(u,y,w){const O=this._zoomIn.touchend(u,y,w),A=this._zoomOut.touchend(u,y,w),$=this._tr;return O?(this._active=!0,u.preventDefault(),setTimeout((()=>this.reset()),0),{cameraAnimation:z=>z.easeTo({duration:300,zoom:$.zoom+1,around:$.unproject(O)},{originalEvent:u})}):A?(this._active=!0,u.preventDefault(),setTimeout((()=>this.reset()),0),{cameraAnimation:z=>z.easeTo({duration:300,zoom:$.zoom-1,around:$.unproject(A)},{originalEvent:u})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Cl{constructor(u){this._enabled=!!u.enable,this._moveStateManager=u.moveStateManager,this._clickTolerance=u.clickTolerance||1,this._moveFunction=u.move,this._activateOnStart=!!u.activateOnStart,u.assignEvents(this),this.reset()}reset(u){this._active=!1,this._moved=!1,delete this._lastPoint,this._moveStateManager.endMove(u)}_move(...u){const y=this._moveFunction(...u);if(y.bearingDelta||y.pitchDelta||y.around||y.panDelta)return this._active=!0,y}dragStart(u,y){this.isEnabled()&&!this._lastPoint&&this._moveStateManager.isValidStartEvent(u)&&(this._moveStateManager.startMove(u),this._lastPoint=y.length?y[0]:y,this._activateOnStart&&this._lastPoint&&(this._active=!0))}dragMove(u,y){if(!this.isEnabled())return;const w=this._lastPoint;if(!w)return;if(u.preventDefault(),!this._moveStateManager.isValidMoveEvent(u))return void this.reset(u);const O=y.length?y[0]:y;return!this._moved&&O.dist(w)<this._clickTolerance?void 0:(this._moved=!0,this._lastPoint=O,this._move(w,O))}dragEnd(u){this.isEnabled()&&this._lastPoint&&this._moveStateManager.isValidEndEvent(u)&&(this._moved&&g.suppressClick(),this.reset(u))}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}getClickTolerance(){return this._clickTolerance}}const Z0={0:1,2:2};class Lh{constructor(u){this._correctEvent=u.checkCorrectEvent}startMove(u){const y=g.mouseButton(u);this._eventButton=y}endMove(u){delete this._eventButton}isValidStartEvent(u){return this._correctEvent(u)}isValidMoveEvent(u){return!(function(y,w){const O=Z0[w];return y.buttons===void 0||(y.buttons&O)!==O})(u,this._eventButton)}isValidEndEvent(u){return g.mouseButton(u)===this._eventButton}}class zc{constructor(){this._firstTouch=void 0}_isOneFingerTouch(u){return u.targetTouches.length===1}_isSameTouchEvent(u){return u.targetTouches[0].identifier===this._firstTouch}startMove(u){this._firstTouch=u.targetTouches[0].identifier}endMove(u){delete this._firstTouch}isValidStartEvent(u){return this._isOneFingerTouch(u)}isValidMoveEvent(u){return this._isOneFingerTouch(u)&&this._isSameTouchEvent(u)}isValidEndEvent(u){return this._isOneFingerTouch(u)&&this._isSameTouchEvent(u)}}const zf=E=>{E.mousedown=E.dragStart,E.mousemoveWindow=E.dragMove,E.mouseup=E.dragEnd,E.contextmenu=u=>{u.preventDefault()}},G1=({enable:E,clickTolerance:u,bearingDegreesPerPixelMoved:y=.8})=>{const w=new Lh({checkCorrectEvent:O=>g.mouseButton(O)===0&&O.ctrlKey||g.mouseButton(O)===2});return new Cl({clickTolerance:u,move:(O,A)=>({bearingDelta:(A.x-O.x)*y}),moveStateManager:w,enable:E,assignEvents:zf})},Y1=({enable:E,clickTolerance:u,pitchDegreesPerPixelMoved:y=-.5})=>{const w=new Lh({checkCorrectEvent:O=>g.mouseButton(O)===0&&O.ctrlKey||g.mouseButton(O)===2});return new Cl({clickTolerance:u,move:(O,A)=>({pitchDelta:(A.y-O.y)*y}),moveStateManager:w,enable:E,assignEvents:zf})};class Qf{constructor(u,y){this._clickTolerance=u.clickTolerance||1,this._map=y,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new a.P(0,0)}_shouldBePrevented(u){return u<(this._map.cooperativeGestures.isEnabled()?2:1)}touchstart(u,y,w){return this._calculateTransform(u,y,w)}touchmove(u,y,w){if(this._active){if(!this._shouldBePrevented(w.length))return u.preventDefault(),this._calculateTransform(u,y,w);this._map.cooperativeGestures.notifyGestureBlocked("touch_pan",u)}}touchend(u,y,w){this._calculateTransform(u,y,w),this._active&&this._shouldBePrevented(w.length)&&this.reset()}touchcancel(){this.reset()}_calculateTransform(u,y,w){w.length>0&&(this._active=!0);const O=ep(w,y),A=new a.P(0,0),$=new a.P(0,0);let z=0;for(const G in O){const H=O[G],K=this._touches[G];K&&(A._add(H),$._add(H.sub(K)),z++,O[G]=H)}if(this._touches=O,this._shouldBePrevented(z)||!$.mag())return;const U=$.div(z);return this._sum._add(U),this._sum.mag()<this._clickTolerance?void 0:{around:A.div(z),panDelta:U}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class jf{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}touchstart(u,y,w){this._firstTwoTouches||w.length<2||(this._firstTwoTouches=[w[0].identifier,w[1].identifier],this._start([y[0],y[1]]))}touchmove(u,y,w){if(!this._firstTwoTouches)return;u.preventDefault();const[O,A]=this._firstTwoTouches,$=$h(w,y,O),z=$h(w,y,A);if(!$||!z)return;const U=this._aroundCenter?null:$.add(z).div(2);return this._move([$,z],U,u)}touchend(u,y,w){if(!this._firstTwoTouches)return;const[O,A]=this._firstTwoTouches,$=$h(w,y,O),z=$h(w,y,A);$&&z||(this._active&&g.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(u){this._enabled=!0,this._aroundCenter=!!u&&u.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return!!this._enabled}isActive(){return!!this._active}}function $h(E,u,y){for(let w=0;w<E.length;w++)if(E[w].identifier===y)return u[w]}function Zm(E,u){return Math.log(E/u)/Math.LN2}class H1 extends jf{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(u){this._startDistance=this._distance=u[0].dist(u[1])}_move(u,y){const w=this._distance;if(this._distance=u[0].dist(u[1]),this._active||!(Math.abs(Zm(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:Zm(this._distance,w),pinchAround:y}}}function X0(E,u){return 180*E.angleWith(u)/Math.PI}class K1 extends jf{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(u){this._startVector=this._vector=u[0].sub(u[1]),this._minDiameter=u[0].dist(u[1])}_move(u,y,w){const O=this._vector;if(this._vector=u[0].sub(u[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:X0(this._vector,O),pinchAround:y}}_isBelowThreshold(u){this._minDiameter=Math.min(this._minDiameter,u.mag());const y=25/(Math.PI*this._minDiameter)*360,w=X0(u,this._startVector);return Math.abs(w)<y}}function W0(E){return Math.abs(E.y)>Math.abs(E.x)}class Us extends jf{constructor(u){super(),this._currentTouchCount=0,this._map=u}reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}touchstart(u,y,w){super.touchstart(u,y,w),this._currentTouchCount=w.length}_start(u){this._lastPoints=u,W0(u[0].sub(u[1]))&&(this._valid=!1)}_move(u,y,w){if(this._map.cooperativeGestures.isEnabled()&&this._currentTouchCount<3)return;const O=u[0].sub(this._lastPoints[0]),A=u[1].sub(this._lastPoints[1]);return this._valid=this.gestureBeginsVertically(O,A,w.timeStamp),this._valid?(this._lastPoints=u,this._active=!0,{pitchDelta:(O.y+A.y)/2*-.5}):void 0}gestureBeginsVertically(u,y,w){if(this._valid!==void 0)return this._valid;const O=u.mag()>=2,A=y.mag()>=2;if(!O&&!A)return;if(!O||!A)return this._firstMove===void 0&&(this._firstMove=w),w-this._firstMove<100&&void 0;const $=u.y>0==y.y>0;return W0(u)&&W0(y)&&$}}const Yo={panStep:100,bearingStep:15,pitchStep:10};class Al{constructor(u){this._tr=new Qo(u);const y=Yo;this._panStep=y.panStep,this._bearingStep=y.bearingStep,this._pitchStep=y.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(u){if(u.altKey||u.ctrlKey||u.metaKey)return;let y=0,w=0,O=0,A=0,$=0;switch(u.keyCode){case 61:case 107:case 171:case 187:y=1;break;case 189:case 109:case 173:y=-1;break;case 37:u.shiftKey?w=-1:(u.preventDefault(),A=-1);break;case 39:u.shiftKey?w=1:(u.preventDefault(),A=1);break;case 38:u.shiftKey?O=1:(u.preventDefault(),$=-1);break;case 40:u.shiftKey?O=-1:(u.preventDefault(),$=1);break;default:return}return this._rotationDisabled&&(w=0,O=0),{cameraAnimation:z=>{const U=this._tr;z.easeTo({duration:300,easeId:"keyboardHandler",easing:Xu,zoom:y?Math.round(U.zoom)+y*(u.shiftKey?2:1):U.zoom,bearing:U.bearing+w*this._bearingStep,pitch:U.pitch+O*this._pitchStep,offset:[-A*this._panStep,-$*this._panStep],center:U.center},{originalEvent:u})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function Xu(E){return E*(2-E)}const G0=4.000244140625;class du{constructor(u,y){this._onTimeout=w=>{this._type="wheel",this._delta-=this._lastValue,this._active||this._start(w)},this._map=u,this._tr=new Qo(u),this._triggerRenderFrame=y,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222}setZoomRate(u){this._defaultZoomRate=u}setWheelZoomRate(u){this._wheelZoomRate=u}isEnabled(){return!!this._enabled}isActive(){return!!this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(u){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!u&&u.around==="center")}disable(){this.isEnabled()&&(this._enabled=!1)}_shouldBePrevented(u){return!!this._map.cooperativeGestures.isEnabled()&&!(u.ctrlKey||this._map.cooperativeGestures.isBypassed(u))}wheel(u){if(!this.isEnabled())return;if(this._shouldBePrevented(u))return void this._map.cooperativeGestures.notifyGestureBlocked("wheel_zoom",u);let y=u.deltaMode===WheelEvent.DOM_DELTA_LINE?40*u.deltaY:u.deltaY;const w=p.now(),O=w-(this._lastWheelEventTime||0);this._lastWheelEventTime=w,y!==0&&y%G0==0?this._type="wheel":y!==0&&Math.abs(y)<4?this._type="trackpad":O>400?(this._type=null,this._lastValue=y,this._timeout=setTimeout(this._onTimeout,40,u)):this._type||(this._type=Math.abs(O*y)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,y+=this._lastValue)),u.shiftKey&&y&&(y/=4),this._type&&(this._lastWheelEvent=u,this._delta-=y,this._active||this._start(u)),u.preventDefault()}_start(u){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const y=g.mousePos(this._map.getCanvas(),u),w=this._tr;this._around=y.y>w.transform.height/2-w.transform.getHorizon()?a.N.convert(this._aroundCenter?w.center:w.unproject(y)):a.N.convert(w.center),this._aroundPoint=w.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const u=this._tr.transform;if(this._delta!==0){const U=this._type==="wheel"&&Math.abs(this._delta)>G0?this._wheelZoomRate:this._defaultZoomRate;let G=2/(1+Math.exp(-Math.abs(this._delta*U)));this._delta<0&&G!==0&&(G=1/G);const H=typeof this._targetZoom=="number"?u.zoomScale(this._targetZoom):u.scale;this._targetZoom=Math.min(u.maxZoom,Math.max(u.minZoom,u.scaleZoom(H*G))),this._type==="wheel"&&(this._startZoom=u.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}const y=typeof this._targetZoom=="number"?this._targetZoom:u.zoom,w=this._startZoom,O=this._easing;let A,$=!1;const z=p.now()-this._lastWheelEventTime;if(this._type==="wheel"&&w&&O&&z){const U=Math.min(z/200,1),G=O(U);A=a.y.number(w,y,G),U<1?this._frameId||(this._frameId=!0):$=!0}else A=y,$=!0;return this._active=!0,$&&(this._active=!1,this._finishTimeout=setTimeout((()=>{this._zooming=!1,this._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout}),200)),{noInertia:!0,needsRenderFrame:!$,zoomDelta:A-u.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}_smoothOutEasing(u){let y=a.b9;if(this._prevEase){const w=this._prevEase,O=(p.now()-w.start)/w.duration,A=w.easing(O+.01)-w.easing(O),$=.27/Math.sqrt(A*A+1e-4)*.01,z=Math.sqrt(.0729-$*$);y=a.b8($,z,.25,1)}return this._prevEase={start:p.now(),duration:u,easing:y},y}reset(){this._active=!1,this._zooming=!1,delete this._targetZoom,this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout)}}class Qc{constructor(u,y){this._clickZoom=u,this._tapZoom=y}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class Xm{constructor(u){this._tr=new Qo(u),this.reset()}reset(){this._active=!1}dblclick(u,y){return u.preventDefault(),{cameraAnimation:w=>{w.easeTo({duration:300,zoom:this._tr.zoom+(u.shiftKey?-1:1),around:this._tr.unproject(y)},{originalEvent:u})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class J1{constructor(){this._tap=new qm({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,delete this._tapPoint,this._tap.reset()}touchstart(u,y,w){if(!this._swipePoint)if(this._tapTime){const O=y[0],A=u.timeStamp-this._tapTime<500,$=this._tapPoint.dist(O)<30;A&&$?w.length>0&&(this._swipePoint=O,this._swipeTouch=w[0].identifier):this.reset()}else this._tap.touchstart(u,y,w)}touchmove(u,y,w){if(this._tapTime){if(this._swipePoint){if(w[0].identifier!==this._swipeTouch)return;const O=y[0],A=O.y-this._swipePoint.y;return this._swipePoint=O,u.preventDefault(),this._active=!0,{zoomDelta:A/128}}}else this._tap.touchmove(u,y,w)}touchend(u,y,w){if(this._tapTime)this._swipePoint&&w.length===0&&this.reset();else{const O=this._tap.touchend(u,y,w);O&&(this._tapTime=u.timeStamp,this._tapPoint=O)}}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Uf{constructor(u,y,w){this._el=u,this._mousePan=y,this._touchPan=w}enable(u){this._inertiaOptions=u||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class np{constructor(u,y,w){this._pitchWithRotate=u.pitchWithRotate,this._mouseRotate=y,this._mousePitch=w}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class Vf{constructor(u,y,w,O){this._el=u,this._touchZoom=y,this._touchRotate=w,this._tapDragZoom=O,this._rotationDisabled=!1,this._enabled=!0}enable(u){this._touchZoom.enable(u),this._rotationDisabled||this._touchRotate.enable(u),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}class jc{constructor(u,y){this._bypassKey=navigator.userAgent.indexOf("Mac")!==-1?"metaKey":"ctrlKey",this._map=u,this._options=y,this._enabled=!1}isActive(){return!1}reset(){}_setupUI(){if(this._container)return;const u=this._map.getCanvasContainer();u.classList.add("maplibregl-cooperative-gestures"),this._container=g.create("div","maplibregl-cooperative-gesture-screen",u);let y=this._map._getUIString("CooperativeGesturesHandler.WindowsHelpText");this._bypassKey==="metaKey"&&(y=this._map._getUIString("CooperativeGesturesHandler.MacHelpText"));const w=this._map._getUIString("CooperativeGesturesHandler.MobileHelpText"),O=document.createElement("div");O.className="maplibregl-desktop-message",O.textContent=y,this._container.appendChild(O);const A=document.createElement("div");A.className="maplibregl-mobile-message",A.textContent=w,this._container.appendChild(A),this._container.setAttribute("aria-hidden","true")}_destroyUI(){this._container&&(g.remove(this._container),this._map.getCanvasContainer().classList.remove("maplibregl-cooperative-gestures")),delete this._container}enable(){this._setupUI(),this._enabled=!0}disable(){this._enabled=!1,this._destroyUI()}isEnabled(){return this._enabled}isBypassed(u){return u[this._bypassKey]}notifyGestureBlocked(u,y){this._enabled&&(this._map.fire(new a.k("cooperativegestureprevented",{gestureType:u,originalEvent:y})),this._container.classList.add("maplibregl-show"),setTimeout((()=>{this._container.classList.remove("maplibregl-show")}),100))}}const Ho=E=>E.zoom||E.drag||E.pitch||E.rotate;class dn extends a.k{}function Y0(E){return E.panDelta&&E.panDelta.mag()||E.zoomDelta||E.bearingDelta||E.pitchDelta}class ev{constructor(u,y){this.handleWindowEvent=O=>{this.handleEvent(O,`${O.type}Window`)},this.handleEvent=(O,A)=>{if(O.type==="blur")return void this.stop(!0);this._updatingCamera=!0;const $=O.type==="renderFrame"?void 0:O,z={needsRenderFrame:!1},U={},G={},H=O.touches,K=H?this._getMapTouches(H):void 0,le=K?g.touchPos(this._map.getCanvas(),K):g.mousePos(this._map.getCanvas(),O);for(const{handlerName:Ee,handler:Me,allowed:Le}of this._handlers){if(!Me.isEnabled())continue;let Ne;this._blockedByActive(G,Le,Ee)?Me.reset():Me[A||O.type]&&(Ne=Me[A||O.type](O,le,K),this.mergeHandlerResult(z,U,Ne,Ee,$),Ne&&Ne.needsRenderFrame&&this._triggerRenderFrame()),(Ne||Me.isActive())&&(G[Ee]=Me)}const pe={};for(const Ee in this._previousActiveHandlers)G[Ee]||(pe[Ee]=$);this._previousActiveHandlers=G,(Object.keys(pe).length||Y0(z))&&(this._changes.push([z,U,pe]),this._triggerRenderFrame()),(Object.keys(G).length||Y0(z))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:_e}=z;_e&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],_e(this._map))},this._map=u,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new Ei(u),this._bearingSnap=y.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(y);const w=this._el;this._listeners=[[w,"touchstart",{passive:!0}],[w,"touchmove",{passive:!1}],[w,"touchend",void 0],[w,"touchcancel",void 0],[w,"mousedown",void 0],[w,"mousemove",void 0],[w,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[w,"mouseover",void 0],[w,"mouseout",void 0],[w,"dblclick",void 0],[w,"click",void 0],[w,"keydown",{capture:!1}],[w,"keyup",void 0],[w,"wheel",{passive:!1}],[w,"contextmenu",void 0],[window,"blur",void 0]];for(const[O,A,$]of this._listeners)g.addEventListener(O,A,O===document?this.handleWindowEvent:this.handleEvent,$)}destroy(){for(const[u,y,w]of this._listeners)g.removeEventListener(u,y,u===document?this.handleWindowEvent:this.handleEvent,w)}_addDefaultHandlers(u){const y=this._map,w=y.getCanvasContainer();this._add("mapEvent",new z_(y,u));const O=y.boxZoom=new fa(y,u);this._add("boxZoom",O),u.interactive&&u.boxZoom&&O.enable();const A=y.cooperativeGestures=new jc(y,u.cooperativeGestures);this._add("cooperativeGestures",A),u.cooperativeGestures&&A.enable();const $=new Nf(y),z=new Xm(y);y.doubleClickZoom=new Qc(z,$),this._add("tapZoom",$),this._add("clickZoom",z),u.interactive&&u.doubleClickZoom&&y.doubleClickZoom.enable();const U=new J1;this._add("tapDragZoom",U);const G=y.touchPitch=new Us(y);this._add("touchPitch",G),u.interactive&&u.touchPitch&&y.touchPitch.enable(u.touchPitch);const H=G1(u),K=Y1(u);y.dragRotate=new np(u,H,K),this._add("mouseRotate",H,["mousePitch"]),this._add("mousePitch",K,["mouseRotate"]),u.interactive&&u.dragRotate&&y.dragRotate.enable();const le=(({enable:Ne,clickTolerance:ke})=>{const Xe=new Lh({checkCorrectEvent:Ke=>g.mouseButton(Ke)===0&&!Ke.ctrlKey});return new Cl({clickTolerance:ke,move:(Ke,st)=>({around:st,panDelta:st.sub(Ke)}),activateOnStart:!0,moveStateManager:Xe,enable:Ne,assignEvents:zf})})(u),pe=new Qf(u,y);y.dragPan=new Uf(w,le,pe),this._add("mousePan",le),this._add("touchPan",pe,["touchZoom","touchRotate"]),u.interactive&&u.dragPan&&y.dragPan.enable(u.dragPan);const _e=new K1,Ee=new H1;y.touchZoomRotate=new Vf(w,Ee,_e,U),this._add("touchRotate",_e,["touchPan","touchZoom"]),this._add("touchZoom",Ee,["touchPan","touchRotate"]),u.interactive&&u.touchZoomRotate&&y.touchZoomRotate.enable(u.touchZoomRotate);const Me=y.scrollZoom=new du(y,(()=>this._triggerRenderFrame()));this._add("scrollZoom",Me,["mousePan"]),u.interactive&&u.scrollZoom&&y.scrollZoom.enable(u.scrollZoom);const Le=y.keyboard=new Al(y);this._add("keyboard",Le),u.interactive&&u.keyboard&&y.keyboard.enable(),this._add("blockableMapEvent",new Cs(y))}_add(u,y,w){this._handlers.push({handlerName:u,handler:y,allowed:w}),this._handlersById[u]=y}stop(u){if(!this._updatingCamera){for(const{handler:y}of this._handlers)y.reset();this._inertia.clear(),this._fireEvents({},{},u),this._changes=[]}}isActive(){for(const{handler:u}of this._handlers)if(u.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!Ho(this._eventsInProgress)||this.isZooming()}_blockedByActive(u,y,w){for(const O in u)if(O!==w&&(!y||y.indexOf(O)<0))return!0;return!1}_getMapTouches(u){const y=[];for(const w of u)this._el.contains(w.target)&&y.push(w);return y}mergeHandlerResult(u,y,w,O,A){if(!w)return;a.e(u,w);const $={handlerName:O,originalEvent:w.originalEvent||A};w.zoomDelta!==void 0&&(y.zoom=$),w.panDelta!==void 0&&(y.drag=$),w.pitchDelta!==void 0&&(y.pitch=$),w.bearingDelta!==void 0&&(y.rotate=$)}_applyChanges(){const u={},y={},w={};for(const[O,A,$]of this._changes)O.panDelta&&(u.panDelta=(u.panDelta||new a.P(0,0))._add(O.panDelta)),O.zoomDelta&&(u.zoomDelta=(u.zoomDelta||0)+O.zoomDelta),O.bearingDelta&&(u.bearingDelta=(u.bearingDelta||0)+O.bearingDelta),O.pitchDelta&&(u.pitchDelta=(u.pitchDelta||0)+O.pitchDelta),O.around!==void 0&&(u.around=O.around),O.pinchAround!==void 0&&(u.pinchAround=O.pinchAround),O.noInertia&&(u.noInertia=O.noInertia),a.e(y,A),a.e(w,$);this._updateMapTransform(u,y,w),this._changes=[]}_updateMapTransform(u,y,w){const O=this._map,A=O._getTransformForUpdate(),$=O.terrain;if(!(Y0(u)||$&&this._terrainMovement))return this._fireEvents(y,w,!0);let{panDelta:z,zoomDelta:U,bearingDelta:G,pitchDelta:H,around:K,pinchAround:le}=u;le!==void 0&&(K=le),O._stop(!0),K=K||O.transform.centerPoint;const pe=A.pointLocation(z?K.sub(z):K);G&&(A.bearing+=G),H&&(A.pitch+=H),U&&(A.zoom+=U),$?this._terrainMovement||!y.drag&&!y.zoom?y.drag&&this._terrainMovement?A.center=A.pointLocation(A.centerPoint.sub(z)):A.setLocationAtPoint(pe,K):(this._terrainMovement=!0,this._map._elevationFreeze=!0,A.setLocationAtPoint(pe,K)):A.setLocationAtPoint(pe,K),O._applyUpdatedTransform(A),this._map._update(),u.noInertia||this._inertia.record(u),this._fireEvents(y,w,!0)}_fireEvents(u,y,w){const O=Ho(this._eventsInProgress),A=Ho(u),$={};for(const K in u){const{originalEvent:le}=u[K];this._eventsInProgress[K]||($[`${K}start`]=le),this._eventsInProgress[K]=u[K]}!O&&A&&this._fireEvent("movestart",A.originalEvent);for(const K in $)this._fireEvent(K,$[K]);A&&this._fireEvent("move",A.originalEvent);for(const K in u){const{originalEvent:le}=u[K];this._fireEvent(K,le)}const z={};let U;for(const K in this._eventsInProgress){const{handlerName:le,originalEvent:pe}=this._eventsInProgress[K];this._handlersById[le].isActive()||(delete this._eventsInProgress[K],U=y[le]||pe,z[`${K}end`]=U)}for(const K in z)this._fireEvent(K,z[K]);const G=Ho(this._eventsInProgress),H=(O||A)&&!G;if(H&&this._terrainMovement){this._map._elevationFreeze=!1,this._terrainMovement=!1;const K=this._map._getTransformForUpdate();K.recalculateZoom(this._map.terrain),this._map._applyUpdatedTransform(K)}if(w&&H){this._updatingCamera=!0;const K=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),le=pe=>pe!==0&&-this._bearingSnap<pe&&pe<this._bearingSnap;!K||!K.essential&&p.prefersReducedMotion?(this._map.fire(new a.k("moveend",{originalEvent:U})),le(this._map.getBearing())&&this._map.resetNorth()):(le(K.bearing||this._map.getBearing())&&(K.bearing=0),K.freezeElevation=!0,this._map.easeTo(K,{originalEvent:U})),this._updatingCamera=!1}}_fireEvent(u,y){this._map.fire(new a.k(u,y?{originalEvent:y}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add((u=>{delete this._frameId,this.handleEvent(new dn("renderFrame",{timeStamp:u})),this._applyChanges()}))}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}class Q_ extends a.E{constructor(u,y){super(),this._renderFrameCallback=()=>{const w=Math.min((p.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(w)),w<1&&this._easeFrameId?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},this._moving=!1,this._zooming=!1,this.transform=u,this._bearingSnap=y.bearingSnap,this.on("moveend",(()=>{delete this._requestedCameraState}))}getCenter(){return new a.N(this.transform.center.lng,this.transform.center.lat)}setCenter(u,y){return this.jumpTo({center:u},y)}panBy(u,y,w){return u=a.P.convert(u).mult(-1),this.panTo(this.transform.center,a.e({offset:u},y),w)}panTo(u,y,w){return this.easeTo(a.e({center:u},y),w)}getZoom(){return this.transform.zoom}setZoom(u,y){return this.jumpTo({zoom:u},y),this}zoomTo(u,y,w){return this.easeTo(a.e({zoom:u},y),w)}zoomIn(u,y){return this.zoomTo(this.getZoom()+1,u,y),this}zoomOut(u,y){return this.zoomTo(this.getZoom()-1,u,y),this}getBearing(){return this.transform.bearing}setBearing(u,y){return this.jumpTo({bearing:u},y),this}getPadding(){return this.transform.padding}setPadding(u,y){return this.jumpTo({padding:u},y),this}rotateTo(u,y,w){return this.easeTo(a.e({bearing:u},y),w)}resetNorth(u,y){return this.rotateTo(0,a.e({duration:1e3},u),y),this}resetNorthPitch(u,y){return this.easeTo(a.e({bearing:0,pitch:0,duration:1e3},u),y),this}snapToNorth(u,y){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(u,y):this}getPitch(){return this.transform.pitch}setPitch(u,y){return this.jumpTo({pitch:u},y),this}cameraForBounds(u,y){u=Ze.convert(u).adjustAntiMeridian();const w=y&&y.bearing||0;return this._cameraForBoxAndBearing(u.getNorthWest(),u.getSouthEast(),w,y)}_cameraForBoxAndBearing(u,y,w,O){const A={top:0,bottom:0,right:0,left:0};if(typeof(O=a.e({padding:A,offset:[0,0],maxZoom:this.transform.maxZoom},O)).padding=="number"){const Zt=O.padding;O.padding={top:Zt,bottom:Zt,right:Zt,left:Zt}}O.padding=a.e(A,O.padding);const $=this.transform,z=$.padding,U=new Ze(u,y),G=$.project(U.getNorthWest()),H=$.project(U.getNorthEast()),K=$.project(U.getSouthEast()),le=$.project(U.getSouthWest()),pe=a.ba(-w),_e=G.rotate(pe),Ee=H.rotate(pe),Me=K.rotate(pe),Le=le.rotate(pe),Ne=new a.P(Math.max(_e.x,Ee.x,Le.x,Me.x),Math.max(_e.y,Ee.y,Le.y,Me.y)),ke=new a.P(Math.min(_e.x,Ee.x,Le.x,Me.x),Math.min(_e.y,Ee.y,Le.y,Me.y)),Xe=Ne.sub(ke),Ke=($.width-(z.left+z.right+O.padding.left+O.padding.right))/Xe.x,st=($.height-(z.top+z.bottom+O.padding.top+O.padding.bottom))/Xe.y;if(st<0||Ke<0)return void a.w("Map cannot fit within canvas with the given bounds, padding, and/or offset.");const xt=Math.min($.scaleZoom($.scale*Math.min(Ke,st)),O.maxZoom),Qt=a.P.convert(O.offset),Gt=new a.P((O.padding.left-O.padding.right)/2,(O.padding.top-O.padding.bottom)/2).rotate(a.ba(w)),tn=Qt.add(Gt).mult($.scale/$.zoomScale(xt));return{center:$.unproject(G.add(K).div(2).sub(tn)),zoom:xt,bearing:w}}fitBounds(u,y,w){return this._fitInternal(this.cameraForBounds(u,y),y,w)}fitScreenCoordinates(u,y,w,O,A){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(a.P.convert(u)),this.transform.pointLocation(a.P.convert(y)),w,O),O,A)}_fitInternal(u,y,w){return u?(delete(y=a.e(u,y)).padding,y.linear?this.easeTo(y,w):this.flyTo(y,w)):this}jumpTo(u,y){this.stop();const w=this._getTransformForUpdate();let O=!1,A=!1,$=!1;return"zoom"in u&&w.zoom!==+u.zoom&&(O=!0,w.zoom=+u.zoom),u.center!==void 0&&(w.center=a.N.convert(u.center)),"bearing"in u&&w.bearing!==+u.bearing&&(A=!0,w.bearing=+u.bearing),"pitch"in u&&w.pitch!==+u.pitch&&($=!0,w.pitch=+u.pitch),u.padding==null||w.isPaddingEqual(u.padding)||(w.padding=u.padding),this._applyUpdatedTransform(w),this.fire(new a.k("movestart",y)).fire(new a.k("move",y)),O&&this.fire(new a.k("zoomstart",y)).fire(new a.k("zoom",y)).fire(new a.k("zoomend",y)),A&&this.fire(new a.k("rotatestart",y)).fire(new a.k("rotate",y)).fire(new a.k("rotateend",y)),$&&this.fire(new a.k("pitchstart",y)).fire(new a.k("pitch",y)).fire(new a.k("pitchend",y)),this.fire(new a.k("moveend",y))}calculateCameraOptionsFromTo(u,y,w,O=0){const A=a.Z.fromLngLat(u,y),$=a.Z.fromLngLat(w,O),z=$.x-A.x,U=$.y-A.y,G=$.z-A.z,H=Math.hypot(z,U,G);if(H===0)throw new Error("Can't calculate camera options with same From and To");const K=Math.hypot(z,U),le=this.transform.scaleZoom(this.transform.cameraToCenterDistance/H/this.transform.tileSize),pe=180*Math.atan2(z,-U)/Math.PI;let _e=180*Math.acos(K/H)/Math.PI;return _e=G<0?90-_e:90+_e,{center:$.toLngLat(),zoom:le,pitch:_e,bearing:pe}}easeTo(u,y){var w;this._stop(!1,u.easeId),((u=a.e({offset:[0,0],duration:500,easing:a.b9},u)).animate===!1||!u.essential&&p.prefersReducedMotion)&&(u.duration=0);const O=this._getTransformForUpdate(),A=O.zoom,$=O.bearing,z=O.pitch,U=O.padding,G="bearing"in u?this._normalizeBearing(u.bearing,$):$,H="pitch"in u?+u.pitch:z,K="padding"in u?u.padding:O.padding,le=a.P.convert(u.offset);let pe=O.centerPoint.add(le);const _e=O.pointLocation(pe),{center:Ee,zoom:Me}=O.getConstrained(a.N.convert(u.center||_e),(w=u.zoom)!==null&&w!==void 0?w:A);this._normalizeCenter(Ee,O);const Le=O.project(_e),Ne=O.project(Ee).sub(Le),ke=O.zoomScale(Me-A);let Xe,Ke;u.around&&(Xe=a.N.convert(u.around),Ke=O.locationPoint(Xe));const st={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||Me!==A,this._rotating=this._rotating||$!==G,this._pitching=this._pitching||H!==z,this._padding=!O.isPaddingEqual(K),this._easeId=u.easeId,this._prepareEase(y,u.noMoveStart,st),this.terrain&&this._prepareElevation(Ee),this._ease((xt=>{if(this._zooming&&(O.zoom=a.y.number(A,Me,xt)),this._rotating&&(O.bearing=a.y.number($,G,xt)),this._pitching&&(O.pitch=a.y.number(z,H,xt)),this._padding&&(O.interpolatePadding(U,K,xt),pe=O.centerPoint.add(le)),this.terrain&&!u.freezeElevation&&this._updateElevation(xt),Xe)O.setLocationAtPoint(Xe,Ke);else{const Qt=O.zoomScale(O.zoom-A),Gt=Me>A?Math.min(2,ke):Math.max(.5,ke),tn=Math.pow(Gt,1-xt),Zt=O.unproject(Le.add(Ne.mult(xt*tn)).mult(Qt));O.setLocationAtPoint(O.renderWorldCopies?Zt.wrap():Zt,pe)}this._applyUpdatedTransform(O),this._fireMoveEvents(y)}),(xt=>{this.terrain&&u.freezeElevation&&this._finalizeElevation(),this._afterEase(y,xt)}),u),this}_prepareEase(u,y,w={}){this._moving=!0,y||w.moving||this.fire(new a.k("movestart",u)),this._zooming&&!w.zooming&&this.fire(new a.k("zoomstart",u)),this._rotating&&!w.rotating&&this.fire(new a.k("rotatestart",u)),this._pitching&&!w.pitching&&this.fire(new a.k("pitchstart",u))}_prepareElevation(u){this._elevationCenter=u,this._elevationStart=this.transform.elevation,this._elevationTarget=this.terrain.getElevationForLngLatZoom(u,this.transform.tileZoom),this._elevationFreeze=!0}_updateElevation(u){this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);const y=this.terrain.getElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);if(u<1&&y!==this._elevationTarget){const w=this._elevationTarget-this._elevationStart;this._elevationStart+=u*(w-(y-(w*u+this._elevationStart))/(1-u)),this._elevationTarget=y}this.transform.elevation=a.y.number(this._elevationStart,this._elevationTarget,u)}_finalizeElevation(){this._elevationFreeze=!1,this.transform.recalculateZoom(this.terrain)}_getTransformForUpdate(){return this.transformCameraUpdate||this.terrain?(this._requestedCameraState||(this._requestedCameraState=this.transform.clone()),this._requestedCameraState):this.transform}_elevateCameraIfInsideTerrain(u){const y=u.getCameraPosition(),w=this.terrain.getElevationForLngLatZoom(y.lngLat,u.zoom);if(y.altitude<w){const O=this.calculateCameraOptionsFromTo(y.lngLat,w,u.center,u.elevation);return{pitch:O.pitch,zoom:O.zoom}}return{}}_applyUpdatedTransform(u){const y=[];if(this.terrain&&y.push((O=>this._elevateCameraIfInsideTerrain(O))),this.transformCameraUpdate&&y.push((O=>this.transformCameraUpdate(O))),!y.length)return;const w=u.clone();for(const O of y){const A=w.clone(),{center:$,zoom:z,pitch:U,bearing:G,elevation:H}=O(A);$&&(A.center=$),z!==void 0&&(A.zoom=z),U!==void 0&&(A.pitch=U),G!==void 0&&(A.bearing=G),H!==void 0&&(A.elevation=H),w.apply(A)}this.transform.apply(w)}_fireMoveEvents(u){this.fire(new a.k("move",u)),this._zooming&&this.fire(new a.k("zoom",u)),this._rotating&&this.fire(new a.k("rotate",u)),this._pitching&&this.fire(new a.k("pitch",u))}_afterEase(u,y){if(this._easeId&&y&&this._easeId===y)return;delete this._easeId;const w=this._zooming,O=this._rotating,A=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,w&&this.fire(new a.k("zoomend",u)),O&&this.fire(new a.k("rotateend",u)),A&&this.fire(new a.k("pitchend",u)),this.fire(new a.k("moveend",u))}flyTo(u,y){var w;if(!u.essential&&p.prefersReducedMotion){const Vt=a.M(u,["center","zoom","bearing","pitch","around"]);return this.jumpTo(Vt,y)}this.stop(),u=a.e({offset:[0,0],speed:1.2,curve:1.42,easing:a.b9},u);const O=this._getTransformForUpdate(),A=O.zoom,$=O.bearing,z=O.pitch,U=O.padding,G="bearing"in u?this._normalizeBearing(u.bearing,$):$,H="pitch"in u?+u.pitch:z,K="padding"in u?u.padding:O.padding,le=a.P.convert(u.offset);let pe=O.centerPoint.add(le);const _e=O.pointLocation(pe),{center:Ee,zoom:Me}=O.getConstrained(a.N.convert(u.center||_e),(w=u.zoom)!==null&&w!==void 0?w:A);this._normalizeCenter(Ee,O);const Le=O.zoomScale(Me-A),Ne=O.project(_e),ke=O.project(Ee).sub(Ne);let Xe=u.curve;const Ke=Math.max(O.width,O.height),st=Ke/Le,xt=ke.mag();if("minZoom"in u){const Vt=a.ac(Math.min(u.minZoom,A,Me),O.minZoom,O.maxZoom),Wn=Ke/O.zoomScale(Vt-A);Xe=Math.sqrt(Wn/xt*2)}const Qt=Xe*Xe;function Gt(Vt){const Wn=(st*st-Ke*Ke+(Vt?-1:1)*Qt*Qt*xt*xt)/(2*(Vt?st:Ke)*Qt*xt);return Math.log(Math.sqrt(Wn*Wn+1)-Wn)}function tn(Vt){return(Math.exp(Vt)-Math.exp(-Vt))/2}function Zt(Vt){return(Math.exp(Vt)+Math.exp(-Vt))/2}const Xt=Gt(!1);let bn=function(Vt){return Zt(Xt)/Zt(Xt+Xe*Vt)},nr=function(Vt){return Ke*((Zt(Xt)*(tn(Wn=Xt+Xe*Vt)/Zt(Wn))-tn(Xt))/Qt)/xt;var Wn},Ht=(Gt(!0)-Xt)/Xe;if(Math.abs(xt)<1e-6||!isFinite(Ht)){if(Math.abs(Ke-st)<1e-6)return this.easeTo(u,y);const Vt=st<Ke?-1:1;Ht=Math.abs(Math.log(st/Ke))/Xe,nr=()=>0,bn=Wn=>Math.exp(Vt*Xe*Wn)}return u.duration="duration"in u?+u.duration:1e3*Ht/("screenSpeed"in u?+u.screenSpeed/Xe:+u.speed),u.maxDuration&&u.duration>u.maxDuration&&(u.duration=0),this._zooming=!0,this._rotating=$!==G,this._pitching=H!==z,this._padding=!O.isPaddingEqual(K),this._prepareEase(y,!1),this.terrain&&this._prepareElevation(Ee),this._ease((Vt=>{const Wn=Vt*Ht,os=1/bn(Wn);O.zoom=Vt===1?Me:A+O.scaleZoom(os),this._rotating&&(O.bearing=a.y.number($,G,Vt)),this._pitching&&(O.pitch=a.y.number(z,H,Vt)),this._padding&&(O.interpolatePadding(U,K,Vt),pe=O.centerPoint.add(le)),this.terrain&&!u.freezeElevation&&this._updateElevation(Vt);const Yn=Vt===1?Ee:O.unproject(Ne.add(ke.mult(nr(Wn))).mult(os));O.setLocationAtPoint(O.renderWorldCopies?Yn.wrap():Yn,pe),this._applyUpdatedTransform(O),this._fireMoveEvents(y)}),(()=>{this.terrain&&u.freezeElevation&&this._finalizeElevation(),this._afterEase(y)}),u),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(u,y){var w;if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){const O=this._onEaseEnd;delete this._onEaseEnd,O.call(this,y)}return u||(w=this.handlers)===null||w===void 0||w.stop(!1),this}_ease(u,y,w){w.animate===!1||w.duration===0?(u(1),y()):(this._easeStart=p.now(),this._easeOptions=w,this._onEaseFrame=u,this._onEaseEnd=y,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_normalizeBearing(u,y){u=a.b3(u,-180,180);const w=Math.abs(u-y);return Math.abs(u-360-y)<w&&(u-=360),Math.abs(u+360-y)<w&&(u+=360),u}_normalizeCenter(u,y){if(!y.renderWorldCopies||y.lngRange)return;const w=u.lng-y.center.lng;u.lng+=w>180?-360:w<-180?360:0}queryTerrainElevation(u){return this.terrain?this.terrain.getElevationForLngLatZoom(a.N.convert(u),this.transform.tileZoom)-this.transform.elevation:null}}const rp={compact:!0,customAttribution:'<a href="https://maplibre.org/" target="_blank">MapLibre</a>'};class Uc{constructor(u=rp){this._toggleAttribution=()=>{this._container.classList.contains("maplibregl-compact")&&(this._container.classList.contains("maplibregl-compact-show")?(this._container.setAttribute("open",""),this._container.classList.remove("maplibregl-compact-show")):(this._container.classList.add("maplibregl-compact-show"),this._container.removeAttribute("open")))},this._updateData=y=>{!y||y.sourceDataType!=="metadata"&&y.sourceDataType!=="visibility"&&y.dataType!=="style"&&y.type!=="terrain"||this._updateAttributions()},this._updateCompact=()=>{this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact===!1?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||this._container.classList.contains("maplibregl-attrib-empty")||(this._container.setAttribute("open",""),this._container.classList.add("maplibregl-compact","maplibregl-compact-show")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show"))},this._updateCompactMinimize=()=>{this._container.classList.contains("maplibregl-compact")&&this._container.classList.contains("maplibregl-compact-show")&&this._container.classList.remove("maplibregl-compact-show")},this.options=u}getDefaultPosition(){return"bottom-right"}onAdd(u){return this._map=u,this._compact=this.options.compact,this._container=g.create("details","maplibregl-ctrl maplibregl-ctrl-attrib"),this._compactButton=g.create("summary","maplibregl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=g.create("div","maplibregl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("terrain",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}onRemove(){g.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("terrain",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._attribHTML=void 0}_setElementTitle(u,y){const w=this._map._getUIString(`AttributionControl.${y}`);u.title=w,u.setAttribute("aria-label",w)}_updateAttributions(){if(!this._map.style)return;let u=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?u=u.concat(this.options.customAttribution.map((O=>typeof O!="string"?"":O))):typeof this.options.customAttribution=="string"&&u.push(this.options.customAttribution)),this._map.style.stylesheet){const O=this._map.style.stylesheet;this.styleOwner=O.owner,this.styleId=O.id}const y=this._map.style.sourceCaches;for(const O in y){const A=y[O];if(A.used||A.usedForTerrain){const $=A.getSource();$.attribution&&u.indexOf($.attribution)<0&&u.push($.attribution)}}u=u.filter((O=>String(O).trim())),u.sort(((O,A)=>O.length-A.length)),u=u.filter(((O,A)=>{for(let $=A+1;$<u.length;$++)if(u[$].indexOf(O)>=0)return!1;return!0}));const w=u.join(" | ");w!==this._attribHTML&&(this._attribHTML=w,u.length?(this._innerContainer.innerHTML=w,this._container.classList.remove("maplibregl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty"),this._updateCompact(),this._editLink=null)}}class qf{constructor(u={}){this._updateCompact=()=>{const y=this._container.children;if(y.length){const w=y[0];this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact!==!1&&w.classList.add("maplibregl-compact"):w.classList.remove("maplibregl-compact")}},this.options=u}getDefaultPosition(){return"bottom-left"}onAdd(u){this._map=u,this._compact=this.options&&this.options.compact,this._container=g.create("div","maplibregl-ctrl");const y=g.create("a","maplibregl-ctrl-logo");return y.target="_blank",y.rel="noopener nofollow",y.href="https://maplibre.org/",y.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),y.setAttribute("rel","noopener nofollow"),this._container.appendChild(y),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){g.remove(this._container),this._map.off("resize",this._updateCompact),this._map=void 0,this._compact=void 0}}class Qr{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(u){const y=++this._id;return this._queue.push({callback:u,id:y,cancelled:!1}),y}remove(u){const y=this._currentlyRunning,w=y?this._queue.concat(y):this._queue;for(const O of w)if(O.id===u)return void(O.cancelled=!0)}run(u=0){if(this._currentlyRunning)throw new Error("Attempting to run(), but is already running.");const y=this._currentlyRunning=this._queue;this._queue=[];for(const w of y)if(!w.cancelled&&(w.callback(u),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}var de=a.Y([{name:"a_pos3d",type:"Int16",components:3}]);class ip extends a.E{constructor(u){super(),this.sourceCache=u,this._tiles={},this._renderableTilesKeys=[],this._sourceTileCache={},this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.deltaZoom=1,u.usedForTerrain=!0,u.tileSize=this.tileSize*2**this.deltaZoom}destruct(){this.sourceCache.usedForTerrain=!1,this.sourceCache.tileSize=null}update(u,y){this.sourceCache.update(u,y),this._renderableTilesKeys=[];const w={};for(const O of u.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,reparseOverscaled:!1,terrain:y}))w[O.key]=!0,this._renderableTilesKeys.push(O.key),this._tiles[O.key]||(O.posMatrix=new Float64Array(16),a.aP(O.posMatrix,0,a.X,0,a.X,0,1),this._tiles[O.key]=new Co(O,this.tileSize));for(const O in this._tiles)w[O]||delete this._tiles[O]}freeRtt(u){for(const y in this._tiles){const w=this._tiles[y];(!u||w.tileID.equals(u)||w.tileID.isChildOf(u)||u.isChildOf(w.tileID))&&(w.rtt=[])}}getRenderableTiles(){return this._renderableTilesKeys.map((u=>this.getTileByID(u)))}getTileByID(u){return this._tiles[u]}getTerrainCoords(u){const y={};for(const w of this._renderableTilesKeys){const O=this._tiles[w].tileID;if(O.canonical.equals(u.canonical)){const A=u.clone();A.posMatrix=new Float64Array(16),a.aP(A.posMatrix,0,a.X,0,a.X,0,1),y[w]=A}else if(O.canonical.isChildOf(u.canonical)){const A=u.clone();A.posMatrix=new Float64Array(16);const $=O.canonical.z-u.canonical.z,z=O.canonical.x-(O.canonical.x>>$<<$),U=O.canonical.y-(O.canonical.y>>$<<$),G=a.X>>$;a.aP(A.posMatrix,0,G,0,G,0,1),a.J(A.posMatrix,A.posMatrix,[-z*G,-U*G,0]),y[w]=A}else if(u.canonical.isChildOf(O.canonical)){const A=u.clone();A.posMatrix=new Float64Array(16);const $=u.canonical.z-O.canonical.z,z=u.canonical.x-(u.canonical.x>>$<<$),U=u.canonical.y-(u.canonical.y>>$<<$),G=a.X>>$;a.aP(A.posMatrix,0,a.X,0,a.X,0,1),a.J(A.posMatrix,A.posMatrix,[z*G,U*G,0]),a.K(A.posMatrix,A.posMatrix,[1/2**$,1/2**$,0]),y[w]=A}}return y}getSourceTile(u,y){const w=this.sourceCache._source;let O=u.overscaledZ-this.deltaZoom;if(O>w.maxzoom&&(O=w.maxzoom),O<w.minzoom)return null;this._sourceTileCache[u.key]||(this._sourceTileCache[u.key]=u.scaledTo(O).key);let A=this.sourceCache.getTileByID(this._sourceTileCache[u.key]);if((!A||!A.dem)&&y)for(;O>=w.minzoom&&(!A||!A.dem);)A=this.sourceCache.getTileByID(u.scaledTo(O--).key);return A}tilesAfterTime(u=Date.now()){return Object.values(this._tiles).filter((y=>y.timeAdded>=u))}}class sp{constructor(u,y,w){this.painter=u,this.sourceCache=new ip(y),this.options=w,this.exaggeration=typeof w.exaggeration=="number"?w.exaggeration:1,this.qualityFactor=2,this.meshSize=128,this._demMatrixCache={},this.coordsIndex=[],this._coordsTextureSize=1024}getDEMElevation(u,y,w,O=a.X){var A;if(!(y>=0&&y<O&&w>=0&&w<O))return 0;const $=this.getTerrainData(u),z=(A=$.tile)===null||A===void 0?void 0:A.dem;if(!z)return 0;const U=(function(_e,Ee,Me){var Le=Ee[0],Ne=Ee[1];return _e[0]=Me[0]*Le+Me[4]*Ne+Me[12],_e[1]=Me[1]*Le+Me[5]*Ne+Me[13],_e})([],[y/O*a.X,w/O*a.X],$.u_terrain_matrix),G=[U[0]*z.dim,U[1]*z.dim],H=Math.floor(G[0]),K=Math.floor(G[1]),le=G[0]-H,pe=G[1]-K;return z.get(H,K)*(1-le)*(1-pe)+z.get(H+1,K)*le*(1-pe)+z.get(H,K+1)*(1-le)*pe+z.get(H+1,K+1)*le*pe}getElevationForLngLatZoom(u,y){if(!a.bb(y,u.wrap()))return 0;const{tileID:w,mercatorX:O,mercatorY:A}=this._getOverscaledTileIDFromLngLatZoom(u,y);return this.getElevation(w,O%a.X,A%a.X,a.X)}getElevation(u,y,w,O=a.X){return this.getDEMElevation(u,y,w,O)*this.exaggeration}getTerrainData(u){if(!this._emptyDemTexture){const O=this.painter.context,A=new a.R({width:1,height:1},new Uint8Array(4));this._emptyDepthTexture=new ae(O,A,O.gl.RGBA,{premultiply:!1}),this._emptyDemUnpack=[0,0,0,0],this._emptyDemTexture=new ae(O,new a.R({width:1,height:1}),O.gl.RGBA,{premultiply:!1}),this._emptyDemTexture.bind(O.gl.NEAREST,O.gl.CLAMP_TO_EDGE),this._emptyDemMatrix=a.an([])}const y=this.sourceCache.getSourceTile(u,!0);if(y&&y.dem&&(!y.demTexture||y.needsTerrainPrepare)){const O=this.painter.context;y.demTexture=this.painter.getTileTexture(y.dem.stride),y.demTexture?y.demTexture.update(y.dem.getPixels(),{premultiply:!1}):y.demTexture=new ae(O,y.dem.getPixels(),O.gl.RGBA,{premultiply:!1}),y.demTexture.bind(O.gl.NEAREST,O.gl.CLAMP_TO_EDGE),y.needsTerrainPrepare=!1}const w=y&&y+y.tileID.key+u.key;if(w&&!this._demMatrixCache[w]){const O=this.sourceCache.sourceCache._source.maxzoom;let A=u.canonical.z-y.tileID.canonical.z;u.overscaledZ>u.canonical.z&&(u.canonical.z>=O?A=u.canonical.z-O:a.w("cannot calculate elevation if elevation maxzoom > source.maxzoom"));const $=u.canonical.x-(u.canonical.x>>A<<A),z=u.canonical.y-(u.canonical.y>>A<<A),U=a.bc(new Float64Array(16),[1/(a.X<<A),1/(a.X<<A),0]);a.J(U,U,[$*a.X,z*a.X,0]),this._demMatrixCache[u.key]={matrix:U,coord:u}}return{u_depth:2,u_terrain:3,u_terrain_dim:y&&y.dem&&y.dem.dim||1,u_terrain_matrix:w?this._demMatrixCache[u.key].matrix:this._emptyDemMatrix,u_terrain_unpack:y&&y.dem&&y.dem.getUnpackVector()||this._emptyDemUnpack,u_terrain_exaggeration:this.exaggeration,texture:(y&&y.demTexture||this._emptyDemTexture).texture,depthTexture:(this._fboDepthTexture||this._emptyDepthTexture).texture,tile:y}}getFramebuffer(u){const y=this.painter,w=y.width/devicePixelRatio,O=y.height/devicePixelRatio;return!this._fbo||this._fbo.width===w&&this._fbo.height===O||(this._fbo.destroy(),this._fboCoordsTexture.destroy(),this._fboDepthTexture.destroy(),delete this._fbo,delete this._fboDepthTexture,delete this._fboCoordsTexture),this._fboCoordsTexture||(this._fboCoordsTexture=new ae(y.context,{width:w,height:O,data:null},y.context.gl.RGBA,{premultiply:!1}),this._fboCoordsTexture.bind(y.context.gl.NEAREST,y.context.gl.CLAMP_TO_EDGE)),this._fboDepthTexture||(this._fboDepthTexture=new ae(y.context,{width:w,height:O,data:null},y.context.gl.RGBA,{premultiply:!1}),this._fboDepthTexture.bind(y.context.gl.NEAREST,y.context.gl.CLAMP_TO_EDGE)),this._fbo||(this._fbo=y.context.createFramebuffer(w,O,!0,!1),this._fbo.depthAttachment.set(y.context.createRenderbuffer(y.context.gl.DEPTH_COMPONENT16,w,O))),this._fbo.colorAttachment.set(u==="coords"?this._fboCoordsTexture.texture:this._fboDepthTexture.texture),this._fbo}getCoordsTexture(){const u=this.painter.context;if(this._coordsTexture)return this._coordsTexture;const y=new Uint8Array(this._coordsTextureSize*this._coordsTextureSize*4);for(let A=0,$=0;A<this._coordsTextureSize;A++)for(let z=0;z<this._coordsTextureSize;z++,$+=4)y[$+0]=255&z,y[$+1]=255&A,y[$+2]=z>>8<<4|A>>8,y[$+3]=0;const w=new a.R({width:this._coordsTextureSize,height:this._coordsTextureSize},new Uint8Array(y.buffer)),O=new ae(u,w,u.gl.RGBA,{premultiply:!1});return O.bind(u.gl.NEAREST,u.gl.CLAMP_TO_EDGE),this._coordsTexture=O,O}pointCoordinate(u){this.painter.maybeDrawDepthAndCoords(!0);const y=new Uint8Array(4),w=this.painter.context,O=w.gl,A=Math.round(u.x*this.painter.pixelRatio/devicePixelRatio),$=Math.round(u.y*this.painter.pixelRatio/devicePixelRatio),z=Math.round(this.painter.height/devicePixelRatio);w.bindFramebuffer.set(this.getFramebuffer("coords").framebuffer),O.readPixels(A,z-$-1,1,1,O.RGBA,O.UNSIGNED_BYTE,y),w.bindFramebuffer.set(null);const U=y[0]+(y[2]>>4<<8),G=y[1]+((15&y[2])<<8),H=this.coordsIndex[255-y[3]],K=H&&this.sourceCache.getTileByID(H);if(!K)return null;const le=this._coordsTextureSize,pe=(1<<K.tileID.canonical.z)*le;return new a.Z((K.tileID.canonical.x*le+U)/pe+K.tileID.wrap,(K.tileID.canonical.y*le+G)/pe,this.getElevation(K.tileID,U,G,le))}depthAtPoint(u){const y=new Uint8Array(4),w=this.painter.context,O=w.gl;return w.bindFramebuffer.set(this.getFramebuffer("depth").framebuffer),O.readPixels(u.x,this.painter.height/devicePixelRatio-u.y-1,1,1,O.RGBA,O.UNSIGNED_BYTE,y),w.bindFramebuffer.set(null),(y[0]/16777216+y[1]/65536+y[2]/256+y[3])/256}getTerrainMesh(){if(this._mesh)return this._mesh;const u=this.painter.context,y=new a.bd,w=new a.aY,O=this.meshSize,A=a.X/O,$=O*O;for(let K=0;K<=O;K++)for(let le=0;le<=O;le++)y.emplaceBack(le*A,K*A,0);for(let K=0;K<$;K+=O+1)for(let le=0;le<O;le++)w.emplaceBack(le+K,O+le+K+1,O+le+K+2),w.emplaceBack(le+K,O+le+K+2,le+K+1);const z=y.length,U=z+2*(O+1);for(const K of[0,1])for(let le=0;le<=O;le++)for(const pe of[0,1])y.emplaceBack(le*A,K*a.X,pe);for(let K=0;K<2*O;K+=2)w.emplaceBack(U+K,U+K+1,U+K+3),w.emplaceBack(U+K,U+K+3,U+K+2),w.emplaceBack(z+K,z+K+3,z+K+1),w.emplaceBack(z+K,z+K+2,z+K+3);const G=y.length,H=G+2*(O+1);for(const K of[0,1])for(let le=0;le<=O;le++)for(const pe of[0,1])y.emplaceBack(K*a.X,le*A,pe);for(let K=0;K<2*O;K+=2)w.emplaceBack(G+K,G+K+1,G+K+3),w.emplaceBack(G+K,G+K+3,G+K+2),w.emplaceBack(H+K,H+K+3,H+K+1),w.emplaceBack(H+K,H+K+2,H+K+3);return this._mesh=new mt(u.createVertexBuffer(y,de.members),u.createIndexBuffer(w),a.a0.simpleSegment(0,0,y.length,w.length)),this._mesh}getMeshFrameDelta(u){return 2*Math.PI*a.be/Math.pow(2,u)/5}getMinTileElevationForLngLatZoom(u,y){var w;const{tileID:O}=this._getOverscaledTileIDFromLngLatZoom(u,y);return(w=this.getMinMaxElevation(O).minElevation)!==null&&w!==void 0?w:0}getMinMaxElevation(u){const y=this.getTerrainData(u).tile,w={minElevation:null,maxElevation:null};return y&&y.dem&&(w.minElevation=y.dem.min*this.exaggeration,w.maxElevation=y.dem.max*this.exaggeration),w}_getOverscaledTileIDFromLngLatZoom(u,y){const w=a.Z.fromLngLat(u.wrap()),O=(1<<y)*a.X,A=w.x*O,$=w.y*O,z=Math.floor(A/a.X),U=Math.floor($/a.X);return{tileID:new a.S(y,0,y,z,U),mercatorX:A,mercatorY:$}}}class El{constructor(u,y,w){this._context=u,this._size=y,this._tileSize=w,this._objects=[],this._recentlyUsed=[],this._stamp=0}destruct(){for(const u of this._objects)u.texture.destroy(),u.fbo.destroy()}_createObject(u){const y=this._context.createFramebuffer(this._tileSize,this._tileSize,!0,!0),w=new ae(this._context,{width:this._tileSize,height:this._tileSize,data:null},this._context.gl.RGBA);return w.bind(this._context.gl.LINEAR,this._context.gl.CLAMP_TO_EDGE),y.depthAttachment.set(this._context.createRenderbuffer(this._context.gl.DEPTH_STENCIL,this._tileSize,this._tileSize)),y.colorAttachment.set(w.texture),{id:u,fbo:y,texture:w,stamp:-1,inUse:!1}}getObjectForId(u){return this._objects[u]}useObject(u){u.inUse=!0,this._recentlyUsed=this._recentlyUsed.filter((y=>u.id!==y)),this._recentlyUsed.push(u.id)}stampObject(u){u.stamp=++this._stamp}getOrCreateFreeObject(){for(const y of this._recentlyUsed)if(!this._objects[y].inUse)return this._objects[y];if(this._objects.length>=this._size)throw new Error("No free RenderPool available, call freeAllObjects() required!");const u=this._createObject(this._objects.length);return this._objects.push(u),u}freeObject(u){u.inUse=!1}freeAllObjects(){for(const u of this._objects)this.freeObject(u)}isFull(){return!(this._objects.length<this._size)&&this._objects.some((u=>!u.inUse))===!1}}const Fr={background:!0,fill:!0,line:!0,raster:!0,hillshade:!0};class j_{constructor(u,y){this.painter=u,this.terrain=y,this.pool=new El(u.context,30,y.sourceCache.tileSize*y.qualityFactor)}destruct(){this.pool.destruct()}getTexture(u){return this.pool.getObjectForId(u.rtt[this._stacks.length-1].id).texture}prepareForRender(u,y){this._stacks=[],this._prevType=null,this._rttTiles=[],this._renderableTiles=this.terrain.sourceCache.getRenderableTiles(),this._renderableLayerIds=u._order.filter((w=>!u._layers[w].isHidden(y))),this._coordsDescendingInv={};for(const w in u.sourceCaches){this._coordsDescendingInv[w]={};const O=u.sourceCaches[w].getVisibleCoordinates();for(const A of O){const $=this.terrain.sourceCache.getTerrainCoords(A);for(const z in $)this._coordsDescendingInv[w][z]||(this._coordsDescendingInv[w][z]=[]),this._coordsDescendingInv[w][z].push($[z])}}this._coordsDescendingInvStr={};for(const w of u._order){const O=u._layers[w],A=O.source;if(Fr[O.type]&&!this._coordsDescendingInvStr[A]){this._coordsDescendingInvStr[A]={};for(const $ in this._coordsDescendingInv[A])this._coordsDescendingInvStr[A][$]=this._coordsDescendingInv[A][$].map((z=>z.key)).sort().join()}}for(const w of this._renderableTiles)for(const O in this._coordsDescendingInvStr){const A=this._coordsDescendingInvStr[O][w.tileID.key];A&&A!==w.rttCoords[O]&&(w.rtt=[])}}renderLayer(u){if(u.isHidden(this.painter.transform.zoom))return!1;const y=u.type,w=this.painter,O=this._renderableLayerIds[this._renderableLayerIds.length-1]===u.id;if(Fr[y]&&(this._prevType&&Fr[this._prevType]||this._stacks.push([]),this._prevType=y,this._stacks[this._stacks.length-1].push(u.id),!O))return!0;if(Fr[this._prevType]||Fr[y]&&O){this._prevType=y;const A=this._stacks.length-1,$=this._stacks[A]||[];for(const z of this._renderableTiles){if(this.pool.isFull()&&(bt(this.painter,this.terrain,this._rttTiles),this._rttTiles=[],this.pool.freeAllObjects()),this._rttTiles.push(z),z.rtt[A]){const G=this.pool.getObjectForId(z.rtt[A].id);if(G.stamp===z.rtt[A].stamp){this.pool.useObject(G);continue}}const U=this.pool.getOrCreateFreeObject();this.pool.useObject(U),this.pool.stampObject(U),z.rtt[A]={id:U.id,stamp:U.stamp},w.context.bindFramebuffer.set(U.fbo.framebuffer),w.context.clear({color:a.aM.transparent,stencil:0}),w.currentStencilSource=void 0;for(let G=0;G<$.length;G++){const H=w.style._layers[$[G]],K=H.source?this._coordsDescendingInv[H.source][z.tileID.key]:[z.tileID];w.context.viewport.set([0,0,U.fbo.width,U.fbo.height]),w._renderTileClippingMasks(H,K),w.renderLayer(w,w.style.sourceCaches[H.source],H,K),H.source&&(z.rttCoords[H.source]=this._coordsDescendingInvStr[H.source][z.tileID.key])}}return bt(this.painter,this.terrain,this._rttTiles),this._rttTiles=[],this.pool.freeAllObjects(),Fr[y]}return!1}}const tv={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"MapLibre logo","Map.Title":"Map","Marker.Title":"Map marker","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","Popup.Close":"Close popup","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm","TerrainControl.Enable":"Enable terrain","TerrainControl.Disable":"Disable terrain","CooperativeGesturesHandler.WindowsHelpText":"Use Ctrl + scroll to zoom the map","CooperativeGesturesHandler.MacHelpText":"Use â + scroll to zoom the map","CooperativeGesturesHandler.MobileHelpText":"Use two fingers to move the map"},U_=l,Zf={hash:!1,interactive:!0,bearingSnap:7,attributionControl:rp,maplibreLogo:!1,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,refreshExpiredTiles:!0,scrollZoom:!0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,trackResize:!0,center:[0,0],zoom:0,bearing:0,pitch:0,renderWorldCopies:!0,maxTileCacheSize:null,maxTileCacheZoomLevels:a.a.MAX_TILE_CACHE_ZOOM_LEVELS,transformRequest:null,transformCameraUpdate:null,fadeDuration:300,crossSourceCollisions:!0,clickTolerance:3,localIdeographFontFamily:"sans-serif",pitchWithRotate:!0,validateStyle:!0,maxCanvasSize:[4096,4096],cancelPendingTileRequestsWhileZooming:!0},nv=E=>{E.touchstart=E.dragStart,E.touchmoveWindow=E.dragMove,E.touchend=E.dragEnd},PO={showCompass:!0,showZoom:!0,visualizePitch:!1};class DO{constructor(u,y,w=!1){this.mousedown=$=>{this.startMouse(a.e({},$,{ctrlKey:!0,preventDefault:()=>$.preventDefault()}),g.mousePos(this.element,$)),g.addEventListener(window,"mousemove",this.mousemove),g.addEventListener(window,"mouseup",this.mouseup)},this.mousemove=$=>{this.moveMouse($,g.mousePos(this.element,$))},this.mouseup=$=>{this.mouseRotate.dragEnd($),this.mousePitch&&this.mousePitch.dragEnd($),this.offTemp()},this.touchstart=$=>{$.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=g.touchPos(this.element,$.targetTouches)[0],this.startTouch($,this._startPos),g.addEventListener(window,"touchmove",this.touchmove,{passive:!1}),g.addEventListener(window,"touchend",this.touchend))},this.touchmove=$=>{$.targetTouches.length!==1?this.reset():(this._lastPos=g.touchPos(this.element,$.targetTouches)[0],this.moveTouch($,this._lastPos))},this.touchend=$=>{$.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),delete this._startPos,delete this._lastPos,this.offTemp()},this.reset=()=>{this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),this.touchRotate.reset(),this.touchPitch&&this.touchPitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()},this._clickTolerance=10;const O=u.dragRotate._mouseRotate.getClickTolerance(),A=u.dragRotate._mousePitch.getClickTolerance();this.element=y,this.mouseRotate=G1({clickTolerance:O,enable:!0}),this.touchRotate=(({enable:$,clickTolerance:z,bearingDegreesPerPixelMoved:U=.8})=>{const G=new zc;return new Cl({clickTolerance:z,move:(H,K)=>({bearingDelta:(K.x-H.x)*U}),moveStateManager:G,enable:$,assignEvents:nv})})({clickTolerance:O,enable:!0}),this.map=u,w&&(this.mousePitch=Y1({clickTolerance:A,enable:!0}),this.touchPitch=(({enable:$,clickTolerance:z,pitchDegreesPerPixelMoved:U=-.5})=>{const G=new zc;return new Cl({clickTolerance:z,move:(H,K)=>({pitchDelta:(K.y-H.y)*U}),moveStateManager:G,enable:$,assignEvents:nv})})({clickTolerance:A,enable:!0})),g.addEventListener(y,"mousedown",this.mousedown),g.addEventListener(y,"touchstart",this.touchstart,{passive:!1}),g.addEventListener(y,"touchcancel",this.reset)}startMouse(u,y){this.mouseRotate.dragStart(u,y),this.mousePitch&&this.mousePitch.dragStart(u,y),g.disableDrag()}startTouch(u,y){this.touchRotate.dragStart(u,y),this.touchPitch&&this.touchPitch.dragStart(u,y),g.disableDrag()}moveMouse(u,y){const w=this.map,{bearingDelta:O}=this.mouseRotate.dragMove(u,y)||{};if(O&&w.setBearing(w.getBearing()+O),this.mousePitch){const{pitchDelta:A}=this.mousePitch.dragMove(u,y)||{};A&&w.setPitch(w.getPitch()+A)}}moveTouch(u,y){const w=this.map,{bearingDelta:O}=this.touchRotate.dragMove(u,y)||{};if(O&&w.setBearing(w.getBearing()+O),this.touchPitch){const{pitchDelta:A}=this.touchPitch.dragMove(u,y)||{};A&&w.setPitch(w.getPitch()+A)}}off(){const u=this.element;g.removeEventListener(u,"mousedown",this.mousedown),g.removeEventListener(u,"touchstart",this.touchstart,{passive:!1}),g.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),g.removeEventListener(window,"touchend",this.touchend),g.removeEventListener(u,"touchcancel",this.reset),this.offTemp()}offTemp(){g.enableDrag(),g.removeEventListener(window,"mousemove",this.mousemove),g.removeEventListener(window,"mouseup",this.mouseup),g.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),g.removeEventListener(window,"touchend",this.touchend)}}let ul;function gs(E,u,y){const w=new a.N(E.lng,E.lat);if(E=new a.N(E.lng,E.lat),u){const O=new a.N(E.lng-360,E.lat),A=new a.N(E.lng+360,E.lat),$=y.locationPoint(E).distSqr(u);y.locationPoint(O).distSqr(u)<$?E=O:y.locationPoint(A).distSqr(u)<$&&(E=A)}for(;Math.abs(E.lng-y.center.lng)>180;){const O=y.locationPoint(E);if(O.x>=0&&O.y>=0&&O.x<=y.width&&O.y<=y.height)break;E.lng>y.center.lng?E.lng-=360:E.lng+=360}return E.lng!==w.lng&&y.locationPoint(E).y>y.height/2-y.getHorizon()?E:w}const qa={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function H0(E,u,y){const w=E.classList;for(const O in qa)w.remove(`maplibregl-${y}-anchor-${O}`);w.add(`maplibregl-${y}-anchor-${u}`)}class K0 extends a.E{constructor(u){if(super(),this._onKeyPress=y=>{const w=y.code,O=y.charCode||y.keyCode;w!=="Space"&&w!=="Enter"&&O!==32&&O!==13||this.togglePopup()},this._onMapClick=y=>{const w=y.originalEvent.target,O=this._element;this._popup&&(w===O||O.contains(w))&&this.togglePopup()},this._update=y=>{var w;if(!this._map)return;const O=this._map.loaded()&&!this._map.isMoving();(y?.type==="terrain"||y?.type==="render"&&!O)&&this._map.once("render",this._update),this._lngLat=this._map.transform.renderWorldCopies?gs(this._lngLat,this._flatPos,this._map.transform):(w=this._lngLat)===null||w===void 0?void 0:w.wrap(),this._flatPos=this._pos=this._map.project(this._lngLat)._add(this._offset),this._map.terrain&&(this._flatPos=this._map.transform.locationPoint(this._lngLat)._add(this._offset));let A="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?A=`rotateZ(${this._rotation}deg)`:this._rotationAlignment==="map"&&(A=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let $="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?$="rotateX(0deg)":this._pitchAlignment==="map"&&($=`rotateX(${this._map.getPitch()}deg)`),this._subpixelPositioning||y&&y.type!=="moveend"||(this._pos=this._pos.round()),g.setTransform(this._element,`${qa[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${$} ${A}`),p.frameAsync(new AbortController).then((()=>{this._updateOpacity(y&&y.type==="moveend")})).catch((()=>{}))},this._onMove=y=>{if(!this._isDragging){const w=this._clickTolerance||this._map._clickTolerance;this._isDragging=y.point.dist(this._pointerdownPos)>=w}this._isDragging&&(this._pos=y.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new a.k("dragstart"))),this.fire(new a.k("drag")))},this._onUp=()=>{this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new a.k("dragend")),this._state="inactive"},this._addDragHandler=y=>{this._element.contains(y.originalEvent.target)&&(y.preventDefault(),this._positionDelta=y.point.sub(this._pos).add(this._offset),this._pointerdownPos=y.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},this._anchor=u&&u.anchor||"center",this._color=u&&u.color||"#3FB1CE",this._scale=u&&u.scale||1,this._draggable=u&&u.draggable||!1,this._clickTolerance=u&&u.clickTolerance||0,this._subpixelPositioning=u&&u.subpixelPositioning||!1,this._isDragging=!1,this._state="inactive",this._rotation=u&&u.rotation||0,this._rotationAlignment=u&&u.rotationAlignment||"auto",this._pitchAlignment=u&&u.pitchAlignment&&u.pitchAlignment!=="auto"?u.pitchAlignment:this._rotationAlignment,this.setOpacity(),this.setOpacity(u?.opacity,u?.opacityWhenCovered),u&&u.element)this._element=u.element,this._offset=a.P.convert(u&&u.offset||[0,0]);else{this._defaultMarker=!0,this._element=g.create("div");const y=g.createNS("http://www.w3.org/2000/svg","svg"),w=41,O=27;y.setAttributeNS(null,"display","block"),y.setAttributeNS(null,"height",`${w}px`),y.setAttributeNS(null,"width",`${O}px`),y.setAttributeNS(null,"viewBox",`0 0 ${O} ${w}`);const A=g.createNS("http://www.w3.org/2000/svg","g");A.setAttributeNS(null,"stroke","none"),A.setAttributeNS(null,"stroke-width","1"),A.setAttributeNS(null,"fill","none"),A.setAttributeNS(null,"fill-rule","evenodd");const $=g.createNS("http://www.w3.org/2000/svg","g");$.setAttributeNS(null,"fill-rule","nonzero");const z=g.createNS("http://www.w3.org/2000/svg","g");z.setAttributeNS(null,"transform","translate(3.0, 29.0)"),z.setAttributeNS(null,"fill","#000000");const U=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(const Le of U){const Ne=g.createNS("http://www.w3.org/2000/svg","ellipse");Ne.setAttributeNS(null,"opacity","0.04"),Ne.setAttributeNS(null,"cx","10.5"),Ne.setAttributeNS(null,"cy","5.80029008"),Ne.setAttributeNS(null,"rx",Le.rx),Ne.setAttributeNS(null,"ry",Le.ry),z.appendChild(Ne)}const G=g.createNS("http://www.w3.org/2000/svg","g");G.setAttributeNS(null,"fill",this._color);const H=g.createNS("http://www.w3.org/2000/svg","path");H.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),G.appendChild(H);const K=g.createNS("http://www.w3.org/2000/svg","g");K.setAttributeNS(null,"opacity","0.25"),K.setAttributeNS(null,"fill","#000000");const le=g.createNS("http://www.w3.org/2000/svg","path");le.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),K.appendChild(le);const pe=g.createNS("http://www.w3.org/2000/svg","g");pe.setAttributeNS(null,"transform","translate(6.0, 7.0)"),pe.setAttributeNS(null,"fill","#FFFFFF");const _e=g.createNS("http://www.w3.org/2000/svg","g");_e.setAttributeNS(null,"transform","translate(8.0, 8.0)");const Ee=g.createNS("http://www.w3.org/2000/svg","circle");Ee.setAttributeNS(null,"fill","#000000"),Ee.setAttributeNS(null,"opacity","0.25"),Ee.setAttributeNS(null,"cx","5.5"),Ee.setAttributeNS(null,"cy","5.5"),Ee.setAttributeNS(null,"r","5.4999962");const Me=g.createNS("http://www.w3.org/2000/svg","circle");Me.setAttributeNS(null,"fill","#FFFFFF"),Me.setAttributeNS(null,"cx","5.5"),Me.setAttributeNS(null,"cy","5.5"),Me.setAttributeNS(null,"r","5.4999962"),_e.appendChild(Ee),_e.appendChild(Me),$.appendChild(z),$.appendChild(G),$.appendChild(K),$.appendChild(pe),$.appendChild(_e),y.appendChild($),y.setAttributeNS(null,"height",w*this._scale+"px"),y.setAttributeNS(null,"width",O*this._scale+"px"),this._element.appendChild(y),this._offset=a.P.convert(u&&u.offset||[0,-14])}if(this._element.classList.add("maplibregl-marker"),this._element.addEventListener("dragstart",(y=>{y.preventDefault()})),this._element.addEventListener("mousedown",(y=>{y.preventDefault()})),H0(this._element,this._anchor,"marker"),u&&u.className)for(const y of u.className.split(" "))this._element.classList.add(y);this._popup=null}addTo(u){return this.remove(),this._map=u,this._element.setAttribute("aria-label",u._getUIString("Marker.Title")),u.getCanvasContainer().appendChild(this._element),u.on("move",this._update),u.on("moveend",this._update),u.on("terrain",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._opacityTimeout&&(clearTimeout(this._opacityTimeout),delete this._opacityTimeout),this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("terrain",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),g.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(u){return this._lngLat=a.N.convert(u),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(u){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),u){if(!("offset"in u.options)){const y=Math.abs(13.5)/Math.SQRT2;u.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[y,-1*(38.1-13.5+y)],"bottom-right":[-y,-1*(38.1-13.5+y)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=u,this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}setSubpixelPositioning(u){return this._subpixelPositioning=u,this}getPopup(){return this._popup}togglePopup(){const u=this._popup;return this._element.style.opacity===this._opacityWhenCovered?this:u?(u.isOpen()?u.remove():(u.setLngLat(this._lngLat),u.addTo(this._map)),this):this}_updateOpacity(u=!1){var y,w;if(!(!((y=this._map)===null||y===void 0)&&y.terrain))return void(this._element.style.opacity!==this._opacity&&(this._element.style.opacity=this._opacity));if(u)this._opacityTimeout=null;else{if(this._opacityTimeout)return;this._opacityTimeout=setTimeout((()=>{this._opacityTimeout=null}),100)}const O=this._map,A=O.terrain.depthAtPoint(this._pos),$=O.terrain.getElevationForLngLatZoom(this._lngLat,O.transform.tileZoom);if(O.transform.lngLatToCameraDepth(this._lngLat,$)-A<.006)return void(this._element.style.opacity=this._opacity);const z=-this._offset.y/O.transform._pixelPerMeter,U=Math.sin(O.getPitch()*Math.PI/180)*z,G=O.terrain.depthAtPoint(new a.P(this._pos.x,this._pos.y-this._offset.y)),H=O.transform.lngLatToCameraDepth(this._lngLat,$+U)-G>.006;!((w=this._popup)===null||w===void 0)&&w.isOpen()&&H&&this._popup.remove(),this._element.style.opacity=H?this._opacityWhenCovered:this._opacity}getOffset(){return this._offset}setOffset(u){return this._offset=a.P.convert(u),this._update(),this}addClassName(u){this._element.classList.add(u)}removeClassName(u){this._element.classList.remove(u)}toggleClassName(u){return this._element.classList.toggle(u)}setDraggable(u){return this._draggable=!!u,this._map&&(u?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(u){return this._rotation=u||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(u){return this._rotationAlignment=u||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(u){return this._pitchAlignment=u&&u!=="auto"?u:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}setOpacity(u,y){return u===void 0&&y===void 0&&(this._opacity="1",this._opacityWhenCovered="0.2"),u!==void 0&&(this._opacity=u),y!==void 0&&(this._opacityWhenCovered=y),this._map&&this._updateOpacity(!0),this}}const V_={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0};let Wm=0,Gm=!1;const jo={maxWidth:100,unit:"metric"};function Ym(E,u,y){const w=y&&y.maxWidth||100,O=E._container.clientHeight/2,A=E.unproject([0,O]),$=E.unproject([w,O]),z=A.distanceTo($);if(y&&y.unit==="imperial"){const U=3.2808*z;U>5280?Sn(u,w,U/5280,E._getUIString("ScaleControl.Miles")):Sn(u,w,U,E._getUIString("ScaleControl.Feet"))}else y&&y.unit==="nautical"?Sn(u,w,z/1852,E._getUIString("ScaleControl.NauticalMiles")):z>=1e3?Sn(u,w,z/1e3,E._getUIString("ScaleControl.Kilometers")):Sn(u,w,z,E._getUIString("ScaleControl.Meters"))}function Sn(E,u,y,w){const O=(function(A){const $=Math.pow(10,`${Math.floor(A)}`.length-1);let z=A/$;return z=z>=10?10:z>=5?5:z>=3?3:z>=2?2:z>=1?1:(function(U){const G=Math.pow(10,Math.ceil(-Math.log(U)/Math.LN10));return Math.round(U*G)/G})(z),$*z})(y);E.style.width=u*(O/y)+"px",E.innerHTML=`${O}&nbsp;${w}`}const Qn={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px",subpixelPositioning:!1},J0=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function ey(E){if(E){if(typeof E=="number"){const u=Math.round(Math.abs(E)/Math.SQRT2);return{center:new a.P(0,0),top:new a.P(0,E),"top-left":new a.P(u,u),"top-right":new a.P(-u,u),bottom:new a.P(0,-E),"bottom-left":new a.P(u,-u),"bottom-right":new a.P(-u,-u),left:new a.P(E,0),right:new a.P(-E,0)}}if(E instanceof a.P||Array.isArray(E)){const u=a.P.convert(E);return{center:u,top:u,"top-left":u,"top-right":u,bottom:u,"bottom-left":u,"bottom-right":u,left:u,right:u}}return{center:a.P.convert(E.center||[0,0]),top:a.P.convert(E.top||[0,0]),"top-left":a.P.convert(E["top-left"]||[0,0]),"top-right":a.P.convert(E["top-right"]||[0,0]),bottom:a.P.convert(E.bottom||[0,0]),"bottom-left":a.P.convert(E["bottom-left"]||[0,0]),"bottom-right":a.P.convert(E["bottom-right"]||[0,0]),left:a.P.convert(E.left||[0,0]),right:a.P.convert(E.right||[0,0])}}return ey(new a.P(0,0))}const Vc=l;o.AJAXError=a.bh,o.Evented=a.E,o.LngLat=a.N,o.MercatorCoordinate=a.Z,o.Point=a.P,o.addProtocol=a.bi,o.config=a.a,o.removeProtocol=a.bj,o.AttributionControl=Uc,o.BoxZoomHandler=fa,o.CanvasSource=Hr,o.CooperativeGesturesHandler=jc,o.DoubleClickZoomHandler=Qc,o.DragPanHandler=Uf,o.DragRotateHandler=np,o.EdgeInsets=$s,o.FullscreenControl=class extends a.E{constructor(E={}){super(),this._onFullscreenChange=()=>{var u;let y=window.document.fullscreenElement||window.document.mozFullScreenElement||window.document.webkitFullscreenElement||window.document.msFullscreenElement;for(;!((u=y?.shadowRoot)===null||u===void 0)&&u.fullscreenElement;)y=y.shadowRoot.fullscreenElement;y===this._container!==this._fullscreen&&this._handleFullscreenChange()},this._onClickFullscreen=()=>{this._isFullscreen()?this._exitFullscreen():this._requestFullscreen()},this._fullscreen=!1,E&&E.container&&(E.container instanceof HTMLElement?this._container=E.container:a.w("Full screen control 'container' must be a DOM element.")),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange")}onAdd(E){return this._map=E,this._container||(this._container=this._map.getContainer()),this._controlContainer=g.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),this._controlContainer}onRemove(){g.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._onFullscreenChange)}_setupUI(){const E=this._fullscreenButton=g.create("button","maplibregl-ctrl-fullscreen",this._controlContainer);g.create("span","maplibregl-ctrl-icon",E).setAttribute("aria-hidden","true"),E.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._onFullscreenChange)}_updateTitle(){const E=this._getTitle();this._fullscreenButton.setAttribute("aria-label",E),this._fullscreenButton.title=E}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_handleFullscreenChange(){this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._updateTitle(),this._fullscreen?(this.fire(new a.k("fullscreenstart")),this._prevCooperativeGesturesEnabled=this._map.cooperativeGestures.isEnabled(),this._map.cooperativeGestures.disable()):(this.fire(new a.k("fullscreenend")),this._prevCooperativeGesturesEnabled&&this._map.cooperativeGestures.enable())}_exitFullscreen(){window.document.exitFullscreen?window.document.exitFullscreen():window.document.mozCancelFullScreen?window.document.mozCancelFullScreen():window.document.msExitFullscreen?window.document.msExitFullscreen():window.document.webkitCancelFullScreen?window.document.webkitCancelFullScreen():this._togglePseudoFullScreen()}_requestFullscreen(){this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen?this._container.webkitRequestFullscreen():this._togglePseudoFullScreen()}_togglePseudoFullScreen(){this._container.classList.toggle("maplibregl-pseudo-fullscreen"),this._handleFullscreenChange(),this._map.resize()}},o.GeoJSONSource=Er,o.GeolocateControl=class extends a.E{constructor(E){super(),this._onSuccess=u=>{if(this._map){if(this._isOutOfMapMaxBounds(u))return this._setErrorState(),this.fire(new a.k("outofmaxbounds",u)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=u,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background");break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(u),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(u),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale"),this.fire(new a.k("geolocate",u)),this._finish()}},this._updateCamera=u=>{const y=new a.N(u.coords.longitude,u.coords.latitude),w=u.coords.accuracy,O=this._map.getBearing(),A=a.e({bearing:O},this.options.fitBoundsOptions),$=Ze.fromLngLat(y,w);this._map.fitBounds($,A,{geolocateSource:!0})},this._updateMarker=u=>{if(u){const y=new a.N(u.coords.longitude,u.coords.latitude);this._accuracyCircleMarker.setLngLat(y).addTo(this._map),this._userLocationDotMarker.setLngLat(y).addTo(this._map),this._accuracy=u.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},this._onZoom=()=>{this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},this._onError=u=>{if(this._map){if(this.options.trackUserLocation)if(u.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const y=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=y,this._geolocateButton.setAttribute("aria-label",y),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(u.code===3&&Gm)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale"),this.fire(new a.k("error",u)),this._finish()}},this._finish=()=>{this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},this._setupUI=()=>{this._map&&(this._container.addEventListener("contextmenu",(u=>u.preventDefault())),this._geolocateButton=g.create("button","maplibregl-ctrl-geolocate",this._container),g.create("span","maplibregl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",this._geolocateButton.disabled=!0)},this._finishSetupUI=u=>{if(this._map){if(u===!1){a.w("Geolocation support is not available so the GeolocateControl will be disabled.");const y=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=y,this._geolocateButton.setAttribute("aria-label",y)}else{const y=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.disabled=!1,this._geolocateButton.title=y,this._geolocateButton.setAttribute("aria-label",y)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=g.create("div","maplibregl-user-location-dot"),this._userLocationDotMarker=new K0({element:this._dotElement}),this._circleElement=g.create("div","maplibregl-user-location-accuracy-circle"),this._accuracyCircleMarker=new K0({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",(()=>this.trigger())),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",(y=>{y.geolocateSource||this._watchState!=="ACTIVE_LOCK"||y.originalEvent&&y.originalEvent.type==="resize"||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this.fire(new a.k("trackuserlocationend")),this.fire(new a.k("userlocationlostfocus")))}))}},this.options=a.e({},V_,E)}onAdd(E){return this._map=E,this._container=g.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),(function(){return a._(this,arguments,void 0,(function*(u=!1){if(ul!==void 0&&!u)return ul;if(window.navigator.permissions===void 0)return ul=!!window.navigator.geolocation,ul;try{ul=(yield window.navigator.permissions.query({name:"geolocation"})).state!=="denied"}catch{ul=!!window.navigator.geolocation}return ul}))})().then((u=>this._finishSetupUI(u))),this._container}onRemove(){this._geolocationWatchID!==void 0&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),g.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,Wm=0,Gm=!1}_isOutOfMapMaxBounds(E){const u=this._map.getMaxBounds(),y=E.coords;return u&&(y.longitude<u.getWest()||y.longitude>u.getEast()||y.latitude<u.getSouth()||y.latitude>u.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"ACTIVE_ERROR":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}}_updateCircleRadius(){const E=this._map.getBounds(),u=E.getSouthEast(),y=E.getNorthEast(),w=u.distanceTo(y),O=Math.ceil(this._accuracy/(w/this._map._container.clientHeight)*2);this._circleElement.style.width=`${O}px`,this._circleElement.style.height=`${O}px`}trigger(){if(!this._setup)return a.w("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new a.k("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":Wm--,Gm=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this.fire(new a.k("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new a.k("trackuserlocationstart")),this.fire(new a.k("userlocationfocus"));break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"OFF":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let E;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),Wm++,Wm>1?(E={maximumAge:6e5,timeout:0},Gm=!0):(E=this.options.positionOptions,Gm=!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,E)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},o.Hash=Ta,o.ImageSource=gi,o.KeyboardHandler=Al,o.LngLatBounds=Ze,o.LogoControl=qf,o.Map=class extends Q_{constructor(E){a.bf.mark(a.bg.create);const u=Object.assign(Object.assign({},Zf),E);if(u.minZoom!=null&&u.maxZoom!=null&&u.minZoom>u.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(u.minPitch!=null&&u.maxPitch!=null&&u.minPitch>u.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(u.minPitch!=null&&u.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(u.maxPitch!=null&&u.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(super(new Fh(u.minZoom,u.maxZoom,u.minPitch,u.maxPitch,u.renderWorldCopies),{bearingSnap:u.bearingSnap}),this._idleTriggered=!1,this._crossFadingFactor=1,this._renderTaskQueue=new Qr,this._controls=[],this._mapId=a.a4(),this._contextLost=y=>{y.preventDefault(),this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this.fire(new a.k("webglcontextlost",{originalEvent:y}))},this._contextRestored=y=>{this._setupPainter(),this.resize(),this._update(),this.fire(new a.k("webglcontextrestored",{originalEvent:y}))},this._onMapScroll=y=>{if(y.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},this._onWindowOnline=()=>{this._update()},this._interactive=u.interactive,this._maxTileCacheSize=u.maxTileCacheSize,this._maxTileCacheZoomLevels=u.maxTileCacheZoomLevels,this._failIfMajorPerformanceCaveat=u.failIfMajorPerformanceCaveat===!0,this._preserveDrawingBuffer=u.preserveDrawingBuffer===!0,this._antialias=u.antialias===!0,this._trackResize=u.trackResize===!0,this._bearingSnap=u.bearingSnap,this._refreshExpiredTiles=u.refreshExpiredTiles===!0,this._fadeDuration=u.fadeDuration,this._crossSourceCollisions=u.crossSourceCollisions===!0,this._collectResourceTiming=u.collectResourceTiming===!0,this._locale=Object.assign(Object.assign({},tv),u.locale),this._clickTolerance=u.clickTolerance,this._overridePixelRatio=u.pixelRatio,this._maxCanvasSize=u.maxCanvasSize,this.transformCameraUpdate=u.transformCameraUpdate,this.cancelPendingTileRequestsWhileZooming=u.cancelPendingTileRequestsWhileZooming===!0,this._imageQueueHandle=B.addThrottleControl((()=>this.isMoving())),this._requestManager=new j(u.transformRequest),typeof u.container=="string"){if(this._container=document.getElementById(u.container),!this._container)throw new Error(`Container '${u.container}' not found.`)}else{if(!(u.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=u.container}if(u.maxBounds&&this.setMaxBounds(u.maxBounds),this._setupContainer(),this._setupPainter(),this.on("move",(()=>this._update(!1))).on("moveend",(()=>this._update(!1))).on("zoom",(()=>this._update(!0))).on("terrain",(()=>{this.painter.terrainFacilitator.dirty=!0,this._update(!0)})).once("idle",(()=>{this._idleTriggered=!0})),typeof window<"u"){addEventListener("online",this._onWindowOnline,!1);let y=!1;const w=jm((O=>{this._trackResize&&!this._removed&&(this.resize(O),this.redraw())}),50);this._resizeObserver=new ResizeObserver((O=>{y?w(O):y=!0})),this._resizeObserver.observe(this._container)}this.handlers=new ev(this,u),this._hash=u.hash&&new Ta(typeof u.hash=="string"&&u.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:u.center,zoom:u.zoom,bearing:u.bearing,pitch:u.pitch}),u.bounds&&(this.resize(),this.fitBounds(u.bounds,a.e({},u.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=u.localIdeographFontFamily,this._validateStyle=u.validateStyle,u.style&&this.setStyle(u.style,{localIdeographFontFamily:u.localIdeographFontFamily}),u.attributionControl&&this.addControl(new Uc(typeof u.attributionControl=="boolean"?void 0:u.attributionControl)),u.maplibreLogo&&this.addControl(new qf,u.logoPosition),this.on("style.load",(()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet)})),this.on("data",(y=>{this._update(y.dataType==="style"),this.fire(new a.k(`${y.dataType}data`,y))})),this.on("dataloading",(y=>{this.fire(new a.k(`${y.dataType}dataloading`,y))})),this.on("dataabort",(y=>{this.fire(new a.k("sourcedataabort",y))}))}_getMapId(){return this._mapId}addControl(E,u){if(u===void 0&&(u=E.getDefaultPosition?E.getDefaultPosition():"top-right"),!E||!E.onAdd)return this.fire(new a.j(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const y=E.onAdd(this);this._controls.push(E);const w=this._controlPositions[u];return u.indexOf("bottom")!==-1?w.insertBefore(y,w.firstChild):w.appendChild(y),this}removeControl(E){if(!E||!E.onRemove)return this.fire(new a.j(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const u=this._controls.indexOf(E);return u>-1&&this._controls.splice(u,1),E.onRemove(this),this}hasControl(E){return this._controls.indexOf(E)>-1}calculateCameraOptionsFromTo(E,u,y,w){return w==null&&this.terrain&&(w=this.terrain.getElevationForLngLatZoom(y,this.transform.tileZoom)),super.calculateCameraOptionsFromTo(E,u,y,w)}resize(E){var u;const y=this._containerDimensions(),w=y[0],O=y[1],A=this._getClampedPixelRatio(w,O);if(this._resizeCanvas(w,O,A),this.painter.resize(w,O,A),this.painter.overLimit()){const z=this.painter.context.gl;this._maxCanvasSize=[z.drawingBufferWidth,z.drawingBufferHeight];const U=this._getClampedPixelRatio(w,O);this._resizeCanvas(w,O,U),this.painter.resize(w,O,U)}this.transform.resize(w,O),(u=this._requestedCameraState)===null||u===void 0||u.resize(w,O);const $=!this._moving;return $&&(this.stop(),this.fire(new a.k("movestart",E)).fire(new a.k("move",E))),this.fire(new a.k("resize",E)),$&&this.fire(new a.k("moveend",E)),this}_getClampedPixelRatio(E,u){const{0:y,1:w}=this._maxCanvasSize,O=this.getPixelRatio(),A=E*O,$=u*O;return Math.min(A>y?y/A:1,$>w?w/$:1)*O}getPixelRatio(){var E;return(E=this._overridePixelRatio)!==null&&E!==void 0?E:devicePixelRatio}setPixelRatio(E){this._overridePixelRatio=E,this.resize()}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(E){return this.transform.setMaxBounds(Ze.convert(E)),this._update()}setMinZoom(E){if((E=E??-2)>=-2&&E<=this.transform.maxZoom)return this.transform.minZoom=E,this._update(),this.getZoom()<E&&this.setZoom(E),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(E){if((E=E??22)>=this.transform.minZoom)return this.transform.maxZoom=E,this._update(),this.getZoom()>E&&this.setZoom(E),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(E){if((E=E??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(E>=0&&E<=this.transform.maxPitch)return this.transform.minPitch=E,this._update(),this.getPitch()<E&&this.setPitch(E),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(E){if((E=E??60)>85)throw new Error("maxPitch must be less than or equal to 85");if(E>=this.transform.minPitch)return this.transform.maxPitch=E,this._update(),this.getPitch()>E&&this.setPitch(E),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(E){return this.transform.renderWorldCopies=E,this._update()}project(E){return this.transform.locationPoint(a.N.convert(E),this.style&&this.terrain)}unproject(E){return this.transform.pointLocation(a.P.convert(E),this.terrain)}isMoving(){var E;return this._moving||((E=this.handlers)===null||E===void 0?void 0:E.isMoving())}isZooming(){var E;return this._zooming||((E=this.handlers)===null||E===void 0?void 0:E.isZooming())}isRotating(){var E;return this._rotating||((E=this.handlers)===null||E===void 0?void 0:E.isRotating())}_createDelegatedListener(E,u,y){if(E==="mouseenter"||E==="mouseover"){let w=!1;return{layers:u,listener:y,delegates:{mousemove:O=>{const A=u.filter((z=>this.getLayer(z))),$=A.length!==0?this.queryRenderedFeatures(O.point,{layers:A}):[];$.length?w||(w=!0,y.call(this,new Ao(E,this,O.originalEvent,{features:$}))):w=!1},mouseout:()=>{w=!1}}}}if(E==="mouseleave"||E==="mouseout"){let w=!1;return{layers:u,listener:y,delegates:{mousemove:O=>{const A=u.filter(($=>this.getLayer($)));(A.length!==0?this.queryRenderedFeatures(O.point,{layers:A}):[]).length?w=!0:w&&(w=!1,y.call(this,new Ao(E,this,O.originalEvent)))},mouseout:O=>{w&&(w=!1,y.call(this,new Ao(E,this,O.originalEvent)))}}}}{const w=O=>{const A=u.filter((z=>this.getLayer(z))),$=A.length!==0?this.queryRenderedFeatures(O.point,{layers:A}):[];$.length&&(O.features=$,y.call(this,O),delete O.features)};return{layers:u,listener:y,delegates:{[E]:w}}}}_saveDelegatedListener(E,u){this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[E]=this._delegatedListeners[E]||[],this._delegatedListeners[E].push(u)}_removeDelegatedListener(E,u,y){if(!this._delegatedListeners||!this._delegatedListeners[E])return;const w=this._delegatedListeners[E];for(let O=0;O<w.length;O++){const A=w[O];if(A.listener===y&&A.layers.length===u.length&&A.layers.every(($=>u.includes($)))){for(const $ in A.delegates)this.off($,A.delegates[$]);return void w.splice(O,1)}}}on(E,u,y){if(y===void 0)return super.on(E,u);const w=this._createDelegatedListener(E,typeof u=="string"?[u]:u,y);this._saveDelegatedListener(E,w);for(const O in w.delegates)this.on(O,w.delegates[O]);return this}once(E,u,y){if(y===void 0)return super.once(E,u);const w=typeof u=="string"?[u]:u,O=this._createDelegatedListener(E,w,y);for(const A in O.delegates){const $=O.delegates[A];O.delegates[A]=(...z)=>{this._removeDelegatedListener(E,w,y),$(...z)}}this._saveDelegatedListener(E,O);for(const A in O.delegates)this.once(A,O.delegates[A]);return this}off(E,u,y){return y===void 0?super.off(E,u):(this._removeDelegatedListener(E,typeof u=="string"?[u]:u,y),this)}queryRenderedFeatures(E,u){if(!this.style)return[];let y;const w=E instanceof a.P||Array.isArray(E),O=w?E:[[0,0],[this.transform.width,this.transform.height]];if(u=u||(w?{}:E)||{},O instanceof a.P||typeof O[0]=="number")y=[a.P.convert(O)];else{const A=a.P.convert(O[0]),$=a.P.convert(O[1]);y=[A,new a.P($.x,A.y),$,new a.P(A.x,$.y),A]}return this.style.queryRenderedFeatures(y,u,this.transform)}querySourceFeatures(E,u){return this.style.querySourceFeatures(E,u)}setStyle(E,u){return(u=a.e({},{localIdeographFontFamily:this._localIdeographFontFamily,validate:this._validateStyle},u)).diff!==!1&&u.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&E?(this._diffStyle(E,u),this):(this._localIdeographFontFamily=u.localIdeographFontFamily,this._updateStyle(E,u))}setTransformRequest(E){return this._requestManager.setTransformRequest(E),this}_getUIString(E){const u=this._locale[E];if(u==null)throw new Error(`Missing UI string '${E}'`);return u}_updateStyle(E,u){if(u.transformStyle&&this.style&&!this.style._loaded)return void this.style.once("style.load",(()=>this._updateStyle(E,u)));const y=this.style&&u.transformStyle?this.style.serialize():void 0;return this.style&&(this.style.setEventedParent(null),this.style._remove(!E)),E?(this.style=new M0(this,u||{}),this.style.setEventedParent(this,{style:this.style}),typeof E=="string"?this.style.loadURL(E,u,y):this.style.loadJSON(E,u,y),this):(delete this.style,this)}_lazyInitEmptyStyle(){this.style||(this.style=new M0(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(E,u){if(typeof E=="string"){const y=this._requestManager.transformRequest(E,"Style");a.h(y,new AbortController).then((w=>{this._updateDiff(w.data,u)})).catch((w=>{w&&this.fire(new a.j(w))}))}else typeof E=="object"&&this._updateDiff(E,u)}_updateDiff(E,u){try{this.style.setState(E,u)&&this._update(!0)}catch(y){a.w(`Unable to perform style diff: ${y.message||y.error||y}.  Rebuilding the style from scratch.`),this._updateStyle(E,u)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():a.w("There is no style added to the map.")}addSource(E,u){return this._lazyInitEmptyStyle(),this.style.addSource(E,u),this._update(!0)}isSourceLoaded(E){const u=this.style&&this.style.sourceCaches[E];if(u!==void 0)return u.loaded();this.fire(new a.j(new Error(`There is no source with ID '${E}'`)))}setTerrain(E){if(this.style._checkLoaded(),this._terrainDataCallback&&this.style.off("data",this._terrainDataCallback),E){const u=this.style.sourceCaches[E.source];if(!u)throw new Error(`cannot load terrain, because there exists no source with ID: ${E.source}`);this.terrain===null&&u.reload();for(const y in this.style._layers){const w=this.style._layers[y];w.type==="hillshade"&&w.source===E.source&&a.w("You are using the same source for a hillshade layer and for 3D terrain. Please consider using two separate sources to improve rendering quality.")}this.terrain=new sp(this.painter,u,E),this.painter.renderToTexture=new j_(this.painter,this.terrain),this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this._terrainDataCallback=y=>{y.dataType==="style"?this.terrain.sourceCache.freeRtt():y.dataType==="source"&&y.tile&&(y.sourceId!==E.source||this._elevationFreeze||(this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this.terrain.sourceCache.freeRtt(y.tile.tileID))},this.style.on("data",this._terrainDataCallback)}else this.terrain&&this.terrain.sourceCache.destruct(),this.terrain=null,this.painter.renderToTexture&&this.painter.renderToTexture.destruct(),this.painter.renderToTexture=null,this.transform.minElevationForCurrentTile=0,this.transform.elevation=0;return this.fire(new a.k("terrain",{terrain:E})),this}getTerrain(){var E,u;return(u=(E=this.terrain)===null||E===void 0?void 0:E.options)!==null&&u!==void 0?u:null}areTilesLoaded(){const E=this.style&&this.style.sourceCaches;for(const u in E){const y=E[u]._tiles;for(const w in y){const O=y[w];if(O.state!=="loaded"&&O.state!=="errored")return!1}}return!0}removeSource(E){return this.style.removeSource(E),this._update(!0)}getSource(E){return this.style.getSource(E)}addImage(E,u,y={}){const{pixelRatio:w=1,sdf:O=!1,stretchX:A,stretchY:$,content:z,textFitWidth:U,textFitHeight:G}=y;if(this._lazyInitEmptyStyle(),!(u instanceof HTMLImageElement||a.b(u))){if(u.width===void 0||u.height===void 0)return this.fire(new a.j(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{const{width:H,height:K,data:le}=u,pe=u;return this.style.addImage(E,{data:new a.R({width:H,height:K},new Uint8Array(le)),pixelRatio:w,stretchX:A,stretchY:$,content:z,textFitWidth:U,textFitHeight:G,sdf:O,version:0,userImage:pe}),pe.onAdd&&pe.onAdd(this,E),this}}{const{width:H,height:K,data:le}=p.getImageData(u);this.style.addImage(E,{data:new a.R({width:H,height:K},le),pixelRatio:w,stretchX:A,stretchY:$,content:z,textFitWidth:U,textFitHeight:G,sdf:O,version:0})}}updateImage(E,u){const y=this.style.getImage(E);if(!y)return this.fire(new a.j(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const w=u instanceof HTMLImageElement||a.b(u)?p.getImageData(u):u,{width:O,height:A,data:$}=w;if(O===void 0||A===void 0)return this.fire(new a.j(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(O!==y.data.width||A!==y.data.height)return this.fire(new a.j(new Error("The width and height of the updated image must be that same as the previous version of the image")));const z=!(u instanceof HTMLImageElement||a.b(u));return y.data.replace($,z),this.style.updateImage(E,y),this}getImage(E){return this.style.getImage(E)}hasImage(E){return E?!!this.style.getImage(E):(this.fire(new a.j(new Error("Missing required image id"))),!1)}removeImage(E){this.style.removeImage(E)}loadImage(E){return B.getImage(this._requestManager.transformRequest(E,"Image"),new AbortController)}listImages(){return this.style.listImages()}addLayer(E,u){return this._lazyInitEmptyStyle(),this.style.addLayer(E,u),this._update(!0)}moveLayer(E,u){return this.style.moveLayer(E,u),this._update(!0)}removeLayer(E){return this.style.removeLayer(E),this._update(!0)}getLayer(E){return this.style.getLayer(E)}getLayersOrder(){return this.style.getLayersOrder()}setLayerZoomRange(E,u,y){return this.style.setLayerZoomRange(E,u,y),this._update(!0)}setFilter(E,u,y={}){return this.style.setFilter(E,u,y),this._update(!0)}getFilter(E){return this.style.getFilter(E)}setPaintProperty(E,u,y,w={}){return this.style.setPaintProperty(E,u,y,w),this._update(!0)}getPaintProperty(E,u){return this.style.getPaintProperty(E,u)}setLayoutProperty(E,u,y,w={}){return this.style.setLayoutProperty(E,u,y,w),this._update(!0)}getLayoutProperty(E,u){return this.style.getLayoutProperty(E,u)}setGlyphs(E,u={}){return this._lazyInitEmptyStyle(),this.style.setGlyphs(E,u),this._update(!0)}getGlyphs(){return this.style.getGlyphsUrl()}addSprite(E,u,y={}){return this._lazyInitEmptyStyle(),this.style.addSprite(E,u,y,(w=>{w||this._update(!0)})),this}removeSprite(E){return this._lazyInitEmptyStyle(),this.style.removeSprite(E),this._update(!0)}getSprite(){return this.style.getSprite()}setSprite(E,u={}){return this._lazyInitEmptyStyle(),this.style.setSprite(E,u,(y=>{y||this._update(!0)})),this}setLight(E,u={}){return this._lazyInitEmptyStyle(),this.style.setLight(E,u),this._update(!0)}getLight(){return this.style.getLight()}setSky(E){return this._lazyInitEmptyStyle(),this.style.setSky(E),this._update(!0)}getSky(){return this.style.getSky()}setFeatureState(E,u){return this.style.setFeatureState(E,u),this._update()}removeFeatureState(E,u){return this.style.removeFeatureState(E,u),this._update()}getFeatureState(E){return this.style.getFeatureState(E)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let E=0,u=0;return this._container&&(E=this._container.clientWidth||400,u=this._container.clientHeight||300),[E,u]}_setupContainer(){const E=this._container;E.classList.add("maplibregl-map");const u=this._canvasContainer=g.create("div","maplibregl-canvas-container",E);this._interactive&&u.classList.add("maplibregl-interactive"),this._canvas=g.create("canvas","maplibregl-canvas",u),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex",this._interactive?"0":"-1"),this._canvas.setAttribute("aria-label",this._getUIString("Map.Title")),this._canvas.setAttribute("role","region");const y=this._containerDimensions(),w=this._getClampedPixelRatio(y[0],y[1]);this._resizeCanvas(y[0],y[1],w);const O=this._controlContainer=g.create("div","maplibregl-control-container",E),A=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(($=>{A[$]=g.create("div",`maplibregl-ctrl-${$} `,O)})),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(E,u,y){this._canvas.width=Math.floor(y*E),this._canvas.height=Math.floor(y*u),this._canvas.style.width=`${E}px`,this._canvas.style.height=`${u}px`}_setupPainter(){const E={alpha:!0,stencil:!0,depth:!0,failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1};let u=null;this._canvas.addEventListener("webglcontextcreationerror",(w=>{u={requestedAttributes:E},w&&(u.statusMessage=w.statusMessage,u.type=w.type)}),{once:!0});const y=this._canvas.getContext("webgl2",E)||this._canvas.getContext("webgl",E);if(!y){const w="Failed to initialize WebGL";throw u?(u.message=w,new Error(JSON.stringify(u))):new Error(w)}this.painter=new xn(y,this.transform),b.testSupport(y)}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(E){return this.style&&this.style._loaded?(this._styleDirty=this._styleDirty||E,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(E){return this._update(),this._renderTaskQueue.add(E)}_cancelRenderFrame(E){this._renderTaskQueue.remove(E)}_render(E){const u=this._idleTriggered?this._fadeDuration:0;if(this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(E),this._removed)return;let y=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;const O=this.transform.zoom,A=p.now();this.style.zoomHistory.update(O,A);const $=new a.z(O,{now:A,fadeDuration:u,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),z=$.crossFadingFactor();z===1&&z===this._crossFadingFactor||(y=!0,this._crossFadingFactor=z),this.style.update($)}this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.terrain?(this.terrain.sourceCache.update(this.transform,this.terrain),this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this._elevationFreeze||(this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))):(this.transform.minElevationForCurrentTile=0,this.transform.elevation=0),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,u,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:u,showPadding:this.showPadding}),this.fire(new a.k("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,a.bf.mark(a.bg.load),this.fire(new a.k("load"))),this.style&&(this.style.hasTransitions()||y)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles();const w=this._sourcesDirty||this._styleDirty||this._placementDirty;return w||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new a.k("idle")),!this._loaded||this._fullyLoaded||w||(this._fullyLoaded=!0,a.bf.mark(a.bg.fullLoad)),this}redraw(){return this.style&&(this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._render(0)),this}remove(){var E;this._hash&&this._hash.remove();for(const y of this._controls)y.onRemove(this);this._controls=[],this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof window<"u"&&removeEventListener("online",this._onWindowOnline,!1),B.removeThrottleControl(this._imageQueueHandle),(E=this._resizeObserver)===null||E===void 0||E.disconnect();const u=this.painter.context.gl.getExtension("WEBGL_lose_context");u?.loseContext&&u.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),g.remove(this._canvasContainer),g.remove(this._controlContainer),this._container.classList.remove("maplibregl-map"),a.bf.clearMetrics(),this._removed=!0,this.fire(new a.k("remove"))}triggerRepaint(){this.style&&!this._frameRequest&&(this._frameRequest=new AbortController,p.frameAsync(this._frameRequest).then((E=>{a.bf.frame(E),this._frameRequest=null,this._render(E)})).catch((()=>{})))}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(E){this._showTileBoundaries!==E&&(this._showTileBoundaries=E,this._update())}get showPadding(){return!!this._showPadding}set showPadding(E){this._showPadding!==E&&(this._showPadding=E,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(E){this._showCollisionBoxes!==E&&(this._showCollisionBoxes=E,E?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(E){this._showOverdrawInspector!==E&&(this._showOverdrawInspector=E,this._update())}get repaint(){return!!this._repaint}set repaint(E){this._repaint!==E&&(this._repaint=E,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(E){this._vertices=E,this._update()}get version(){return U_}getCameraTargetElevation(){return this.transform.elevation}},o.MapMouseEvent=Ao,o.MapTouchEvent=Bf,o.MapWheelEvent=N_,o.Marker=K0,o.NavigationControl=class{constructor(E){this._updateZoomButtons=()=>{const u=this._map.getZoom(),y=u===this._map.getMaxZoom(),w=u===this._map.getMinZoom();this._zoomInButton.disabled=y,this._zoomOutButton.disabled=w,this._zoomInButton.setAttribute("aria-disabled",y.toString()),this._zoomOutButton.setAttribute("aria-disabled",w.toString())},this._rotateCompassArrow=()=>{const u=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${this._map.transform.angle*(180/Math.PI)}deg)`:`rotate(${this._map.transform.angle*(180/Math.PI)}deg)`;this._compassIcon.style.transform=u},this._setButtonTitle=(u,y)=>{const w=this._map._getUIString(`NavigationControl.${y}`);u.title=w,u.setAttribute("aria-label",w)},this.options=a.e({},PO,E),this._container=g.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._container.addEventListener("contextmenu",(u=>u.preventDefault())),this.options.showZoom&&(this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in",(u=>this._map.zoomIn({},{originalEvent:u}))),g.create("span","maplibregl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out",(u=>this._map.zoomOut({},{originalEvent:u}))),g.create("span","maplibregl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(this._compass=this._createButton("maplibregl-ctrl-compass",(u=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:u}):this._map.resetNorth({},{originalEvent:u})})),this._compassIcon=g.create("span","maplibregl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}onAdd(E){return this._map=E,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new DO(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){g.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(E,u){const y=g.create("button",E,this._container);return y.type="button",y.addEventListener("click",u),y}},o.Popup=class extends a.E{constructor(E){super(),this.remove=()=>(this._content&&g.remove(this._content),this._container&&(g.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),this._map._canvasContainer.classList.remove("maplibregl-track-pointer"),delete this._map,this.fire(new a.k("close"))),this),this._onMouseUp=u=>{this._update(u.point)},this._onMouseMove=u=>{this._update(u.point)},this._onDrag=u=>{this._update(u.point)},this._update=u=>{var y;if(!this._map||!this._lngLat&&!this._trackPointer||!this._content)return;if(!this._container){if(this._container=g.create("div","maplibregl-popup",this._map.getContainer()),this._tip=g.create("div","maplibregl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className)for(const z of this.options.className.split(" "))this._container.classList.add(z);this._closeButton&&this._closeButton.setAttribute("aria-label",this._map._getUIString("Popup.Close")),this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer")}if(this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._lngLat=this._map.transform.renderWorldCopies&&!this._trackPointer?gs(this._lngLat,this._flatPos,this._map.transform):(y=this._lngLat)===null||y===void 0?void 0:y.wrap(),this._trackPointer&&!u)return;const w=this._flatPos=this._pos=this._trackPointer&&u?u:this._map.project(this._lngLat);this._map.terrain&&(this._flatPos=this._trackPointer&&u?u:this._map.transform.locationPoint(this._lngLat));let O=this.options.anchor;const A=ey(this.options.offset);if(!O){const z=this._container.offsetWidth,U=this._container.offsetHeight;let G;G=w.y+A.bottom.y<U?["top"]:w.y>this._map.transform.height-U?["bottom"]:[],w.x<z/2?G.push("left"):w.x>this._map.transform.width-z/2&&G.push("right"),O=G.length===0?"bottom":G.join("-")}let $=w.add(A[O]);this.options.subpixelPositioning||($=$.round()),g.setTransform(this._container,`${qa[O]} translate(${$.x}px,${$.y}px)`),H0(this._container,O,"popup")},this._onClose=()=>{this.remove()},this.options=a.e(Object.create(Qn),E)}addTo(E){return this._map&&this.remove(),this._map=E,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")):this._map.on("move",this._update),this.fire(new a.k("open")),this}isOpen(){return!!this._map}getLngLat(){return this._lngLat}setLngLat(E){return this._lngLat=a.N.convert(E),this._pos=null,this._flatPos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._flatPos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")),this}getElement(){return this._container}setText(E){return this.setDOMContent(document.createTextNode(E))}setHTML(E){const u=document.createDocumentFragment(),y=document.createElement("body");let w;for(y.innerHTML=E;w=y.firstChild,w;)u.appendChild(w);return this.setDOMContent(u)}getMaxWidth(){var E;return(E=this._container)===null||E===void 0?void 0:E.style.maxWidth}setMaxWidth(E){return this.options.maxWidth=E,this._update(),this}setDOMContent(E){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=g.create("div","maplibregl-popup-content",this._container);return this._content.appendChild(E),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(E){return this._container&&this._container.classList.add(E),this}removeClassName(E){return this._container&&this._container.classList.remove(E),this}setOffset(E){return this.options.offset=E,this._update(),this}toggleClassName(E){if(this._container)return this._container.classList.toggle(E)}setSubpixelPositioning(E){this.options.subpixelPositioning=E}_createCloseButton(){this.options.closeButton&&(this._closeButton=g.create("button","maplibregl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const E=this._container.querySelector(J0);E&&E.focus()}},o.RasterDEMTileSource=qn,o.RasterTileSource=An,o.ScaleControl=class{constructor(E){this._onMove=()=>{Ym(this._map,this._container,this.options)},this.setUnit=u=>{this.options.unit=u,Ym(this._map,this._container,this.options)},this.options=Object.assign(Object.assign({},jo),E)}getDefaultPosition(){return"bottom-left"}onAdd(E){return this._map=E,this._container=g.create("div","maplibregl-ctrl maplibregl-ctrl-scale",E.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){g.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}},o.ScrollZoomHandler=du,o.Style=M0,o.TerrainControl=class{constructor(E){this._toggleTerrain=()=>{this._map.getTerrain()?this._map.setTerrain(null):this._map.setTerrain(this.options),this._updateTerrainIcon()},this._updateTerrainIcon=()=>{this._terrainButton.classList.remove("maplibregl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled"),this._map.terrain?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.Disable")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.Enable"))},this.options=E}onAdd(E){return this._map=E,this._container=g.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._terrainButton=g.create("button","maplibregl-ctrl-terrain",this._container),g.create("span","maplibregl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){g.remove(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}},o.TwoFingersTouchPitchHandler=Us,o.TwoFingersTouchRotateHandler=K1,o.TwoFingersTouchZoomHandler=H1,o.TwoFingersTouchZoomRotateHandler=Vf,o.VectorTileSource=Fn,o.VideoSource=fs,o.addSourceType=(E,u)=>a._(void 0,void 0,void 0,(function*(){if(ei(E))throw new Error(`A source type called "${E}" already exists.`);((y,w)=>{uo[y]=w})(E,u)})),o.clearPrewarmedResources=function(){const E=Yt;E&&(E.isPreloaded()&&E.numActive()===1?(E.release(wt),Yt=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},o.getMaxParallelImageRequests=function(){return a.a.MAX_PARALLEL_IMAGE_REQUESTS},o.getRTLTextPluginStatus=function(){return js().getRTLTextPluginStatus()},o.getVersion=function(){return Vc},o.getWorkerCount=function(){return ot.workerCount},o.getWorkerUrl=function(){return a.a.WORKER_URL},o.importScriptInWorkers=function(E){return Dn().broadcast("IS",E)},o.prewarm=function(){Ot().acquire(wt)},o.setMaxParallelImageRequests=function(E){a.a.MAX_PARALLEL_IMAGE_REQUESTS=E},o.setRTLTextPlugin=function(E,u){return js().setRTLTextPlugin(E,u)},o.setWorkerCount=function(E){ot.workerCount=E},o.setWorkerUrl=function(E){a.a.WORKER_URL=E}}));var s=n;return s}))})(cL)),cL.exports}var SBe=OBe();const kBe=Xue(SBe);function jz(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function Gue(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function nA(){}var sC=.7,lP=1/sC,Rw="\\s*([+-]?\\d+)\\s*",oC="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",nm="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",CBe=/^#([0-9a-f]{3,8})$/,ABe=new RegExp(`^rgb\\(${Rw},${Rw},${Rw}\\)$`),EBe=new RegExp(`^rgb\\(${nm},${nm},${nm}\\)$`),TBe=new RegExp(`^rgba\\(${Rw},${Rw},${Rw},${oC}\\)$`),PBe=new RegExp(`^rgba\\(${nm},${nm},${nm},${oC}\\)$`),DBe=new RegExp(`^hsl\\(${oC},${nm},${nm}\\)$`),IBe=new RegExp(`^hsla\\(${oC},${nm},${nm},${oC}\\)$`),iW={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};jz(nA,Uz,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:sW,formatHex:sW,formatHex8:MBe,formatHsl:RBe,formatRgb:oW,toString:oW});function sW(){return this.rgb().formatHex()}function MBe(){return this.rgb().formatHex8()}function RBe(){return Hue(this).formatHsl()}function oW(){return this.rgb().formatRgb()}function Uz(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=CBe.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?aW(e):n===3?new _c(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?$4(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?$4(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=ABe.exec(t))?new _c(e[1],e[2],e[3],1):(e=EBe.exec(t))?new _c(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=TBe.exec(t))?$4(e[1],e[2],e[3],e[4]):(e=PBe.exec(t))?$4(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=DBe.exec(t))?cW(e[1],e[2]/100,e[3]/100,1):(e=IBe.exec(t))?cW(e[1],e[2]/100,e[3]/100,e[4]):iW.hasOwnProperty(t)?aW(iW[t]):t==="transparent"?new _c(NaN,NaN,NaN,0):null}function aW(t){return new _c(t>>16&255,t>>8&255,t&255,1)}function $4(t,e,n,r){return r<=0&&(t=e=n=NaN),new _c(t,e,n,r)}function FBe(t){return t instanceof nA||(t=Uz(t)),t?(t=t.rgb(),new _c(t.r,t.g,t.b,t.opacity)):new _c}function Yue(t,e,n,r){return arguments.length===1?FBe(t):new _c(t,e,n,r??1)}function _c(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}jz(_c,Yue,Gue(nA,{brighter(t){return t=t==null?lP:Math.pow(lP,t),new _c(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?sC:Math.pow(sC,t),new _c(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new _c(Ob(this.r),Ob(this.g),Ob(this.b),uP(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:lW,formatHex:lW,formatHex8:LBe,formatRgb:uW,toString:uW}));function lW(){return`#${hb(this.r)}${hb(this.g)}${hb(this.b)}`}function LBe(){return`#${hb(this.r)}${hb(this.g)}${hb(this.b)}${hb((isNaN(this.opacity)?1:this.opacity)*255)}`}function uW(){const t=uP(this.opacity);return`${t===1?"rgb(":"rgba("}${Ob(this.r)}, ${Ob(this.g)}, ${Ob(this.b)}${t===1?")":`, ${t})`}`}function uP(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function Ob(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function hb(t){return t=Ob(t),(t<16?"0":"")+t.toString(16)}function cW(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new vd(t,e,n,r)}function Hue(t){if(t instanceof vd)return new vd(t.h,t.s,t.l,t.opacity);if(t instanceof nA||(t=Uz(t)),!t)return new vd;if(t instanceof vd)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),s=Math.max(e,n,r),o=NaN,a=s-i,l=(s+i)/2;return a?(e===s?o=(n-r)/a+(n<r)*6:n===s?o=(r-e)/a+2:o=(e-n)/a+4,a/=l<.5?s+i:2-s-i,o*=60):a=l>0&&l<1?0:o,new vd(o,a,l,t.opacity)}function $Be(t,e,n,r){return arguments.length===1?Hue(t):new vd(t,e,n,r??1)}function vd(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}jz(vd,$Be,Gue(nA,{brighter(t){return t=t==null?lP:Math.pow(lP,t),new vd(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?sC:Math.pow(sC,t),new vd(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new _c(GR(t>=240?t-240:t+120,i,r),GR(t,i,r),GR(t<120?t+240:t-120,i,r),this.opacity)},clamp(){return new vd(hW(this.h),B4(this.s),B4(this.l),uP(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=uP(this.opacity);return`${t===1?"hsl(":"hsla("}${hW(this.h)}, ${B4(this.s)*100}%, ${B4(this.l)*100}%${t===1?")":`, ${t})`}`}}));function hW(t){return t=(t||0)%360,t<0?t+360:t}function B4(t){return Math.max(0,Math.min(1,t||0))}function GR(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const fW=["#1f77b4","#ff7f0e","#2ca02c","#d62728","#9467bd","#8c564b","#e377c2","#7f7f7f","#bcbd22","#17becf"],N4=["#1f77b4","#aec7e8","#ff7f0e","#ffbb78","#2ca02c","#98df8a","#d62728","#ff9896","#9467bd","#c5b0d5","#8c564b","#c49c94","#e377c2","#f7b6d2","#7f7f7f","#c7c7c7","#bcbd22","#dbdb8d","#17becf","#9edae5"];function A2(t){if(t<1&&(t=1),t<=fW.length)return fW.slice(0,t);if(t<=N4.length)return N4.slice(0,t);{let e=[];for(let n=0;n<t;n++)e[n]=N4[n%N4.length];return e}}function Vz(t){let{r:e,g:n,b:r,opacity:i}=Yue(t);return{r:e/255,g:n/255,b:r/255,a:i}}function Kue(){return[1,0,0,0,1,0,0,0,1]}function qz(t,e){return[t[0]*e[0]+t[3]*e[1]+t[6]*e[2],t[1]*e[0]+t[4]*e[1]+t[7]*e[2],t[2]*e[0]+t[5]*e[1]+t[8]*e[2],t[0]*e[3]+t[3]*e[4]+t[6]*e[5],t[1]*e[3]+t[4]*e[4]+t[7]*e[5],t[2]*e[3]+t[5]*e[4]+t[8]*e[5],t[0]*e[6]+t[3]*e[7]+t[6]*e[8],t[1]*e[6]+t[4]*e[7]+t[7]*e[8],t[2]*e[6]+t[5]*e[7]+t[8]*e[8]]}function Jue(t,e){return[e[0]*t[0]+e[3]*t[1]+e[6]*t[2],e[1]*t[0]+e[4]*t[1]+e[7]*t[2],e[2]*t[0]+e[5]*t[1]+e[8]*t[2]]}function BBe(t){return t[0]*t[4]*t[8]-t[0]*t[5]*t[7]-t[1]*t[3]*t[8]+t[1]*t[5]*t[6]+t[2]*t[3]*t[7]-t[2]*t[4]*t[6]}function ece(t){let e=BBe(t);return[(t[4]*t[8]-t[5]*t[7])/e,(t[2]*t[7]-t[1]*t[8])/e,(t[1]*t[5]-t[2]*t[4])/e,(t[5]*t[6]-t[3]*t[8])/e,(t[0]*t[8]-t[2]*t[6])/e,(t[2]*t[3]-t[0]*t[5])/e,(t[3]*t[7]-t[4]*t[6])/e,(t[1]*t[6]-t[0]*t[7])/e,(t[0]*t[4]-t[1]*t[3])/e]}class pc{viewport;width;height;isGis;_matrix=[0,0,0,0,0,0,0,0,0];_pixel_kx=0;_pixel_bx=0;_pixel_ky=0;_pixel_by=0;constructor(e,n,r,i=!1){this.viewport=e,this.width=n,this.height=r,this.isGis=i,this.updateCoefficients()}static projectLat(e){const n=e*Math.PI/180;return Math.log(Math.tan(Math.PI/4+n/2))*180/Math.PI}static unprojectLat(e){const n=e*Math.PI/180;return(2*Math.atan(Math.exp(n))-Math.PI/2)*(180/Math.PI)}update(e,n,r,i){this.viewport=e,this.width=n,this.height=r,i!==void 0&&(this.isGis=i),this.updateCoefficients()}updateCoefficients(){let{x:e,y:n,scale:r}=this.viewport,i=r,s=r;this.width<this.height?i*=this.height/this.width:s*=this.width/this.height,this._matrix=[i,0,0,0,s,0,-e*i,-n*s,1],this._pixel_kx=this._matrix[0]*this.width/2,this._pixel_bx=(this._matrix[6]+1)*this.width/2,this._pixel_ky=-this._matrix[4]*this.height/2,this._pixel_by=(-this._matrix[7]+1)*this.height/2}matrix(){return this._matrix}scale(){return Math.abs(this._pixel_kx)}pixelLocation(e,n){const r=this.isGis?pc.projectLat(n):n;return{x:e*this._pixel_kx+this._pixel_bx,y:r*this._pixel_ky+this._pixel_by}}coordinateAtPixel(e,n){const r=(e-this._pixel_bx)/this._pixel_kx,i=(n-this._pixel_by)/this._pixel_ky;return{x:r,y:this.isGis?pc.unprojectLat(i):i}}pixelLocationFunction(){let e=this._pixel_kx,n=this._pixel_ky,r=this._pixel_bx,i=this._pixel_by,s=this.isGis;return(o,a)=>{const l=s?pc.projectLat(a):a;return{x:o*e+r,y:l*n+i}}}coordinateAtPixelFunction(){let e=this._pixel_kx,n=this._pixel_ky,r=this._pixel_bx,i=this._pixel_by,s=this.isGis;return(o,a)=>{const l=(o-r)/e,h=(a-i)/n;return{x:l,y:s?pc.unprojectLat(h):h}}}}class hL{_needsRun=!0;_inputs=new Set;_targets=new Set;constructor(e=[]){this._inputs=new Set(e);for(let n of this._inputs)n._targets.add(this)}addInput(e){this._inputs.add(e),e._targets.add(this)}removeInput(e){e._targets.delete(this),this._inputs.delete(e)}run(){if(this._needsRun){for(let e of this._inputs)e.run();this.update(),this._needsRun=!1}}setNeedsRunDownstream(){for(let e of this._targets)e._needsRun||(e._needsRun=!0,e.setNeedsRunDownstream())}update(){}destroy(){for(let e of this._inputs)e._targets.delete(this)}}let pO=class extends hL{_value=null;setValue(t){this._value!==t&&(this._value=t,this.setNeedsRunDownstream())}get value(){return this.run(),this._value}};class tce extends pO{constructor(e){super([]),this.setValue(e)}get value(){return super.value}set value(e){this.setValue(e)}}let NBe=class extends pO{fn;constructor(e,n){super(n),this.fn=e}update(){this.setValue(this.fn())}};class zBe extends pO{fn;state;constructor(e,n){super(n),this.fn=e,this.state={}}update(){this.setValue(this.fn(this.state))}destroy(){super.destroy(),this.state.destroy&&this.state.destroy(),this.state={}}}class QBe extends pO{parent;condition;buildTrue;buildFalse;context=null;currentCondition=null;currentNode=null;constructor(e,n,r,i){super([n]),this.parent=e,this.condition=n,this.buildTrue=r,this.buildFalse=i}update(){(this.currentNode==null||this.currentCondition!==this.condition.value)&&(this.currentNode&&this.removeInput(this.currentNode),this.context?.destroy(),this.context=new v_(this.parent),this.currentCondition=this.condition.value,this.currentCondition?this.currentNode=this.buildTrue(this.context):this.currentNode=this.buildFalse(this.context),this.addInput(this.currentNode)),this.setValue(this.currentNode.value)}destroy(){super.destroy(),this.context?.destroy()}}class jBe extends pO{parent;input;build;cache;constructor(e,n,r){super([n]),this.parent=e,this.input=n,this.build=r,this.cache=new Map}update(){let e=new Set,n=this.input.value.map(r=>{if(e.add(r),this.cache.has(r)){let i=this.cache.get(r);return i.input.value=r,i.output.value}else{let i=new v_(this.parent),s=new tce(r),o=this.build(i,s);return this.cache.set(r,{context:i,input:s,output:o}),this.addInput(o),o.value}});for(let[r,i]of this.cache)e.has(r)||(this.cache.delete(r),this.removeInput(i.output),i.context.destroy());this.setValue(n)}destroy(){super.destroy();for(let e of this.cache.values())e.context.destroy()}}class UBe extends pO{parent;input;cases;currentCase=null;currentNode=null;currentContext=null;constructor(e,n,r){super([n]),this.parent=e,this.input=n,this.cases=r}update(){(this.currentNode==null||this.input.value!==this.currentCase)&&(this.currentNode&&this.removeInput(this.currentNode),this.currentContext?.destroy(),this.currentContext=new v_(this.parent),this.currentCase=this.input.value,this.currentNode=this.cases[this.currentCase](this.currentContext),this.addInput(this.currentNode)),this.setValue(this.currentNode.value)}destroy(){super.destroy(),this.currentContext?.destroy()}}class v_{_children;_nodes;constructor(e=null){this._children=new Set,this._nodes=new Set,e?._children.add(this)}destroy(){for(let e of this._children)e.destroy();for(let e of this._nodes)e.destroy();this._children.clear(),this._nodes.clear()}value(e){let n=new tce(e);return this._nodes.add(n),n}derive(e,n){let r=e.map(s=>s instanceof hL?s:this.value(s)),i=new NBe(()=>n(...r.map(s=>s.value)),r);return this._nodes.add(i),i}statefulDerive(e,n){let r=e.map(s=>s instanceof hL?s:this.value(s)),i=new zBe(s=>n(s,...r.map(o=>o.value)),r);return this._nodes.add(i),i}if(e,n,r){let i=new QBe(this,e,n,r);return this._nodes.add(i),i}switch(e,n){let r=new UBe(this,e,n);return this._nodes.add(r),r}map(e,n){let r=new jBe(this,e,n);return this._nodes.add(r),r}assertNotNull(e){return e}subgraph(){return new v_(this)}}function gm(t,e,n,r){if(t.program==null||t.vsSource!=n||t.fsSource!=r){t.destroy&&t.destroy();let s=dW(e,e.VERTEX_SHADER,n),o=dW(e,e.FRAGMENT_SHADER,r),a=e.createProgram();if(e.attachShader(a,s),e.attachShader(a,o),e.linkProgram(a),!e.getProgramParameter(a,e.LINK_STATUS)){var i=e.getProgramInfoLog(a);throw new Error(`failed to link program: ${i}, vertex source: ${n}, fragment source: ${r}`)}t.program=a,t.vsSource=n,t.fsSource=r,t.destroy=()=>{e.deleteProgram(a),e.deleteShader(s),e.deleteShader(o)},t.uniforms={};for(let l of(n+r).matchAll(/uniform +[0-9a-zA-Z_]+ +([0-9a-zA-Z_]+) *(;|\[)/g)){let h=l[1];t.uniforms[h]=e.getUniformLocation(a,h)}}return{program:t.program,uniforms:t.uniforms??{}}}function dW(t,e,n){let r=t.createShader(e);if(t.shaderSource(r,n),t.compileShader(r),!t.getShaderParameter(r,t.COMPILE_STATUS)){var i=t.getShaderInfoLog(r);throw new Error(`failed to compile shader: ${i}, source: ${n}`)}return r}function rm(t,e,n,r){if(t.buffer==null){let i=e.createBuffer();t.buffer=i,t.destroy=()=>{e.deleteBuffer(i)}}if(t.data!==n){if(t.data=n,e.bindBuffer(e.ARRAY_BUFFER,t.buffer),n instanceof Array)switch(r??"f32"){case"f32":e.bufferData(e.ARRAY_BUFFER,new Float32Array(n),e.STATIC_DRAW);break;case"i32":e.bufferData(e.ARRAY_BUFFER,new Int32Array(n),e.STATIC_DRAW);break;case"u32":e.bufferData(e.ARRAY_BUFFER,new Uint32Array(n),e.STATIC_DRAW);break;case"i16":e.bufferData(e.ARRAY_BUFFER,new Int16Array(n),e.STATIC_DRAW);break;case"u16":e.bufferData(e.ARRAY_BUFFER,new Uint16Array(n),e.STATIC_DRAW);break;case"i8":e.bufferData(e.ARRAY_BUFFER,new Int8Array(n),e.STATIC_DRAW);break;case"u8":e.bufferData(e.ARRAY_BUFFER,new Uint8Array(n),e.STATIC_DRAW);break;default:throw new Error("invalid type")}else e.bufferData(e.ARRAY_BUFFER,n,e.STATIC_DRAW);e.bindBuffer(e.ARRAY_BUFFER,null)}return t.buffer}function VBe(t,e,n,r,i){const s={u8:{1:[t.R8,t.RED,t.UNSIGNED_BYTE],2:[t.RG8,t.RG,t.UNSIGNED_BYTE],3:[t.RGB8,t.RGB,t.UNSIGNED_BYTE],4:[t.RGBA8,t.RGBA,t.UNSIGNED_BYTE]},u16:{1:[t.R8,t.RED,t.UNSIGNED_SHORT],2:[t.RG8,t.RG,t.UNSIGNED_SHORT],3:[t.RGB8,t.RGB,t.UNSIGNED_SHORT],4:[t.RGBA8,t.RGBA,t.UNSIGNED_SHORT]},u32:{1:[t.R8,t.RED,t.UNSIGNED_INT],2:[t.RG8,t.RG,t.UNSIGNED_INT],3:[t.RGB8,t.RGB,t.UNSIGNED_INT],4:[t.RGBA8,t.RGBA,t.UNSIGNED_INT]},f32:{1:[t.R32F,t.RED,t.FLOAT],2:[t.RG32F,t.RG,t.FLOAT],3:[t.RGB32F,t.RGB,t.FLOAT],4:[t.RGBA32F,t.RGBA,t.FLOAT]}};let[o,a,l]=s[i][r];t.texImage2D(t.TEXTURE_2D,0,o,e,n,0,a,l,null),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE)}function Ly(t,e,n,r,i,s){if(t.framebuffer==null||t.texture==null){let a=e.createFramebuffer(),l=e.createTexture();e.bindFramebuffer(e.FRAMEBUFFER,a),e.bindTexture(e.TEXTURE_2D,l),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,l,0),e.bindTexture(e.TEXTURE_2D,null),e.bindFramebuffer(e.FRAMEBUFFER,null),t.framebuffer=a,t.texture=l,t.destroy=()=>{e.deleteFramebuffer(a),e.deleteTexture(l)}}let o=`${n},${r},${i},${s}`;return t.cacheKey!=o&&(t.cacheKey=o,e.bindTexture(e.TEXTURE_2D,t.texture),VBe(e,n,r,i,s),e.bindTexture(e.TEXTURE_2D,null)),{framebuffer:t.framebuffer,texture:t.texture,width:n,height:r}}function qBe(t){let e=t.squareMaxSize,n=t.samples,r=`#version 300 es
    precision highp float;
    layout(location=0) in vec2 xy;
    out vec2 uv;
    void main() {
      gl_Position = vec4(xy, 0, 1);
      uv = (xy + 1.0) / 2.0;
    }
  `,i=`#version 300 es
    precision highp float;
    uniform sampler2D image;
    uniform vec2 resolution;
    uniform vec2 direction;
    in vec2 uv;
    out vec4 outColor;
    void main() {
      vec4 color = vec4(0.0);
      const int count = ${e};
      int i = -count;
      while(i + 1 <= count) {
        color += texture(image, uv + direction * (float(i) + 0.5) / resolution) * 2.0;
        i += 2;
      }
      if (i <= count) {
        color += texture(image, uv + direction * float(count) / resolution);
      }
      outColor = color;
    }
  `,s=`#version 300 es
    precision highp float;
    uniform sampler2D image;
    uniform sampler2D imageBox;
    uniform vec2 resolution;
    uniform float scaler;
    in vec2 uv;
    out vec4 outColor;

    void main() {
      vec4 color = texture(imageBox, uv);
      if (color != vec4(0.0)) {
        ${n.map(({x:o,y:a,w:l})=>`color -= texture(image, uv + vec2(${o.toFixed(8)}, ${a.toFixed(8)}) / resolution) * (${l.toFixed(8)})`).join(";")};
      }
      outColor = color * scaler;
    }
  `;return{vertex:r,fragment1:i,fragment2:s}}function ZBe(t,e,n){let r=t.derive([n],XBe),i=t.derive([r],qBe),s=t.statefulDerive([e,t.derive([i],l=>l.vertex),t.derive([i],l=>l.fragment1)],gm),o=t.statefulDerive([e,t.derive([i],l=>l.vertex),t.derive([i],l=>l.fragment2)],gm),a=t.statefulDerive([e,[-1,-1,-1,1,1,-1,1,1],"f32"],rm);return t.derive([e,a,s,o,n,r],(l,h,f,p,g,b)=>(x,k,T)=>{let{width:I,height:M}=k;l.disable(l.BLEND),l.enableVertexAttribArray(0),l.bindBuffer(l.ARRAY_BUFFER,h),l.vertexAttribPointer(0,2,l.FLOAT,!1,0,0),l.bindBuffer(l.ARRAY_BUFFER,null),l.useProgram(f.program),l.uniform2f(f.uniforms.resolution,I,M),l.uniform1i(f.uniforms.image,0),l.bindFramebuffer(l.FRAMEBUFFER,k.framebuffer),l.bindTexture(l.TEXTURE_2D,x),l.uniform2f(f.uniforms.direction,0,1),l.drawArrays(l.TRIANGLE_STRIP,0,4),l.bindFramebuffer(l.FRAMEBUFFER,T.framebuffer),l.bindTexture(l.TEXTURE_2D,k.texture),l.uniform2f(f.uniforms.direction,1,0),l.drawArrays(l.TRIANGLE_STRIP,0,4),l.bindFramebuffer(l.FRAMEBUFFER,k.framebuffer),l.activeTexture(l.TEXTURE1),l.bindTexture(l.TEXTURE_2D,T.texture),l.activeTexture(l.TEXTURE0),l.bindTexture(l.TEXTURE_2D,x),l.useProgram(p.program),l.uniform2f(p.uniforms.resolution,I,M),l.uniform1i(p.uniforms.image,0),l.uniform1i(p.uniforms.imageBox,1);let B=1/b.totalWeight*g*g*Math.PI;l.uniform1f(p.uniforms.scaler,B),l.drawArrays(l.TRIANGLE_STRIP,0,4),l.bindFramebuffer(l.FRAMEBUFFER,null),l.useProgram(null),l.activeTexture(l.TEXTURE1),l.bindTexture(l.TEXTURE_2D,null),l.activeTexture(l.TEXTURE0),l.bindTexture(l.TEXTURE_2D,null),l.disableVertexAttribArray(0)})}function pW(t,e,n){let r=Math.sqrt(e*e+n*n);if(r<t-Math.sqrt(2)/2)return 1;if(r>t+Math.sqrt(2)/2)return 0;let i=2,s=0;for(let o=0;o<i;o++)for(let a=0;a<i;a++){let l=e+(o+.5)/i-.5,h=n+(a+.5)/i-.5;Math.sqrt(l*l+h*h)<t&&(s+=1)}return s/i/i}function XBe(t){let e=Math.floor(t+.5),n=e,r=pW(t,0,0),i=[];for(let a=-e;a<=e;a++)for(let l=-e;l<=e;l++){let h=r-pW(t,a,l);if(!(h<=0))if(i.length>0&&a==i[i.length-1].x&&l==i[i.length-1].y+1){let f=i[i.length-1].w,p=h;i[i.length-1].y+=1-f/(f+p),i[i.length-1].w=f+p}else i.push({x:a,y:l,w:h})}i=i.sort((a,l)=>a.y!=l.y?a.y-l.y:a.x-l.x);let s=[];for(let{x:a,y:l,w:h}of i)if(s.length>0&&l==s[s.length-1].y&&a==s[s.length-1].x+1){let f=s[s.length-1].w,p=h;s[s.length-1].x+=1-f/(f+p),s[s.length-1].w=f+p}else s.push({x:a,y:l,w:h});let o=-s.reduce((a,l)=>a+l.w,0);return o+=r*(1+n*2)*(1+n*2),{squareMaxSize:n,squareWeight:r,samples:s,totalWeight:o}}function WBe(t){let e;return t?e=`#version 300 es
      precision highp float;
      uniform mat3 matrix;
      layout(location=0) in float x;
      layout(location=1) in float y;
      layout(location=2) in int category;
      out vec4 color;
      void main() {
        gl_Position = vec4(matrix * vec3(x, y, 1), 1);
        if (category == 0) {
          color = vec4(1, 0, 0, 0);
        } else if (category == 1) {
          color = vec4(0, 1, 0, 0);
        } else if (category == 2) {
          color = vec4(0, 0, 1, 0);
        } else if (category == 3) {
          color = vec4(0, 0, 0, 1);
        }
        gl_PointSize = 1.0;
      }
    `:e=`#version 300 es
      precision highp float;
      uniform mat3 matrix;
      layout(location=0) in float x;
      layout(location=1) in float y;
      out vec4 color;
      void main() {
        gl_Position = vec4(matrix * vec3(x, y, 1), 1);
        color = vec4(1, 0, 0, 0);
        gl_PointSize = 1.0;
      }
    `,{vertex:e,fragment:`#version 300 es
    precision highp float;
    in vec4 color;
    out vec4 outColor;
    void main() {
      outColor = color;
    }
  `}}function fL(t,e,n,r,i,s){let o=i!=null,a=WBe(o),l=t.statefulDerive([e,a.vertex,a.fragment],gm);return t.derive([e,l,n,r,i,s],(h,f,p,g,b,x)=>k=>{h.enable(h.BLEND),h.blendFunc(h.ONE,h.ONE),h.useProgram(f.program),h.enableVertexAttribArray(0),h.bindBuffer(h.ARRAY_BUFFER,p),h.vertexAttribPointer(0,1,h.FLOAT,!1,0,0),h.enableVertexAttribArray(1),h.bindBuffer(h.ARRAY_BUFFER,g),h.vertexAttribPointer(1,1,h.FLOAT,!1,0,0),b!=null&&(h.enableVertexAttribArray(2),h.bindBuffer(h.ARRAY_BUFFER,b),h.vertexAttribIPointer(2,1,h.BYTE,0,0)),h.bindBuffer(h.ARRAY_BUFFER,null),h.uniformMatrix3fv(f.uniforms.matrix,!1,k),h.drawArrays(h.POINTS,0,x),h.disableVertexAttribArray(0),h.disableVertexAttribArray(1),b!=null&&h.disableVertexAttribArray(2),h.useProgram(null)})}function GBe(){return{vertex:`#version 300 es
    precision highp float;
    uniform vec2 xyScaler;
    layout(location=0) in vec2 xy;
    out vec2 uv;
    void main() {
      gl_Position = vec4(xy * xyScaler, 0, 1);
      uv = (xy + 1.0) / 2.0;
    }
  `,fragment:`#version 300 es
    precision highp float;
    uniform sampler2D source;
    uniform float gamma;
    in vec2 uv;
    out vec4 outColor;
    void main() {
      vec4 color = texture(source, uv);
      color.rgb = pow(color.rgb, vec3(1.0 / gamma));
      outColor = color;
    }
  `}}function nce(t,e){let{vertex:n,fragment:r}=GBe(),i=t.statefulDerive([e,n,r],gm),s=t.statefulDerive([e,[-1,-1,-1,1,1,-1,1,1],"f32"],rm);return t.derive([e,i,s],(o,a,l)=>(h,f,p,g)=>{o.disable(o.BLEND),o.enableVertexAttribArray(0),o.bindBuffer(o.ARRAY_BUFFER,l),o.vertexAttribPointer(0,2,o.FLOAT,!1,0,0),o.bindBuffer(o.ARRAY_BUFFER,null),o.bindTexture(o.TEXTURE_2D,h),o.useProgram(a.program),o.uniform1i(a.uniforms.source,0),o.uniform2f(a.uniforms.xyScaler,p??1,g??1),o.uniform1f(a.uniforms.gamma,f??2.2),o.drawArrays(o.TRIANGLE_STRIP,0,4),o.useProgram(null),o.bindTexture(o.TEXTURE_2D,null),o.disableVertexAttribArray(0)})}function rce(t){return Math.ceil(t*3)}function YBe(t){let e=rce(t),n=[];for(let a=-e;a<=e;a++)n.push(Math.exp(-a*a/t/t/2));let r=n.reduce((a,l)=>a+l,0);n=n.map(a=>a/r);let i=KBe(n).map(([a,l])=>[a-e,l]),s=`#version 300 es
    precision highp float;
    layout(location=0) in vec2 xy;
    out vec2 uv;
    void main() {
      gl_Position = vec4(xy, 0, 1);
      uv = (xy + 1.0) / 2.0;
    }
  `,o=`#version 300 es
    precision highp float;
    uniform sampler2D image;
    uniform vec2 resolution;
    uniform vec2 direction;
    in vec2 uv;
    out vec4 outColor;

    void main() {
      vec4 color = vec4(0.0);
      ${i.map(([a,l])=>`color += texture(image, uv + direction * vec2(${a.toFixed(10)}) / resolution) * ${l.toFixed(10)};`).join(`
`)}
      outColor = color;
    }
  `;return{vertex:s,fragment:o}}function HBe(t,e,n){let r=t.derive([n],YBe),i=t.statefulDerive([e,t.derive([r],o=>o.vertex),t.derive([r],o=>o.fragment)],gm),s=t.statefulDerive([e,[-1,-1,-1,1,1,-1,1,1],"f32"],rm);return t.derive([e,s,i,n],(o,a,l,h)=>(f,p,g)=>{let{width:b,height:x}=p;o.disable(o.BLEND),o.enableVertexAttribArray(0),o.bindBuffer(o.ARRAY_BUFFER,a),o.vertexAttribPointer(0,2,o.FLOAT,!1,0,0),o.bindBuffer(o.ARRAY_BUFFER,null),o.useProgram(l.program),o.uniform2f(l.uniforms.resolution,b,x),o.uniform1i(l.uniforms.image,0),o.bindFramebuffer(o.FRAMEBUFFER,g.framebuffer),o.bindTexture(o.TEXTURE_2D,f),o.uniform2f(l.uniforms.direction,0,1),o.drawArrays(o.TRIANGLE_STRIP,0,4),o.bindFramebuffer(o.FRAMEBUFFER,p.framebuffer),o.bindTexture(o.TEXTURE_2D,g.texture),o.uniform2f(l.uniforms.direction,1,0),o.drawArrays(o.TRIANGLE_STRIP,0,4),o.bindFramebuffer(o.FRAMEBUFFER,null),o.useProgram(null),o.bindTexture(o.TEXTURE_2D,null),o.disableVertexAttribArray(0)})}function KBe(t){let e=[];for(let n=0;n<t.length;n+=2)if(n+1<t.length){let r=t[n],i=t[n+1],s=1-r/(r+i);if(s>=0&&s<=1){let o=r+i;o!=0&&e.push([n+s,o])}else e.push([n,t[n]]),e.push([n+1,t[n+1]])}else e.push([n,t[n]]);return e}function JBe(t){return Math.ceil(t*3)}function eNe(){return{vertex:`#version 300 es
    precision highp float;
    layout(location=0) in vec2 xy;
    out vec2 uv;
    void main() {
      gl_Position = vec4(xy, 0, 1);
      uv = (xy + 1.0) / 2.0;
    }
  `,fragment:`#version 300 es
    precision highp float;
    uniform sampler2D image;
    uniform vec2 resolution;
    uniform vec2 direction;
    in vec2 uv;
    out vec4 outColor;

    uniform float weight0;
    uniform vec3 distances;
    uniform vec3 weights;

    void main() {
      vec4 color = texture(image, uv) * weight0;
      if (weights.x != 0.0) {
        color += texture(image, uv + direction * vec2(distances.x) / resolution) * weights.x;
        color += texture(image, uv - direction * vec2(distances.x) / resolution) * weights.x;
      }
      if (weights.y != 0.0) {
        color += texture(image, uv + direction * vec2(distances.y) / resolution) * weights.y;
        color += texture(image, uv - direction * vec2(distances.y) / resolution) * weights.y;
      }
      if (weights.z != 0.0) {
        color += texture(image, uv + direction * vec2(distances.z) / resolution) * weights.z;
        color += texture(image, uv - direction * vec2(distances.z) / resolution) * weights.z;
      }
      outColor = color;
    }
  `}}function tNe(t,e,n){let{vertex:r,fragment:i}=eNe(),s=t.statefulDerive([e,r,i],gm),o=t.statefulDerive([e,[-1,-1,-1,1,1,-1,1,1],"f32"],rm);return t.derive([e,o,s],(a,l,h)=>(f,p,g)=>{let{width:b,height:x}=p;a.disable(a.BLEND),a.enableVertexAttribArray(0),a.bindBuffer(a.ARRAY_BUFFER,l),a.vertexAttribPointer(0,2,a.FLOAT,!1,0,0),a.bindBuffer(a.ARRAY_BUFFER,null),a.useProgram(h.program),a.uniform2f(h.uniforms.resolution,b,x),a.uniform1i(h.uniforms.image,0);let k=f,T=g,I=p;for(let M=0;M<2;M++){a.uniform2f(h.uniforms.direction,M,1-M);for(let[B,j,Q]of nNe){a.bindFramebuffer(a.FRAMEBUFFER,T.framebuffer),a.bindTexture(a.TEXTURE_2D,k),a.uniform1fv(h.uniforms.weight0,j),a.uniform3fv(h.uniforms.distances,B),a.uniform3fv(h.uniforms.weights,Q),a.drawArrays(a.TRIANGLE_STRIP,0,4),k=T.texture;let Z=T;T=I,I=Z}}a.bindFramebuffer(a.FRAMEBUFFER,null),a.useProgram(null),a.bindTexture(a.TEXTURE_2D,null),a.disableVertexAttribArray(0)})}const nNe=[[[1,2,3],[.2288468365182578],[.18230006506971572,.1356122230111784,.06766429365997693]],[[2,6,10],[.09116254014100238],[.23317759354726447,.18385867277788717,.03738246360434722]],[[3,10,20],[.2950645715317288],[.010918865853671198,.23773695670296047,.10381189167750389]],[[4,16,30],[.20085957073474772],[.14463019087130788,.17934533765938643,.07559468610193185]]];function rNe(){return{vertex:`#version 300 es
    precision highp float;
    layout(location=0) in vec2 xy;
    out vec2 uv;
    void main() {
      gl_Position = vec4(xy, 0, 1);
      uv = (xy + 1.0) / 2.0;
    }
  `,fragment:`#version 300 es
    precision highp float;
    uniform sampler2D source;
    uniform vec2 resolution;
    uniform float densityScaler;
    uniform float quantizationStep;
    uniform vec4 channelMask;
    uniform vec4 color;
    uniform float globalAlpha;

    in vec2 uv;
    out vec4 outColor;

    float sample_density(vec2 uv) {
      float d = dot(texture(source, uv), channelMask) * densityScaler;
      d = min(1.0, max(0.0, d));
      d = floor(d / quantizationStep);
      return d;
    }

    void main() {
      // Run the Sobel operator.
      float v = sample_density(uv);
      float v11 = sample_density(uv + vec2(-1, -1) / resolution);
      float v12 = sample_density(uv + vec2(-1,  0) / resolution);
      float v13 = sample_density(uv + vec2(-1, +1) / resolution);
      float v21 = sample_density(uv + vec2( 0, -1) / resolution);
      float v23 = sample_density(uv + vec2( 0, +1) / resolution);
      float v31 = sample_density(uv + vec2(+1, -1) / resolution);
      float v32 = sample_density(uv + vec2(+1,  0) / resolution);
      float v33 = sample_density(uv + vec2(+1, +1) / resolution);
      float gx = v11 + v12 * 2.0 + v13 - v31 - v32 * 2.0 - v33;
      float gy = v11 + v21 * 2.0 + v31 - v13 - v23 * 2.0 - v33;
      // Derive alpha value from the result.
      float alpha = length(vec2(gx, gy)) * 0.2;
      alpha = min(1.0, max(0.0, alpha));
      outColor = color * alpha * globalAlpha;
    }
  `}}function iNe(t,e){let{vertex:n,fragment:r}=rNe(),i=t.statefulDerive([e,n,r],gm),s=t.statefulDerive([e,[-1,-1,-1,1,1,-1,1,1],"f32"],rm);return t.derive([e,i,s],(o,a,l)=>(h,f,p,g,b,x)=>{o.enable(o.BLEND),o.blendFunc(o.ONE,o.ONE_MINUS_SRC_ALPHA),o.enableVertexAttribArray(0),o.bindBuffer(o.ARRAY_BUFFER,l),o.vertexAttribPointer(0,2,o.FLOAT,!1,0,0),o.bindBuffer(o.ARRAY_BUFFER,null),o.bindTexture(o.TEXTURE_2D,h.texture),o.useProgram(a.program),o.uniform1i(a.uniforms.source,0),o.uniform2f(a.uniforms.resolution,h.width,h.height),o.uniform1f(a.uniforms.densityScaler,f),o.uniform1f(a.uniforms.quantizationStep,p),o.uniform1f(a.uniforms.globalAlpha,g),o.uniform4fv(a.uniforms.channelMask,b),o.uniform4fv(a.uniforms.color,x),o.drawArrays(o.TRIANGLE_STRIP,0,4),o.useProgram(null),o.bindTexture(o.TEXTURE_2D,null),o.disableVertexAttribArray(0)})}function sNe(){return{vertex:`#version 300 es
    precision highp float;
    layout(location=0) in vec2 xy;
    out vec2 uv;
    void main() {
      gl_Position = vec4(xy, 0, 1);
      uv = (xy + 1.0) / 2.0;
    }
    `,fragment:`#version 300 es
    precision highp float;
    uniform sampler2D source;
    uniform vec2 resolution;
    uniform float densityScaler;
    uniform float quantizationStep;

    uniform mat4 colorMatrix;
    uniform int isDarkMode;
    uniform float globalAlpha;

    in vec2 uv;
    out vec4 outColor;

    /* Combine alphas with symmetric blending equation f(a, b) = a + b - ab. */
    float combine_alphas(vec4 alphas) {
      float r = alphas.x + alphas.y - alphas.x * alphas.y;
      r = r + alphas.z - r * alphas.z;
      r = r + alphas.w - r * alphas.w;
      return r;
    }

    void main() {
      vec4 density = texture(source, uv) * densityScaler;

      if (density.x > 1.0 || density.y > 1.0 || density.z > 1.0 || density.w > 1.0) {
        density = density / max(max(max(density.x, density.y), density.z), density.w);
      } else {
        density = floor(density / quantizationStep) * quantizationStep;
      }

      if (density.x + density.y + density.z + density.w == 0.0) {
        discard;
      }

      float alpha = combine_alphas(density);

      density *= alpha / (density.x + density.y + density.z + density.w);

      vec3 c1 = colorMatrix[0].rgb * density.x;
      vec3 c2 = colorMatrix[1].rgb * density.y;
      vec3 c3 = colorMatrix[2].rgb * density.z;
      vec3 c4 = colorMatrix[3].rgb * density.w;
      vec3 c;

      if (isDarkMode == 0) {
        c = vec3(1.0) - alpha + c1 + c2 + c3 + c4;
      } else {
        c = c1 + c2 + c3 + c4;
      }

      outColor = vec4(c, 1.0) * alpha * globalAlpha;
    }
  `}}function oNe(t,e){let{vertex:n,fragment:r}=sNe(),i=t.statefulDerive([e,n,r],gm),s=t.statefulDerive([e,[-1,-1,-1,1,1,-1,1,1],"f32"],rm);return t.derive([e,i,s],(o,a,l)=>(h,f,p,g,b,x)=>{o.enable(o.BLEND),o.blendFunc(o.ONE,o.ONE_MINUS_SRC_ALPHA),o.enableVertexAttribArray(0),o.bindBuffer(o.ARRAY_BUFFER,l),o.vertexAttribPointer(0,2,o.FLOAT,!1,0,0),o.bindBuffer(o.ARRAY_BUFFER,null),o.bindTexture(o.TEXTURE_2D,h.texture),o.useProgram(a.program),o.uniform1i(a.uniforms.source,0),o.uniform2f(a.uniforms.resolution,h.width,h.height),o.uniform1f(a.uniforms.densityScaler,f),o.uniform1f(a.uniforms.quantizationStep,p),o.uniform1f(a.uniforms.globalAlpha,g),o.uniform1i(a.uniforms.isDarkMode,x=="dark"?1:0),o.uniformMatrix4fv(a.uniforms.colorMatrix,!1,b),o.drawArrays(o.TRIANGLE_STRIP,0,4),o.useProgram(null),o.bindTexture(o.TEXTURE_2D,null),o.disableVertexAttribArray(0)})}function aNe(t){let e;return t?e=`#version 300 es
      precision highp float;
      uniform mat3 matrix;
      uniform float point_size;
      uniform float alpha;
      uniform vec4 colorScheme[64];

      layout(location=0) in float x;
      layout(location=1) in float y;
      layout(location=2) in int category;

      out vec4 color;

      void main() {
        gl_Position = vec4(matrix * vec3(x, y, 1), 1);
        if (category < 64) {
          color = colorScheme[category];
        } else {
          color = vec4(0.5, 0.5, 0.5, 1);
        }
        color *= alpha;
        gl_PointSize = point_size;
      }
    `:e=`#version 300 es
      precision highp float;
      uniform mat3 matrix;
      uniform float point_size;
      uniform vec4 colorScheme;
      uniform float alpha;

      layout(location=0) in float x;
      layout(location=1) in float y;

      out vec4 color;

      void main() {
        gl_Position = vec4(matrix * vec3(x, y, 1), 1);
        color = colorScheme;
        color *= alpha;
        gl_PointSize = point_size;
      }
    `,{vertex:e,fragment:`#version 300 es
    precision highp float;
    uniform float point_size;
    in vec4 color;
    out vec4 outColor;
    void main() {
      float r = length(gl_PointCoord.xy - vec2(0.5, 0.5)) * point_size;
      float a = max(0.0, min(1.0, point_size / 2.0 - r));
      outColor = color * a;
    }
  `}}function mW(t,e,n,r,i,s){let o=i!=null,a=aNe(o),l=t.statefulDerive([e,a.vertex,a.fragment],gm);return t.derive([e,l,n,r,i,s],(h,f,p,g,b,x)=>(k,T,I,M)=>{h.enable(h.BLEND),h.blendFunc(h.ONE,h.ONE_MINUS_SRC_ALPHA),h.useProgram(f.program),h.enableVertexAttribArray(0),h.bindBuffer(h.ARRAY_BUFFER,p),h.vertexAttribPointer(0,1,h.FLOAT,!1,0,0),h.enableVertexAttribArray(1),h.bindBuffer(h.ARRAY_BUFFER,g),h.vertexAttribPointer(1,1,h.FLOAT,!1,0,0),b!=null&&(h.enableVertexAttribArray(2),h.bindBuffer(h.ARRAY_BUFFER,b),h.vertexAttribIPointer(2,1,h.BYTE,0,0)),h.bindBuffer(h.ARRAY_BUFFER,null),h.uniformMatrix3fv(f.uniforms.matrix,!1,k),h.uniform1f(f.uniforms.point_size,T*2),h.uniform1f(f.uniforms.alpha,I),o?h.uniform4fv(f.uniforms.colorScheme,M):h.uniform4fv(f.uniforms.colorScheme,M.slice(0,4)),h.drawArrays(h.POINTS,0,x),h.disableVertexAttribArray(0),h.disableVertexAttribArray(1),b!=null&&h.disableVertexAttribArray(2),h.useProgram(null)})}function lNe(){return{vertex:`#version 300 es
    precision highp float;
    layout(location=0) in vec2 xy;
    out vec2 uv;
    void main() {
      gl_Position = vec4(xy, 0, 1);
      uv = (xy + 1.0) / 2.0;
    }
  `,fragment:`#version 300 es
    precision highp float;
    uniform sampler2D source;
    uniform vec2 resolution;
    uniform mat4 colorMatrix;
    uniform float pointAlpha;
    uniform float globalAlpha;
    uniform int isDarkMode;
    in vec2 uv;
    out vec4 outColor;

    /* Combine alphas with symmetric blending equation f(a, b) = a + b - ab. */
    float combine_alphas(vec4 alphas) {
      float r = alphas.x + alphas.y - alphas.x * alphas.y;
      r = r + alphas.z - r * alphas.z;
      r = r + alphas.w - r * alphas.w;
      return r;
    }

    void main() {
      vec4 count = texture(source, uv);
      vec4 alphas = pointAlpha >= 0.999
        ? vec4(count.x > 0.0 ? 1.0 : 0.0, count.y > 0.0 ? 1.0 : 0.0, count.z > 0.0 ? 1.0 : 0.0, count.w > 0.0 ? 1.0 : 0.0)
        : vec4(1.0) - pow(vec4(1.0 - pointAlpha), count);
      float a = combine_alphas(alphas);
      if (a <= 0.0) { discard; }
      alphas *= a / (alphas.x + alphas.y + alphas.z + alphas.w);

      vec3 c1 = colorMatrix[0].rgb * alphas.x;
      vec3 c2 = colorMatrix[1].rgb * alphas.y;
      vec3 c3 = colorMatrix[2].rgb * alphas.z;
      vec3 c4 = colorMatrix[3].rgb * alphas.w;
      vec3 c;
      if (isDarkMode == 0) {
        c = vec3(1.0) - a + c1 + c2 + c3 + c4;
      } else {
        c = c1 + c2 + c3 + c4;
      }
      outColor = vec4(c, 1.0) * a * globalAlpha;
    }
  `}}function uNe(t,e){let{vertex:n,fragment:r}=lNe(),i=t.statefulDerive([e,n,r],gm),s=t.statefulDerive([e,[-1,-1,-1,1,1,-1,1,1],"f32"],rm);return t.derive([e,i,s],(o,a,l)=>(h,f,p,g,b)=>{o.enable(o.BLEND),o.blendFunc(o.ONE,o.ONE_MINUS_SRC_ALPHA),o.enableVertexAttribArray(0),o.bindBuffer(o.ARRAY_BUFFER,l),o.vertexAttribPointer(0,2,o.FLOAT,!1,0,0),o.bindBuffer(o.ARRAY_BUFFER,null),o.bindTexture(o.TEXTURE_2D,h.texture),o.useProgram(a.program),o.uniform1i(a.uniforms.source,0),o.uniform2f(a.uniforms.resolution,h.width,h.height),o.uniform1f(a.uniforms.pointAlpha,f),o.uniform1f(a.uniforms.globalAlpha,p),o.uniform1i(a.uniforms.isDarkMode,b=="dark"?1:0),o.uniformMatrix4fv(a.uniforms.colorMatrix,!1,g),o.drawArrays(o.TRIANGLE_STRIP,0,4),o.useProgram(null),o.bindTexture(o.TEXTURE_2D,null),o.disableVertexAttribArray(0)})}class cNe{props;viewport;df;gl;renderInputs;dataBuffers;renderer;constructor(e,n,r){this.props={mode:"points",colorScheme:"light",x:new Float32Array,y:new Float32Array,category:null,categoryCount:1,categoryColors:null,viewportX:0,viewportY:0,viewportScale:1,pointSize:1,pointAlpha:1,pointsAlpha:1,densityScaler:1,densityBandwidth:1,densityQuantizationStep:.1,contoursAlpha:1,densityAlpha:1,gamma:2.2,width:n,height:r,downsampleMaxPoints:4e6,downsampleDensityWeight:5,isGis:!1},this.viewport=new pc({x:0,y:0,scale:1},n,r);let i=new v_,s=i.value(e);this.df=i,this.gl=s,this.renderInputs={mode:i.value(this.props.mode),colorScheme:i.value(this.props.colorScheme),xData:i.value(this.props.x),yData:i.value(this.props.y),categoryData:i.value(this.props.category),categoryCount:i.value(this.props.categoryCount),matrix:i.value(Kue()),width:i.value(n),height:i.value(r),pointSize:i.value(this.props.pointSize),densityBandwidth:i.value(this.props.densityBandwidth),downsampleMaxPoints:i.value(this.props.downsampleMaxPoints),downsampleDensityWeight:i.value(this.props.downsampleDensityWeight)},this.dataBuffers=hNe(i,s,this.renderInputs),this.renderer=fNe(i,s,this.renderInputs,this.dataBuffers)}setProps(e){let n=!1,r;for(r in e)e[r]!==this.props[r]&&(this.props[r]=e[r],n=!0);return this.viewport.update({x:this.props.viewportX,y:this.props.viewportY,scale:this.props.viewportScale},this.props.width,this.props.height,this.props.isGis),this.renderInputs.mode.value=this.props.mode,this.renderInputs.colorScheme.value=this.props.colorScheme,this.renderInputs.xData.value=this.props.x,this.renderInputs.yData.value=this.props.y,this.renderInputs.categoryData.value=this.props.category,this.props.category!=null?this.renderInputs.categoryCount.value=this.props.categoryCount:this.renderInputs.categoryCount.value=1,this.renderInputs.matrix.value=this.viewport.matrix(),this.renderInputs.width.value=this.props.width,this.renderInputs.height.value=this.props.height,this.renderInputs.pointSize.value=this.props.pointSize,this.renderInputs.densityBandwidth.value=this.props.densityBandwidth,this.renderInputs.downsampleMaxPoints.value=this.props.downsampleMaxPoints,this.renderInputs.downsampleDensityWeight.value=this.props.downsampleDensityWeight,n}render(){this.renderer.value(this.props)}destroy(){this.df.destroy()}async densityMap(e,n,r,i){let s=this.df.subgraph(),o=mNe(s,this.gl,this.dataBuffers,s.value(e),s.value(n),s.value(r)),{x:a,y:l,scale:h}=i,f=[h,0,0,0,h,0,-a*h,-l*h,1],p=o.value(f),g=ece(f),b=this.props.isGis;return s.destroy(),{data:p,width:e,height:n,coordinateAtPixel:(x,k)=>{let T=x/e*2-1,I=k/n*2-1,M=Jue([T,I,1],g);return{x:M[0],y:b?pc.unprojectLat(M[1]):M[1]}}}}}function hNe(t,e,n){const r=t.statefulDerive([e,n.xData,"f32"],rm),i=t.statefulDerive([e,n.yData,"f32"],rm),s=t.if(t.derive([n.categoryData],a=>a!=null),a=>a.statefulDerive([e,a.assertNotNull(n.categoryData),"u8"],rm),a=>a.value(null)),o=t.derive([n.xData],a=>a.length);return{x:r,y:i,category:s,count:o}}function fNe(t,e,n,r){return t.switch(n.mode,{points:i=>dNe(i,e,n,r),density:i=>pNe(i,e,n,r)})}function dNe(t,e,n,r){const i=t.derive([n.categoryCount],l=>l>1),s=t.statefulDerive([e,n.width,n.height,4,"f32"],Ly);let o=t.if(i,l=>mW(l,e,r.x,r.y,l.assertNotNull(r.category),r.count),l=>mW(l,e,r.x,r.y,null,r.count)),a=nce(t,e);return t.derive([e,s,o,a,n.colorScheme,n.matrix,n.categoryCount],(l,h,f,p,g,b,x)=>k=>{let T=[],I=k.categoryColors??A2(k.categoryCount);for(let M=0;M<x;M++)if(M<I.length){let{r:B,g:j,b:Q}=Vz(I[M]);B=Math.pow(B,k.gamma),j=Math.pow(j,k.gamma),Q=Math.pow(Q,k.gamma),T=T.concat([B,j,Q,1])}else T=T.concat([.5,.5,.5,1]);l.bindFramebuffer(l.FRAMEBUFFER,h.framebuffer),l.viewport(0,0,h.width,h.height),l.clearColor(0,0,0,0),l.clear(l.COLOR_BUFFER_BIT),f(b,Math.max(3,k.pointSize),k.pointAlpha*k.pointsAlpha,T),l.bindFramebuffer(l.FRAMEBUFFER,null),l.viewport(0,0,k.width,k.height),p(h.texture,k.gamma)})}function pNe(t,e,n,r){let i=t.derive([n.densityBandwidth],B=>JBe(B)+1),s=t.derive([n.width,i],(B,j)=>B+j*2),o=t.derive([n.height,i],(B,j)=>B+j*2);const a=t.derive([n.categoryCount],B=>B>1),l=t.statefulDerive([e,s,o,4,"f32"],Ly),h=t.statefulDerive([e,s,o,4,"f32"],Ly),f=t.statefulDerive([e,s,o,4,"f32"],Ly),p=t.statefulDerive([e,s,o,4,"f32"],Ly);let g=t.if(a,B=>fL(B,e,r.x,r.y,B.assertNotNull(r.category),r.count),B=>fL(B,e,r.x,r.y,null,r.count)),b=ZBe(t,e,n.pointSize),x=tNe(t,e,n.densityBandwidth),k=uNe(t,e),T=oNe(t,e),I=iNe(t,e),M=nce(t,e);return t.derive([e,l,h,f,p,n.colorScheme,n.matrix,g,b,x,k,T,I,M],(B,j,Q,Z,q,J,oe,me,ae,ce,se,ge,xe,Se)=>De=>{let He=De.categoryColors??A2(De.categoryCount),Ue=[];for(let ut=0;ut<4;ut++)if(ut<He.length){let{r:wt,g:ot,b:dt}=Vz(He[ut]);wt=Math.pow(wt,De.gamma),ot=Math.pow(ot,De.gamma),dt=Math.pow(dt,De.gamma),Ue=Ue.concat([wt,ot,dt,1])}else Ue=Ue.concat([.5,.5,.5,1]);let yt=De.width/Q.width,We=De.height/Q.height,at=qz([yt,0,0,0,We,0,0,0,1],oe);if(B.bindFramebuffer(B.FRAMEBUFFER,j.framebuffer),B.viewport(0,0,j.width,j.height),B.clearColor(0,0,0,0),B.clear(B.COLOR_BUFFER_BIT),me(at),B.bindFramebuffer(B.FRAMEBUFFER,Q.framebuffer),B.viewport(0,0,Q.width,Q.height),B.clearColor(0,0,0,0),B.clear(B.COLOR_BUFFER_BIT),De.pointAlpha>0&&De.pointsAlpha>0&&(ae(j.texture,Z,q),B.bindFramebuffer(B.FRAMEBUFFER,Q.framebuffer),se(Z,De.pointAlpha,De.pointsAlpha,Ue,J)),De.densityScaler>0&&(De.densityAlpha>0||De.contoursAlpha>0)&&(ce(j.texture,Z,q),B.bindFramebuffer(B.FRAMEBUFFER,Q.framebuffer),De.densityAlpha>0&&ge(Z,De.densityScaler,De.densityQuantizationStep,De.densityAlpha,Ue,J),De.contoursAlpha>0))for(let ut=0;ut<He.length;ut++){let wt=[0,0,0,0];wt[ut]=1,xe(Z,De.densityScaler,De.densityQuantizationStep,De.contoursAlpha,wt,Ue.slice(ut*4,ut*4+4))}B.bindFramebuffer(B.FRAMEBUFFER,null),B.viewport(0,0,De.width,De.height),Se(Q.texture,De.gamma,1/yt,1/We)})}function mNe(t,e,n,r,i,s){let o=t.derive([s],x=>rce(x)+1),a=t.derive([r,o],(x,k)=>x+k*2),l=t.derive([i,o],(x,k)=>x+k*2);const h=t.statefulDerive([e,a,l,1,"f32"],Ly),f=t.statefulDerive([e,a,l,1,"f32"],Ly),p=t.statefulDerive([e,a,l,1,"f32"],Ly);let g=fL(t,e,n.x,n.y,null,n.count),b=HBe(t,e,s);return t.derive([e,o,r,i,h,f,p,g,b],(x,k,T,I,M,B,j,Q,Z)=>q=>{let J=T/M.width,oe=I/M.height,me=qz([J,0,0,0,oe,0,0,0,1],q);x.bindFramebuffer(x.FRAMEBUFFER,M.framebuffer),x.viewport(0,0,M.width,M.height),x.clearColor(0,0,0,0),x.clear(x.COLOR_BUFFER_BIT),Q(me),Z(M.texture,B,j),x.bindFramebuffer(x.FRAMEBUFFER,B.framebuffer);let ae=new Float32Array(T*I);return x.readPixels(k,k,T,I,x.RED,x.FLOAT,ae),x.bindFramebuffer(x.FRAMEBUFFER,null),ae})}class gNe{i32View;u32View;f32View;offset;constructor(e){this.i32View=new Int32Array(e),this.u32View=new Uint32Array(e),this.f32View=new Float32Array(e),this.offset=0}align2(){this.offset%2!=0&&(this.offset+=2-this.offset%2)}align4(){this.offset%4!=0&&(this.offset+=4-this.offset%4)}f32(e){this.f32View[this.offset++]=e}u32(e){this.u32View[this.offset++]=e}i32(e){this.i32View[this.offset++]=e}vec2f(e,n){this.align2(),this.f32View[this.offset++]=e,this.f32View[this.offset++]=n}vec3f(e,n,r){this.align4(),this.f32View[this.offset++]=e,this.f32View[this.offset++]=n,this.f32View[this.offset++]=r}vec4f(e,n,r,i){this.align4(),this.f32View[this.offset++]=e,this.f32View[this.offset++]=n,this.f32View[this.offset++]=r,this.f32View[this.offset++]=i}mat3x3f(e){this.vec3f(e[0],e[1],e[2]),this.vec3f(e[3],e[4],e[5]),this.vec3f(e[6],e[7],e[8])}byteOffset(){return this.offset*4}}function yNe(t,e){let n=new ArrayBuffer(4288),r=t.statefulDerive([e,4288,GPUBufferUsage.UNIFORM|GPUBufferUsage.COPY_DST|GPUBufferUsage.VERTEX],e0);return{buffer:r,update:t.derive([e,r],(i,s)=>o=>{let a=new gNe(n);a.u32(o.count),a.u32(o.category_count),a.i32(o.framebuffer_width),a.i32(o.framebuffer_height),a.i32(o.density_width),a.i32(o.density_height),a.f32(o.gamma),a.f32(o.point_size),a.f32(o.point_alpha),a.f32(o.points_alpha),a.f32(o.density_scaler),a.f32(o.quantization_step),a.f32(o.density_alpha),a.f32(o.contours_alpha),a.mat3x3f(o.matrix),a.vec2f(...o.view_xy_scaler),a.vec4f(...o.kde_causal),a.vec4f(...o.kde_anticausal),a.vec4f(...o.kde_a),a.vec4f(...o.background_color);let l=o.gamma;for(let h=0;h<Math.min(o.category_colors.length,256);h++){let{r:f,g:p,b:g,a:b}=o.category_colors[h];f=Math.pow(f,l),p=Math.pow(p,l),g=Math.pow(g,l),a.vec4f(f,p,g,b)}i.queue.writeBuffer(s,0,n,0,a.byteOffset())})}}const YR=64,HR=64;function ice(t,e,n,r,i,s){let o=t.derive([e,n,r.layouts],(a,l,h)=>a.createComputePipeline({layout:a.createPipelineLayout({bindGroupLayouts:[h.group0,h.group1,h.group2A]}),compute:{module:l,entryPoint:"accumulate"}}));return t.derive([o,r.group0,r.group1,r.group2A,s.countBuffer,i.count],(a,l,h,f,p,g)=>b=>{if(b.clearBuffer(p),g==0)return;let x=b.beginComputePass();x.setPipeline(a),x.setBindGroup(0,l),x.setBindGroup(1,h),x.setBindGroup(2,f),g<=YR*HR?x.dispatchWorkgroups(Math.ceil(g/YR)):x.dispatchWorkgroups(HR,Math.ceil(g/(YR*HR))),x.end()})}function vNe(t){const{COMPUTE:e,VERTEX:n,FRAGMENT:r}=GPUShaderStage;return{group0:t.createBindGroupLayout({entries:[{binding:0,visibility:e|n|r,buffer:{type:"uniform"}}]}),group1:t.createBindGroupLayout({entries:[{binding:0,visibility:e|n,buffer:{type:"read-only-storage"}},{binding:1,visibility:e|n,buffer:{type:"read-only-storage"}},{binding:2,visibility:e|n,buffer:{type:"read-only-storage"}}]}),group2A:t.createBindGroupLayout({entries:[{binding:0,visibility:e|r,buffer:{type:"storage"}}]}),group2B:t.createBindGroupLayout({entries:[{binding:1,visibility:e|r,buffer:{type:"storage"}},{binding:2,visibility:e|r,buffer:{type:"storage"}}]}),group3:t.createBindGroupLayout({entries:[{binding:0,visibility:GPUShaderStage.FRAGMENT,sampler:{type:"non-filtering"}},{binding:1,visibility:GPUShaderStage.FRAGMENT,texture:{sampleType:"float"}},{binding:2,visibility:GPUShaderStage.FRAGMENT,texture:{sampleType:"float"}}]})}}function sce(t,e,n,r,i){let s=t.derive([e],p=>vNe(p)),o=t.derive([e,s,n],(p,g,b)=>p.createBindGroup({layout:g.group0,entries:[{binding:0,resource:{buffer:b}}]})),a=t.derive([e,s,r.x,r.y,r.category],(p,g,b,x,k)=>p.createBindGroup({layout:g.group1,entries:[{binding:0,resource:{buffer:b}},{binding:1,resource:{buffer:x}},{binding:2,resource:{buffer:k??b}}]})),l=t.derive([e,s,i.countBuffer,i.blurBuffer],(p,g,b,x)=>p.createBindGroup({layout:g.group2A,entries:[{binding:0,resource:{buffer:b}}]})),h=t.derive([e,s,i.countBuffer,i.blurBuffer],(p,g,b,x)=>p.createBindGroup({layout:g.group2B,entries:[{binding:1,resource:{buffer:b}},{binding:2,resource:{buffer:x}}]})),f=t.derive([e,s,i.colorTexture,i.alphaTexture],(p,g,b,x)=>p.createBindGroup({layout:g.group3,entries:[{binding:0,resource:p.createSampler({})},{binding:1,resource:b.createView()},{binding:2,resource:x.createView()}]}));return{layouts:s,group0:o,group1:a,group2A:l,group2B:h,group3:f}}const oce=256,dL=256,bNe=dL*oce;function _Ne(t){const e=Math.ceil(t/oce);if(e<=dL)return[e,1];const n=Math.ceil(t/bNe);return[dL,n]}function xNe(t,e,n,r){const i=t.statefulDerive([e,t.value(16),GPUBufferUsage.UNIFORM|GPUBufferUsage.COPY_DST],e0),s=t.statefulDerive([e,t.value(16),GPUBufferUsage.STORAGE|GPUBufferUsage.COPY_DST],e0),o=t.derive([n],g=>Math.max(4,g*4)),a=t.statefulDerive([e,o,GPUBufferUsage.STORAGE],e0),l=t.derive([e],g=>g.createBindGroupLayout({entries:[{binding:0,visibility:GPUShaderStage.COMPUTE,buffer:{type:"uniform"}},{binding:1,visibility:GPUShaderStage.COMPUTE,buffer:{type:"storage"}},{binding:2,visibility:GPUShaderStage.COMPUTE,buffer:{type:"storage"}}]})),h=t.derive([e,l,i,s,a],(g,b,x,k,T)=>g.createBindGroup({layout:b,entries:[{binding:0,resource:{buffer:x}},{binding:1,resource:{buffer:k}},{binding:2,resource:{buffer:T}}]})),f=t.derive([e],g=>g.createBindGroupLayout({entries:[{binding:0,visibility:GPUShaderStage.VERTEX,buffer:{type:"read-only-storage"}}]})),p=t.derive([e,f,a],(g,b,x)=>g.createBindGroup({layout:b,entries:[{binding:0,resource:{buffer:x}}]}));return{uniformBuffer:i,countersBuffer:s,pointDataBuffer:a,bindGroupLayout:l,bindGroup:h,vertexBindGroupLayout:f,vertexBindGroup:p}}function wNe(t,e,n,r,i,s,o,a,l,h){const f=t.derive([e],T=>T.createBindGroupLayout({entries:[{binding:1,visibility:GPUShaderStage.COMPUTE,buffer:{type:"storage"}}]})),p=t.derive([e,f,s],(T,I,M)=>T.createBindGroup({layout:I,entries:[{binding:1,resource:{buffer:M}}]})),g=t.derive([e],T=>T.createBindGroupLayout({entries:[]})),b=t.derive([e,g],(T,I)=>T.createBindGroup({layout:I,entries:[]})),x=t.derive([e,n,r,i,f,l.bindGroupLayout],(T,I,M,B,j,Q)=>T.createComputePipeline({layout:T.createPipelineLayout({bindGroupLayouts:[M,B,j,Q]}),compute:{module:I,entryPoint:"downsample_viewport_cull"}})),k=t.derive([e,n,r,i,g,l.bindGroupLayout],(T,I,M,B,j,Q)=>T.createComputePipeline({layout:T.createPipelineLayout({bindGroupLayouts:[M,B,j,Q]}),compute:{module:I,entryPoint:"downsample_density_sample"}}));return t.derive([e,x,k,o,a,p,b,l.bindGroup,l.uniformBuffer,l.countersBuffer,h.count],(T,I,M,B,j,Q,Z,q,J,oe,me)=>(ae,ce)=>{if(me===0||ce.maxPoints<=0)return 0;const se=new ArrayBuffer(16),ge=new DataView(se);ge.setUint32(0,ce.maxPoints,!0),ge.setUint32(4,ce.frameSeed,!0),ge.setFloat32(8,ce.densityWeight,!0),ge.setFloat32(12,0,!0),T.queue.writeBuffer(J,0,se),ae.clearBuffer(oe);const[xe,Se]=_Ne(me);{const De=ae.beginComputePass();De.setPipeline(I),De.setBindGroup(0,B),De.setBindGroup(1,j),De.setBindGroup(2,Q),De.setBindGroup(3,q),De.dispatchWorkgroups(xe,Se),De.end()}{const De=ae.beginComputePass();De.setPipeline(M),De.setBindGroup(0,B),De.setBindGroup(1,j),De.setBindGroup(2,Z),De.setBindGroup(3,q),De.dispatchWorkgroups(xe,Se),De.end()}})}function ONe(t,e,n,r,i){const s=t.derive([e,n,r.layouts],(o,a,l)=>o.createRenderPipeline({layout:o.createPipelineLayout({bindGroupLayouts:[l.group0,l.group1,l.group2B]}),vertex:{entryPoint:"draw_density_map_vs",module:a},fragment:{entryPoint:"draw_density_map_fs",module:a,targets:[{format:i.colorTextureFormat,blend:{color:{srcFactor:"one",dstFactor:"one"},alpha:{srcFactor:"one",dstFactor:"one"}}},{format:i.alphaTextureFormat,blend:{color:{srcFactor:"one",dstFactor:"one"},alpha:{srcFactor:"one",dstFactor:"one"}}}]},primitive:{topology:"triangle-strip"}}));return t.derive([s,r.group0,r.group1,r.group2B,i.colorTexture,i.alphaTexture],(o,a,l,h,f,p)=>g=>{let b=g.beginRenderPass({colorAttachments:[{loadOp:"load",storeOp:"store",view:f.createView()},{loadOp:"load",storeOp:"store",view:p.createView()}]});b.setPipeline(o),b.setBindGroup(0,a),b.setBindGroup(1,l),b.setBindGroup(2,h),b.draw(4),b.end()})}function SNe(t,e,n,r,i,s){const o=t.derive([e,n,r.layouts],(a,l,h)=>a.createRenderPipeline({layout:a.createPipelineLayout({bindGroupLayouts:[h.group0,h.group1]}),vertex:{entryPoint:"points_vs",module:l},fragment:{entryPoint:"points_fs",module:l,targets:[{format:s.colorTextureFormat,blend:{color:{srcFactor:"one",dstFactor:"one"},alpha:{srcFactor:"one",dstFactor:"one"}}},{format:s.alphaTextureFormat,blend:{color:{srcFactor:"one",dstFactor:"one"},alpha:{srcFactor:"one",dstFactor:"one"}}}]},primitive:{topology:"triangle-strip"}}));return t.derive([o,r.group0,r.group1,i.count,s.colorTexture,s.alphaTexture],(a,l,h,f,p,g)=>b=>{let x=b.beginRenderPass({colorAttachments:[{clearValue:[0,0,0,0],loadOp:"clear",storeOp:"store",view:p.createView()},{clearValue:[0,0,0,0],loadOp:"clear",storeOp:"store",view:g.createView()}]});x.setPipeline(a),x.setBindGroup(0,l),x.setBindGroup(1,h),f>0&&x.draw(4,f),x.end()})}function kNe(t,e,n,r,i,s){const o=t.derive([e,n,r.layouts,i.vertexBindGroupLayout],(a,l,h,f)=>a.createRenderPipeline({layout:a.createPipelineLayout({bindGroupLayouts:[h.group0,h.group1,f]}),vertex:{entryPoint:"points_downsampled_vs",module:l},fragment:{entryPoint:"points_fs",module:l,targets:[{format:s.colorTextureFormat,blend:{color:{srcFactor:"one",dstFactor:"one"},alpha:{srcFactor:"one",dstFactor:"one"}}},{format:s.alphaTextureFormat,blend:{color:{srcFactor:"one",dstFactor:"one"},alpha:{srcFactor:"one",dstFactor:"one"}}}]},primitive:{topology:"triangle-strip"}}));return t.derive([o,r.group0,r.group1,i.vertexBindGroup,s.colorTexture,s.alphaTexture],(a,l,h,f,p,g)=>(b,x)=>{let k=b.beginRenderPass({colorAttachments:[{clearValue:[0,0,0,0],loadOp:"clear",storeOp:"store",view:p.createView()},{clearValue:[0,0,0,0],loadOp:"clear",storeOp:"store",view:g.createView()}]});k.setPipeline(a),k.setBindGroup(0,l),k.setBindGroup(1,h),k.setBindGroup(2,f),x>0&&k.draw(4,x),k.end()})}function CNe(t,e,n,r,i){const s=t.derive([e,n,i.layouts],(o,a,l)=>o.createRenderPipeline({layout:o.createPipelineLayout({bindGroupLayouts:[l.group0,l.group1,l.group2B,l.group3]}),vertex:{entryPoint:"gamma_correction_vs",module:a},fragment:{entryPoint:"gamma_correction_fs",module:a,targets:[{format:r}]},primitive:{topology:"triangle-strip"}}));return t.derive([s,i.group0,i.group1,i.group2B,i.group3],(o,a,l,h,f)=>(p,g)=>{let b=p.beginRenderPass({colorAttachments:[{clearValue:[0,0,0,0],loadOp:"clear",storeOp:"store",view:g}]});b.setPipeline(o),b.setBindGroup(0,a),b.setBindGroup(1,l),b.setBindGroup(2,h),b.setBindGroup(3,f),b.draw(4),b.end()})}const gW=64;function ace(t,e,n,r,i,s,o){let a=t.derive([e,n,r.layouts],(h,f,p)=>h.createComputePipeline({layout:h.createPipelineLayout({bindGroupLayouts:[p.group0,p.group1,p.group2B,p.group3]}),compute:{module:f,entryPoint:"gaussian_blur_stage_1"}})),l=t.derive([e,n,r.layouts],(h,f,p)=>h.createComputePipeline({layout:h.createPipelineLayout({bindGroupLayouts:[p.group0,p.group1,p.group2B,p.group3]}),compute:{module:f,entryPoint:"gaussian_blur_stage_2"}}));return t.derive([a,l,r.group0,r.group1,r.group2B,r.group3,i,s,o],(h,f,p,g,b,x,k,T,I)=>M=>{let B=M.beginComputePass();B.setBindGroup(0,p),B.setBindGroup(1,g),B.setBindGroup(2,b),B.setBindGroup(3,x),B.setPipeline(h),B.dispatchWorkgroups(Math.ceil(k/gW),I),B.setPipeline(f),B.dispatchWorkgroups(Math.ceil(T/gW),I),B.end()})}function ANe(t,e=!1){const n=new Float64Array(5),r=new Float64Array(4);ENe(n,r,t);const i=Float64Array.of(0,r[1]-n[1]*r[0],r[2]-n[2]*r[0],r[3]-n[3]*r[0],-n[4]*r[0]),s=1+n[1]+n[2]+n[3]+n[4],o=(r[0]+r[1]+r[2]+r[3])/s,a=(i[1]+i[2]+i[3]+i[4])/s;return{sigma:t,negative:e,a:n,b_causal:r,b_anticausal:i,sum_causal:o,sum_anticausal:a}}function ENe(t,e,n){const r=Float64Array.of(.84,1.8675,.84,-1.8675,-.34015,-.1299,-.34015,.1299),i=Math.exp(-1.783/n),s=Math.exp(-1.723/n),o=.6318/n,a=1.997/n,l=Float64Array.of(-i*Math.cos(o),i*Math.sin(o),-i*Math.cos(-o),i*Math.sin(-o),-s*Math.cos(a),s*Math.sin(a),-s*Math.cos(-a),s*Math.sin(-a)),h=n*2.5066282746310007,f=Float64Array.of(r[0],r[1],0,0,0,0,0,0),p=Float64Array.of(1,0,l[0],l[1],0,0,0,0,0,0);let g,b;for(b=2;b<8;b+=2){for(f[b]=l[b]*f[b-2]-l[b+1]*f[b-1],f[b+1]=l[b]*f[b-1]+l[b+1]*f[b-2],g=b-2;g>0;g-=2)f[g]+=l[b]*f[g-2]-l[b+1]*f[g-1],f[g+1]+=l[b]*f[g-1]+l[b+1]*f[g-2];for(g=0;g<=b;g+=2)f[g]+=r[b]*p[g]-r[b+1]*p[g+1],f[g+1]+=r[b]*p[g+1]+r[b+1]*p[g];for(p[b+2]=l[b]*p[b]-l[b+1]*p[b+1],p[b+3]=l[b]*p[b+1]+l[b+1]*p[b],g=b;g>0;g-=2)p[g]+=l[b]*p[g-2]-l[b+1]*p[g-1],p[g+1]+=l[b]*p[g-1]+l[b+1]*p[g-2]}for(b=0;b<4;++b)g=b<<1,e[b]=f[g]/h,t[b+1]=p[g+2]}function lce(t){let e=ANe(t);return{kde_causal:[e.b_causal[0],e.b_causal[1],e.b_causal[2],e.b_causal[3]],kde_anticausal:[e.b_anticausal[1],e.b_anticausal[2],e.b_anticausal[3],e.b_anticausal[4]],kde_a:[e.a[1],e.a[2],e.a[3],e.a[4]]}}const TNe=`// Copyright (c) 2025 Apple Inc. Licensed under MIT License.

enable f16;

struct Uniforms {
  count: u32,
  category_count: u32,
  framebuffer_width: i32,
  framebuffer_height: i32,
  density_width: i32,
  density_height: i32,
  gamma: f32,
  point_size: f32,
  point_alpha: f32,
  points_alpha: f32,
  density_scaler: f32,
  quantization_step: f32,
  density_alpha: f32,
  contours_alpha: f32,
  matrix: mat3x3<f32>,
  view_xy_scaler: vec2<f32>,
  kde_causal: vec4<f32>,
  kde_anticausal: vec4<f32>,
  kde_a: vec4<f32>,
  background_color: vec4<f32>,
  category_colors: array<vec4<f32>, 256>,
}

struct DownsampleUniforms {
  render_limit: u32,
  frame_seed: u32,
  density_weight: f32,
  _padding: f32,
}

struct PointData {
  position: vec3<f32>,
  category: u32,
}

struct FragmentOutput {
  @location(0) color: vec4<f32>,
  @location(1) log1malpha: f32, // log(1 - alpha)
}

@group(0) @binding(0) var<uniform> uniforms: Uniforms;

@group(1) @binding(0) var<storage, read> x_buffer: array<f32>;
@group(1) @binding(1) var<storage, read> y_buffer: array<f32>;
@group(1) @binding(2) var<storage, read> category_buffer: array<u32>;

@group(2) @binding(0) var<storage, read_write> count_buffer: array<atomic<u32>>;
@group(2) @binding(1) var<storage, read_write> blur_buffer: array<f16>;
@group(2) @binding(2) var<storage, read_write> blur_swap_buffer: array<f16>;

@group(3) @binding(0) var framebuffer_sampler: sampler;
@group(3) @binding(1) var color_texture: texture_2d<f32>;
@group(3) @binding(2) var log1malpha_texture: texture_2d<f32>;

// Downsampling bind groups (group 3 for compute shaders)
// WebGPU has a default limit of 4 bind groups, so we use group 3 (not 4)
// 3 storage buffers to stay within 8-buffer limit (3 from group1 + 1 from group2 + 3 from group3 = 7)
@group(3) @binding(0) var<uniform> downsample_uniforms: DownsampleUniforms;
@group(3) @binding(1) var<storage, read_write> downsample_counters: array<atomic<u32>>; // [visible_count, max_density_fixed]
@group(3) @binding(2) var<storage, read_write> point_data: array<f32>; // density (>= 0 means visible with density, < 0 means not visible or not accepted)

// Separate binding for vertex shader in downsampled draw pipeline
// Uses group 2 since the pipeline only needs groups 0, 1, 2
// (read-only access required by WebGPU for vertex shaders)
@group(2) @binding(0) var<storage, read> point_data_read: array<f32>; // same as point_data above

fn get_point(index: u32) -> PointData {
  var result: PointData;
  result.position = vec3(x_buffer[index], y_buffer[index], 1.0);
  if (uniforms.category_count > 1) {
    result.category = (category_buffer[index >> 2] >> ((index & 3) << 3)) & 0xff;
  } else {
    result.category = 0;
  }
  return result;
}

const ACCUMULATE_UNIT: u32 = 4096;

fn increment_count(x: i32, y: i32, category: u32, value: u32) {
  let width = uniforms.density_width;
  let height = uniforms.density_height;
  if (x < 0 || x >= width || y < 0 || y >= height || category >= uniforms.category_count || value == 0) {
    return;
  }
  let offset = (y * width + x) + i32(category) * (width * height);
  atomicAdd(&count_buffer[offset], value);
}

@compute @workgroup_size(64, 1)
fn accumulate(@builtin(global_invocation_id) id: vec3<u32>) {
  let width = uniforms.density_width;
  let height = uniforms.density_height;
  let index = id.y * 4096 + id.x; // 4096 = 64 * 64
  if (index >= uniforms.count) { return; }
  let point = get_point(index);
  let pos = uniforms.matrix * point.position;
  let x = (pos.x + 1.0) / 2.0 * f32(width) - 0.5;
  let y = (pos.y + 1.0) / 2.0 * f32(height) - 0.5;
  let ix = i32(x);
  let iy = i32(y);
  let tx = x - f32(ix);
  let ty = y - f32(iy);
  let w1: u32 = u32((1 - tx) * (1 - ty) * f32(ACCUMULATE_UNIT));
  let w2: u32 = u32(tx * (1 - ty) * f32(ACCUMULATE_UNIT));
  let w3: u32 = u32((1 - tx) * ty * f32(ACCUMULATE_UNIT));
  let w123 = w1 + w2 + w3;
  var w4: u32 = select(0, ACCUMULATE_UNIT - w123, w123 < ACCUMULATE_UNIT);
  increment_count(ix, iy, point.category, w1);
  increment_count(ix + 1, iy, point.category, w2);
  increment_count(ix, iy + 1, point.category, w3);
  increment_count(ix + 1, iy + 1, point.category, w4);
}

// =====================================================
// Draw Discrete Points
// =====================================================

struct PointsVertexOutput {
  @builtin(position) position: vec4<f32>,
  @location(0) dp: vec3<f32>,
  @location(1) color: vec4<f32>,
}

@vertex
fn points_vs(
  @builtin(instance_index) index: u32,
  @builtin(vertex_index) part: u32,
) -> PointsVertexOutput {
  let framebuffer_size = vec2(f32(uniforms.framebuffer_width), f32(uniforms.framebuffer_height));
  let alpha = uniforms.point_alpha * uniforms.points_alpha;
  let dp = vec2<f32>(f32(part % 2), f32(part / 2)) * 2.0 - 1.0;
  let point = get_point(index);
  let pos = uniforms.matrix * point.position;

  var out: PointsVertexOutput;
  out.position = vec4<f32>(pos.xy + dp * uniforms.point_size / framebuffer_size * 2.0, 0.0, 1.0);
  out.dp = vec3(dp, uniforms.point_size);
  out.color = uniforms.category_colors[point.category] * alpha;
  return out;
}

@fragment
fn points_fs(in: PointsVertexOutput) -> FragmentOutput {
  let r = length(in.dp.xy) * in.dp.z;
  let a = max(0.0, min(1.0, in.dp.z - r));
  var out: FragmentOutput;
  out.color = in.color * a;
  out.log1malpha = log(1 - out.color.a);
  return out;
}

// =====================================================
// Draw Density Map
// =====================================================

struct DrawDensityMapVertexOutput {
  @builtin(position) position: vec4<f32>,
  @location(0) texture_coord: vec2<f32>,
}

@vertex
fn draw_density_map_vs(
  @builtin(vertex_index) part: u32,
) -> DrawDensityMapVertexOutput {
  let framebuffer_size = vec2(f32(uniforms.framebuffer_width), f32(uniforms.framebuffer_height));
  let dp = vec2<f32>(f32(part % 2), f32(part / 2)) * 2.0 - 1.0;
  var out: DrawDensityMapVertexOutput;
  out.position = vec4(dp, 0.0, 1.0);
  out.texture_coord = (vec2(dp.x, dp.y) + 1.0) / 2.0 * framebuffer_size;
  return out;
}

fn get_density_raw(x: i32, y: i32, category: u32) -> f32 {
  let width = uniforms.density_width;
  let height = uniforms.density_height;
  let density_scaler = uniforms.density_scaler;
  if (x < 0 || x >= width || y < 0 || y >= height) {
    return 0.0;
  }
  let offset = (y * width + x) + i32(category) * (width * height);
  return max(0.0, f32(blur_buffer[offset]) * density_scaler);
}

fn get_density(x: f32, y: f32, category: u32) -> f32 {
  let px = x / f32(uniforms.framebuffer_width) * f32(uniforms.density_width) - 0.5;
  let py = y / f32(uniforms.framebuffer_height) * f32(uniforms.density_height) - 0.5;
  let ix = i32(px);
  let iy = i32(py);
  let tx = px - f32(ix);
  let ty = py - f32(iy);
  let v00 = get_density_raw(ix, iy, category);
  let v10 = get_density_raw(ix + 1, iy, category);
  let v01 = get_density_raw(ix, iy + 1, category);
  let v11 = get_density_raw(ix + 1, iy + 1, category);
  return mix(mix(v00, v10, tx), mix(v01, v11, tx), ty);
}

fn get_density_quantized(x: f32, y: f32, category: u32) -> f32 {
  let v = get_density(x, y, category);
  return floor(clamp(v, 0, 1) / uniforms.quantization_step);
}

fn get_density_quantized_sobel(x: f32, y: f32, category: u32) -> vec2<f32> {
  let v11 = get_density_quantized(x - 1, y - 1, category);
  let v21 = get_density_quantized(x, y - 1, category);
  let v31 = get_density_quantized(x + 1, y - 1, category);
  let v12 = get_density_quantized(x - 1, y, category);
  let v22 = get_density_quantized(x, y, category);
  let v32 = get_density_quantized(x + 1, y, category);
  let v13 = get_density_quantized(x - 1, y + 1, category);
  let v23 = get_density_quantized(x, y + 1, category);
  let v33 = get_density_quantized(x + 1, y + 1, category);
  let gx = v11 + v12 * 2.0 + v13 - v31 - v32 * 2.0 - v33;
  let gy = v11 + v21 * 2.0 + v31 - v13 - v23 * 2.0 - v33;
  return vec2(gx, gy);
}

@fragment
fn draw_density_map_fs(in: DrawDensityMapVertexOutput) -> FragmentOutput {
  let px = in.texture_coord.x;
  let py = in.texture_coord.y;
  let quantization_step: f32 = uniforms.quantization_step;

  var sum_color: vec4<f32> = vec4(0);
  var sum_log1malpha: f32 = 0.0;

  for (var i: u32 = 0; i < uniforms.category_count; i++) {
    let density = get_density(px, py, i);
    var alpha = min(1.0, floor(density / quantization_step) * quantization_step);
    alpha *= uniforms.density_alpha;
    let color = uniforms.category_colors[i] * alpha;
    sum_color += color;
    sum_log1malpha += log(1 - color.a);
  }

  if (uniforms.contours_alpha > 0.0) {
    for (var i: u32 = 0; i < uniforms.category_count; i++) {
      let sobel = get_density_quantized_sobel(px, py, i);
      let alpha = clamp(length(sobel) * 0.2, 0.0, 1.0) * uniforms.contours_alpha;
      let color = uniforms.category_colors[i] * alpha;
      sum_color += color;
      sum_log1malpha += log(1 - color.a);
    }
  }

  var out: FragmentOutput;
  out.color = sum_color;
  out.log1malpha = sum_log1malpha;
  return out;
}

// =====================================================
// Gamma Correction
// =====================================================

struct GammaCorrectionVertexOutput {
  @builtin(position) position: vec4<f32>,
  @location(0) texture_coord: vec2<f32>,
}

@vertex
fn gamma_correction_vs(
  @builtin(vertex_index) part: u32,
) -> GammaCorrectionVertexOutput {
  let dp = vec2<f32>(f32(part % 2), f32(part / 2)) * 2.0 - 1.0;
  var out: GammaCorrectionVertexOutput;
  out.position = vec4(dp * uniforms.view_xy_scaler, 0.0, 1.0);
  out.texture_coord = (vec2(dp.x, -dp.y) + 1.0) / 2.0;
  return out;
}

@fragment
fn gamma_correction_fs(in: GammaCorrectionVertexOutput) -> @location(0) vec4<f32> {
  let sum_color = textureSample(color_texture, framebuffer_sampler, in.texture_coord);
  let sum_log_one_minus_alpha = textureSample(log1malpha_texture, framebuffer_sampler, in.texture_coord).r;
  var color: vec4<f32>;
  if (sum_color.a > 0.0) {
    color = sum_color / sum_color.a * (1.0 - exp(sum_log_one_minus_alpha));
    color = color + uniforms.background_color * (1 - color.a);
  } else {
    color = uniforms.background_color;
  }
  let rgb = pow(color.rgb, vec3(1.0 / uniforms.gamma));
  return vec4(rgb, color.a);
}

// =====================================================
// Gaussian Blur
// =====================================================

@compute @workgroup_size(64, 1)
fn gaussian_blur_stage_1(@builtin(global_invocation_id) id: vec3<u32>) {
  let width = uniforms.density_width;
  let height = uniforms.density_height;
  let x = id.x;
  if (x >= u32(width)) { return; }
  let start = x + id.y * u32(width * height);
  let count = u32(height);
  let stride = u32(width);

  deriche_conv_1d(
    &blur_buffer, &blur_swap_buffer, start, stride, count,
    uniforms.kde_causal, uniforms.kde_anticausal, uniforms.kde_a,
    true
  );
}

@compute @workgroup_size(64, 1)
fn gaussian_blur_stage_2(@builtin(global_invocation_id) id: vec3<u32>) {
  let width = uniforms.density_width;
  let height = uniforms.density_height;
  let y = id.x;
  if (y >= u32(height)) { return; }
  let start = y * u32(width) + id.y * u32(width * height);
  let count = u32(width);
  let stride = u32(1);

  deriche_conv_1d(
    &blur_swap_buffer, &blur_buffer, start, stride, count,
    uniforms.kde_causal, uniforms.kde_anticausal, uniforms.kde_a,
    false
  );
}

fn deriche_conv_1d(
    src: ptr<storage, array<f16>, read_write>,
    dst: ptr<storage, array<f16>, read_write>,
    start: u32, stride: u32, count: u32,
    kde_causal: vec4<f32>, kde_anticausal: vec4<f32>, kde_a: vec4<f32>,
    src_is_u32: bool
) {
  var s: vec4<f32> = vec4(0.0);
  var y0: f32 = 0.0;
  var y1234: vec4<f32> = vec4(0.0);

  var first_nonzero: u32 = count;
  var last_nonzero: u32 = 0;

  for (var i: u32 = 0; i < count; i++) {
    let offset = start + i * stride;
    var input: f32;
    if (src_is_u32) {
      input = f32(bitcast<u32>(vec2((*src)[offset * 2], (*src)[offset * 2 + 1]))) / f32(ACCUMULATE_UNIT);
    } else {
      input = f32((*src)[offset]);
    }
    if (input != 0.0) {
      first_nonzero = min(i, first_nonzero);
      last_nonzero = max(i, last_nonzero);
    }
    s = vec4(input, s.xyz);
    y1234 = vec4(y0, y1234.xyz);
    y0 = dot(kde_causal, s) - dot(kde_a, y1234);
    (*dst)[offset] = f16(y0);
  }

  if (first_nonzero > last_nonzero) {
    return;
  }

  s = vec4(0.0);
  y0 = 0.0;
  y1234 = vec4(0.0);

  for (var i: u32 = count - 1 - last_nonzero; i < count; i++) {
    let p = count - 1 - i;
    let offset = start + p * stride;
    var input: f32 = 0.0;
    if (p >= first_nonzero) {
      if (src_is_u32) {
        input = f32(bitcast<u32>(vec2((*src)[offset * 2], (*src)[offset * 2 + 1]))) / f32(ACCUMULATE_UNIT);
      } else {
        input = f32((*src)[offset]);
      }
    }
    y1234 = vec4(y0, y1234.xyz);
    y0 = dot(kde_anticausal, s) - dot(kde_a, y1234);
    s = vec4(input, s.xyz);
    if (y0 != 0.0) {
      (*dst)[offset] = f16(f32((*dst)[offset]) + y0);
    }
  }
}

// =====================================================
// Downsampling: PCG hash for deterministic randomness
// =====================================================

fn pcg_hash(input: u32) -> u32 {
  var state = input * 747796405u + 2891336453u;
  let word = ((state >> ((state >> 28u) + 4u)) ^ state) * 277803737u;
  return (word >> 22u) ^ word;
}

fn random_float(seed: u32) -> f32 {
  return f32(pcg_hash(seed)) / 4294967295.0;
}

// =====================================================
// Downsampling Pass 1: Viewport culling + density lookup
// =====================================================
// Uses 2D dispatch for large point counts (>65K workgroups)
// Stride: 256 workgroups * 256 threads = 65536 threads per row

const DOWNSAMPLE_STRIDE: u32 = 65536u;

@compute @workgroup_size(256)
fn downsample_viewport_cull(@builtin(global_invocation_id) id: vec3<u32>) {
  let index = id.y * DOWNSAMPLE_STRIDE + id.x;
  if (index >= uniforms.count) { return; }

  let point = get_point(index);
  let pos = uniforms.matrix * point.position;

  // Check if point is in viewport [-1, 1]
  let in_viewport = pos.x >= -1.0 && pos.x <= 1.0 && pos.y >= -1.0 && pos.y <= 1.0;

  if (in_viewport) {
    // Increment visible count
    atomicAdd(&downsample_counters[0], 1u);

    // Lookup density at this point's location from blur_buffer
    let width = uniforms.density_width;
    let height = uniforms.density_height;
    let dx = (pos.x + 1.0) / 2.0 * f32(width) - 0.5;
    let dy = (pos.y + 1.0) / 2.0 * f32(height) - 0.5;
    let ix = clamp(i32(dx), 0, width - 1);
    let iy = clamp(i32(dy), 0, height - 1);

    // Sum density across all categories at this grid cell
    var density: f32 = 0.0;
    for (var c: u32 = 0; c < uniforms.category_count; c++) {
      let offset = iy * width + ix + i32(c) * (width * height);
      density += f32(blur_buffer[offset]);
    }
    // Store density (positive = visible). Add small epsilon to ensure > 0.
    density = min(max(density, 0.0001), 65535.0);
    point_data[index] = density;

    // Track max density using fixed-point atomics
    let density_fixed = u32(density * 65536.0);
    atomicMax(&downsample_counters[1], density_fixed);
  } else {
    // Not visible: store -1.0
    point_data[index] = -1.0;
  }
}

// =====================================================
// Downsampling Pass 2: Probabilistic acceptance
// =====================================================

@compute @workgroup_size(256)
fn downsample_density_sample(@builtin(global_invocation_id) id: vec3<u32>) {
  let index = id.y * DOWNSAMPLE_STRIDE + id.x;
  if (index >= uniforms.count) { return; }

  let density = point_data[index];

  // Not visible (density < 0)
  if (density < 0.0) {
    return;
  }

  let visible_count = atomicLoad(&downsample_counters[0]);
  let render_limit = downsample_uniforms.render_limit;

  // If visible count is within limit, accept all visible points (keep positive density)
  if (visible_count <= render_limit) {
    return; // Keep positive value = accepted
  }

  // Compute acceptance probability based on density
  let max_density_fixed = atomicLoad(&downsample_counters[1]);
  let max_density = f32(max_density_fixed) / 65536.0;

  // Base acceptance rate
  let base_rate = f32(render_limit) / f32(visible_count);

  // Density-based modulation: lower density = higher acceptance
  let normalized_density = select(0.0, density / max_density, max_density > 0.0001);
  let density_weight = downsample_uniforms.density_weight;

  // Inverse density weighting: sparse areas get higher probability
  let inverse_weight = 1.0 / (1.0 + normalized_density * density_weight);

  // Compute final probability (scale by ~2 to compensate for average inverse_weight)
  let final_prob = min(1.0, base_rate * inverse_weight * 2.0);

  // Deterministic random for frame stability (based on point index + frame seed)
  let seed = index ^ downsample_uniforms.frame_seed;
  let rand = random_float(seed);

  // If not accepted, set to negative (marks as rejected)
  if (rand >= final_prob) {
    point_data[index] = -1.0;
  }
}

// =====================================================
// Draw points with downsampling
// =====================================================

@vertex
fn points_downsampled_vs(
  @builtin(instance_index) instance: u32,
  @builtin(vertex_index) part: u32,
) -> PointsVertexOutput {
  var out: PointsVertexOutput;

  let point_data = point_data_read[instance];
  if (point_data < 0.0) {
    // To discard a point, we set a out-of-viewport position. This avoids fragment costs.
    out.position = vec4<f32>(-1000, -1000, 0.0, 1.0);
    return out;
  }

  let framebuffer_size = vec2(f32(uniforms.framebuffer_width), f32(uniforms.framebuffer_height));
  let alpha = uniforms.point_alpha * uniforms.points_alpha;
  let dp = vec2<f32>(f32(part % 2), f32(part / 2)) * 2.0 - 1.0;
  let point = get_point(instance);
  let pos = uniforms.matrix * point.position;
  out.position = vec4<f32>(pos.xy + dp * uniforms.point_size / framebuffer_size * 2.0, 0.0, 1.0);
  out.dp = vec3(dp, uniforms.point_size);
  out.color = uniforms.category_colors[point.category] * alpha;
  return out;
}
`;class PNe{props;viewport;df;device;module;uniforms;context;renderInputs;dataBuffers;renderer;constructor(e,n,r,i,s){this.context=e,this.props={mode:"points",colorScheme:"light",x:new Float32Array,y:new Float32Array,category:null,categoryCount:1,categoryColors:null,viewportX:0,viewportY:0,viewportScale:1,pointSize:1,pointAlpha:1,pointsAlpha:1,densityScaler:1,densityBandwidth:1,densityQuantizationStep:.1,contoursAlpha:1,densityAlpha:1,gamma:2.2,width:i,height:s,downsampleMaxPoints:4e6,downsampleDensityWeight:5,isGis:!1},this.viewport=new pc({x:0,y:0,scale:1},i,s),this.df=new v_;let o=this.df;this.renderInputs={mode:o.value(this.props.mode),colorScheme:o.value(this.props.colorScheme),xData:o.value(this.props.x),yData:o.value(this.props.y),categoryData:o.value(this.props.category),categoryCount:o.value(this.props.categoryCount),categoryColors:o.value(this.props.categoryColors),matrix:o.value(Kue()),width:o.value(i),height:o.value(s),pointSize:o.value(this.props.pointSize),densityBandwidth:o.value(this.props.densityBandwidth),downsampleMaxPoints:o.value(this.props.downsampleMaxPoints),downsampleDensityWeight:o.value(this.props.downsampleDensityWeight)},this.device=o.value(n),this.dataBuffers=DNe(o,this.device,this.renderInputs),this.module=o.derive([this.device],a=>a.createShaderModule({code:TNe})),this.uniforms=yNe(o,this.device),this.renderer=INe(o,this.device,this.module,this.uniforms,r,this.renderInputs,this.dataBuffers)}setProps(e){let n=!1,r;for(r in e)e[r]!==this.props[r]&&(this.props[r]=e[r],n=!0);return this.viewport.update({x:this.props.viewportX,y:this.props.viewportY,scale:this.props.viewportScale},this.props.width,this.props.height,this.props.isGis),this.renderInputs.mode.value=this.props.mode,this.renderInputs.colorScheme.value=this.props.colorScheme,this.renderInputs.xData.value=this.props.x,this.renderInputs.yData.value=this.props.y,this.renderInputs.categoryData.value=this.props.category,this.renderInputs.categoryColors.value=this.props.categoryColors,this.props.category!=null?this.renderInputs.categoryCount.value=this.props.categoryCount:this.renderInputs.categoryCount.value=1,this.renderInputs.matrix.value=this.viewport.matrix(),this.renderInputs.width.value=this.props.width,this.renderInputs.height.value=this.props.height,this.renderInputs.pointSize.value=this.props.pointSize,this.renderInputs.densityBandwidth.value=this.props.densityBandwidth,this.renderInputs.downsampleMaxPoints.value=this.props.downsampleMaxPoints,this.renderInputs.downsampleDensityWeight.value=this.props.downsampleDensityWeight,n}render(){this.renderer.value(this.props,this.context.getCurrentTexture().createView())}destroy(){this.df.destroy()}async densityMap(e,n,r,i){let s=this.df.subgraph(),{x:o,y:a,scale:l}=i,h=[l,0,0,0,l,0,-o*l,-a*l,1],f=ece(h),p=await MNe(s,this.device,this.module,this.uniforms,s.value(e),s.value(n),s.value(r),s.value(h),this.dataBuffers).value(),g=this.props.isGis;return s.destroy(),{data:p,width:e,height:n,coordinateAtPixel:(b,x)=>{let k=b/e*2-1,T=x/n*2-1,I=Jue([k,T,1],f);return{x:I[0],y:g?pc.unprojectLat(I[1]):I[1]}}}}}function DNe(t,e,n){let r=GPUBufferUsage.STORAGE|GPUBufferUsage.COPY_DST;const i=t.derive([n.xData],f=>f.length),s=t.derive([i],f=>f*4),o=i,a=t.statefulDerive([e,t.statefulDerive([e,s,r],e0),n.xData],UR),l=t.statefulDerive([e,t.statefulDerive([e,s,r],e0),n.yData],UR),h=t.statefulDerive([e,t.statefulDerive([e,o,r],e0),n.categoryData],UR);return{x:a,y:l,category:h,count:i}}function uce(t,e,n,r,i,s,o){let a="rgba16float",l="r16float",h=GPUTextureUsage.RENDER_ATTACHMENT|GPUTextureUsage.TEXTURE_BINDING,f=t.statefulDerive([e,n,r,a,h],VX),p=t.statefulDerive([e,n,r,l,h],VX),g=t.derive([i,s,o],(T,I,M)=>T*I*M*4),b=t.derive([i,s,o],(T,I,M)=>T*I*M*2),x=t.statefulDerive([e,g,GPUBufferUsage.STORAGE|GPUBufferUsage.COPY_DST|GPUBufferUsage.COPY_SRC],e0),k=t.statefulDerive([e,b,GPUBufferUsage.STORAGE],e0);return{colorTexture:f,alphaTexture:p,colorTextureFormat:a,alphaTextureFormat:l,countBuffer:x,blurBuffer:k}}function INe(t,e,n,r,i,s,o){let a=t.derive([s.densityBandwidth],oe=>Math.ceil(oe*3)+1),l=t.derive([s.width,a],(oe,me)=>oe+me*2),h=t.derive([s.height,a],(oe,me)=>oe+me*2),f=t.derive([l],oe=>Math.ceil(oe/4)),p=t.derive([h],oe=>Math.ceil(oe/4)),g=uce(t,e,l,h,f,p,s.categoryCount),b=sce(t,e,r.buffer,o,g),x=xNe(t,e,o.count,s.downsampleMaxPoints),k=ice(t,e,n,b,o,g),T=SNe(t,e,n,b,o,g),I=kNe(t,e,n,b,x,g),M=ONe(t,e,n,b,g),B=CNe(t,e,n,i,b),j=ace(t,e,n,b,l,h,s.categoryCount),Q=t.derive([b.layouts],oe=>oe),Z=wNe(t,e,n,t.derive([Q],oe=>oe.group0),t.derive([Q],oe=>oe.group1),g.blurBuffer,b.group0,b.group1,x,o),q=t.derive([s.densityBandwidth,l,f],(oe,me,ae)=>lce(oe/me*ae)),J=t.derive([s.categoryColors,s.categoryCount],(oe,me)=>(oe==null&&(oe=A2(me)),oe.map(ae=>Vz(ae))));return t.derive([e,l,h,f,p,r.update,o.count,s.matrix,J,T,I,B,k,j,M,Z,q],(oe,me,ae,ce,se,ge,xe,Se,De,He,Ue,yt,We,at,ut,wt,ot)=>(dt,Yt)=>{let Ft=dt.colorScheme=="light"?[1,1,1,0]:[0,0,0,0],Ot=dt.width/me,Kt=dt.height/ae,Dn=qz([Ot,0,0,0,Kt,0,0,0,1],Se);ge({count:xe,category_count:dt.categoryCount,framebuffer_width:me,framebuffer_height:ae,density_width:ce,density_height:se,gamma:dt.gamma,point_size:Math.max(dt.mode=="points"?3:1,dt.pointSize),point_alpha:dt.pointAlpha,points_alpha:dt.pointsAlpha,density_scaler:dt.densityScaler/16,quantization_step:dt.densityQuantizationStep,density_alpha:dt.densityAlpha,contours_alpha:dt.contoursAlpha,matrix:Dn,view_xy_scaler:[1/Ot,1/Kt],kde_causal:ot.kde_causal,kde_anticausal:ot.kde_anticausal,kde_a:ot.kde_a,background_color:Ft,category_colors:De});let Ut=oe.createCommandEncoder();const At=dt.downsampleMaxPoints,zt=At===null||At===1/0||!Number.isFinite(At)||At<=0?null:At;if(zt!==null&&xe>zt){We(Ut),at(Ut);const nn={maxPoints:zt,densityWeight:dt.downsampleDensityWeight,frameSeed:42};wt(Ut,nn),Ue(Ut,xe),dt.mode=="density"&&(dt.densityAlpha>0||dt.contoursAlpha>0)&&ut(Ut)}else He(Ut),dt.mode=="density"&&(dt.densityAlpha>0||dt.contoursAlpha>0)&&(We(Ut),at(Ut),ut(Ut));yt(Ut,Yt),oe.queue.submit([Ut.finish()])})}function MNe(t,e,n,r,i,s,o,a,l){let h=uce(t,e,i,s,i,s,t.value(1)),f=sce(t,e,r.buffer,l,h),p=ice(t,e,n,f,l,h),g=ace(t,e,n,f,i,s,t.value(1));return t.derive([e,i,s,l.count,r.update,o,a,p,g,h.countBuffer],(b,x,k,T,I,M,B,j,Q,Z)=>()=>{let q=b.createCommandEncoder(),J=lce(M);I({count:T,category_count:1,framebuffer_width:x,framebuffer_height:k,density_width:x,density_height:k,gamma:1,point_size:0,point_alpha:0,points_alpha:0,density_scaler:0,quantization_step:0,density_alpha:0,contours_alpha:0,matrix:B,view_xy_scaler:[1,1],kde_causal:J.kde_causal,kde_anticausal:J.kde_anticausal,kde_a:J.kde_a,background_color:[0,0,0,0],category_colors:[]}),j(q),Q(q);let oe=b.createBuffer({size:x*k*2,usage:GPUBufferUsage.COPY_DST|GPUBufferUsage.MAP_READ});return q.copyBufferToBuffer(Z,0,oe,0,x*k*2),b.queue.submit([q.finish()]),oe.mapAsync(GPUMapMode.READ,0,x*k*2).then(()=>RNe(oe.getMappedRange()))})}function RNe(t){let e=new Uint16Array(t),n=new Uint32Array(e.length);for(let r=0;r<e.length;r++){let i=e[r]&32767,s=e[r]&32768,o=e[r]&31744;i<<=13,s<<=16,i+=939524096,i=o==0?0:i,i|=s,n[r]=i}return new Float32Array(n.buffer)}let KS;function FNe(){return KS==null&&(KS=document.createElement("canvas"),KS.width=1,KS.height=1),KS.getContext("2d")}function LNe(t){let e=FNe();e.font=`${t.fontSize??10}px ${t.fontFamily??"system-ui"}`;let n=t.text.split(`
`).map(i=>e.measureText(i).width),r=(t.fontSize??10)*(t.lineSpacing??1)*n.length;return{width:n.reduce((i,s)=>Math.max(i,s)),height:r}}let KR=null,pL=new Map;function $Ne(){return KR==null&&(KR=new Promise((t,e)=>{let n=new Worker(new URL(""+new URL("clustering.worker-B-hzd4PN.js",import.meta.url).href,import.meta.url),{type:"module"});n.onmessage=r=>{if(r.data.ready){t(n);return}if(r.data.id!=null){let i=pL.get(r.data.id);i!=null&&(pL.delete(r.data.id),i(r.data))}}})),KR}function mO(t,e,n=[]){return new Promise((r,i)=>{$Ne().then(s=>{let o=new Date().getTime().toString()+"-"+Math.random().toString();pL.set(o,a=>{r(a.payload)}),s.postMessage({id:o,name:t,payload:e},n)})})}let BNe=(t,e,n,r)=>mO("findClusters",[t,e,n,r],[t.buffer]),NNe=(...t)=>mO("dynamicLabelPlacement",t),zNe=(...t)=>mO("textSummarizerCreate",t),QNe=(...t)=>mO("textSummarizerDestroy",t),jNe=(...t)=>mO("textSummarizerAdd",t),UNe=(...t)=>mO("textSummarizerSummarize",t);async function yW(t,e,n){let r=e.reduce((h,f)=>Math.min(h,f.level??0),0),i=e.reduce((h,f)=>Math.max(h,f.level??0),0),s=t*.5,o=t*2,a=e.map(h=>{let f={x:h.x,y:h.y},p=h.level??0,g=p==0?14:12,b=LNe({text:h.text,fontSize:g,fontFamily:n});return b.width+=4,b.height+=4,{text:h.text,fontSize:g,bounds:{xMin:f.x-b.width/2,xMax:f.x+b.width/2,yMin:f.y-b.height/2,yMax:f.y+b.height/2},locationAtZero:f,priority:h.priority,minScale:h.level==i?null:1/(o*Math.pow(2,p)*1.2),maxScale:h.level==r?null:1/(o*Math.pow(2,p-1)),coordinate:{x:h.x,y:h.y},placement:null}}),l=await NNe(a,{globalMaxScale:1/s});for(let h=0;h<l.length;h++){let f=l[h];if(f!=null){let p=1/f.minScale,g=1/f.maxScale;a[h].placement={minScale:g,maxScale:p}}}return a}var vW={exports:{}},bW;function VNe(){return bW||(bW=1,(function(t){(function(){function e(a,l){var h=a.x-l.x,f=a.y-l.y;return h*h+f*f}function n(a,l,h){var f=l.x,p=l.y,g=h.x-f,b=h.y-p;if(g!==0||b!==0){var x=((a.x-f)*g+(a.y-p)*b)/(g*g+b*b);x>1?(f=h.x,p=h.y):x>0&&(f+=g*x,p+=b*x)}return g=a.x-f,b=a.y-p,g*g+b*b}function r(a,l){for(var h=a[0],f=[h],p,g=1,b=a.length;g<b;g++)p=a[g],e(p,h)>l&&(f.push(p),h=p);return h!==p&&f.push(p),f}function i(a,l,h,f,p){for(var g=f,b,x=l+1;x<h;x++){var k=n(a[x],a[l],a[h]);k>g&&(b=x,g=k)}g>f&&(b-l>1&&i(a,l,b,f,p),p.push(a[b]),h-b>1&&i(a,b,h,f,p))}function s(a,l){var h=a.length-1,f=[a[0]];return i(a,0,h,l,f),f.push(a[h]),f}function o(a,l,h){if(a.length<=2)return a;var f=l!==void 0?l*l:1;return a=h?a:r(a,f),a=s(a,f),a}t.exports=o,t.exports.default=o})()})(vW)),vW.exports}var qNe=VNe();const _W=Xue(qNe);function ZNe(t,e){let n=t.slice();for(let r=0;r<e;r++){const i=[],s=n.length;for(let o=0;o<s;o++){const a=n[o],l=n[(o+1)%s],h={x:.75*a.x+.25*l.x,y:.75*a.y+.25*l.y},f={x:.25*a.x+.75*l.x,y:.25*a.y+.75*l.y};i.push(h,f)}n=i}return n}function XNe(t,e){const n=ZNe(t,5),r=Vue(n);let i=Math.max(r.xMax-r.xMin,r.yMax-r.yMin)/100,s=_W(n,i),o=0;for(;s.length>e&&o<20;)i*=1.1,o+=1,s=_W(n,i);return s}const xW={light:{fontFamily:"system-ui,sans-serif",clusterLabelColor:"#000",clusterLabelOutlineColor:"rgba(255,255,255,0.8)",clusterLabelOpacity:.8,statusBar:!0,statusBarTextColor:"#525252",statusBarBackgroundColor:"rgba(255,255,255,0.9)",brandingLink:{text:"Embedding Atlas",href:"https://apple.github.io/embedding-atlas"}},dark:{fontFamily:"system-ui,sans-serif",clusterLabelColor:"#ccc",clusterLabelOutlineColor:"rgba(0,0,0,0.8)",clusterLabelOpacity:.8,statusBar:!0,statusBarTextColor:"#d9d9d9",statusBarBackgroundColor:"rgba(0,0,0,0.9)",brandingLink:{text:"Embedding Atlas",href:"https://apple.github.io/embedding-atlas"}}};function WNe(t,e){return t==null?xW[e]:{...xW[e],...t,...t[e]!=null?t[e]:{}}}function GNe(t,e,n,r,i,s,o){let a=Math.max(r,i)/s,l=t/(n*n)/(a*a),h=1/(l/(s*s))*.2,f=Math.sqrt(t/e/(a*a)),p=Math.log(f),g=Math.log(n),b=(Math.min(Math.max((g-p)*2,-1),1)+1)/2,x;if(o!=null)x=o*s;else{let I=.25/Math.sqrt(l);x=Math.max(.2,Math.min(5,I))*s}let k=1-b,T=.5+b*.5;return{densityScaler:h,densityAlpha:k,contoursAlpha:k,pointSize:x,pointAlpha:.7,pointsAlpha:T,densityBandwidth:20}}var YNe=E1("<div></div>"),HNe=C0("<circle></circle>"),KNe=C0("<circle></circle>"),JNe=C0('<text dominant-baseline="middle"> </text>'),eze=C0("<g></g>"),tze=C0("<g><!></g>"),nze=C0("<g></g>"),rze=E1('<div><div></div> <canvas></canvas> <div><!></div> <svg role="none"><!><!><!><!></svg> <!> <!></div>');function ize(t,e){p_(e,!0);let n=or(e,"data",19,()=>({x:new Float32Array,y:new Float32Array,category:null})),r=or(e,"categoryCount",3,1),i=or(e,"categoryColors",3,null),s=or(e,"width",3,800),o=or(e,"height",3,800),a=or(e,"pixelRatio",3,2),l=or(e,"theme",3,null),h=or(e,"config",3,null),f=or(e,"totalCount",3,null),p=or(e,"maxDensity",3,null),g=or(e,"labels",3,null),b=or(e,"queryClusterLabels",3,null),x=or(e,"tooltip",7,null),k=or(e,"selection",7,null),T=or(e,"querySelection",3,null),I=or(e,"rangeSelection",7,null),M=or(e,"defaultViewportState",3,null),B=or(e,"viewportState",7,null),j=or(e,"customTooltip",3,null),Q=or(e,"customOverlay",3,null),Z=or(e,"onViewportState",3,null),q=or(e,"onTooltip",3,null),J=or(e,"onSelection",3,null),oe=or(e,"onRangeSelection",3,null),me=or(e,"cache",3,null),ae=cr(()=>h()?.colorScheme??"light"),ce=cr(()=>WNe(l(),Ce(ae))),se=cr(()=>i()??A2(r())),ge=cr(()=>h()?.isGis??!1),xe=cr(()=>{if(Ce(ge)&&n().y){const ye=new Float32Array(n().y.length);for(let Je=0;Je<n().y.length;Je++)ye[Je]=pc.projectLat(n().y[Je]);return ye}return n().y}),Se=cr(()=>B()??M()??{x:0,y:0,scale:1}),De=cr(()=>new pc(Ce(Se),s(),o(),Ce(ge))),He=cr(()=>Ce(De).pixelLocationFunction()),Ue=cr(()=>Ce(De).coordinateAtPixelFunction()),yt=Bs(!1);function We(ye,Je){return ye.x==Je.x&&ye.y==Je.y&&ye.category==Je.category&&ye.text==Je.text}let at=cr(()=>k()?.length==1&&x()!=null&&We(k()[0],x()));function ut(ye){Fy(B(),ye)||(B(ye),Z()?.(ye))}function wt(ye){Fy(x(),ye)||(x(ye),q()?.(ye))}function ot(ye){Fy(k(),ye)||(k(ye),J()?.(ye))}function dt(ye){Fy(I(),ye)||(I(ye),oe()?.(ye))}let Yt=Bs(ub([])),Ft=Bs(null),Ot=Bs("none"),Kt=cr(()=>s()*a()),Dn=cr(()=>o()*a()),Ut=Bs(null),At=Bs(null),zt=Bs(null),nn=Bs(void 0),Ze=Bs(void 0),cn=cr(()=>h()?.minimumDensity??1/16),Fn=cr(()=>h()?.pointSize??null),An=cr(()=>h()?.mode??"points"),qn=cr(()=>h()?.autoLabelEnabled),Er=cr(()=>h()?.downsampleMaxPoints??4e6),Mi=cr(()=>h()?.downsampleDensityWeight??5),gi=cr(()=>Ce(ge)?h()?.mapStyle!==void 0?h().mapStyle:"https://tiles.openfreemap.org/styles/liberty":null),fs=cr(()=>GNe(p()??(f()??n().x.length)/4,Ce(cn),Ce(Se).scale,Ce(Kt),Ce(Dn),a(),Ce(Fn))),Hr=cr(()=>Ce(fs).pointSize),uo=!0;K3(()=>{Ce(At)?.setProps({mode:Ce(An),colorScheme:Ce(ae),viewportX:Ce(Se).x,viewportY:Ce(Se).y,viewportScale:Ce(Se).scale,width:Ce(Kt),height:Ce(Dn),x:n().x,y:Ce(xe),category:n().category,categoryCount:r(),categoryColors:Ce(se),downsampleMaxPoints:Ce(Er),downsampleDensityWeight:Ce(Mi),isGis:Ce(ge),...Ce(fs)})&&(Qi(),(Ce(qn)!==!1||g()!=null)&&uo&&Ce(At)!=null&&n().x!=null&&n().x.length>0&&M()!=null&&(uo=!1,Oe(M())))});function ei(){Ct=null,!(!Ce(Ut)||!Ce(At))&&(Ce(Ut).width=Ce(At).props.width,Ce(Ut).height=Ce(At).props.height,Ce(Ut).style.width=`${Ce(At).props.width/a()}px`,Ce(Ut).style.height=`${Ce(At).props.height/a()}px`,Ce(At).render())}let Ct=null;function Qi(){Ct==null&&(Ct=requestAnimationFrame(ei))}function ki(ye){let Je;function ft(){Je=ye.getContext("webgl2",{antialias:!1}),Je.getExtension("EXT_color_buffer_float"),Je.getExtension("EXT_float_blend"),Je.getExtension("OES_texture_float_linear"),hr(At,new cNe(Je,Ce(Kt),Ce(Dn)),!0)}ft(),ye.addEventListener("webglcontextlost",()=>{Ce(At)?.destroy(),hr(At,null),Je=null}),ye.addEventListener("webglcontextrestored",()=>{ft()})}function js(ye){async function Je(){let ft=ye.getContext("webgpu");if(ft==null){console.error("Could not get WebGPU canvas context");return}let Wt=await navigator.gpu.requestAdapter();if(!Wt){console.error("Could not request WebGPU adapter");return}let $t=512*1048576,mn=512*1048576;$t=Math.min($t,Wt.limits.maxBufferSize),mn=Math.min(mn,Wt.limits.maxStorageBufferBindingSize);let tr={requiredLimits:{maxBufferSize:$t,maxStorageBufferBindingSize:mn},requiredFeatures:["shader-f16"]},rr=await Wt.requestDevice(tr);rr.lost.then(ps=>{console.info(`WebGPU device was lost: ${ps.message}`),ps.reason!="destroyed"&&(Ce(At)?.destroy(),hr(At,null),Je())});let Hn=navigator.gpu.getPreferredCanvasFormat();ft.configure({device:rr,format:Hn,alphaMode:"premultiplied"}),hr(At,new PNe(ft,rr,Hn,Ce(Kt),Ce(Dn)),!0)}Je()}function Co(ye){ye!=null&&B()==null&&ut(ye)}K3(()=>Co(M())),Jh(()=>{if(Ce(Ze)&&Ce(Se)){const{x:ye,y:Je,scale:ft}=Ce(Se),Wt=Math.log2(360*ft*s()/1024);Ce(Ze).jumpTo({center:[ye,Ce(ge)?pc.unprojectLat(Je):Je],zoom:Wt})}}),Jh(()=>{Ce(Ze)&&s()&&o()&&Ce(Ze).resize()}),Jh(()=>{Ce(nn)&&Ce(gi)?Ce(Ze)?Ce(Ze).setStyle(Ce(gi)):hr(Ze,new kBe.Map({container:Ce(nn),style:Ce(gi),center:[Ce(Se).x,Ce(ge)?pc.unprojectLat(Ce(Se).y):Ce(Se).y],zoom:Math.log2(360*Ce(Se).scale*s()/1024),interactive:!1,attributionControl:!1}),!0):Ce(Ze)&&!Ce(gi)&&(Ce(Ze).remove(),hr(Ze,void 0))}),Qz(()=>{Ce(Ut)!=null&&(Vle()?js(Ce(Ut)):(ki(Ce(Ut)),hr(zt,"WebGPU is unavailable. Falling back to WebGL.")))}),U$e(()=>{Ce(At)?.destroy(),hr(At,null),Ce(Ze)&&(Ce(Ze).remove(),hr(Ze,void 0))});function Lt(ye){let Je=Ce(Ut)?.getBoundingClientRect()??{left:0,top:0};return{x:ye.clientX-Je.left,y:ye.clientY-Je.top}}function yn(ye){ye.preventDefault();let{x:Je,y:ft}=Lt(ye),Wt=Math.exp(-ye.deltaY/200);rn(Wt,{x:Je,y:ft})}function rn(ye,Je){let{x:ft,y:Wt,scale:$t}=Ce(Se);wt(null);let mn,tr;Ce(ge)?(mn=1/0,tr=1024/(360*s())):(mn=(M()?.scale??1)*100,tr=(M()?.scale??1)*.01);let rr=Math.min(mn,Math.max(tr,$t*ye)),Hn=Ce(Ut).getBoundingClientRect(),ps=Math.max(Hn.width,Hn.height),Mr=(Je.x-Hn.width/2)/ps*2,Ci=(Hn.height/2-Je.y)/ps*2,Ss=ft+Mr/$t-Mr/rr,ha=Wt+Ci/$t-Ci/rr;ut({x:Ss,y:ha,scale:rr})}function Xr(ye){wt(null);let Je="pan";Ce(Ot)!="none"?ye.modifiers.shift||(Je=Ce(Ot)):ye.modifiers.shift&&(Je=ye.modifiers.meta?"lasso":"marquee");let ft=Lt(ye);switch(Je){case"marquee":return{move:Wt=>{if(wt(null),Ce(At)==null)return;let $t=Lt(Wt),mn=Ce(Ue)(ft.x,ft.y),tr=Ce(Ue)($t.x,$t.y);dt({xMin:Math.min(mn.x,tr.x),yMin:Math.min(mn.y,tr.y),xMax:Math.max(mn.x,tr.x),yMax:Math.max(mn.y,tr.y)})}};case"lasso":{let Wt=[Ce(Ue)(ft.x,ft.y)];return{move:$t=>{if(wt(null),Ce(At)==null)return;let mn=Lt($t);Wt=[...Wt,Ce(Ue)(mn.x,mn.y)],Wt.length>=3&&dt(XNe(Wt,24))}}}case"pan":{let Wt=Ce(Ue)(0,0),$t=Ce(Ue)(1,1),mn=Wt.x-$t.x,tr=Ce(ge)?-mn:Wt.y-$t.y,rr=Ce(Se).x,Hn=Ce(Se).y;return{move:ps=>{ut({x:rr+(ps.clientX-ye.clientX)*mn,y:Hn+(ps.clientY-ye.clientY)*tr,scale:Ce(Se).scale})}}}}}async function si(ye){if(I()!=null)dt(null);else{const Je=await Ri(Lt(ye));if(Je==null)ot([]),wt(null);else if(ye.modifiers.shift||ye.modifiers.ctrl||ye.modifiers.meta){let ft=k()?.findIndex(Wt=>Wt.x==Je.x&&Wt.y==Je.y&&Wt.category==Je.category);k()==null||ft==null||ft<0?(ot([...k()??[],Je]),wt(Je)):(ot([...k().slice(0,ft),...k().slice(ft+1)]),wt(null))}else ot([Je]),wt(Je)}}let Tn=nBe(async ye=>{let Je=ye?Lt(ye):null;if(k()!=null&&k().length==1){let ft=Ce(He)(k()[0].x,k()[0].y);Je!=null&&rBe(Je,ft)<10&&wt(k()[0])}else wt(await Ri(Je))},()=>x()!=null);function Ms(ye){ye!=null?Ce(yt)||Tn(ye):Tn(null)}K3(()=>{Ce(yt)&&Tn(null)});async function Ri(ye){if(Ce(At)==null||ye==null||T()==null)return null;const{x:Je,y:ft}=Ce(Ue)(ye.x,ye.y),Wt=Math.abs(Ce(Ue)(ye.x+1,ye.y).x-Je),$t=Math.abs(Ce(Ue)(ye.x,ye.y+1).y-ft),mn=Math.max(Wt,$t);return await T()(Je,ft,mn)}async function oi(ye,Je,ft,Wt=.005){let $t=await ye.densityMap(1e3,1e3,Je,ft),mn=await BNe($t.data,$t.width,$t.height),tr=[];for(let Hn=0;Hn<mn.length;Hn++){let ps=mn[Hn],Mr=$t.coordinateAtPixel(ps.meanX,ps.meanY),Ci=ps.boundaryRectApproximation.map(([Ss,ha,Rs,Vu])=>{let ks=$t.coordinateAtPixel(Ss,ha),Li=$t.coordinateAtPixel(Rs,Vu);return{xMin:Math.min(ks.x,Li.x),xMax:Math.max(ks.x,Li.x),yMin:Math.min(ks.y,Li.y),yMax:Math.max(ks.y,Li.y)}});tr.push({x:Mr.x,y:Mr.y,sumDensity:ps.sumDensity,rects:Ci,bandwidth:Je})}let rr=tr.reduce((Hn,ps)=>Math.max(Hn,ps.sumDensity),0);return tr.filter(Hn=>Hn.sumDensity/rr>Wt)}async function Fi(ye){if(Ce(At)==null||b()==null)return[];let Je=await sBe({autoLabel:{version:1,viewport:ye,stopWords:h()?.autoLabelStopWords,densityThreshold:h()?.autoLabelDensityThreshold}});if(me()!=null){let $t=await me().get(Je);if($t!=null)return $t}let ft=await oi(Ce(At),10,ye,h()?.autoLabelDensityThreshold??.005);if(ft=ft.concat(await oi(Ce(At),5,ye)),b()){let $t=await b()(ft.map(mn=>mn.rects));for(let mn=0;mn<ft.length;mn++)ft[mn].label=$t[mn]}let Wt=ft.filter($t=>$t.label!=null&&$t.label.length>0).map($t=>({x:$t.x,y:$t.y,text:$t.label,priority:$t.sumDensity,level:$t.bandwidth==10?0:1}));return me()!=null&&await me().set(Je,Wt),Wt}async function Oe(ye){let Je=new pc(ye,1e3,1e3);if(Ce(At)!=null)if(g()!=null)hr(Yt,await yW(Je.scale(),g(),Ce(ce).fontFamily),!0);else{hr(Ft,"Generating labels...");let ft=await Fi(ye);hr(Yt,await yW(Je.scale(),ft,Ce(ce).fontFamily),!0),hr(Ft,null)}}class ne{content;constructor(Je,ft){let Wt=document.createElement("div");this.content=Wt,this.update(ft),Je.appendChild(Wt)}update(Je){let ft=this.content;ft.style.fontFamily=Je.fontFamily,Ce(ae)=="light"?(ft.style.color="#000",ft.style.background="#fff",ft.style.border="1px solid #000"):(ft.style.color="#ccc",ft.style.background="#000",ft.style.border="1px solid #ccc"),ft.style.borderRadius="2px",ft.style.padding="5px",ft.style.fontSize="12px",ft.style.maxWidth="300px",ft.innerText=Je.tooltip.text??JSON.stringify(Je.tooltip)}}var te=rze();let fe;var we=tl(te);let ze;aP(we,ye=>hr(nn,ye),()=>Ce(nn));var Ge=yo(we,2);zi(Ge,"",{},{position:"absolute",top:"0",left:"0","z-index":"1","pointer-events":"none"}),aP(Ge,ye=>hr(Ut,ye),()=>Ce(Ut));var et=yo(Ge,2);let Ie;var ht=tl(et);{var _t=ye=>{const Je=cr(()=>que(Q())),ft=cr(()=>({location:Ce(He),width:s(),height:o()}));var Wt=HS(),$t=qx(Wt);V$e($t,()=>Ce(Je),mn=>{var tr=YNe();od(tr,(rr,Hn)=>Ce(Je)?.(rr,Hn),()=>Zue(Q(),{proxy:Ce(ft)})),Vo(mn,tr)}),Vo(ye,Wt)};tc(ht,ye=>{Q()&&ye(_t)})}Oa(et);var rt=yo(et,2);zi(rt,"",{},{position:"absolute",left:"0",top:"0"});var Bt=tl(rt);{var On=ye=>{const Je=cr(()=>{const{x:tr,y:rr}=Ce(He)(x().x,x().y);return{x:tr,y:rr}}),ft=cr(()=>Math.max(3,Ce(Hr)/a())+1);var Wt=HS(),$t=qx(Wt);{var mn=tr=>{var rr=HNe();let Hn;fh(()=>{Bn(rr,"cx",Ce(Je).x),Bn(rr,"cy",Ce(Je).y),Bn(rr,"r",Ce(ft)),Hn=zi(rr,"",Hn,{stroke:Ce(ae)=="light"?"#000":"#fff","stroke-width":1,fill:"none"})}),Vo(tr,rr)};tc($t,tr=>{isFinite(Ce(Je).x)&&isFinite(Ce(Je).y)&&isFinite(Ce(ft))&&tr(mn)})}Vo(ye,Wt)};tc(Bt,ye=>{x()!=null&&Ce(At)!=null&&ye(On)})}var In=yo(Bt);{var Ir=ye=>{var Je=HS(),ft=qx(Je);qR(ft,17,k,VR,(Wt,$t)=>{const mn=cr(()=>{const{x:Ci,y:Ss}=Ce(He)(Ce($t).x,Ce($t).y);return{x:Ci,y:Ss}}),tr=cr(()=>Ce($t).category!=null?Ce(se)[Ce($t).category]:Ce(se)[0]),rr=cr(()=>Math.max(3,Ce(Hr)/a())+1);var Hn=HS(),ps=qx(Hn);{var Mr=Ci=>{var Ss=KNe();let ha;fh(()=>{Bn(Ss,"cx",Ce(mn).x),Bn(Ss,"cy",Ce(mn).y),Bn(Ss,"r",Ce(rr)),ha=zi(Ss,"",ha,{stroke:Ce(ae)=="light"?"#000":"#fff","stroke-width":2,fill:Ce(tr)})}),Vo(Ci,Ss)};tc(ps,Ci=>{isFinite(Ce(mn).x)&&isFinite(Ce(mn).y)&&isFinite(Ce(rr))&&Ci(Mr)})}Vo(Wt,Hn)}),Vo(ye,Je)};tc(In,ye=>{k()!=null&&Ce(At)!=null&&ye(Ir)})}var Gn=yo(In);{var ur=ye=>{var Je=nze();qR(Je,21,()=>Ce(Yt),VR,(ft,Wt)=>{const $t=cr(()=>Ce(Wt).text.split(`
`)),mn=cr(()=>Ce(He)(Ce(Wt).coordinate.x,Ce(Wt).coordinate.y)),tr=cr(()=>Ce(De).scale()),rr=cr(()=>Ce(Wt).placement!=null&&Ce(Wt).placement.minScale<=Ce(tr)&&Ce(tr)<=Ce(Wt).placement.maxScale);var Hn=tze(),ps=tl(Hn);{var Mr=Ci=>{var Ss=eze();qR(Ss,21,()=>Ce($t),VR,(ha,Rs,Vu)=>{var ks=JNe();Bn(ks,"x",0);let Li;var kh=tl(ks,!0);Oa(ks),fh(()=>{Bn(ks,"y",(Vu-(Ce($t).length-1)/2)*Ce(Wt).fontSize),Bn(ks,"font-size",Ce(Wt).fontSize),Li=zi(ks,"",Li,{"paint-order":"stroke","stroke-width":"4","stroke-linejoin":"round","stroke-linecap":"round","text-anchor":"middle",fill:Ce(ce).clusterLabelColor,stroke:Ce(ce).clusterLabelOutlineColor,opacity:Ce(ce).clusterLabelOpacity,"user-select":"none","-webkit-user-select":"none","font-family":Ce(ce).fontFamily}),J3(kh,Ce(Rs))}),Vo(ha,ks)}),Oa(Ss),Vo(Ci,Ss)};tc(ps,Ci=>{Ce(rr)&&Ci(Mr)})}Oa(Hn),fh(()=>Bn(Hn,"transform",`translate(${Ce(mn).x??""},${Ce(mn).y??""})`)),Vo(ft,Hn)}),Oa(Je),Vo(ye,Je)};tc(Gn,ye=>{ye(ur)})}var Cr=yo(Gn);{var ds=ye=>{var Je=HS(),ft=qx(Je);{var Wt=mn=>{uBe(mn,{get value(){return I()},get pointLocation(){return Ce(He)}})},$t=mn=>{tBe(mn,{get value(){return I()},onChange:dt,get pointLocation(){return Ce(He)},get coordinateAtPoint(){return Ce(Ue)},preventHover:tr=>{hr(yt,tr,!0)}})};tc(ft,mn=>{I()instanceof Array?mn(Wt):mn($t,!1)})}Vo(ye,Je)};tc(Cr,ye=>{I()!=null&&Ce(At)!=null&&ye(ds)})}Oa(rt),od(rt,(ye,Je)=>vs?.(ye,Je),()=>({click:si,drag:Xr,hover:Ms}));var ji=yo(rt,2);{var gr=ye=>{const Je=cr(()=>Ce(He)(x().x,x().y));{let ft=cr(()=>Math.max(3,Ce(Hr)/a())),Wt=cr(()=>j()??{class:ne,props:{colorScheme:Ce(ae),fontFamily:Ce(ce).fontFamily}});xBe(ye,{get location(){return Ce(Je)},get allowInteraction(){return Ce(at)},get targetHeight(){return Ce(ft)},get customTooltip(){return Ce(Wt)},get tooltip(){return x()}})}};tc(ji,ye=>{x()!=null&&Ce(At)!=null&&ye(gr)})}var hi=yo(ji,2);{var an=ye=>{{let Je=cr(()=>Ce(Ft)??Ce(zt)),ft=cr(()=>1/(Ce(He)(1,0).x-Ce(He)(0,0).x));vBe(ye,{get resolvedTheme(){return Ce(ce)},get statusMessage(){return Ce(Je)},get distancePerPoint(){return Ce(ft)},get pointCount(){return n().x.length},get selectionMode(){return Ce(Ot)},onSelectionMode:Wt=>hr(Ot,Wt,!0)})}};tc(hi,ye=>{Ce(ce).statusBar&&ye(an)})}Oa(te),fh(()=>{fe=zi(te,"",fe,{width:`${s()??""}px`,height:`${o()??""}px`,position:"relative"}),ze=zi(we,"",ze,{width:"100%",height:"100%",position:"absolute",top:"0",left:"0","z-index":"0","background-color":Ce(ge)&&!Ce(gi)?"black":void 0}),Ie=zi(et,"",Ie,{width:`${s()??""}px`,height:`${o()??""}px`,position:"absolute",top:"0",left:"0"}),Bn(rt,"width",s()),Bn(rt,"height",o())}),M$e("wheel",rt,yn),Vo(t,te),m_()}function wW(t,e){if(e.length==0)return kn(!1);if(t.identifier!=null){let n=t.identifier;return Od(...e.map(r=>ah(It(n),kn(r.identifier))))}else{let n=t.x,r=t.y,i=t.category;return i!=null?Od(...e.map(s=>wc(ah(ao(It(n),"DOUBLE"),kn(s.x)),ah(ao(It(r),"DOUBLE"),kn(s.y)),ah(ao(It(i),"INTEGER"),kn(s.category))))):Od(...e.map(s=>wc(ah(ao(It(n),"DOUBLE"),kn(s.x)),ah(ao(It(r),"DOUBLE"),kn(s.y)))))}}function sze(t,e,n){let r=[];for(let s=0;s<n.length;s++){let o=(s+1)%n.length,{x:a,y:l}=n[s],{x:h,y:f}=n[o],p=l<f?wc(_j(kn(l),e),nM(e,kn(f))):wc(_j(kn(f),e),nM(e,kn(l))),g=(l<f?nM:oD)(ka(aa(kn(h-a),e),aa(kn(f-l),t)),kn((h-a)*l-(f-l)*a));r.push(ao(wc(p,g),"INT"))}let i=r.reduce((s,o)=>Z$(s,o));return ah(wye(i,kn(2)),kn(1))}function oze(t,e){if(e instanceof Array){if(e.length<3)return kn(!1);let n=Vue(e);return wc(Ty(It(t.x),[n.xMin,n.xMax]),Ty(It(t.y),[n.yMin,n.yMax]),sze(It(t.x),It(t.y),e))}else return wc(Ty(It(t.x),[e.xMin,e.xMax]),Ty(It(t.y),[e.yMin,e.yMax]))}async function aze(t,e){let{x:n,y:r,table:i}=e,s=await t.query(Vn.from(i).select({centerX:ir`MEDIAN(${It(n)})`,centerY:ir`MEDIAN(${It(r)})`,stdX:ir`STDDEV(${It(n)})`,stdY:ir`STDDEV(${It(r)})`,...e.category!=null?{maxCategory:ir`MAX(${It(e.category)}::UTINYINT)`}:{}})),{centerX:o,centerY:a,stdX:l,stdY:h,maxCategory:f}=s.get(0),p=1/(Math.max(l,h,.001)*3),g=.1/p,b=ir`FLOOR((${It(n)} - ${o}) / ${g})`,x=ir`FLOOR((${It(r)} - ${a}) / ${g})`,k=e.category!=null?It(e.category):null,T=k!=null?[b,x,k]:[b,x],I=Vn.from(Vn.from(i).select({count:ir`COUNT(*)`}).groupby(...T)).select({totalCount:ir`SUM(count)::INT`,maxCount:ir`MAX(count)::INT`});s=await t.query(I);let{maxCount:M,totalCount:B}=s.get(0),j=M/(g*g);return{centerX:o,centerY:a,scaler:p,totalCount:B,categoryCount:(f??0)+1,maxDensity:j}}let lze=class{coordinator;source;lastDistance;selectParams;constructor(e,n){this.coordinator=e,this.source=n,this.lastDistance=0;let{x:r,y:i,category:s,text:o,identifier:a}=this.source,l={},h=n.additionalFields??{};for(let f in h){let p=h[f];typeof p=="string"?l["field_"+f]=It(p):l["field_"+f]=ir`${p.sql}`}this.selectParams={x:ir`${It(r)}::DOUBLE`,y:ir`${It(i)}::DOUBLE`,...s!=null?{category:ir`${It(s)}::INT`}:{},...o!=null?{text:ir`${It(o)}`}:{},...a!=null?{identifier:ir`${It(a)}`}:{},...l}}_convertToDataPoint(e){let n={};for(let r in e)r.startsWith("field_")&&(n[r.slice(6)]=e[r]);return{x:e.x,y:e.y,category:e.category,text:e.text,identifier:e.identifier,fields:n}}async queryClosestPoint(e,n,r,i){let s=i*12,{x:o,y:a}=this.source;for(let l of[this.lastDistance,s]){if(l==0||l>s)continue;let h=Vn.from(this.source.table).select(this.selectParams);h=h.where(ir`${It(o)} BETWEEN ${n-l} AND ${n+l}`),h=h.where(ir`${It(a)} BETWEEN ${r-l} AND ${r+l}`),e&&(h=h.where(e)),h=h.orderby(ir`(x - (${n}))**2 + (y - (${r}))**2`).limit(1);let f=(await this.coordinator.query(h)).get(0);if(f)return this.lastDistance=Math.max(Math.abs(f.x-n),Math.abs(f.y-r))*4,this._convertToDataPoint(f)}return null}async queryPoints(e){let{table:n,identifier:r}=this.source;if(r==null)return[];let i=Vn.from(n).select(this.selectParams);return i=i.where(Fb(It(r),e.map(s=>kn(s)))),Array.from(await this.coordinator.query(i)).map(s=>this._convertToDataPoint(s))}};function uze(t,e){p_(e,!0);let n=or(e,"coordinator",19,SC),r=or(e,"category",3,null),i=or(e,"text",3,null),s=or(e,"identifier",3,null),o=or(e,"filter",3,null),a=or(e,"categoryColors",3,null),l=or(e,"tooltip",3,null),h=or(e,"additionalFields",3,null),f=or(e,"selection",3,null),p=or(e,"rangeSelection",3,null),g=or(e,"rangeSelectionValue",3,null),b=or(e,"width",3,null),x=or(e,"height",3,null),k=or(e,"pixelRatio",3,null),T=or(e,"config",3,null),I=or(e,"theme",3,null),M=or(e,"viewportState",3,null),B=or(e,"labels",3,null),j=or(e,"customTooltip",3,null),Q=or(e,"customOverlay",3,null),Z=or(e,"onViewportState",3,null),q=or(e,"onTooltip",3,null),J=or(e,"onSelection",3,null),oe=or(e,"onRangeSelection",3,null),me=or(e,"cache",3,null),ae=Bs(new Float32Array),ce=Bs(new Float32Array),se=Bs(null),ge=Bs(1),xe=Bs(1),Se=Bs(1),De=Bs(null),He=Bs(null),Ue=Bs(null),yt=Bs(null),We=Bs(null);Jh(()=>{let Ot={coordinator:n(),source:{table:e.table,x:e.x,y:e.y,category:r()}},Kt=null,Dn=!1;async function Ut(){let At=Ot.source,zt=await aze(Ot.coordinator,At);if(Dn)return;let nn=zt.scaler*.95;hr(De,{x:zt.centerX,y:zt.centerY,scale:nn}),hr(xe,zt.totalCount),hr(Se,zt.maxDensity),hr(ge,zt.categoryCount),Kt=kC({coordinator:Ot.coordinator,selection:o()??void 0,query:Ze=>Vn.from(At.table).select({x:ir`${It(At.x)}::FLOAT`,y:ir`${It(At.y)}::FLOAT`,...At.category!=null?{c:ir`${It(At.category)}::UTINYINT`}:{}}).where(Ze),queryResult:Ze=>{let cn=Ze.getChild("x").toArray(),Fn=Ze.getChild("y").toArray(),An=Ze.getChild("c")?.toArray()??null;cn!=null&&!(cn instanceof Float32Array)&&(cn=new Float32Array(cn)),Fn!=null&&!(Fn instanceof Float32Array)&&(Fn=new Float32Array(Fn)),An!=null&&!(An instanceof Uint8Array)&&(An=new Uint8Array(An)),hr(ae,cn),hr(ce,Fn),hr(se,An),at(null),ut(null)}}),Kt.reset=()=>{wt()},hr(We,Kt)}return Ut(),()=>{hr(We,null),Dn=!0,Kt?.destroy()}}),Jh(()=>{if(kj(l())){let Ot=Ce(We);if(Ot==null)return;let Kt=l();hr(He,Kt.valueFor(Ot)??null);let Dn=()=>{hr(He,Kt.valueFor(Ot)??null)};return Jh(()=>{let Ut=Ce(He),At={x:e.x,y:e.y,category:r(),identifier:s()};Kt.update({source:Ot,clients:new Set().add(Ot),predicate:Ut!=null?wW(At,[Ut]):null,value:Ut})}),Kt.addEventListener("value",Dn),()=>{Kt.removeEventListener("value",Dn),Kt.update({source:Ot,clients:new Set().add(Ot),value:null,predicate:null})}}else if(l()==null||typeof l()=="object")hr(He,l());else{if(Ce(He)?.identifier==l())return;let Ot=!1;return Yt([l()]).then(Kt=>{Ot||(Kt.length>0?hr(He,Kt[0]):hr(He,null))}),()=>{Ot=!0}}});function at(Ot){Fy(l(),Ot)||(hr(He,Ot),q()?.(Ot))}Jh(()=>{if(kj(f())){let Ot=Ce(We);if(Ot==null)return;let Kt=f();hr(Ue,Kt.valueFor(Ot)??null);let Dn=()=>{hr(Ue,Kt.valueFor(Ot)??null)};return Jh(()=>{let Ut=Ce(Ue),At={x:e.x,y:e.y,category:r(),identifier:s()};Kt.update({source:Ot,clients:new Set().add(Ot),predicate:Ut!=null?wW(At,Ut):null,value:Ut})}),Kt.addEventListener("value",Dn),()=>{Kt.removeEventListener("value",Dn),Kt.update({source:Ot,clients:new Set().add(Ot),value:null,predicate:null})}}else if(f()==null)hr(Ue,null);else if(f().length==0)hr(Ue,[]);else if(f().every(Ot=>typeof Ot=="object"))hr(Ue,f());else{let Ot=!1;return Yt(f()).then(Kt=>{Ot||hr(Ue,Kt)}),()=>{Ot=!0}}});function ut(Ot){Fy(f(),Ot)||(hr(Ue,Ot),J()?.(Ot))}Jh(()=>{let Ot=Ce(We);if(Ot==null)return;let Kt=p();if(Kt!=null)return Jh(()=>{let Dn=Ce(yt),Ut={x:e.x,y:e.y},At={source:Ot,clients:new Set().add(Ot),predicate:Dn!=null?oze(Ut,Dn):null,value:Dn};Kt.update(At),Kt.activate(At)}),()=>{Kt.update({source:Ot,clients:new Set().add(Ot),value:null,predicate:null})}}),Jh(()=>{Fy(y_(()=>Ce(yt)),g())||hr(yt,g())});function wt(){ut(null),at(null),oe()?.(null),hr(yt,null)}let ot=cr(()=>new lze(n(),{table:e.table,x:e.x,y:e.y,category:r(),text:i(),identifier:s(),additionalFields:h()}));async function dt(Ot,Kt,Dn){return await Ce(ot).queryClosestPoint(o()?.predicate?.(Ce(We)),Ot,Kt,Dn)}async function Yt(Ot){return await Ce(ot).queryPoints(Ot)}async function Ft(Ot){if(i()==null)return Ot.map(()=>null);let Kt=await zNe({regions:Ot,stopWords:T()?.autoLabelStopWords??null}),Dn=0,Ut=1e4,At=null;for(;;){let nn=await n().query(Vn.from(e.table).select({x:It(e.x),y:It(e.y),text:It(i())}).offset(Dn).limit(Ut)),Ze={x:nn.getChild("x").toArray(),y:nn.getChild("y").toArray(),text:nn.getChild("text").toArray()};if(At!=null&&await At,At=jNe(Kt,Ze),nn.getChild("text").length<Ut)break;Dn+=Ut}At!=null&&await At;let zt=await UNe(Kt);return await QNe(Kt),zt.map(nn=>nn.length==0?null:nn.length>2?nn.slice(0,2).join("-")+`-
`+nn.slice(2).join("-"):nn.join("-"))}{let Ot=cr(()=>b()??800),Kt=cr(()=>x()??800),Dn=cr(()=>k()??2),Ut=cr(()=>({x:Ce(ae),y:Ce(ce),category:Ce(se)}));ize(t,{get width(){return Ce(Ot)},get height(){return Ce(Kt)},get pixelRatio(){return Ce(Dn)},get theme(){return I()},get config(){return T()},get data(){return Ce(Ut)},get totalCount(){return Ce(xe)},get maxDensity(){return Ce(Se)},get categoryCount(){return Ce(ge)},get categoryColors(){return a()},get defaultViewportState(){return Ce(De)},querySelection:dt,queryClusterLabels:Ft,get labels(){return B()},get customTooltip(){return j()},get customOverlay(){return Q()},get tooltip(){return Ce(He)},onTooltip:at,get selection(){return Ce(Ue)},onSelection:ut,get viewportState(){return M()},get onViewportState(){return Z()},get rangeSelection(){return Ce(yt)},onRangeSelection:At=>{hr(yt,At),oe()?.(At)},get cache(){return me()}})}m_()}let cze=class{component;currentProps;constructor(e,n){this.currentProps={...n},this.component=z$e({component:uze,target:e,props:n})}update(e){let n={};for(let r in e)e[r]!==this.currentProps[r]&&(n[r]=e[r],this.currentProps[r]=e[r]);this.component.$set(n)}destroy(){this.component.$destroy()}};function hze(){return Vle()?32:4}function U5(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function fze(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function cce(t){let e,n,r;t.length!==2?(e=U5,n=(a,l)=>U5(t(a),l),r=(a,l)=>t(a)-l):(e=t===U5||t===fze?t:dze,n=t,r=t);function i(a,l,h=0,f=a.length){if(h<f){if(e(l,l)!==0)return f;do{const p=h+f>>>1;n(a[p],l)<0?h=p+1:f=p}while(h<f)}return h}function s(a,l,h=0,f=a.length){if(h<f){if(e(l,l)!==0)return f;do{const p=h+f>>>1;n(a[p],l)<=0?h=p+1:f=p}while(h<f)}return h}function o(a,l,h=0,f=a.length){const p=i(a,l,h,f-1);return p>h&&r(a[p-1],l)>-r(a[p],l)?p-1:p}return{left:i,center:o,right:s}}function dze(){return 0}function pze(t){return t===null?NaN:+t}const mze=cce(U5),gze=mze.right;cce(pze).center;function yze(t,e){let n,r;if(e===void 0)for(const i of t)i!=null&&(n===void 0?i>=i&&(n=r=i):(n>i&&(n=i),r<i&&(r=i)));else{let i=-1;for(let s of t)(s=e(s,++i,t))!=null&&(n===void 0?s>=s&&(n=r=s):(n>s&&(n=s),r<s&&(r=s)))}return[n,r]}class OW extends Map{constructor(e,n=_ze){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),e!=null)for(const[r,i]of e)this.set(r,i)}get(e){return super.get(SW(this,e))}has(e){return super.has(SW(this,e))}set(e,n){return super.set(vze(this,e),n)}delete(e){return super.delete(bze(this,e))}}function SW({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):n}function vze({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):(t.set(r,n),n)}function bze({_intern:t,_key:e},n){const r=e(n);return t.has(r)&&(n=t.get(r),t.delete(r)),n}function _ze(t){return t!==null&&typeof t=="object"?t.valueOf():t}const xze=Math.sqrt(50),wze=Math.sqrt(10),Oze=Math.sqrt(2);function cP(t,e,n){const r=(e-t)/Math.max(0,n),i=Math.floor(Math.log10(r)),s=r/Math.pow(10,i),o=s>=xze?10:s>=wze?5:s>=Oze?2:1;let a,l,h;return i<0?(h=Math.pow(10,-i)/o,a=Math.round(t*h),l=Math.round(e*h),a/h<t&&++a,l/h>e&&--l,h=-h):(h=Math.pow(10,i)*o,a=Math.round(t/h),l=Math.round(e/h),a*h<t&&++a,l*h>e&&--l),l<a&&.5<=n&&n<2?cP(t,e,n*2):[a,l,h]}function mL(t,e,n){if(e=+e,t=+t,n=+n,!(n>0))return[];if(t===e)return[t];const r=e<t,[i,s,o]=r?cP(e,t,n):cP(t,e,n);if(!(s>=i))return[];const a=s-i+1,l=new Array(a);if(r)if(o<0)for(let h=0;h<a;++h)l[h]=(s-h)/-o;else for(let h=0;h<a;++h)l[h]=(s-h)*o;else if(o<0)for(let h=0;h<a;++h)l[h]=(i+h)/-o;else for(let h=0;h<a;++h)l[h]=(i+h)*o;return l}function gL(t,e,n){return e=+e,t=+t,n=+n,cP(t,e,n)[2]}function Sze(t,e,n){e=+e,t=+t,n=+n;const r=e<t,i=r?gL(e,t,n):gL(t,e,n);return(r?-1:1)*(i<0?1/-i:i)}function kze(t,e,n){t=+t,e=+e,n=(i=arguments.length)<2?(e=t,t=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((e-t)/n))|0,s=new Array(i);++r<i;)s[r]=t+r*n;return s}var Cze={value:()=>{}};function hce(){for(var t=0,e=arguments.length,n={},r;t<e;++t){if(!(r=arguments[t]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new V5(n)}function V5(t){this._=t}function Aze(t,e){return t.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!e.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}V5.prototype=hce.prototype={constructor:V5,on:function(t,e){var n=this._,r=Aze(t+"",n),i,s=-1,o=r.length;if(arguments.length<2){for(;++s<o;)if((i=(t=r[s]).type)&&(i=Eze(n[i],t.name)))return i;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++s<o;)if(i=(t=r[s]).type)n[i]=kW(n[i],t.name,e);else if(e==null)for(i in n)n[i]=kW(n[i],t.name,null);return this},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new V5(t)},call:function(t,e){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,s;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(s=this._[t],r=0,i=s.length;r<i;++r)s[r].value.apply(e,n)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,s=r.length;i<s;++i)r[i].value.apply(e,n)}};function Eze(t,e){for(var n=0,r=t.length,i;n<r;++n)if((i=t[n]).name===e)return i.value}function kW(t,e,n){for(var r=0,i=t.length;r<i;++r)if(t[r].name===e){t[r]=Cze,t=t.slice(0,r).concat(t.slice(r+1));break}return n!=null&&t.push({name:e,value:n}),t}var yL="http://www.w3.org/1999/xhtml";const CW={svg:"http://www.w3.org/2000/svg",xhtml:yL,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function lI(t){var e=t+="",n=e.indexOf(":");return n>=0&&(e=t.slice(0,n))!=="xmlns"&&(t=t.slice(n+1)),CW.hasOwnProperty(e)?{space:CW[e],local:t}:t}function Tze(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===yL&&e.documentElement.namespaceURI===yL?e.createElement(t):e.createElementNS(n,t)}}function Pze(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function fce(t){var e=lI(t);return(e.local?Pze:Tze)(e)}function Dze(){}function Zz(t){return t==null?Dze:function(){return this.querySelector(t)}}function Ize(t){typeof t!="function"&&(t=Zz(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var s=e[i],o=s.length,a=r[i]=new Array(o),l,h,f=0;f<o;++f)(l=s[f])&&(h=t.call(l,l.__data__,f,s))&&("__data__"in l&&(h.__data__=l.__data__),a[f]=h);return new Pd(r,this._parents)}function Mze(t){return t==null?[]:Array.isArray(t)?t:Array.from(t)}function Rze(){return[]}function dce(t){return t==null?Rze:function(){return this.querySelectorAll(t)}}function Fze(t){return function(){return Mze(t.apply(this,arguments))}}function Lze(t){typeof t=="function"?t=Fze(t):t=dce(t);for(var e=this._groups,n=e.length,r=[],i=[],s=0;s<n;++s)for(var o=e[s],a=o.length,l,h=0;h<a;++h)(l=o[h])&&(r.push(t.call(l,l.__data__,h,o)),i.push(l));return new Pd(r,i)}function pce(t){return function(){return this.matches(t)}}function mce(t){return function(e){return e.matches(t)}}var $ze=Array.prototype.find;function Bze(t){return function(){return $ze.call(this.children,t)}}function Nze(){return this.firstElementChild}function zze(t){return this.select(t==null?Nze:Bze(typeof t=="function"?t:mce(t)))}var Qze=Array.prototype.filter;function jze(){return Array.from(this.children)}function Uze(t){return function(){return Qze.call(this.children,t)}}function Vze(t){return this.selectAll(t==null?jze:Uze(typeof t=="function"?t:mce(t)))}function qze(t){typeof t!="function"&&(t=pce(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var s=e[i],o=s.length,a=r[i]=[],l,h=0;h<o;++h)(l=s[h])&&t.call(l,l.__data__,h,s)&&a.push(l);return new Pd(r,this._parents)}function gce(t){return new Array(t.length)}function Zze(){return new Pd(this._enter||this._groups.map(gce),this._parents)}function hP(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}hP.prototype={constructor:hP,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function Xze(t){return function(){return t}}function Wze(t,e,n,r,i,s){for(var o=0,a,l=e.length,h=s.length;o<h;++o)(a=e[o])?(a.__data__=s[o],r[o]=a):n[o]=new hP(t,s[o]);for(;o<l;++o)(a=e[o])&&(i[o]=a)}function Gze(t,e,n,r,i,s,o){var a,l,h=new Map,f=e.length,p=s.length,g=new Array(f),b;for(a=0;a<f;++a)(l=e[a])&&(g[a]=b=o.call(l,l.__data__,a,e)+"",h.has(b)?i[a]=l:h.set(b,l));for(a=0;a<p;++a)b=o.call(t,s[a],a,s)+"",(l=h.get(b))?(r[a]=l,l.__data__=s[a],h.delete(b)):n[a]=new hP(t,s[a]);for(a=0;a<f;++a)(l=e[a])&&h.get(g[a])===l&&(i[a]=l)}function Yze(t){return t.__data__}function Hze(t,e){if(!arguments.length)return Array.from(this,Yze);var n=e?Gze:Wze,r=this._parents,i=this._groups;typeof t!="function"&&(t=Xze(t));for(var s=i.length,o=new Array(s),a=new Array(s),l=new Array(s),h=0;h<s;++h){var f=r[h],p=i[h],g=p.length,b=Kze(t.call(f,f&&f.__data__,h,r)),x=b.length,k=a[h]=new Array(x),T=o[h]=new Array(x),I=l[h]=new Array(g);n(f,p,k,T,I,b,e);for(var M=0,B=0,j,Q;M<x;++M)if(j=k[M]){for(M>=B&&(B=M+1);!(Q=T[B])&&++B<x;);j._next=Q||null}}return o=new Pd(o,r),o._enter=a,o._exit=l,o}function Kze(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function Jze(){return new Pd(this._exit||this._groups.map(gce),this._parents)}function eQe(t,e,n){var r=this.enter(),i=this,s=this.exit();return typeof t=="function"?(r=t(r),r&&(r=r.selection())):r=r.append(t+""),e!=null&&(i=e(i),i&&(i=i.selection())),n==null?s.remove():n(s),r&&i?r.merge(i).order():i}function tQe(t){for(var e=t.selection?t.selection():t,n=this._groups,r=e._groups,i=n.length,s=r.length,o=Math.min(i,s),a=new Array(i),l=0;l<o;++l)for(var h=n[l],f=r[l],p=h.length,g=a[l]=new Array(p),b,x=0;x<p;++x)(b=h[x]||f[x])&&(g[x]=b);for(;l<i;++l)a[l]=n[l];return new Pd(a,this._parents)}function nQe(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var r=t[e],i=r.length-1,s=r[i],o;--i>=0;)(o=r[i])&&(s&&o.compareDocumentPosition(s)^4&&s.parentNode.insertBefore(o,s),s=o);return this}function rQe(t){t||(t=iQe);function e(p,g){return p&&g?t(p.__data__,g.__data__):!p-!g}for(var n=this._groups,r=n.length,i=new Array(r),s=0;s<r;++s){for(var o=n[s],a=o.length,l=i[s]=new Array(a),h,f=0;f<a;++f)(h=o[f])&&(l[f]=h);l.sort(e)}return new Pd(i,this._parents).order()}function iQe(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function sQe(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function oQe(){return Array.from(this)}function aQe(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,s=r.length;i<s;++i){var o=r[i];if(o)return o}return null}function lQe(){let t=0;for(const e of this)++t;return t}function uQe(){return!this.node()}function cQe(t){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var i=e[n],s=0,o=i.length,a;s<o;++s)(a=i[s])&&t.call(a,a.__data__,s,i);return this}function hQe(t){return function(){this.removeAttribute(t)}}function fQe(t){return function(){this.removeAttributeNS(t.space,t.local)}}function dQe(t,e){return function(){this.setAttribute(t,e)}}function pQe(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function mQe(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttribute(t):this.setAttribute(t,n)}}function gQe(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function yQe(t,e){var n=lI(t);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((e==null?n.local?fQe:hQe:typeof e=="function"?n.local?gQe:mQe:n.local?pQe:dQe)(n,e))}function yce(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function vQe(t){return function(){this.style.removeProperty(t)}}function bQe(t,e,n){return function(){this.style.setProperty(t,e,n)}}function _Qe(t,e,n){return function(){var r=e.apply(this,arguments);r==null?this.style.removeProperty(t):this.style.setProperty(t,r,n)}}function xQe(t,e,n){return arguments.length>1?this.each((e==null?vQe:typeof e=="function"?_Qe:bQe)(t,e,n??"")):E2(this.node(),t)}function E2(t,e){return t.style.getPropertyValue(e)||yce(t).getComputedStyle(t,null).getPropertyValue(e)}function wQe(t){return function(){delete this[t]}}function OQe(t,e){return function(){this[t]=e}}function SQe(t,e){return function(){var n=e.apply(this,arguments);n==null?delete this[t]:this[t]=n}}function kQe(t,e){return arguments.length>1?this.each((e==null?wQe:typeof e=="function"?SQe:OQe)(t,e)):this.node()[t]}function vce(t){return t.trim().split(/^|\s+/)}function Xz(t){return t.classList||new bce(t)}function bce(t){this._node=t,this._names=vce(t.getAttribute("class")||"")}bce.prototype={add:function(t){var e=this._names.indexOf(t);e<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function _ce(t,e){for(var n=Xz(t),r=-1,i=e.length;++r<i;)n.add(e[r])}function xce(t,e){for(var n=Xz(t),r=-1,i=e.length;++r<i;)n.remove(e[r])}function CQe(t){return function(){_ce(this,t)}}function AQe(t){return function(){xce(this,t)}}function EQe(t,e){return function(){(e.apply(this,arguments)?_ce:xce)(this,t)}}function TQe(t,e){var n=vce(t+"");if(arguments.length<2){for(var r=Xz(this.node()),i=-1,s=n.length;++i<s;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof e=="function"?EQe:e?CQe:AQe)(n,e))}function PQe(){this.textContent=""}function DQe(t){return function(){this.textContent=t}}function IQe(t){return function(){var e=t.apply(this,arguments);this.textContent=e??""}}function MQe(t){return arguments.length?this.each(t==null?PQe:(typeof t=="function"?IQe:DQe)(t)):this.node().textContent}function RQe(){this.innerHTML=""}function FQe(t){return function(){this.innerHTML=t}}function LQe(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e??""}}function $Qe(t){return arguments.length?this.each(t==null?RQe:(typeof t=="function"?LQe:FQe)(t)):this.node().innerHTML}function BQe(){this.nextSibling&&this.parentNode.appendChild(this)}function NQe(){return this.each(BQe)}function zQe(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function QQe(){return this.each(zQe)}function jQe(t){var e=typeof t=="function"?t:fce(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function UQe(){return null}function VQe(t,e){var n=typeof t=="function"?t:fce(t),r=e==null?UQe:typeof e=="function"?e:Zz(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function qQe(){var t=this.parentNode;t&&t.removeChild(this)}function ZQe(){return this.each(qQe)}function XQe(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function WQe(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function GQe(t){return this.select(t?WQe:XQe)}function YQe(t){return arguments.length?this.property("__data__",t):this.node().__data__}function HQe(t){return function(e){t.call(this,e,this.__data__)}}function KQe(t){return t.trim().split(/^|\s+/).map(function(e){var n="",r=e.indexOf(".");return r>=0&&(n=e.slice(r+1),e=e.slice(0,r)),{type:e,name:n}})}function JQe(t){return function(){var e=this.__on;if(e){for(var n=0,r=-1,i=e.length,s;n<i;++n)s=e[n],(!t.type||s.type===t.type)&&s.name===t.name?this.removeEventListener(s.type,s.listener,s.options):e[++r]=s;++r?e.length=r:delete this.__on}}}function eje(t,e,n){return function(){var r=this.__on,i,s=HQe(e);if(r){for(var o=0,a=r.length;o<a;++o)if((i=r[o]).type===t.type&&i.name===t.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=s,i.options=n),i.value=e;return}}this.addEventListener(t.type,s,n),i={type:t.type,name:t.name,value:e,listener:s,options:n},r?r.push(i):this.__on=[i]}}function tje(t,e,n){var r=KQe(t+""),i,s=r.length,o;if(arguments.length<2){var a=this.node().__on;if(a){for(var l=0,h=a.length,f;l<h;++l)for(i=0,f=a[l];i<s;++i)if((o=r[i]).type===f.type&&o.name===f.name)return f.value}return}for(a=e?eje:JQe,i=0;i<s;++i)this.each(a(r[i],e,n));return this}function wce(t,e,n){var r=yce(t),i=r.CustomEvent;typeof i=="function"?i=new i(e,n):(i=r.document.createEvent("Event"),n?(i.initEvent(e,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(e,!1,!1)),t.dispatchEvent(i)}function nje(t,e){return function(){return wce(this,t,e)}}function rje(t,e){return function(){return wce(this,t,e.apply(this,arguments))}}function ije(t,e){return this.each((typeof e=="function"?rje:nje)(t,e))}function*sje(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,s=r.length,o;i<s;++i)(o=r[i])&&(yield o)}var oje=[null];function Pd(t,e){this._groups=t,this._parents=e}function rA(){return new Pd([[document.documentElement]],oje)}function aje(){return this}Pd.prototype=rA.prototype={constructor:Pd,select:Ize,selectAll:Lze,selectChild:zze,selectChildren:Vze,filter:qze,data:Hze,enter:Zze,exit:Jze,join:eQe,merge:tQe,selection:aje,order:nQe,sort:rQe,call:sQe,nodes:oQe,node:aQe,size:lQe,empty:uQe,each:cQe,attr:yQe,style:xQe,property:kQe,classed:TQe,text:MQe,html:$Qe,raise:NQe,lower:QQe,append:jQe,insert:VQe,remove:ZQe,clone:GQe,datum:YQe,on:tje,dispatch:ije,[Symbol.iterator]:sje};function gO(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function iA(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function T1(){}var Wb=.7,T2=1/Wb,Fw="\\s*([+-]?\\d+)\\s*",aC="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",im="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",lje=/^#([0-9a-f]{3,8})$/,uje=new RegExp(`^rgb\\(${Fw},${Fw},${Fw}\\)$`),cje=new RegExp(`^rgb\\(${im},${im},${im}\\)$`),hje=new RegExp(`^rgba\\(${Fw},${Fw},${Fw},${aC}\\)$`),fje=new RegExp(`^rgba\\(${im},${im},${im},${aC}\\)$`),dje=new RegExp(`^hsl\\(${aC},${im},${im}\\)$`),pje=new RegExp(`^hsla\\(${aC},${im},${im},${aC}\\)$`),AW={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};gO(T1,Gb,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:EW,formatHex:EW,formatHex8:mje,formatHsl:gje,formatRgb:TW,toString:TW});function EW(){return this.rgb().formatHex()}function mje(){return this.rgb().formatHex8()}function gje(){return Oce(this).formatHsl()}function TW(){return this.rgb().formatRgb()}function Gb(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=lje.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?PW(e):n===3?new sl(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?z4(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?z4(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=uje.exec(t))?new sl(e[1],e[2],e[3],1):(e=cje.exec(t))?new sl(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=hje.exec(t))?z4(e[1],e[2],e[3],e[4]):(e=fje.exec(t))?z4(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=dje.exec(t))?MW(e[1],e[2]/100,e[3]/100,1):(e=pje.exec(t))?MW(e[1],e[2]/100,e[3]/100,e[4]):AW.hasOwnProperty(t)?PW(AW[t]):t==="transparent"?new sl(NaN,NaN,NaN,0):null}function PW(t){return new sl(t>>16&255,t>>8&255,t&255,1)}function z4(t,e,n,r){return r<=0&&(t=e=n=NaN),new sl(t,e,n,r)}function Wz(t){return t instanceof T1||(t=Gb(t)),t?(t=t.rgb(),new sl(t.r,t.g,t.b,t.opacity)):new sl}function P2(t,e,n,r){return arguments.length===1?Wz(t):new sl(t,e,n,r??1)}function sl(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}gO(sl,P2,iA(T1,{brighter(t){return t=t==null?T2:Math.pow(T2,t),new sl(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?Wb:Math.pow(Wb,t),new sl(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new sl(Sb(this.r),Sb(this.g),Sb(this.b),fP(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:DW,formatHex:DW,formatHex8:yje,formatRgb:IW,toString:IW}));function DW(){return`#${fb(this.r)}${fb(this.g)}${fb(this.b)}`}function yje(){return`#${fb(this.r)}${fb(this.g)}${fb(this.b)}${fb((isNaN(this.opacity)?1:this.opacity)*255)}`}function IW(){const t=fP(this.opacity);return`${t===1?"rgb(":"rgba("}${Sb(this.r)}, ${Sb(this.g)}, ${Sb(this.b)}${t===1?")":`, ${t})`}`}function fP(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function Sb(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function fb(t){return t=Sb(t),(t<16?"0":"")+t.toString(16)}function MW(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new bd(t,e,n,r)}function Oce(t){if(t instanceof bd)return new bd(t.h,t.s,t.l,t.opacity);if(t instanceof T1||(t=Gb(t)),!t)return new bd;if(t instanceof bd)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),s=Math.max(e,n,r),o=NaN,a=s-i,l=(s+i)/2;return a?(e===s?o=(n-r)/a+(n<r)*6:n===s?o=(r-e)/a+2:o=(e-n)/a+4,a/=l<.5?s+i:2-s-i,o*=60):a=l>0&&l<1?0:o,new bd(o,a,l,t.opacity)}function vje(t,e,n,r){return arguments.length===1?Oce(t):new bd(t,e,n,r??1)}function bd(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}gO(bd,vje,iA(T1,{brighter(t){return t=t==null?T2:Math.pow(T2,t),new bd(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?Wb:Math.pow(Wb,t),new bd(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new sl(JR(t>=240?t-240:t+120,i,r),JR(t,i,r),JR(t<120?t+240:t-120,i,r),this.opacity)},clamp(){return new bd(RW(this.h),Q4(this.s),Q4(this.l),fP(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=fP(this.opacity);return`${t===1?"hsl(":"hsla("}${RW(this.h)}, ${Q4(this.s)*100}%, ${Q4(this.l)*100}%${t===1?")":`, ${t})`}`}}));function RW(t){return t=(t||0)%360,t<0?t+360:t}function Q4(t){return Math.max(0,Math.min(1,t||0))}function JR(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const Sce=Math.PI/180,kce=180/Math.PI,dP=18,Cce=.96422,Ace=1,Ece=.82521,Tce=4/29,Lw=6/29,Pce=3*Lw*Lw,bje=Lw*Lw*Lw;function Dce(t){if(t instanceof sm)return new sm(t.l,t.a,t.b,t.opacity);if(t instanceof Vg)return Mce(t);t instanceof sl||(t=Wz(t));var e=r7(t.r),n=r7(t.g),r=r7(t.b),i=e7((.2225045*e+.7168786*n+.0606169*r)/Ace),s,o;return e===n&&n===r?s=o=i:(s=e7((.4360747*e+.3850649*n+.1430804*r)/Cce),o=e7((.0139322*e+.0971045*n+.7141733*r)/Ece)),new sm(116*i-16,500*(s-i),200*(i-o),t.opacity)}function Ice(t,e,n,r){return arguments.length===1?Dce(t):new sm(t,e,n,r??1)}function sm(t,e,n,r){this.l=+t,this.a=+e,this.b=+n,this.opacity=+r}gO(sm,Ice,iA(T1,{brighter(t){return new sm(this.l+dP*(t??1),this.a,this.b,this.opacity)},darker(t){return new sm(this.l-dP*(t??1),this.a,this.b,this.opacity)},rgb(){var t=(this.l+16)/116,e=isNaN(this.a)?t:t+this.a/500,n=isNaN(this.b)?t:t-this.b/200;return e=Cce*t7(e),t=Ace*t7(t),n=Ece*t7(n),new sl(n7(3.1338561*e-1.6168667*t-.4906146*n),n7(-.9787684*e+1.9161415*t+.033454*n),n7(.0719453*e-.2289914*t+1.4052427*n),this.opacity)}}));function e7(t){return t>bje?Math.pow(t,1/3):t/Pce+Tce}function t7(t){return t>Lw?t*t*t:Pce*(t-Tce)}function n7(t){return 255*(t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055)}function r7(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function _je(t){if(t instanceof Vg)return new Vg(t.h,t.c,t.l,t.opacity);if(t instanceof sm||(t=Dce(t)),t.a===0&&t.b===0)return new Vg(NaN,0<t.l&&t.l<100?0:NaN,t.l,t.opacity);var e=Math.atan2(t.b,t.a)*kce;return new Vg(e<0?e+360:e,Math.sqrt(t.a*t.a+t.b*t.b),t.l,t.opacity)}function xje(t,e,n,r){return arguments.length===1?_je(t):new Vg(t,e,n,r??1)}function Vg(t,e,n,r){this.h=+t,this.c=+e,this.l=+n,this.opacity=+r}function Mce(t){if(isNaN(t.h))return new sm(t.l,0,0,t.opacity);var e=t.h*Sce;return new sm(t.l,Math.cos(e)*t.c,Math.sin(e)*t.c,t.opacity)}gO(Vg,xje,iA(T1,{brighter(t){return new Vg(this.h,this.c,this.l+dP*(t??1),this.opacity)},darker(t){return new Vg(this.h,this.c,this.l-dP*(t??1),this.opacity)},rgb(){return Mce(this).rgb()}}));var Rce=-.14861,Gz=1.78277,Yz=-.29227,uI=-.90649,lC=1.97294,FW=lC*uI,LW=lC*Gz,$W=Gz*Yz-uI*Rce;function wje(t){if(t instanceof kb)return new kb(t.h,t.s,t.l,t.opacity);t instanceof sl||(t=Wz(t));var e=t.r/255,n=t.g/255,r=t.b/255,i=($W*r+FW*e-LW*n)/($W+FW-LW),s=r-i,o=(lC*(n-i)-Yz*s)/uI,a=Math.sqrt(o*o+s*s)/(lC*i*(1-i)),l=a?Math.atan2(o,s)*kce-120:NaN;return new kb(l<0?l+360:l,a,i,t.opacity)}function ym(t,e,n,r){return arguments.length===1?wje(t):new kb(t,e,n,r??1)}function kb(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}gO(kb,ym,iA(T1,{brighter(t){return t=t==null?T2:Math.pow(T2,t),new kb(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?Wb:Math.pow(Wb,t),new kb(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=isNaN(this.h)?0:(this.h+120)*Sce,e=+this.l,n=isNaN(this.s)?0:this.s*e*(1-e),r=Math.cos(t),i=Math.sin(t);return new sl(255*(e+n*(Rce*r+Gz*i)),255*(e+n*(Yz*r+uI*i)),255*(e+n*(lC*r)),this.opacity)}}));function Oje(t,e,n,r,i){var s=t*t,o=s*t;return((1-3*t+3*s-o)*e+(4-6*s+3*o)*n+(1+3*t+3*s-3*o)*r+o*i)/6}function Sje(t){var e=t.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,e-1):Math.floor(n*e),i=t[r],s=t[r+1],o=r>0?t[r-1]:2*i-s,a=r<e-1?t[r+2]:2*s-i;return Oje((n-r/e)*e,o,i,s,a)}}const cI=t=>()=>t;function Fce(t,e){return function(n){return t+n*e}}function kje(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function Cje(t,e){var n=e-t;return n?Fce(t,n>180||n<-180?n-360*Math.round(n/360):n):cI(isNaN(t)?e:t)}function Aje(t){return(t=+t)==1?$w:function(e,n){return n-e?kje(e,n,t):cI(isNaN(e)?n:e)}}function $w(t,e){var n=e-t;return n?Fce(t,n):cI(isNaN(t)?e:t)}const pP=(function t(e){var n=Aje(e);function r(i,s){var o=n((i=P2(i)).r,(s=P2(s)).r),a=n(i.g,s.g),l=n(i.b,s.b),h=$w(i.opacity,s.opacity);return function(f){return i.r=o(f),i.g=a(f),i.b=l(f),i.opacity=h(f),i+""}}return r.gamma=t,r})(1);function Eje(t){return function(e){var n=e.length,r=new Array(n),i=new Array(n),s=new Array(n),o,a;for(o=0;o<n;++o)a=P2(e[o]),r[o]=a.r||0,i[o]=a.g||0,s[o]=a.b||0;return r=t(r),i=t(i),s=t(s),a.opacity=1,function(l){return a.r=r(l),a.g=i(l),a.b=s(l),a+""}}}var Hz=Eje(Sje);function Tje(t,e){e||(e=[]);var n=t?Math.min(e.length,t.length):0,r=e.slice(),i;return function(s){for(i=0;i<n;++i)r[i]=t[i]*(1-s)+e[i]*s;return r}}function Pje(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function Dje(t,e){var n=e?e.length:0,r=t?Math.min(n,t.length):0,i=new Array(r),s=new Array(n),o;for(o=0;o<r;++o)i[o]=Kz(t[o],e[o]);for(;o<n;++o)s[o]=e[o];return function(a){for(o=0;o<r;++o)s[o]=i[o](a);return s}}function Ije(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}}function dd(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function Mje(t,e){var n={},r={},i;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(i in e)i in t?n[i]=Kz(t[i],e[i]):r[i]=e[i];return function(s){for(i in n)r[i]=n[i](s);return r}}var vL=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,i7=new RegExp(vL.source,"g");function Rje(t){return function(){return t}}function Fje(t){return function(e){return t(e)+""}}function Lce(t,e){var n=vL.lastIndex=i7.lastIndex=0,r,i,s,o=-1,a=[],l=[];for(t=t+"",e=e+"";(r=vL.exec(t))&&(i=i7.exec(e));)(s=i.index)>n&&(s=e.slice(n,s),a[o]?a[o]+=s:a[++o]=s),(r=r[0])===(i=i[0])?a[o]?a[o]+=i:a[++o]=i:(a[++o]=null,l.push({i:o,x:dd(r,i)})),n=i7.lastIndex;return n<e.length&&(s=e.slice(n),a[o]?a[o]+=s:a[++o]=s),a.length<2?l[0]?Fje(l[0].x):Rje(e):(e=l.length,function(h){for(var f=0,p;f<e;++f)a[(p=l[f]).i]=p.x(h);return a.join("")})}function Kz(t,e){var n=typeof e,r;return e==null||n==="boolean"?cI(e):(n==="number"?dd:n==="string"?(r=Gb(e))?(e=r,pP):Lce:e instanceof Gb?pP:e instanceof Date?Ije:Pje(e)?Tje:Array.isArray(e)?Dje:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?Mje:dd)(t,e)}function Lje(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}var BW=180/Math.PI,bL={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function $ce(t,e,n,r,i,s){var o,a,l;return(o=Math.sqrt(t*t+e*e))&&(t/=o,e/=o),(l=t*n+e*r)&&(n-=t*l,r-=e*l),(a=Math.sqrt(n*n+r*r))&&(n/=a,r/=a,l/=a),t*r<e*n&&(t=-t,e=-e,l=-l,o=-o),{translateX:i,translateY:s,rotate:Math.atan2(e,t)*BW,skewX:Math.atan(l)*BW,scaleX:o,scaleY:a}}var j4;function $je(t){const e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?bL:$ce(e.a,e.b,e.c,e.d,e.e,e.f)}function Bje(t){return t==null||(j4||(j4=document.createElementNS("http://www.w3.org/2000/svg","g")),j4.setAttribute("transform",t),!(t=j4.transform.baseVal.consolidate()))?bL:(t=t.matrix,$ce(t.a,t.b,t.c,t.d,t.e,t.f))}function Bce(t,e,n,r){function i(h){return h.length?h.pop()+" ":""}function s(h,f,p,g,b,x){if(h!==p||f!==g){var k=b.push("translate(",null,e,null,n);x.push({i:k-4,x:dd(h,p)},{i:k-2,x:dd(f,g)})}else(p||g)&&b.push("translate("+p+e+g+n)}function o(h,f,p,g){h!==f?(h-f>180?f+=360:f-h>180&&(h+=360),g.push({i:p.push(i(p)+"rotate(",null,r)-2,x:dd(h,f)})):f&&p.push(i(p)+"rotate("+f+r)}function a(h,f,p,g){h!==f?g.push({i:p.push(i(p)+"skewX(",null,r)-2,x:dd(h,f)}):f&&p.push(i(p)+"skewX("+f+r)}function l(h,f,p,g,b,x){if(h!==p||f!==g){var k=b.push(i(b)+"scale(",null,",",null,")");x.push({i:k-4,x:dd(h,p)},{i:k-2,x:dd(f,g)})}else(p!==1||g!==1)&&b.push(i(b)+"scale("+p+","+g+")")}return function(h,f){var p=[],g=[];return h=t(h),f=t(f),s(h.translateX,h.translateY,f.translateX,f.translateY,p,g),o(h.rotate,f.rotate,p,g),a(h.skewX,f.skewX,p,g),l(h.scaleX,h.scaleY,f.scaleX,f.scaleY,p,g),h=f=null,function(b){for(var x=-1,k=g.length,T;++x<k;)p[(T=g[x]).i]=T.x(b);return p.join("")}}}var Nje=Bce($je,"px, ","px)","deg)"),zje=Bce(Bje,", ",")",")");function Nce(t){return(function e(n){n=+n;function r(i,s){var o=t((i=ym(i)).h,(s=ym(s)).h),a=$w(i.s,s.s),l=$w(i.l,s.l),h=$w(i.opacity,s.opacity);return function(f){return i.h=o(f),i.s=a(f),i.l=l(Math.pow(f,n)),i.opacity=h(f),i+""}}return r.gamma=e,r})(1)}Nce(Cje);var Jz=Nce($w),D2=0,C3=0,JS=0,zce=1e3,mP,A3,gP=0,Yb=0,hI=0,uC=typeof performance=="object"&&performance.now?performance:Date,Qce=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function eQ(){return Yb||(Qce(Qje),Yb=uC.now()+hI)}function Qje(){Yb=0}function yP(){this._call=this._time=this._next=null}yP.prototype=jce.prototype={constructor:yP,restart:function(t,e,n){if(typeof t!="function")throw new TypeError("callback is not a function");n=(n==null?eQ():+n)+(e==null?0:+e),!this._next&&A3!==this&&(A3?A3._next=this:mP=this,A3=this),this._call=t,this._time=n,_L()},stop:function(){this._call&&(this._call=null,this._time=1/0,_L())}};function jce(t,e,n){var r=new yP;return r.restart(t,e,n),r}function jje(){eQ(),++D2;for(var t=mP,e;t;)(e=Yb-t._time)>=0&&t._call.call(void 0,e),t=t._next;--D2}function NW(){Yb=(gP=uC.now())+hI,D2=C3=0;try{jje()}finally{D2=0,Vje(),Yb=0}}function Uje(){var t=uC.now(),e=t-gP;e>zce&&(hI-=e,gP=t)}function Vje(){for(var t,e=mP,n,r=1/0;e;)e._call?(r>e._time&&(r=e._time),t=e,e=e._next):(n=e._next,e._next=null,e=t?t._next=n:mP=n);A3=t,_L(r)}function _L(t){if(!D2){C3&&(C3=clearTimeout(C3));var e=t-Yb;e>24?(t<1/0&&(C3=setTimeout(NW,t-uC.now()-hI)),JS&&(JS=clearInterval(JS))):(JS||(gP=uC.now(),JS=setInterval(Uje,zce)),D2=1,Qce(NW))}}function zW(t,e,n){var r=new yP;return e=e==null?0:+e,r.restart(i=>{r.stop(),t(i+e)},e,n),r}var qje=hce("start","end","cancel","interrupt"),Zje=[],Uce=0,QW=1,xL=2,q5=3,jW=4,wL=5,Z5=6;function fI(t,e,n,r,i,s){var o=t.__transition;if(!o)t.__transition={};else if(n in o)return;Xje(t,n,{name:e,index:r,group:i,on:qje,tween:Zje,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:Uce})}function tQ(t,e){var n=jd(t,e);if(n.state>Uce)throw new Error("too late; already scheduled");return n}function Dm(t,e){var n=jd(t,e);if(n.state>q5)throw new Error("too late; already running");return n}function jd(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}function Xje(t,e,n){var r=t.__transition,i;r[e]=n,n.timer=jce(s,0,n.time);function s(h){n.state=QW,n.timer.restart(o,n.delay,n.time),n.delay<=h&&o(h-n.delay)}function o(h){var f,p,g,b;if(n.state!==QW)return l();for(f in r)if(b=r[f],b.name===n.name){if(b.state===q5)return zW(o);b.state===jW?(b.state=Z5,b.timer.stop(),b.on.call("interrupt",t,t.__data__,b.index,b.group),delete r[f]):+f<e&&(b.state=Z5,b.timer.stop(),b.on.call("cancel",t,t.__data__,b.index,b.group),delete r[f])}if(zW(function(){n.state===q5&&(n.state=jW,n.timer.restart(a,n.delay,n.time),a(h))}),n.state=xL,n.on.call("start",t,t.__data__,n.index,n.group),n.state===xL){for(n.state=q5,i=new Array(g=n.tween.length),f=0,p=-1;f<g;++f)(b=n.tween[f].value.call(t,t.__data__,n.index,n.group))&&(i[++p]=b);i.length=p+1}}function a(h){for(var f=h<n.duration?n.ease.call(null,h/n.duration):(n.timer.restart(l),n.state=wL,1),p=-1,g=i.length;++p<g;)i[p].call(t,f);n.state===wL&&(n.on.call("end",t,t.__data__,n.index,n.group),l())}function l(){n.state=Z5,n.timer.stop(),delete r[e];for(var h in r)return;delete t.__transition}}function Wje(t,e){var n=t.__transition,r,i,s=!0,o;if(n){e=e==null?null:e+"";for(o in n){if((r=n[o]).name!==e){s=!1;continue}i=r.state>xL&&r.state<wL,r.state=Z5,r.timer.stop(),r.on.call(i?"interrupt":"cancel",t,t.__data__,r.index,r.group),delete n[o]}s&&delete t.__transition}}function Gje(t){return this.each(function(){Wje(this,t)})}function Yje(t,e){var n,r;return function(){var i=Dm(this,t),s=i.tween;if(s!==n){r=n=s;for(var o=0,a=r.length;o<a;++o)if(r[o].name===e){r=r.slice(),r.splice(o,1);break}}i.tween=r}}function Hje(t,e,n){var r,i;if(typeof n!="function")throw new Error;return function(){var s=Dm(this,t),o=s.tween;if(o!==r){i=(r=o).slice();for(var a={name:e,value:n},l=0,h=i.length;l<h;++l)if(i[l].name===e){i[l]=a;break}l===h&&i.push(a)}s.tween=i}}function Kje(t,e){var n=this._id;if(t+="",arguments.length<2){for(var r=jd(this.node(),n).tween,i=0,s=r.length,o;i<s;++i)if((o=r[i]).name===t)return o.value;return null}return this.each((e==null?Yje:Hje)(n,t,e))}function nQ(t,e,n){var r=t._id;return t.each(function(){var i=Dm(this,r);(i.value||(i.value={}))[e]=n.apply(this,arguments)}),function(i){return jd(i,r).value[e]}}function Vce(t,e){var n;return(typeof e=="number"?dd:e instanceof Gb?pP:(n=Gb(e))?(e=n,pP):Lce)(t,e)}function Jje(t){return function(){this.removeAttribute(t)}}function eUe(t){return function(){this.removeAttributeNS(t.space,t.local)}}function tUe(t,e,n){var r,i=n+"",s;return function(){var o=this.getAttribute(t);return o===i?null:o===r?s:s=e(r=o,n)}}function nUe(t,e,n){var r,i=n+"",s;return function(){var o=this.getAttributeNS(t.space,t.local);return o===i?null:o===r?s:s=e(r=o,n)}}function rUe(t,e,n){var r,i,s;return function(){var o,a=n(this),l;return a==null?void this.removeAttribute(t):(o=this.getAttribute(t),l=a+"",o===l?null:o===r&&l===i?s:(i=l,s=e(r=o,a)))}}function iUe(t,e,n){var r,i,s;return function(){var o,a=n(this),l;return a==null?void this.removeAttributeNS(t.space,t.local):(o=this.getAttributeNS(t.space,t.local),l=a+"",o===l?null:o===r&&l===i?s:(i=l,s=e(r=o,a)))}}function sUe(t,e){var n=lI(t),r=n==="transform"?zje:Vce;return this.attrTween(t,typeof e=="function"?(n.local?iUe:rUe)(n,r,nQ(this,"attr."+t,e)):e==null?(n.local?eUe:Jje)(n):(n.local?nUe:tUe)(n,r,e))}function oUe(t,e){return function(n){this.setAttribute(t,e.call(this,n))}}function aUe(t,e){return function(n){this.setAttributeNS(t.space,t.local,e.call(this,n))}}function lUe(t,e){var n,r;function i(){var s=e.apply(this,arguments);return s!==r&&(n=(r=s)&&aUe(t,s)),n}return i._value=e,i}function uUe(t,e){var n,r;function i(){var s=e.apply(this,arguments);return s!==r&&(n=(r=s)&&oUe(t,s)),n}return i._value=e,i}function cUe(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(e==null)return this.tween(n,null);if(typeof e!="function")throw new Error;var r=lI(t);return this.tween(n,(r.local?lUe:uUe)(r,e))}function hUe(t,e){return function(){tQ(this,t).delay=+e.apply(this,arguments)}}function fUe(t,e){return e=+e,function(){tQ(this,t).delay=e}}function dUe(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?hUe:fUe)(e,t)):jd(this.node(),e).delay}function pUe(t,e){return function(){Dm(this,t).duration=+e.apply(this,arguments)}}function mUe(t,e){return e=+e,function(){Dm(this,t).duration=e}}function gUe(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?pUe:mUe)(e,t)):jd(this.node(),e).duration}function yUe(t,e){if(typeof e!="function")throw new Error;return function(){Dm(this,t).ease=e}}function vUe(t){var e=this._id;return arguments.length?this.each(yUe(e,t)):jd(this.node(),e).ease}function bUe(t,e){return function(){var n=e.apply(this,arguments);if(typeof n!="function")throw new Error;Dm(this,t).ease=n}}function _Ue(t){if(typeof t!="function")throw new Error;return this.each(bUe(this._id,t))}function xUe(t){typeof t!="function"&&(t=pce(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var s=e[i],o=s.length,a=r[i]=[],l,h=0;h<o;++h)(l=s[h])&&t.call(l,l.__data__,h,s)&&a.push(l);return new f0(r,this._parents,this._name,this._id)}function wUe(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,r=e.length,i=n.length,s=Math.min(r,i),o=new Array(r),a=0;a<s;++a)for(var l=e[a],h=n[a],f=l.length,p=o[a]=new Array(f),g,b=0;b<f;++b)(g=l[b]||h[b])&&(p[b]=g);for(;a<r;++a)o[a]=e[a];return new f0(o,this._parents,this._name,this._id)}function OUe(t){return(t+"").trim().split(/^|\s+/).every(function(e){var n=e.indexOf(".");return n>=0&&(e=e.slice(0,n)),!e||e==="start"})}function SUe(t,e,n){var r,i,s=OUe(e)?tQ:Dm;return function(){var o=s(this,t),a=o.on;a!==r&&(i=(r=a).copy()).on(e,n),o.on=i}}function kUe(t,e){var n=this._id;return arguments.length<2?jd(this.node(),n).on.on(t):this.each(SUe(n,t,e))}function CUe(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}}function AUe(){return this.on("end.remove",CUe(this._id))}function EUe(t){var e=this._name,n=this._id;typeof t!="function"&&(t=Zz(t));for(var r=this._groups,i=r.length,s=new Array(i),o=0;o<i;++o)for(var a=r[o],l=a.length,h=s[o]=new Array(l),f,p,g=0;g<l;++g)(f=a[g])&&(p=t.call(f,f.__data__,g,a))&&("__data__"in f&&(p.__data__=f.__data__),h[g]=p,fI(h[g],e,n,g,h,jd(f,n)));return new f0(s,this._parents,e,n)}function TUe(t){var e=this._name,n=this._id;typeof t!="function"&&(t=dce(t));for(var r=this._groups,i=r.length,s=[],o=[],a=0;a<i;++a)for(var l=r[a],h=l.length,f,p=0;p<h;++p)if(f=l[p]){for(var g=t.call(f,f.__data__,p,l),b,x=jd(f,n),k=0,T=g.length;k<T;++k)(b=g[k])&&fI(b,e,n,k,g,x);s.push(g),o.push(f)}return new f0(s,o,e,n)}var PUe=rA.prototype.constructor;function DUe(){return new PUe(this._groups,this._parents)}function IUe(t,e){var n,r,i;return function(){var s=E2(this,t),o=(this.style.removeProperty(t),E2(this,t));return s===o?null:s===n&&o===r?i:i=e(n=s,r=o)}}function qce(t){return function(){this.style.removeProperty(t)}}function MUe(t,e,n){var r,i=n+"",s;return function(){var o=E2(this,t);return o===i?null:o===r?s:s=e(r=o,n)}}function RUe(t,e,n){var r,i,s;return function(){var o=E2(this,t),a=n(this),l=a+"";return a==null&&(l=a=(this.style.removeProperty(t),E2(this,t))),o===l?null:o===r&&l===i?s:(i=l,s=e(r=o,a))}}function FUe(t,e){var n,r,i,s="style."+e,o="end."+s,a;return function(){var l=Dm(this,t),h=l.on,f=l.value[s]==null?a||(a=qce(e)):void 0;(h!==n||i!==f)&&(r=(n=h).copy()).on(o,i=f),l.on=r}}function LUe(t,e,n){var r=(t+="")=="transform"?Nje:Vce;return e==null?this.styleTween(t,IUe(t,r)).on("end.style."+t,qce(t)):typeof e=="function"?this.styleTween(t,RUe(t,r,nQ(this,"style."+t,e))).each(FUe(this._id,t)):this.styleTween(t,MUe(t,r,e),n).on("end.style."+t,null)}function $Ue(t,e,n){return function(r){this.style.setProperty(t,e.call(this,r),n)}}function BUe(t,e,n){var r,i;function s(){var o=e.apply(this,arguments);return o!==i&&(r=(i=o)&&$Ue(t,o,n)),r}return s._value=e,s}function NUe(t,e,n){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(e==null)return this.tween(r,null);if(typeof e!="function")throw new Error;return this.tween(r,BUe(t,e,n??""))}function zUe(t){return function(){this.textContent=t}}function QUe(t){return function(){var e=t(this);this.textContent=e??""}}function jUe(t){return this.tween("text",typeof t=="function"?QUe(nQ(this,"text",t)):zUe(t==null?"":t+""))}function UUe(t){return function(e){this.textContent=t.call(this,e)}}function VUe(t){var e,n;function r(){var i=t.apply(this,arguments);return i!==n&&(e=(n=i)&&UUe(i)),e}return r._value=t,r}function qUe(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(t==null)return this.tween(e,null);if(typeof t!="function")throw new Error;return this.tween(e,VUe(t))}function ZUe(){for(var t=this._name,e=this._id,n=Zce(),r=this._groups,i=r.length,s=0;s<i;++s)for(var o=r[s],a=o.length,l,h=0;h<a;++h)if(l=o[h]){var f=jd(l,e);fI(l,t,n,h,o,{time:f.time+f.delay+f.duration,delay:0,duration:f.duration,ease:f.ease})}return new f0(r,this._parents,t,n)}function XUe(){var t,e,n=this,r=n._id,i=n.size();return new Promise(function(s,o){var a={value:o},l={value:function(){--i===0&&s()}};n.each(function(){var h=Dm(this,r),f=h.on;f!==t&&(e=(t=f).copy(),e._.cancel.push(a),e._.interrupt.push(a),e._.end.push(l)),h.on=e}),i===0&&s()})}var WUe=0;function f0(t,e,n,r){this._groups=t,this._parents=e,this._name=n,this._id=r}function Zce(){return++WUe}var yg=rA.prototype;f0.prototype={constructor:f0,select:EUe,selectAll:TUe,selectChild:yg.selectChild,selectChildren:yg.selectChildren,filter:xUe,merge:wUe,selection:DUe,transition:ZUe,call:yg.call,nodes:yg.nodes,node:yg.node,size:yg.size,empty:yg.empty,each:yg.each,on:kUe,attr:sUe,attrTween:cUe,style:LUe,styleTween:NUe,text:jUe,textTween:qUe,remove:AUe,tween:Kje,delay:dUe,duration:gUe,ease:vUe,easeVarying:_Ue,end:XUe,[Symbol.iterator]:yg[Symbol.iterator]};function GUe(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var YUe={time:null,delay:0,duration:250,ease:GUe};function HUe(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return n}function KUe(t){var e,n;t instanceof f0?(e=t._id,t=t._name):(e=Zce(),(n=YUe).time=eQ(),t=t==null?null:t+"");for(var r=this._groups,i=r.length,s=0;s<i;++s)for(var o=r[s],a=o.length,l,h=0;h<a;++h)(l=o[h])&&fI(l,t,e,h,o,n||HUe(l,e));return new f0(r,this._parents,t,e)}rA.prototype.interrupt=Gje;rA.prototype.transition=KUe;const OL=Math.PI,SL=2*OL,zv=1e-6,JUe=SL-zv;function Xce(t){this._+=t[0];for(let e=1,n=t.length;e<n;++e)this._+=arguments[e]+t[e]}function eVe(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return Xce;const n=10**e;return function(r){this._+=r[0];for(let i=1,s=r.length;i<s;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}class tVe{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?Xce:eVe(e)}moveTo(e,n){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,n){this._append`L${this._x1=+e},${this._y1=+n}`}quadraticCurveTo(e,n,r,i){this._append`Q${+e},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(e,n,r,i,s,o){this._append`C${+e},${+n},${+r},${+i},${this._x1=+s},${this._y1=+o}`}arcTo(e,n,r,i,s){if(e=+e,n=+n,r=+r,i=+i,s=+s,s<0)throw new Error(`negative radius: ${s}`);let o=this._x1,a=this._y1,l=r-e,h=i-n,f=o-e,p=a-n,g=f*f+p*p;if(this._x1===null)this._append`M${this._x1=e},${this._y1=n}`;else if(g>zv)if(!(Math.abs(p*l-h*f)>zv)||!s)this._append`L${this._x1=e},${this._y1=n}`;else{let b=r-o,x=i-a,k=l*l+h*h,T=b*b+x*x,I=Math.sqrt(k),M=Math.sqrt(g),B=s*Math.tan((OL-Math.acos((k+g-T)/(2*I*M)))/2),j=B/M,Q=B/I;Math.abs(j-1)>zv&&this._append`L${e+j*f},${n+j*p}`,this._append`A${s},${s},0,0,${+(p*b>f*x)},${this._x1=e+Q*l},${this._y1=n+Q*h}`}}arc(e,n,r,i,s,o){if(e=+e,n=+n,r=+r,o=!!o,r<0)throw new Error(`negative radius: ${r}`);let a=r*Math.cos(i),l=r*Math.sin(i),h=e+a,f=n+l,p=1^o,g=o?i-s:s-i;this._x1===null?this._append`M${h},${f}`:(Math.abs(this._x1-h)>zv||Math.abs(this._y1-f)>zv)&&this._append`L${h},${f}`,r&&(g<0&&(g=g%SL+SL),g>JUe?this._append`A${r},${r},0,1,${p},${e-a},${n-l}A${r},${r},0,1,${p},${this._x1=h},${this._y1=f}`:g>zv&&this._append`A${r},${r},0,${+(g>=OL)},${p},${this._x1=e+r*Math.cos(s)},${this._y1=n+r*Math.sin(s)}`)}rect(e,n,r,i){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}}function nVe(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function vP(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]}function I2(t){return t=vP(Math.abs(t)),t?t[1]:NaN}function rVe(t,e){return function(n,r){for(var i=n.length,s=[],o=0,a=t[0],l=0;i>0&&a>0&&(l+a+1>r&&(a=Math.max(1,r-l)),s.push(n.substring(i-=a,i+a)),!((l+=a+1)>r));)a=t[o=(o+1)%t.length];return s.reverse().join(e)}}function iVe(t){return function(e){return e.replace(/[0-9]/g,function(n){return t[+n]})}}var sVe=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function cC(t){if(!(e=sVe.exec(t)))throw new Error("invalid format: "+t);var e;return new rQ({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}cC.prototype=rQ.prototype;function rQ(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}rQ.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function oVe(t){e:for(var e=t.length,n=1,r=-1,i;n<e;++n)switch(t[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+t[n])break e;r>0&&(r=0);break}return r>0?t.slice(0,r)+t.slice(i+1):t}var Wce;function aVe(t,e){var n=vP(t,e);if(!n)return t+"";var r=n[0],i=n[1],s=i-(Wce=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,o=r.length;return s===o?r:s>o?r+new Array(s-o+1).join("0"):s>0?r.slice(0,s)+"."+r.slice(s):"0."+new Array(1-s).join("0")+vP(t,Math.max(0,e+s-1))[0]}function UW(t,e){var n=vP(t,e);if(!n)return t+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const VW={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:nVe,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>UW(t*100,e),r:UW,s:aVe,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function qW(t){return t}var ZW=Array.prototype.map,XW=["y","z","a","f","p","n","Âµ","m","","k","M","G","T","P","E","Z","Y"];function lVe(t){var e=t.grouping===void 0||t.thousands===void 0?qW:rVe(ZW.call(t.grouping,Number),t.thousands+""),n=t.currency===void 0?"":t.currency[0]+"",r=t.currency===void 0?"":t.currency[1]+"",i=t.decimal===void 0?".":t.decimal+"",s=t.numerals===void 0?qW:iVe(ZW.call(t.numerals,String)),o=t.percent===void 0?"%":t.percent+"",a=t.minus===void 0?"â":t.minus+"",l=t.nan===void 0?"NaN":t.nan+"";function h(p){p=cC(p);var g=p.fill,b=p.align,x=p.sign,k=p.symbol,T=p.zero,I=p.width,M=p.comma,B=p.precision,j=p.trim,Q=p.type;Q==="n"?(M=!0,Q="g"):VW[Q]||(B===void 0&&(B=12),j=!0,Q="g"),(T||g==="0"&&b==="=")&&(T=!0,g="0",b="=");var Z=k==="$"?n:k==="#"&&/[boxX]/.test(Q)?"0"+Q.toLowerCase():"",q=k==="$"?r:/[%p]/.test(Q)?o:"",J=VW[Q],oe=/[defgprs%]/.test(Q);B=B===void 0?6:/[gprs]/.test(Q)?Math.max(1,Math.min(21,B)):Math.max(0,Math.min(20,B));function me(ae){var ce=Z,se=q,ge,xe,Se;if(Q==="c")se=J(ae)+se,ae="";else{ae=+ae;var De=ae<0||1/ae<0;if(ae=isNaN(ae)?l:J(Math.abs(ae),B),j&&(ae=oVe(ae)),De&&+ae==0&&x!=="+"&&(De=!1),ce=(De?x==="("?x:a:x==="-"||x==="("?"":x)+ce,se=(Q==="s"?XW[8+Wce/3]:"")+se+(De&&x==="("?")":""),oe){for(ge=-1,xe=ae.length;++ge<xe;)if(Se=ae.charCodeAt(ge),48>Se||Se>57){se=(Se===46?i+ae.slice(ge+1):ae.slice(ge))+se,ae=ae.slice(0,ge);break}}}M&&!T&&(ae=e(ae,1/0));var He=ce.length+ae.length+se.length,Ue=He<I?new Array(I-He+1).join(g):"";switch(M&&T&&(ae=e(Ue+ae,Ue.length?I-se.length:1/0),Ue=""),b){case"<":ae=ce+ae+se+Ue;break;case"=":ae=ce+Ue+ae+se;break;case"^":ae=Ue.slice(0,He=Ue.length>>1)+ce+ae+se+Ue.slice(He);break;default:ae=Ue+ce+ae+se;break}return s(ae)}return me.toString=function(){return p+""},me}function f(p,g){var b=h((p=cC(p),p.type="f",p)),x=Math.max(-8,Math.min(8,Math.floor(I2(g)/3)))*3,k=Math.pow(10,-x),T=XW[8+x/3];return function(I){return b(k*I)+T}}return{format:h,formatPrefix:f}}var U4,sA,Gce;uVe({thousands:",",grouping:[3],currency:["$",""]});function uVe(t){return U4=lVe(t),sA=U4.format,Gce=U4.formatPrefix,U4}function cVe(t){return Math.max(0,-I2(Math.abs(t)))}function hVe(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(I2(e)/3)))*3-I2(Math.abs(t)))}function fVe(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,I2(e)-I2(t))+1}function oA(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}const WW=Symbol("implicit");function Yce(){var t=new OW,e=[],n=[],r=WW;function i(s){let o=t.get(s);if(o===void 0){if(r!==WW)return r;t.set(s,o=e.push(s)-1)}return n[o%n.length]}return i.domain=function(s){if(!arguments.length)return e.slice();e=[],t=new OW;for(const o of s)t.has(o)||t.set(o,e.push(o)-1);return i},i.range=function(s){return arguments.length?(n=Array.from(s),i):n.slice()},i.unknown=function(s){return arguments.length?(r=s,i):r},i.copy=function(){return Yce(e,n).unknown(r)},oA.apply(i,arguments),i}function Hce(){var t=Yce().unknown(void 0),e=t.domain,n=t.range,r=0,i=1,s,o,a=!1,l=0,h=0,f=.5;delete t.unknown;function p(){var g=e().length,b=i<r,x=b?i:r,k=b?r:i;s=(k-x)/Math.max(1,g-l+h*2),a&&(s=Math.floor(s)),x+=(k-x-s*(g-l))*f,o=s*(1-l),a&&(x=Math.round(x),o=Math.round(o));var T=kze(g).map(function(I){return x+s*I});return n(b?T.reverse():T)}return t.domain=function(g){return arguments.length?(e(g),p()):e()},t.range=function(g){return arguments.length?([r,i]=g,r=+r,i=+i,p()):[r,i]},t.rangeRound=function(g){return[r,i]=g,r=+r,i=+i,a=!0,p()},t.bandwidth=function(){return o},t.step=function(){return s},t.round=function(g){return arguments.length?(a=!!g,p()):a},t.padding=function(g){return arguments.length?(l=Math.min(1,h=+g),p()):l},t.paddingInner=function(g){return arguments.length?(l=Math.min(1,g),p()):l},t.paddingOuter=function(g){return arguments.length?(h=+g,p()):h},t.align=function(g){return arguments.length?(f=Math.max(0,Math.min(1,g)),p()):f},t.copy=function(){return Hce(e(),[r,i]).round(a).paddingInner(l).paddingOuter(h).align(f)},oA.apply(p(),arguments)}function dVe(t){return function(){return t}}function pVe(t){return+t}var GW=[0,1];function iw(t){return t}function kL(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:dVe(isNaN(e)?NaN:.5)}function mVe(t,e){var n;return t>e&&(n=t,t=e,e=n),function(r){return Math.max(t,Math.min(e,r))}}function gVe(t,e,n){var r=t[0],i=t[1],s=e[0],o=e[1];return i<r?(r=kL(i,r),s=n(o,s)):(r=kL(r,i),s=n(s,o)),function(a){return s(r(a))}}function yVe(t,e,n){var r=Math.min(t.length,e.length)-1,i=new Array(r),s=new Array(r),o=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++o<r;)i[o]=kL(t[o],t[o+1]),s[o]=n(e[o],e[o+1]);return function(a){var l=gze(t,a,1,r)-1;return s[l](i[l](a))}}function iQ(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function sQ(){var t=GW,e=GW,n=Kz,r,i,s,o=iw,a,l,h;function f(){var g=Math.min(t.length,e.length);return o!==iw&&(o=mVe(t[0],t[g-1])),a=g>2?yVe:gVe,l=h=null,p}function p(g){return g==null||isNaN(g=+g)?s:(l||(l=a(t.map(r),e,n)))(r(o(g)))}return p.invert=function(g){return o(i((h||(h=a(e,t.map(r),dd)))(g)))},p.domain=function(g){return arguments.length?(t=Array.from(g,pVe),f()):t.slice()},p.range=function(g){return arguments.length?(e=Array.from(g),f()):e.slice()},p.rangeRound=function(g){return e=Array.from(g),n=Lje,f()},p.clamp=function(g){return arguments.length?(o=g?!0:iw,f()):o!==iw},p.interpolate=function(g){return arguments.length?(n=g,f()):n},p.unknown=function(g){return arguments.length?(s=g,p):s},function(g,b){return r=g,i=b,f()}}function vVe(){return sQ()(iw,iw)}function bVe(t,e,n,r){var i=Sze(t,e,n),s;switch(r=cC(r??",f"),r.type){case"s":{var o=Math.max(Math.abs(t),Math.abs(e));return r.precision==null&&!isNaN(s=hVe(i,o))&&(r.precision=s),Gce(r,o)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(s=fVe(i,Math.max(Math.abs(t),Math.abs(e))))&&(r.precision=s-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(s=cVe(i))&&(r.precision=s-(r.type==="%")*2);break}}return sA(r)}function Kce(t){var e=t.domain;return t.ticks=function(n){var r=e();return mL(r[0],r[r.length-1],n??10)},t.tickFormat=function(n,r){var i=e();return bVe(i[0],i[i.length-1],n??10,r)},t.nice=function(n){n==null&&(n=10);var r=e(),i=0,s=r.length-1,o=r[i],a=r[s],l,h,f=10;for(a<o&&(h=o,o=a,a=h,h=i,i=s,s=h);f-- >0;){if(h=gL(o,a,n),h===l)return r[i]=o,r[s]=a,e(r);if(h>0)o=Math.floor(o/h)*h,a=Math.ceil(a/h)*h;else if(h<0)o=Math.ceil(o*h)/h,a=Math.floor(a*h)/h;else break;l=h}return t},t}function dI(){var t=vVe();return t.copy=function(){return iQ(t,dI())},oA.apply(t,arguments),Kce(t)}function _Ve(t,e){t=t.slice();var n=0,r=t.length-1,i=t[n],s=t[r],o;return s<i&&(o=n,n=r,r=o,o=i,i=s,s=o),t[n]=e.floor(i),t[r]=e.ceil(s),t}function YW(t){return Math.log(t)}function HW(t){return Math.exp(t)}function xVe(t){return-Math.log(-t)}function wVe(t){return-Math.exp(-t)}function OVe(t){return isFinite(t)?+("1e"+t):t<0?0:t}function SVe(t){return t===10?OVe:t===Math.E?Math.exp:e=>Math.pow(t,e)}function kVe(t){return t===Math.E?Math.log:t===10&&Math.log10||t===2&&Math.log2||(t=Math.log(t),e=>Math.log(e)/t)}function KW(t){return(e,n)=>-t(-e,n)}function CVe(t){const e=t(YW,HW),n=e.domain;let r=10,i,s;function o(){return i=kVe(r),s=SVe(r),n()[0]<0?(i=KW(i),s=KW(s),t(xVe,wVe)):t(YW,HW),e}return e.base=function(a){return arguments.length?(r=+a,o()):r},e.domain=function(a){return arguments.length?(n(a),o()):n()},e.ticks=a=>{const l=n();let h=l[0],f=l[l.length-1];const p=f<h;p&&([h,f]=[f,h]);let g=i(h),b=i(f),x,k;const T=a==null?10:+a;let I=[];if(!(r%1)&&b-g<T){if(g=Math.floor(g),b=Math.ceil(b),h>0){for(;g<=b;++g)for(x=1;x<r;++x)if(k=g<0?x/s(-g):x*s(g),!(k<h)){if(k>f)break;I.push(k)}}else for(;g<=b;++g)for(x=r-1;x>=1;--x)if(k=g>0?x/s(-g):x*s(g),!(k<h)){if(k>f)break;I.push(k)}I.length*2<T&&(I=mL(h,f,T))}else I=mL(g,b,Math.min(b-g,T)).map(s);return p?I.reverse():I},e.tickFormat=(a,l)=>{if(a==null&&(a=10),l==null&&(l=r===10?"s":","),typeof l!="function"&&(!(r%1)&&(l=cC(l)).precision==null&&(l.trim=!0),l=sA(l)),a===1/0)return l;const h=Math.max(1,r*a/e.ticks().length);return f=>{let p=f/s(Math.round(i(f)));return p*r<r-.5&&(p*=r),p<=h?l(f):""}},e.nice=()=>n(_Ve(n(),{floor:a=>s(Math.floor(i(a))),ceil:a=>s(Math.ceil(i(a)))})),e}function hC(){const t=CVe(sQ()).domain([1,10]);return t.copy=()=>iQ(t,hC()).base(t.base()),oA.apply(t,arguments),t}function JW(t){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/t))}}function eG(t){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*t}}function AVe(t){var e=1,n=t(JW(e),eG(e));return n.constant=function(r){return arguments.length?t(JW(e=+r),eG(e)):e},Kce(n)}function Jce(){var t=AVe(sQ());return t.copy=function(){return iQ(t,Jce()).constant(t.constant())},oA.apply(t,arguments)}function hs(t){for(var e=t.length/6|0,n=new Array(e),r=0;r<e;)n[r]="#"+t.slice(r*6,++r*6);return n}const eo=t=>Hz(t[t.length-1]);var EVe=new Array(3).concat("d8b365f5f5f55ab4ac","a6611adfc27d80cdc1018571","a6611adfc27df5f5f580cdc1018571","8c510ad8b365f6e8c3c7eae55ab4ac01665e","8c510ad8b365f6e8c3f5f5f5c7eae55ab4ac01665e","8c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e","8c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e","5430058c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e003c30","5430058c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e003c30").map(hs);const TVe=eo(EVe);var PVe=new Array(3).concat("af8dc3f7f7f77fbf7b","7b3294c2a5cfa6dba0008837","7b3294c2a5cff7f7f7a6dba0008837","762a83af8dc3e7d4e8d9f0d37fbf7b1b7837","762a83af8dc3e7d4e8f7f7f7d9f0d37fbf7b1b7837","762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b7837","762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b7837","40004b762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b783700441b","40004b762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b783700441b").map(hs);const DVe=eo(PVe);var IVe=new Array(3).concat("e9a3c9f7f7f7a1d76a","d01c8bf1b6dab8e1864dac26","d01c8bf1b6daf7f7f7b8e1864dac26","c51b7de9a3c9fde0efe6f5d0a1d76a4d9221","c51b7de9a3c9fde0eff7f7f7e6f5d0a1d76a4d9221","c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221","c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221","8e0152c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221276419","8e0152c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221276419").map(hs);const MVe=eo(IVe);var RVe=new Array(3).concat("998ec3f7f7f7f1a340","5e3c99b2abd2fdb863e66101","5e3c99b2abd2f7f7f7fdb863e66101","542788998ec3d8daebfee0b6f1a340b35806","542788998ec3d8daebf7f7f7fee0b6f1a340b35806","5427888073acb2abd2d8daebfee0b6fdb863e08214b35806","5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b35806","2d004b5427888073acb2abd2d8daebfee0b6fdb863e08214b358067f3b08","2d004b5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b358067f3b08").map(hs);const FVe=eo(RVe);var LVe=new Array(3).concat("ef8a62f7f7f767a9cf","ca0020f4a58292c5de0571b0","ca0020f4a582f7f7f792c5de0571b0","b2182bef8a62fddbc7d1e5f067a9cf2166ac","b2182bef8a62fddbc7f7f7f7d1e5f067a9cf2166ac","b2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac","b2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac","67001fb2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac053061","67001fb2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac053061").map(hs);const $Ve=eo(LVe);var BVe=new Array(3).concat("ef8a62ffffff999999","ca0020f4a582bababa404040","ca0020f4a582ffffffbababa404040","b2182bef8a62fddbc7e0e0e09999994d4d4d","b2182bef8a62fddbc7ffffffe0e0e09999994d4d4d","b2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d","b2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d","67001fb2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d1a1a1a","67001fb2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d1a1a1a").map(hs);const NVe=eo(BVe);var zVe=new Array(3).concat("fc8d59ffffbf91bfdb","d7191cfdae61abd9e92c7bb6","d7191cfdae61ffffbfabd9e92c7bb6","d73027fc8d59fee090e0f3f891bfdb4575b4","d73027fc8d59fee090ffffbfe0f3f891bfdb4575b4","d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4","d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4","a50026d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4313695","a50026d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4313695").map(hs);const QVe=eo(zVe);var jVe=new Array(3).concat("fc8d59ffffbf91cf60","d7191cfdae61a6d96a1a9641","d7191cfdae61ffffbfa6d96a1a9641","d73027fc8d59fee08bd9ef8b91cf601a9850","d73027fc8d59fee08bffffbfd9ef8b91cf601a9850","d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850","d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850","a50026d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850006837","a50026d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850006837").map(hs);const UVe=eo(jVe);var VVe=new Array(3).concat("fc8d59ffffbf99d594","d7191cfdae61abdda42b83ba","d7191cfdae61ffffbfabdda42b83ba","d53e4ffc8d59fee08be6f59899d5943288bd","d53e4ffc8d59fee08bffffbfe6f59899d5943288bd","d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd","d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd","9e0142d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd5e4fa2","9e0142d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd5e4fa2").map(hs);const qVe=eo(VVe);var ZVe=new Array(3).concat("e5f5f999d8c92ca25f","edf8fbb2e2e266c2a4238b45","edf8fbb2e2e266c2a42ca25f006d2c","edf8fbccece699d8c966c2a42ca25f006d2c","edf8fbccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45006d2c00441b").map(hs);const XVe=eo(ZVe);var WVe=new Array(3).concat("e0ecf49ebcda8856a7","edf8fbb3cde38c96c688419d","edf8fbb3cde38c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d810f7c4d004b").map(hs);const GVe=eo(WVe);var YVe=new Array(3).concat("e0f3dba8ddb543a2ca","f0f9e8bae4bc7bccc42b8cbe","f0f9e8bae4bc7bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe0868ac084081").map(hs);const HVe=eo(YVe);var KVe=new Array(3).concat("fee8c8fdbb84e34a33","fef0d9fdcc8afc8d59d7301f","fef0d9fdcc8afc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301fb300007f0000").map(hs);const JVe=eo(KVe);var eqe=new Array(3).concat("ece2f0a6bddb1c9099","f6eff7bdc9e167a9cf02818a","f6eff7bdc9e167a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016c59014636").map(hs);const tqe=eo(eqe);var nqe=new Array(3).concat("ece7f2a6bddb2b8cbe","f1eef6bdc9e174a9cf0570b0","f1eef6bdc9e174a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0045a8d023858").map(hs);const rqe=eo(nqe);var iqe=new Array(3).concat("e7e1efc994c7dd1c77","f1eef6d7b5d8df65b0ce1256","f1eef6d7b5d8df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125698004367001f").map(hs);const sqe=eo(iqe);var oqe=new Array(3).concat("fde0ddfa9fb5c51b8a","feebe2fbb4b9f768a1ae017e","feebe2fbb4b9f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a017749006a").map(hs);const aqe=eo(oqe);var lqe=new Array(3).concat("edf8b17fcdbb2c7fb8","ffffcca1dab441b6c4225ea8","ffffcca1dab441b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea8253494081d58").map(hs);const uqe=eo(lqe);var cqe=new Array(3).concat("f7fcb9addd8e31a354","ffffccc2e69978c679238443","ffffccc2e69978c67931a354006837","ffffccd9f0a3addd8e78c67931a354006837","ffffccd9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443006837004529").map(hs);const hqe=eo(cqe);var fqe=new Array(3).concat("fff7bcfec44fd95f0e","ffffd4fed98efe9929cc4c02","ffffd4fed98efe9929d95f0e993404","ffffd4fee391fec44ffe9929d95f0e993404","ffffd4fee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c02993404662506").map(hs);const dqe=eo(fqe);var pqe=new Array(3).concat("ffeda0feb24cf03b20","ffffb2fecc5cfd8d3ce31a1c","ffffb2fecc5cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cbd0026800026").map(hs);const mqe=eo(pqe);var gqe=new Array(3).concat("deebf79ecae13182bd","eff3ffbdd7e76baed62171b5","eff3ffbdd7e76baed63182bd08519c","eff3ffc6dbef9ecae16baed63182bd08519c","eff3ffc6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b508519c08306b").map(hs);const yqe=eo(gqe);var vqe=new Array(3).concat("e5f5e0a1d99b31a354","edf8e9bae4b374c476238b45","edf8e9bae4b374c47631a354006d2c","edf8e9c7e9c0a1d99b74c47631a354006d2c","edf8e9c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45006d2c00441b").map(hs);const bqe=eo(vqe);var _qe=new Array(3).concat("f0f0f0bdbdbd636363","f7f7f7cccccc969696525252","f7f7f7cccccc969696636363252525","f7f7f7d9d9d9bdbdbd969696636363252525","f7f7f7d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525000000").map(hs);const xqe=eo(_qe);var wqe=new Array(3).concat("efedf5bcbddc756bb1","f2f0f7cbc9e29e9ac86a51a3","f2f0f7cbc9e29e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a354278f3f007d").map(hs);const Oqe=eo(wqe);var Sqe=new Array(3).concat("fee0d2fc9272de2d26","fee5d9fcae91fb6a4acb181d","fee5d9fcae91fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181da50f1567000d").map(hs);const kqe=eo(Sqe);var Cqe=new Array(3).concat("fee6cefdae6be6550d","feeddefdbe85fd8d3cd94701","feeddefdbe85fd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d94801a636037f2704").map(hs);const Aqe=eo(Cqe);function Eqe(t){return t=Math.max(0,Math.min(1,t)),"rgb("+Math.max(0,Math.min(255,Math.round(-4.54-t*(35.34-t*(2381.73-t*(6402.7-t*(7024.72-t*2710.57)))))))+", "+Math.max(0,Math.min(255,Math.round(32.49+t*(170.73+t*(52.82-t*(131.46-t*(176.58-t*67.37)))))))+", "+Math.max(0,Math.min(255,Math.round(81.24+t*(442.36-t*(2482.43-t*(6167.24-t*(6614.94-t*2475.67)))))))+")"}const Tqe=Jz(ym(300,.5,0),ym(-240,.5,1));var Pqe=Jz(ym(-100,.75,.35),ym(80,1.5,.8)),Dqe=Jz(ym(260,.75,.35),ym(80,1.5,.8)),V4=ym();function Iqe(t){(t<0||t>1)&&(t-=Math.floor(t));var e=Math.abs(t-.5);return V4.h=360*t-100,V4.s=1.5-1.5*e,V4.l=.8-.9*e,V4+""}var q4=P2(),Mqe=Math.PI/3,Rqe=Math.PI*2/3;function Fqe(t){var e;return t=(.5-t)*Math.PI,q4.r=255*(e=Math.sin(t))*e,q4.g=255*(e=Math.sin(t+Mqe))*e,q4.b=255*(e=Math.sin(t+Rqe))*e,q4+""}function oQ(t){return t=Math.max(0,Math.min(1,t)),"rgb("+Math.max(0,Math.min(255,Math.round(34.61+t*(1172.33-t*(10793.56-t*(33300.12-t*(38394.49-t*14825.05)))))))+", "+Math.max(0,Math.min(255,Math.round(23.31+t*(557.33+t*(1225.33-t*(3574.96-t*(1073.77+t*707.56)))))))+", "+Math.max(0,Math.min(255,Math.round(27.2+t*(3211.1-t*(15327.97-t*(27814-t*(22569.18-t*6838.66)))))))+")"}function pI(t){var e=t.length;return function(n){return t[Math.max(0,Math.min(e-1,Math.floor(n*e)))]}}const Lqe=pI(hs("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725"));var $qe=pI(hs("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf")),Bqe=pI(hs("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4")),Nqe=pI(hs("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921"));function el(t){return function(){return t}}const tG=1e-12;function ehe(t){let e=3;return t.digits=function(n){if(!arguments.length)return e;if(n==null)e=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);e=r}return t},()=>new tVe(e)}function the(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function nhe(t){this._context=t}nhe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function bP(t){return new nhe(t)}function rhe(t){return t[0]}function ihe(t){return t[1]}function she(t,e){var n=el(!0),r=null,i=bP,s=null,o=ehe(a);t=typeof t=="function"?t:t===void 0?rhe:el(t),e=typeof e=="function"?e:e===void 0?ihe:el(e);function a(l){var h,f=(l=the(l)).length,p,g=!1,b;for(r==null&&(s=i(b=o())),h=0;h<=f;++h)!(h<f&&n(p=l[h],h,l))===g&&((g=!g)?s.lineStart():s.lineEnd()),g&&s.point(+t(p,h,l),+e(p,h,l));if(b)return s=null,b+""||null}return a.x=function(l){return arguments.length?(t=typeof l=="function"?l:el(+l),a):t},a.y=function(l){return arguments.length?(e=typeof l=="function"?l:el(+l),a):e},a.defined=function(l){return arguments.length?(n=typeof l=="function"?l:el(!!l),a):n},a.curve=function(l){return arguments.length?(i=l,r!=null&&(s=i(r)),a):i},a.context=function(l){return arguments.length?(l==null?r=s=null:s=i(r=l),a):r},a}function nG(t,e,n){var r=null,i=el(!0),s=null,o=bP,a=null,l=ehe(h);t=typeof t=="function"?t:t===void 0?rhe:el(+t),e=typeof e=="function"?e:el(e===void 0?0:+e),n=typeof n=="function"?n:n===void 0?ihe:el(+n);function h(p){var g,b,x,k=(p=the(p)).length,T,I=!1,M,B=new Array(k),j=new Array(k);for(s==null&&(a=o(M=l())),g=0;g<=k;++g){if(!(g<k&&i(T=p[g],g,p))===I)if(I=!I)b=g,a.areaStart(),a.lineStart();else{for(a.lineEnd(),a.lineStart(),x=g-1;x>=b;--x)a.point(B[x],j[x]);a.lineEnd(),a.areaEnd()}I&&(B[g]=+t(T,g,p),j[g]=+e(T,g,p),a.point(r?+r(T,g,p):B[g],n?+n(T,g,p):j[g]))}if(M)return a=null,M+""||null}function f(){return she().defined(i).curve(o).context(s)}return h.x=function(p){return arguments.length?(t=typeof p=="function"?p:el(+p),r=null,h):t},h.x0=function(p){return arguments.length?(t=typeof p=="function"?p:el(+p),h):t},h.x1=function(p){return arguments.length?(r=p==null?null:typeof p=="function"?p:el(+p),h):r},h.y=function(p){return arguments.length?(e=typeof p=="function"?p:el(+p),n=null,h):e},h.y0=function(p){return arguments.length?(e=typeof p=="function"?p:el(+p),h):e},h.y1=function(p){return arguments.length?(n=p==null?null:typeof p=="function"?p:el(+p),h):n},h.lineX0=h.lineY0=function(){return f().x(t).y(e)},h.lineY1=function(){return f().x(t).y(n)},h.lineX1=function(){return f().x(r).y(e)},h.defined=function(p){return arguments.length?(i=typeof p=="function"?p:el(!!p),h):i},h.curve=function(p){return arguments.length?(o=p,s!=null&&(a=o(s)),h):o},h.context=function(p){return arguments.length?(p==null?s=a=null:a=o(s=p),h):s},h}function rG(t,e,n){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+n)/6)}function ohe(t){this._context=t}ohe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:rG(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:rG(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function zqe(t){return new ohe(t)}function iG(t,e,n){t._context.bezierCurveTo(t._x1+t._k*(t._x2-t._x0),t._y1+t._k*(t._y2-t._y0),t._x2+t._k*(t._x1-e),t._y2+t._k*(t._y1-n),t._x2,t._y2)}function aQ(t,e){this._context=t,this._k=(1-e)/6}aQ.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:iG(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2,this._x1=t,this._y1=e;break;case 2:this._point=3;default:iG(this,t,e);break}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const Qqe=(function t(e){function n(r){return new aQ(r,e)}return n.tension=function(r){return t(+r)},n})(0);function jqe(t,e,n){var r=t._x1,i=t._y1,s=t._x2,o=t._y2;if(t._l01_a>tG){var a=2*t._l01_2a+3*t._l01_a*t._l12_a+t._l12_2a,l=3*t._l01_a*(t._l01_a+t._l12_a);r=(r*a-t._x0*t._l12_2a+t._x2*t._l01_2a)/l,i=(i*a-t._y0*t._l12_2a+t._y2*t._l01_2a)/l}if(t._l23_a>tG){var h=2*t._l23_2a+3*t._l23_a*t._l12_a+t._l12_2a,f=3*t._l23_a*(t._l23_a+t._l12_a);s=(s*h+t._x1*t._l23_2a-e*t._l12_2a)/f,o=(o*h+t._y1*t._l23_2a-n*t._l12_2a)/f}t._context.bezierCurveTo(r,i,s,o,t._x2,t._y2)}function ahe(t,e){this._context=t,this._alpha=e}ahe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,r=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3;default:jqe(this,t,e);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const Uqe=(function t(e){function n(r){return e?new ahe(r,e):new aQ(r,0)}return n.alpha=function(r){return t(+r)},n})(.5);function sG(t){return t<0?-1:1}function oG(t,e,n){var r=t._x1-t._x0,i=e-t._x1,s=(t._y1-t._y0)/(r||i<0&&-0),o=(n-t._y1)/(i||r<0&&-0),a=(s*i+o*r)/(r+i);return(sG(s)+sG(o))*Math.min(Math.abs(s),Math.abs(o),.5*Math.abs(a))||0}function aG(t,e){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-e)/2:e}function s7(t,e,n){var r=t._x0,i=t._y0,s=t._x1,o=t._y1,a=(s-r)/3;t._context.bezierCurveTo(r+a,i+a*e,s-a,o-a*n,s,o)}function _P(t){this._context=t}_P.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:s7(this,this._t0,aG(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var n=NaN;if(t=+t,e=+e,!(t===this._x1&&e===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,s7(this,aG(this,n=oG(this,t,e)),n);break;default:s7(this,this._t0,n=oG(this,t,e));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=n}}};function lhe(t){this._context=new uhe(t)}(lhe.prototype=Object.create(_P.prototype)).point=function(t,e){_P.prototype.point.call(this,e,t)};function uhe(t){this._context=t}uhe.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,n,r,i,s){this._context.bezierCurveTo(e,t,r,n,s,i)}};function Vqe(t){return new _P(t)}function qqe(t){return new lhe(t)}function che(t){this._context=t}che.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,n=t.length;if(n)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),n===2)this._context.lineTo(t[1],e[1]);else for(var r=lG(t),i=lG(e),s=0,o=1;o<n;++s,++o)this._context.bezierCurveTo(r[0][s],i[0][s],r[1][s],i[1][s],t[o],e[o]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}};function lG(t){var e,n=t.length-1,r,i=new Array(n),s=new Array(n),o=new Array(n);for(i[0]=0,s[0]=2,o[0]=t[0]+2*t[1],e=1;e<n-1;++e)i[e]=1,s[e]=4,o[e]=4*t[e]+2*t[e+1];for(i[n-1]=2,s[n-1]=7,o[n-1]=8*t[n-1]+t[n],e=1;e<n;++e)r=i[e]/s[e-1],s[e]-=r,o[e]-=r*o[e-1];for(i[n-1]=o[n-1]/s[n-1],e=n-2;e>=0;--e)i[e]=(o[e]-i[e+1])/s[e];for(s[n-1]=(t[n]+i[n-1])/2,e=0;e<n-1;++e)s[e]=2*t[e+1]-i[e+1];return[i,s]}function Zqe(t){return new che(t)}function mI(t,e){this._context=t,this._t=e}mI.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var n=this._x*(1-this._t)+t*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,e)}break}}this._x=t,this._y=e}};function Xqe(t){return new mI(t,.5)}function Wqe(t){return new mI(t,0)}function Gqe(t){return new mI(t,1)}function E3(t,e,n){this.k=t,this.x=e,this.y=n}E3.prototype={constructor:E3,scale:function(t){return t===1?this:new E3(this.k*t,this.x,this.y)},translate:function(t,e){return t===0&e===0?this:new E3(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};E3.prototype;function Z4(t,e=0){let n=Ice(t);return n.l+=e,n.a=0,n.b=0,n.rgb().formatHex8()}const Yqe={light:{scheme:"light",interpolate:"pubugn",categoryColors:A2,ordinalColors:uG,otherColor:"#9eabc2",nullColor:"#aaaaaa",markColor:"#3b82f6",markColorFade:"#dbeafe",markColorGray:Z4("#3b82f6",20),markColorGrayFade:Z4("#dbeafe"),embeddingColor:"#1f77b4",ruleColor:"#000",gridColor:Pg.slate[300],labelColor:Pg.slate[400],labelFontFamily:"system-ui",labelFontSize:11,labelMaxWidth:80,brushBorder:Pg.slate[500],brushBorderBack:"#fff",brushFill:"rgba(0,0,0,0.1)"},dark:{scheme:"dark",interpolate:"inferno",categoryColors:A2,ordinalColors:uG,otherColor:"#9eabc2",nullColor:"#aaaaaa",markColor:"#3b82f6",markColorFade:"#3b4d7f",markColorGray:Z4("#3b82f6",-20),markColorGrayFade:Z4("#1f398a"),embeddingColor:"#1f77b4",ruleColor:"#fff",gridColor:Pg.slate[700],labelColor:Pg.slate[500],labelFontFamily:"system-ui",labelFontSize:11,labelMaxWidth:80,brushBorder:Pg.slate[400],brushBorderBack:"#000",brushFill:"rgba(255,255,255,0.1)"}},Hqe={blues:yqe,brbg:TVe,bugn:XVe,bupu:GVe,cividis:Eqe,cool:Dqe,cubehelixdefault:Tqe,gnbu:HVe,greens:bqe,greys:xqe,inferno:Bqe,magma:$qe,oranges:Aqe,orrd:JVe,piyg:MVe,plasma:Nqe,prgn:DVe,pubu:rqe,pubugn:tqe,puor:FVe,purd:sqe,purples:Oqe,rainbow:Iqe,rdbu:$Ve,rdgy:NVe,rdpu:aqe,rdylbu:QVe,rdylgn:UVe,reds:kqe,sinebow:Fqe,spectral:qVe,turbo:oQ,viridis:Lqe,warm:Pqe,ylgn:hqe,ylgnbu:uqe,ylorbr:dqe,ylorrd:mqe};function lQ(t,e){let n=Yqe[t];return e!=null&&(n=uw(n,uw(e,{light:void 0,dark:void 0})??e)??n,e[t]!=null&&(n=uw(n,e[t])??n)),n}function Kqe(t){return typeof t=="string"?Hqe[t.toLowerCase()]??oQ:typeof t=="function"?t:Hz(t)}function uG(t){let e=[];for(let n=0;n<t;n++)e.push(oQ((n+.5)/t));return e}var Jqe=gt('<hr class="mt-1 mb-1 border-slate-300 dark:border-slate-500 border-dashed"/>'),eZe=gt('<!> <button class="text-left items-center flex py-0.5"><div class="w-40 flex-none overflow-hidden whitespace-nowrap text-ellipsis pr-1"><span> </span></div> <!></button>',1),tZe=gt('<div class="py-0.5 text-slate-400 dark:text-slate-500">(Occurrences in lists)</div>'),nZe=gt('<button class="py-0.5 text-left text-slate-400 dark:text-slate-500 hover:text-slate-800 dark:hover:text-slate-200 whitespace-nowrap text-ellipsis w-full overflow-hidden"><!></button>'),rZe=gt('<!> <div class="flex mt-0.5"><div class="w-40 flex-none overflow-hidden whitespace-nowrap text-ellipsis pr-1"><!></div> <div class="flex-1 mr-2 overflow-hidden"><!></div> <div class="flex gap-1"><!> <!></div></div>',1),iZe=gt('<div class="flex flex-col text-sm w-full select-none"><!></div>');function sZe(t,e){Ln(e,!0);const n=()=>qo(h,"$colorScheme",i),r=()=>qo(f,"$themeConfig",i),[i,s]=Cf(),o="(other)",a="(null)";let{coordinator:l,colorScheme:h,theme:f}=e.context,p=Fe(()=>lQ(n(),r())),g=Fe(()=>e.state.selection),b=Fe(()=>W8(e.spec.limit,10)),x=Fe(()=>W8(e.spec.labels,"#/#")),k=Fe(()=>W8(e.spec.order,"total-descending")),T=Fe(()=>e.spec.data.isList??!1),I=Fe(()=>F(x)=="#/#"),M=hn(void 0),B=hn(400),j=Fe(()=>F(M)?.items.filter(ce=>ce.special==null).reduce((ce,se)=>Math.max(ce,F(I)?se.count:se.countSelected),0)??0);function Q(ce){return typeof ce=="string"?It(ce):ir`${ce.sql}`}function Z(ce){return ce==null?kn(!0):ce instanceof Array?ce.length==0?kn(!0):wc(...ce.map(Z)):typeof ce=="string"?ir`${ce}`:typeof ce=="boolean"?kn(ce):ce}function q(ce){if(ce instanceof Array){let se=ce.map(ge=>kn(ge));return fw(Fb("value",se))}switch(ce??"total-descending"){case"alphabetical":return ES("value");case"selected-ascending":return ES("countSelected");case"selected-descending":return fw("countSelected");case"total-ascending":return ES("count");case"total-descending":default:return fw("count")}}function J(ce,se,ge,xe,Se,De,He){Se instanceof Array&&(De=Math.max(De,Se.length));let Ue=kC({coordinator:ce,selection:xe,query:at=>{if(He){let ut="__count_plot_intermediate__";return Vn.with({[ut]:Vn.from(se).select({value:ir`UNNEST(${Q(ge)})::TEXT`,predicate:ao(Z(at),"INT")})}).from(ut).select({value:"value",count:Mo(),countSelected:Zo("predicate"),total:ir`(${Vn.from(ut).select({count:Mo()})})`,totalSelected:ir`(${Vn.from(ut).select({count:Zo("predicate")})})`}).groupby("value").orderby(Rb("value"),q(Se),ES("value")).limit(De+1)}else{let ut=ao(Q(ge),"TEXT");return Vn.from(se).select({value:ut,count:Mo(),countSelected:Zo(ao(Z(at),"INT")),total:ir`(${Vn.from(se).select({count:Mo()})})`,totalSelected:ir`(${Vn.from(se).select({count:Mo()}).where(at)})`}).groupby(ut).orderby(Rb(ut),q(Se),ES("value")).limit(De+1)}},queryResult:at=>{let ut=at.toArray();if(ut.length==0){ct(M,void 0);return}let{total:wt,totalSelected:ot}=ut[0],dt={items:[],sumSelected:ot,sumTotal:wt};for(let Ot of ut)Ot.value!=null&&dt.items.length<De&&dt.items.push({value:Ot.value,count:Ot.count,countSelected:Ot.countSelected});if(Se instanceof Array){let Ot=Kt=>{let Dn=Se.indexOf(Kt.value);return Dn<0?1/0:Dn};dt.items.sort((Kt,Dn)=>Ot(Kt)-Ot(Dn))}for(let Ot of ut)Ot.value==null&&dt.items.push({value:a,count:Ot.count,countSelected:Ot.countSelected,special:"null"});let Yt=dt.items.reduce((Ot,Kt)=>Ot+Kt.count,0),Ft=dt.items.reduce((Ot,Kt)=>Ot+Kt.countSelected,0);(Yt<wt||Ft<ot)&&dt.items.push({value:o,count:wt-Yt,countSelected:ot-Ft,special:"other"}),ct(M,dt)}});function yt(at){if(at.length==0)return kn(!0);if(He){let ut=Q(ge);return Od(...at.map(ot=>{if(ot==a)return bj(ut,ir`NULL`);if(ot==o){let dt=F(M)?.items.filter(Yt=>Yt.special==null).map(Yt=>kn(Yt.value))??[];return ir`len(list_filter(${ut}, x -> x NOT IN (${dt.join(",")}))) > 0`}else return bj(ut,kn(ot))}))}else{let ut=ao(Q(ge),"TEXT");return Od(...at.map(wt=>{if(wt==a)return Kp(ut);if(wt==o){let ot=F(M)?.items.filter(dt=>dt.special==null).map(dt=>kn(dt.value))??[];return Kw(Fb(ut,ot))}else return DK(ut,kn(wt))}))}}let We={reset:()=>{e.onStateChange({selection:void 0})}};return Oo(()=>{let at={source:We,clients:new Set([Ue]),...F(g)!=null&&F(g).length>0?{value:F(g),predicate:yt(F(g))}:{value:null,predicate:null}};xe.update(at)}),()=>{Ue.destroy(),xe.update({source:We,clients:new Set([Ue]),value:null,predicate:null})}}Oo(()=>J(l,e.context.table,e.spec.data.field,e.context.filter,F(k),F(b),F(T)));function oe(ce,se){if(F(g)==null||F(g).length==0)e.onStateChange({selection:[ce]});else{let ge=F(g).findIndex(xe=>xe==ce)>=0;se?ge?e.onStateChange({selection:F(g).filter(xe=>xe!=ce)}):e.onStateChange({selection:[...F(g),ce]}):ge?e.onStateChange({selection:void 0}):e.onStateChange({selection:[ce]})}}function me(ce,se){return se==0?"-%":(ce/se*100).toFixed(1)+"%"}function ae(ce,se,ge,xe){let Se,De;switch(ge??"#/#"){case"#":Se=xe?ce.countSelected.toLocaleString():ce.count.toLocaleString();break;case"%":Se=xe?me(ce.countSelected,se.sumSelected):me(ce.count,se.sumTotal);break;case"#/#":Se=xe?ce.countSelected.toLocaleString()+" / "+ce.count.toLocaleString():ce.count.toLocaleString();break;default:Se=""}return F(T)?De=xe?[`${ce.countSelected.toLocaleString()} / ${ce.count.toLocaleString()} (${me(ce.countSelected,ce.count)})`,`${me(ce.countSelected,se.sumSelected)} of selection`,"(Occurrences in the list values)"]:[`${ce.count.toLocaleString()}`,`${me(ce.count,se.sumTotal)} of all occurrences`,"(Occurrences in the list values)"]:De=xe?[`${ce.countSelected.toLocaleString()} / ${ce.count.toLocaleString()} (${me(ce.countSelected,ce.count)})`,`${me(ce.countSelected,se.sumSelected)} of selection`]:[`${ce.count.toLocaleString()}`,`${me(ce.count,se.sumTotal)} of all rows`],{label:Se,title:De.join(`
`)}}qb(t,{get width(){return e.width},get height(){return e.height},scrollY:!0,children:(ce,se)=>{var ge=iZe(),xe=je(ge);{var Se=De=>{const He=Fe(()=>F(M).items.findIndex(Ut=>Ut.special!=null));var Ue=rZe(),yt=pn(Ue);Wr(yt,17,()=>F(M).items,Wi,(Ut,At,zt)=>{const nn=Fe(()=>F(g)==null||F(g).length==0||F(g).findIndex(ei=>ei==F(At).value)>=0),Ze=Fe(()=>!F(M).items.every(ei=>ei.count==ei.countSelected)),cn=Fe(()=>ae(F(At),F(M),F(x),F(Ze)));var Fn=eZe(),An=pn(Fn);{var qn=ei=>{var Ct=Jqe();Re(ei,Ct)};Pt(An,ei=>{zt==F(He)&&ei(qn)})}var Er=lt(An,2);Er.__click=ei=>oe(F(At).value,ei.shiftKey);var Mi=je(Er),gi=je(Mi);let fs;var Hr=je(gi,!0);Be(gi),Be(Mi);var uo=lt(Mi,2);{let ei=Fe(()=>F(nn)?[...F(I)?[{value:F(At).count,color:F(p).markColorFade}]:[],{value:F(At).countSelected,color:F(p).markColor}]:[...F(I)?[{value:F(At).count,color:F(p).markColorGrayFade}]:[],{value:F(At).countSelected,color:F(p).markColorGray}]),Ct=Fe(()=>F(B)-250);MLe(uo,{get selected(){return F(nn)},get bars(){return F(ei)},get maxValue(){return F(j)},get width(){return F(Ct)},get label(){return F(cn).label},get title(){return F(cn).title}})}Be(Er),on(()=>{St(Er,"title",F(At).value),fs=Hi(gi,1,"",null,fs,{"text-gray-400":!F(nn),"dark:text-gray-400":!F(nn)}),Pr(Hr,F(At).value)}),Re(Ut,Fn)});var We=lt(yt,2),at=je(We),ut=je(at);{var wt=Ut=>{var At=tZe();Re(Ut,At)};Pt(ut,Ut=>{F(T)&&Ut(wt)})}Be(at);var ot=lt(at,2),dt=je(ot);{var Yt=Ut=>{var At=nZe();At.__click=()=>{let cn=F(b)<50?100:10;e.onSpecChange({limit:cn}),cn<F(b)&&e.onStateChange({selection:void 0})};var zt=je(At);{var nn=cn=>{var Fn=yb("â Up to 100 values");Re(cn,Fn)},Ze=cn=>{var Fn=yb("â Up to 10 values");Re(cn,Fn)};Pt(zt,cn=>{F(b)<50?cn(nn):cn(Ze,!1)})}Be(At),Re(Ut,At)};Pt(dt,Ut=>{(F(b)!=10||F(M).items.findIndex(At=>At.special=="other")>=0)&&Ut(Yt)})}Be(ot);var Ft=lt(ot,2),Ot=je(Ft);{var Kt=Ut=>{{let At=Fe(()=>F(k)??"total-descending");tP(Ut,{options:[{value:"total-descending",label:"â Total"},{value:"selected-descending",label:"â Selected"},{value:"total-ascending",label:"â Total"},{value:"selected-ascending",label:"â Selected"}],get value(){return F(At)},onChange:zt=>e.onSpecChange({order:zt})})}};Pt(Ot,Ut=>{typeof F(k)=="string"&&Ut(Kt)})}var Dn=lt(Ot,2);{let Ut=Fe(()=>F(x)??"#/#");tP(Dn,{options:[{value:"%",label:"%"},{value:"#",label:"#"},{value:"#/#",label:"#/#"}],get value(){return F(Ut)},onChange:At=>e.onSpecChange({labels:At})})}Be(Ft),Be(We),Re(De,Ue)};Pt(xe,De=>{F(M)&&De(Se)})}Be(ge),a0(ge,"clientWidth",De=>ct(B,De)),Re(ce,ge)},$$slots:{default:!0}}),$n(),s()}Js(["click"]);var oZe=gt("<input/>");function aA(t,e){Ln(e,!0);let n=jn(e,"value",15),r=jn(e,"type",3,"text"),i=jn(e,"placeholder",3,""),s=jn(e,"className",3,""),o=jn(e,"disabled",3,!1);function a(h){h.key=="Escape"?h.stopPropagation():h.key=="Enter"&&e.onEnter?.()}var l=oZe();UP(l),l.__keydown=a,on(()=>{St(l,"type",r()),St(l,"placeholder",i()),l.disabled=o(),Hi(l,1,`form-input rounded-md py-1 bg-white dark:bg-slate-900 border border-slate-300 dark:border-slate-600 disabled:opacity-50 ${s()??""??""}`)}),pme(l,n),Re(t,l),$n()}Js(["keydown"]);var aZe=gt("<!> <!>",1);function lZe(t,e){Ln(e,!0);var n=ar(),r=pn(n);{var i=o=>{qb(o,{get width(){return e.width},get height(){return e.height},scrollY:!0,class:"prose dark:prose-invert max-w-none",children:(a,l)=>{var h=ar(),f=pn(h);n$(f,()=>JD(e.spec.content??"")),Re(a,h)},$$slots:{default:!0}})},s=o=>{qb(o,{get width(){return e.width},get height(){return e.height},class:"flex flex-col gap-2",children:(a,l)=>{var h=aZe(),f=pn(h),p=()=>e.spec.title??"",g=x=>e.onSpecChange({title:x});aA(f,{get value(){return p()},set value(x){g(x)}});var b=lt(f,2);{let x=Fe(()=>e.height==null?"h-64":"flex-1");YD(b,{get value(){return e.spec.content},get class(){return F(x)},language:"markdown",onChange:k=>{e.onSpecChange({content:k})}})}Re(a,h)},$$slots:{default:!0}})};Pt(r,o=>{e.mode=="view"?o(i):o(s,!1)})}Re(t,n),$n()}var uZe=gt('<div class="bg-slate-100 p-2 rounded-md w-full h-full overflow-y-scroll"><pre> </pre></div>');function cG(t,e){Ln(e,!0);var n=uZe(),r=je(n),i=je(r,!0);Be(r),Be(n),on(s=>Pr(i,s),[()=>JSON.stringify(e.spec,null,2)]),Re(t,n),$n()}var cZe=gt('<span class="mx-1"> </span>'),hZe=gt("<button><!> <!></button>");function om(t,e){Ln(e,!0);let n=jn(e,"label",3,null),r=jn(e,"icon",3,null),i=jn(e,"title",3,""),s=jn(e,"order",3,null),o=jn(e,"disabled",3,!1);var a=hZe();a.__click=()=>{e.onClick?.()};let l;var h=je(a);{var f=b=>{const x=Fe(r);var k=ar(),T=pn(k);o0(T,()=>F(x),(I,M)=>{M(I,{class:"w-5 h-5"})}),Re(b,k)};Pt(h,b=>{r()!=null&&b(f)})}var p=lt(h,2);{var g=b=>{var x=cZe(),k=je(x,!0);Be(x),on(()=>Pr(k,n())),Re(b,x)};Pt(p,b=>{n()!=null&&n()!=""&&b(g)})}Be(a),on(()=>{Hi(a,1,`rounded-md flex select-none items-center px-1.5 py-1.5 h-[28px] border bg-white dark:bg-slate-900 border-slate-300 dark:border-slate-600 dark:text-slate-400 focus-visible:outline-2 outline-blue-600 -outline-offset-1 disabled:opacity-50 disabled:cursor-not-allowed ${e.class??""??""}`),a.disabled=o(),St(a,"title",i()),l=lr(a,"",l,{order:s()})}),Re(t,a),$n()}Js(["click"]);const fZe=""+new URL("duckdb-browser-mvp.worker-Bc8GfOvd.js",import.meta.url).href,dZe=""+new URL("duckdb-mvp-C5CQ5aRn.wasm",import.meta.url).href,pZe=""+new URL("duckdb-browser-eh.worker-DcYAbAi8.js",import.meta.url).href,mZe=""+new URL("duckdb-eh-CAt5YSMB.wasm",import.meta.url).href;function gZe(){let t=window.location.href;return t=t.replace(/#.*$/,""),t=t.replace(/\/[^/]*$/,"/"),t.endsWith("/")||(t+="/"),t+"duckdb-wasm"}async function yZe({log:t=!1}={}){const n=await Hee({mvp:{mainModule:dZe,mainWorker:fZe},eh:{mainModule:mZe,mainWorker:pZe}}),r=new Worker(n.mainWorker),i=t?new Wee:new Xee,s=new Yee(i,r);await s.instantiate(n.mainModule,n.pthreadWorker),await s.open({filesystem:{forceFullHTTPReads:!0}});const o=await s.connect();return await o.query(`SET custom_extension_repository = '${gZe()}';`),{duckdb:s,connection:o}}async function hhe(t,e,n=void 0){const r=await yZe();if(e=="wasm"){const i=await M_e({duckdb:r.duckdb,connection:r.connection});t.databaseConnector(i)}else if(e=="socket"){const i=await O0e({uri:n??""});t.databaseConnector(i)}else if(e=="rest"){const i=await k1e({uri:n??""});t.databaseConnector(i)}}function uQ(t){return t==null?null:t instanceof Array?t.length==0?null:wc(t).toString().trim():typeof t=="string"?t.trim():typeof t=="boolean"?kn(t).toString():t.toString().trim()}async function fhe(t,e){return Array.from(await t.query(`DESCRIBE ${e}`)).map(r=>({name:r.column_name,type:r.column_type,jsType:fC(r.column_type)}))}async function dhe(t,e,n){return(await t.query(`SELECT COUNT(DISTINCT ${It(n)}) AS count FROM ${e}`)).get(0).count}function fC(t){return vZe.has(t)?"number":bZe.has(t)?"string":t.match(/^(VARCHAR|TEXT)\[\d*\]$/)?"string[]":null}const vZe=new Set(["REAL","FLOAT4","FLOAT8","FLOAT","DOUBLE","INT","TINYINT","INT1","SMALLINT","INT2","SHORT","INTEGER","INT4","INT","SIGNED","INT8","LONG","BIGINT","UTINYINT","USMALLINT","UINTEGER","UBIGINT","UHUGEINT"]),bZe=new Set(["BOOLEAN","DATE","VARCHAR","CHAR","BPCHAR","TEXT","STRING"]);var _Ze=gt('<div><button class="flex-1 overflow-hidden text-left"><div class="text-ellipsis overflow-hidden w-full"> </div> <div class="text-ellipsis overflow-hidden w-full"><code class="text-xs whitespace-nowrap"> </code></div></button> <div class="flex-none flex gap-1 items-start"><!> <!></div></div>'),xZe=gt('<div class="mt-4"><!> <div class="text-slate-500 dark:text-slate-400 text-sm mb-1">SQL Predicate</div> <div class="w-full !h-32 mb-2"><!></div> <div class="flex gap-2"><!> <!> <div class="flex-1"></div> <button class="text-slate-400 dark:text-slate-500 hover:text-slate-800 dark:hover:text-slate-200">Current Predicate</button></div></div>'),wZe=gt('<div class="flex flex-col gap-1"><!> <button class="text-left text-slate-400 dark:text-slate-500 hover:text-slate-800 dark:hover:text-slate-200 whitespace-nowrap text-ellipsis w-full overflow-hidden select-none">+ Add Predicate</button></div> <!>',1);function OZe(t,e){Ln(e,!0);const n=()=>qo(s,"$colorScheme",r),[r,i]=Cf();let{colorScheme:s}=e.context,o=Fe(()=>e.spec.items??[]),a=Fe(()=>e.state.selection??[]),l=hn(!1),h=hn(null),f=hn(""),p=hn("");function g(){ct(l,!1),ct(h,null),ct(p,""),ct(f,"")}function b(k){e.onSpecChange({items:k}),e.onStateChange({selection:(e.state.selection??[]).filter(T=>k.find(I=>I.predicate==T)!=null)})}async function x(){let k=F(p).trim();k==""&&(k="Predicate");let T=F(f).trim();if(T=="")return null;try{await e.context.coordinator.query(Vn.from(e.context.table).select({count:Mo()}).where(T))}catch(I){return alert(I.toString()),null}return{name:k,predicate:T}}Oo(()=>{let k=kC({coordinator:e.context.coordinator,selection:e.context.filter,query:()=>ir`SELECT 1`}),T={reset:()=>{e.onStateChange({selection:[]})}};return xh(()=>{if(F(a).length==0)e.context.filter.update({source:T,clients:new Set([k]),predicate:null,value:null});else{let I=F(a).map(M=>"("+M+")").join(" OR ");e.context.filter.update({source:T,clients:new Set([k]),predicate:M3(I),value:I})}}),()=>{e.context.filter.update({source:T,clients:new Set([k]),predicate:null,value:null}),k.destroy()}}),qb(t,{get width(){return e.width},get height(){return e.height},scrollY:!0,children:(k,T)=>{var I=wZe(),M=pn(I),B=je(M);Wr(B,17,()=>F(o),Wi,(q,J)=>{const oe=Fe(()=>F(a).indexOf(F(J).predicate)>=0);var me=_Ze();let ae;var ce=je(me);ce.__click=We=>{We.shiftKey?e.onStateChange({selection:F(oe)?F(a).filter(at=>at!=F(J).predicate):[...F(a),F(J).predicate]}):F(oe)?e.onStateChange({selection:[]}):e.onStateChange({selection:[F(J).predicate]})};var se=je(ce),ge=je(se,!0);Be(se);var xe=lt(se,2),Se=je(xe),De=je(Se,!0);Be(Se),Be(xe),Be(ce);var He=lt(ce,2),Ue=je(He);My(Ue,{get icon(){return mz},onClick:()=>{ct(h,F(J)),ct(f,F(J).predicate,!0),ct(p,F(J).name,!0),ct(l,!0)}});var yt=lt(Ue,2);My(yt,{get icon(){return cO},onClick:()=>{b(F(o).filter(We=>We!==F(J)))}}),Be(He),Be(me),on(()=>{ae=Hi(me,1,"flex gap-4 w-full bg-white dark:bg-slate-800 p-2 rounded-md border border-slate-200 dark:border-slate-600 select-none",null,ae,{"!bg-blue-100":F(oe),"!border-blue-400":F(oe),"dark:!bg-blue-800":F(oe),"dark:!border-blue-600":F(oe)}),Pr(ge,F(J).name),St(Se,"title",F(J).predicate),Pr(De,F(J).predicate)}),Re(q,me)});var j=lt(B,2);j.__click=()=>{ct(l,!0),ct(h,null)},Be(M);var Q=lt(M,2);{var Z=q=>{var J=xZe(),oe=je(J);aA(oe,{placeholder:"predicate name",className:"w-full mb-2",get value(){return F(p)},set value(He){ct(p,He,!0)}});var me=lt(oe,4),ae=je(me);{let He=Fe(()=>({table:e.context.table,columns:e.context.columns}));YD(ae,{language:"sql",get sql(){return F(He)},class:"w-full h-full",get colorScheme(){return n()},get value(){return F(f)},onChange:Ue=>ct(f,Ue,!0)})}Be(me);var ce=lt(me,2),se=je(ce);{var ge=He=>{om(He,{label:"Update",onClick:async()=>{let Ue=await x();Ue&&(b(F(o).map(yt=>yt===F(h)?Ue:yt)),g())}})},xe=He=>{om(He,{label:"Add",onClick:async()=>{let Ue=await x();Ue&&(b([...F(o),Ue]),g())}})};Pt(se,He=>{F(h)!=null?He(ge):He(xe,!1)})}var Se=lt(se,2);om(Se,{label:"Cancel",onClick:()=>{ct(h,null),ct(l,!1)}});var De=lt(Se,4);De.__click=()=>ct(f,uQ(e.context.filter.predicate(null))??"",!0),Be(ce),Be(J),Re(q,J)};Pt(Q,q=>{F(l)&&q(Z)})}Re(k,I)},$$slots:{default:!0}}),$n(),i()}Js(["click"]);var SZe=gt('<label class="select-none flex items-center gap-2"><span class="text-slate-500 dark:text-slate-400 whitespace-nowrap"> </span> <!></label>');function ch(t,e){Ln(e,!0);let n=Qs(e,["$$slots","$$events","$$legacy"]),r="form-select rounded-md py-1 bg-white dark:bg-slate-900 border border-slate-300 dark:border-slate-600 dark:text-slate-400 select-none text-ellipsis";var i=ar(),s=pn(i);{var o=l=>{var h=SZe(),f=je(h),p=je(f,!0);Be(f);var g=lt(f,2);{let b=Fe(()=>r+" "+(e.class??""));tL(g,Ib(()=>n,{get class(){return F(b)}}))}Be(h),on(()=>Pr(p,e.label)),Re(l,h)},a=l=>{{let h=Fe(()=>r+" "+(e.class??""));tL(l,Ib(()=>n,{get class(){return F(h)}}))}};Pt(s,l=>{e.label!=null?l(o):l(a,!1)})}Re(t,i),$n()}var kZe=gt('<label class="text-sm text-slate-700 dark:text-slate-300 select-none cursor-pointer"> </label>'),CZe=gt('<div><button type="button" role="switch"><span aria-hidden="true"></span></button> <!></div>');function phe(t,e){Ln(e,!0);let n=jn(e,"value",15,!1),r=jn(e,"label",3,""),i=jn(e,"disabled",3,!1),s=jn(e,"class",3,"");const o=`switch-${Math.random().toString(36).slice(2,9)}`;function a(){i()||(n(!n()),e.onChange?.(n()))}var l=CZe();let h;var f=je(l);f.__click=a;var p=je(f);Be(f);var g=lt(f,2);{var b=x=>{var k=kZe(),T=je(k,!0);Be(k),on(()=>{St(k,"for",o),Pr(T,r())}),Re(x,k)};Pt(g,x=>{r()&&x(b)})}Be(l),on(()=>{h=Hi(l,1,`flex items-center gap-2 ${s()??""}`,null,h,{"opacity-50":i()}),St(f,"id",o),St(f,"aria-checked",n()),St(f,"aria-label",r()||"Toggle"),f.disabled=i(),Hi(f,1,`relative inline-flex h-6 w-11 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out focus:outline-none focus:ring-2 focus:ring-blue-600 focus:ring-offset-2 ${n()?"bg-blue-600":"bg-slate-200 dark:bg-slate-700"}`),Hi(p,1,`pointer-events-none inline-block h-5 w-5 transform rounded-full bg-white shadow ring-0 transition duration-200 ease-in-out ${n()?"translate-x-5":"translate-x-0"}`)}),Re(t,l),$n()}Js(["click"]);var AZe=gt("<button>An occured with this chart. Click to retry.</button>"),EZe=gt("<div><!></div>");function mhe(t,e){Ln(e,!0);let n=Qs(e,["$$slots","$$events","$$legacy"]),r=Fe(()=>bJe(e.spec)),i=hn(100),s=hn(100);function o(f,p){console.trace("Error happened in chart with spec",p.spec,p.error)}var a=EZe();let l;var h=je(a);QY(h,{failed:(p,g=Ys,b=Ys)=>{var x=AZe();x.__click=function(...k){b()?.apply(this,k)},Do(x,(k,T)=>o?.(k,T),()=>({spec:e.spec,error:g()})),Re(p,x)}},p=>{var g=ar(),b=pn(g);{let x=Fe(()=>e.width=="container"?F(i):e.width),k=Fe(()=>e.height=="container"?F(s):e.height);o0(b,()=>F(r),(T,I)=>{I(T,Ib(()=>n,{get width(){return F(x)},get height(){return F(k)}}))})}Re(p,g)}),Be(a),on(()=>l=lr(a,"",l,{width:e.width=="container"?"100%":e.width!=null?`${e.width}px`:"fit-content",height:e.height=="container"?"100%":e.height!=null?`${e.height}px`:"fit-content"})),a0(a,"clientWidth",f=>ct(i,f)),a0(a,"clientHeight",f=>ct(s,f)),Re(t,a),$n()}Js(["click"]);const TZe=`<svg width="64" height="64" viewBox="0 0 64 64" fill="none" xmlns="http://www.w3.org/2000/svg">
<line x1="15" y1="54" x2="15" y2="12" stroke="black" stroke-width="2"/>
<line x1="32" y1="53" x2="32" y2="10" stroke="black" stroke-width="2"/>
<line x1="49" y1="45" x2="49" y2="19" stroke="black" stroke-width="2"/>
<rect x="8" y="27" width="14" height="18" rx="3" fill="#007AFF"/>
<rect x="25" y="22" width="14" height="14" rx="3" fill="#007AFF"/>
<rect x="42" y="27" width="14" height="12" rx="3" fill="#007AFF"/>
</svg>
`,PZe=`<svg width="64" height="64" viewBox="0 0 64 64" fill="none" xmlns="http://www.w3.org/2000/svg">
<circle cx="34" cy="16" r="6" fill="#007AFF" fill-opacity="0.1" stroke="#007AFF" stroke-width="2"/>
<circle cx="24.5" cy="29.5" r="4.5" fill="#007AFF" fill-opacity="0.1" stroke="#007AFF" stroke-width="2"/>
<circle cx="47.5" cy="43.5" r="4.5" fill="#007AFF" fill-opacity="0.1" stroke="#007AFF" stroke-width="2"/>
<circle cx="42" cy="49" r="1" fill="#34C759" fill-opacity="0.1" stroke="#34C759" stroke-width="2"/>
<circle cx="20" cy="43" r="5" fill="#34C759" fill-opacity="0.1" stroke="#34C759" stroke-width="2"/>
<circle cx="38" cy="48" r="3" fill="#007AFF" fill-opacity="0.1" stroke="#007AFF" stroke-width="2"/>
<circle cx="36" cy="28" r="8" fill="#34C759" fill-opacity="0.1" stroke="#34C759" stroke-width="2"/>
<circle cx="13" cy="32" r="3" fill="#007AFF" fill-opacity="0.1" stroke="#007AFF" stroke-width="2"/>
<circle cx="22" cy="19" r="2" fill="#007AFF" fill-opacity="0.1" stroke="#007AFF" stroke-width="2"/>
</svg>
`,DZe=`<svg width="64" height="64" viewBox="0 0 64 64" fill="none" xmlns="http://www.w3.org/2000/svg">
<rect x="18" y="20" width="14" height="8" rx="3" fill="#007AFF"/>
<rect x="8" y="31" width="8" height="8" rx="4" fill="black" fill-opacity="0.2"/>
<rect x="34" y="31" width="22" height="8" rx="3" fill="black" fill-opacity="0.2"/>
<rect x="8" y="42" width="8" height="8" rx="4" fill="black" fill-opacity="0.2"/>
<rect x="18" y="42" width="14" height="8" rx="3" fill="black" fill-opacity="0.2"/>
<rect x="34" y="42" width="22" height="8" rx="3" fill="black" fill-opacity="0.2"/>
<circle cx="25" cy="24" r="11.5" stroke="black" stroke-width="3"/>
<path d="M53 20C54.6569 20 56 21.3431 56 23V25C56 26.6569 54.6569 28 53 28H37.373C37.7801 26.7399 38 25.3956 38 24C38 22.6044 37.7801 21.2601 37.373 20H53Z" fill="#007AFF" fill-opacity="0.5"/>
<path d="M32 36C32 37.6569 30.6569 39 29 39H21C19.3431 39 18 37.6569 18 36V34.9561C20.0206 36.2498 22.4227 37 25 37C27.5773 37 29.9794 36.2498 32 34.9561V36Z" fill="black" fill-opacity="0.2"/>
<path d="M12 20C12.2082 20 12.4127 20.0152 12.6123 20.0459C12.2147 21.2928 12 22.6213 12 24C12 25.3784 12.2148 26.7065 12.6123 27.9531C12.4127 27.9838 12.2082 28 12 28C9.79086 28 8 26.2091 8 24C8 21.7909 9.79086 20 12 20Z" fill="#007AFF" fill-opacity="0.5"/>
<path d="M46.7676 42.2324C47.7439 43.2087 47.7439 44.7913 46.7676 45.7676C45.7913 46.7439 44.2087 46.7439 43.2324 45.7676L32.9727 35.5078C34.3519 34.5505 35.5505 33.3519 36.5078 31.9727L46.7676 42.2324Z" fill="black"/>
</svg>
`,IZe=`<svg width="64" height="64" viewBox="0 0 64 64" fill="none" xmlns="http://www.w3.org/2000/svg">
<rect x="9" y="9" width="46" height="46" stroke="black" stroke-opacity="0.2" stroke-width="2" stroke-dasharray="2 2"/>
<path d="M9 55C28 55 30 41 33 31C36 21 42 9 55 9" stroke="#34C759" stroke-width="2" stroke-linecap="round"/>
<path d="M9 55C20 44 11.5 6.5 55 8.99999" stroke="#007AFF" stroke-width="2" stroke-linecap="round"/>
</svg>
`,MZe=`<svg width="64" height="64" viewBox="0 0 64 64" fill="none" xmlns="http://www.w3.org/2000/svg">
<circle cx="32" cy="28" r="2" fill="#007AFF"/>
<circle cx="32" cy="24" r="2" fill="#007AFF"/>
<circle cx="32" cy="20" r="2" fill="#007AFF"/>
<circle cx="36" cy="32" r="2" fill="#007AFF"/>
<circle cx="36" cy="28" r="2" fill="#007AFF"/>
<circle cx="36" cy="24" r="2" fill="#007AFF"/>
<circle cx="28" cy="32" r="2" fill="#007AFF"/>
<circle cx="28" cy="28" r="2" fill="#007AFF"/>
<circle cx="28" cy="24" r="2" fill="#007AFF"/>
<circle cx="28" cy="20" r="2" fill="#007AFF"/>
<circle cx="28" cy="16" r="2" fill="#007AFF"/>
<circle cx="44" cy="24" r="2" fill="#A3CFFF"/>
<circle cx="44" cy="20" r="2" fill="#A3CFFF"/>
<circle cx="44" cy="16" r="2" fill="#A3CFFF"/>
<circle cx="40" cy="20" r="2" fill="#A3CFFF"/>
<circle cx="40" cy="16" r="2" fill="#A3CFFF"/>
<circle cx="20" cy="32" r="2" fill="#007AFF"/>
<circle cx="20" cy="28" r="2" fill="#007AFF"/>
<circle cx="20" cy="24" r="2" fill="#007AFF"/>
<circle cx="20" cy="20" r="2" fill="#3897FF"/>
<circle cx="20" cy="16" r="2" fill="#3897FF"/>
<circle cx="24" cy="32" r="2" fill="#007AFF"/>
<circle cx="24" cy="28" r="2" fill="#007AFF"/>
<circle cx="24" cy="24" r="2" fill="#007AFF"/>
<circle cx="24" cy="20" r="2" fill="#3897FF"/>
<circle cx="24" cy="16" r="2" fill="#3897FF"/>
<circle cx="16" cy="32" r="2" fill="#3897FF"/>
<circle cx="16" cy="28" r="2" fill="#3897FF"/>
<circle cx="16" cy="24" r="2" fill="#3897FF"/>
<circle cx="32" cy="48" r="2" fill="#A3CFFF"/>
<circle cx="32" cy="36" r="2" fill="#007AFF"/>
<circle cx="36" cy="48" r="2" fill="#A3CFFF"/>
<circle cx="36" cy="36" r="2" fill="#007AFF"/>
<circle cx="28" cy="48" r="2" fill="#A3CFFF"/>
<circle cx="28" cy="36" r="2" fill="#007AFF"/>
<circle cx="44" cy="44" r="2" fill="#3897FF"/>
<circle cx="48" cy="44" r="2" fill="#3897FF"/>
<circle cx="48" cy="40" r="2" fill="#3897FF"/>
<circle cx="52" cy="32" r="2" fill="#A3CFFF"/>
<circle cx="52" cy="16" r="2" fill="#E0EFFF"/>
<circle cx="56" cy="32" r="2" fill="#A3CFFF"/>
<circle cx="56" cy="28" r="2" fill="#A3CFFF"/>
<circle cx="56" cy="16" r="2" fill="#E0EFFF"/>
<circle cx="52" cy="36" r="2" fill="#A3CFFF"/>
<circle cx="56" cy="36" r="2" fill="#A3CFFF"/>
<circle cx="8" cy="16" r="2" fill="#E0EFFF"/>
<circle cx="12" cy="32" r="2" fill="#3897FF"/>
<circle cx="12" cy="28" r="2" fill="#3897FF"/>
<circle cx="28" cy="8" r="2" fill="#A3CFFF"/>
<circle cx="48" cy="12" r="2" fill="#E0EFFF"/>
<circle cx="48" cy="8" r="2" fill="#E0EFFF"/>
<circle cx="20" cy="12" r="2" fill="#A3CFFF"/>
<circle cx="24" cy="12" r="2" fill="#A3CFFF"/>
<circle cx="24" cy="8" r="2" fill="#A3CFFF"/>
<circle cx="52" cy="12" r="2" fill="#E0EFFF"/>
<circle cx="56" cy="12" r="2" fill="#E0EFFF"/>
<circle cx="56" cy="8" r="2" fill="#E0EFFF"/>
<circle cx="8" cy="12" r="2" fill="#E0EFFF"/>
<circle cx="12" cy="12" r="2" fill="#E0EFFF"/>
<circle cx="32" cy="56" r="2" fill="#007AFF" fill-opacity="0.12"/>
<circle cx="32" cy="52" r="2" fill="#007AFF" fill-opacity="0.12"/>
<circle cx="36" cy="56" r="2" fill="#007AFF" fill-opacity="0.12"/>
<circle cx="28" cy="56" r="2" fill="#007AFF" fill-opacity="0.12"/>
<circle cx="28" cy="52" r="2" fill="#007AFF" fill-opacity="0.12"/>
<circle cx="44" cy="52" r="2" fill="#007AFF" fill-opacity="0.12"/>
<circle cx="40" cy="52" r="2" fill="#007AFF" fill-opacity="0.12"/>
<circle cx="20" cy="52" r="2" fill="#007AFF" fill-opacity="0.12"/>
<circle cx="24" cy="56" r="2" fill="#007AFF" fill-opacity="0.12"/>
<circle cx="24" cy="52" r="2" fill="#007AFF" fill-opacity="0.12"/>
<circle cx="16" cy="52" r="2" fill="#007AFF" fill-opacity="0.12"/>
<circle cx="12" cy="52" r="2" fill="#007AFF" fill-opacity="0.12"/>
<circle cx="8" cy="48" r="2" fill="#A3CFFF"/>
<circle cx="12" cy="48" r="2" fill="#A3CFFF"/>
<circle cx="12" cy="44" r="2" fill="#3897FF"/>
<circle cx="40" cy="48" r="2" fill="#A3CFFF"/>
<circle cx="20" cy="48" r="2" fill="#A3CFFF"/>
<circle cx="20" cy="40" r="2" fill="#007AFF"/>
<circle cx="24" cy="36" r="2" fill="#007AFF"/>
<circle cx="16" cy="48" r="2" fill="#A3CFFF"/>
<circle cx="16" cy="40" r="2" fill="#3897FF"/>
<circle cx="16" cy="36" r="2" fill="#3897FF"/>
</svg>
`,RZe=`<svg width="64" height="64" viewBox="0 0 64 64" fill="none" xmlns="http://www.w3.org/2000/svg">
<rect x="8" y="8" width="48" height="14" rx="3" fill="#007AFF"/>
<rect x="8" y="25" width="36" height="14" rx="3" fill="#007AFF"/>
<rect x="8" y="42" width="24" height="14" rx="3" fill="#007AFF"/>
</svg>
`,FZe=`<svg width="64" height="64" viewBox="0 0 64 64" fill="none" xmlns="http://www.w3.org/2000/svg">
<rect x="48" y="48" width="8" height="8" rx="2" fill="#007AFF"/>
<rect x="48" y="38" width="8" height="8" rx="2" fill="#007AFF" fill-opacity="0.78"/>
<rect x="48" y="28" width="8" height="8" rx="2" fill="#007AFF"/>
<rect x="48" y="18" width="8" height="8" rx="2" fill="#007AFF" fill-opacity="0.5"/>
<rect x="48" y="8" width="8" height="8" rx="2" fill="#007AFF"/>
<rect x="38" y="48" width="8" height="8" rx="2" fill="#007AFF" fill-opacity="0.96"/>
<rect x="38" y="38" width="8" height="8" rx="2" fill="#007AFF"/>
<rect x="38" y="28" width="8" height="8" rx="2" fill="#007AFF" fill-opacity="0.63"/>
<rect x="38" y="18" width="8" height="8" rx="2" fill="#007AFF" fill-opacity="0.36"/>
<rect x="38" y="8" width="8" height="8" rx="2" fill="#007AFF" fill-opacity="0.64"/>
<rect x="28" y="48" width="8" height="8" rx="2" fill="#007AFF"/>
<rect x="28" y="38" width="8" height="8" rx="2" fill="#007AFF" fill-opacity="0.45"/>
<rect x="28" y="28" width="8" height="8" rx="2" fill="#007AFF" fill-opacity="0.28"/>
<rect x="28" y="18" width="8" height="8" rx="2" fill="#007AFF" fill-opacity="0.8"/>
<rect x="28" y="8" width="8" height="8" rx="2" fill="#007AFF" fill-opacity="0.7"/>
<rect x="18" y="48" width="8" height="8" rx="2" fill="#007AFF" fill-opacity="0.27"/>
<rect x="18" y="38" width="8" height="8" rx="2" fill="#007AFF" fill-opacity="0.46"/>
<rect x="18" y="28" width="8" height="8" rx="2" fill="#007AFF" fill-opacity="0.74"/>
<rect x="18" y="18" width="8" height="8" rx="2" fill="#007AFF" fill-opacity="0.96"/>
<rect x="18" y="8" width="8" height="8" rx="2" fill="#007AFF" fill-opacity="0.82"/>
<rect x="8" y="48" width="8" height="8" rx="2" fill="#007AFF"/>
<rect x="8" y="38" width="8" height="8" rx="2" fill="#007AFF"/>
<rect x="8" y="28" width="8" height="8" rx="2" fill="#007AFF" fill-opacity="0.33"/>
<rect x="8" y="18" width="8" height="8" rx="2" fill="#007AFF" fill-opacity="0.12"/>
<rect x="8" y="8" width="8" height="8" rx="2" fill="#007AFF" fill-opacity="0.4"/>
</svg>
`,LZe=`<svg width="64" height="64" viewBox="0 0 64 64" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M9 32L20 39L32 23.5L44 38L55 27" stroke="#34C759" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
<rect x="9" y="9" width="46" height="46" stroke="black" stroke-opacity="0.2" stroke-width="2" stroke-dasharray="2 2"/>
<path d="M9 43L20 44L32 32.5L44 28L55 17" stroke="#007AFF" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
</svg>
`,$Ze=`<svg width="64" height="64" viewBox="0 0 64 64" fill="none" xmlns="http://www.w3.org/2000/svg">
<line x1="10.5" y1="37.5" x2="53.5" y2="37.5" stroke="black" stroke-width="3" stroke-linecap="round"/>
<line x1="10.5" y1="49.5" x2="53.5" y2="49.5" stroke="black" stroke-width="3" stroke-linecap="round"/>
<line x1="41.5" y1="25.5" x2="53.5" y2="25.5" stroke="black" stroke-width="3" stroke-linecap="round"/>
<path d="M10.2764 14.2031H12.3682L15.8662 23.8359L19.3555 14.2031H21.4561L16.7012 27H15.0225L10.2764 14.2031ZM9.22168 14.2031H11.2695L11.6387 23.0537V27H9.22168V14.2031ZM20.4541 14.2031H22.5107V27H20.0938V23.0537L20.4541 14.2031ZM28.7949 27H26.0352L26.0527 25.1016H28.7949C29.5391 25.1016 30.1631 24.9375 30.667 24.6094C31.1709 24.2754 31.5518 23.7979 31.8096 23.1768C32.0674 22.5498 32.1963 21.7998 32.1963 20.9268V20.2676C32.1963 19.5938 32.123 18.999 31.9766 18.4834C31.8301 17.9678 31.6133 17.5342 31.3262 17.1826C31.0449 16.8311 30.6963 16.5645 30.2803 16.3828C29.8643 16.2012 29.3867 16.1104 28.8477 16.1104H25.9824V14.2031H28.8477C29.7031 14.2031 30.4824 14.3467 31.1855 14.6338C31.8945 14.9209 32.5068 15.334 33.0225 15.873C33.5439 16.4062 33.9424 17.0449 34.2178 17.7891C34.499 18.5332 34.6396 19.3652 34.6396 20.2852V20.9268C34.6396 21.8408 34.499 22.6729 34.2178 23.4229C33.9424 24.167 33.5439 24.8057 33.0225 25.3389C32.5068 25.8721 31.8916 26.2822 31.1768 26.5693C30.4619 26.8564 29.668 27 28.7949 27ZM27.3887 14.2031V27H24.9717V14.2031H27.3887Z" fill="black"/>
</svg>
`,BZe=`<svg width="64" height="64" viewBox="0 0 64 64" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M24.5966 37L26.2869 26.8182H29.7273C30.5227 26.8182 31.1508 26.9607 31.6115 27.2457C32.0755 27.5308 32.3887 27.9169 32.5511 28.4041C32.7169 28.8913 32.75 29.4366 32.6506 30.0398C32.5511 30.6364 32.3374 31.1799 32.0092 31.6705C31.6844 32.161 31.2436 32.5521 30.6868 32.8438C30.1333 33.1354 29.4621 33.2812 28.6733 33.2812H26.2074L26.3864 32.1875H28.8125C29.3561 32.1875 29.8101 32.093 30.1747 31.9041C30.5393 31.7152 30.8243 31.4583 31.0298 31.1335C31.2353 30.8087 31.3712 30.4441 31.4375 30.0398C31.5038 29.6288 31.4872 29.2642 31.3878 28.946C31.2917 28.6245 31.0911 28.3726 30.7862 28.1903C30.4846 28.0047 30.0587 27.9119 29.5085 27.9119H27.3409L25.8295 37H24.5966ZM33.3105 37L34.5833 29.3636H35.7168L35.5179 30.517H35.5975C35.7963 30.1392 36.0996 29.8326 36.5073 29.5973C36.915 29.362 37.3475 29.2443 37.8049 29.2443C37.8944 29.2443 38.0021 29.246 38.128 29.2493C38.254 29.2493 38.3517 29.2543 38.4213 29.2642L38.2225 30.4574C38.1827 30.4474 38.0932 30.4325 37.954 30.4126C37.8148 30.3894 37.6657 30.3778 37.5066 30.3778C37.1354 30.3778 36.7923 30.4557 36.4775 30.6115C36.1626 30.764 35.8991 30.9761 35.687 31.2479C35.4748 31.5163 35.339 31.8229 35.2793 32.1676L34.4838 37H33.3105ZM41.4963 37.1591C40.7638 37.1591 40.1589 36.9967 39.6816 36.6719C39.2044 36.3438 38.8713 35.8864 38.6824 35.2997C38.4934 34.7098 38.4636 34.0237 38.5929 33.2415C38.7221 32.4593 38.979 31.7699 39.3635 31.1733C39.7479 30.5734 40.2269 30.1061 40.8002 29.7713C41.3736 29.4332 42.0034 29.2642 42.6895 29.2642C43.0872 29.2642 43.47 29.3305 43.8379 29.4631C44.2058 29.5956 44.524 29.8111 44.7924 30.1094C45.0609 30.4044 45.2482 30.7955 45.3542 31.2827C45.4603 31.7699 45.4537 32.3698 45.3343 33.0824L45.2548 33.5795H39.3684L39.5275 32.5653H44.2207C44.2969 32.1345 44.277 31.75 44.161 31.4119C44.0484 31.0739 43.8511 30.8071 43.5694 30.6115C43.291 30.416 42.938 30.3182 42.5105 30.3182C42.0697 30.3182 41.6587 30.4375 41.2775 30.6761C40.8964 30.9115 40.5782 31.2098 40.323 31.571C40.0678 31.929 39.9087 32.2936 39.8457 32.6648L39.7065 33.5398C39.6071 34.1728 39.622 34.6766 39.7512 35.0511C39.8838 35.4257 40.1142 35.6958 40.4423 35.8615C40.7704 36.0239 41.1814 36.1051 41.6752 36.1051C41.9901 36.1051 42.2801 36.062 42.5453 35.9759C42.8104 35.8864 43.0474 35.7538 43.2562 35.5781C43.465 35.3991 43.6407 35.1771 43.7832 34.9119L44.8571 35.2301C44.6748 35.6146 44.4179 35.9527 44.0865 36.2443C43.7583 36.5327 43.3739 36.758 42.9331 36.9205C42.4956 37.0795 42.0166 37.1591 41.4963 37.1591ZM49.3638 37.1591C48.7241 37.1591 48.1872 36.9983 47.753 36.6768C47.3188 36.352 47.0123 35.8946 46.8333 35.3047C46.6576 34.7114 46.6361 34.0104 46.7686 33.2017C46.9045 32.3996 47.1581 31.7036 47.5293 31.1136C47.9038 30.5237 48.3629 30.0679 48.9064 29.7464C49.45 29.425 50.0433 29.2642 50.6863 29.2642C51.1834 29.2642 51.5629 29.3471 51.8248 29.5128C52.0899 29.6752 52.2821 29.8608 52.4015 30.0696C52.5208 30.2751 52.6119 30.4441 52.6749 30.5767H52.7743L53.4007 26.8182H54.574L52.8837 37H51.7502L51.949 35.8267H51.8098C51.7005 35.9659 51.548 36.1416 51.3525 36.3537C51.1569 36.5625 50.8984 36.7498 50.5769 36.9155C50.2587 37.0779 49.8543 37.1591 49.3638 37.1591ZM49.6522 36.1051C50.1228 36.1051 50.5437 35.9825 50.915 35.7372C51.2895 35.4886 51.601 35.1456 51.8496 34.7081C52.0982 34.2673 52.2705 33.7585 52.3667 33.1818C52.4628 32.6117 52.4595 32.1129 52.3567 31.6854C52.254 31.2545 52.0568 30.9197 51.7651 30.6811C51.4734 30.4392 51.0873 30.3182 50.6067 30.3182C50.1129 30.3182 49.6837 30.4458 49.3191 30.701C48.9545 30.9529 48.6578 31.2959 48.4292 31.7301C48.2005 32.161 48.0414 32.6449 47.9519 33.1818C47.8624 33.7254 47.8607 34.2192 47.9469 34.6634C48.0331 35.1042 48.2154 35.4555 48.4938 35.7173C48.7755 35.9759 49.1616 36.1051 49.6522 36.1051Z" fill="#007AFF"/>
<path d="M24.5966 20L26.2869 9.81818H29.7273C30.5227 9.81818 31.1508 9.9607 31.6115 10.2457C32.0755 10.5308 32.3887 10.9169 32.5511 11.4041C32.7169 11.8913 32.75 12.4366 32.6506 13.0398C32.5511 13.6364 32.3374 14.1799 32.0092 14.6705C31.6844 15.161 31.2436 15.5521 30.6868 15.8438C30.1333 16.1354 29.4621 16.2812 28.6733 16.2812H26.2074L26.3864 15.1875H28.8125C29.3561 15.1875 29.8101 15.093 30.1747 14.9041C30.5393 14.7152 30.8243 14.4583 31.0298 14.1335C31.2353 13.8087 31.3712 13.4441 31.4375 13.0398C31.5038 12.6288 31.4872 12.2642 31.3878 11.946C31.2917 11.6245 31.0911 11.3726 30.7862 11.1903C30.4846 11.0047 30.0587 10.9119 29.5085 10.9119H27.3409L25.8295 20H24.5966ZM33.3105 20L34.5833 12.3636H35.7168L35.5179 13.517H35.5975C35.7963 13.1392 36.0996 12.8326 36.5073 12.5973C36.915 12.362 37.3475 12.2443 37.8049 12.2443C37.8944 12.2443 38.0021 12.246 38.128 12.2493C38.254 12.2493 38.3517 12.2543 38.4213 12.2642L38.2225 13.4574C38.1827 13.4474 38.0932 13.4325 37.954 13.4126C37.8148 13.3894 37.6657 13.3778 37.5066 13.3778C37.1354 13.3778 36.7923 13.4557 36.4775 13.6115C36.1626 13.764 35.8991 13.9761 35.687 14.2479C35.4748 14.5163 35.339 14.8229 35.2793 15.1676L34.4838 20H33.3105ZM41.4963 20.1591C40.7638 20.1591 40.1589 19.9967 39.6816 19.6719C39.2044 19.3438 38.8713 18.8864 38.6824 18.2997C38.4934 17.7098 38.4636 17.0237 38.5929 16.2415C38.7221 15.4593 38.979 14.7699 39.3635 14.1733C39.7479 13.5734 40.2269 13.1061 40.8002 12.7713C41.3736 12.4332 42.0034 12.2642 42.6895 12.2642C43.0872 12.2642 43.47 12.3305 43.8379 12.4631C44.2058 12.5956 44.524 12.8111 44.7924 13.1094C45.0609 13.4044 45.2482 13.7955 45.3542 14.2827C45.4603 14.7699 45.4537 15.3698 45.3343 16.0824L45.2548 16.5795H39.3684L39.5275 15.5653H44.2207C44.2969 15.1345 44.277 14.75 44.161 14.4119C44.0484 14.0739 43.8511 13.8071 43.5694 13.6115C43.291 13.416 42.938 13.3182 42.5105 13.3182C42.0697 13.3182 41.6587 13.4375 41.2775 13.6761C40.8964 13.9115 40.5782 14.2098 40.323 14.571C40.0678 14.929 39.9087 15.2936 39.8457 15.6648L39.7065 16.5398C39.6071 17.1728 39.622 17.6766 39.7512 18.0511C39.8838 18.4257 40.1142 18.6958 40.4423 18.8615C40.7704 19.0239 41.1814 19.1051 41.6752 19.1051C41.9901 19.1051 42.2801 19.062 42.5453 18.9759C42.8104 18.8864 43.0474 18.7538 43.2562 18.5781C43.465 18.3991 43.6407 18.1771 43.7832 17.9119L44.8571 18.2301C44.6748 18.6146 44.4179 18.9527 44.0865 19.2443C43.7583 19.5327 43.3739 19.758 42.9331 19.9205C42.4956 20.0795 42.0166 20.1591 41.4963 20.1591ZM49.3638 20.1591C48.7241 20.1591 48.1872 19.9983 47.753 19.6768C47.3188 19.352 47.0123 18.8946 46.8333 18.3047C46.6576 17.7114 46.6361 17.0104 46.7686 16.2017C46.9045 15.3996 47.1581 14.7036 47.5293 14.1136C47.9038 13.5237 48.3629 13.0679 48.9064 12.7464C49.45 12.425 50.0433 12.2642 50.6863 12.2642C51.1834 12.2642 51.5629 12.3471 51.8248 12.5128C52.0899 12.6752 52.2821 12.8608 52.4015 13.0696C52.5208 13.2751 52.6119 13.4441 52.6749 13.5767H52.7743L53.4007 9.81818H54.574L52.8837 20H51.7502L51.949 18.8267H51.8098C51.7005 18.9659 51.548 19.1416 51.3525 19.3537C51.1569 19.5625 50.8984 19.7498 50.5769 19.9155C50.2587 20.0779 49.8543 20.1591 49.3638 20.1591ZM49.6522 19.1051C50.1228 19.1051 50.5437 18.9825 50.915 18.7372C51.2895 18.4886 51.601 18.1456 51.8496 17.7081C52.0982 17.2673 52.2705 16.7585 52.3667 16.1818C52.4628 15.6117 52.4595 15.1129 52.3567 14.6854C52.254 14.2545 52.0568 13.9197 51.7651 13.6811C51.4734 13.4392 51.0873 13.3182 50.6067 13.3182C50.1129 13.3182 49.6837 13.4458 49.3191 13.701C48.9545 13.9529 48.6578 14.2959 48.4292 14.7301C48.2005 15.161 48.0414 15.6449 47.9519 16.1818C47.8624 16.7254 47.8607 17.2192 47.9469 17.6634C48.0331 18.1042 48.2154 18.4555 48.4938 18.7173C48.7755 18.9759 49.1616 19.1051 49.6522 19.1051Z" fill="#007AFF" fill-opacity="0.25"/>
<path d="M24.5966 54L26.2869 43.8182H29.7273C30.5227 43.8182 31.1508 43.9607 31.6115 44.2457C32.0755 44.5308 32.3887 44.9169 32.5511 45.4041C32.7169 45.8913 32.75 46.4366 32.6506 47.0398C32.5511 47.6364 32.3374 48.1799 32.0092 48.6705C31.6844 49.161 31.2436 49.5521 30.6868 49.8438C30.1333 50.1354 29.4621 50.2812 28.6733 50.2812H26.2074L26.3864 49.1875H28.8125C29.3561 49.1875 29.8101 49.093 30.1747 48.9041C30.5393 48.7152 30.8243 48.4583 31.0298 48.1335C31.2353 47.8087 31.3712 47.4441 31.4375 47.0398C31.5038 46.6288 31.4872 46.2642 31.3878 45.946C31.2917 45.6245 31.0911 45.3726 30.7862 45.1903C30.4846 45.0047 30.0587 44.9119 29.5085 44.9119H27.3409L25.8295 54H24.5966ZM33.3105 54L34.5833 46.3636H35.7168L35.5179 47.517H35.5975C35.7963 47.1392 36.0996 46.8326 36.5073 46.5973C36.915 46.362 37.3475 46.2443 37.8049 46.2443C37.8944 46.2443 38.0021 46.246 38.128 46.2493C38.254 46.2493 38.3517 46.2543 38.4213 46.2642L38.2225 47.4574C38.1827 47.4474 38.0932 47.4325 37.954 47.4126C37.8148 47.3894 37.6657 47.3778 37.5066 47.3778C37.1354 47.3778 36.7923 47.4557 36.4775 47.6115C36.1626 47.764 35.8991 47.9761 35.687 48.2479C35.4748 48.5163 35.339 48.8229 35.2793 49.1676L34.4838 54H33.3105ZM41.4963 54.1591C40.7638 54.1591 40.1589 53.9967 39.6816 53.6719C39.2044 53.3438 38.8713 52.8864 38.6824 52.2997C38.4934 51.7098 38.4636 51.0237 38.5929 50.2415C38.7221 49.4593 38.979 48.7699 39.3635 48.1733C39.7479 47.5734 40.2269 47.1061 40.8002 46.7713C41.3736 46.4332 42.0034 46.2642 42.6895 46.2642C43.0872 46.2642 43.47 46.3305 43.8379 46.4631C44.2058 46.5956 44.524 46.8111 44.7924 47.1094C45.0609 47.4044 45.2482 47.7955 45.3542 48.2827C45.4603 48.7699 45.4537 49.3698 45.3343 50.0824L45.2548 50.5795H39.3684L39.5275 49.5653H44.2207C44.2969 49.1345 44.277 48.75 44.161 48.4119C44.0484 48.0739 43.8511 47.8071 43.5694 47.6115C43.291 47.416 42.938 47.3182 42.5105 47.3182C42.0697 47.3182 41.6587 47.4375 41.2775 47.6761C40.8964 47.9115 40.5782 48.2098 40.323 48.571C40.0678 48.929 39.9087 49.2936 39.8457 49.6648L39.7065 50.5398C39.6071 51.1728 39.622 51.6766 39.7512 52.0511C39.8838 52.4257 40.1142 52.6958 40.4423 52.8615C40.7704 53.0239 41.1814 53.1051 41.6752 53.1051C41.9901 53.1051 42.2801 53.062 42.5453 52.9759C42.8104 52.8864 43.0474 52.7538 43.2562 52.5781C43.465 52.3991 43.6407 52.1771 43.7832 51.9119L44.8571 52.2301C44.6748 52.6146 44.4179 52.9527 44.0865 53.2443C43.7583 53.5327 43.3739 53.758 42.9331 53.9205C42.4956 54.0795 42.0166 54.1591 41.4963 54.1591ZM49.3638 54.1591C48.7241 54.1591 48.1872 53.9983 47.753 53.6768C47.3188 53.352 47.0123 52.8946 46.8333 52.3047C46.6576 51.7114 46.6361 51.0104 46.7686 50.2017C46.9045 49.3996 47.1581 48.7036 47.5293 48.1136C47.9038 47.5237 48.3629 47.0679 48.9064 46.7464C49.45 46.425 50.0433 46.2642 50.6863 46.2642C51.1834 46.2642 51.5629 46.3471 51.8248 46.5128C52.0899 46.6752 52.2821 46.8608 52.4015 47.0696C52.5208 47.2751 52.6119 47.4441 52.6749 47.5767H52.7743L53.4007 43.8182H54.574L52.8837 54H51.7502L51.949 52.8267H51.8098C51.7005 52.9659 51.548 53.1416 51.3525 53.3537C51.1569 53.5625 50.8984 53.7498 50.5769 53.9155C50.2587 54.0779 49.8543 54.1591 49.3638 54.1591ZM49.6522 53.1051C50.1228 53.1051 50.5437 52.9825 50.915 52.7372C51.2895 52.4886 51.601 52.1456 51.8496 51.7081C52.0982 51.2673 52.2705 50.7585 52.3667 50.1818C52.4628 49.6117 52.4595 49.1129 52.3567 48.6854C52.254 48.2545 52.0568 47.9197 51.7651 47.6811C51.4734 47.4392 51.0873 47.3182 50.6067 47.3182C50.1129 47.3182 49.6837 47.4458 49.3191 47.701C48.9545 47.9529 48.6578 48.2959 48.4292 48.7301C48.2005 49.161 48.0414 49.6449 47.9519 50.1818C47.8624 50.7254 47.8607 51.2192 47.9469 51.6634C48.0331 52.1042 48.2154 52.4555 48.4938 52.7173C48.7755 52.9759 49.1616 53.1051 49.6522 53.1051Z" fill="#007AFF" fill-opacity="0.25"/>
<rect x="9" y="10" width="10" height="10" rx="3" fill="#007AFF" fill-opacity="0.25"/>
<rect x="9" y="27" width="10" height="10" rx="3" fill="#007AFF"/>
<rect x="9" y="44" width="10" height="10" rx="3" fill="#007AFF" fill-opacity="0.25"/>
</svg>
`,NZe=`<svg width="64" height="64" viewBox="0 0 64 64" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M28.1666 45.7042C28.9268 45.8901 29.611 45.5001 29.8329 44.7506L36.9814 20.6115C37.1728 19.9366 36.8385 19.2589 36.0783 19.0547C35.3333 18.8689 34.6979 19.1477 34.4425 20.0235L27.3365 44.0276C27.1175 44.7804 27.3579 45.5001 28.1666 45.7042Z" fill="black"/>
<path d="M12 32.3568C12 32.7499 12.1764 33.1396 12.5046 33.4216L22.0655 41.9466C22.6825 42.4776 23.4794 42.4744 23.9719 41.9287C24.4765 41.3647 24.3975 40.5639 23.829 40.0662L15.214 32.3568L23.829 24.6476C24.3975 24.1496 24.4765 23.3488 23.9719 22.7851C23.4794 22.2391 22.6825 22.2362 22.0655 22.7669L12.5046 31.2922C12.1764 31.5742 12 31.9639 12 32.3568ZM52.1638 32.3568C52.1638 31.9639 52.0027 31.5742 51.6742 31.2922L42.1015 22.7669C41.481 22.2362 40.6997 22.2391 40.1948 22.7851C39.6871 23.3488 39.7663 24.1496 40.3378 24.6476L48.968 32.3568L40.3378 40.0662C39.7663 40.5639 39.6871 41.3647 40.1948 41.9287C40.6997 42.4744 41.481 42.4776 42.1015 41.9466L51.6742 33.4216C52.0027 33.1396 52.1638 32.7499 52.1638 32.3568Z" fill="black"/>
</svg>
`,zZe=`<svg width="64" height="64" viewBox="0 0 64 64" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M8 33H22V53C22 54.6569 20.6569 56 19 56H11C9.34315 56 8 54.6569 8 53V33Z" fill="#34C759"/>
<path d="M8 19C8 17.3431 9.34315 16 11 16H19C20.6569 16 22 17.3431 22 19V34H8V19Z" fill="#007AFF"/>
<path d="M25 39H39V53C39 54.6569 37.6569 56 36 56H28C26.3431 56 25 54.6569 25 53V39Z" fill="#34C759"/>
<path d="M42 32H56V53C56 54.6569 54.6569 56 53 56H45C43.3431 56 42 54.6569 42 53V32Z" fill="#34C759"/>
<path d="M25 29C25 27.3431 26.3431 26 28 26H36C37.6569 26 39 27.3431 39 29V40H25V29Z" fill="#3C82F6"/>
<path d="M42 16C42 14.3431 43.3431 13 45 13H53C54.6569 13 56 14.3431 56 16V33H42V16Z" fill="#007AFF"/>
</svg>
`,QZe=`<svg width="64" height="64" viewBox="0 0 64 64" fill="none" xmlns="http://www.w3.org/2000/svg">
<rect x="8" y="32" width="14" height="24" rx="3" fill="#007AFF"/>
<rect x="25" y="12" width="14" height="44" rx="3" fill="#007AFF"/>
<rect x="42" y="24" width="14" height="32" rx="3" fill="#007AFF"/>
</svg>
`,jZe={"chart-boxplot":TZe,"chart-bubble":PZe,"chart-content-viewer":DZe,"chart-ecdf":IZe,"chart-embedding":MZe,"chart-h-bar":RZe,"chart-heatmap":FZe,"chart-line":LZe,"chart-markdown":$Ze,"chart-predicates":BZe,"chart-spec":NZe,"chart-stacked":zZe,"chart-v-histogram":QZe};var UZe=gt('<div class="w-12 h-12"><!></div>');function VZe(t,e){Ln(e,!0);function n(s,o){s=s.replace("xmlns",'style="width:100%;height:100%" xmlns');let a=o=="dark"?{black:Pg.slate[400]}:{black:Pg.slate[500]};for(let l in a)s=s.replaceAll(l,a[l]);return s}var r=UZe(),i=je(r);n$(i,()=>n(jZe[e.type]??"",e.colorScheme??"light")),Be(r),Re(t,r),$n()}var qZe=gt("<button><!></button>"),ZZe=gt('<span class="text-slate-500 dark:text-slate-400 select-none"> </span> <!>',1),XZe=gt('<div class="w-full h-64"><!></div>'),WZe=gt('<div class="w-full h-64"><!></div>'),GZe=gt("<!> <!> <!> <!>",1),YZe=gt('<div class="border-t border-b border-dotted border-slate-400 dark:border-slate-500 py-2 my-1"><div class="-m-2 rounded-md"><!></div></div>'),HZe=gt("<div> </div>"),KZe=gt('<div class="flex flex-wrap gap-2"></div> <div class="select-none"> </div> <!> <!> <div><!></div> <!>',1);function JZe(t,e){Ln(e,!0);const n=()=>qo(o,"$colorScheme",r),[r,i]=Cf();let{columns:s,colorScheme:o}=e.context,a=_Je(),l=hn(a[0]),h=hn(Ng({})),f=hn(!1),p=hn(null),g=hn(null);Oo(()=>{F(l);let I=xl(()=>F(h)),M={};for(let B of F(l).ui)if("field"in B){let j=T(s,B.field.types),Q=I[B.field.key];Q!=null&&j.findIndex(({name:Z})=>Z==Q)>=0&&(M[B.field.key]=Q)}else if("boolean"in B){let j=!1;B.boolean.key==="isGis"&&e.context.embeddingViewConfig?.isGis&&(j=!0),M[B.boolean.key]=I[B.boolean.key]??j}else"code"in B?M[B.code.key]=I[B.code.key]??"":"spec"in B&&(M[B.spec.key]=I[B.spec.key]??{});ct(h,M,!0)}),Oo(()=>{try{let I=x();if(I==null){ct(f,!1),ct(g,null),ct(p,null);return}let M=F(l).create(I,{table:e.context.table,id:e.context.id});ct(f,M!=null),ct(g,M),ct(p,null)}catch(I){ct(f,I.toString(),!0)}});function b(){F(g)!=null&&(e.onSpecChange(F(g),"replace"),e.onStateChange(F(p)??{},"replace"))}function x(){let I={...F(h)};for(let M of F(l).ui)if("field"in M){let B=k(I[M.field.key]);if(M.field.required&&B==null)return;I[M.field.key]=B}return I}function k(I){let M=s.find(B=>B.name==I);if(M==null)return null;switch(M.jsType){case"number":return{name:M.name,type:"continuous"};case"string":return{name:M.name,type:"discrete"};case"string[]":return{name:M.name,type:"discrete[]"};default:return{name:M.name,type:"unknown"}}}function T(I,M){return M==null?I:I.filter(B=>B.jsType!=null&&M.indexOf(B.jsType)>=0)}qb(t,{get width(){return e.width},get height(){return e.height},scrollY:!0,class:"flex flex-col gap-2",children:(I,M)=>{var B=KZe(),j=pn(B);Wr(j,21,()=>a,Wi,(ge,xe)=>{const Se=Fe(()=>F(l)==F(xe));var De=qZe();De.__click=()=>{ct(l,F(xe))};let He;var Ue=je(De);VZe(Ue,{get type(){return F(xe).icon},get colorScheme(){return n()}}),Be(De),on(()=>{St(De,"title",F(xe).description),He=Hi(De,1,"rounded-md border border-slate-200 dark:border-slate-700",null,He,{"!border-slate-600":F(Se),"dark:!border-slate-400":F(Se),"!bg-slate-100":F(Se),"dark:!bg-slate-700":F(Se)})}),Re(ge,De)}),Be(j);var Q=lt(j,2),Z=je(Q,!0);Be(Q);var q=lt(Q,2);Wr(q,17,()=>F(l).ui,Wi,(ge,xe)=>{var Se=GZe(),De=pn(Se);{var He=ot=>{const dt=Fe(()=>F(xe).field.key),Yt=Fe(()=>(F(xe).field.required?[]:[{value:void 0,label:"--"}]).concat(T(s,F(xe).field.types).map(Ut=>({value:Ut.name,label:`${Ut.name} (${Ut.type})`}))));var Ft=ZZe(),Ot=pn(Ft),Kt=je(Ot,!0);Be(Ot);var Dn=lt(Ot,2);ch(Dn,{get value(){return F(h)[F(dt)]},onChange:Ut=>F(h)[F(dt)]=Ut,placeholder:"(select field)",class:"w-full",get options(){return F(Yt)}}),on(()=>Pr(Kt,F(xe).field.label)),Re(ot,Ft)};Pt(De,ot=>{"field"in F(xe)&&ot(He)})}var Ue=lt(De,2);{var yt=ot=>{const dt=Fe(()=>F(xe).code.key);var Yt=XZe(),Ft=je(Yt);{let Ot=Fe(()=>F(xe).code.language??"plain");YD(Ft,{class:"w-full h-full",get value(){return F(h)[F(dt)]},onChange:Kt=>F(h)[F(dt)]=Kt,get colorScheme(){return n()},get language(){return F(Ot)}})}Be(Yt),Re(ot,Yt)};Pt(Ue,ot=>{"code"in F(xe)&&ot(yt)})}var We=lt(Ue,2);{var at=ot=>{const dt=Fe(()=>F(xe).spec.key);var Yt=WZe(),Ft=je(Yt);pz(Ft,{class:"w-full h-full",initialValue:{title:"Chart"},onChange:Ot=>F(h)[F(dt)]=Ot,get colorScheme(){return n()}}),Be(Yt),Re(ot,Yt)};Pt(We,ot=>{"spec"in F(xe)&&ot(at)})}var ut=lt(We,2);{var wt=ot=>{const dt=Fe(()=>F(xe).boolean.key);phe(ot,{get label(){return F(xe).boolean.label},get value(){return F(h)[F(dt)]},onChange:Yt=>F(h)[F(dt)]=Yt})};Pt(ut,ot=>{"boolean"in F(xe)&&ot(wt)})}Re(ge,Se)});var J=lt(q,2);{var oe=ge=>{var xe=ar(),Se=pn(xe);lT(Se,()=>F(g),De=>{var He=YZe(),Ue=je(He),yt=je(Ue);{let We=Fe(()=>F(p)??{});mhe(yt,{get context(){return e.context},get spec(){return F(g)},get state(){return F(We)},width:"container",mode:"view",onStateChange:(at,ut="merge")=>{Ww(F(p)??{},at,ut,wt=>ct(p,wt))},onSpecChange:(at,ut="merge")=>{Ww(F(g)??{},at,ut,wt=>ct(g,wt))}})}Be(Ue),Be(He),Re(De,He)}),Re(ge,xe)};Pt(J,ge=>{F(g)!=null&&F(l).preview!==!1&&ge(oe)})}var me=lt(J,2),ae=je(me);{let ge=Fe(()=>F(f)!==!0);SB(ae,{label:"Confirm",get disabled(){return F(ge)},onClick:b})}Be(me);var ce=lt(me,2);{var se=ge=>{var xe=HZe(),Se=je(xe,!0);Be(xe),on(()=>Pr(Se,F(f))),Re(ge,xe)};Pt(ce,ge=>{typeof F(f)=="string"&&F(f).trim()!=""&&ge(se)})}on(()=>Pr(Z,F(l).description)),Re(I,B)},$$slots:{default:!0}}),$n(),i()}Js(["click"]);var eXe=$r('<line class="stroke-orange-500"></line>'),tXe=$r('<circle class="fill-orange-500 stroke-orange-700 stroke-2"></circle>'),nXe=$r("<svg><g><!><!></g></svg>");function rXe(t,e){Ln(e,!0);var n=nXe(),r=je(n),i=je(r);{var s=a=>{const l=Fe(()=>e.proxy.location(e.center.x,e.center.y));var h=ar(),f=pn(h);Wr(f,17,()=>e.points??[],Wi,(p,g)=>{const b=Fe(()=>e.proxy.location(F(g).x,F(g).y));var x=eXe();on(()=>{St(x,"x1",F(l).x),St(x,"y1",F(l).y),St(x,"x2",F(b).x),St(x,"y2",F(b).y)}),Re(p,x)}),Re(a,h)};Pt(i,a=>{e.center!=null&&a(s)})}var o=lt(i);Wr(o,17,()=>e.points??[],Wi,(a,l)=>{const h=Fe(()=>e.proxy.location(F(l).x,F(l).y));var f=tXe();St(f,"r",4),on(()=>{St(f,"cx",F(h).x),St(f,"cy",F(h).y)}),Re(a,f)}),Be(r),Be(n),on(()=>{St(n,"width",e.proxy.width),St(n,"height",e.proxy.height)}),Re(t,n),$n()}var iXe=gt('<div class="flex flex-col"><div class="text-slate-400 dark:text-slate-400 font-medium text-xs"> </div> <div><!></div></div>'),sXe=gt('<div class="px-2 flex items-center gap-2 border border-slate-200 dark:border-slate-700 bg-slate-100/25 dark:bg-slate-700/25 text-slate-700 dark:text-slate-300 rounded-md"><div class="text-slate-400 dark:text-slate-400 font-medium text-sm"> </div> <div class="text-ellipsis whitespace-nowrap overflow-hidden max-w-72"><!></div></div>'),oXe=gt('<div class="flex flex-col gap-2"><!> <div class="flex-none flex flex-row gap-1 flex-wrap items-start"></div></div>');function ghe(t,e){Ln(e,!0);let n=Fe(()=>Object.keys(e.columnStyles).filter(a=>e.columnStyles[a].display=="full")),r=Fe(()=>Object.keys(e.columnStyles).filter(a=>e.columnStyles[a].display=="badge"));var i=oXe(),s=je(i);Wr(s,17,()=>F(n),Wi,(a,l)=>{const h=Fe(()=>e.values[F(l)]);var f=iXe(),p=je(f),g=je(p,!0);Be(p);var b=lt(p,2),x=je(b);eL(x,{get value(){return F(h)},get renderer(){return e.columnStyles[F(l)].renderer},get rendererOptions(){return e.columnStyles[F(l)].rendererOptions}}),Be(b),Be(f),on(()=>Pr(g,F(l))),Re(a,f)});var o=lt(s,2);Wr(o,21,()=>F(r),Wi,(a,l)=>{const h=Fe(()=>e.values[F(l)]);var f=sXe(),p=je(f),g=je(p,!0);Be(p);var b=lt(p,2),x=je(b);eL(x,{get value(){return F(h)}}),Be(b),Be(f),on(k=>{Pr(g,F(l)),St(b,"title",k)},[()=>Az(F(h))]),Re(a,f)}),Be(o),Be(i),Re(t,i),$n()}var aXe=gt('<div><button class="text-sm flex gap-0.5 items-center text-slate-500 dark:text-slate-400 hover:text-slate-800 dark:hover:text-slate-300"><!> Nearest Neighbors</button></div>'),lXe=gt('<div class="embedding-atlas-root"><div><!> <!></div></div>');function uXe(t,e){Ln(e,!0);var n=lXe(),r=je(n);let i;lr(r,"",{},{"max-width":"400px","max-height":"300px"});var s=je(r);{let l=Fe(()=>e.tooltip.fields??{}),h=Fe(()=>e.columnStyles??{});ghe(s,{get values(){return F(l)},get columnStyles(){return F(h)}})}var o=lt(s,2);{var a=l=>{var h=aXe(),f=je(h);f.__click=()=>{e.onNearestNeighborSearch?.(e.tooltip.identifier)};var p=je(f);YFe(p,{}),Xg(),Be(f),Be(h),Re(l,h)};Pt(o,l=>{e.onNearestNeighborSearch&&l(a)})}Be(r),Be(n),on(()=>i=Hi(r,1,"p-2 border flex flex-col gap-2 border-slate-300 dark:border-slate-600 shadow-md text-slate-700 dark:text-slate-300 rounded-md text-ellipsis overflow-x-hidden overflow-y-scroll bg-white/75 dark:bg-slate-800/75 backdrop-blur-sm",null,i,{dark:e.colorScheme=="dark"})),Re(t,n),$n()}Js(["click"]);function yhe(t){return class{component;constructor(e,n){this.component=_me({component:t,target:e,props:n})}update(e){this.component.$set(e)}destroy(){this.component.$destroy()}}}var cXe=gt("<div></div>");function hXe(t,e){Ln(e,!0);let n=Qs(e,["$$slots","$$events","$$legacy"]),r;s_(()=>{let s=new cze(r,n);xh(()=>{s.update(n)}),VP(()=>{s.destroy()})});var i=cXe();lr(i,"",{},{display:"flex"}),zu(i,s=>r=s,()=>r),Re(t,i),$n()}function vhe(t){const e=t-1;return e*e*e+1}var fXe=gt('<span class="flex h-5 items-center"> </span>'),dXe=gt("<button><!> <!></button>");function X5(t,e){Ln(e,!0);let n=jn(e,"title",3,""),r=jn(e,"checked",15),i=jn(e,"label",3,null),s=jn(e,"icon",3,null);var o=dXe();let a;o.__click=()=>{r(!r())};var l=je(o);{var h=g=>{const b=Fe(s);var x=ar(),k=pn(x);o0(k,()=>F(b),(T,I)=>{I(T,{class:"w-5 h-5"})}),Re(g,x)};Pt(l,g=>{s()!=null&&g(h)})}var f=lt(l,2);{var p=g=>{var b=fXe(),x=je(b,!0);Be(b),on(()=>Pr(x,i())),Re(g,b)};Pt(f,g=>{i()!=null&&g(p)})}Be(o),on(()=>{a=Hi(o,1,"rounded-md px-1.5 py-1.5 bg-white dark:bg-slate-900 border border-slate-300 dark:border-slate-600 flex select-none items-center focus-visible:outline-2 outline-blue-600 -outline-offset-1",null,a,{"text-slate-400":!r(),"dark:text-slate-500":!r()}),St(o,"title",n())}),Re(t,o),$n()}Js(["click"]);const xP=Math.min,Cb=Math.max,wP=Math.round,X4=Math.floor,am=t=>({x:t,y:t});function hG(t,e,n){return Cb(t,xP(e,n))}function cQ(t,e){return typeof t=="function"?t(e):t}function gI(t){return t.split("-")[0]}function bhe(t){return t.split("-")[1]}function _he(t){return t==="x"?"y":"x"}function pXe(t){return t==="y"?"height":"width"}const mXe=new Set(["top","bottom"]);function yI(t){return mXe.has(gI(t))?"y":"x"}function gXe(t){return _he(yI(t))}function yXe(t){return{top:0,right:0,bottom:0,left:0,...t}}function vXe(t){return typeof t!="number"?yXe(t):{top:t,right:t,bottom:t,left:t}}function OP(t){const{x:e,y:n,width:r,height:i}=t;return{width:r,height:i,top:n,left:e,right:e+r,bottom:n+i,x:e,y:n}}function fG(t,e,n){let{reference:r,floating:i}=t;const s=yI(e),o=gXe(e),a=pXe(o),l=gI(e),h=s==="y",f=r.x+r.width/2-i.width/2,p=r.y+r.height/2-i.height/2,g=r[a]/2-i[a]/2;let b;switch(l){case"top":b={x:f,y:r.y-i.height};break;case"bottom":b={x:f,y:r.y+r.height};break;case"right":b={x:r.x+r.width,y:p};break;case"left":b={x:r.x-i.width,y:p};break;default:b={x:r.x,y:r.y}}switch(bhe(e)){case"start":b[o]-=g*(n&&h?-1:1);break;case"end":b[o]+=g*(n&&h?-1:1);break}return b}const bXe=async(t,e,n)=>{const{placement:r="bottom",strategy:i="absolute",middleware:s=[],platform:o}=n,a=s.filter(Boolean),l=await(o.isRTL==null?void 0:o.isRTL(e));let h=await o.getElementRects({reference:t,floating:e,strategy:i}),{x:f,y:p}=fG(h,r,l),g=r,b={},x=0;for(let k=0;k<a.length;k++){const{name:T,fn:I}=a[k],{x:M,y:B,data:j,reset:Q}=await I({x:f,y:p,initialPlacement:r,placement:g,strategy:i,middlewareData:b,rects:h,platform:o,elements:{reference:t,floating:e}});f=M??f,p=B??p,b={...b,[T]:{...b[T],...j}},Q&&x<=50&&(x++,typeof Q=="object"&&(Q.placement&&(g=Q.placement),Q.rects&&(h=Q.rects===!0?await o.getElementRects({reference:t,floating:e,strategy:i}):Q.rects),{x:f,y:p}=fG(h,g,l)),k=-1)}return{x:f,y:p,placement:g,strategy:i,middlewareData:b}};async function _Xe(t,e){var n;e===void 0&&(e={});const{x:r,y:i,platform:s,rects:o,elements:a,strategy:l}=t,{boundary:h="clippingAncestors",rootBoundary:f="viewport",elementContext:p="floating",altBoundary:g=!1,padding:b=0}=cQ(e,t),x=vXe(b),T=a[g?p==="floating"?"reference":"floating":p],I=OP(await s.getClippingRect({element:(n=await(s.isElement==null?void 0:s.isElement(T)))==null||n?T:T.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(a.floating)),boundary:h,rootBoundary:f,strategy:l})),M=p==="floating"?{x:r,y:i,width:o.floating.width,height:o.floating.height}:o.reference,B=await(s.getOffsetParent==null?void 0:s.getOffsetParent(a.floating)),j=await(s.isElement==null?void 0:s.isElement(B))?await(s.getScale==null?void 0:s.getScale(B))||{x:1,y:1}:{x:1,y:1},Q=OP(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:M,offsetParent:B,strategy:l}):M);return{top:(I.top-Q.top+x.top)/j.y,bottom:(Q.bottom-I.bottom+x.bottom)/j.y,left:(I.left-Q.left+x.left)/j.x,right:(Q.right-I.right+x.right)/j.x}}const xXe=new Set(["left","top"]);async function wXe(t,e){const{placement:n,platform:r,elements:i}=t,s=await(r.isRTL==null?void 0:r.isRTL(i.floating)),o=gI(n),a=bhe(n),l=yI(n)==="y",h=xXe.has(o)?-1:1,f=s&&l?-1:1,p=cQ(e,t);let{mainAxis:g,crossAxis:b,alignmentAxis:x}=typeof p=="number"?{mainAxis:p,crossAxis:0,alignmentAxis:null}:{mainAxis:p.mainAxis||0,crossAxis:p.crossAxis||0,alignmentAxis:p.alignmentAxis};return a&&typeof x=="number"&&(b=a==="end"?x*-1:x),l?{x:b*f,y:g*h}:{x:g*h,y:b*f}}const OXe=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var n,r;const{x:i,y:s,placement:o,middlewareData:a}=e,l=await wXe(e,t);return o===((n=a.offset)==null?void 0:n.placement)&&(r=a.arrow)!=null&&r.alignmentOffset?{}:{x:i+l.x,y:s+l.y,data:{...l,placement:o}}}}},SXe=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:r,placement:i}=e,{mainAxis:s=!0,crossAxis:o=!1,limiter:a={fn:T=>{let{x:I,y:M}=T;return{x:I,y:M}}},...l}=cQ(t,e),h={x:n,y:r},f=await _Xe(e,l),p=yI(gI(i)),g=_he(p);let b=h[g],x=h[p];if(s){const T=g==="y"?"top":"left",I=g==="y"?"bottom":"right",M=b+f[T],B=b-f[I];b=hG(M,b,B)}if(o){const T=p==="y"?"top":"left",I=p==="y"?"bottom":"right",M=x+f[T],B=x-f[I];x=hG(M,x,B)}const k=a.fn({...e,[g]:b,[p]:x});return{...k,data:{x:k.x-n,y:k.y-r,enabled:{[g]:s,[p]:o}}}}}};function vI(){return typeof window<"u"}function yO(t){return xhe(t)?(t.nodeName||"").toLowerCase():"#document"}function vh(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function Im(t){var e;return(e=(xhe(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function xhe(t){return vI()?t instanceof Node||t instanceof vh(t).Node:!1}function Dd(t){return vI()?t instanceof Element||t instanceof vh(t).Element:!1}function vm(t){return vI()?t instanceof HTMLElement||t instanceof vh(t).HTMLElement:!1}function dG(t){return!vI()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof vh(t).ShadowRoot}const kXe=new Set(["inline","contents"]);function lA(t){const{overflow:e,overflowX:n,overflowY:r,display:i}=Id(t);return/auto|scroll|overlay|hidden|clip/.test(e+r+n)&&!kXe.has(i)}const CXe=new Set(["table","td","th"]);function AXe(t){return CXe.has(yO(t))}const EXe=[":popover-open",":modal"];function bI(t){return EXe.some(e=>{try{return t.matches(e)}catch{return!1}})}const TXe=["transform","translate","scale","rotate","perspective"],PXe=["transform","translate","scale","rotate","perspective","filter"],DXe=["paint","layout","strict","content"];function hQ(t){const e=fQ(),n=Dd(t)?Id(t):t;return TXe.some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||PXe.some(r=>(n.willChange||"").includes(r))||DXe.some(r=>(n.contain||"").includes(r))}function IXe(t){let e=_1(t);for(;vm(e)&&!M2(e);){if(hQ(e))return e;if(bI(e))return null;e=_1(e)}return null}function fQ(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const MXe=new Set(["html","body","#document"]);function M2(t){return MXe.has(yO(t))}function Id(t){return vh(t).getComputedStyle(t)}function _I(t){return Dd(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function _1(t){if(yO(t)==="html")return t;const e=t.assignedSlot||t.parentNode||dG(t)&&t.host||Im(t);return dG(e)?e.host:e}function whe(t){const e=_1(t);return M2(e)?t.ownerDocument?t.ownerDocument.body:t.body:vm(e)&&lA(e)?e:whe(e)}function dC(t,e,n){var r;e===void 0&&(e=[]),n===void 0&&(n=!0);const i=whe(t),s=i===((r=t.ownerDocument)==null?void 0:r.body),o=vh(i);if(s){const a=CL(o);return e.concat(o,o.visualViewport||[],lA(i)?i:[],a&&n?dC(a):[])}return e.concat(i,dC(i,[],n))}function CL(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function Ohe(t){const e=Id(t);let n=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const i=vm(t),s=i?t.offsetWidth:n,o=i?t.offsetHeight:r,a=wP(n)!==s||wP(r)!==o;return a&&(n=s,r=o),{width:n,height:r,$:a}}function dQ(t){return Dd(t)?t:t.contextElement}function Bw(t){const e=dQ(t);if(!vm(e))return am(1);const n=e.getBoundingClientRect(),{width:r,height:i,$:s}=Ohe(e);let o=(s?wP(n.width):n.width)/r,a=(s?wP(n.height):n.height)/i;return(!o||!Number.isFinite(o))&&(o=1),(!a||!Number.isFinite(a))&&(a=1),{x:o,y:a}}const RXe=am(0);function She(t){const e=vh(t);return!fQ()||!e.visualViewport?RXe:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function FXe(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==vh(t)?!1:e}function Hb(t,e,n,r){e===void 0&&(e=!1),n===void 0&&(n=!1);const i=t.getBoundingClientRect(),s=dQ(t);let o=am(1);e&&(r?Dd(r)&&(o=Bw(r)):o=Bw(t));const a=FXe(s,n,r)?She(s):am(0);let l=(i.left+a.x)/o.x,h=(i.top+a.y)/o.y,f=i.width/o.x,p=i.height/o.y;if(s){const g=vh(s),b=r&&Dd(r)?vh(r):r;let x=g,k=CL(x);for(;k&&r&&b!==x;){const T=Bw(k),I=k.getBoundingClientRect(),M=Id(k),B=I.left+(k.clientLeft+parseFloat(M.paddingLeft))*T.x,j=I.top+(k.clientTop+parseFloat(M.paddingTop))*T.y;l*=T.x,h*=T.y,f*=T.x,p*=T.y,l+=B,h+=j,x=vh(k),k=CL(x)}}return OP({width:f,height:p,x:l,y:h})}function xI(t,e){const n=_I(t).scrollLeft;return e?e.left+n:Hb(Im(t)).left+n}function khe(t,e){const n=t.getBoundingClientRect(),r=n.left+e.scrollLeft-xI(t,n),i=n.top+e.scrollTop;return{x:r,y:i}}function LXe(t){let{elements:e,rect:n,offsetParent:r,strategy:i}=t;const s=i==="fixed",o=Im(r),a=e?bI(e.floating):!1;if(r===o||a&&s)return n;let l={scrollLeft:0,scrollTop:0},h=am(1);const f=am(0),p=vm(r);if((p||!p&&!s)&&((yO(r)!=="body"||lA(o))&&(l=_I(r)),vm(r))){const b=Hb(r);h=Bw(r),f.x=b.x+r.clientLeft,f.y=b.y+r.clientTop}const g=o&&!p&&!s?khe(o,l):am(0);return{width:n.width*h.x,height:n.height*h.y,x:n.x*h.x-l.scrollLeft*h.x+f.x+g.x,y:n.y*h.y-l.scrollTop*h.y+f.y+g.y}}function $Xe(t){return Array.from(t.getClientRects())}function BXe(t){const e=Im(t),n=_I(t),r=t.ownerDocument.body,i=Cb(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),s=Cb(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let o=-n.scrollLeft+xI(t);const a=-n.scrollTop;return Id(r).direction==="rtl"&&(o+=Cb(e.clientWidth,r.clientWidth)-i),{width:i,height:s,x:o,y:a}}const pG=25;function NXe(t,e){const n=vh(t),r=Im(t),i=n.visualViewport;let s=r.clientWidth,o=r.clientHeight,a=0,l=0;if(i){s=i.width,o=i.height;const f=fQ();(!f||f&&e==="fixed")&&(a=i.offsetLeft,l=i.offsetTop)}const h=xI(r);if(h<=0){const f=r.ownerDocument,p=f.body,g=getComputedStyle(p),b=f.compatMode==="CSS1Compat"&&parseFloat(g.marginLeft)+parseFloat(g.marginRight)||0,x=Math.abs(r.clientWidth-p.clientWidth-b);x<=pG&&(s-=x)}else h<=pG&&(s+=h);return{width:s,height:o,x:a,y:l}}const zXe=new Set(["absolute","fixed"]);function QXe(t,e){const n=Hb(t,!0,e==="fixed"),r=n.top+t.clientTop,i=n.left+t.clientLeft,s=vm(t)?Bw(t):am(1),o=t.clientWidth*s.x,a=t.clientHeight*s.y,l=i*s.x,h=r*s.y;return{width:o,height:a,x:l,y:h}}function mG(t,e,n){let r;if(e==="viewport")r=NXe(t,n);else if(e==="document")r=BXe(Im(t));else if(Dd(e))r=QXe(e,n);else{const i=She(t);r={x:e.x-i.x,y:e.y-i.y,width:e.width,height:e.height}}return OP(r)}function Che(t,e){const n=_1(t);return n===e||!Dd(n)||M2(n)?!1:Id(n).position==="fixed"||Che(n,e)}function jXe(t,e){const n=e.get(t);if(n)return n;let r=dC(t,[],!1).filter(a=>Dd(a)&&yO(a)!=="body"),i=null;const s=Id(t).position==="fixed";let o=s?_1(t):t;for(;Dd(o)&&!M2(o);){const a=Id(o),l=hQ(o);!l&&a.position==="fixed"&&(i=null),(s?!l&&!i:!l&&a.position==="static"&&!!i&&zXe.has(i.position)||lA(o)&&!l&&Che(t,o))?r=r.filter(f=>f!==o):i=a,o=_1(o)}return e.set(t,r),r}function UXe(t){let{element:e,boundary:n,rootBoundary:r,strategy:i}=t;const o=[...n==="clippingAncestors"?bI(e)?[]:jXe(e,this._c):[].concat(n),r],a=o[0],l=o.reduce((h,f)=>{const p=mG(e,f,i);return h.top=Cb(p.top,h.top),h.right=xP(p.right,h.right),h.bottom=xP(p.bottom,h.bottom),h.left=Cb(p.left,h.left),h},mG(e,a,i));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function VXe(t){const{width:e,height:n}=Ohe(t);return{width:e,height:n}}function qXe(t,e,n){const r=vm(e),i=Im(e),s=n==="fixed",o=Hb(t,!0,s,e);let a={scrollLeft:0,scrollTop:0};const l=am(0);function h(){l.x=xI(i)}if(r||!r&&!s)if((yO(e)!=="body"||lA(i))&&(a=_I(e)),r){const b=Hb(e,!0,s,e);l.x=b.x+e.clientLeft,l.y=b.y+e.clientTop}else i&&h();s&&!r&&i&&h();const f=i&&!r&&!s?khe(i,a):am(0),p=o.left+a.scrollLeft-l.x-f.x,g=o.top+a.scrollTop-l.y-f.y;return{x:p,y:g,width:o.width,height:o.height}}function o7(t){return Id(t).position==="static"}function gG(t,e){if(!vm(t)||Id(t).position==="fixed")return null;if(e)return e(t);let n=t.offsetParent;return Im(t)===n&&(n=n.ownerDocument.body),n}function Ahe(t,e){const n=vh(t);if(bI(t))return n;if(!vm(t)){let i=_1(t);for(;i&&!M2(i);){if(Dd(i)&&!o7(i))return i;i=_1(i)}return n}let r=gG(t,e);for(;r&&AXe(r)&&o7(r);)r=gG(r,e);return r&&M2(r)&&o7(r)&&!hQ(r)?n:r||IXe(t)||n}const ZXe=async function(t){const e=this.getOffsetParent||Ahe,n=this.getDimensions,r=await n(t.floating);return{reference:qXe(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function XXe(t){return Id(t).direction==="rtl"}const WXe={convertOffsetParentRelativeRectToViewportRelativeRect:LXe,getDocumentElement:Im,getClippingRect:UXe,getOffsetParent:Ahe,getElementRects:ZXe,getClientRects:$Xe,getDimensions:VXe,getScale:Bw,isElement:Dd,isRTL:XXe};function Ehe(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function GXe(t,e){let n=null,r;const i=Im(t);function s(){var a;clearTimeout(r),(a=n)==null||a.disconnect(),n=null}function o(a,l){a===void 0&&(a=!1),l===void 0&&(l=1),s();const h=t.getBoundingClientRect(),{left:f,top:p,width:g,height:b}=h;if(a||e(),!g||!b)return;const x=X4(p),k=X4(i.clientWidth-(f+g)),T=X4(i.clientHeight-(p+b)),I=X4(f),B={rootMargin:-x+"px "+-k+"px "+-T+"px "+-I+"px",threshold:Cb(0,xP(1,l))||1};let j=!0;function Q(Z){const q=Z[0].intersectionRatio;if(q!==l){if(!j)return o();q?o(!1,q):r=setTimeout(()=>{o(!1,1e-7)},1e3)}q===1&&!Ehe(h,t.getBoundingClientRect())&&o(),j=!1}try{n=new IntersectionObserver(Q,{...B,root:i.ownerDocument})}catch{n=new IntersectionObserver(Q,B)}n.observe(t)}return o(!0),s}function YXe(t,e,n,r){r===void 0&&(r={});const{ancestorScroll:i=!0,ancestorResize:s=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:l=!1}=r,h=dQ(t),f=i||s?[...h?dC(h):[],...dC(e)]:[];f.forEach(I=>{i&&I.addEventListener("scroll",n,{passive:!0}),s&&I.addEventListener("resize",n)});const p=h&&a?GXe(h,n):null;let g=-1,b=null;o&&(b=new ResizeObserver(I=>{let[M]=I;M&&M.target===h&&b&&(b.unobserve(e),cancelAnimationFrame(g),g=requestAnimationFrame(()=>{var B;(B=b)==null||B.observe(e)})),n()}),h&&!l&&b.observe(h),b.observe(e));let x,k=l?Hb(t):null;l&&T();function T(){const I=Hb(t);k&&!Ehe(k,I)&&n(),k=I,x=requestAnimationFrame(T)}return n(),()=>{var I;f.forEach(M=>{i&&M.removeEventListener("scroll",n),s&&M.removeEventListener("resize",n)}),p?.(),(I=b)==null||I.disconnect(),b=null,l&&cancelAnimationFrame(x)}}const HXe=OXe,KXe=SXe,JXe=(t,e,n)=>{const r=new Map,i={platform:WXe,...n},s={...i.platform,_c:r};return bXe(t,e,{...i,platform:s})};var eWe=gt('<div class="relative"><!> <div class="absolute px-3 py-3 rounded-md z-20 bg-slate-100 dark:bg-slate-800 border border-slate-300 dark:border-slate-700 shadow-lg" popover=""><!></div></div>');function AL(t,e){Ln(e,!0);let n=jn(e,"title",3,""),r=jn(e,"label",3,null),i=jn(e,"icon",3,null);jn(e,"anchor",3,"right");let s=hn(!1);function o(){ct(s,!F(s))}let a;function l(T){F(s)&&T.key=="Escape"&&(ct(s,!1),T.stopPropagation())}let h;xh(()=>{F(s)&&xh(()=>{h.showPopover();function T(){JXe(a,h,{placement:"bottom",middleware:[HXe(3),KXe()]}).then(({x:I,y:M})=>{h.style.left=I+"px",h.style.top=M+"px"})}return YXe(a,h,T)})});var f=eWe();f.__keydown=l;var p=je(f);{var g=T=>{var I=ar(),M=pn(I);vf(M,()=>e.button,()=>({visible:F(s),toggle:o})),Re(T,I)},b=T=>{X5(T,{get icon(){return i()},get title(){return n()},get label(){return r()},get checked(){return F(s)},set checked(I){ct(s,I,!0)}})};Pt(p,T=>{e.button?T(g):T(b,!1)})}var x=lt(p,2);lr(x,"",{},{width:"max-content"});var k=je(x);vf(k,()=>e.children??Ys),Be(x),zu(x,T=>h=T,()=>h),Be(f),zu(f,T=>a=T,()=>a),jy("toggle",x,T=>{T.newState=="closed"&&ct(s,!1)}),Re(t,f),$n()}Js(["keydown"]);var tWe=gt('<div class="group relative" role="slider" tabindex="0"><div class="bg-slate-400 dark:bg-slate-500 rounded-full absolute"></div> <div class="bg-blue-500 rounded-full absolute group-hover:bg-blue-600 dark:group-hover:bg-blue-400"></div></div>');function W5(t,e){Ln(e,!0);let n=jn(e,"value",15,0),r=jn(e,"min",3,0),i=jn(e,"max",3,100),s=jn(e,"step",3,void 0),o=jn(e,"width",3,100),a=15,l=Fe(()=>Q=>(Q-r())/(i()-r())*(o()-a)),h=Fe(()=>Q=>Q/(o()-a)*(i()-r())+r()),f=Fe(()=>F(l)(n())),p=hn(void 0);function g(Q){let Z=F(h)(Q-a/2);Z=Math.max(r(),Math.min(i(),Z)),s()!=null&&(Z=Math.round(Z/s())*s()),n(Z)}function b(Q){g(Q.clientX-F(p).getBoundingClientRect().left);let Z=J=>{g(J.clientX-F(p).getBoundingClientRect().left)},q=()=>{window.removeEventListener("mousemove",Z),window.removeEventListener("mouseup",q)};window.addEventListener("mousemove",Z),window.addEventListener("mouseup",q)}function x(Q){Q.key=="ArrowLeft"?n(Math.max(n()-(s()??1),r())):Q.key=="ArrowRight"&&n(Math.min(n()+(s()??1),i()))}var k=tWe();k.__mousedown=b,k.__keydown=x;let T;var I=je(k);let M;var B=lt(I,2);let j;Be(k),zu(k,Q=>ct(p,Q),()=>F(p)),on(()=>{St(k,"aria-valuenow",n()),St(k,"aria-valuemin",r()),St(k,"aria-valuemax",i()),T=lr(k,"",T,{width:`${o()??""}px`,height:"28px"}),M=lr(I,"",M,{left:"0px",top:"12px",width:`${o()??""}px`,height:"4px"}),j=lr(B,"",j,{left:`${F(f)??""}px`,top:"6.5px",width:"15px",height:"15px"})}),Re(t,k),$n()}Js(["mousedown","keydown"]);var nWe=gt('<tr><td class="first:rounded-tl-md first:rounded-bl-md"><div class="block w-4 h-4 mx-2 rounded-full"></div></td><td><div class="whitespace-nowrap nowrap max-w-72 text-ellipsis overflow-hidden"> </div></td><td class="text-slate-400 px-2 text-xs text-right last:rounded-tr-md last:rounded-br-md" title="Count"> </td></tr>'),rWe=gt("<table><tbody></tbody></table>");function iWe(t,e){Ln(e,!0);let n=Fe(()=>{let l=new Set(e.state.selection??[]);return new Set(e.spec.items.filter(h=>l.has(h.label)))});class r extends qP{reset(){e.onStateChange({selection:void 0})}}const i=new r;function s(l,h){let f=new Set(e.state.selection??[]);h.shiftKey||h.metaKey?(f.has(l.label)?f.delete(l.label):f.add(l.label),e.onStateChange({selection:Array.from(f)})):f.has(l.label)&&f.size==1?e.onStateChange({selection:void 0}):e.onStateChange({selection:[l.label]})}Oo(()=>(Oo(()=>{let l=new Set(e.state.selection??[]),h=e.spec.items.filter(g=>l.has(g.label)),f=h.length!=0?Od(h.map(g=>g.predicate)):null,p={source:i,clients:new Set([i]),value:h.length==0?null:h,predicate:f};e.context.filter.update(p)}),()=>{e.context.filter.update({source:i,clients:new Set([i]),value:null,predicate:null})}));var o=rWe(),a=je(o);Wr(a,21,()=>e.spec.items,Wi,(l,h)=>{const f=Fe(()=>F(n).has(F(h))||F(n).size==0);var p=nWe();let g;p.__click=Q=>{s(F(h),Q)};var b=je(p),x=je(b);let k;Be(b);var T=lt(b),I=je(T),M=je(I,!0);Be(I),Be(T);var B=lt(T),j=je(B,!0);Be(B),Be(p),on(Q=>{g=Hi(p,1,"hover:bg-slate-200 dark:hover:bg-slate-700 select-none leading-7",null,g,{"opacity-20":!F(f)}),k=lr(x,"",k,{"background-color":F(h).color}),St(I,"title",F(h).label),Pr(M,F(h).label),Pr(j,Q)},[()=>F(h).count.toLocaleString()]),Re(l,p)}),Be(a),Be(o),Re(t,o),$n()}Js(["click"]);function The(t){let e=0;function n(r){e+=1;try{r()}finally{e-=1}}return{set(r){n(()=>{t.set(r)})},update(r){n(()=>{t.update(r)})},subscribe(r){return t.subscribe(i=>{e==0&&r(i)})}}}const e3={linear:{type:"linear",expr:t=>t,forward:t=>t,reverse:t=>t},log:{type:"log",expr:t=>Yv(oD(t,0),TK(t),kn("nan")),forward:t=>Math.log10(t),reverse:t=>Math.pow(10,t)},symlog:{type:"symlog",expr:(t,e)=>aa(Mb(t),hw(Z$(1,Hw(il(t,e))))),forward:(t,e)=>Math.sign(t)*Math.log1p(Math.abs(t)/e),reverse:(t,e)=>Math.sign(t)*Math.expm1(Math.abs(t))*e}};function sWe(t,e){let n=t,r=1/0;for(let i of e){let s=Math.abs(t-i);s<r&&(r=s,n=i)}return n}function Phe(t,e={}){let{min:n,max:r,median:i,count:s}=t,o=e.scale;o=="band"&&(o=null),o==null&&(o="linear",s>=100&&n>=0&&i<r*.05&&(o=n>0?"log":"symlog")),n<=0&&o=="log"&&(r<=0?(n=1,r=10):n=Math.min(t.minPositive,r/10));let a=e.desiredCount??5;switch(o){case"linear":{let l=dI().domain([n,r]).nice(a),h=l.ticks(a);return{scale:{...e3.linear,domain:l.domain()},binStart:l.domain()[0],binSize:h[1]-h[0]}}case"log":{let l=hC().domain([n,r]).nice(),h=Math.log10(l.domain()[0]),f=(Math.log10(l.domain()[1])-h)/a;return f=sWe(f,[.05,.1,.2,.5,1,1.5,2]),{scale:{...e3.log,domain:l.domain()},binStart:h,binSize:f}}case"symlog":{let l=Math.max(Math.abs(n),Math.abs(r)),h=l>=100?1:l>0?l/1e5:1,f=e3.symlog.forward(n,h),p=e3.symlog.forward(r,h);return{scale:{...e3.symlog,domain:[n,r],constant:h},binStart:f,binSize:(p-f)/a}}default:throw new Error("invalid scale type")}}async function oWe(t,e,n,r){if(n==null)return null;let[i]=Array.from(await t.query(Vn.describe(Vn.from(e).select(n))));if(i==null)return null;let s=fC(i.column_type);return s=="string"?await yG(t,e,n,10,r):s=="number"?await dhe(t,e,n)<=10?await yG(t,e,n,10,r):await aWe(t,e,n,r):null}async function yG(t,e,n,r,i){let s=`__ev_${n}_id`,o=Array.from(await t.query(Vn.from(e).select({value:ao(It(n),"TEXT"),count:Mo()}).where(Kw(Kp(ao(It(n),"TEXT")))).groupby(ao(It(n),"TEXT")).orderby(fw(Mo())).limit(r))),a=o.length,l=o.length+1;await t.exec(`
    ALTER TABLE ${e} ADD COLUMN IF NOT EXISTS ${It(s)} INTEGER DEFAULT 0;
    UPDATE ${e}
    SET ${It(s)} = CASE ${It(n)}::TEXT
          ${o.map(({value:k},T)=>ir`WHEN ${kn(k)} THEN ${kn(T)}`).join(" ")}
          ELSE (CASE WHEN ${It(n)} IS NULL THEN ${kn(l)} ELSE ${kn(a)} END) END
  `);let h=Array.from(await t.query(Vn.from(e).select({index:It(s),count:ao(Mo(),"INT")}).groupby(It(s)))),f=new Map;for(let k of h)f.set(k.index,k.count);let p=f.get(a)??0,g=f.get(l)??0,b=lWe(i,o.length),x=o.map(({value:k},T)=>({label:k,color:b[T],predicate:ah(ao(It(n),"TEXT"),kn(k)),count:f.get(T)??0}));if(p>0){let{otherCategoryCount:k}=(await t.query(`
        SELECT COUNT(DISTINCT(${It(n)}::TEXT)) AS otherCategoryCount
        FROM ${e}
        WHERE ${It(s)} = ${kn(a)} AND ${It(n)} IS NOT NULL
    `)).get(0);x.push({label:`(other ${k.toLocaleString()})`,color:i.otherColor,predicate:o.length>0?ir`${It(n)} IS NOT NULL AND ${It(n)}::TEXT NOT IN (${o.map(T=>kn(T.value)).join(",")})`:ir`${It(n)} IS NOT NULL`,count:p})}return g>0&&(p<=0&&(await t.exec(`
          UPDATE ${e}
          SET ${It(s)} = ${It(s)} - 1 WHERE ${It(s)} = ${kn(l)}
        `),l-=1),x.push({label:"(null)",color:i.nullColor,predicate:Kp(It(n)),count:g})),{indexColumn:s,legend:x}}async function aWe(t,e,n,r){let i=(await t.query(Vn.from(e).select({count:Mo(),min:Yw(It(n)),max:OC(It(n)),mean:mT(It(n)),median:V$(It(n))}).where(Vy(It(n))))).get(0),s=Phe(i),o=`__ev_${n}_id`,a=ao(It(n),"DOUBLE");a=s.scale.expr(a,s.scale.constant??0);let l=Yv(Vy(ao(It(n),"DOUBLE")),yT(aa(ka(a,s.binStart),1/s.binSize)),kn(null));await t.exec(`
    ALTER TABLE ${e} ADD COLUMN IF NOT EXISTS ${It(o)} INTEGER DEFAULT 0;
    UPDATE ${e}
    SET ${It(o)} = ${l}
  `);let h=Array.from(await t.query(`
      SELECT ${It(o)} AS index, COUNT(*)::INT AS count
      FROM ${e}
      GROUP BY ${It(o)}
      ORDER BY ${It(o)} ASC
    `)),f=null,p=null,g=new Map,b=T=>s.scale.reverse(T,s.scale.constant??0);for(let{index:T,count:I}of h)T!=null&&((f==null||T<f)&&(f=T),(p==null||T>p)&&(p=T)),g.set(T,I);let x=[],k=sA(".6");if(f!=null&&p!=null){let T=uWe(r,p-f+1);for(let I=f;I<=p;I++){let M=b(I*s.binSize+s.binStart),B=b((I+1)*s.binSize+s.binStart);x.push({label:`[${k(M)}, ${k(B)})`,color:T[I-f],predicate:ah(l,kn(I)),count:g.get(I)??0})}}if(g.has(null)){let T=x.length;await t.exec(`
        UPDATE ${e}
        SET ${It(o)} = ${kn(T)}
        WHERE ${It(o)} IS NULL
      `),x.push({label:"(null / nan / inf)",color:r.nullColor,predicate:Kp(l),count:g.get(null)??0})}return{indexColumn:o,legend:x}}function lWe(t,e){if(typeof t.categoryColors=="function")return t.categoryColors(e);{let n=[];for(let r=0;r<e;r++)n.push(t.categoryColors[r%t.categoryColors.length]);return n}}function uWe(t,e){if(typeof t.ordinalColors=="function")return t.ordinalColors(e);if(e==t.ordinalColors.length)return t.ordinalColors.slice();{let n=Hz(t.ordinalColors);return Array.from({length:e}).map((r,i)=>n(i/(e-1)))}}function W4(t,e,n){return t+(e-t)*n}function cWe(t,e,n){let r=Math.log(t.scale),i=Math.log(e.scale);if(Math.abs(i-r)<1e-5)return{x:W4(t.x,e.x,n),y:W4(t.y,e.y,n),scale:W4(t.scale,e.scale,n)};let s=Math.exp(W4(r,i,n));return{x:(e.x*e.scale-t.x*t.scale+(t.x-e.x)*(t.scale*e.scale/s))/(e.scale-t.scale),y:(e.y*e.scale-t.y*t.scale+(t.y-e.y)*(t.scale*e.scale/s))/(e.scale-t.scale),scale:s}}async function hWe(t,e,n,r){let{stdX:i,stdY:s}=(await t.query(Vn.from(e).select({stdX:ir`STDDEV(${It(n)})::FLOAT`,stdY:ir`STDDEV(${It(r)})::FLOAT`}))).get(0);return 1/(Math.max(i,s,.001)*3)}const fWe=yhe(uXe),dWe=yhe(rXe);var pWe=gt('<div class="flex-none m-2 p-2 rounded-md bg-slate-100/75 dark:bg-slate-800/75 backdrop-blur-sm pointer-events-auto order-3"><!></div>'),mWe=gt('<div class="flex items-center justify-between"><div class="text-slate-500 dark:text-slate-400 select-none">Basemap Style</div> <!></div> <div class="flex gap-2 items-center"><!> <!></div>',1),gWe=gt('<span class="text-slate-400 dark:text-slate-500"> </span>'),yWe=gt('<div class="text-slate-500 dark:text-slate-400 select-none"> <!></div> <div class="flex gap-2 items-center"><!></div>',1),vWe=gt('<div class="flex flex-col gap-2 w-64"><!> <div class="text-slate-500 dark:text-slate-400 select-none">Display Mode</div> <div class="flex gap-2 items-center"><!> <!></div> <div class="text-slate-500 dark:text-slate-400 select-none">Point Size</div> <div class="flex gap-2 items-center"><!> <!></div> <!></div>'),bWe=gt('<div class="relative"><!> <div class="absolute top-0 left-0 right-0 flex flex-wrap justify-between items-start pointer-events-none z-10"><!> <div class="flex-none p-2 rounded-ss-md rounded-ee-md bg-white/75 dark:bg-black/75 backdrop-blur-sm flex items-center gap-2 pointer-events-auto order-1"><!> <!></div></div></div>');function _We(t,e){Ln(e,!0);const n=()=>qo(g,"$colorScheme",s),r=()=>qo(k,"$themeConfig",s),i=()=>qo(b,"$columnStyles",s),[s,o]=Cf(),a=Math.min(20,hze()),l=1/16,h=4e6,f=5e4,p="https://tiles.openfreemap.org/styles/liberty";let{colorScheme:g,columnStyles:b,searchResult:x,theme:k}=e.context,T=Fe(()=>lQ(n(),r())),I=The(e.context.highlight),M=Fe(()=>e.spec.data.category),B=hn(null),j=hn(null);Oo(()=>{e.context.coordinator.query(Vn.from(e.context.table).select({count:ir`COUNT(*)::INT`})).then(We=>{ct(j,We.get(0).count)})});let Q=hn(null),Z=hn(null),q=hn(null),J=hn(Ng(e.spec.mapStyle??p));xh(()=>{ct(J,e.spec.mapStyle??p,!0)}),Oo(()=>{e.context.cache.value(`embedding/category/${F(M)}`,()=>oWe(e.context.coordinator,e.context.table,F(M),F(T))).then(at=>{ct(B,at),(F(B)?.legend.length??0)>a&&e.onSpecChange({mode:"points"})})}),Oo(()=>{let We=!0;return I.subscribe(at=>{at!==null&&!We&&oe(at),We=!1})}),Oo(()=>x.subscribe(async We=>{if(We==null||We.ids.length==0){ct(q,null);return}let at=null;We.mode=="neighbors"&&(at=We.query);let ut=Array.from(await e.context.coordinator.query(Vn.from(e.context.table).select({identifier:It(e.context.id),x:It(e.spec.data.x),y:It(e.spec.data.y)}).where(Fb(e.context.id,We.ids.concat(at!=null?[at]:[]).map(wt=>kn(wt))))));ct(q,{center:ut.filter(wt=>wt.identifier===at)[0]??null,points:ut.filter(wt=>wt.identifier!==at)})}));async function oe(We){let ut=await e.context.cache.value(`embedding/default-viewport-scale/${e.spec.data.x},${e.spec.data.y}`,()=>hWe(e.context.coordinator,e.context.table,e.spec.data.x,e.spec.data.y))*2,wt=await e.context.coordinator.query(Vn.from(e.context.table).select({x:It(e.spec.data.x),y:It(e.spec.data.y)}).where(ah(It(e.context.id),kn(We)))),{x:ot,y:dt}=wt.get(0);ce({x:ot,y:dt,scale:ut}),ct(Z,[We]),ct(Q,We)}let me,ae=hn(null);function ce(We){ct(Q,null);let at=F(ae)??e.state.viewport;if(at==null){e.onStateChange({viewport:We});return}ct(ae,at);let ut=800,wt=new Date().getTime(),ot=()=>{let dt=(new Date().getTime()-wt)/ut;dt>1&&(dt=1),ct(ae,cWe(at,We,vhe(dt))),dt<1?me=requestAnimationFrame(ot):e.onStateChange({viewport:F(ae)})};me&&cancelAnimationFrame(me),me=requestAnimationFrame(ot)}var se=bWe(),ge=je(se);{let We=Fe(()=>F(B)?.indexColumn),at=Fe(()=>F(B)?.legend.map(Ft=>Ft.color)??[F(T).embeddingColor]),ut=Fe(()=>({colorScheme:n(),...e.context.embeddingViewConfig,mode:e.spec.mode??"points",isGis:e.spec.data.isGis,mapStyle:e.spec.mapStyle,...e.spec.minimumDensity!=null?{minimumDensity:e.spec.minimumDensity}:{},...e.spec.pointSize!=null?{pointSize:e.spec.pointSize}:{},downsampleMaxPoints:e.spec.downsampleMaxPoints??h})),wt=Fe(()=>Object.fromEntries(e.context.columns.map(Ft=>[Ft.name,Ft.name]))),ot=Fe(()=>({class:fWe,props:{darkMode:n(),columnStyles:i(),onNearestNeighborSearch:(e.context.searchModes??[]).indexOf("neighbors")>=0?Ft=>e.context.search?.(Ft,"neighbors"):null}})),dt=Fe(()=>({class:dWe,props:{...F(q)??{points:[],center:null}}})),Yt=Fe(()=>F(ae)??e.state.viewport);hXe(ge,{get width(){return e.width},get height(){return e.height},get coordinator(){return e.context.coordinator},get table(){return e.context.table},get filter(){return e.context.filter},get rangeSelection(){return e.context.filter},get identifier(){return e.context.id},get x(){return e.spec.data.x},get y(){return e.spec.data.y},get text(){return e.spec.data.text},get category(){return F(We)},get categoryColors(){return F(at)},get config(){return F(ut)},get labels(){return e.context.embeddingViewLabels},get cache(){return e.context.persistentCache},get additionalFields(){return F(wt)},get customTooltip(){return F(ot)},get customOverlay(){return F(dt)},get viewportState(){return F(Yt)},onViewportState:Ft=>e.onStateChange({viewport:Ft}),get rangeSelectionValue(){return e.state.brush},onRangeSelection:Ft=>e.onStateChange({brush:Ft}),get tooltip(){return F(Q)},onTooltip:Ft=>{ct(Q,Ft)},get selection(){return F(Z)},onSelection:Ft=>{ct(Z,Ft),Ft!=null&&Ft.length==1&&I.set(Ft[0].identifier)}})}var xe=lt(ge,2),Se=je(xe);{var De=We=>{var at=pWe(),ut=je(at);{let wt=Fe(()=>({items:F(B).legend})),ot=Fe(()=>e.state.legend??{});iWe(ut,{get context(){return e.context},get spec(){return F(wt)},get state(){return F(ot)},mode:"view",onSpecChange:()=>{},onStateChange:(dt,Yt)=>{e.onStateChange({legend:dt})}})}Be(at),Re(We,at)};Pt(Se,We=>{F(B)!=null&&We(De)})}var He=lt(Se,2),Ue=je(He);{let We=Fe(()=>[{value:void 0,label:"--"},...e.context.columns.filter(at=>at.jsType=="string"||at.jsType=="number").map(at=>({value:at.name,label:`${at.name} (${at.type})`}))]);ch(Ue,{class:"max-w-64",label:"Color",get value(){return F(M)},onChange:at=>e.onSpecChange({data:{...e.spec.data,category:at}}),get options(){return F(We)}})}var yt=lt(Ue,2);AL(yt,{get icon(){return Sle},title:"Options",children:(We,at)=>{var ut=vWe(),wt=je(ut);{var ot=cn=>{var Fn=mWe(),An=pn(Fn),qn=lt(je(An),2);{let fs=Fe(()=>e.spec.mapStyle!==null);phe(qn,{label:"Show",get value(){return F(fs)},onChange:Hr=>{Hr?e.onSpecChange({mapStyle:F(J)||p}):e.onSpecChange({mapStyle:null})}})}Be(An);var Er=lt(An,2),Mi=je(Er);{let fs=Fe(()=>e.spec.mapStyle===null);aA(Mi,{className:"w-full",get disabled(){return F(fs)},onEnter:()=>e.onSpecChange({mapStyle:F(J)}),get value(){return F(J)},set value(Hr){ct(J,Hr,!0)}})}var gi=lt(Mi,2);{let fs=Fe(()=>e.spec.mapStyle===null);om(gi,{label:"Set",get disabled(){return F(fs)},onClick:()=>e.onSpecChange({mapStyle:F(J)})})}Be(Er),Re(cn,Fn)};Pt(wt,cn=>{e.spec.data.isGis&&cn(ot)})}var dt=lt(wt,4),Yt=je(dt);{let cn=Fe(()=>e.spec.mode??"points"),Fn=Fe(()=>F(B)!=null&&F(B).legend.length>a);ch(Yt,{get value(){return F(cn)},onChange:An=>e.onSpecChange({mode:An}),get disabled(){return F(Fn)},options:[{value:"points",label:"Points"},{value:"density",label:"Density"}]})}var Ft=lt(Yt,2);{var Ot=cn=>{var Fn=()=>Math.log((e.spec.minimumDensity??l)/l),An=qn=>e.onSpecChange({minimumDensity:l*Math.exp(qn)});W5(cn,{get value(){return Fn()},set value(qn){An(qn)},min:-4,max:4,step:.05})};Pt(Ft,cn=>{(e.spec.mode??"points")=="density"&&cn(Ot)})}Be(dt);var Kt=lt(dt,4),Dn=je(Kt),Ut=()=>e.spec.pointSize??1,At=cn=>e.onSpecChange({pointSize:cn});W5(Dn,{get value(){return Ut()},set value(cn){At(cn)},min:1,max:10,step:.05});var zt=lt(Dn,2);om(zt,{label:"Auto",onClick:()=>e.onSpecChange({pointSize:void 0})}),Be(Kt);var nn=lt(Kt,2);{var Ze=cn=>{const Fn=Fe(()=>e.spec.downsampleMaxPoints??Math.min(h,F(j))),An=Fe(()=>F(Fn)>=F(j));var qn=yWe(),Er=pn(qn),Mi=je(Er),gi=lt(Mi);{var fs=Qi=>{var ki=gWe(),js=je(ki);Be(ki),on(Co=>Pr(js,`/ ${Co??""}`),[()=>F(j)>=1e6?(F(j)/1e6).toFixed(1)+"M":(F(j)/1e3).toFixed(0)+"K"]),Re(Qi,ki)};Pt(gi,Qi=>{F(An)||Qi(fs)})}Be(Er);var Hr=lt(Er,2),uo=je(Hr),ei=()=>e.spec.downsampleMaxPoints??Math.min(h,F(j)??h),Ct=Qi=>e.onSpecChange({downsampleMaxPoints:Qi});{let Qi=Fe(()=>Math.max(1e4,Math.floor(F(j)/100/1e4)*1e4));W5(uo,{get value(){return ei()},set value(ki){Ct(ki)},min:f,get max(){return F(j)},get step(){return F(Qi)}})}Be(Hr),on(Qi=>Pr(Mi,`Max Points: ${Qi??""} `),[()=>F(An)?"All":F(Fn)>=1e6?(F(Fn)/1e6).toFixed(1)+"M":(F(Fn)/1e3).toFixed(0)+"K"]),Re(cn,qn)};Pt(nn,cn=>{F(j)!=null&&F(j)>f&&cn(Ze)})}Be(ut),Re(We,ut)},$$slots:{default:!0}}),Be(He),Be(xe),Be(se),Re(t,se),$n(),o()}var xWe=gt("<div><!></div>"),wWe=gt("<div><!></div>");function Dhe(t,e){let n=hn(300),r=hn(200),i=jn(e,"flexHeight",3,!1);var s=wWe();let o;var a=je(s);{var l=f=>{var p=xWe();let g;var b=je(p);vf(b,()=>e.children??Ys,()=>F(n),()=>F(r)),Be(p),on(()=>g=lr(p,"",g,{position:"absolute",height:`${F(r)??""}px`})),Re(f,p)},h=f=>{var p=ar(),g=pn(p);vf(g,()=>e.children??Ys,()=>F(n),()=>F(r)),Re(f,p)};Pt(a,f=>{i()?f(l):f(h,!1)})}Be(s),on(()=>{Hi(s,1,_C(i()?"flex-1 min-h-0":void 0)),o=lr(s,"",o,{"user-select":"none",position:"relative",height:i()?void 0:"fit-content"})}),a0(s,"clientWidth",f=>ct(n,f)),a0(s,"clientHeight",f=>ct(r,f)),Re(t,s)}var OWe=$r("<g><foreignObject><div> </div></foreignObject></g>");function vG(t,e){Ln(e,!0);let n=Fe(()=>e.dimension=="x"?{px:e.proxy.scale.x?.apply(e.label.value)??0,py:e.proxy.plotHeight+e.label.padding,anchorX:.5,anchorY:0}:{px:-e.label.padding,py:e.proxy.scale.y?.apply(e.label.value)??0,anchorX:1,anchorY:.5}),r=Fe(()=>F(n).px),i=Fe(()=>F(n).py),s=Fe(()=>F(n).anchorX),o=Fe(()=>F(n).anchorY),a=Fe(()=>e.label.orientation=="vertical"?{rotation:90,shiftX:F(s)*e.label.size.width,shiftY:-F(o)*e.label.size.height,width:e.label.size.height,height:e.label.size.width}:{rotation:0,shiftX:-F(s)*e.label.size.width,shiftY:-F(o)*e.label.size.height,width:e.label.size.width,height:e.label.size.height}),l=Fe(()=>F(a).rotation),h=Fe(()=>F(a).shiftX),f=Fe(()=>F(a).shiftY),p=Fe(()=>F(a).width),g=Fe(()=>F(a).height),b=4,x=4;var k=OWe(),T=je(k);St(T,"x",-b),St(T,"y",-x);var I=je(T);let M;var B=je(I,!0);Be(I),Be(T),Be(k),on(()=>{St(k,"transform",`translate(${F(r)+F(h)}, ${F(i)+F(f)}) rotate(${F(l)??""})`),St(T,"width",F(p)+b*2),St(T,"height",F(g)+x*2),St(I,"title",e.label.text),M=lr(I,"",M,{width:`${F(p)+2}px`,height:`${F(g)+x*2}px`,"line-height":`${F(g)+x*2}px`,"font-family":e.label.fontFamily,"font-size":`${e.label.fontSize??""}px`,"margin-left":"4px",color:e.color,overflow:"hidden","white-space":"nowrap","text-overflow":"ellipsis"}),Pr(B,e.label.text)}),Re(t,k),$n()}let t3;function SWe(){return t3==null&&(t3=document.createElement("canvas"),t3.width=1,t3.height=1),t3.getContext("2d")}function SP(t,e){let n=SWe();n.font=`${e.fontSize}px ${e.fontFamily}`;let r=n.measureText(t);return{size:{width:Math.min(e.maxWidth,r.width),height:e.fontSize},fontFamily:e.fontFamily,fontSize:e.fontSize}}function kP(t,e,n,r){switch(t.type){case"band":return kWe(t,e,n,r);default:return CWe(t,e,n,r)}}function kWe(t,e,n,r){let i=[...t.domain,...t.specialValues??[]];i=Array.from(new Set(i)),n=="y"&&(i=i.reverse());let s=[],o=[];if(e){let p=e.values??i,g=e.labelPadding??6,b=Fhe(e,r);s=p.map(x=>{if(n=="y")return{text:x,value:x,padding:g,level:0,orientation:"horizontal",...SP(x,b)};{let k=SP(x,b);return k.size={width:k.size.height,height:k.size.width},{text:x,value:x,padding:g,level:0,orientation:"vertical",...k}}}),o=p.map(x=>({value:x,level:0}))}let a=Hce().domain(i).padding(.1);n=="y"&&a.range([1,0]);let l=a.bandwidth(),h=a.step(),f={rangeBands:[[[0,0],[1,0]]],apply:p=>[(a(p)??0)+l/2,0],applyBand:p=>{let g=a(p)??0;return[[g,0],[g+l,0]]},invert(p,[g,b]){let x=(p-g)/(b-g);n=="y"&&(x=1-x);let k=Math.floor(x/h);return i[k]}};return{labels:s,gridLines:[],ticks:o,base:f,concrete:p=>Rhe(f,"band",t.domain,t.specialValues??[],p)}}function Ihe(t,e){let[n,r]=t,[i,s]=e;return o=>[n+(i-n)*o,r+(s-r)*o]}function Mhe(t){let[e,n]=t;return([r,i])=>r*(n-e)+e+i}function Rhe(t,e,n,r,i){let s=Mhe(i);return{type:e,domain:n,specialValues:r,range:i,rangeBands:t.rangeBands.map(([o,a])=>[s(o),s(a)]),apply:o=>s(t.apply(o)),applyBand:o=>{let[a,l]=t.applyBand(o),h=s(a),f=s(l);return h<f?[h,f]:[f,h]},invert:(o,a)=>t.invert(o,i,a)}}function Fhe(t,e){return{fontFamily:t?.labelFontFamily??e.labelFontFamily,fontSize:t?.labelFontSize??e.labelFontSize,maxWidth:t?.labelMaxWidth??e.labelMaxWidth}}function CWe(t,e,n,r){let i;switch(t.type){case"linear":{i=dI().domain(t.domain);break}case"log":{i=hC().domain(t.domain);break}case"symlog":{let b=t.constant??1;i=Jce().constant(b).domain(t.domain),i.nice=()=>i,i.ticks=x=>EWe(i.domain(),b,x),i.tickFormat=()=>sA("~s");break}default:throw new Error("invalid scale type")}let s=[],o=[];if(e){let b=[];if(e.extendScaleToTicks??!0)if(e.values){b=e.values;let M=i.domain().concat(b);i=i.domain([M.reduce((B,j)=>Math.min(B,j),M[0]),M.reduce((B,j)=>Math.max(B,j),M[0])])}else{let M=e.desiredTickCount??5;i.nice&&(i=i.nice(M)),b=i.ticks(M)}else{if(e.values)b=e.values;else{let j=e.desiredTickCount??5;b=i.ticks(j)}let[M,B]=i.domain();b=b.filter(j=>j>=M&&j<=B)}let x=e.labelPadding??6,k=i.tickFormat(e.values?e.values.length:e.desiredTickCount??5),T=M=>t.type=="log"||t.type=="symlog"?Math.round(Math.log10(Math.abs(M)))==Math.log10(Math.abs(M))?0:1:0,I=Fhe(e,r);s=b.map(M=>{let B=k(M);return{text:B,value:M,padding:x,level:T(M),orientation:"horizontal",...SP(B,I)}});for(let M of t.specialValues??[])s.push({text:M,value:M,padding:x,level:0,orientation:"horizontal",...SP(M,I)});o=b.map(M=>({value:M,level:T(M)}))}n=="y"&&i.range([1,0]);let{rangeBands:a,map:l}=AWe(Array.from(new Set(t.specialValues??[])),n=="x"?"start":"end"),[h,f]=a[0],p=Ihe(h,f),g={rangeBands:a,apply:b=>{let x=l.get(b);if(x!=null)return[(x[0][0]+x[1][0])/2,(x[0][1]+x[1][1])/2];if(b==null)return[NaN,NaN];let k=b instanceof Array&&b.length>=2?(i(b[0])+i(b[1]))/2:i(b);return p(k)},applyBand:b=>{let x=l.get(b);if(x!=null)return x;if(b==null)return[[NaN,NaN],[NaN,NaN]];if(b instanceof Array&&b.length>=2)return[p(i(b[0])),p(i(b[1]))];{let k=p(i(b));return[k,k]}},invert(b,x,k){let T=Mhe(x);if(k!="number")for(let[I,[M,B]]of l.entries()){let j=T(M),Q=T(B);if(b>=Math.min(j,Q)&&b<=Math.max(j,Q))return I}if(k!="string"){let I=T(h),M=T(f);return i.invert((b-I)/(M-I))}}};return{labels:s,gridLines:o,ticks:o,base:g,concrete:b=>Rhe(g,t.type,i.domain(),t.specialValues??[],b)}}function AWe(t,e){let n=[[0,0],[1,0]],r,i=new Map;if(t.length>0){let s=8,a=t.length*20;e=="start"?(n=[[0,a+s],[1,0]],r=[[0,0],[0,a]]):(n=[[0,0],[1,-a-s]],r=[[1,-a],[1,0]]);let l=Ihe(r[0],r[1]);for(let h=0;h<t.length;h++){let f=(h+.1)/t.length,p=(h+.9)/t.length;i.set(t[h],[l(f),l(p)])}}return{rangeBands:r!=null?[n,r]:[n],map:i}}function bG(t,e,n={}){let r=n.gap??0,i=t.map((a,l)=>({...e(a),index:l})).sort((a,l)=>a.priority-l.priority),s=t.map(a=>!1),o=(a,l)=>Math.abs(a.center-l.center)<r+a.length/2+l.length/2;for(let a=0;a<i.length;a++){let l=!1;for(let h=0;h<a;h++)if(s[i[h].index]&&o(i[a],i[h])){l=!0;break}s[i[a].index]=!l}return t.filter((a,l)=>s[l])}function EWe(t,e,n){n=n??5;let r=t[0],i=t[1];if(r>0&&i>0&&r/i>.5||r<0&&i<0&&i/r>.5)return dI().domain([r,i]).ticks(n);let s=e*2,o=e*5;return r<-o&&i>o&&(n=Math.ceil(n/2)),[...r<-o?hC().domain([s,-r]).ticks(n).map(a=>-a):[],0,...i>o?hC().domain([s,i]).ticks(n):[]].filter(a=>a>=r&&a<=i)}function TWe(t,e){switch(t.type){case"band":{let o=t.range??e.categoryColors,a=new Map;if(typeof o=="function"){let l=o(t.domain.length);for(let h=0;h<t.domain.length;h++)a.set(t.domain[h],l[h])}else for(let l=0;l<t.domain.length;l++)a.set(t.domain[l],o[l%o.length]);return{type:t.type,domain:t.domain,specialValues:t.specialValues??[],apply:l=>a.get(l)??e.markColorGray}}default:let r=kP({...t,specialValues:[]},null,"x",e).concrete([0,1]),i=Kqe(t.range??e.interpolate),s=new Set(t.specialValues??[]);return{type:t.type,domain:t.domain,specialValues:t.specialValues??[],apply:o=>s.has(o)?e.markColorGray:i(r.apply(o))}}}function PWe(t,e){let n=[0,1e3];if(t.range instanceof Array&&t.range.length==2){let[r,i]=t.range;typeof r=="number"&&typeof i=="number"&&(n=[r,i])}switch(t.type){case"band":{let s=new Map;for(let o=0;o<t.domain.length;o++)s.set(t.domain[o],(o+1)/t.domain.length*(n[1]-n[0])+n[0]);return{type:t.type,domain:t.domain,specialValues:t.specialValues??[],apply:o=>s.get(o)??1}}default:let i=kP({...t,specialValues:[]},null,"x",e).concrete(n);return{type:t.type,domain:t.domain,specialValues:t.specialValues??[],apply:s=>i.apply(s)}}}function ec(t,e,n){if(t.length==0)return[0,0];if(n=="inner"){let r=0,i=0;for(let[s,o]of t){let a=s*e+o;a<0&&(r=Math.max(r,-a)),a>e&&(i=Math.max(i,a-e))}return[r,i]}else{let r=0,i=0;for(let[s,o]of t){let a=(e-r-i)*s+r+o;a<0&&s!=1&&(r=((e-i)*s+o)/(s-1)),a>e&&s!=0&&(i=((e-r)*s+r+o-e)/s)}return[r,i]}}function n3(t){if(typeof t=="number"&&isFinite(t)&&t>0)return t}const DWe=300,IWe=200;function MWe(t,e){let n=[],r=[];if(e?.x&&e?.x.labels.length>0)for(let b of e.x.labels){let x=e.x.base.apply(b.value);n.push([x[0],x[1]-b.size.width/2]),n.push([x[0],x[1]+b.size.width/2]),r.push([1,b.size.height+b.padding])}if(e?.y&&e?.y.labels.length>0)for(let b of e.y.labels){let x=e.y.base.apply(b.value);n.push([0,-b.size.width-b.padding]),r.push([x[0],x[1]-b.size.height/2]),r.push([x[0],x[1]+b.size.height/2])}let{width:i,height:s,plotWidth:o,plotHeight:a,plotAspectRatio:l}=t;i=n3(i),s=n3(s),o=n3(o),a=n3(a),l=n3(l);let h=0,f=0,p=0,g=0;if(l==null)i==null&&o!=null?([h,f]=ec(n,o,"inner"),i=o+h+f):(i=i??DWe,[h,f]=ec(n,i,"outer"),o=i-h-f),s==null&&a!=null?([p,g]=ec(r,a,"inner"),s=a+p+g):(s=s??IWe,[p,g]=ec(r,s,"outer"),a=s-p-g);else if(o!=null||a!=null){if(o!=null)a=o/l;else if(a!=null)o=a*l;else throw new Error("unreachable");let[b,x]=ec(n,o,"inner"),[k,T]=ec(r,a,"inner");return i=i??o+b+x,s=s??a+k+T,{width:i,height:s,plotRect:{x:b,y:k,width:o,height:a}}}else if(s==null){i=i??400,[h,f]=ec(n,i,"outer");let b=i-h-f,x=b/l;return[p,g]=ec(r,x,"inner"),s=x+p+g,{width:i,height:s,plotRect:{x:h,y:p,width:b,height:x}}}else{if(i==null)return s=s??400,[p,g]=ec(r,s,"outer"),a=s-p-g,o=a*l,[h,f]=ec(r,o,"inner"),i=o+h+f,{width:i,height:s,plotRect:{x:h,y:p,width:o,height:a}};[h,f]=ec(n,i,"outer"),o=i-h-f,a=o/l,[p,g]=ec(r,a,"inner"),p+g+a>s&&([p,g]=ec(r,s,"outer"),a=s-p-g,o=a*l,[h,f]=ec(n,o,"inner"))}return{width:i,height:s,plotRect:{x:h,y:p,width:o,height:a}}}var RWe=$r('<line stroke-linecap="butt"></line>'),FWe=$r('<line stroke-dasharray="1,3" stroke-linecap="square"></line>'),LWe=$r("<g><!><!><!></g>"),$We=$r('<line stroke-linecap="butt"></line>'),BWe=$r('<line stroke-linecap="square"></line>'),NWe=$r("<g><!><!><!></g>"),zWe=gt("<div><svg><g><!><!><!><!></g></svg></div>");function Lhe(t,e){Ln(e,!0);const n=4;let r=jn(e,"xAxis",19,()=>({})),i=jn(e,"yAxis",19,()=>({})),s=Fe(()=>e.xScale?kP(e.xScale,r(),"x",e.theme):void 0),o=Fe(()=>e.yScale?kP(e.yScale,i(),"y",e.theme):void 0),a=Fe(()=>MWe({width:e.width,height:e.height,plotWidth:e.plotWidth,plotHeight:e.plotHeight,plotAspectRatio:e.plotAspectRatio},{x:F(s),y:F(o)})),l=Fe(()=>F(a).width),h=Fe(()=>F(a).height),f=Fe(()=>F(a).plotRect.x),p=Fe(()=>F(a).plotRect.y),g=Fe(()=>F(a).plotRect.width),b=Fe(()=>F(a).plotRect.height),x=Fe(()=>F(s)?.concrete([0,F(g)])),k=Fe(()=>F(o)?.concrete([0,F(b)])),T=Fe(()=>F(s)&&F(x)?bG(F(s).labels,se=>({center:F(x).apply(se.value),length:se.size.width,priority:se.level}),{gap:4}):[]),I=Fe(()=>F(o)&&F(k)?bG(F(o).labels,se=>({center:F(k).apply(se.value),length:se.size.height,priority:se.level}),{gap:2}):[]),M=Fe(()=>({plotWidth:F(g),plotHeight:F(b),scale:{x:F(x),y:F(k),...e.otherScales??{}}}));var B=zWe();let j;var Q=je(B);lr(Q,"",{},{position:"absolute",left:"-4px",top:"-4px"});var Z=je(Q),q=je(Z);vf(q,()=>e.childrenBelow??Ys,()=>F(M));var J=lt(q);{var oe=se=>{var ge=LWe(),xe=je(ge);Wr(xe,17,()=>F(s).ticks,Wi,(He,Ue)=>{const yt=Fe(()=>F(x).apply(F(Ue).value));var We=RWe();on(()=>{St(We,"x1",F(yt)),St(We,"y1",F(b)),St(We,"x2",F(yt)),St(We,"y2",F(b)+(F(Ue).level==0?3:0)),St(We,"stroke",e.theme.gridColor),St(We,"stroke-opacity",F(Ue).level==0?1:.4)}),Re(He,We)});var Se=lt(xe);Wr(Se,17,()=>F(s).gridLines,Wi,(He,Ue)=>{const yt=Fe(()=>F(x).apply(F(Ue).value));var We=ar(),at=pn(We);Wr(at,17,()=>F(k)?.rangeBands??[],Wi,(ut,wt)=>{var ot=Fe(()=>zQ(F(wt),2));let dt=()=>F(ot)[0],Yt=()=>F(ot)[1];var Ft=FWe();on((Ot,Kt)=>{St(Ft,"x1",F(yt)),St(Ft,"y1",Ot),St(Ft,"x2",F(yt)),St(Ft,"y2",Kt),St(Ft,"stroke",e.theme.gridColor),St(Ft,"stroke-opacity",F(Ue).level==0?1:.4)},[()=>Math.min(dt(),Yt()),()=>Math.max(dt(),Yt())]),Re(ut,Ft)}),Re(He,We)});var De=lt(Se);Wr(De,17,()=>F(T),Wi,(He,Ue)=>{vG(He,{get label(){return F(Ue)},dimension:"x",get proxy(){return F(M)},get color(){return e.theme.labelColor}})}),Be(ge),Re(se,ge)};Pt(J,se=>{F(s)&&F(x)&&r()&&se(oe)})}var me=lt(J);{var ae=se=>{var ge=NWe(),xe=je(ge);Wr(xe,17,()=>F(o).ticks,Wi,(He,Ue)=>{const yt=Fe(()=>F(k).apply(F(Ue).value));var We=$We();St(We,"x2",0),on(()=>{St(We,"x1",-(F(Ue).level==0?3:0)),St(We,"y1",F(yt)),St(We,"y2",F(yt)),St(We,"stroke",e.theme.gridColor),St(We,"stroke-opacity",F(Ue).level==0?1:.4)}),Re(He,We)});var Se=lt(xe);Wr(Se,17,()=>F(o).gridLines,Wi,(He,Ue)=>{const yt=Fe(()=>F(k).apply(F(Ue).value));var We=ar(),at=pn(We);Wr(at,17,()=>F(x)?.rangeBands??[],Wi,(ut,wt)=>{var ot=Fe(()=>zQ(F(wt),2));let dt=()=>F(ot)[0],Yt=()=>F(ot)[1];var Ft=BWe();on(()=>{St(Ft,"x1",dt()),St(Ft,"y1",F(yt)),St(Ft,"x2",Yt()),St(Ft,"y2",F(yt)),St(Ft,"stroke",e.theme.gridColor),St(Ft,"stroke-opacity",F(Ue).level==0?1:.4)}),Re(ut,Ft)}),Re(He,We)});var De=lt(Se);Wr(De,17,()=>F(I),Wi,(He,Ue)=>{vG(He,{get label(){return F(Ue)},dimension:"y",get proxy(){return F(M)},get color(){return e.theme.labelColor}})}),Be(ge),Re(se,ge)};Pt(me,se=>{F(o)&&F(k)&&i()&&se(ae)})}var ce=lt(me);vf(ce,()=>e.children??Ys,()=>F(M)),Be(Z),Be(Q),Be(B),on(()=>{j=lr(B,"",j,{width:`${F(l)??""}py`,height:`${F(h)??""}px`,position:"relative","user-select":"none","-webkit-user-select":"none",cursor:"default"}),St(Q,"width",F(l)+n*2),St(Q,"height",F(h)+n*2),St(Z,"transform",`translate(${n+F(f)},${n+F(p)})`)}),Re(t,B),$n()}var QWe=$r('<rect role="none"></rect><rect role="none"></rect>',1),jWe=$r('<rect role="none"></rect><rect role="none"></rect>',1),UWe=$r('<rect role="none"></rect><rect role="none"></rect><rect role="none"></rect><rect role="none"></rect>',1),VWe=$r('<rect></rect><rect role="none"></rect><!><!><!>',1),qWe=$r('<g><rect stroke="none" fill="none" role="none"></rect><!></g>');function ZWe(t,e){Ln(e,!0);const n=8;let r,i=Fe(()=>e.proxy.scale.x!=null&&e.value?.x!=null?e.proxy.scale.x.applyBand(e.value.x):[0,e.proxy.plotWidth]),s=Fe(()=>e.proxy.scale.y!=null&&e.value?.y!=null?e.proxy.scale.y.applyBand(e.value.y):[0,e.proxy.plotHeight]);function o(k){return k instanceof Array&&k.length==2&&typeof k[0]=="number"&&typeof k[1]=="number"}function a(k,T,I){let M=k.invert(T,I);if(k.domain.length==2&&typeof k.domain[0]=="number"&&typeof M=="number"){let[B,j]=k.domain;return Math.max(Math.min(B,j),Math.min(Math.max(B,j),M))}return M}function l(k,T){return(T=="x"||T=="xy")&&k.x==null?!1:!((T=="y"||T=="xy")&&k.y==null)}function h(){return k=>{let T=r.getBoundingClientRect().left,I=r.getBoundingClientRect().top,M=k.clientX-T,B=k.clientY-I,j=e.proxy.scale.x?a(e.proxy.scale.x,M):null,Q=e.proxy.scale.y?a(e.proxy.scale.y,B):null;if(j==null&&(e.mode=="x"||e.mode=="xy")||Q==null&&(e.mode=="y"||e.mode=="xy"))return;let Z=(oe,me)=>typeof oe=="number"&&typeof me=="number"?oe!=me?[Math.min(oe,me),Math.max(oe,me)]:null:me,q=oe=>oe==null?void 0:typeof oe=="number"?"number":"string",J=oe=>{let me=oe.clientX-T,ae=oe.clientY-I,ce=e.proxy.scale.x?a(e.proxy.scale.x,me,q(j))??j:null,se=e.proxy.scale.y?a(e.proxy.scale.y,ae,q(Q))??Q:null,ge={};return(e.mode=="x"||e.mode=="xy")&&(ge.x=Z(j,ce)),(e.mode=="y"||e.mode=="xy")&&(ge.y=Z(Q,se)),l(ge,e.mode)?ge:null};return{move:oe=>{e.onChange(J(oe))},up:oe=>{e.onChange(J(oe))}}}}function f(k){return T=>{if(e.value==null)return;let I={...e.value},{x:M,y:B}=e.proxy.scale,j=o(I.x),Q=o(I.y),Z=[...M&&I.x?M.applyBand(I.x):[0,0],...B&&I.y?B.applyBand(I.y):[0,0]];if(!j){let J=Math.max(k[0],k[1]);k=[J,J,k[2],k[3]]}if(!Q){let J=Math.max(k[2],k[3]);k=[k[0],k[1],J,J]}let q=J=>{let oe=J.pageX-T.pageX,me=J.pageY-T.pageY,ae=[oe,oe,me,me].map((se,ge)=>Z[ge]+se*k[ge]),ce={...I};if(M&&(e.mode=="x"||e.mode=="xy"))if(j){let se=a(M,ae[0],"number"),ge=a(M,ae[1],"number");ce.x=se==ge?null:se<ge?[se,ge]:[ge,se]}else ce.x=a(M,(ae[0]+ae[1])/2),typeof ce.x!="string"&&(ce.x=null);if(B!=null&&(e.mode=="y"||e.mode=="xy"))if(Q){let se=a(B,ae[2],"number"),ge=a(B,ae[3],"number");ce.y=se==ge?null:se<ge?[se,ge]:[ge,se]}else ce.y=a(B,(ae[2]+ae[3])/2),typeof ce.y!="string"&&(ce.y=null);return l(ce,e.mode)||(ce=null),ce};return{move:J=>{e.onChange(q(J))},up:J=>{let oe=q(J);oe&&!j&&!Q&&oe.x==I.x&&oe.y==I.y&&(oe=null),e.onChange(oe)}}}}var p=qWe(),g=je(p);St(g,"x",0),St(g,"y",0),lr(g,"",{},{"pointer-events":"fill","user-select":"none",cursor:"crosshair"}),zu(g,k=>r=k,()=>r),Do(g,(k,T)=>vs?.(k,T),()=>({click:k=>{if(e.value!=null)e.onChange(null);else{let T=h()(k);T&&(T.move(k),T.up(k))}},drag:h()}));var b=lt(g);{var x=k=>{var T=VWe(),I=pn(T);let M;var B=lt(I);let j;Do(B,(ae,ce)=>vs?.(ae,ce),()=>({drag:f([1,1,1,1])}));var Q=lt(B);{var Z=ae=>{var ce=QWe(),se=pn(ce);St(se,"width",n),lr(se,"",{},{cursor:"ew-resize",stroke:"none",fill:"none","pointer-events":"all"}),Do(se,(xe,Se)=>vs?.(xe,Se),()=>({drag:f([1,0,0,0])}));var ge=lt(se);St(ge,"width",n),lr(ge,"",{},{cursor:"ew-resize",stroke:"none",fill:"none","pointer-events":"all"}),Do(ge,(xe,Se)=>vs?.(xe,Se),()=>({drag:f([0,1,0,0])})),on((xe,Se,De,He)=>{St(se,"x",F(i)[0]-n/2),St(se,"y",xe),St(se,"height",Se),St(ge,"x",F(i)[1]-n/2),St(ge,"y",De),St(ge,"height",He)},[()=>Math.min(F(s)[0],F(s)[1]),()=>Math.abs(F(s)[0]-F(s)[1]),()=>Math.min(F(s)[0],F(s)[1]),()=>Math.abs(F(s)[0]-F(s)[1])]),Re(ae,ce)};Pt(Q,ae=>{(e.mode=="x"||e.mode=="xy")&&o(e.value.x)&&ae(Z)})}var q=lt(Q);{var J=ae=>{var ce=jWe(),se=pn(ce);St(se,"height",n),lr(se,"",{},{cursor:"ns-resize",stroke:"none",fill:"none","pointer-events":"all"}),Do(se,(xe,Se)=>vs?.(xe,Se),()=>({drag:f([0,0,1,0])}));var ge=lt(se);St(ge,"height",n),lr(ge,"",{},{cursor:"ns-resize",stroke:"none",fill:"none","pointer-events":"all"}),Do(ge,(xe,Se)=>vs?.(xe,Se),()=>({drag:f([0,0,0,1])})),on((xe,Se,De,He)=>{St(se,"x",xe),St(se,"width",Se),St(se,"y",F(s)[0]-n/2),St(ge,"x",De),St(ge,"width",He),St(ge,"y",F(s)[1]-n/2)},[()=>Math.min(F(i)[0],F(i)[1]),()=>Math.abs(F(i)[0]-F(i)[1]),()=>Math.min(F(i)[0],F(i)[1]),()=>Math.abs(F(i)[0]-F(i)[1])]),Re(ae,ce)};Pt(q,ae=>{(e.mode=="y"||e.mode=="xy")&&o(e.value.y)&&ae(J)})}var oe=lt(q);{var me=ae=>{var ce=UWe(),se=pn(ce);St(se,"width",n),St(se,"height",n),lr(se,"",{},{cursor:"nesw-resize",stroke:"none",fill:"none","pointer-events":"all"}),Do(se,(De,He)=>vs?.(De,He),()=>({drag:f([1,0,1,0])}));var ge=lt(se);St(ge,"width",n),St(ge,"height",n),lr(ge,"",{},{cursor:"nwse-resize",stroke:"none",fill:"none","pointer-events":"all"}),Do(ge,(De,He)=>vs?.(De,He),()=>({drag:f([1,0,0,1])}));var xe=lt(ge);St(xe,"width",n),St(xe,"height",n),lr(xe,"",{},{cursor:"nwse-resize",stroke:"none",fill:"none","pointer-events":"all"}),Do(xe,(De,He)=>vs?.(De,He),()=>({drag:f([0,1,1,0])}));var Se=lt(xe);St(Se,"width",n),St(Se,"height",n),lr(Se,"",{},{cursor:"nesw-resize",stroke:"none",fill:"none","pointer-events":"all"}),Do(Se,(De,He)=>vs?.(De,He),()=>({drag:f([0,1,0,1])})),on(()=>{St(se,"x",F(i)[0]-n/2),St(se,"y",F(s)[0]-n/2),St(ge,"x",F(i)[0]-n/2),St(ge,"y",F(s)[1]-n/2),St(xe,"x",F(i)[1]-n/2),St(xe,"y",F(s)[0]-n/2),St(Se,"x",F(i)[1]-n/2),St(Se,"y",F(s)[1]-n/2)}),Re(ae,ce)};Pt(oe,ae=>{e.mode=="xy"&&o(e.value.x)&&o(e.value.y)&&ae(me)})}on((ae,ce,se,ge,xe,Se,De,He)=>{St(I,"x",ae),St(I,"width",ce),St(I,"y",se),St(I,"height",ge),M=lr(I,"",M,{stroke:e.theme.brushBorderBack,fill:"none","stroke-width":2}),St(B,"x",xe),St(B,"width",Se),St(B,"y",De),St(B,"height",He),j=lr(B,"",j,{stroke:e.theme.brushBorder,fill:e.theme.brushFill,cursor:"move"})},[()=>Math.min(F(i)[0],F(i)[1]),()=>Math.abs(F(i)[0]-F(i)[1]),()=>Math.min(F(s)[0],F(s)[1]),()=>Math.abs(F(s)[0]-F(s)[1]),()=>Math.min(F(i)[0],F(i)[1]),()=>Math.abs(F(i)[0]-F(i)[1]),()=>Math.min(F(s)[0],F(s)[1]),()=>Math.abs(F(s)[0]-F(s)[1])]),Re(k,T)};Pt(b,k=>{F(i)&&F(s)&&e.value&&k(x)})}Be(p),on(()=>{St(g,"width",e.proxy.plotWidth),St(g,"height",e.proxy.plotHeight)}),Re(t,p),$n()}var XWe=$r('<image preserveAspectRatio="none"></image>');function WWe(t,e){Ln(e,!0);let n=Fe(()=>e.proxy.scale.x&&e.xDomain?e.proxy.scale.x.apply(e.xDomain[0]):0),r=Fe(()=>e.proxy.scale.x&&e.xDomain?e.proxy.scale.x.apply(e.xDomain[1]):e.proxy.plotWidth),i=Fe(()=>e.proxy.scale.y&&e.yDomain?e.proxy.scale.y.apply(e.yDomain[0]):0),s=Fe(()=>e.proxy.scale.y&&e.yDomain?e.proxy.scale.y.apply(e.yDomain[1]):e.proxy.plotHeight),o=hn(null),a=document.createElement("canvas");Oo(()=>{a.width=e.rasterWidth,a.height=e.rasterHeight;let h=a.getContext("2d",{colorSpace:"srgb",willReadFrequently:!0});h.clearRect(0,0,a.width,a.height);let f=h.getImageData(0,0,a.width,a.height),p=0;for(let g=0;g<a.height;g++)for(let b=0;b<a.width;b++){let x=(b+.5)/a.width*(F(r)-F(n))+F(n),k=(g+.5)/a.height*(F(s)-F(i))+F(i),T=e.proxy.scale.x?.invert(x)??0,I=e.proxy.scale.y?.invert(k)??0,{r:M,g:B,b:j,opacity:Q}=P2(e.color(T,I));f.data[p++]=M,f.data[p++]=B,f.data[p++]=j,f.data[p++]=Q*255}h.putImageData(f,0,0),ct(o,a.toDataURL("image/png"),!0)});var l=XWe();on((h,f,p,g)=>{St(l,"x",h),St(l,"y",f),St(l,"width",p),St(l,"height",g),St(l,"href",F(o))},[()=>Math.min(F(n),F(r)),()=>Math.min(F(i),F(s)),()=>Math.abs(F(n)-F(r)),()=>Math.abs(F(i)-F(s))]),Re(t,l),$n()}var GWe=gt('<div class="flex gap-1 items-center"><div class="w-3 h-3 block rounded-sm"></div> <div class="whitespace-nowrap max-w-32 overflow-hidden text-ellipsis"> </div></div>'),YWe=gt('<div class="flex gap-2 flex-wrap items-center select-none"></div>'),HWe=$r("<rect></rect>"),KWe=$r("<!><!>",1),JWe=gt('<div class="pl-4"><!></div>'),eGe=gt('<div class="text-sm text-slate-400 dark:text-slate-500"><!></div>');function tGe(t,e){Ln(e,!0);var n=eGe(),r=je(n);{var i=o=>{var a=YWe();Wr(a,21,()=>e.scale.domain.concat(e.scale.specialValues??[]),Wi,(l,h)=>{const f=Fe(()=>e.scale.apply(F(h)));var p=GWe(),g=je(p);let b;var x=lt(g,2),k=je(x,!0);Be(x),Be(p),on(()=>{St(p,"title",F(h)),b=lr(g,"",b,{background:F(f)}),Pr(k,F(h))}),Re(l,p)}),Be(a),Re(o,a)},s=o=>{var a=JWe(),l=je(a);Dhe(l,{children:(f,p=Ys,g=Ys)=>{{const b=(k,T=Ys)=>{var I=KWe(),M=pn(I);{let j=Fe(()=>T().scale.x?.domain);WWe(M,{color:Q=>e.scale.apply(Q),rasterWidth:100,rasterHeight:1,get proxy(){return T()},get xDomain(){return F(j)}})}var B=lt(M);Wr(B,17,()=>e.scale.specialValues??[],Wi,(j,Q)=>{const Z=Fe(()=>{const[J,oe]=T().scale.x?.applyBand(F(Q))??[NaN,NaN];return{x0:J,x1:oe}});var q=HWe();St(q,"y",0),on((J,oe,me)=>{St(q,"x",J),St(q,"width",oe),St(q,"height",T().plotHeight),St(q,"fill",me)},[()=>Math.min(F(Z).x0,F(Z).x1),()=>Math.abs(F(Z).x1-F(Z).x0),()=>e.scale.apply(F(Q))]),Re(j,q)}),Re(k,I)};let x=Fe(()=>({type:e.outputs.scale.color.type??"linear",domain:e.scale.domain,specialValues:e.scale.specialValues}));Lhe(f,{get xScale(){return F(x)},xAxis:{extendScaleToTicks:!1},get width(){return p()},plotHeight:8,get theme(){return e.theme},children:b,$$slots:{default:!0}})}},$$slots:{default:!0}}),Be(a),Re(o,a)};Pt(r,o=>{e.scale.type=="band"?o(i):o(s,!1)})}Be(n),Re(t,n),$n()}function vO(t,e){let n=r=>typeof r=="string"&&!isNaN(+r);return new Proxy({length:t},{get(r,i){if(n(i))return e(+i)},has(r,i){return n(i)}})}function db(t,e,n){return vO(t.length,r=>e(t[r]))}function R2({proxy:t,data:e},n){let r=e.columns[n],i=t.scale[n];if(r!=null&&i!=null)return db(r,i.apply);let s=n=="x"?t.plotWidth/2:t.plotHeight/2;return vO(e.length,()=>s)}function nGe(t){if(typeof t=="number"){let e=t/2;return([n,r])=>[(n+r)/2-e,(n+r)/2+e]}else if(t!=null){if("gap"in t){let{gap:e,clampToRatio:n}=t;return([r,i])=>{let s=Math.min(e/2,(n??0)*Math.abs(r-i)/2);return r<i?[r+s,i-s]:[r-s,i+s]}}else if("ratio"in t){let e=(1-t.ratio)/2;return([n,r])=>[n+(r-n)*e,r+(n-r)*e]}}}function sw({proxy:t,data:e},n,r){let i=nGe(r),s=e.columns[n],o=t.scale[n];if(s!=null&&o!=null)return i?db(s,f=>i(o.applyBand(f))):db(s,o.applyBand);let a=e.columns[n+"1"],l=e.columns[n+"2"];if(a!=null&&l!=null&&o!=null){let f=a.map((p,g)=>[p,l[g]]);return i?db(f,([p,g])=>i([o.apply(p),o.apply(g)])):db(f,([p,g])=>[o.apply(p),o.apply(g)])}let h=n=="x"?[0,t.plotWidth]:[0,t.plotHeight];return vO(e.length,()=>h)}function rGe({proxy:t,data:e,theme:n}){if(e.columns.color!=null&&t.scale.color!=null)return db(e.columns.color,t.scale.color.apply);let r=n.markColor;return vO(e.length,()=>r)}function iGe({proxy:t,data:e}){if(e.columns.size!=null&&t.scale.size!=null)return db(e.columns.size,t.scale.size.apply);let n=100;return vO(e.length,()=>n)}function _G(t){let e=Object.keys(t.columns).filter(r=>r!="x"&&r!="y"),n=new Map;for(let r=0;r<t.length;r++){let i=JSON.stringify(e.map(o=>t.columns[o][r])),s=n.get(i);s==null?n.set(i,[r]):s.push(r)}return Array.from(n.values())}function EL(t,e){switch(t){case"monotone":return e=="horizontal"?qqe:Vqe;case"basis":return zqe;case"natural":return Zqe;case"step":return Xqe;case"step-before":return Wqe;case"step-after":return Gqe;case"catmull-rom":return Uqe;case"cardinal":return Qqe;case"linear":return bP;default:return console.warn(`Unknown interpolate: ${t}`),bP}}function sGe(t,e,n){let r=n.orientation??"vertical",i=R2(t,"x"),s=R2(t,"y"),o=e.filter(a=>isFinite(i[a])&&isFinite(s[a])).sort((a,l)=>i[a]-i[l]);return she().x(a=>i[a]).y(a=>s[a]).curve(EL(n.interpolate,r))(o)}function oGe(t,e,n){let r=n.orientation??"vertical";if(r=="vertical"){let i=R2(t,"x"),s=sw(t,"y",void 0),o=e.filter(l=>isFinite(i[l])&&isFinite(s[l][0])&&isFinite(s[l][1])).sort((l,h)=>i[l]-i[h]);return nG().x(l=>i[l]).y0(l=>s[l][0]).y1(l=>s[l][1]).curve(EL(n.interpolate,r))(o)}else{let i=sw(t,"x",void 0),s=R2(t,"y"),o=e.filter(l=>isFinite(s[l])&&isFinite(i[l][0])&&isFinite(i[l][1])).sort((l,h)=>s[l]-s[h]);return nG().y(l=>s[l]).x0(l=>i[l][0]).x1(l=>i[l][1]).curve(EL(n.interpolate,r))(o)}}function r3(t,e){let n=rGe(t);function r(s){if(s==null)return"none";if(s!="$encoding")return s.startsWith("$")?t.theme[s.substring(1)]??s:s}let i={"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeCap,"stroke-linejoin":e.strokeJoin,"stroke-opacity":e.strokeOpacity,"fill-opacity":e.fillOpacity,"paint-order":e.paintOrder,opacity:e.opacity,fill:r(e.fillColor),stroke:r(e.strokeColor)};return vO(t.data.length,s=>{let o={...i};return e.fillColor=="$encoding"&&(o.fill=n[s]),e.strokeColor=="$encoding"&&(o.stroke=n[s]),o})}var aGe=$r("<rect></rect>"),lGe=$r("<circle></circle>"),uGe=$r("<line></line>"),cGe=$r("<path></path>"),hGe=$r("<path></path>"),fGe=$r("<g><!></g>");function xG(t,e){Ln(e,!0);let n=Fe(()=>({proxy:e.proxy,data:e.layer.data,theme:e.theme}));var r=fGe(),i=je(r);{var s=a=>{const l=Fe(()=>sw(F(n),"x",e.layer.xDimension)),h=Fe(()=>sw(F(n),"y",e.layer.yDimension)),f=Fe(()=>r3(F(n),e.layer.style));var p=ar(),g=pn(p);Wr(g,17,()=>({length:e.layer.data.length}),Wi,(b,x,k)=>{const T=Fe(()=>{const[Q,Z]=F(l)[k];return{x0:Q,x1:Z}}),I=Fe(()=>{const[Q,Z]=F(h)[k];return{y0:Q,y1:Z}});var M=ar(),B=pn(M);{var j=Q=>{var Z=aGe();oo(Z,(q,J,oe,me)=>({x:q,y:J,width:oe,height:me,...F(f)[k]}),[()=>Math.min(F(T).x0,F(T).x1),()=>Math.min(F(I).y0,F(I).y1),()=>Math.abs(F(T).x0-F(T).x1),()=>Math.abs(F(I).y0-F(I).y1)]),Re(Q,Z)};Pt(B,Q=>{isFinite(F(T).x0)&&isFinite(F(T).x1)&&isFinite(F(I).y0)&&isFinite(F(I).y1)&&Q(j)})}Re(b,M)}),Re(a,p)},o=a=>{var l=ar(),h=pn(l);{var f=g=>{const b=Fe(()=>R2(F(n),"x")),x=Fe(()=>R2(F(n),"y")),k=Fe(()=>r3(F(n),e.layer.style)),T=Fe(()=>iGe(F(n)));var I=ar(),M=pn(I);Wr(M,17,()=>({length:e.layer.data.length}),Wi,(B,j,Q)=>{var Z=ar(),q=pn(Z);{var J=oe=>{var me=lGe();oo(me,ae=>({cx:F(b)[Q],cy:F(x)[Q],r:ae,...F(k)[Q]}),[()=>Math.sqrt(F(T)[Q]/Math.PI)]),Re(oe,me)};Pt(q,oe=>{isFinite(F(b)[Q])&&isFinite(F(x)[Q])&&oe(J)})}Re(B,Z)}),Re(g,I)},p=g=>{var b=ar(),x=pn(b);{var k=I=>{const M=Fe(()=>sw(F(n),"x",e.layer.xDimension)),B=Fe(()=>sw(F(n),"y",e.layer.yDimension)),j=Fe(()=>r3(F(n),e.layer.style));var Q=ar(),Z=pn(Q);Wr(Z,17,()=>({length:e.layer.data.length}),Wi,(q,J,oe)=>{const me=Fe(()=>{const[xe,Se]=F(M)[oe];return{x0:xe,x1:Se}}),ae=Fe(()=>{const[xe,Se]=F(B)[oe];return{y0:xe,y1:Se}});var ce=ar(),se=pn(ce);{var ge=xe=>{var Se=uGe();oo(Se,()=>({x1:F(me).x0,y1:F(ae).y0,x2:F(me).x1,y2:F(ae).y1,...F(j)[oe]})),Re(xe,Se)};Pt(se,xe=>{isFinite(F(me).x0)&&isFinite(F(me).x1)&&isFinite(F(ae).y0)&&isFinite(F(ae).y1)&&xe(ge)})}Re(q,ce)}),Re(I,Q)},T=I=>{var M=ar(),B=pn(M);{var j=Z=>{const q=Fe(()=>r3(F(n),e.layer.style));var J=ar(),oe=pn(J);Wr(oe,17,()=>_G(e.layer.data),Wi,(me,ae)=>{var ce=cGe();oo(ce,se=>({d:se,...F(q)[F(ae)[0]]}),[()=>sGe(F(n),F(ae),e.layer)]),Re(me,ce)}),Re(Z,J)},Q=Z=>{var q=ar(),J=pn(q);{var oe=me=>{const ae=Fe(()=>r3(F(n),e.layer.style));var ce=ar(),se=pn(ce);Wr(se,17,()=>_G(e.layer.data),Wi,(ge,xe)=>{var Se=hGe();oo(Se,De=>({d:De,...F(ae)[F(xe)[0]]}),[()=>oGe(F(n),F(xe),e.layer)]),Re(ge,Se)}),Re(me,ce)};Pt(J,me=>{e.layer.primitive=="area"&&me(oe)},!0)}Re(Z,q)};Pt(B,Z=>{e.layer.primitive=="line"?Z(j):Z(Q,!1)},!0)}Re(I,M)};Pt(x,I=>{e.layer.primitive=="rule"?I(k):I(T,!1)},!0)}Re(g,b)};Pt(h,g=>{e.layer.primitive=="point"?g(f):g(p,!1)},!0)}Re(a,l)};Pt(i,a=>{e.layer.primitive=="rect"?a(s):a(o,!1)})}Be(r),Re(t,r),$n()}var dGe=gt('<span class="flex gap-1 select-none"><span class="text-slate-400 dark:text-slate-500 text-sm"> </span> <!></span>');function pGe(t,e){Ln(e,!0);let n=jn(e,"value",15);const r=["linear","log","symlog"];var i=ar(),s=pn(i);{var o=a=>{var l=dGe(),h=je(l),f=je(h);Be(h);var p=lt(h,2);{let g=Fe(()=>r.map(b=>({value:b,label:b})));tP(p,{get options(){return F(g)},get value(){return n()},onChange:b=>n(b)})}Be(l),on(()=>Pr(f,`${e.label??""}:`)),Re(a,l)};Pt(s,a=>{n()!=null&&n()!="band"&&a(o)})}Re(t,i),$n()}var mGe=gt('<span class="flex gap-1 select-none"><span class="text-slate-400 dark:text-slate-500 text-sm">Normalize:</span> <!></span>'),gGe=gt('<div class="flex flex-wrap gap-2 justify-end flex-wrap"></div>');function yGe(t,e){Ln(e,!0);var n=gGe();Wr(n,21,()=>e.spec.widgets??[],Wi,(r,i)=>{var s=ar(),o=pn(s);{var a=h=>{var f=()=>e.outputs.scale[F(i).channel].type??"linear",p=g=>{e.onSpecChange({scale:{[F(i).channel]:{type:g}}})};{let g=Fe(()=>F(i).channel.toUpperCase());pGe(h,{get label(){return F(g)},get value(){return f()},set value(b){p(b)}})}},l=h=>{var f=ar(),p=pn(f);{var g=b=>{const x=Fe(()=>typeof F(i).layer=="number"?[F(i).layer]:F(i).layer);var k=mGe(),T=lt(je(k),2);{let I=Fe(()=>[{value:null,label:"off"},...(F(i).options??["x","y"]).map(B=>({value:B,label:B.toUpperCase()}))]),M=Fe(()=>e.spec.layers?.[F(x)[0]]?.encoding?.[F(i).attribute]?.normalize??null);tP(T,{get options(){return F(I)},get value(){return F(M)},onChange:B=>{let j=JSON.parse(JSON.stringify(e.spec));for(let Q of F(x))if(j.layers?.[Q]?.encoding?.[F(i).attribute]!=null){let Z=j.layers?.[Q]?.encoding?.[F(i).attribute];Z.normalize=B??void 0}e.onSpecChange(j,"replace")}})}Be(k),Re(b,k)};Pt(p,b=>{F(i).type=="encoding.normalize"&&b(g)},!0)}Re(h,f)};Pt(o,h=>{F(i).type=="scale.type"?h(a):h(l,!1)})}Re(r,s)}),Be(n),Re(t,n),$n()}async function vGe(t,e,n){let r=a=>t.query(a),s=(await r(Vn.describe(Vn.from(e).select({field:n})))).get(0)?.column_type;if(s==null)return;let o=fC(s);if(o=="number"){let a=ao(n,"DOUBLE"),l=await r(Vn.from(e).select({count:Mo(),min:Yw(a),minPositive:Yw(Yv(oD(a,0),a,kn(null))),max:OC(a),mean:mT(a),median:V$(a)}).where(Vy(a))),h=await r(Vn.from(e).select({countNonFinite:Mo()}).where(Od(Kw(Vy(a)),Kp(a))));return{field:n,quantitative:{...l.get(0),...h.get(0)}}}else if(o=="string"){let a=ao(n,"TEXT"),l=Array.from(await r(Vn.from(e).select({value:a,count:Mo()}).where(Rb(a)).groupby(a).orderby(fw(Mo())).limit(1e3))),h=(await r(Vn.from(e).select({count:Mo()}).where(Kp(a)))).get(0).count,{otherCount:f,numOtherLevels:p}=(await r(Vn.from(e).select({otherCount:Mo(),numOtherLevels:ir`COUNT(DISTINCT(${a}))`}).where(Rb(a),Kw(Fb(a,l.map(g=>kn(g.value))))))).get(0);return{field:n,nominal:{levels:l,numOtherLevels:p,otherCount:f,nullCount:h}}}}function bGe({stats:t,scaleType:e,binCount:n}){if(t.quantitative){let r=Phe(t.quantitative,{scale:e,desiredCount:n??20}),i=ao(t.field,"DOUBLE"),s=r.scale.expr(i,r.scale.constant??0),o=r.scale.type=="log"?Yv(wc(Vy(i),oD(i,kn(0))),yT(aa(ka(s,r.binStart),1/r.binSize)),kn(null)):Yv(Vy(i),yT(aa(ka(s,r.binStart),1/r.binSize)),kn(null)),a=x=>Math.floor((r.scale.forward(x,r.scale.constant??0)-r.binStart)/r.binSize),l=x=>r.scale.reverse(x*r.binSize+r.binStart,r.scale.constant??0),h=a(r.scale.type=="log"?t.quantitative.minPositive:t.quantitative.min),f=a(t.quantitative.max),p=[l(h),l(f+1)],g=t.quantitative.countNonFinite>0;r.scale.type=="log"&&t.quantitative.min<0&&(g=!0);let b=x=>{if(typeof x=="string"){if(x=="n/a")return Od(Kw(Vy(i)),Kp(i))}else if(x instanceof Array)if(x.length==2&&typeof x[0]=="number"){let[k,T]=x;if(typeof k=="number"&&typeof T=="number")return Ty(i,[Math.min(k,T),Math.max(k,T)])}else return Od(...x.map(b));return kn(!1)};return{select:o,scale:{type:r.scale.type,constant:r.scale.constant,domain:p,specialValues:g?["n/a"]:[]},predicate:b,order:(x,k)=>{let T=typeof x=="string"?[1,0]:[0,x[0]],I=typeof k=="string"?[1,0]:[0,k[0]];return T[0]!=I[0]?T[0]-I[0]:T[1]-I[1]},field:x=>x==null?"n/a":[l(x),l(x+1)]}}if(t.nominal){n=n??15;let{levels:r,nullCount:i,otherCount:s,numOtherLevels:o}=t.nominal;r.length>n&&(o+=r.length-n,s=r.slice(n).reduce((x,k)=>x+k.count,0),r=r.slice(0,n));let a=`(${o.toLocaleString()} others)`,l="(null)",h=ao(t.field,"TEXT"),f=Yv(Fb(h,r.map(x=>kn(x.value))),h,Yv(Kp(h),kn(l),kn(a))),p=[...s>0?[a]:[],...i>0?[l]:[]],g=x=>x==l?Kp(h):x==a?wc(Kw(Fb(h,r.map(k=>kn(k.value)))),Rb(h)):DK(h,kn(x)),b=r.map(x=>x.value);return{select:f,scale:{type:"band",domain:r.map(x=>x.value),specialValues:p},field:x=>x,predicate:x=>{if(x instanceof Array)return Od(...x.map(k=>g(k)));if(typeof x=="string")return g(x)},order:(x,k)=>{if(typeof x=="string"&&typeof k=="string"){let T=b.indexOf(x);T<0&&(T=b.length+p.indexOf(x));let I=b.indexOf(k);return I<0&&(I=b.length+p.indexOf(k)),T-I}return 0}}}}class _Ge{context;spec;source;cleanupFn;outputs;selections;state;constructor(e,n){this.context=e,this.spec=void 0,this.outputs=gc(void 0),this.state=gc(void 0),this.selections=gc(void 0),this.source={reset:()=>{n?.()}}}async setSpec(e){if(ik(e,this.spec))return;this.cleanup(),this.spec=e;let n=new xGe(this.context,this.spec);if(n.stats=await wGe(n),this.spec!==e)return;let r=OGe(n,this.outputs,this.selections),i,s=xC([this.selections,this.state],o=>o).subscribe(([o,a])=>{for(let l of o??[]){let h=a?.[l.key],f=l.clause(h);i&&i.selection===l&&ik(i.value,h)||(i={selection:l,value:h},f?this.context.filter.update({source:this.source,clients:new Set(r),...f}):this.context.filter.update({source:this.source,clients:new Set(r),value:null,predicate:null}))}});this.cleanupFn=()=>{this.source.reset(),this.state.set(void 0),s();for(let o of r)try{o.destroy()}catch{}}}cleanup(){this.cleanupFn?.(),this.cleanupFn=void 0,this.spec=void 0}destroy(){this.cleanup(),this.outputs.set(void 0),this.state.set(void 0),this.selections.set(void 0)}}class xGe{constructor(e,n,r={}){this.context=e,this.spec=n,this.stats=r}fieldExpr(e){let n={table:this.context.table,filter:"(true)"};return typeof e=="string"?It(e):ir`${OG(e.sql,n)}`}fromExpr(e,n){let r={table:this.context.table,filter:n??"(true)"};return typeof e=="string"?new j$(e):ir`(${OG(e.sql,r)})`}}function $he(t,e){return JSON.stringify([t.toString(),e])}async function wGe(t){let e={};(t.spec.layers??[]).forEach(i=>{let s=t.fromExpr(i.from??t.context.table);Object.entries(i.encoding??{}).forEach(([o,a])=>{if("field"in a&&!("aggregate"in a)){let l=$he(s,a.field);e[l]=t.context.cache.value("field-stats/"+l,()=>vGe(t.context.coordinator,s,t.fieldExpr(a.field)))}})});let n=Object.entries(e),r=await Promise.all(n.map(i=>i[1]));return Object.fromEntries(n.map(([i,s],o)=>[i,r[o]]))}function OGe(t,e,n){let r=[],i={},s=[];return(t.spec.layers??[]).forEach((a,l)=>{let{client:h,outputs:f,scaleHints:p}=SGe(t,a,l);for(let g in p)i[g]?i[g]=Nhe(i[g],p[g]):i[g]=p[g];h!=null&&r.push(h),s.push(f)}),xC(s,a=>a).subscribe(a=>{e.set(AGe(t.spec,i,a))}),n.set(EGe(t.spec,i)),r}function SGe(t,e,n){let r={},i={},s={},o={},a=[],l={},h=t.fromExpr(e.from??t.context.table),f=!1;Object.entries(e.encoding??{}).forEach(([g,b])=>{("aggregate"in b||"field"in b&&b.bin!=null)&&(f=!0)}),Object.entries(e.encoding??{}).forEach(([g,b])=>{let x=Bhe(g),k=kGe(t,h,x,b,f);k!=null&&(k.select!=null&&(s[g]=k.select),k.normalize!=null&&(o[g]=k.normalize),k.grouping!=null&&(a=a.concat(k.grouping)),k.mapper!=null&&(i[g]=k.mapper),k.order!=null&&(l[g]=k.order),x!=null&&k.scale!=null&&(r[x]==null?r[x]=k.scale:r[x]=Nhe(r[x],k.scale)))});let p=gc(void 0);if(Object.keys(s).length==0){let g={length:1,columns:{}};for(let x in i)g.columns[x]=[i[x](void 0)];return{outputs:gc(TG(e,n,g,l)),scaleHints:r}}else{let g=e.filter=="$filter";typeof e.from=="object"&&e.from.sql.indexOf("$filter")>=0&&(g=!0);let b=kC({coordinator:t.context.coordinator,selection:g?t.context.filter:void 0,query:x=>{let k=Vn.from(t.fromExpr(e.from??t.context.table,uQ(x))).select(s).where(e.filter=="$filter"?x:[]).groupby(...a);return Object.keys(o).length==0?k:Vn.from(k).select(Object.fromEntries(Object.entries(s).map(([T,I])=>[T,o[T]!=null?ir`${It(T)} / (SUM(${It(T)}) OVER (PARTITION BY ${It(o[T])}))`:T])))},queryResult:x=>{let k={length:x.numRows,columns:{}};for(let T of x.names)k.columns[T]=Array.from(x.getChild(T));for(let T in i)k.columns[T]?k.columns[T]=k.columns[T].map(i[T]):k.columns[T]=Array.from({length:k.length},()=>i[T](void 0));p.set(TG(e,n,k,l))}});return{outputs:p,client:b,scaleHints:r}}}const wG={min:t=>Yw(t),max:t=>OC(t),mean:t=>mT(t),average:t=>mT(t),median:t=>V$(t),stdev:t=>hye(t),stdevp:t=>fye(t),variance:t=>dye(t),variancep:t=>pye(t),sum:t=>Zo(t),product:t=>oye(t),quantile:(t,{quantile:e})=>aye(t,e??.5)};function kGe(t,e,n,r,i){if("aggregate"in r)switch(r.aggregate){case"count":return{select:Mo(),scale:{title:"Count",kind:"quantitative",includeZero:!0},normalize:r.normalize};case"ecdf-value":if(r.field!=null){let s=SG(),o=ao(t.fieldExpr(r.field),"DOUBLE");return{select:ir`unnest(quantile_disc(${o}, ${s}))`,scale:{kind:"quantitative",predicate:a=>kG(o,a),title:a7(r.field)},normalize:r.normalize}}else{console.warn(`Invalid spec: aggregate '${r.aggregate}' require a field`);return}case"ecdf-rank":{let s=SG();return{select:ir`unnest(${s})`,scale:{kind:"quantitative",domain:[0,1],title:"Quantile"},normalize:r.normalize}}default:{if(typeof r.aggregate=="string"&&wG[r.aggregate]){let s=wG[r.aggregate];if(r.field!=null){let o=t.fieldExpr(r.field);return{select:s(o,{quantile:r.quantile}).where(Vy(o)),scale:{kind:"quantitative",predicate:a=>kG(o,a),title:`${r.aggregate.toUpperCase()}(${a7(r.field)})`},normalize:r.normalize}}else{console.warn(`Invalid spec: aggregate '${r.aggregate}' require a field`);return}}if(typeof r.aggregate=="object"&&"sql"in r.aggregate)return{select:ir`${r.aggregate.sql}`,scale:{kind:"quantitative"},normalize:r.normalize};console.warn(`Invalid spec: unknown aggregate '${r.aggregate}'`);return}}else if("field"in r){let s=r.bin;s==null&&i&&n!=null&&(s={});let o=t.stats[$he(e,r.field)];if(!o)return;if(s){let a=bGe({stats:o,scaleType:n?t.spec.scale?.[n]?.type:void 0,binCount:s.desiredCount??(n=="x"||n=="y"?20:5)});if(a==null){console.warn("Invalid spec: unsupported data type");return}return{select:a.select,grouping:[a.select],scale:n?{...a.scale,kind:a.scale.type=="band"?"nominal":"quantitative",predicate:a.predicate,title:a7(r.field)}:void 0,mapper:a.field,order:a.order}}else{let a=t.fieldExpr(r.field);return{select:a,grouping:i?[a]:[],scale:{kind:o.quantitative?"quantitative":"nominal"}}}}else if("value"in r)return{mapper:()=>r.value,scale:typeof r.value=="string"?{kind:"nominal",domain:[r.value]}:typeof r.value=="number"?{kind:"quantitative",domain:[r.value]}:void 0}}function OG(t,e){return t.replace(/\$([a-zA-Z][a-zA-Z0-9\_]*)/g,(n,r)=>e[r]!=null?e[r]:n)}function a7(t){return typeof t=="string"?t:t.sql}function SG(){let t=[],e=200;for(let n=0;n<=e;n++)t.push(n/e);return ir`[${t.map(n=>kn(n)).join(",")}]::DOUBLE[]`}function kG(t,e){if(e instanceof Array&&e.length==2&&typeof e[0]=="number"){let[n,r]=e;if(typeof n=="number"&&typeof r=="number")return Ty(t,[Math.min(n,r),Math.max(n,r)])}}function Bhe(t){switch(t){case"x":case"x1":case"x2":return"x";case"y":case"y1":case"y2":return"y";case"color":return"color";case"size":return"size"}}function Nhe(t,e){let n=Array.from(new Set([t.title,e.title].filter(i=>i!=null&&i.trim()!=""))),r=n.length>0?n.join(", "):void 0;return{kind:e.kind,type:t.type??e.type,domain:(t.domain??[]).concat(e.domain??[]),specialValues:(t.specialValues??[]).concat(e.specialValues??[]),title:r,includeZero:t.includeZero===!0||e.includeZero===!0?!0:void 0,predicate:t.predicate??e.predicate}}function CG(t){return yze(t,e=>typeof e=="number"&&isFinite(e)?e:void 0)}function CGe(t,e,n,r){switch(e.kind){case"quantitative":{let i=[e.domain??[],...n].map(l=>CG(l.flat())).flat(),[s,o]=CG(i);return(s==null||o==null||!isFinite(s)||!isFinite(o))&&(s=0,o=1),s==o&&(s>0?s=0:s<0?o=0:o=1),(r=="size"||e.includeZero===!0)&&(s>0?s=0:o<0&&(o=0)),{type:t.type??e.type??"linear",domain:t.domain??[s,o],specialValues:e.specialValues,constant:t.constant,range:t.range}}case"nominal":{let i=[e.domain??[],...n].map(a=>new Set(a.flat().filter(l=>typeof l=="string"))).flatMap(a=>Array.from(a)),s=new Set(e.specialValues??[]),o=Array.from(new Set(i)).filter(a=>!s.has(a));return{type:t.type??e.type??"band",domain:t.domain??o,specialValues:e.specialValues,range:t.range}}default:return{type:"linear",domain:[0,1]}}}function AG(t,e,n,r){let i=g=>JSON.stringify(g),s=g=>JSON.parse(g),o=t.columns[e].slice(),a=t.columns[n].slice(),l=Object.entries(t.columns).filter(([g,b])=>g!=e&&g!=n).map(([g,b])=>[g,b.slice()]),h=new Set,f=new Set,p=new Set;for(let g=0;g<o.length;g++){let b=i(o[g]),x=i(l.map(([k,T])=>T[g]));h.add(b),f.add(x),p.add(b+","+x)}for(let g of h)for(let b of f)if(!p.has(g+","+b)){o.push(s(g)),a.push(r);let x=s(b);for(let k=0;k<l.length;k++)l[k][1].push(x[k])}return{length:o.length,columns:{[e]:o,[n]:a,...Object.fromEntries(l)}}}function G4(t,e,n){let r=e=="x"?"y":"x",i=new Map;for(let o=0;o<t.length;o++){let a=t.columns[e]!=null?JSON.stringify(t.columns[e][o]):"",l=i.get(a);l==null?i.set(a,[o]):l.push(o)}let s=t.columns[r].slice();for(let o of i.values()){o.sort((l,h)=>{for(let f in n){let p=t.columns[f];if(p==null)continue;let g=n[f](p[l],p[h]);if(g!=0)return g}return l-h});let a=0;for(let l of o){let h=s[l];if(typeof h!="number"||!isFinite(h)){s[l]=null;continue}let f=a+h;s[l]=[a,f],a=f}}return{length:t.length,columns:{...t.columns,[r]:s}}}function EG(t){return t.encoding?.x!=null&&"aggregate"in t.encoding.x?"horizontal":"vertical"}function TG(t,e,n,r){let i={key:e.toString(),zIndex:t.zIndex??0,interpolate:t.interpolate??"linear",orientation:t.orientation,xDimension:t.width,yDimension:t.height,data:n};switch(t.mark){case"bar":switch(t.orientation??EG(t)){case"horizontal":i.data=G4(n,"y",r),i.yDimension=t.height??{gap:1,clampToRatio:.1},i.orientation="horizontal";break;case"vertical":i.data=G4(n,"x",r),i.xDimension=t.width??{gap:1,clampToRatio:.1},i.orientation="vertical";break;default:console.warn(`Invalid orientation: '${t.orientation}'`);return}return{...i,primitive:"rect",style:{fillColor:"$encoding",...t.style}};case"point":return{...i,primitive:t.mark,style:{fillColor:"$encoding",...t.style}};case"rect":return{...i,primitive:t.mark,style:{fillColor:"$encoding",...t.style}};case"line":return{...i,primitive:t.mark,style:{strokeColor:"$encoding",strokeWidth:2,strokeJoin:"round",strokeCap:"round",...t.style}};case"area":switch(t.orientation??EG(t)){case"horizontal":i.data=G4(AG(n,"y","x",0),"y",r),i.orientation="horizontal";break;case"vertical":i.data=G4(AG(n,"x","y",0),"x",r),i.orientation="vertical";break;default:console.warn(`Invalid orientation: '${t.orientation}'`);return}return{...i,primitive:"area",style:{fillColor:"$encoding",...t.style}};case"rule":return t.orientation=="vertical"?i.xDimension=0:t.orientation=="horizontal"&&(i.yDimension=0),{...i,primitive:t.mark,style:{strokeColor:"$encoding",strokeWidth:2,...t.style}};default:console.warn(`Invalid mark: '${t.mark}'`);return}}function AGe(t,e,n){let r={},i={};(t.layers??[]).forEach((s,o)=>{Object.entries(s.encoding??{}).forEach(([a,l])=>{if(n[o]==null)return;let h=Bhe(a);if(h!=null){let f=n[o].data.columns[a];f!=null&&(i[h]==null?i[h]=[f]:i[h].push(f))}})});for(let s of Object.keys(e))r[s]=CGe(t.scale?.[s]??{},e[s],i[s]??[],s);return{scale:r,axis:{x:{title:e.x?.title,...t.axis?.x??{}},y:{title:e.y?.title,...t.axis?.y??{}}},layers:n.filter(s=>s!=null)}}function EGe(t,e){let n=[];return Object.entries(t.selection??{}).forEach(([r,i])=>{if("encoding"in i){let s,o;(i.encoding=="x"||i.encoding=="xy")&&e.x?.predicate!=null&&(s=e.x.predicate),(i.encoding=="y"||i.encoding=="xy")&&e.y?.predicate!=null&&(o=e.y.predicate),n.push({key:r,type:i.encoding,clause:a=>{if(a==null)return;let l=wc(...[s?.(a?.x),o?.(a?.y)].filter(h=>h!=null));return{value:a,predicate:l}}})}}),n}var TGe=gt('<div class="text-slate-400 mb-1 select-none truncate"> </div>'),PGe=gt("<!> <!>",1),DGe=gt('<div class="text-slate-400 mb-1 select-none text-right truncate"> </div>'),IGe=gt('<div class="flex-1"><div class="min-w-32 max-w-72"><!></div></div>'),MGe=gt('<div class="flex-none flex items-start gap-4 justify-end"><!> <!></div>'),RGe=gt('<div class="flex-1 flex flex-col"><!> <!> <!></div>  <!>',1);function FGe(t,e){Ln(e,!0);const n=()=>qo(l,"$colorScheme",o),r=()=>qo(h,"$themeConfig",o),i=()=>qo(g,"$outputs",o),s=()=>qo(b,"$selections",o),[o,a]=Cf();let{colorScheme:l,theme:h}=e.context,f=Fe(()=>lQ(n(),r())),p=new _Ge(e.context,()=>{e.onStateChange({},"replace")}),{outputs:g,selections:b}=p;VP(()=>{p.destroy()}),Oo(()=>{p.setSpec(e.spec)}),Oo(()=>{p.state.set(e.state)});let x=Fe(()=>i()?.scale.color?TWe(i().scale.color,F(f)):void 0),k=Fe(()=>i()?.scale.size?PWe(i().scale.size,F(f)):void 0),T=Fe(()=>i()?.layers.sort((B,j)=>B.zIndex-j.zIndex)??[]),I=Fe(()=>e.height!=null),M=160;qb(t,{get width(){return e.width},get height(){return e.height},class:"flex flex-col gap-2",children:(B,j)=>{const Q=Fe(()=>F(x)!=null),Z=Fe(()=>(e.spec.widgets?.length??0)>0);var q=RGe(),J=pn(q),oe=je(J);{var me=Se=>{var De=TGe(),He=je(De);Be(De),on(()=>Pr(He,`â ${i()?.axis.y.title??""}`)),Re(Se,De)};Pt(oe,Se=>{i()?.axis.y.title!=null&&Se(me)})}var ae=lt(oe,2);Dhe(ae,{get flexHeight(){return F(I)},children:(De,He=Ys,Ue=Ys)=>{var yt=ar(),We=pn(yt);{var at=ut=>{{const wt=(Dn,Ut=Ys)=>{var At=ar(),zt=pn(At);Wr(zt,17,()=>F(T).filter(nn=>nn.zIndex<0),nn=>nn.key,(nn,Ze)=>{xG(nn,{get proxy(){return Ut()},get theme(){return F(f)},get layer(){return F(Ze)}})}),Re(Dn,At)},ot=(Dn,Ut=Ys)=>{var At=PGe(),zt=pn(At);Wr(zt,17,()=>F(T).filter(Ze=>!(Ze.zIndex<0)),Ze=>Ze.key,(Ze,cn)=>{xG(Ze,{get proxy(){return Ut()},get theme(){return F(f)},get layer(){return F(cn)}})});var nn=lt(zt,2);Wr(nn,1,()=>s()??[],Wi,(Ze,cn)=>{ZWe(Ze,{get proxy(){return Ut()},get mode(){return F(cn).type},get value(){return e.state[F(cn).key]},get theme(){return F(f)},onChange:Fn=>{switch(F(cn).type){case"x":e.onStateChange({[F(cn).key]:Fn?.x!=null?{x:Fn.x}:void 0});break;case"y":e.onStateChange({[F(cn).key]:Fn?.y!=null?{y:Fn.y}:void 0});break;case"xy":e.onStateChange({[F(cn).key]:Fn!=null&&Fn.x!=null&&Fn.y!=null?{x:Fn.x,y:Fn.y}:void 0});break}}})}),Re(Dn,At)};let dt=Fe(()=>F(I)?Ue():void 0),Yt=Fe(()=>e.spec.plotSize?.width??void 0),Ft=Fe(()=>e.spec.plotSize?.height??(e.spec.plotSize?.aspectRatio==null&&!F(I)?M:void 0)),Ot=Fe(()=>e.spec.plotSize?.aspectRatio),Kt=Fe(()=>({color:F(x),size:F(k)}));Lhe(ut,{get width(){return He()},get height(){return F(dt)},get plotWidth(){return F(Yt)},get plotHeight(){return F(Ft)},get plotAspectRatio(){return F(Ot)},get xScale(){return i().scale.x},get yScale(){return i().scale.y},get xAxis(){return i().axis.x},get yAxis(){return i().axis.y},get otherScales(){return F(Kt)},get theme(){return F(f)},childrenBelow:wt,children:ot,$$slots:{childrenBelow:!0,default:!0}})}};Pt(We,ut=>{i()!=null&&ut(at)})}Re(De,yt)},$$slots:{default:!0}});var ce=lt(ae,2);{var se=Se=>{var De=DGe(),He=je(De);Be(De),on(()=>Pr(He,`${i()?.axis.x.title??""} â`)),Re(Se,De)};Pt(ce,Se=>{i()?.axis.x.title!=null&&Se(se)})}Be(J);var ge=lt(J,2);{var xe=Se=>{var De=MGe(),He=je(De);{var Ue=at=>{var ut=IGe(),wt=je(ut),ot=je(wt);tGe(ot,{get scale(){return F(x)},get outputs(){return i()},get theme(){return F(f)}}),Be(wt),Be(ut),Re(at,ut)};Pt(He,at=>{F(Q)&&at(Ue)})}var yt=lt(He,2);{var We=at=>{yGe(at,{get spec(){return e.spec},get outputs(){return i()},get onSpecChange(){return e.onSpecChange}})};Pt(yt,at=>{F(Z)&&at(We)})}Be(De),Re(Se,De)};Pt(ge,Se=>{i()&&(F(Q)||F(Z))&&Se(xe)})}Re(B,q)},$$slots:{default:!0}}),$n(),a()}const uu=2,wI=4,pQ=8,A0=16,E0=32,b_=64,OI=128,Yl=1024,Dc=2048,T0=4096,bh=8192,r0=16384,mQ=32768,Kb=65536,PG=1<<17,zhe=1<<18,bO=1<<19,LGe=1<<20,yf=256,CP=512,AP=32768,TL=1<<21,gQ=1<<22,Ky=1<<23,Ab=Symbol("$state"),Qhe=Symbol("legacy props"),$Ge=Symbol(""),ow=new class extends Error{name="StaleReactionError";message="The reaction that called `getAbortSignal()` was re-run or destroyed"},yQ=3,_O=8,BGe=!1;var vQ=Array.isArray,NGe=Array.prototype.indexOf,bQ=Array.from,jhe=Object.defineProperty,Nw=Object.getOwnPropertyDescriptor,Uhe=Object.getOwnPropertyDescriptors,Vhe=Object.prototype,zGe=Array.prototype,SI=Object.getPrototypeOf,DG=Object.isExtensible;function QGe(t){for(var e=0;e<t.length;e++)t[e]()}function qhe(){var t,e,n=new Promise((r,i)=>{t=r,e=i});return{promise:n,resolve:t,reject:e}}function Zhe(t){return t===this.v}function Xhe(t,e){return t!=t?e==e:t!==e||t!==null&&typeof t=="object"||typeof t=="function"}function Whe(t){return!Xhe(t,this.v)}function Ghe(t){throw new Error("https://svelte.dev/e/lifecycle_outside_component")}function jGe(){throw new Error("https://svelte.dev/e/async_derived_orphan")}function UGe(t){throw new Error("https://svelte.dev/e/effect_in_teardown")}function VGe(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function qGe(t){throw new Error("https://svelte.dev/e/effect_orphan")}function ZGe(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function XGe(){throw new Error("https://svelte.dev/e/hydration_failed")}function WGe(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function GGe(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function YGe(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}function HGe(){throw new Error("https://svelte.dev/e/svelte_boundary_reset_onerror")}let uA=!1,KGe=!1;function JGe(){uA=!0}const _Q=1,xQ=2,Yhe=4,eYe=8,tYe=16,nYe=1,rYe=2,Hhe="[",kI="[!",wQ="]",F2={},ql=Symbol(),iYe="http://www.w3.org/1999/xhtml",sYe=[];function Khe(t,e=!1,n=!1){return G5(t,new Map,"",sYe,null,n)}function G5(t,e,n,r,i=null,s=!1){if(typeof t=="object"&&t!==null){var o=e.get(t);if(o!==void 0)return o;if(t instanceof Map)return new Map(t);if(t instanceof Set)return new Set(t);if(vQ(t)){var a=Array(t.length);e.set(t,a),i!==null&&e.set(i,a);for(var l=0;l<t.length;l+=1){var h=t[l];l in t&&(a[l]=G5(h,e,n,r,null,s))}return a}if(SI(t)===Vhe){a={},e.set(t,a),i!==null&&e.set(i,a);for(var f in t)a[f]=G5(t[f],e,n,r,null,s);return a}if(t instanceof Date)return structuredClone(t);if(typeof t.toJSON=="function"&&!s)return G5(t.toJSON(),e,n,r,t)}if(t instanceof EventTarget)return t;try{return structuredClone(t)}catch{return t}}let Bo=null;function L2(t){Bo=t}function ac(t){return Jhe().get(t)}function nf(t,e){return Jhe().set(t,e),e}function Xo(t,e=!1,n){Bo={p:Bo,i:!1,c:null,e:null,s:t,x:null,l:uA&&!e?{s:null,u:null,$:[]}:null}}function Wo(t){var e=Bo,n=e.e;if(n!==null){e.e=null;for(var r of n)Ofe(r)}return e.i=!0,Bo=e.p,{}}function xO(){return!uA||Bo!==null&&Bo.l===null}function Jhe(t){return Bo===null&&Ghe(),Bo.c??=new Map(oYe(Bo)||void 0)}function oYe(t){let e=t.p;for(;e!==null;){const n=e.c;if(n!==null)return n;e=e.p}return null}let pb=[];function efe(){var t=pb;pb=[],QGe(t)}function __(t){if(pb.length===0&&!ek){var e=pb;queueMicrotask(()=>{e===pb&&efe()})}pb.push(t)}function aYe(){for(;pb.length>0;)efe()}function CI(t){console.warn("https://svelte.dev/e/hydration_mismatch")}function lYe(){console.warn("https://svelte.dev/e/svelte_boundary_reset_noop")}let Ii=!1;function qg(t){Ii=t}let us;function Sc(t){if(t===null)throw CI(),F2;return us=t}function cA(){return Sc(Mm(us))}function ls(t){if(Ii){if(Mm(us)!==null)throw CI(),F2;us=t}}function uYe(t=1){if(Ii){for(var e=t,n=us;e--;)n=Mm(n);us=n}}function EP(t=!0){for(var e=0,n=us;;){if(n.nodeType===_O){var r=n.data;if(r===wQ){if(e===0)return n;e-=1}else(r===Hhe||r===kI)&&(e+=1)}var i=Mm(n);t&&n.remove(),n=i}}function tfe(t){if(!t||t.nodeType!==_O)throw CI(),F2;return t.data}function Hl(t){if(typeof t!="object"||t===null||Ab in t)return t;const e=SI(t);if(e!==Vhe&&e!==zGe)return t;var n=new Map,r=vQ(t),i=Nn(0),s=Eb,o=a=>{if(Eb===s)return a();var l=Oi,h=Eb;xc(null),LG(s);var f=a();return xc(l),LG(h),f};return r&&n.set("length",Nn(t.length)),new Proxy(t,{defineProperty(a,l,h){(!("value"in h)||h.configurable===!1||h.enumerable===!1||h.writable===!1)&&WGe();var f=n.get(l);return f===void 0?f=o(()=>{var p=Nn(h.value);return n.set(l,p),p}):Rt(f,h.value,!0),!0},deleteProperty(a,l){var h=n.get(l);if(h===void 0){if(l in a){const f=o(()=>Nn(ql));n.set(l,f),tk(i)}}else Rt(h,ql),tk(i);return!0},get(a,l,h){if(l===Ab)return t;var f=n.get(l),p=l in a;if(f===void 0&&(!p||Nw(a,l)?.writable)&&(f=o(()=>{var b=Hl(p?a[l]:ql),x=Nn(b);return x}),n.set(l,f)),f!==void 0){var g=Pe(f);return g===ql?void 0:g}return Reflect.get(a,l,h)},getOwnPropertyDescriptor(a,l){var h=Reflect.getOwnPropertyDescriptor(a,l);if(h&&"value"in h){var f=n.get(l);f&&(h.value=Pe(f))}else if(h===void 0){var p=n.get(l),g=p?.v;if(p!==void 0&&g!==ql)return{enumerable:!0,configurable:!0,value:g,writable:!0}}return h},has(a,l){if(l===Ab)return!0;var h=n.get(l),f=h!==void 0&&h.v!==ql||Reflect.has(a,l);if(h!==void 0||mi!==null&&(!f||Nw(a,l)?.writable)){h===void 0&&(h=o(()=>{var g=f?Hl(a[l]):ql,b=Nn(g);return b}),n.set(l,h));var p=Pe(h);if(p===ql)return!1}return f},set(a,l,h,f){var p=n.get(l),g=l in a;if(r&&l==="length")for(var b=h;b<p.v;b+=1){var x=n.get(b+"");x!==void 0?Rt(x,ql):b in a&&(x=o(()=>Nn(ql)),n.set(b+"",x))}if(p===void 0)(!g||Nw(a,l)?.writable)&&(p=o(()=>Nn(void 0)),Rt(p,Hl(h)),n.set(l,p));else{g=p.v!==ql;var k=o(()=>Hl(h));Rt(p,k)}var T=Reflect.getOwnPropertyDescriptor(a,l);if(T?.set&&T.set.call(f,h),!g){if(r&&typeof l=="string"){var I=n.get("length"),M=Number(l);Number.isInteger(M)&&M>=I.v&&Rt(I,M+1)}tk(i)}return!0},ownKeys(a){Pe(i);var l=Reflect.ownKeys(a).filter(p=>{var g=n.get(p);return g===void 0||g.v!==ql});for(var[h,f]of n)f.v!==ql&&!(h in a)&&l.push(h);return l},setPrototypeOf(){GGe()}})}var PL,nfe,rfe,ife;function DL(){if(PL===void 0){PL=window,nfe=/Firefox/.test(navigator.userAgent);var t=Element.prototype,e=Node.prototype,n=Text.prototype;rfe=Nw(e,"firstChild").get,ife=Nw(e,"nextSibling").get,DG(t)&&(t.__click=void 0,t.__className=void 0,t.__attributes=null,t.__style=void 0,t.__e=void 0),DG(n)&&(n.__t=void 0)}}function bm(t=""){return document.createTextNode(t)}function Jb(t){return rfe.call(t)}function Mm(t){return ife.call(t)}function _s(t,e){if(!Ii)return Jb(t);var n=Jb(us);if(n===null)n=us.appendChild(bm());else if(e&&n.nodeType!==yQ){var r=bm();return n?.before(r),Sc(r),r}return Sc(n),n}function dh(t,e=!1){if(!Ii){var n=Jb(t);return n instanceof Comment&&n.data===""?Mm(n):n}if(e&&us?.nodeType!==yQ){var r=bm();return us?.before(r),Sc(r),r}return us}function hf(t,e=1,n=!1){let r=Ii?us:t;for(var i;e--;)i=r,r=Mm(r);if(!Ii)return r;if(n&&r?.nodeType!==yQ){var s=bm();return r===null?i?.after(s):r.before(s),Sc(s),s}return Sc(r),r}function sfe(t){t.textContent=""}function cYe(){return!1}function ofe(t){var e=mi;if(e===null)return Oi.f|=Ky,t;if((e.f&mQ)===0){if((e.f&OI)===0)throw t;e.b.error(t)}else $2(t,e)}function $2(t,e){for(;e!==null;){if((e.f&OI)!==0)try{e.b.error(t);return}catch(n){t=n}e=e.parent}throw t}const Y4=new Set;let Fa=null,_d=null,Qp=[],AI=null,IL=!1,ek=!1;class Yp{committed=!1;current=new Map;previous=new Map;#e=new Set;#t=new Set;#n=0;#r=0;#l=null;#a=[];#i=[];skipped_effects=new Set;is_fork=!1;process(e){Qp=[],this.apply();var n={parent:null,effect:null,effects:[],render_effects:[],block_effects:[]};for(const r of e)this.#s(r,n);this.is_fork||this.#u(),this.#r>0||this.is_fork?(this.#o(n.effects),this.#o(n.render_effects),this.#o(n.block_effects)):(Fa=null,IG(n.render_effects),IG(n.effects),this.#l?.resolve()),_d=null}#s(e,n){e.f^=Yl;for(var r=e.first;r!==null;){var i=r.f,s=(i&(E0|b_))!==0,o=s&&(i&Yl)!==0,a=o||(i&bh)!==0||this.skipped_effects.has(r);if((r.f&OI)!==0&&r.b?.is_pending()&&(n={parent:n,effect:r,effects:[],render_effects:[],block_effects:[]}),!a&&r.fn!==null){s?r.f^=Yl:(i&wI)!==0?n.effects.push(r):hA(r)&&((r.f&A0)!==0&&n.block_effects.push(r),mC(r));var l=r.first;if(l!==null){r=l;continue}}var h=r.parent;for(r=r.next;r===null&&h!==null;)h===n.effect&&(this.#o(n.effects),this.#o(n.render_effects),this.#o(n.block_effects),n=n.parent),r=h.next,h=h.parent}}#o(e){for(const n of e)((n.f&Dc)!==0?this.#a:this.#i).push(n),ru(n,Yl)}capture(e,n){this.previous.has(e)||this.previous.set(e,n),(e.f&Ky)===0&&(this.current.set(e,e.v),_d?.set(e,e.v))}activate(){Fa=this,this.apply()}deactivate(){Fa=null,_d=null}flush(){if(this.activate(),Qp.length>0){if(afe(),Fa!==null&&Fa!==this)return}else this.#n===0&&this.process([]);this.deactivate()}discard(){for(const e of this.#t)e(this);this.#t.clear()}#u(){if(this.#r===0){for(const e of this.#e)e();this.#e.clear()}this.#n===0&&this.#c()}#c(){if(Y4.size>1){this.previous.clear();var e=_d,n=!0,r={parent:null,effect:null,effects:[],render_effects:[],block_effects:[]};for(const i of Y4){if(i===this){n=!1;continue}const s=[];for(const[a,l]of this.current){if(i.current.has(a))if(n&&l!==i.current.get(a))i.current.set(a,l);else continue;s.push(a)}if(s.length===0)continue;const o=[...i.current.keys()].filter(a=>!this.current.has(a));if(o.length>0){const a=new Set,l=new Map;for(const h of s)lfe(h,o,a,l);if(Qp.length>0){Fa=i,i.apply();for(const h of Qp)i.#s(h,r);Qp=[],i.deactivate()}}}Fa=null,_d=e}this.committed=!0,Y4.delete(this)}increment(e){this.#n+=1,e&&(this.#r+=1)}decrement(e){this.#n-=1,e&&(this.#r-=1),this.revive()}revive(){for(const e of this.#a)ru(e,Dc),e_(e);for(const e of this.#i)ru(e,T0),e_(e);this.#a=[],this.#i=[],this.flush()}oncommit(e){this.#e.add(e)}ondiscard(e){this.#t.add(e)}settled(){return(this.#l??=qhe()).promise}static ensure(){if(Fa===null){const e=Fa=new Yp;Y4.add(Fa),ek||Yp.enqueue(()=>{Fa===e&&e.flush()})}return Fa}static enqueue(e){__(e)}apply(){}}function hYe(t){var e=ek;ek=!0;try{for(var n;;){if(aYe(),Qp.length===0&&(Fa?.flush(),Qp.length===0))return AI=null,n;afe()}}finally{ek=e}}function afe(){var t=zw;IL=!0;try{var e=0;for(RG(!0);Qp.length>0;){var n=Yp.ensure();if(e++>1e3){var r,i;fYe()}n.process(Qp),Jy.clear()}}finally{IL=!1,RG(t),AI=null}}function fYe(){try{ZGe()}catch(t){$2(t,AI)}}let Eg=null;function IG(t){var e=t.length;if(e!==0){for(var n=0;n<e;){var r=t[n++];if((r.f&(r0|bh))===0&&hA(r)&&(Eg=new Set,mC(r),r.deps===null&&r.first===null&&r.nodes_start===null&&(r.teardown===null&&r.ac===null?Cfe(r):r.fn=null),Eg?.size>0)){Jy.clear();for(const i of Eg){if((i.f&(r0|bh))!==0)continue;const s=[i];let o=i.parent;for(;o!==null;)Eg.has(o)&&(Eg.delete(o),s.push(o)),o=o.parent;for(let a=s.length-1;a>=0;a--){const l=s[a];(l.f&(r0|bh))===0&&mC(l)}}Eg.clear()}}Eg=null}}function lfe(t,e,n,r){if(!n.has(t)&&(n.add(t),t.reactions!==null))for(const i of t.reactions){const s=i.f;(s&uu)!==0?lfe(i,e,n,r):(s&(gQ|A0))!==0&&(s&Dc)===0&&ufe(i,e,r)&&(ru(i,Dc),e_(i))}}function ufe(t,e,n){const r=n.get(t);if(r!==void 0)return r;if(t.deps!==null)for(const i of t.deps){if(e.includes(i))return!0;if((i.f&uu)!==0&&ufe(i,e,n))return n.set(i,!0),!0}return n.set(t,!1),!1}function e_(t){for(var e=AI=t;e.parent!==null;){e=e.parent;var n=e.f;if(IL&&e===mi&&(n&A0)!==0&&(n&zhe)===0)return;if((n&(b_|E0))!==0){if((n&Yl)===0)return;e.f^=Yl}}Qp.push(e)}function dYe(t){let e=0,n=t_(0),r;return()=>{TYe()&&(Pe(n),kQ(()=>(e===0&&(r=fA(()=>t(()=>tk(n)))),e+=1,()=>{__(()=>{e-=1,e===0&&(r?.(),r=void 0,tk(n))})})))}}var pYe=Kb|bO|OI;function mYe(t,e,n){new gYe(t,e,n)}class gYe{parent;#e=!1;#t;#n=Ii?us:null;#r;#l;#a;#i=null;#s=null;#o=null;#u=null;#c=null;#d=0;#h=0;#p=!1;#f=null;#y=dYe(()=>(this.#f=t_(this.#d),()=>{this.#f=null}));constructor(e,n,r){this.#t=e,this.#r=n,this.#l=r,this.parent=mi.b,this.#e=!!this.#r.pending,this.#a=pA(()=>{if(mi.b=this,Ii){const s=this.#n;cA(),s.nodeType===_O&&s.data===kI?this.#b():this.#v()}else{var i=this.#_();try{this.#i=cd(()=>r(i))}catch(s){this.error(s)}this.#h>0?this.#g():this.#e=!1}return()=>{this.#c?.remove()}},pYe),Ii&&(this.#t=us)}#v(){try{this.#i=cd(()=>this.#l(this.#t))}catch(e){this.error(e)}this.#e=!1}#b(){const e=this.#r.pending;e&&(this.#s=cd(()=>e(this.#t)),Yp.enqueue(()=>{var n=this.#_();this.#i=this.#m(()=>(Yp.ensure(),cd(()=>this.#l(n)))),this.#h>0?this.#g():(Qw(this.#s,()=>{this.#s=null}),this.#e=!1)}))}#_(){var e=this.#t;return this.#e&&(this.#c=bm(),this.#t.before(this.#c),e=this.#c),e}is_pending(){return this.#e||!!this.parent&&this.parent.is_pending()}has_pending_snippet(){return!!this.#r.pending}#m(e){var n=mi,r=Oi,i=Bo;_m(this.#a),xc(this.#a),L2(this.#a.ctx);try{return e()}catch(s){return ofe(s),null}finally{_m(n),xc(r),L2(i)}}#g(){const e=this.#r.pending;this.#i!==null&&(this.#u=document.createDocumentFragment(),this.#u.append(this.#c),Tfe(this.#i,this.#u)),this.#s===null&&(this.#s=cd(()=>e(this.#t)))}#x(e){if(!this.has_pending_snippet()){this.parent&&this.parent.#x(e);return}this.#h+=e,this.#h===0&&(this.#e=!1,this.#s&&Qw(this.#s,()=>{this.#s=null}),this.#u&&(this.#t.before(this.#u),this.#u=null))}update_pending_count(e){this.#x(e),this.#d+=e,this.#f&&B2(this.#f,this.#d)}get_effect_pending(){return this.#y(),Pe(this.#f)}error(e){var n=this.#r.onerror;let r=this.#r.failed;if(this.#p||!n&&!r)throw e;this.#i&&(Bu(this.#i),this.#i=null),this.#s&&(Bu(this.#s),this.#s=null),this.#o&&(Bu(this.#o),this.#o=null),Ii&&(Sc(this.#n),uYe(),Sc(EP()));var i=!1,s=!1;const o=()=>{if(i){lYe();return}i=!0,s&&HGe(),Yp.ensure(),this.#d=0,this.#o!==null&&Qw(this.#o,()=>{this.#o=null}),this.#e=this.has_pending_snippet(),this.#i=this.#m(()=>(this.#p=!1,cd(()=>this.#l(this.#t)))),this.#h>0?this.#g():this.#e=!1};var a=Oi;try{xc(null),s=!0,n?.(e,o),s=!1}catch(l){$2(l,this.#a&&this.#a.parent)}finally{xc(a)}r&&__(()=>{this.#o=this.#m(()=>{Yp.ensure(),this.#p=!0;try{return cd(()=>{r(this.#t,()=>e,()=>o)})}catch(l){return $2(l,this.#a.parent),null}finally{this.#p=!1}})})}}function yYe(t,e,n,r){const i=xO()?EI:cfe;if(n.length===0&&t.length===0){r(e.map(i));return}var s=Fa,o=mi,a=vYe();function l(){Promise.all(n.map(h=>bYe(h))).then(h=>{a();try{r([...e.map(i),...h])}catch(f){(o.f&r0)===0&&$2(f,o)}s?.deactivate(),TP()}).catch(h=>{$2(h,o)})}t.length>0?Promise.all(t).then(()=>{a();try{return l()}finally{s?.deactivate(),TP()}}):l()}function vYe(){var t=mi,e=Oi,n=Bo,r=Fa;return function(i=!0){_m(t),xc(e),L2(n),i&&r?.activate()}}function TP(){_m(null),xc(null),L2(null)}function EI(t){var e=uu|Dc,n=Oi!==null&&(Oi.f&uu)!==0?Oi:null;return mi===null||n!==null&&(n.f&yf)!==0?e|=yf:mi.f|=bO,{ctx:Bo,deps:null,effects:null,equals:Zhe,f:e,fn:t,reactions:null,rv:0,v:ql,wv:0,parent:n??mi,ac:null}}function bYe(t,e){let n=mi;n===null&&jGe();var r=n.b,i=void 0,s=t_(ql),o=!Oi,a=new Map;return DYe(()=>{var l=qhe();i=l.promise;try{Promise.resolve(t()).then(l.resolve,l.reject).then(()=>{h===Fa&&h.committed&&h.deactivate(),TP()})}catch(g){l.reject(g),TP()}var h=Fa;if(o){var f=!r.is_pending();r.update_pending_count(1),h.increment(f),a.get(h)?.reject(ow),a.delete(h),a.set(h,l)}const p=(g,b=void 0)=>{if(h.activate(),b)b!==ow&&(s.f|=Ky,B2(s,b));else{(s.f&Ky)!==0&&(s.f^=Ky),B2(s,g);for(const[x,k]of a){if(a.delete(x),x===h)break;k.reject(ow)}}o&&(r.update_pending_count(-1),h.decrement(f))};l.promise.then(p,g=>p(null,g||"unknown"))}),wfe(()=>{for(const l of a.values())l.reject(ow)}),new Promise(l=>{function h(f){function p(){f===i?l(s):h(i)}f.then(p,p)}h(i)})}function qt(t){const e=EI(t);return gfe(e),e}function cfe(t){const e=EI(t);return e.equals=Whe,e}function hfe(t){var e=t.effects;if(e!==null){t.effects=null;for(var n=0;n<e.length;n+=1)Bu(e[n])}}function _Ye(t){for(var e=t.parent;e!==null;){if((e.f&uu)===0)return e;e=e.parent}return null}function OQ(t){var e,n=mi;_m(_Ye(t));try{t.f&=~AP,hfe(t),e=_fe(t)}finally{_m(n)}return e}function ffe(t){var e=OQ(t);if(t.equals(e)||(t.v=e,t.wv=vfe()),!x_)if(_d!==null)_d.set(t,t.v);else{var n=($y||(t.f&yf)!==0)&&t.deps!==null?T0:Yl;ru(t,n)}}let ML=new Set;const Jy=new Map;let dfe=!1;function t_(t,e){var n={f:0,v:t,reactions:null,equals:Zhe,rv:0,wv:0};return n}function Nn(t,e){const n=t_(t);return gfe(n),n}function pfe(t,e=!1,n=!0){const r=t_(t);return e||(r.equals=Whe),uA&&n&&Bo!==null&&Bo.l!==null&&(Bo.l.s??=[]).push(r),r}function Rt(t,e,n=!1){Oi!==null&&(!xd||(Oi.f&PG)!==0)&&xO()&&(Oi.f&(uu|A0|gQ|PG))!==0&&!i0?.includes(t)&&YGe();let r=n?Hl(e):e;return B2(t,r)}function B2(t,e){if(!t.equals(e)){var n=t.v;x_?Jy.set(t,e):Jy.set(t,n),t.v=e;var r=Yp.ensure();r.capture(t,n),(t.f&uu)!==0&&((t.f&Dc)!==0&&OQ(t),ru(t,(t.f&yf)===0?Yl:T0)),t.wv=vfe(),mfe(t,Dc),xO()&&mi!==null&&(mi.f&Yl)!==0&&(mi.f&(E0|b_))===0&&(Kh===null?OYe([t]):Kh.push(t)),!r.is_fork&&ML.size>0&&!dfe&&xYe()}return e}function xYe(){dfe=!1;const t=Array.from(ML);for(const e of t)(e.f&Yl)!==0&&ru(e,T0),hA(e)&&mC(e);ML.clear()}function tk(t){Rt(t,t.v+1)}function mfe(t,e){var n=t.reactions;if(n!==null)for(var r=xO(),i=n.length,s=0;s<i;s++){var o=n[s],a=o.f;if(!(!r&&o===mi)){var l=(a&Dc)===0;l&&ru(o,e),(a&uu)!==0?(a&AP)===0&&(o.f|=AP,mfe(o,T0)):l&&((a&A0)!==0&&Eg!==null&&Eg.add(o),e_(o))}}}let MG=!1;function wYe(){MG||(MG=!0,document.addEventListener("reset",t=>{Promise.resolve().then(()=>{if(!t.defaultPrevented)for(const e of t.target.elements)e.__on_r?.()})},{capture:!0}))}function SQ(t){var e=Oi,n=mi;xc(null),_m(null);try{return t()}finally{xc(e),_m(n)}}let zw=!1;function RG(t){zw=t}let x_=!1;function FG(t){x_=t}let Oi=null,xd=!1;function xc(t){Oi=t}let mi=null;function _m(t){mi=t}let i0=null;function gfe(t){Oi!==null&&(i0===null?i0=[t]:i0.push(t))}let Cu=null,rh=0,Kh=null;function OYe(t){Kh=t}let yfe=1,pC=0,Eb=pC;function LG(t){Eb=t}let $y=!1;function vfe(){return++yfe}function hA(t){var e=t.f;if((e&Dc)!==0)return!0;if((e&T0)!==0){var n=t.deps,r=(e&yf)!==0;if(e&uu&&(t.f&=~AP),n!==null){var i,s,o=(e&CP)!==0,a=r&&mi!==null&&!$y,l=n.length;if((o||a)&&(mi===null||(mi.f&r0)===0)){var h=t,f=h.parent;for(i=0;i<l;i++)s=n[i],(o||!s?.reactions?.includes(h))&&(s.reactions??=[]).push(h);o&&(h.f^=CP),a&&f!==null&&(f.f&yf)===0&&(h.f^=yf)}for(i=0;i<l;i++)if(s=n[i],hA(s)&&ffe(s),s.wv>t.wv)return!0}(!r||mi!==null&&!$y)&&ru(t,Yl)}return!1}function bfe(t,e,n=!0){var r=t.reactions;if(r!==null&&!i0?.includes(t))for(var i=0;i<r.length;i++){var s=r[i];(s.f&uu)!==0?bfe(s,e,!1):e===s&&(n?ru(s,Dc):(s.f&Yl)!==0&&ru(s,T0),e_(s))}}function _fe(t){var e=Cu,n=rh,r=Kh,i=Oi,s=$y,o=i0,a=Bo,l=xd,h=Eb,f=t.f;Cu=null,rh=0,Kh=null,$y=(f&yf)!==0&&(xd||!zw||Oi===null),Oi=(f&(E0|b_))===0?t:null,i0=null,L2(t.ctx),xd=!1,Eb=++pC,t.ac!==null&&(SQ(()=>{t.ac.abort(ow)}),t.ac=null);try{t.f|=TL;var p=t.fn,g=p(),b=t.deps;if(Cu!==null){var x;if(PP(t,rh),b!==null&&rh>0)for(b.length=rh+Cu.length,x=0;x<Cu.length;x++)b[rh+x]=Cu[x];else t.deps=b=Cu;if(!$y||(f&uu)!==0&&t.reactions!==null)for(x=rh;x<b.length;x++)(b[x].reactions??=[]).push(t)}else b!==null&&rh<b.length&&(PP(t,rh),b.length=rh);if(xO()&&Kh!==null&&!xd&&b!==null&&(t.f&(uu|T0|Dc))===0)for(x=0;x<Kh.length;x++)bfe(Kh[x],t);return i!==null&&i!==t&&(pC++,Kh!==null&&(r===null?r=Kh:r.push(...Kh))),(t.f&Ky)!==0&&(t.f^=Ky),g}catch(k){return ofe(k)}finally{t.f^=TL,Cu=e,rh=n,Kh=r,Oi=i,$y=s,i0=o,L2(a),xd=l,Eb=h}}function SYe(t,e){let n=e.reactions;if(n!==null){var r=NGe.call(n,t);if(r!==-1){var i=n.length-1;i===0?n=e.reactions=null:(n[r]=n[i],n.pop())}}n===null&&(e.f&uu)!==0&&(Cu===null||!Cu.includes(e))&&(ru(e,T0),(e.f&(yf|CP))===0&&(e.f^=CP),hfe(e),PP(e,0))}function PP(t,e){var n=t.deps;if(n!==null)for(var r=e;r<n.length;r++)SYe(t,n[r])}function mC(t){var e=t.f;if((e&r0)===0){ru(t,Yl);var n=mi,r=zw;mi=t,zw=!0;try{(e&A0)!==0?IYe(t):kfe(t),Sfe(t);var i=_fe(t);t.teardown=typeof i=="function"?i:null,t.wv=yfe;var s;BGe&&KGe&&(t.f&Dc)!==0&&t.deps}finally{zw=r,mi=n}}}function Pe(t){var e=t.f,n=(e&uu)!==0;if(Oi!==null&&!xd){var r=mi!==null&&(mi.f&r0)!==0;if(!r&&!i0?.includes(t)){var i=Oi.deps;if((Oi.f&TL)!==0)t.rv<pC&&(t.rv=pC,Cu===null&&i!==null&&i[rh]===t?rh++:Cu===null?Cu=[t]:(!$y||!Cu.includes(t))&&Cu.push(t));else{(Oi.deps??=[]).push(t);var s=t.reactions;s===null?t.reactions=[Oi]:s.includes(Oi)||s.push(Oi)}}}else if(n&&t.deps===null&&t.effects===null){var o=t,a=o.parent;a!==null&&(a.f&yf)===0&&(o.f^=yf)}if(x_){if(Jy.has(t))return Jy.get(t);if(n){o=t;var l=o.v;return((o.f&Yl)===0&&o.reactions!==null||xfe(o))&&(l=OQ(o)),Jy.set(o,l),l}}else if(n){if(o=t,_d?.has(o))return _d.get(o);hA(o)&&ffe(o)}if(_d?.has(t))return _d.get(t);if((t.f&Ky)!==0)throw t.v;return t.v}function xfe(t){if(t.v===ql)return!0;if(t.deps===null)return!1;for(const e of t.deps)if(Jy.has(e)||(e.f&uu)!==0&&xfe(e))return!0;return!1}function fA(t){var e=xd;try{return xd=!0,t()}finally{xd=e}}const kYe=-7169;function ru(t,e){t.f=t.f&kYe|e}function CYe(t){if(!(typeof t!="object"||!t||t instanceof EventTarget)){if(Ab in t)RL(t);else if(!Array.isArray(t))for(let e in t){const n=t[e];typeof n=="object"&&n&&Ab in n&&RL(n)}}}function RL(t,e=new Set){if(typeof t=="object"&&t!==null&&!(t instanceof EventTarget)&&!e.has(t)){e.add(t),t instanceof Date&&t.getTime();for(let r in t)try{RL(t[r],e)}catch{}const n=SI(t);if(n!==Object.prototype&&n!==Array.prototype&&n!==Map.prototype&&n!==Set.prototype&&n!==Date.prototype){const r=Uhe(n);for(let i in r){const s=r[i].get;if(s)try{s.call(t)}catch{}}}}}function AYe(t){mi===null&&Oi===null&&qGe(),Oi!==null&&(Oi.f&yf)!==0&&mi===null&&VGe(),x_&&UGe()}function EYe(t,e){var n=e.last;n===null?e.last=e.first=t:(n.next=t,t.prev=n,e.last=t)}function P0(t,e,n,r=!0){var i=mi;i!==null&&(i.f&bh)!==0&&(t|=bh);var s={ctx:Bo,deps:null,nodes_start:null,nodes_end:null,f:t|Dc,first:null,fn:e,last:null,next:null,parent:i,b:i&&i.b,prev:null,teardown:null,transitions:null,wv:0,ac:null};if(n)try{mC(s),s.f|=mQ}catch(l){throw Bu(s),l}else e!==null&&e_(s);if(r){var o=s;if(n&&o.deps===null&&o.teardown===null&&o.nodes_start===null&&o.first===o.last&&(o.f&bO)===0&&(o=o.first,(t&A0)!==0&&(t&Kb)!==0&&o!==null&&(o.f|=Kb)),o!==null&&(o.parent=i,i!==null&&EYe(o,i),Oi!==null&&(Oi.f&uu)!==0&&(t&b_)===0)){var a=Oi;(a.effects??=[]).push(o)}}return s}function TYe(){return Oi!==null&&!xd}function wfe(t){const e=P0(pQ,null,!1);return ru(e,Yl),e.teardown=t,e}function Po(t){AYe();var e=mi.f,n=!Oi&&(e&E0)!==0&&(e&mQ)===0;if(n){var r=Bo;(r.e??=[]).push(t)}else return Ofe(t)}function Ofe(t){return P0(wI|LGe,t,!1)}function PYe(t){Yp.ensure();const e=P0(b_|bO,t,!0);return(n={})=>new Promise(r=>{n.outro?Qw(e,()=>{Bu(e),r(void 0)}):(Bu(e),r(void 0))})}function dA(t){return P0(wI,t,!1)}function DYe(t){return P0(gQ|bO,t,!0)}function kQ(t,e=0){return P0(pQ|e,t,!0)}function la(t,e=[],n=[],r=[],i=!1){yYe(r,e,n,s=>{P0(i?wI:pQ,()=>t(...s.map(Pe)),!0)})}function pA(t,e=0){var n=P0(A0|e,t,!0);return n}function cd(t,e=!0){return P0(E0|bO,t,!0,e)}function Sfe(t){var e=t.teardown;if(e!==null){const n=x_,r=Oi;FG(!0),xc(null);try{e.call(null)}finally{FG(n),xc(r)}}}function kfe(t,e=!1){var n=t.first;for(t.first=t.last=null;n!==null;){const i=n.ac;i!==null&&SQ(()=>{i.abort(ow)});var r=n.next;(n.f&b_)!==0?n.parent=null:Bu(n,e),n=r}}function IYe(t){for(var e=t.first;e!==null;){var n=e.next;(e.f&E0)===0&&Bu(e),e=n}}function Bu(t,e=!0){var n=!1;(e||(t.f&zhe)!==0)&&t.nodes_start!==null&&t.nodes_end!==null&&(MYe(t.nodes_start,t.nodes_end),n=!0),kfe(t,e&&!n),PP(t,0),ru(t,r0);var r=t.transitions;if(r!==null)for(const s of r)s.stop();Sfe(t);var i=t.parent;i!==null&&i.first!==null&&Cfe(t),t.next=t.prev=t.teardown=t.ctx=t.deps=t.fn=t.nodes_start=t.nodes_end=t.ac=null}function MYe(t,e){for(;t!==null;){var n=t===e?null:Mm(t);t.remove(),t=n}}function Cfe(t){var e=t.parent,n=t.prev,r=t.next;n!==null&&(n.next=r),r!==null&&(r.prev=n),e!==null&&(e.first===t&&(e.first=r),e.last===t&&(e.last=n))}function Qw(t,e,n=!0){var r=[];CQ(t,r,!0),Afe(r,()=>{n&&Bu(t),e&&e()})}function Afe(t,e){var n=t.length;if(n>0){var r=()=>--n||e();for(var i of t)i.out(r)}else e()}function CQ(t,e,n){if((t.f&bh)===0){if(t.f^=bh,t.transitions!==null)for(const o of t.transitions)(o.is_global||n)&&e.push(o);for(var r=t.first;r!==null;){var i=r.next,s=(r.f&Kb)!==0||(r.f&E0)!==0&&(t.f&A0)!==0;CQ(r,e,s?n:!1),r=i}}}function AQ(t){Efe(t,!0)}function Efe(t,e){if((t.f&bh)!==0){t.f^=bh,(t.f&Yl)===0&&(ru(t,Dc),e_(t));for(var n=t.first;n!==null;){var r=n.next,i=(n.f&Kb)!==0||(n.f&E0)!==0;Efe(n,i?e:!1),n=r}if(t.transitions!==null)for(const s of t.transitions)(s.is_global||e)&&s.in()}}function Tfe(t,e){for(var n=t.nodes_start,r=t.nodes_end;n!==null;){var i=n===r?null:Mm(n);e.append(n),n=i}}const Pfe=new Set,FL=new Set;function RYe(t){if(!Ii)return;t.removeAttribute("onload"),t.removeAttribute("onerror");const e=t.__e;e!==void 0&&(t.__e=void 0,queueMicrotask(()=>{t.isConnected&&t.dispatchEvent(e)}))}function FYe(t,e,n,r={}){function i(s){if(r.capture||T3.call(e,s),!s.cancelBubble)return SQ(()=>n?.call(this,s))}return t.startsWith("pointer")||t.startsWith("touch")||t==="wheel"?__(()=>{e.addEventListener(t,i,r)}):e.addEventListener(t,i,r),i}function N2(t,e,n,r,i){var s={capture:r,passive:i},o=FYe(t,e,n,s);(e===document.body||e===window||e===document||e instanceof HTMLMediaElement)&&wfe(()=>{e.removeEventListener(t,o,s)})}function D0(t){for(var e=0;e<t.length;e++)Pfe.add(t[e]);for(var n of FL)n(t)}let $G=null;function T3(t){var e=this,n=e.ownerDocument,r=t.type,i=t.composedPath?.()||[],s=i[0]||t.target;$G=t;var o=0,a=$G===t&&t.__root;if(a){var l=i.indexOf(a);if(l!==-1&&(e===document||e===window)){t.__root=e;return}var h=i.indexOf(e);if(h===-1)return;l<=h&&(o=l)}if(s=i[o]||t.target,s!==e){jhe(t,"currentTarget",{configurable:!0,get(){return s||n}});var f=Oi,p=mi;xc(null),_m(null);try{for(var g,b=[];s!==null;){var x=s.assignedSlot||s.parentNode||s.host||null;try{var k=s["__"+r];k!=null&&(!s.disabled||t.target===s)&&k.call(s,t)}catch(T){g?b.push(T):g=T}if(t.cancelBubble||x===e||x===null)break;s=x}if(g){for(let T of b)queueMicrotask(()=>{throw T});throw g}}finally{t.__root=e,delete t.currentTarget,xc(f),_m(p)}}}function LYe(t){var e=document.createElement("template");return e.innerHTML=t.replaceAll("<!>","<!---->"),e.content}function jw(t,e){var n=mi;n.nodes_start===null&&(n.nodes_start=t,n.nodes_end=e)}function is(t,e){var n=(e&nYe)!==0,r=(e&rYe)!==0,i,s=!t.startsWith("<!>");return()=>{if(Ii)return jw(us,null),us;i===void 0&&(i=LYe(s?t:"<!>"+t),n||(i=Jb(i)));var o=r||nfe?document.importNode(i,!0):i.cloneNode(!0);if(n){var a=Jb(o),l=o.lastChild;jw(a,l)}else jw(o,o);return o}}function qv(){if(Ii)return jw(us,null),us;var t=document.createDocumentFragment(),e=document.createComment(""),n=bm();return t.append(e,n),jw(e,n),t}function ui(t,e){if(Ii){mi.nodes_end=us,cA();return}t!==null&&t.before(e)}const $Ye=["touchstart","touchmove"];function BYe(t){return $Ye.includes(t)}function Rm(t,e){var n=e==null?"":typeof e=="object"?e+"":e;n!==(t.__t??=t.nodeValue)&&(t.__t=n,t.nodeValue=n+"")}function Dfe(t,e){return Ife(t,e)}function NYe(t,e){DL(),e.intro=e.intro??!1;const n=e.target,r=Ii,i=us;try{for(var s=Jb(n);s&&(s.nodeType!==_O||s.data!==Hhe);)s=Mm(s);if(!s)throw F2;qg(!0),Sc(s);const o=Ife(t,{...e,anchor:s});return qg(!1),o}catch(o){if(o instanceof Error&&o.message.split(`
`).some(a=>a.startsWith("https://svelte.dev/e/")))throw o;return o!==F2&&console.warn("Failed to hydrate: ",o),e.recover===!1&&XGe(),DL(),sfe(n),qg(!1),Dfe(t,e)}finally{qg(r),Sc(i)}}const Px=new Map;function Ife(t,{target:e,anchor:n,props:r={},events:i,context:s,intro:o=!0}){DL();var a=new Set,l=p=>{for(var g=0;g<p.length;g++){var b=p[g];if(!a.has(b)){a.add(b);var x=BYe(b);e.addEventListener(b,T3,{passive:x});var k=Px.get(b);k===void 0?(document.addEventListener(b,T3,{passive:x}),Px.set(b,1)):Px.set(b,k+1)}}};l(bQ(Pfe)),FL.add(l);var h=void 0,f=PYe(()=>{var p=n??e.appendChild(bm());return mYe(p,{pending:()=>{}},g=>{if(s){Xo({});var b=Bo;b.c=s}if(i&&(r.$$events=i),Ii&&jw(g,null),h=t(g,r)||{},Ii&&(mi.nodes_end=us,us===null||us.nodeType!==_O||us.data!==wQ))throw CI(),F2;s&&Wo()}),()=>{for(var g of a){e.removeEventListener(g,T3);var b=Px.get(g);--b===0?(document.removeEventListener(g,T3),Px.delete(g)):Px.set(g,b)}FL.delete(l),p!==n&&p.parentNode?.removeChild(p)}});return LL.set(h,f),h}let LL=new WeakMap;function zYe(t,e){const n=LL.get(t);return n?(LL.delete(t),n(e)):Promise.resolve()}function QYe(t){return new jYe(t)}class jYe{#e;#t;constructor(e){var n=new Map,r=(s,o)=>{var a=pfe(o,!1,!1);return n.set(s,a),a};const i=new Proxy({...e.props||{},$$events:{}},{get(s,o){return Pe(n.get(o)??r(o,Reflect.get(s,o)))},has(s,o){return o===Qhe?!0:(Pe(n.get(o)??r(o,Reflect.get(s,o))),Reflect.has(s,o))},set(s,o,a){return Rt(n.get(o)??r(o,a),a),Reflect.set(s,o,a)}});this.#t=(e.hydrate?NYe:Dfe)(e.component,{target:e.target,anchor:e.anchor,props:i,context:e.context,intro:e.intro??!1,recover:e.recover}),(!e?.props?.$$host||e.sync===!1)&&hYe(),this.#e=i.$$events;for(const s of Object.keys(this.#t))s==="$set"||s==="$destroy"||s==="$on"||jhe(this,s,{get(){return this.#t[s]},set(o){this.#t[s]=o},enumerable:!0});this.#t.$set=s=>{Object.assign(i,s)},this.#t.$destroy=()=>{zYe(this.#t)}}$set(e){this.#t.$set(e)}$on(e,n){this.#e[e]=this.#e[e]||[];const r=(...i)=>n.call(this,...i);return this.#e[e].push(r),()=>{this.#e[e]=this.#e[e].filter(i=>i!==r)}}$destroy(){this.#t.$destroy()}}const UYe="5";typeof window<"u"&&((window.__svelte??={}).v??=new Set).add(UYe);class EQ{anchor;#e=new Map;#t=new Map;#n=new Map;#r=!0;constructor(e,n=!0){this.anchor=e,this.#r=n}#l=()=>{var e=Fa;if(this.#e.has(e)){var n=this.#e.get(e),r=this.#t.get(n);if(r)AQ(r);else{var i=this.#n.get(n);i&&(this.#t.set(n,i.effect),this.#n.delete(n),i.fragment.lastChild.remove(),this.anchor.before(i.fragment),r=i.effect)}for(const[s,o]of this.#e){if(this.#e.delete(s),s===e)break;const a=this.#n.get(o);a&&(Bu(a.effect),this.#n.delete(o))}for(const[s,o]of this.#t){if(s===n)continue;const a=()=>{if(Array.from(this.#e.values()).includes(s)){var l=document.createDocumentFragment();Tfe(o,l),l.append(bm()),this.#n.set(s,{effect:o,fragment:l})}else Bu(o);this.#t.delete(s)};this.#r||!r?Qw(o,a,!1):a()}}};#a=e=>{this.#e.delete(e);const n=Array.from(this.#e.values());for(const[r,i]of this.#n)n.includes(r)||(Bu(i.effect),this.#n.delete(r))};ensure(e,n){var r=Fa,i=cYe();n&&!this.#t.has(e)&&!this.#n.has(e)&&this.#t.set(e,cd(()=>n(this.anchor))),this.#e.set(r,e),i||(Ii&&(this.anchor=us),this.#l())}}function TQ(t,e,...n){var r=new EQ(t);pA(()=>{const i=e()??null;r.ensure(i,i&&(s=>i(s,...n)))},Kb)}function wO(t){Bo===null&&Ghe(),uA&&Bo.l!==null?VYe(Bo).m.push(t):Po(()=>{const e=fA(t);if(typeof e=="function")return e})}function VYe(t){var e=t.l;return e.u??={a:[],b:[],m:[]}}function lc(t,e,n=!1){Ii&&cA();var r=new EQ(t),i=n?Kb:0;function s(o,a){if(Ii){const h=tfe(t)===kI;if(o===h){var l=EP();Sc(l),r.anchor=l,qg(!1),r.ensure(o,a),qg(!0);return}}r.ensure(o,a)}pA(()=>{var o=!1;e((a,l=!0)=>{o=!0,s(l,a)}),o||s(!1,null)},i)}function qYe(t,e,n){Ii&&cA();var r=new EQ(t),i=!xO();pA(()=>{var s=e();i&&s!==null&&typeof s=="object"&&(s={}),r.ensure(s,n)})}function ZYe(t,e){return e}function XYe(t,e,n){for(var r=t.items,i=[],s=e.length,o=0;o<s;o++)CQ(e[o].e,i,!0);var a=s>0&&i.length===0&&n!==null;if(a){var l=n.parentNode;sfe(l),l.append(n),r.clear(),Pp(t,e[0].prev,e[s-1].next)}Afe(i,()=>{for(var h=0;h<s;h++){var f=e[h];a||(r.delete(f.k),Pp(t,f.prev,f.next)),Bu(f.e,!a)}})}function nk(t,e,n,r,i,s=null){var o=t,a={flags:e,items:new Map,first:null},l=(e&Yhe)!==0;if(l){var h=t;o=Ii?Sc(Jb(h)):h.appendChild(bm())}Ii&&cA();var f=null,p=!1,g=new Map,b=cfe(()=>{var I=n();return vQ(I)?I:I==null?[]:bQ(I)}),x,k;function T(){WYe(k,x,a,g,o,i,e,r,n),s!==null&&(x.length===0?f?AQ(f):f=cd(()=>s(o)):f!==null&&Qw(f,()=>{f=null}))}pA(()=>{k??=mi,x=Pe(b);var I=x.length;if(p&&I===0)return;p=I===0;let M=!1;if(Ii){var B=tfe(o)===kI;B!==(I===0)&&(o=EP(),Sc(o),qg(!1),M=!0)}if(Ii){for(var j=null,Q,Z=0;Z<I;Z++){if(us.nodeType===_O&&us.data===wQ){o=us,M=!0,qg(!1);break}var q=x[Z],J=r(q,Z);Q=Mfe(us,a,j,null,q,J,Z,i,e,n),a.items.set(J,Q),j=Q}I>0&&Sc(EP())}Ii?I===0&&s&&(f=cd(()=>s(o))):T(),M&&qg(!0),Pe(b)}),Ii&&(o=us)}function WYe(t,e,n,r,i,s,o,a,l){var h=(o&eYe)!==0,f=(o&(_Q|xQ))!==0,p=e.length,g=n.items,b=n.first,x=b,k,T=null,I,M=[],B=[],j,Q,Z,q;if(h)for(q=0;q<p;q+=1)j=e[q],Q=a(j,q),Z=g.get(Q),Z!==void 0&&(Z.a?.measure(),(I??=new Set).add(Z));for(q=0;q<p;q+=1){if(j=e[q],Q=a(j,q),Z=g.get(Q),Z===void 0){var J=r.get(Q);if(J!==void 0){r.delete(Q),g.set(Q,J);var oe=T?T.next:x;Pp(n,T,J),Pp(n,J,oe),l7(J,oe,i),T=J}else{var me=x?x.e.nodes_start:i;T=Mfe(me,n,T,T===null?n.first:T.next,j,Q,q,s,o,l)}g.set(Q,T),M=[],B=[],x=T.next;continue}if(f&&GYe(Z,j,q,o),(Z.e.f&bh)!==0&&(AQ(Z.e),h&&(Z.a?.unfix(),(I??=new Set).delete(Z))),Z!==x){if(k!==void 0&&k.has(Z)){if(M.length<B.length){var ae=B[0],ce;T=ae.prev;var se=M[0],ge=M[M.length-1];for(ce=0;ce<M.length;ce+=1)l7(M[ce],ae,i);for(ce=0;ce<B.length;ce+=1)k.delete(B[ce]);Pp(n,se.prev,ge.next),Pp(n,T,se),Pp(n,ge,ae),x=ae,T=ge,q-=1,M=[],B=[]}else k.delete(Z),l7(Z,x,i),Pp(n,Z.prev,Z.next),Pp(n,Z,T===null?n.first:T.next),Pp(n,T,Z),T=Z;continue}for(M=[],B=[];x!==null&&x.k!==Q;)(x.e.f&bh)===0&&(k??=new Set).add(x),B.push(x),x=x.next;if(x===null)continue;Z=x}M.push(Z),T=Z,x=Z.next}if(x!==null||k!==void 0){for(var xe=k===void 0?[]:bQ(k);x!==null;)(x.e.f&bh)===0&&xe.push(x),x=x.next;var Se=xe.length;if(Se>0){var De=(o&Yhe)!==0&&p===0?i:null;if(h){for(q=0;q<Se;q+=1)xe[q].a?.measure();for(q=0;q<Se;q+=1)xe[q].a?.fix()}XYe(n,xe,De)}}h&&__(()=>{if(I!==void 0)for(Z of I)Z.a?.apply()}),t.first=n.first&&n.first.e,t.last=T&&T.e;for(var He of r.values())Bu(He.e);r.clear()}function GYe(t,e,n,r){(r&_Q)!==0&&B2(t.v,e),(r&xQ)!==0?B2(t.i,n):t.i=n}function Mfe(t,e,n,r,i,s,o,a,l,h,f){var p=(l&_Q)!==0,g=(l&tYe)===0,b=p?g?pfe(i,!1,!1):t_(i):i,x=(l&xQ)===0?o:t_(o),k={i:x,v:b,k:s,a:null,e:null,prev:n,next:r};try{if(t===null){var T=document.createDocumentFragment();T.append(t=bm())}return k.e=cd(()=>a(t,b,x,h),Ii),k.e.prev=n&&n.e,k.e.next=r&&r.e,n===null?f||(e.first=k):(n.next=k,n.e.next=k.e),r!==null&&(r.prev=k,r.e.prev=k.e),k}finally{}}function l7(t,e,n){for(var r=t.next?t.next.e.nodes_start:n,i=e?e.e.nodes_start:n,s=t.e.nodes_start;s!==null&&s!==r;){var o=Mm(s);i.before(s),s=o}}function Pp(t,e,n){e===null?t.first=n:(e.next=n,e.e.next=n&&n.e),n!==null&&(n.prev=e,n.e.prev=e&&e.e)}function Go(t,e){dA(()=>{var n=t.getRootNode(),r=n.host?n:n.head??n.ownerDocument.head;if(!r.querySelector("#"+e.hash)){const i=document.createElement("style");i.id=e.hash,i.textContent=e.code,r.appendChild(i)}})}function PQ(t,e,n){dA(()=>{var r=fA(()=>e(t,n?.())||{});if(n&&r?.update){var i=!1,s={};kQ(()=>{var o=n();CYe(o),i&&Xhe(s,o)&&(s=o,r.update(o))}),i=!0}if(r?.destroy)return()=>r.destroy()})}function YYe(t,e,n){var r=t==null?"":""+t;return e&&(r=r?r+" "+e:e),r===""?null:r}function BG(t,e=!1){var n=e?" !important;":";",r="";for(var i in t){var s=t[i];s!=null&&s!==""&&(r+=" "+i+": "+s+n)}return r}function HYe(t,e){if(e){var n="",r,i;return Array.isArray(e)?(r=e[0],i=e[1]):r=e,r&&(n+=BG(r)),i&&(n+=BG(i,!0)),n=n.trim(),n===""?null:n}return String(t)}function x1(t,e,n,r,i,s){var o=t.__className;if(Ii||o!==n||o===void 0){var a=YYe(n,r);(!Ii||a!==t.getAttribute("class"))&&(a==null?t.removeAttribute("class"):t.className=a),t.__className=n}return s}function u7(t,e={},n,r){for(var i in n){var s=n[i];e[i]!==s&&(n[i]==null?t.style.removeProperty(i):t.style.setProperty(i,s,r))}}function Ic(t,e,n,r){var i=t.__style;if(Ii||i!==e){var s=HYe(e,r);(!Ii||s!==t.getAttribute("style"))&&(s==null?t.removeAttribute("style"):t.style.cssText=s),t.__style=e}else r&&(Array.isArray(r)?(u7(t,n?.[0],r[0]),u7(t,n?.[1],r[1],"important")):u7(t,n,r));return r}const KYe=Symbol("is custom element"),JYe=Symbol("is html");function eHe(t){if(Ii){var e=!1,n=()=>{if(!e){if(e=!0,t.hasAttribute("value")){var r=t.value;gC(t,"value",null),t.value=r}if(t.hasAttribute("checked")){var i=t.checked;gC(t,"checked",null),t.checked=i}}};t.__on_r=n,__(n),wYe()}}function tHe(t,e){var n=Rfe(t);n.checked!==(n.checked=e??void 0)&&(t.checked=e)}function gC(t,e,n,r){var i=Rfe(t);Ii&&(i[e]=t.getAttribute(e),e==="src"||e==="srcset"||e==="href"&&t.nodeName==="LINK")||i[e]!==(i[e]=n)&&(e==="loading"&&(t[$Ge]=n),n==null?t.removeAttribute(e):typeof n!="string"&&nHe(t).includes(e)?t[e]=n:t.setAttribute(e,n))}function Rfe(t){return t.__attributes??={[KYe]:t.nodeName.includes("-"),[JYe]:t.namespaceURI===iYe}}var NG=new Map;function nHe(t){var e=t.getAttribute("is")||t.nodeName,n=NG.get(e);if(n)return n;NG.set(e,n=[]);for(var r,i=t,s=Element.prototype;s!==i;){r=Uhe(i);for(var o in r)r[o].set&&n.push(o);i=SI(i)}return n}class DQ{#e=new WeakMap;#t;#n;static entries=new WeakMap;constructor(e){this.#n=e}observe(e,n){var r=this.#e.get(e)||new Set;return r.add(n),this.#e.set(e,r),this.#r().observe(e,this.#n),()=>{var i=this.#e.get(e);i.delete(n),i.size===0&&(this.#e.delete(e),this.#t.unobserve(e))}}#r(){return this.#t??(this.#t=new ResizeObserver(e=>{for(var n of e){DQ.entries.set(n.target,n);for(var r of this.#e.get(n.target)||[])r(n)}}))}}var rHe=new DQ({box:"border-box"});function Md(t,e,n){var r=rHe.observe(t,()=>n(t[e]));dA(()=>(fA(()=>n(t[e])),r))}function zG(t,e){return t===e||t?.[Ab]===e}function Nu(t={},e,n,r){return dA(()=>{var i,s;return kQ(()=>{i=s,s=[],fA(()=>{t!==n(...s)&&(e(t,...s),i&&zG(n(...i),t)&&e(null,...i))})}),()=>{__(()=>{s&&zG(n(...s),t)&&e(null,...s)})}}),t}let H4=!1;function iHe(t){var e=H4;try{return H4=!1,[t(),H4]}finally{H4=e}}function OO(t,e,n,r){var i=r,s=!0,o=()=>(s&&(s=!1,i=r),i),a;{var l=Ab in t||Qhe in t;a=Nw(t,e)?.set??(l&&e in t?T=>t[e]=T:void 0)}var h,f=!1;[h,f]=iHe(()=>t[e]);var p;if(p=()=>{var T=t[e];return T===void 0?o():(s=!0,T)},a){var g=t.$$legacy;return(function(T,I){return arguments.length>0?((!I||g||f)&&a(I?p():T),T):p()})}var b=!1,x=EI(()=>(b=!1,p()));Pe(x);var k=mi;return(function(T,I){if(arguments.length>0){const M=I?Pe(x):Hl(T);return Rt(x,M),b=!0,i!==void 0&&(i=M),T}return x_&&b||(k.f&r0)!==0?x.v:Pe(x)})}var By=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function IQ(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Y5={exports:{}},sHe=Y5.exports,QG;function oHe(){return QG||(QG=1,(function(t,e){(function(){var n,r="4.17.21",i=200,s="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",o="Expected a function",a="Invalid `variable` option passed into `_.template`",l="__lodash_hash_undefined__",h=500,f="__lodash_placeholder__",p=1,g=2,b=4,x=1,k=2,T=1,I=2,M=4,B=8,j=16,Q=32,Z=64,q=128,J=256,oe=512,me=30,ae="...",ce=800,se=16,ge=1,xe=2,Se=3,De=1/0,He=9007199254740991,Ue=17976931348623157e292,yt=NaN,We=4294967295,at=We-1,ut=We>>>1,wt=[["ary",q],["bind",T],["bindKey",I],["curry",B],["curryRight",j],["flip",oe],["partial",Q],["partialRight",Z],["rearg",J]],ot="[object Arguments]",dt="[object Array]",Yt="[object AsyncFunction]",Ft="[object Boolean]",Ot="[object Date]",Kt="[object DOMException]",Dn="[object Error]",Ut="[object Function]",At="[object GeneratorFunction]",zt="[object Map]",nn="[object Number]",Ze="[object Null]",cn="[object Object]",Fn="[object Promise]",An="[object Proxy]",qn="[object RegExp]",Er="[object Set]",Mi="[object String]",gi="[object Symbol]",fs="[object Undefined]",Hr="[object WeakMap]",uo="[object WeakSet]",ei="[object ArrayBuffer]",Ct="[object DataView]",Qi="[object Float32Array]",ki="[object Float64Array]",js="[object Int8Array]",Co="[object Int16Array]",Lt="[object Int32Array]",yn="[object Uint8Array]",rn="[object Uint8ClampedArray]",Xr="[object Uint16Array]",si="[object Uint32Array]",Tn=/\b__p \+= '';/g,Ms=/\b(__p \+=) '' \+/g,Ri=/(__e\(.*?\)|\b__t\)) \+\n'';/g,oi=/&(?:amp|lt|gt|quot|#39);/g,Fi=/[&<>"']/g,Oe=RegExp(oi.source),ne=RegExp(Fi.source),te=/<%-([\s\S]+?)%>/g,fe=/<%([\s\S]+?)%>/g,we=/<%=([\s\S]+?)%>/g,ze=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Ge=/^\w*$/,et=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Ie=/[\\^$.*+?()[\]{}|]/g,ht=RegExp(Ie.source),_t=/^\s+/,rt=/\s/,Bt=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,On=/\{\n\/\* \[wrapped with (.+)\] \*/,In=/,? & /,Ir=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Gn=/[()=,{}\[\]\/\s]/,ur=/\\(\\)?/g,Cr=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,ds=/\w*$/,ji=/^[-+]0x[0-9a-f]+$/i,gr=/^0b[01]+$/i,hi=/^\[object .+?Constructor\]$/,an=/^0o[0-7]+$/i,ye=/^(?:0|[1-9]\d*)$/,Je=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,ft=/($^)/,Wt=/['\n\r\u2028\u2029\\]/g,$t="\\ud800-\\udfff",mn="\\u0300-\\u036f",tr="\\ufe20-\\ufe2f",rr="\\u20d0-\\u20ff",Hn=mn+tr+rr,ps="\\u2700-\\u27bf",Mr="a-z\\xdf-\\xf6\\xf8-\\xff",Ci="\\xac\\xb1\\xd7\\xf7",Ss="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",ha="\\u2000-\\u206f",Rs=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Vu="A-Z\\xc0-\\xd6\\xd8-\\xde",ks="\\ufe0e\\ufe0f",Li=Ci+Ss+ha+Rs,kh="['â]",hu="["+$t+"]",I0="["+Li+"]",ja="["+Hn+"]",O_="\\d+",M0="["+ps+"]",Ch="["+Mr+"]",Fc="[^"+$t+Li+O_+ps+Mr+Vu+"]",ai="\\ud83c[\\udffb-\\udfff]",P1="(?:"+ja+"|"+ai+")",R0="[^"+$t+"]",Ah="(?:\\ud83c[\\udde6-\\uddff]){2}",Fm="[\\ud800-\\udbff][\\udc00-\\udfff]",Lc="["+Vu+"]",Ud="\\u200d",Lm="(?:"+Ch+"|"+Fc+")",Vd="(?:"+Lc+"|"+Fc+")",D1="(?:"+kh+"(?:d|ll|m|re|s|t|ve))?",S_="(?:"+kh+"(?:D|LL|M|RE|S|T|VE))?",I1=P1+"?",k_="["+ks+"]?",Pf="(?:"+Ud+"(?:"+[R0,Ah,Fm].join("|")+")"+k_+I1+")*",$m="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Ua="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Ea=k_+I1+Pf,F0="(?:"+[M0,Ah,Fm].join("|")+")"+Ea,L0="(?:"+[R0+ja+"?",ja,Ah,Fm,hu].join("|")+")",$0=RegExp(kh,"g"),C_=RegExp(ja,"g"),Eh=RegExp(ai+"(?="+ai+")|"+L0+Ea,"g"),SO=RegExp([Lc+"?"+Ch+"+"+D1+"(?="+[I0,Lc,"$"].join("|")+")",Vd+"+"+S_+"(?="+[I0,Lc+Lm,"$"].join("|")+")",Lc+"?"+Lm+"+"+D1,Lc+"+"+S_,Ua,$m,O_,F0].join("|"),"g"),A_=RegExp("["+Ud+$t+Hn+ks+"]"),E_=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,kO=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],CO=-1,ms={};ms[Qi]=ms[ki]=ms[js]=ms[Co]=ms[Lt]=ms[yn]=ms[rn]=ms[Xr]=ms[si]=!0,ms[ot]=ms[dt]=ms[ei]=ms[Ft]=ms[Ct]=ms[Ot]=ms[Dn]=ms[Ut]=ms[zt]=ms[nn]=ms[cn]=ms[qn]=ms[Er]=ms[Mi]=ms[Hr]=!1;var $i={};$i[ot]=$i[dt]=$i[ei]=$i[Ct]=$i[Ft]=$i[Ot]=$i[Qi]=$i[ki]=$i[js]=$i[Co]=$i[Lt]=$i[zt]=$i[nn]=$i[cn]=$i[qn]=$i[Er]=$i[Mi]=$i[gi]=$i[yn]=$i[rn]=$i[Xr]=$i[si]=!0,$i[Dn]=$i[Ut]=$i[Hr]=!1;var M1={Ã:"A",Ã:"A",Ã:"A",Ã:"A",Ã:"A",Ã:"A",Ã :"a",Ã¡:"a",Ã¢:"a",Ã£:"a",Ã¤:"a",Ã¥:"a",Ã:"C",Ã§:"c",Ã:"D",Ã°:"d",Ã:"E",Ã:"E",Ã:"E",Ã:"E",Ã¨:"e",Ã©:"e",Ãª:"e",Ã«:"e",Ã:"I",Ã:"I",Ã:"I",Ã:"I",Ã¬:"i",Ã­:"i",Ã®:"i",Ã¯:"i",Ã:"N",Ã±:"n",Ã:"O",Ã:"O",Ã:"O",Ã:"O",Ã:"O",Ã:"O",Ã²:"o",Ã³:"o",Ã´:"o",Ãµ:"o",Ã¶:"o",Ã¸:"o",Ã:"U",Ã:"U",Ã:"U",Ã:"U",Ã¹:"u",Ãº:"u",Ã»:"u",Ã¼:"u",Ã:"Y",Ã½:"y",Ã¿:"y",Ã:"Ae",Ã¦:"ae",Ã:"Th",Ã¾:"th",Ã:"ss",Ä:"A",Ä:"A",Ä:"A",Ä:"a",Ä:"a",Ä:"a",Ä:"C",Ä:"C",Ä:"C",Ä:"C",Ä:"c",Ä:"c",Ä:"c",Ä:"c",Ä:"D",Ä:"D",Ä:"d",Ä:"d",Ä:"E",Ä:"E",Ä:"E",Ä:"E",Ä:"E",Ä:"e",Ä:"e",Ä:"e",Ä:"e",Ä:"e",Ä:"G",Ä:"G",Ä :"G",Ä¢:"G",Ä:"g",Ä:"g",Ä¡:"g",Ä£:"g",Ä¤:"H",Ä¦:"H",Ä¥:"h",Ä§:"h",Ä¨:"I",Äª:"I",Ä¬:"I",Ä®:"I",Ä°:"I",Ä©:"i",Ä«:"i",Ä­:"i",Ä¯:"i",Ä±:"i",Ä´:"J",Äµ:"j",Ä¶:"K",Ä·:"k",Ä¸:"k",Ä¹:"L",Ä»:"L",Ä½:"L",Ä¿:"L",Å:"L",Äº:"l",Ä¼:"l",Ä¾:"l",Å:"l",Å:"l",Å:"N",Å:"N",Å:"N",Å:"N",Å:"n",Å:"n",Å:"n",Å:"n",Å:"O",Å:"O",Å:"O",Å:"o",Å:"o",Å:"o",Å:"R",Å:"R",Å:"R",Å:"r",Å:"r",Å:"r",Å:"S",Å:"S",Å:"S",Å :"S",Å:"s",Å:"s",Å:"s",Å¡:"s",Å¢:"T",Å¤:"T",Å¦:"T",Å£:"t",Å¥:"t",Å§:"t",Å¨:"U",Åª:"U",Å¬:"U",Å®:"U",Å°:"U",Å²:"U",Å©:"u",Å«:"u",Å­:"u",Å¯:"u",Å±:"u",Å³:"u",Å´:"W",Åµ:"w",Å¶:"Y",Å·:"y",Å¸:"Y",Å¹:"Z",Å»:"Z",Å½:"Z",Åº:"z",Å¼:"z",Å¾:"z",Ä²:"IJ",Ä³:"ij",Å:"Oe",Å:"oe",Å:"'n",Å¿:"s"},B0={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},R1={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},F1={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},qu=parseFloat,AO=parseInt,N0=typeof By=="object"&&By&&By.Object===Object&&By,Df=typeof self=="object"&&self&&self.Object===Object&&self,Fs=N0||Df||Function("return this")(),fi=e&&!e.nodeType&&e,Zu=fi&&!0&&t&&!t.nodeType&&t,T_=Zu&&Zu.exports===fi,Th=T_&&N0.process,Ol=(function(){try{var tt=Zu&&Zu.require&&Zu.require("util").types;return tt||Th&&Th.binding&&Th.binding("util")}catch{}})(),L1=Ol&&Ol.isArrayBuffer,P_=Ol&&Ol.isDate,$1=Ol&&Ol.isMap,z0=Ol&&Ol.isRegExp,B1=Ol&&Ol.isSet,N1=Ol&&Ol.isTypedArray;function Va(tt,bt,mt){switch(mt.length){case 0:return tt.call(bt);case 1:return tt.call(bt,mt[0]);case 2:return tt.call(bt,mt[0],mt[1]);case 3:return tt.call(bt,mt[0],mt[1],mt[2])}return tt.apply(bt,mt)}function D_(tt,bt,mt,xn){for(var sr=-1,ti=tt==null?0:tt.length;++sr<ti;){var $s=tt[sr];bt(xn,$s,mt($s),tt)}return xn}function zo(tt,bt){for(var mt=-1,xn=tt==null?0:tt.length;++mt<xn&&bt(tt[mt],mt,tt)!==!1;);return tt}function I_(tt,bt){for(var mt=tt==null?0:tt.length;mt--&&bt(tt[mt],mt,tt)!==!1;);return tt}function M_(tt,bt){for(var mt=-1,xn=tt==null?0:tt.length;++mt<xn;)if(!bt(tt[mt],mt,tt))return!1;return!0}function $c(tt,bt){for(var mt=-1,xn=tt==null?0:tt.length,sr=0,ti=[];++mt<xn;){var $s=tt[mt];bt($s,mt,tt)&&(ti[sr++]=$s)}return ti}function Ph(tt,bt){var mt=tt==null?0:tt.length;return!!mt&&Ih(tt,bt,0)>-1}function z1(tt,bt,mt){for(var xn=-1,sr=tt==null?0:tt.length;++xn<sr;)if(mt(bt,tt[xn]))return!0;return!1}function ss(tt,bt){for(var mt=-1,xn=tt==null?0:tt.length,sr=Array(xn);++mt<xn;)sr[mt]=bt(tt[mt],mt,tt);return sr}function Dh(tt,bt){for(var mt=-1,xn=bt.length,sr=tt.length;++mt<xn;)tt[sr+mt]=bt[mt];return tt}function Q1(tt,bt,mt,xn){var sr=-1,ti=tt==null?0:tt.length;for(xn&&ti&&(mt=tt[++sr]);++sr<ti;)mt=bt(mt,tt[sr],sr,tt);return mt}function R_(tt,bt,mt,xn){var sr=tt==null?0:tt.length;for(xn&&sr&&(mt=tt[--sr]);sr--;)mt=bt(mt,tt[sr],sr,tt);return mt}function Q0(tt,bt){for(var mt=-1,xn=tt==null?0:tt.length;++mt<xn;)if(bt(tt[mt],mt,tt))return!0;return!1}var F_=zm("length");function j1(tt){return tt.split("")}function L_(tt){return tt.match(Ir)||[]}function Bm(tt,bt,mt){var xn;return mt(tt,function(sr,ti,$s){if(bt(sr,ti,$s))return xn=ti,!1}),xn}function Sl(tt,bt,mt,xn){for(var sr=tt.length,ti=mt+(xn?1:-1);xn?ti--:++ti<sr;)if(bt(tt[ti],ti,tt))return ti;return-1}function Ih(tt,bt,mt){return bt===bt?Gd(tt,bt,mt):Sl(tt,j0,mt)}function U1(tt,bt,mt,xn){for(var sr=mt-1,ti=tt.length;++sr<ti;)if(xn(tt[sr],bt))return sr;return-1}function j0(tt){return tt!==tt}function Nm(tt,bt){var mt=tt==null?0:tt.length;return mt?Ls(tt,bt)/mt:yt}function zm(tt){return function(bt){return bt==null?n:bt[tt]}}function Bc(tt){return function(bt){return tt==null?n:tt[bt]}}function U0(tt,bt,mt,xn,sr){return sr(tt,function(ti,$s,Ui){mt=xn?(xn=!1,ti):bt(mt,ti,$s,Ui)}),mt}function EO(tt,bt){var mt=tt.length;for(tt.sort(bt);mt--;)tt[mt]=tt[mt].value;return tt}function Ls(tt,bt){for(var mt,xn=-1,sr=tt.length;++xn<sr;){var ti=bt(tt[xn]);ti!==n&&(mt=mt===n?ti:mt+ti)}return mt}function V1(tt,bt){for(var mt=-1,xn=Array(tt);++mt<tt;)xn[mt]=bt(mt);return xn}function Rr(tt,bt){return ss(bt,function(mt){return[mt,tt[mt]]})}function Qm(tt){return tt&&tt.slice(0,li(tt)+1).replace(_t,"")}function zr(tt){return function(bt){return tt(bt)}}function Ai(tt,bt){return ss(bt,function(mt){return tt[mt]})}function fu(tt,bt){return tt.has(bt)}function qd(tt,bt){for(var mt=-1,xn=tt.length;++mt<xn&&Ih(bt,tt[mt],0)>-1;);return mt}function Zd(tt,bt){for(var mt=tt.length;mt--&&Ih(bt,tt[mt],0)>-1;);return mt}function q1(tt,bt){for(var mt=tt.length,xn=0;mt--;)tt[mt]===bt&&++xn;return xn}var If=Bc(M1),Xd=Bc(B0);function kl(tt){return"\\"+F1[tt]}function Z1(tt,bt){return tt==null?n:tt[bt]}function Mh(tt){return A_.test(tt)}function X1(tt){return E_.test(tt)}function Mf(tt){for(var bt,mt=[];!(bt=tt.next()).done;)mt.push(bt.value);return mt}function Rf(tt){var bt=-1,mt=Array(tt.size);return tt.forEach(function(xn,sr){mt[++bt]=[sr,xn]}),mt}function Wd(tt,bt){return function(mt){return tt(bt(mt))}}function al(tt,bt){for(var mt=-1,xn=tt.length,sr=0,ti=[];++mt<xn;){var $s=tt[mt];($s===bt||$s===f)&&(tt[mt]=f,ti[sr++]=mt)}return ti}function Rh(tt){var bt=-1,mt=Array(tt.size);return tt.forEach(function(xn){mt[++bt]=xn}),mt}function V0(tt){var bt=-1,mt=Array(tt.size);return tt.forEach(function(xn){mt[++bt]=[xn,xn]}),mt}function Gd(tt,bt,mt){for(var xn=mt-1,sr=tt.length;++xn<sr;)if(tt[xn]===bt)return xn;return-1}function Yd(tt,bt,mt){for(var xn=mt+1;xn--;)if(tt[xn]===bt)return xn;return xn}function Ff(tt){return Mh(tt)?TO(tt):F_(tt)}function ll(tt){return Mh(tt)?$_(tt):j1(tt)}function li(tt){for(var bt=tt.length;bt--&&rt.test(tt.charAt(bt)););return bt}var q0=Bc(R1);function TO(tt){for(var bt=Eh.lastIndex=0;Eh.test(tt);)++bt;return bt}function $_(tt){return tt.match(Eh)||[]}function Hd(tt){return tt.match(SO)||[]}var B_=(function tt(bt){bt=bt==null?Fs:Nc.defaults(Fs.Object(),bt,Nc.pick(Fs,kO));var mt=bt.Array,xn=bt.Date,sr=bt.Error,ti=bt.Function,$s=bt.Math,Ui=bt.Object,Fh=bt.RegExp,jm=bt.String,Ta=bt.TypeError,Lf=mt.prototype,W1=ti.prototype,Kd=Ui.prototype,Um=bt["__core-js_shared__"],$f=W1.toString,Ei=Kd.hasOwnProperty,Vm=0,Jd=(function(){var _=/[^.]+$/.exec(Um&&Um.keys&&Um.keys.IE_PROTO||"");return _?"Symbol(src)_1."+_:""})(),Ao=Kd.toString,Bf=$f.call(Ui),N_=Fs._,z_=Fh("^"+$f.call(Ei).replace(Ie,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Cs=T_?bt.Buffer:n,Qo=bt.Symbol,fa=bt.Uint8Array,ep=Cs?Cs.allocUnsafe:n,tp=Wd(Ui.getPrototypeOf,Ui),qm=Ui.create,Nf=Kd.propertyIsEnumerable,Cl=Lf.splice,Z0=Qo?Qo.isConcatSpreadable:n,Lh=Qo?Qo.iterator:n,zc=Qo?Qo.toStringTag:n,zf=(function(){try{var _=fp(Ui,"defineProperty");return _({},"",{}),_}catch{}})(),G1=bt.clearTimeout!==Fs.clearTimeout&&bt.clearTimeout,Y1=xn&&xn.now!==Fs.Date.now&&xn.now,Qf=bt.setTimeout!==Fs.setTimeout&&bt.setTimeout,jf=$s.ceil,$h=$s.floor,Zm=Ui.getOwnPropertySymbols,H1=Cs?Cs.isBuffer:n,X0=bt.isFinite,K1=Lf.join,W0=Wd(Ui.keys,Ui),Us=$s.max,Yo=$s.min,Al=xn.now,Xu=bt.parseInt,G0=$s.random,du=Lf.reverse,Qc=fp(bt,"DataView"),Xm=fp(bt,"Map"),J1=fp(bt,"Promise"),Uf=fp(bt,"Set"),np=fp(bt,"WeakMap"),Vf=fp(Ui,"create"),jc=np&&new np,Ho={},dn=cg(Qc),Y0=cg(Xm),ev=cg(J1),Q_=cg(Uf),rp=cg(np),Uc=Qo?Qo.prototype:n,qf=Uc?Uc.valueOf:n,Qr=Uc?Uc.toString:n;function de(_){if(ho(_)&&!yr(_)&&!(_ instanceof Fr)){if(_ instanceof El)return _;if(Ei.call(_,"__wrapped__"))return LA(_)}return new El(_)}var ip=(function(){function _(){}return function(C){if(!qs(C))return{};if(qm)return qm(C);_.prototype=C;var L=new _;return _.prototype=n,L}})();function sp(){}function El(_,C){this.__wrapped__=_,this.__actions__=[],this.__chain__=!!C,this.__index__=0,this.__values__=n}de.templateSettings={escape:te,evaluate:fe,interpolate:we,variable:"",imports:{_:de}},de.prototype=sp.prototype,de.prototype.constructor=de,El.prototype=ip(sp.prototype),El.prototype.constructor=El;function Fr(_){this.__wrapped__=_,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=We,this.__views__=[]}function j_(){var _=new Fr(this.__wrapped__);return _.__actions__=hl(this.__actions__),_.__dir__=this.__dir__,_.__filtered__=this.__filtered__,_.__iteratees__=hl(this.__iteratees__),_.__takeCount__=this.__takeCount__,_.__views__=hl(this.__views__),_}function tv(){if(this.__filtered__){var _=new Fr(this);_.__dir__=-1,_.__filtered__=!0}else _=this.clone(),_.__dir__*=-1;return _}function U_(){var _=this.__wrapped__.value(),C=this.__dir__,L=yr(_),X=C<0,ie=L?_.length:0,ve=UO(0,ie,this.__views__),$e=ve.start,Ye=ve.end,it=Ye-$e,Et=X?Ye:$e-1,Tt=this.__iteratees__,jt=Tt.length,_n=0,Un=Yo(it,this.__takeCount__);if(!L||!X&&ie==it&&Un==it)return yA(_,this.__actions__);var vr=[];e:for(;it--&&_n<Un;){Et+=C;for(var ni=-1,br=_[Et];++ni<jt;){var yi=Tt[ni],Pi=yi.iteratee,Gc=yi.type,bu=Pi(br);if(Gc==xe)br=bu;else if(!bu){if(Gc==ge)continue e;break e}}vr[_n++]=br}return vr}Fr.prototype=ip(sp.prototype),Fr.prototype.constructor=Fr;function Zf(_){var C=-1,L=_==null?0:_.length;for(this.clear();++C<L;){var X=_[C];this.set(X[0],X[1])}}function nv(){this.__data__=Vf?Vf(null):{},this.size=0}function PO(_){var C=this.has(_)&&delete this.__data__[_];return this.size-=C?1:0,C}function DO(_){var C=this.__data__;if(Vf){var L=C[_];return L===l?n:L}return Ei.call(C,_)?C[_]:n}function ul(_){var C=this.__data__;return Vf?C[_]!==n:Ei.call(C,_)}function gs(_,C){var L=this.__data__;return this.size+=this.has(_)?0:1,L[_]=Vf&&C===n?l:C,this}Zf.prototype.clear=nv,Zf.prototype.delete=PO,Zf.prototype.get=DO,Zf.prototype.has=ul,Zf.prototype.set=gs;function qa(_){var C=-1,L=_==null?0:_.length;for(this.clear();++C<L;){var X=_[C];this.set(X[0],X[1])}}function H0(){this.__data__=[],this.size=0}function K0(_){var C=this.__data__,L=_e(C,_);if(L<0)return!1;var X=C.length-1;return L==X?C.pop():Cl.call(C,L,1),--this.size,!0}function V_(_){var C=this.__data__,L=_e(C,_);return L<0?n:C[L][1]}function Wm(_){return _e(this.__data__,_)>-1}function Gm(_,C){var L=this.__data__,X=_e(L,_);return X<0?(++this.size,L.push([_,C])):L[X][1]=C,this}qa.prototype.clear=H0,qa.prototype.delete=K0,qa.prototype.get=V_,qa.prototype.has=Wm,qa.prototype.set=Gm;function jo(_){var C=-1,L=_==null?0:_.length;for(this.clear();++C<L;){var X=_[C];this.set(X[0],X[1])}}function Ym(){this.size=0,this.__data__={hash:new Zf,map:new(Xm||qa),string:new Zf}}function Sn(_){var C=ag(this,_).delete(_);return this.size-=C?1:0,C}function Qn(_){return ag(this,_).get(_)}function J0(_){return ag(this,_).has(_)}function ey(_,C){var L=ag(this,_),X=L.size;return L.set(_,C),this.size+=L.size==X?0:1,this}jo.prototype.clear=Ym,jo.prototype.delete=Sn,jo.prototype.get=Qn,jo.prototype.has=J0,jo.prototype.set=ey;function Vc(_){var C=-1,L=_==null?0:_.length;for(this.__data__=new jo;++C<L;)this.add(_[C])}function E(_){return this.__data__.set(_,l),this}function u(_){return this.__data__.has(_)}Vc.prototype.add=Vc.prototype.push=E,Vc.prototype.has=u;function y(_){var C=this.__data__=new qa(_);this.size=C.size}function w(){this.__data__=new qa,this.size=0}function O(_){var C=this.__data__,L=C.delete(_);return this.size=C.size,L}function A(_){return this.__data__.get(_)}function $(_){return this.__data__.has(_)}function z(_,C){var L=this.__data__;if(L instanceof qa){var X=L.__data__;if(!Xm||X.length<i-1)return X.push([_,C]),this.size=++L.size,this;L=this.__data__=new jo(X)}return L.set(_,C),this.size=L.size,this}y.prototype.clear=w,y.prototype.delete=O,y.prototype.get=A,y.prototype.has=$,y.prototype.set=z;function U(_,C){var L=yr(_),X=!L&&hg(_),ie=!L&&!X&&nd(_),ve=!L&&!X&&!ie&&R(_),$e=L||X||ie||ve,Ye=$e?V1(_.length,jm):[],it=Ye.length;for(var Et in _)(C||Ei.call(_,Et))&&!($e&&(Et=="length"||ie&&(Et=="offset"||Et=="parent")||ve&&(Et=="buffer"||Et=="byteLength"||Et=="byteOffset")||ed(Et,it)))&&Ye.push(Et);return Ye}function G(_){var C=_.length;return C?_[X_(0,C-1)]:n}function H(_,C){return mv(hl(_),Xe(C,0,_.length))}function K(_){return mv(hl(_))}function le(_,C,L){(L!==n&&!Nl(_[C],L)||L===n&&!(C in _))&&Ne(_,C,L)}function pe(_,C,L){var X=_[C];(!(Ei.call(_,C)&&Nl(X,L))||L===n&&!(C in _))&&Ne(_,C,L)}function _e(_,C){for(var L=_.length;L--;)if(Nl(_[L][0],C))return L;return-1}function Ee(_,C,L,X){return tn(_,function(ie,ve,$e){C(X,ie,L(ie),$e)}),X}function Me(_,C){return _&&Ll(C,Vr(C),_)}function Le(_,C){return _&&Ll(C,Ti(C),_)}function Ne(_,C,L){C=="__proto__"&&zf?zf(_,C,{configurable:!0,enumerable:!0,value:L,writable:!0}):_[C]=L}function ke(_,C){for(var L=-1,X=C.length,ie=mt(X),ve=_==null;++L<X;)ie[L]=ve?n:zl(_,C[L]);return ie}function Xe(_,C,L){return _===_&&(L!==n&&(_=_<=L?_:L),C!==n&&(_=_>=C?_:C)),_}function Ke(_,C,L,X,ie,ve){var $e,Ye=C&p,it=C&g,Et=C&b;if(L&&($e=ie?L(_,X,ie,ve):L(_)),$e!==n)return $e;if(!qs(_))return _;var Tt=yr(_);if(Tt){if($e=PA(_),!Ye)return hl(_,$e)}else{var jt=ya(_),_n=jt==Ut||jt==At;if(nd(_))return _A(_,Ye);if(jt==cn||jt==ot||_n&&!ie){if($e=it||_n?{}:DA(_),!Ye)return it?ex(_,Le($e,_)):II(_,Me($e,_))}else{if(!$i[jt])return ie?_:{};$e=$I(_,jt,Ye)}}ve||(ve=new y);var Un=ve.get(_);if(Un)return Un;ve.set(_,$e),S(_)?_.forEach(function(br){$e.add(Ke(br,C,L,br,_,ve))}):vx(_)&&_.forEach(function(br,yi){$e.set(yi,Ke(br,C,L,yi,_,ve))});var vr=Et?it?jO:hp:it?Ti:Vr,ni=Tt?n:vr(_);return zo(ni||_,function(br,yi){ni&&(yi=br,br=_[yi]),pe($e,yi,Ke(br,C,L,yi,_,ve))}),$e}function st(_){var C=Vr(_);return function(L){return xt(L,_,C)}}function xt(_,C,L){var X=L.length;if(_==null)return!X;for(_=Ui(_);X--;){var ie=L[X],ve=C[ie],$e=_[ie];if($e===n&&!(ie in _)||!ve($e))return!1}return!0}function Qt(_,C,L){if(typeof _!="function")throw new Ta(o);return ay(function(){_.apply(n,L)},C)}function Gt(_,C,L,X){var ie=-1,ve=Ph,$e=!0,Ye=_.length,it=[],Et=C.length;if(!Ye)return it;L&&(C=ss(C,zr(L))),X?(ve=z1,$e=!1):C.length>=i&&(ve=fu,$e=!1,C=new Vc(C));e:for(;++ie<Ye;){var Tt=_[ie],jt=L==null?Tt:L(Tt);if(Tt=X||Tt!==0?Tt:0,$e&&jt===jt){for(var _n=Et;_n--;)if(C[_n]===jt)continue e;it.push(Tt)}else ve(C,jt,X)||it.push(Tt)}return it}var tn=LO(Yn),Zt=LO(Lr,!0);function Xt(_,C){var L=!0;return tn(_,function(X,ie,ve){return L=!!C(X,ie,ve),L}),L}function bn(_,C,L){for(var X=-1,ie=_.length;++X<ie;){var ve=_[X],$e=C(ve);if($e!=null&&(Ye===n?$e===$e&&!D($e):L($e,Ye)))var Ye=$e,it=ve}return it}function nr(_,C,L,X){var ie=_.length;for(L=ue(L),L<0&&(L=-L>ie?0:ie+L),X=X===n||X>ie?ie:ue(X),X<0&&(X+=ie),X=L>X?0:Ae(X);L<X;)_[L++]=C;return _}function Ht(_,C){var L=[];return tn(_,function(X,ie,ve){C(X,ie,ve)&&L.push(X)}),L}function Vt(_,C,L,X,ie){var ve=-1,$e=_.length;for(L||(L=NI),ie||(ie=[]);++ve<$e;){var Ye=_[ve];C>0&&L(Ye)?C>1?Vt(Ye,C-1,L,X,ie):Dh(ie,Ye):X||(ie[ie.length]=Ye)}return ie}var Wn=$O(),os=$O(!0);function Yn(_,C){return _&&Wn(_,C,Vr)}function Lr(_,C){return _&&os(_,C,Vr)}function Vi(_,C){return $c(C,function(L){return Zc(_[L])})}function to(_,C){C=zh(C,_);for(var L=0,X=C.length;_!=null&&L<X;)_=_[Qh(C[L++])];return L&&L==X?_:n}function Tl(_,C,L){var X=C(_);return yr(_)?X:Dh(X,L(_))}function Br(_){return _==null?_===n?fs:Ze:zc&&zc in Ui(_)?TA(_):qI(_)}function da(_,C){return _>C}function Pa(_,C){return _!=null&&Ei.call(_,C)}function pa(_,C){return _!=null&&C in Ui(_)}function Da(_,C,L){return _>=Yo(C,L)&&_<Us(C,L)}function Pl(_,C,L){for(var X=L?z1:Ph,ie=_[0].length,ve=_.length,$e=ve,Ye=mt(ve),it=1/0,Et=[];$e--;){var Tt=_[$e];$e&&C&&(Tt=ss(Tt,zr(C))),it=Yo(Tt.length,it),Ye[$e]=!L&&(C||ie>=120&&Tt.length>=120)?new Vc($e&&Tt):n}Tt=_[0];var jt=-1,_n=Ye[0];e:for(;++jt<ie&&Et.length<it;){var Un=Tt[jt],vr=C?C(Un):Un;if(Un=L||Un!==0?Un:0,!(_n?fu(_n,vr):X(Et,vr,L))){for($e=ve;--$e;){var ni=Ye[$e];if(!(ni?fu(ni,vr):X(_[$e],vr,L)))continue e}_n&&_n.push(vr),Et.push(Un)}}return Et}function op(_,C,L,X){return Yn(_,function(ie,ve,$e){C(X,L(ie),ve,$e)}),X}function Bh(_,C,L){C=zh(C,_),_=oy(_,C);var X=_==null?_:_[Qh(gu(C))];return X==null?n:Va(X,_,L)}function Xf(_){return ho(_)&&Br(_)==ot}function Dl(_){return ho(_)&&Br(_)==ei}function ty(_){return ho(_)&&Br(_)==Ot}function Wf(_,C,L,X,ie){return _===C?!0:_==null||C==null||!ho(_)&&!ho(C)?_!==_&&C!==C:Il(_,C,L,X,Wf,ie)}function Il(_,C,L,X,ie,ve){var $e=yr(_),Ye=yr(C),it=$e?dt:ya(_),Et=Ye?dt:ya(C);it=it==ot?cn:it,Et=Et==ot?cn:Et;var Tt=it==cn,jt=Et==cn,_n=it==Et;if(_n&&nd(_)){if(!nd(C))return!1;$e=!0,Tt=!1}if(_n&&!Tt)return ve||(ve=new y),$e||R(_)?EA(_,C,L,X,ie,ve):LI(_,C,it,L,X,ie,ve);if(!(L&x)){var Un=Tt&&Ei.call(_,"__wrapped__"),vr=jt&&Ei.call(C,"__wrapped__");if(Un||vr){var ni=Un?_.value():_,br=vr?C.value():C;return ve||(ve=new y),ie(ni,br,L,X,ve)}}return _n?(ve||(ve=new y),QO(_,C,L,X,ie,ve)):!1}function Ml(_){return ho(_)&&ya(_)==zt}function Wu(_,C,L,X){var ie=L.length,ve=ie,$e=!X;if(_==null)return!ve;for(_=Ui(_);ie--;){var Ye=L[ie];if($e&&Ye[2]?Ye[1]!==_[Ye[0]]:!(Ye[0]in _))return!1}for(;++ie<ve;){Ye=L[ie];var it=Ye[0],Et=_[it],Tt=Ye[1];if($e&&Ye[2]){if(Et===n&&!(it in _))return!1}else{var jt=new y;if(X)var _n=X(Et,Tt,it,_,C,jt);if(!(_n===n?Wf(Tt,Et,x|k,X,jt):_n))return!1}}return!0}function Rl(_){if(!qs(_)||zI(_))return!1;var C=Zc(_)?z_:hi;return C.test(cg(_))}function Ko(_){return ho(_)&&Br(_)==qn}function ma(_){return ho(_)&&ya(_)==Er}function cl(_){return ho(_)&&yp(_.length)&&!!ms[Br(_)]}function jr(_){return typeof _=="function"?_:_==null?Ku:typeof _=="object"?yr(_)?iv(_[0],_[1]):q_(_):$Q(_)}function qc(_){if(!pv(_))return W0(_);var C=[];for(var L in Ui(_))Ei.call(_,L)&&L!="constructor"&&C.push(L);return C}function ap(_){if(!qs(_))return VI(_);var C=pv(_),L=[];for(var X in _)X=="constructor"&&(C||!Ei.call(_,X))||L.push(X);return L}function Nh(_,C){return _<C}function rv(_,C){var L=-1,X=Eo(_)?mt(_.length):[];return tn(_,function(ie,ve,$e){X[++L]=C(ie,ve,$e)}),X}function q_(_){var C=lg(_);return C.length==1&&C[0][2]?WO(C[0][0],C[0][1]):function(L){return L===_||Wu(L,_,C)}}function iv(_,C){return ZO(_)&&XO(C)?WO(Qh(_),C):function(L){var X=zl(L,_);return X===n&&X===C?wo(L,_):Wf(C,X,x|k)}}function pu(_,C,L,X,ie){_!==C&&Wn(C,function(ve,$e){if(ie||(ie=new y),qs(ve))Z_(_,C,$e,L,pu,X,ie);else{var Ye=X?X(YO(_,$e),ve,$e+"",_,C,ie):n;Ye===n&&(Ye=ve),le(_,$e,Ye)}},Ti)}function Z_(_,C,L,X,ie,ve,$e){var Ye=YO(_,L),it=YO(C,L),Et=$e.get(it);if(Et){le(_,L,Et);return}var Tt=ve?ve(Ye,it,L+"",_,C,$e):n,jt=Tt===n;if(jt){var _n=yr(it),Un=!_n&&nd(it),vr=!_n&&!Un&&R(it);Tt=it,_n||Un||vr?yr(Ye)?Tt=Ye:co(Ye)?Tt=hl(Ye):Un?(jt=!1,Tt=_A(it,!0)):vr?(jt=!1,Tt=FO(it,!0)):Tt=[]:c(it)||hg(it)?(Tt=Ye,hg(Ye)?Tt=nt(Ye):(!qs(Ye)||Zc(Ye))&&(Tt=DA(it))):jt=!1}jt&&($e.set(it,Tt),ie(Tt,it,X,ve,$e),$e.delete(it)),le(_,L,Tt)}function Hm(_,C){var L=_.length;if(L)return C+=C<0?L:0,ed(C,L)?_[C]:n}function lp(_,C,L){C.length?C=ss(C,function(ve){return yr(ve)?function($e){return to($e,ve.length===1?ve[0]:ve)}:ve}):C=[Ku];var X=-1;C=ss(C,zr(Kn()));var ie=rv(_,function(ve,$e,Ye){var it=ss(C,function(Et){return Et(ve)});return{criteria:it,index:++X,value:ve}});return EO(ie,function(ve,$e){return Za(ve,$e,L)})}function ny(_,C){return Km(_,C,function(L,X){return wo(_,X)})}function Km(_,C,L){for(var X=-1,ie=C.length,ve={};++X<ie;){var $e=C[X],Ye=to(_,$e);L(Ye,$e)&&mu(ve,zh($e,_),Ye)}return ve}function up(_){return function(C){return to(C,_)}}function Gf(_,C,L,X){var ie=X?U1:Ih,ve=-1,$e=C.length,Ye=_;for(_===C&&(C=hl(C)),L&&(Ye=ss(_,zr(L)));++ve<$e;)for(var it=0,Et=C[ve],Tt=L?L(Et):Et;(it=ie(Ye,Tt,it,X))>-1;)Ye!==_&&Cl.call(Ye,it,1),Cl.call(_,it,1);return _}function sv(_,C){for(var L=_?C.length:0,X=L-1;L--;){var ie=C[L];if(L==X||ie!==ve){var ve=ie;ed(ie)?Cl.call(_,ie,1):iy(_,ie)}}return _}function X_(_,C){return _+$h(G0()*(C-_+1))}function mA(_,C,L,X){for(var ie=-1,ve=Us(jf((C-_)/(L||1)),0),$e=mt(ve);ve--;)$e[X?ve:++ie]=_,_+=L;return $e}function IO(_,C){var L="";if(!_||C<1||C>He)return L;do C%2&&(L+=_),C=$h(C/2),C&&(_+=_);while(C);return L}function Ur(_,C){return HO(sx(_,C,Ku),_+"")}function ov(_){return G(jl(_))}function ry(_,C){var L=jl(_);return mv(L,Xe(C,0,L.length))}function mu(_,C,L,X){if(!qs(_))return _;C=zh(C,_);for(var ie=-1,ve=C.length,$e=ve-1,Ye=_;Ye!=null&&++ie<ve;){var it=Qh(C[ie]),Et=L;if(it==="__proto__"||it==="constructor"||it==="prototype")return _;if(ie!=$e){var Tt=Ye[it];Et=X?X(Tt,it,Ye):n,Et===n&&(Et=qs(Tt)?Tt:ed(C[ie+1])?[]:{})}pe(Ye,it,Et),Ye=Ye[it]}return _}var Gu=jc?function(_,C){return jc.set(_,C),_}:Ku,cp=zf?function(_,C){return zf(_,"toString",{configurable:!0,enumerable:!1,value:j8(C),writable:!0})}:Ku;function gA(_){return mv(jl(_))}function ga(_,C,L){var X=-1,ie=_.length;C<0&&(C=-C>ie?0:ie+C),L=L>ie?ie:L,L<0&&(L+=ie),ie=C>L?0:L-C>>>0,C>>>=0;for(var ve=mt(ie);++X<ie;)ve[X]=_[X+C];return ve}function DI(_,C){var L;return tn(_,function(X,ie,ve){return L=C(X,ie,ve),!L}),!!L}function av(_,C,L){var X=0,ie=_==null?X:_.length;if(typeof C=="number"&&C===C&&ie<=ut){for(;X<ie;){var ve=X+ie>>>1,$e=_[ve];$e!==null&&!D($e)&&(L?$e<=C:$e<C)?X=ve+1:ie=ve}return ie}return no(_,C,Ku,L)}function no(_,C,L,X){var ie=0,ve=_==null?0:_.length;if(ve===0)return 0;C=L(C);for(var $e=C!==C,Ye=C===null,it=D(C),Et=C===n;ie<ve;){var Tt=$h((ie+ve)/2),jt=L(_[Tt]),_n=jt!==n,Un=jt===null,vr=jt===jt,ni=D(jt);if($e)var br=X||vr;else Et?br=vr&&(X||_n):Ye?br=vr&&_n&&(X||!Un):it?br=vr&&_n&&!Un&&(X||!ni):Un||ni?br=!1:br=X?jt<=C:jt<C;br?ie=Tt+1:ve=Tt}return Yo(ve,at)}function W_(_,C){for(var L=-1,X=_.length,ie=0,ve=[];++L<X;){var $e=_[L],Ye=C?C($e):$e;if(!L||!Nl(Ye,it)){var it=Ye;ve[ie++]=$e===0?0:$e}}return ve}function MO(_){return typeof _=="number"?_:D(_)?yt:+_}function Jo(_){if(typeof _=="string")return _;if(yr(_))return ss(_,Jo)+"";if(D(_))return Qr?Qr.call(_):"";var C=_+"";return C=="0"&&1/_==-De?"-0":C}function Fl(_,C,L){var X=-1,ie=Ph,ve=_.length,$e=!0,Ye=[],it=Ye;if(L)$e=!1,ie=z1;else if(ve>=i){var Et=C?null:dv(_);if(Et)return Rh(Et);$e=!1,ie=fu,it=new Vc}else it=C?[]:Ye;e:for(;++X<ve;){var Tt=_[X],jt=C?C(Tt):Tt;if(Tt=L||Tt!==0?Tt:0,$e&&jt===jt){for(var _n=it.length;_n--;)if(it[_n]===jt)continue e;C&&it.push(jt),Ye.push(Tt)}else ie(it,jt,L)||(it!==Ye&&it.push(jt),Ye.push(Tt))}return Ye}function iy(_,C){return C=zh(C,_),_=oy(_,C),_==null||delete _[Qh(gu(C))]}function G_(_,C,L,X){return mu(_,C,L(to(_,C)),X)}function lv(_,C,L,X){for(var ie=_.length,ve=X?ie:-1;(X?ve--:++ve<ie)&&C(_[ve],ve,_););return L?ga(_,X?0:ve,X?ve+1:ie):ga(_,X?ve+1:0,X?ie:ve)}function yA(_,C){var L=_;return L instanceof Fr&&(L=L.value()),Q1(C,function(X,ie){return ie.func.apply(ie.thisArg,Dh([X],ie.args))},L)}function Y_(_,C,L){var X=_.length;if(X<2)return X?Fl(_[0]):[];for(var ie=-1,ve=mt(X);++ie<X;)for(var $e=_[ie],Ye=-1;++Ye<X;)Ye!=ie&&(ve[ie]=Gt(ve[ie]||$e,_[Ye],C,L));return Fl(Vt(ve,1),C,L)}function vA(_,C,L){for(var X=-1,ie=_.length,ve=C.length,$e={};++X<ie;){var Ye=X<ve?C[X]:n;L($e,_[X],Ye)}return $e}function uv(_){return co(_)?_:[]}function RO(_){return typeof _=="function"?_:Ku}function zh(_,C){return yr(_)?_:ZO(_,C)?[_]:FA(qe(_))}var bA=Ur;function Yf(_,C,L){var X=_.length;return L=L===n?X:L,!C&&L>=X?_:ga(_,C,L)}var Jm=G1||function(_){return Fs.clearTimeout(_)};function _A(_,C){if(C)return _.slice();var L=_.length,X=ep?ep(L):new _.constructor(L);return _.copy(X),X}function eg(_){var C=new _.constructor(_.byteLength);return new fa(C).set(new fa(_)),C}function H_(_,C){var L=C?eg(_.buffer):_.buffer;return new _.constructor(L,_.byteOffset,_.byteLength)}function K_(_){var C=new _.constructor(_.source,ds.exec(_));return C.lastIndex=_.lastIndex,C}function xA(_){return qf?Ui(qf.call(_)):{}}function FO(_,C){var L=C?eg(_.buffer):_.buffer;return new _.constructor(L,_.byteOffset,_.length)}function wA(_,C){if(_!==C){var L=_!==n,X=_===null,ie=_===_,ve=D(_),$e=C!==n,Ye=C===null,it=C===C,Et=D(C);if(!Ye&&!Et&&!ve&&_>C||ve&&$e&&it&&!Ye&&!Et||X&&$e&&it||!L&&it||!ie)return 1;if(!X&&!ve&&!Et&&_<C||Et&&L&&ie&&!X&&!ve||Ye&&L&&ie||!$e&&ie||!it)return-1}return 0}function Za(_,C,L){for(var X=-1,ie=_.criteria,ve=C.criteria,$e=ie.length,Ye=L.length;++X<$e;){var it=wA(ie[X],ve[X]);if(it){if(X>=Ye)return it;var Et=L[X];return it*(Et=="desc"?-1:1)}}return _.index-C.index}function tg(_,C,L,X){for(var ie=-1,ve=_.length,$e=L.length,Ye=-1,it=C.length,Et=Us(ve-$e,0),Tt=mt(it+Et),jt=!X;++Ye<it;)Tt[Ye]=C[Ye];for(;++ie<$e;)(jt||ie<ve)&&(Tt[L[ie]]=_[ie]);for(;Et--;)Tt[Ye++]=_[ie++];return Tt}function J_(_,C,L,X){for(var ie=-1,ve=_.length,$e=-1,Ye=L.length,it=-1,Et=C.length,Tt=Us(ve-Ye,0),jt=mt(Tt+Et),_n=!X;++ie<Tt;)jt[ie]=_[ie];for(var Un=ie;++it<Et;)jt[Un+it]=C[it];for(;++$e<Ye;)(_n||ie<ve)&&(jt[Un+L[$e]]=_[ie++]);return jt}function hl(_,C){var L=-1,X=_.length;for(C||(C=mt(X));++L<X;)C[L]=_[L];return C}function Ll(_,C,L,X){var ie=!L;L||(L={});for(var ve=-1,$e=C.length;++ve<$e;){var Ye=C[ve],it=X?X(L[Ye],_[Ye],Ye,L,_):n;it===n&&(it=_[Ye]),ie?Ne(L,Ye,it):pe(L,Ye,it)}return L}function II(_,C){return Ll(_,ug(_),C)}function ex(_,C){return Ll(_,ix(_),C)}function tx(_,C){return function(L,X){var ie=yr(L)?D_:Ee,ve=C?C():{};return ie(L,_,Kn(X,2),ve)}}function ng(_){return Ur(function(C,L){var X=-1,ie=L.length,ve=ie>1?L[ie-1]:n,$e=ie>2?L[2]:n;for(ve=_.length>3&&typeof ve=="function"?(ie--,ve):n,$e&&_o(L[0],L[1],$e)&&(ve=ie<3?n:ve,ie=1),C=Ui(C);++X<ie;){var Ye=L[X];Ye&&_(C,Ye,X,ve)}return C})}function LO(_,C){return function(L,X){if(L==null)return L;if(!Eo(L))return _(L,X);for(var ie=L.length,ve=C?ie:-1,$e=Ui(L);(C?ve--:++ve<ie)&&X($e[ve],ve,$e)!==!1;);return L}}function $O(_){return function(C,L,X){for(var ie=-1,ve=Ui(C),$e=X(C),Ye=$e.length;Ye--;){var it=$e[_?Ye:++ie];if(L(ve[it],it,ve)===!1)break}return C}}function MI(_,C,L){var X=C&T,ie=ig(_);function ve(){var $e=this&&this!==Fs&&this instanceof ve?ie:_;return $e.apply(X?L:this,arguments)}return ve}function nx(_){return function(C){C=qe(C);var L=Mh(C)?ll(C):n,X=L?L[0]:C.charAt(0),ie=L?Yf(L,1).join(""):C.slice(1);return X[_]()+ie}}function rg(_){return function(C){return Q1(FQ(kS(C).replace($0,"")),_,"")}}function ig(_){return function(){var C=arguments;switch(C.length){case 0:return new _;case 1:return new _(C[0]);case 2:return new _(C[0],C[1]);case 3:return new _(C[0],C[1],C[2]);case 4:return new _(C[0],C[1],C[2],C[3]);case 5:return new _(C[0],C[1],C[2],C[3],C[4]);case 6:return new _(C[0],C[1],C[2],C[3],C[4],C[5]);case 7:return new _(C[0],C[1],C[2],C[3],C[4],C[5],C[6])}var L=ip(_.prototype),X=_.apply(L,C);return qs(X)?X:L}}function cv(_,C,L){var X=ig(_);function ie(){for(var ve=arguments.length,$e=mt(ve),Ye=ve,it=og(ie);Ye--;)$e[Ye]=arguments[Ye];var Et=ve<3&&$e[0]!==it&&$e[ve-1]!==it?[]:al($e,it);if(ve-=Et.length,ve<L)return zO(_,C,sy,ie.placeholder,n,$e,Et,n,n,L-ve);var Tt=this&&this!==Fs&&this instanceof ie?X:_;return Va(Tt,this,$e)}return ie}function $l(_){return function(C,L,X){var ie=Ui(C);if(!Eo(C)){var ve=Kn(L,3);C=Vr(C),L=function(Ye){return ve(ie[Ye],Ye,ie)}}var $e=_(C,L,X);return $e>-1?ie[ve?C[$e]:$e]:n}}function BO(_){return Jf(function(C){var L=C.length,X=L,ie=El.prototype.thru;for(_&&C.reverse();X--;){var ve=C[X];if(typeof ve!="function")throw new Ta(o);if(ie&&!$e&&sg(ve)=="wrapper")var $e=new El([],!0)}for(X=$e?X:L;++X<L;){ve=C[X];var Ye=sg(ve),it=Ye=="wrapper"?Vs(ve):n;it&&dp(it[0])&&it[1]==(q|B|Q|J)&&!it[4].length&&it[9]==1?$e=$e[sg(it[0])].apply($e,it[3]):$e=ve.length==1&&dp(ve)?$e[Ye]():$e.thru(ve)}return function(){var Et=arguments,Tt=Et[0];if($e&&Et.length==1&&yr(Tt))return $e.plant(Tt).value();for(var jt=0,_n=L?C[jt].apply(this,Et):Tt;++jt<L;)_n=C[jt].call(this,_n);return _n}})}function sy(_,C,L,X,ie,ve,$e,Ye,it,Et){var Tt=C&q,jt=C&T,_n=C&I,Un=C&(B|j),vr=C&oe,ni=_n?n:ig(_);function br(){for(var yi=arguments.length,Pi=mt(yi),Gc=yi;Gc--;)Pi[Gc]=arguments[Gc];if(Un)var bu=og(br),Yc=q1(Pi,bu);if(X&&(Pi=tg(Pi,X,ie,Un)),ve&&(Pi=J_(Pi,ve,$e,Un)),yi-=Yc,Un&&yi<Et){var na=al(Pi,bu);return zO(_,C,sy,br.placeholder,L,Pi,na,Ye,it,Et-yi)}var rd=jt?L:this,mg=_n?rd[_]:_;return yi=Pi.length,Ye?Pi=GO(Pi,Ye):vr&&yi>1&&Pi.reverse(),Tt&&it<yi&&(Pi.length=it),this&&this!==Fs&&this instanceof br&&(mg=ni||ig(mg)),mg.apply(rd,Pi)}return br}function OA(_,C){return function(L,X){return op(L,_,C(X),{})}}function hv(_,C){return function(L,X){var ie;if(L===n&&X===n)return C;if(L!==n&&(ie=L),X!==n){if(ie===n)return X;typeof L=="string"||typeof X=="string"?(L=Jo(L),X=Jo(X)):(L=MO(L),X=MO(X)),ie=_(L,X)}return ie}}function NO(_){return Jf(function(C){return C=ss(C,zr(Kn())),Ur(function(L){var X=this;return _(C,function(ie){return Va(ie,X,L)})})})}function rx(_,C){C=C===n?" ":Jo(C);var L=C.length;if(L<2)return L?IO(C,_):C;var X=IO(C,jf(_/Ff(C)));return Mh(C)?Yf(ll(X),0,_).join(""):X.slice(0,_)}function RI(_,C,L,X){var ie=C&T,ve=ig(_);function $e(){for(var Ye=-1,it=arguments.length,Et=-1,Tt=X.length,jt=mt(Tt+it),_n=this&&this!==Fs&&this instanceof $e?ve:_;++Et<Tt;)jt[Et]=X[Et];for(;it--;)jt[Et++]=arguments[++Ye];return Va(_n,ie?L:this,jt)}return $e}function SA(_){return function(C,L,X){return X&&typeof X!="number"&&_o(C,L,X)&&(L=X=n),C=he(C),L===n?(L=C,C=0):L=he(L),X=X===n?C<L?1:-1:he(X),mA(C,L,X,_)}}function fv(_){return function(C,L){return typeof C=="string"&&typeof L=="string"||(C=Te(C),L=Te(L)),_(C,L)}}function zO(_,C,L,X,ie,ve,$e,Ye,it,Et){var Tt=C&B,jt=Tt?$e:n,_n=Tt?n:$e,Un=Tt?ve:n,vr=Tt?n:ve;C|=Tt?Q:Z,C&=~(Tt?Z:Q),C&M||(C&=-4);var ni=[_,C,ie,Un,jt,vr,_n,Ye,it,Et],br=L.apply(n,ni);return dp(_)&&MA(br,ni),br.placeholder=X,RA(br,_,C)}function Hf(_){var C=$s[_];return function(L,X){if(L=Te(L),X=X==null?0:Yo(ue(X),292),X&&X0(L)){var ie=(qe(L)+"e").split("e"),ve=C(ie[0]+"e"+(+ie[1]+X));return ie=(qe(ve)+"e").split("e"),+(ie[0]+"e"+(+ie[1]-X))}return C(L)}}var dv=Uf&&1/Rh(new Uf([,-0]))[1]==De?function(_){return new Uf(_)}:q8;function kA(_){return function(C){var L=ya(C);return L==zt?Rf(C):L==Er?V0(C):Rr(C,_(C))}}function Kf(_,C,L,X,ie,ve,$e,Ye){var it=C&I;if(!it&&typeof _!="function")throw new Ta(o);var Et=X?X.length:0;if(Et||(C&=-97,X=ie=n),$e=$e===n?$e:Us(ue($e),0),Ye=Ye===n?Ye:ue(Ye),Et-=ie?ie.length:0,C&Z){var Tt=X,jt=ie;X=ie=n}var _n=it?n:Vs(_),Un=[_,C,L,X,ie,Tt,jt,ve,$e,Ye];if(_n&&UI(Un,_n),_=Un[0],C=Un[1],L=Un[2],X=Un[3],ie=Un[4],Ye=Un[9]=Un[9]===n?it?0:_.length:Us(Un[9]-Et,0),!Ye&&C&(B|j)&&(C&=-25),!C||C==T)var vr=MI(_,C,L);else C==B||C==j?vr=cv(_,C,Ye):(C==Q||C==(T|Q))&&!ie.length?vr=RI(_,C,L,X):vr=sy.apply(n,Un);var ni=_n?Gu:MA;return RA(ni(vr,Un),_,C)}function CA(_,C,L,X){return _===n||Nl(_,Kd[L])&&!Ei.call(X,L)?C:_}function AA(_,C,L,X,ie,ve){return qs(_)&&qs(C)&&(ve.set(C,_),pu(_,C,n,AA,ve),ve.delete(C)),_}function FI(_){return c(_)?n:_}function EA(_,C,L,X,ie,ve){var $e=L&x,Ye=_.length,it=C.length;if(Ye!=it&&!($e&&it>Ye))return!1;var Et=ve.get(_),Tt=ve.get(C);if(Et&&Tt)return Et==C&&Tt==_;var jt=-1,_n=!0,Un=L&k?new Vc:n;for(ve.set(_,C),ve.set(C,_);++jt<Ye;){var vr=_[jt],ni=C[jt];if(X)var br=$e?X(ni,vr,jt,C,_,ve):X(vr,ni,jt,_,C,ve);if(br!==n){if(br)continue;_n=!1;break}if(Un){if(!Q0(C,function(yi,Pi){if(!fu(Un,Pi)&&(vr===yi||ie(vr,yi,L,X,ve)))return Un.push(Pi)})){_n=!1;break}}else if(!(vr===ni||ie(vr,ni,L,X,ve))){_n=!1;break}}return ve.delete(_),ve.delete(C),_n}function LI(_,C,L,X,ie,ve,$e){switch(L){case Ct:if(_.byteLength!=C.byteLength||_.byteOffset!=C.byteOffset)return!1;_=_.buffer,C=C.buffer;case ei:return!(_.byteLength!=C.byteLength||!ve(new fa(_),new fa(C)));case Ft:case Ot:case nn:return Nl(+_,+C);case Dn:return _.name==C.name&&_.message==C.message;case qn:case Mi:return _==C+"";case zt:var Ye=Rf;case Er:var it=X&x;if(Ye||(Ye=Rh),_.size!=C.size&&!it)return!1;var Et=$e.get(_);if(Et)return Et==C;X|=k,$e.set(_,C);var Tt=EA(Ye(_),Ye(C),X,ie,ve,$e);return $e.delete(_),Tt;case gi:if(qf)return qf.call(_)==qf.call(C)}return!1}function QO(_,C,L,X,ie,ve){var $e=L&x,Ye=hp(_),it=Ye.length,Et=hp(C),Tt=Et.length;if(it!=Tt&&!$e)return!1;for(var jt=it;jt--;){var _n=Ye[jt];if(!($e?_n in C:Ei.call(C,_n)))return!1}var Un=ve.get(_),vr=ve.get(C);if(Un&&vr)return Un==C&&vr==_;var ni=!0;ve.set(_,C),ve.set(C,_);for(var br=$e;++jt<it;){_n=Ye[jt];var yi=_[_n],Pi=C[_n];if(X)var Gc=$e?X(Pi,yi,_n,C,_,ve):X(yi,Pi,_n,_,C,ve);if(!(Gc===n?yi===Pi||ie(yi,Pi,L,X,ve):Gc)){ni=!1;break}br||(br=_n=="constructor")}if(ni&&!br){var bu=_.constructor,Yc=C.constructor;bu!=Yc&&"constructor"in _&&"constructor"in C&&!(typeof bu=="function"&&bu instanceof bu&&typeof Yc=="function"&&Yc instanceof Yc)&&(ni=!1)}return ve.delete(_),ve.delete(C),ni}function Jf(_){return HO(sx(_,n,JO),_+"")}function hp(_){return Tl(_,Vr,ug)}function jO(_){return Tl(_,Ti,ix)}var Vs=jc?function(_){return jc.get(_)}:q8;function sg(_){for(var C=_.name+"",L=Ho[C],X=Ei.call(Ho,C)?L.length:0;X--;){var ie=L[X],ve=ie.func;if(ve==null||ve==_)return ie.name}return C}function og(_){var C=Ei.call(de,"placeholder")?de:_;return C.placeholder}function Kn(){var _=de.iteratee||U8;return _=_===U8?jr:_,arguments.length?_(arguments[0],arguments[1]):_}function ag(_,C){var L=_.__data__;return IA(C)?L[typeof C=="string"?"string":"hash"]:L.map}function lg(_){for(var C=Vr(_),L=C.length;L--;){var X=C[L],ie=_[X];C[L]=[X,ie,XO(ie)]}return C}function fp(_,C){var L=Z1(_,C);return Rl(L)?L:n}function TA(_){var C=Ei.call(_,zc),L=_[zc];try{_[zc]=n;var X=!0}catch{}var ie=Ao.call(_);return X&&(C?_[zc]=L:delete _[zc]),ie}var ug=Zm?function(_){return _==null?[]:(_=Ui(_),$c(Zm(_),function(C){return Nf.call(_,C)}))}:Z8,ix=Zm?function(_){for(var C=[];_;)Dh(C,ug(_)),_=tp(_);return C}:Z8,ya=Br;(Qc&&ya(new Qc(new ArrayBuffer(1)))!=Ct||Xm&&ya(new Xm)!=zt||J1&&ya(J1.resolve())!=Fn||Uf&&ya(new Uf)!=Er||np&&ya(new np)!=Hr)&&(ya=function(_){var C=Br(_),L=C==cn?_.constructor:n,X=L?cg(L):"";if(X)switch(X){case dn:return Ct;case Y0:return zt;case ev:return Fn;case Q_:return Er;case rp:return Hr}return C});function UO(_,C,L){for(var X=-1,ie=L.length;++X<ie;){var ve=L[X],$e=ve.size;switch(ve.type){case"drop":_+=$e;break;case"dropRight":C-=$e;break;case"take":C=Yo(C,_+$e);break;case"takeRight":_=Us(_,C-$e);break}}return{start:_,end:C}}function VO(_){var C=_.match(On);return C?C[1].split(In):[]}function qO(_,C,L){C=zh(C,_);for(var X=-1,ie=C.length,ve=!1;++X<ie;){var $e=Qh(C[X]);if(!(ve=_!=null&&L(_,$e)))break;_=_[$e]}return ve||++X!=ie?ve:(ie=_==null?0:_.length,!!ie&&yp(ie)&&ed($e,ie)&&(yr(_)||hg(_)))}function PA(_){var C=_.length,L=new _.constructor(C);return C&&typeof _[0]=="string"&&Ei.call(_,"index")&&(L.index=_.index,L.input=_.input),L}function DA(_){return typeof _.constructor=="function"&&!pv(_)?ip(tp(_)):{}}function $I(_,C,L){var X=_.constructor;switch(C){case ei:return eg(_);case Ft:case Ot:return new X(+_);case Ct:return H_(_,L);case Qi:case ki:case js:case Co:case Lt:case yn:case rn:case Xr:case si:return FO(_,L);case zt:return new X;case nn:case Mi:return new X(_);case qn:return K_(_);case Er:return new X;case gi:return xA(_)}}function BI(_,C){var L=C.length;if(!L)return _;var X=L-1;return C[X]=(L>1?"& ":"")+C[X],C=C.join(L>2?", ":" "),_.replace(Bt,`{
/* [wrapped with `+C+`] */
`)}function NI(_){return yr(_)||hg(_)||!!(Z0&&_&&_[Z0])}function ed(_,C){var L=typeof _;return C=C??He,!!C&&(L=="number"||L!="symbol"&&ye.test(_))&&_>-1&&_%1==0&&_<C}function _o(_,C,L){if(!qs(L))return!1;var X=typeof C;return(X=="number"?Eo(L)&&ed(C,L.length):X=="string"&&C in L)?Nl(L[C],_):!1}function ZO(_,C){if(yr(_))return!1;var L=typeof _;return L=="number"||L=="symbol"||L=="boolean"||_==null||D(_)?!0:Ge.test(_)||!ze.test(_)||C!=null&&_ in Ui(C)}function IA(_){var C=typeof _;return C=="string"||C=="number"||C=="symbol"||C=="boolean"?_!=="__proto__":_===null}function dp(_){var C=sg(_),L=de[C];if(typeof L!="function"||!(C in Fr.prototype))return!1;if(_===L)return!0;var X=Vs(L);return!!X&&_===X[0]}function zI(_){return!!Jd&&Jd in _}var QI=Um?Zc:X8;function pv(_){var C=_&&_.constructor,L=typeof C=="function"&&C.prototype||Kd;return _===L}function XO(_){return _===_&&!qs(_)}function WO(_,C){return function(L){return L==null?!1:L[_]===C&&(C!==n||_ in Ui(L))}}function jI(_){var C=Ov(_,function(X){return L.size===h&&L.clear(),X}),L=C.cache;return C}function UI(_,C){var L=_[1],X=C[1],ie=L|X,ve=ie<(T|I|q),$e=X==q&&L==B||X==q&&L==J&&_[7].length<=C[8]||X==(q|J)&&C[7].length<=C[8]&&L==B;if(!(ve||$e))return _;X&T&&(_[2]=C[2],ie|=L&T?0:M);var Ye=C[3];if(Ye){var it=_[3];_[3]=it?tg(it,Ye,C[4]):Ye,_[4]=it?al(_[3],f):C[4]}return Ye=C[5],Ye&&(it=_[5],_[5]=it?J_(it,Ye,C[6]):Ye,_[6]=it?al(_[5],f):C[6]),Ye=C[7],Ye&&(_[7]=Ye),X&q&&(_[8]=_[8]==null?C[8]:Yo(_[8],C[8])),_[9]==null&&(_[9]=C[9]),_[0]=C[0],_[1]=ie,_}function VI(_){var C=[];if(_!=null)for(var L in Ui(_))C.push(L);return C}function qI(_){return Ao.call(_)}function sx(_,C,L){return C=Us(C===n?_.length-1:C,0),function(){for(var X=arguments,ie=-1,ve=Us(X.length-C,0),$e=mt(ve);++ie<ve;)$e[ie]=X[C+ie];ie=-1;for(var Ye=mt(C+1);++ie<C;)Ye[ie]=X[ie];return Ye[C]=L($e),Va(_,this,Ye)}}function oy(_,C){return C.length<2?_:to(_,ga(C,0,-1))}function GO(_,C){for(var L=_.length,X=Yo(C.length,L),ie=hl(_);X--;){var ve=C[X];_[X]=ed(ve,L)?ie[ve]:n}return _}function YO(_,C){if(!(C==="constructor"&&typeof _[C]=="function")&&C!="__proto__")return _[C]}var MA=ly(Gu),ay=Qf||function(_,C){return Fs.setTimeout(_,C)},HO=ly(cp);function RA(_,C,L){var X=C+"";return HO(_,BI(X,ZI(VO(X),L)))}function ly(_){var C=0,L=0;return function(){var X=Al(),ie=se-(X-L);if(L=X,ie>0){if(++C>=ce)return arguments[0]}else C=0;return _.apply(n,arguments)}}function mv(_,C){var L=-1,X=_.length,ie=X-1;for(C=C===n?X:C;++L<C;){var ve=X_(L,ie),$e=_[ve];_[ve]=_[L],_[L]=$e}return _.length=C,_}var FA=jI(function(_){var C=[];return _.charCodeAt(0)===46&&C.push(""),_.replace(et,function(L,X,ie,ve){C.push(ie?ve.replace(ur,"$1"):X||L)}),C});function Qh(_){if(typeof _=="string"||D(_))return _;var C=_+"";return C=="0"&&1/_==-De?"-0":C}function cg(_){if(_!=null){try{return $f.call(_)}catch{}try{return _+""}catch{}}return""}function ZI(_,C){return zo(wt,function(L){var X="_."+L[0];C&L[1]&&!Ph(_,X)&&_.push(X)}),_.sort()}function LA(_){if(_ instanceof Fr)return _.clone();var C=new El(_.__wrapped__,_.__chain__);return C.__actions__=hl(_.__actions__),C.__index__=_.__index__,C.__values__=_.__values__,C}function XI(_,C,L){(L?_o(_,C,L):C===n)?C=1:C=Us(ue(C),0);var X=_==null?0:_.length;if(!X||C<1)return[];for(var ie=0,ve=0,$e=mt(jf(X/C));ie<X;)$e[ve++]=ga(_,ie,ie+=C);return $e}function $A(_){for(var C=-1,L=_==null?0:_.length,X=0,ie=[];++C<L;){var ve=_[C];ve&&(ie[X++]=ve)}return ie}function KO(){var _=arguments.length;if(!_)return[];for(var C=mt(_-1),L=arguments[0],X=_;X--;)C[X-1]=arguments[X];return Dh(yr(L)?hl(L):[L],Vt(C,1))}var BA=Ur(function(_,C){return co(_)?Gt(_,Vt(C,1,co,!0)):[]}),NA=Ur(function(_,C){var L=gu(C);return co(L)&&(L=n),co(_)?Gt(_,Vt(C,1,co,!0),Kn(L,2)):[]}),zA=Ur(function(_,C){var L=gu(C);return co(L)&&(L=n),co(_)?Gt(_,Vt(C,1,co,!0),n,L):[]});function WI(_,C,L){var X=_==null?0:_.length;return X?(C=L||C===n?1:ue(C),ga(_,C<0?0:C,X)):[]}function ox(_,C,L){var X=_==null?0:_.length;return X?(C=L||C===n?1:ue(C),C=X-C,ga(_,0,C<0?0:C)):[]}function GI(_,C){return _&&_.length?lv(_,Kn(C,3),!0,!0):[]}function QA(_,C){return _&&_.length?lv(_,Kn(C,3),!0):[]}function YI(_,C,L,X){var ie=_==null?0:_.length;return ie?(L&&typeof L!="number"&&_o(_,C,L)&&(L=0,X=ie),nr(_,C,L,X)):[]}function jA(_,C,L){var X=_==null?0:_.length;if(!X)return-1;var ie=L==null?0:ue(L);return ie<0&&(ie=Us(X+ie,0)),Sl(_,Kn(C,3),ie)}function UA(_,C,L){var X=_==null?0:_.length;if(!X)return-1;var ie=X-1;return L!==n&&(ie=ue(L),ie=L<0?Us(X+ie,0):Yo(ie,X-1)),Sl(_,Kn(C,3),ie,!0)}function JO(_){var C=_==null?0:_.length;return C?Vt(_,1):[]}function HI(_){var C=_==null?0:_.length;return C?Vt(_,De):[]}function KI(_,C){var L=_==null?0:_.length;return L?(C=C===n?1:ue(C),Vt(_,C)):[]}function gv(_){for(var C=-1,L=_==null?0:_.length,X={};++C<L;){var ie=_[C];X[ie[0]]=ie[1]}return X}function xo(_){return _&&_.length?_[0]:n}function VA(_,C,L){var X=_==null?0:_.length;if(!X)return-1;var ie=L==null?0:ue(L);return ie<0&&(ie=Us(X+ie,0)),Ih(_,C,ie)}function qA(_){var C=_==null?0:_.length;return C?ga(_,0,-1):[]}var ZA=Ur(function(_){var C=ss(_,uv);return C.length&&C[0]===_[0]?Pl(C):[]}),qi=Ur(function(_){var C=gu(_),L=ss(_,uv);return C===gu(L)?C=n:L.pop(),L.length&&L[0]===_[0]?Pl(L,Kn(C,2)):[]}),eS=Ur(function(_){var C=gu(_),L=ss(_,uv);return C=typeof C=="function"?C:n,C&&L.pop(),L.length&&L[0]===_[0]?Pl(L,n,C):[]});function XA(_,C){return _==null?"":K1.call(_,C)}function gu(_){var C=_==null?0:_.length;return C?_[C-1]:n}function td(_,C,L){var X=_==null?0:_.length;if(!X)return-1;var ie=X;return L!==n&&(ie=ue(L),ie=ie<0?Us(X+ie,0):Yo(ie,X-1)),C===C?Yd(_,C,ie):Sl(_,j0,ie,!0)}function JI(_,C){return _&&_.length?Hm(_,ue(C)):n}var WA=Ur(GA);function GA(_,C){return _&&_.length&&C&&C.length?Gf(_,C):_}function e8(_,C,L){return _&&_.length&&C&&C.length?Gf(_,C,Kn(L,2)):_}function t8(_,C,L){return _&&_.length&&C&&C.length?Gf(_,C,n,L):_}var n8=Jf(function(_,C){var L=_==null?0:_.length,X=ke(_,C);return sv(_,ss(C,function(ie){return ed(ie,L)?+ie:ie}).sort(wA)),X});function r8(_,C){var L=[];if(!(_&&_.length))return L;var X=-1,ie=[],ve=_.length;for(C=Kn(C,3);++X<ve;){var $e=_[X];C($e,X,_)&&(L.push($e),ie.push(X))}return sv(_,ie),L}function tS(_){return _==null?_:du.call(_)}function i8(_,C,L){var X=_==null?0:_.length;return X?(L&&typeof L!="number"&&_o(_,C,L)?(C=0,L=X):(C=C==null?0:ue(C),L=L===n?X:ue(L)),ga(_,C,L)):[]}function s8(_,C){return av(_,C)}function o8(_,C,L){return no(_,C,Kn(L,2))}function ax(_,C){var L=_==null?0:_.length;if(L){var X=av(_,C);if(X<L&&Nl(_[X],C))return X}return-1}function uy(_,C){return av(_,C,!0)}function YA(_,C,L){return no(_,C,Kn(L,2),!0)}function nS(_,C){var L=_==null?0:_.length;if(L){var X=av(_,C,!0)-1;if(Nl(_[X],C))return X}return-1}function rS(_){return _&&_.length?W_(_):[]}function a8(_,C){return _&&_.length?W_(_,Kn(C,2)):[]}function l8(_){var C=_==null?0:_.length;return C?ga(_,1,C):[]}function u8(_,C,L){return _&&_.length?(C=L||C===n?1:ue(C),ga(_,0,C<0?0:C)):[]}function HA(_,C,L){var X=_==null?0:_.length;return X?(C=L||C===n?1:ue(C),C=X-C,ga(_,C<0?0:C,X)):[]}function KA(_,C){return _&&_.length?lv(_,Kn(C,3),!1,!0):[]}function fl(_,C){return _&&_.length?lv(_,Kn(C,3)):[]}var iS=Ur(function(_){return Fl(Vt(_,1,co,!0))}),JA=Ur(function(_){var C=gu(_);return co(C)&&(C=n),Fl(Vt(_,1,co,!0),Kn(C,2))}),pp=Ur(function(_){var C=gu(_);return C=typeof C=="function"?C:n,Fl(Vt(_,1,co,!0),n,C)});function yv(_){return _&&_.length?Fl(_):[]}function vv(_,C){return _&&_.length?Fl(_,Kn(C,2)):[]}function cy(_,C){return C=typeof C=="function"?C:n,_&&_.length?Fl(_,n,C):[]}function hy(_){if(!(_&&_.length))return[];var C=0;return _=$c(_,function(L){if(co(L))return C=Us(L.length,C),!0}),V1(C,function(L){return ss(_,zm(L))})}function bv(_,C){if(!(_&&_.length))return[];var L=hy(_);return C==null?L:ss(L,function(X){return Va(C,n,X)})}var c8=Ur(function(_,C){return co(_)?Gt(_,C):[]}),h8=Ur(function(_){return Y_($c(_,co))}),eE=Ur(function(_){var C=gu(_);return co(C)&&(C=n),Y_($c(_,co),Kn(C,2))}),tE=Ur(function(_){var C=gu(_);return C=typeof C=="function"?C:n,Y_($c(_,co),n,C)}),f8=Ur(hy);function nE(_,C){return vA(_||[],C||[],pe)}function rE(_,C){return vA(_||[],C||[],mu)}var sS=Ur(function(_){var C=_.length,L=C>1?_[C-1]:n;return L=typeof L=="function"?(_.pop(),L):n,bv(_,L)});function lx(_){var C=de(_);return C.__chain__=!0,C}function d8(_,C){return C(_),_}function ux(_,C){return C(_)}var iE=Jf(function(_){var C=_.length,L=C?_[0]:0,X=this.__wrapped__,ie=function(ve){return ke(ve,_)};return C>1||this.__actions__.length||!(X instanceof Fr)||!ed(L)?this.thru(ie):(X=X.slice(L,+L+(C?1:0)),X.__actions__.push({func:ux,args:[ie],thisArg:n}),new El(X,this.__chain__).thru(function(ve){return C&&!ve.length&&ve.push(n),ve}))});function sE(){return lx(this)}function _v(){return new El(this.value(),this.__chain__)}function jh(){this.__values__===n&&(this.__values__=re(this.value()));var _=this.__index__>=this.__values__.length,C=_?n:this.__values__[this.__index__++];return{done:_,value:C}}function mp(){return this}function oE(_){for(var C,L=this;L instanceof sp;){var X=LA(L);X.__index__=0,X.__values__=n,C?ie.__wrapped__=X:C=X;var ie=X;L=L.__wrapped__}return ie.__wrapped__=_,C}function oS(){var _=this.__wrapped__;if(_ instanceof Fr){var C=_;return this.__actions__.length&&(C=new Fr(this)),C=C.reverse(),C.__actions__.push({func:ux,args:[tS],thisArg:n}),new El(C,this.__chain__)}return this.thru(tS)}function p8(){return yA(this.__wrapped__,this.__actions__)}var m8=tx(function(_,C,L){Ei.call(_,L)?++_[L]:Ne(_,L,1)});function cx(_,C,L){var X=yr(_)?M_:Xt;return L&&_o(_,C,L)&&(C=n),X(_,Kn(C,3))}function aS(_,C){var L=yr(_)?$c:Ht;return L(_,Kn(C,3))}var g8=$l(jA),lS=$l(UA);function uS(_,C){return Vt(dx(_,C),1)}function fy(_,C){return Vt(dx(_,C),De)}function aE(_,C,L){return L=L===n?1:ue(L),Vt(dx(_,C),L)}function cS(_,C){var L=yr(_)?zo:tn;return L(_,Kn(C,3))}function hx(_,C){var L=yr(_)?I_:Zt;return L(_,Kn(C,3))}var lE=tx(function(_,C,L){Ei.call(_,L)?_[L].push(C):Ne(_,L,[C])});function fx(_,C,L,X){_=Eo(_)?_:jl(_),L=L&&!X?ue(L):0;var ie=_.length;return L<0&&(L=Us(ie+L,0)),P(_)?L<=ie&&_.indexOf(C,L)>-1:!!ie&&Ih(_,C,L)>-1}var uE=Ur(function(_,C,L){var X=-1,ie=typeof C=="function",ve=Eo(_)?mt(_.length):[];return tn(_,function($e){ve[++X]=ie?Va(C,$e,L):Bh($e,C,L)}),ve}),y8=tx(function(_,C,L){Ne(_,L,C)});function dx(_,C){var L=yr(_)?ss:rv;return L(_,Kn(C,3))}function cE(_,C,L,X){return _==null?[]:(yr(C)||(C=C==null?[]:[C]),L=X?n:L,yr(L)||(L=L==null?[]:[L]),lp(_,C,L))}var v8=tx(function(_,C,L){_[L?0:1].push(C)},function(){return[[],[]]});function b8(_,C,L){var X=yr(_)?Q1:U0,ie=arguments.length<3;return X(_,Kn(C,4),L,ie,tn)}function _8(_,C,L){var X=yr(_)?R_:U0,ie=arguments.length<3;return X(_,Kn(C,4),L,ie,Zt)}function x8(_,C){var L=yr(_)?$c:Ht;return L(_,Sv(Kn(C,3)))}function hS(_){var C=yr(_)?G:ov;return C(_)}function gp(_,C,L){(L?_o(_,C,L):C===n)?C=1:C=ue(C);var X=yr(_)?H:ry;return X(_,C)}function hE(_){var C=yr(_)?K:gA;return C(_)}function fE(_){if(_==null)return 0;if(Eo(_))return P(_)?Ff(_):_.length;var C=ya(_);return C==zt||C==Er?_.size:qc(_).length}function dE(_,C,L){var X=yr(_)?Q0:DI;return L&&_o(_,C,L)&&(C=n),X(_,Kn(C,3))}var pE=Ur(function(_,C){if(_==null)return[];var L=C.length;return L>1&&_o(_,C[0],C[1])?C=[]:L>2&&_o(C[0],C[1],C[2])&&(C=[C[0]]),lp(_,Vt(C,1),[])}),xv=Y1||function(){return Fs.Date.now()};function fS(_,C){if(typeof C!="function")throw new Ta(o);return _=ue(_),function(){if(--_<1)return C.apply(this,arguments)}}function dy(_,C,L){return C=L?n:C,C=_&&C==null?_.length:C,Kf(_,q,n,n,n,n,C)}function dS(_,C){var L;if(typeof C!="function")throw new Ta(o);return _=ue(_),function(){return--_>0&&(L=C.apply(this,arguments)),_<=1&&(C=n),L}}var wv=Ur(function(_,C,L){var X=T;if(L.length){var ie=al(L,og(wv));X|=Q}return Kf(_,X,C,L,ie)}),pS=Ur(function(_,C,L){var X=T|I;if(L.length){var ie=al(L,og(pS));X|=Q}return Kf(C,X,_,L,ie)});function Bl(_,C,L){C=L?n:C;var X=Kf(_,B,n,n,n,n,n,C);return X.placeholder=Bl.placeholder,X}function py(_,C,L){C=L?n:C;var X=Kf(_,j,n,n,n,n,n,C);return X.placeholder=py.placeholder,X}function mS(_,C,L){var X,ie,ve,$e,Ye,it,Et=0,Tt=!1,jt=!1,_n=!0;if(typeof _!="function")throw new Ta(o);C=Te(C)||0,qs(L)&&(Tt=!!L.leading,jt="maxWait"in L,ve=jt?Us(Te(L.maxWait)||0,C):ve,_n="trailing"in L?!!L.trailing:_n);function Un(na){var rd=X,mg=ie;return X=ie=n,Et=na,$e=_.apply(mg,rd),$e}function vr(na){return Et=na,Ye=ay(yi,C),Tt?Un(na):$e}function ni(na){var rd=na-it,mg=na-Et,BQ=C-rd;return jt?Yo(BQ,ve-mg):BQ}function br(na){var rd=na-it,mg=na-Et;return it===n||rd>=C||rd<0||jt&&mg>=ve}function yi(){var na=xv();if(br(na))return Pi(na);Ye=ay(yi,ni(na))}function Pi(na){return Ye=n,_n&&X?Un(na):(X=ie=n,$e)}function Gc(){Ye!==n&&Jm(Ye),Et=0,X=it=ie=Ye=n}function bu(){return Ye===n?$e:Pi(xv())}function Yc(){var na=xv(),rd=br(na);if(X=arguments,ie=this,it=na,rd){if(Ye===n)return vr(it);if(jt)return Jm(Ye),Ye=ay(yi,C),Un(it)}return Ye===n&&(Ye=ay(yi,C)),$e}return Yc.cancel=Gc,Yc.flush=bu,Yc}var mE=Ur(function(_,C){return Qt(_,1,C)}),gE=Ur(function(_,C,L){return Qt(_,Te(C)||0,L)});function yE(_){return Kf(_,oe)}function Ov(_,C){if(typeof _!="function"||C!=null&&typeof C!="function")throw new Ta(o);var L=function(){var X=arguments,ie=C?C.apply(this,X):X[0],ve=L.cache;if(ve.has(ie))return ve.get(ie);var $e=_.apply(this,X);return L.cache=ve.set(ie,$e)||ve,$e};return L.cache=new(Ov.Cache||jo),L}Ov.Cache=jo;function Sv(_){if(typeof _!="function")throw new Ta(o);return function(){var C=arguments;switch(C.length){case 0:return!_.call(this);case 1:return!_.call(this,C[0]);case 2:return!_.call(this,C[0],C[1]);case 3:return!_.call(this,C[0],C[1],C[2])}return!_.apply(this,C)}}function w8(_){return dS(2,_)}var vE=bA(function(_,C){C=C.length==1&&yr(C[0])?ss(C[0],zr(Kn())):ss(Vt(C,1),zr(Kn()));var L=C.length;return Ur(function(X){for(var ie=-1,ve=Yo(X.length,L);++ie<ve;)X[ie]=C[ie].call(this,X[ie]);return Va(_,this,X)})}),Uh=Ur(function(_,C){var L=al(C,og(Uh));return Kf(_,Q,n,C,L)}),gS=Ur(function(_,C){var L=al(C,og(gS));return Kf(_,Z,n,C,L)}),bE=Jf(function(_,C){return Kf(_,J,n,n,n,C)});function _E(_,C){if(typeof _!="function")throw new Ta(o);return C=C===n?C:ue(C),Ur(_,C)}function xE(_,C){if(typeof _!="function")throw new Ta(o);return C=C==null?0:Us(ue(C),0),Ur(function(L){var X=L[C],ie=Yf(L,0,C);return X&&Dh(ie,X),Va(_,this,ie)})}function O8(_,C,L){var X=!0,ie=!0;if(typeof _!="function")throw new Ta(o);return qs(L)&&(X="leading"in L?!!L.leading:X,ie="trailing"in L?!!L.trailing:ie),mS(_,C,{leading:X,maxWait:C,trailing:ie})}function S8(_){return dy(_,1)}function wE(_,C){return Uh(RO(C),_)}function my(){if(!arguments.length)return[];var _=arguments[0];return yr(_)?_:[_]}function OE(_){return Ke(_,b)}function px(_,C){return C=typeof C=="function"?C:n,Ke(_,b,C)}function SE(_){return Ke(_,p|b)}function mx(_,C){return C=typeof C=="function"?C:n,Ke(_,p|b,C)}function gx(_,C){return C==null||xt(_,C,Vr(C))}function Nl(_,C){return _===C||_!==_&&C!==C}var k8=fv(da),C8=fv(function(_,C){return _>=C}),hg=Xf((function(){return arguments})())?Xf:function(_){return ho(_)&&Ei.call(_,"callee")&&!Nf.call(_,"callee")},yr=mt.isArray,va=L1?zr(L1):Dl;function Eo(_){return _!=null&&yp(_.length)&&!Zc(_)}function co(_){return ho(_)&&Eo(_)}function kE(_){return _===!0||_===!1||ho(_)&&Br(_)==Ft}var nd=H1||X8,yS=P_?zr(P_):ty;function A8(_){return ho(_)&&_.nodeType===1&&!c(_)}function CE(_){if(_==null)return!0;if(Eo(_)&&(yr(_)||typeof _=="string"||typeof _.splice=="function"||nd(_)||R(_)||hg(_)))return!_.length;var C=ya(_);if(C==zt||C==Er)return!_.size;if(pv(_))return!qc(_).length;for(var L in _)if(Ei.call(_,L))return!1;return!0}function AE(_,C){return Wf(_,C)}function E8(_,C,L){L=typeof L=="function"?L:n;var X=L?L(_,C):n;return X===n?Wf(_,C,n,L):!!X}function yx(_){if(!ho(_))return!1;var C=Br(_);return C==Dn||C==Kt||typeof _.message=="string"&&typeof _.name=="string"&&!c(_)}function vS(_){return typeof _=="number"&&X0(_)}function Zc(_){if(!qs(_))return!1;var C=Br(_);return C==Ut||C==At||C==Yt||C==An}function bS(_){return typeof _=="number"&&_==ue(_)}function yp(_){return typeof _=="number"&&_>-1&&_%1==0&&_<=He}function qs(_){var C=typeof _;return _!=null&&(C=="object"||C=="function")}function ho(_){return _!=null&&typeof _=="object"}var vx=$1?zr($1):Ml;function bx(_,C){return _===C||Wu(_,C,lg(C))}function kv(_,C,L){return L=typeof L=="function"?L:n,Wu(_,C,lg(C),L)}function _S(_){return d(_)&&_!=+_}function xS(_){if(QI(_))throw new sr(s);return Rl(_)}function wS(_){return _===null}function T8(_){return _==null}function d(_){return typeof _=="number"||ho(_)&&Br(_)==nn}function c(_){if(!ho(_)||Br(_)!=cn)return!1;var C=tp(_);if(C===null)return!0;var L=Ei.call(C,"constructor")&&C.constructor;return typeof L=="function"&&L instanceof L&&$f.call(L)==Bf}var m=z0?zr(z0):Ko;function v(_){return bS(_)&&_>=-He&&_<=He}var S=B1?zr(B1):ma;function P(_){return typeof _=="string"||!yr(_)&&ho(_)&&Br(_)==Mi}function D(_){return typeof _=="symbol"||ho(_)&&Br(_)==gi}var R=N1?zr(N1):cl;function N(_){return _===n}function V(_){return ho(_)&&ya(_)==Hr}function W(_){return ho(_)&&Br(_)==uo}var Y=fv(Nh),ee=fv(function(_,C){return _<=C});function re(_){if(!_)return[];if(Eo(_))return P(_)?ll(_):hl(_);if(Lh&&_[Lh])return Mf(_[Lh]());var C=ya(_),L=C==zt?Rf:C==Er?Rh:jl;return L(_)}function he(_){if(!_)return _===0?_:0;if(_=Te(_),_===De||_===-De){var C=_<0?-1:1;return C*Ue}return _===_?_:0}function ue(_){var C=he(_),L=C%1;return C===C?L?C-L:C:0}function Ae(_){return _?Xe(ue(_),0,We):0}function Te(_){if(typeof _=="number")return _;if(D(_))return yt;if(qs(_)){var C=typeof _.valueOf=="function"?_.valueOf():_;_=qs(C)?C+"":C}if(typeof _!="string")return _===0?_:+_;_=Qm(_);var L=gr.test(_);return L||an.test(_)?AO(_.slice(2),L?2:8):ji.test(_)?yt:+_}function nt(_){return Ll(_,Ti(_))}function Ve(_){return _?Xe(ue(_),-He,He):_===0?_:0}function qe(_){return _==null?"":Jo(_)}var pt=ng(function(_,C){if(pv(C)||Eo(C)){Ll(C,Vr(C),_);return}for(var L in C)Ei.call(C,L)&&pe(_,L,C[L])}),Dt=ng(function(_,C){Ll(C,Ti(C),_)}),ln=ng(function(_,C,L,X){Ll(C,Ti(C),_,X)}),zn=ng(function(_,C,L,X){Ll(C,Vr(C),_,X)}),un=Jf(ke);function en(_,C){var L=ip(_);return C==null?L:Me(L,C)}var Pn=Ur(function(_,C){_=Ui(_);var L=-1,X=C.length,ie=X>2?C[2]:n;for(ie&&_o(C[0],C[1],ie)&&(X=1);++L<X;)for(var ve=C[L],$e=Ti(ve),Ye=-1,it=$e.length;++Ye<it;){var Et=$e[Ye],Tt=_[Et];(Tt===n||Nl(Tt,Kd[Et])&&!Ei.call(_,Et))&&(_[Et]=ve[Et])}return _}),vn=Ur(function(_){return _.push(n,AA),Va(ea,n,_)});function fn(_,C){return Bm(_,Kn(C,3),Yn)}function vt(_,C){return Bm(_,Kn(C,3),Lr)}function Mn(_,C){return _==null?_:Wn(_,Kn(C,3),Ti)}function En(_,C){return _==null?_:os(_,Kn(C,3),Ti)}function Jn(_,C){return _&&Yn(_,Kn(C,3))}function Ki(_,C){return _&&Lr(_,Kn(C,3))}function Zi(_){return _==null?[]:Vi(_,Vr(_))}function Uo(_){return _==null?[]:Vi(_,Ti(_))}function zl(_,C,L){var X=_==null?n:to(_,C);return X===n?L:X}function ba(_,C){return _!=null&&qO(_,C,Pa)}function wo(_,C){return _!=null&&qO(_,C,pa)}var Xa=OA(function(_,C,L){C!=null&&typeof C.toString!="function"&&(C=Ao.call(C)),_[C]=L},j8(Ku)),Wa=OA(function(_,C,L){C!=null&&typeof C.toString!="function"&&(C=Ao.call(C)),Ei.call(_,C)?_[C].push(L):_[C]=[L]},Kn),Ga=Ur(Bh);function Vr(_){return Eo(_)?U(_):qc(_)}function Ti(_){return Eo(_)?U(_,!0):ap(_)}function Ia(_,C){var L={};return C=Kn(C,3),Yn(_,function(X,ie,ve){Ne(L,C(X,ie,ve),X)}),L}function _a(_,C){var L={};return C=Kn(C,3),Yn(_,function(X,ie,ve){Ne(L,ie,C(X,ie,ve))}),L}var Ya=ng(function(_,C,L){pu(_,C,L)}),ea=ng(function(_,C,L,X){pu(_,C,L,X)}),yu=Jf(function(_,C){var L={};if(_==null)return L;var X=!1;C=ss(C,function(ve){return ve=zh(ve,_),X||(X=ve.length>1),ve}),Ll(_,jO(_),L),X&&(L=Ke(L,p|g|b,FI));for(var ie=C.length;ie--;)iy(L,C[ie]);return L});function dl(_,C){return Ji(_,Sv(Kn(C)))}var di=Jf(function(_,C){return _==null?{}:ny(_,C)});function Ji(_,C){if(_==null)return{};var L=ss(jO(_),function(X){return[X]});return C=Kn(C),Km(_,L,function(X,ie){return C(X,ie[0])})}function ys(_,C,L){C=zh(C,_);var X=-1,ie=C.length;for(ie||(ie=1,_=n);++X<ie;){var ve=_==null?n:_[Qh(C[X])];ve===n&&(X=ie,ve=L),_=Zc(ve)?ve.call(_):ve}return _}function Ql(_,C,L){return _==null?_:mu(_,C,L)}function Zs(_,C,L,X){return X=typeof X=="function"?X:n,_==null?_:mu(_,C,L,X)}var fg=kA(Vr),Xc=kA(Ti);function Vh(_,C,L){var X=yr(_),ie=X||nd(_)||R(_);if(C=Kn(C,4),L==null){var ve=_&&_.constructor;ie?L=X?new ve:[]:qs(_)?L=Zc(ve)?ip(tp(_)):{}:L={}}return(ie?zo:Yn)(_,function($e,Ye,it){return C(L,$e,Ye,it)}),L}function Yu(_,C){return _==null?!0:iy(_,C)}function vu(_,C,L){return _==null?_:G_(_,C,RO(L))}function ta(_,C,L,X){return X=typeof X=="function"?X:n,_==null?_:G_(_,C,RO(L),X)}function jl(_){return _==null?[]:Ai(_,Vr(_))}function Cv(_){return _==null?[]:Ai(_,Ti(_))}function EE(_,C,L){return L===n&&(L=C,C=n),L!==n&&(L=Te(L),L=L===L?L:0),C!==n&&(C=Te(C),C=C===C?C:0),Xe(Te(_),C,L)}function TE(_,C,L){return C=he(C),L===n?(L=C,C=0):L=he(L),_=Te(_),Da(_,C,L)}function OS(_,C,L){if(L&&typeof L!="boolean"&&_o(_,C,L)&&(C=L=n),L===n&&(typeof C=="boolean"?(L=C,C=n):typeof _=="boolean"&&(L=_,_=n)),_===n&&C===n?(_=0,C=1):(_=he(_),C===n?(C=_,_=0):C=he(C)),_>C){var X=_;_=C,C=X}if(L||_%1||C%1){var ie=G0();return Yo(_+ie*(C-_+qu("1e-"+((ie+"").length-1))),C)}return X_(_,C)}var SS=rg(function(_,C,L){return C=C.toLowerCase(),_+(L?qh(C):C)});function qh(_){return Q8(qe(_).toLowerCase())}function kS(_){return _=qe(_),_&&_.replace(Je,If).replace(C_,"")}function PE(_,C,L){_=qe(_),C=Jo(C);var X=_.length;L=L===n?X:Xe(ue(L),0,X);var ie=L;return L-=C.length,L>=0&&_.slice(L,ie)==C}function P8(_){return _=qe(_),_&&ne.test(_)?_.replace(Fi,Xd):_}function D8(_){return _=qe(_),_&&ht.test(_)?_.replace(Ie,"\\$&"):_}var I8=rg(function(_,C,L){return _+(L?"-":"")+C.toLowerCase()}),M8=rg(function(_,C,L){return _+(L?" ":"")+C.toLowerCase()}),R8=nx("toLowerCase");function F8(_,C,L){_=qe(_),C=ue(C);var X=C?Ff(_):0;if(!C||X>=C)return _;var ie=(C-X)/2;return rx($h(ie),L)+_+rx(jf(ie),L)}function L8(_,C,L){_=qe(_),C=ue(C);var X=C?Ff(_):0;return C&&X<C?_+rx(C-X,L):_}function $8(_,C,L){_=qe(_),C=ue(C);var X=C?Ff(_):0;return C&&X<C?rx(C-X,L)+_:_}function Wc(_,C,L){return L||C==null?C=0:C&&(C=+C),Xu(qe(_).replace(_t,""),C||0)}function _x(_,C,L){return(L?_o(_,C,L):C===n)?C=1:C=ue(C),IO(qe(_),C)}function DE(){var _=arguments,C=qe(_[0]);return _.length<3?C:C.replace(_[1],_[2])}var B8=rg(function(_,C,L){return _+(L?"_":"")+C.toLowerCase()});function N8(_,C,L){return L&&typeof L!="number"&&_o(_,C,L)&&(C=L=n),L=L===n?We:L>>>0,L?(_=qe(_),_&&(typeof C=="string"||C!=null&&!m(C))&&(C=Jo(C),!C&&Mh(_))?Yf(ll(_),0,L):_.split(C,L)):[]}var z8=rg(function(_,C,L){return _+(L?" ":"")+Q8(C)});function Ma(_,C,L){return _=qe(_),L=L==null?0:Xe(ue(L),0,_.length),C=Jo(C),_.slice(L,L+C.length)==C}function Hu(_,C,L){var X=de.templateSettings;L&&_o(_,C,L)&&(C=n),_=qe(_),C=ln({},C,X,CA);var ie=ln({},C.imports,X.imports,CA),ve=Vr(ie),$e=Ai(ie,ve),Ye,it,Et=0,Tt=C.interpolate||ft,jt="__p += '",_n=Fh((C.escape||ft).source+"|"+Tt.source+"|"+(Tt===we?Cr:ft).source+"|"+(C.evaluate||ft).source+"|$","g"),Un="//# sourceURL="+(Ei.call(C,"sourceURL")?(C.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++CO+"]")+`
`;_.replace(_n,function(br,yi,Pi,Gc,bu,Yc){return Pi||(Pi=Gc),jt+=_.slice(Et,Yc).replace(Wt,kl),yi&&(Ye=!0,jt+=`' +
__e(`+yi+`) +
'`),bu&&(it=!0,jt+=`';
`+bu+`;
__p += '`),Pi&&(jt+=`' +
((__t = (`+Pi+`)) == null ? '' : __t) +
'`),Et=Yc+br.length,br}),jt+=`';
`;var vr=Ei.call(C,"variable")&&C.variable;if(!vr)jt=`with (obj) {
`+jt+`
}
`;else if(Gn.test(vr))throw new sr(a);jt=(it?jt.replace(Tn,""):jt).replace(Ms,"$1").replace(Ri,"$1;"),jt="function("+(vr||"obj")+`) {
`+(vr?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(Ye?", __e = _.escape":"")+(it?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+jt+`return __p
}`;var ni=LQ(function(){return ti(ve,Un+"return "+jt).apply(n,$e)});if(ni.source=jt,yx(ni))throw ni;return ni}function dg(_){return qe(_).toLowerCase()}function Zh(_){return qe(_).toUpperCase()}function pg(_,C,L){if(_=qe(_),_&&(L||C===n))return Qm(_);if(!_||!(C=Jo(C)))return _;var X=ll(_),ie=ll(C),ve=qd(X,ie),$e=Zd(X,ie)+1;return Yf(X,ve,$e).join("")}function Xh(_,C,L){if(_=qe(_),_&&(L||C===n))return _.slice(0,li(_)+1);if(!_||!(C=Jo(C)))return _;var X=ll(_),ie=Zd(X,ll(C))+1;return Yf(X,0,ie).join("")}function tde(_,C,L){if(_=qe(_),_&&(L||C===n))return _.replace(_t,"");if(!_||!(C=Jo(C)))return _;var X=ll(_),ie=qd(X,ll(C));return Yf(X,ie).join("")}function nde(_,C){var L=me,X=ae;if(qs(C)){var ie="separator"in C?C.separator:ie;L="length"in C?ue(C.length):L,X="omission"in C?Jo(C.omission):X}_=qe(_);var ve=_.length;if(Mh(_)){var $e=ll(_);ve=$e.length}if(L>=ve)return _;var Ye=L-Ff(X);if(Ye<1)return X;var it=$e?Yf($e,0,Ye).join(""):_.slice(0,Ye);if(ie===n)return it+X;if($e&&(Ye+=it.length-Ye),m(ie)){if(_.slice(Ye).search(ie)){var Et,Tt=it;for(ie.global||(ie=Fh(ie.source,qe(ds.exec(ie))+"g")),ie.lastIndex=0;Et=ie.exec(Tt);)var jt=Et.index;it=it.slice(0,jt===n?Ye:jt)}}else if(_.indexOf(Jo(ie),Ye)!=Ye){var _n=it.lastIndexOf(ie);_n>-1&&(it=it.slice(0,_n))}return it+X}function rde(_){return _=qe(_),_&&Oe.test(_)?_.replace(oi,q0):_}var ide=rg(function(_,C,L){return _+(L?" ":"")+C.toUpperCase()}),Q8=nx("toUpperCase");function FQ(_,C,L){return _=qe(_),C=L?n:C,C===n?X1(_)?Hd(_):L_(_):_.match(C)||[]}var LQ=Ur(function(_,C){try{return Va(_,n,C)}catch(L){return yx(L)?L:new sr(L)}}),sde=Jf(function(_,C){return zo(C,function(L){L=Qh(L),Ne(_,L,wv(_[L],_))}),_});function ode(_){var C=_==null?0:_.length,L=Kn();return _=C?ss(_,function(X){if(typeof X[1]!="function")throw new Ta(o);return[L(X[0]),X[1]]}):[],Ur(function(X){for(var ie=-1;++ie<C;){var ve=_[ie];if(Va(ve[0],this,X))return Va(ve[1],this,X)}})}function ade(_){return st(Ke(_,p))}function j8(_){return function(){return _}}function lde(_,C){return _==null||_!==_?C:_}var ude=BO(),cde=BO(!0);function Ku(_){return _}function U8(_){return jr(typeof _=="function"?_:Ke(_,p))}function hde(_){return q_(Ke(_,p))}function fde(_,C){return iv(_,Ke(C,p))}var dde=Ur(function(_,C){return function(L){return Bh(L,_,C)}}),pde=Ur(function(_,C){return function(L){return Bh(_,L,C)}});function V8(_,C,L){var X=Vr(C),ie=Vi(C,X);L==null&&!(qs(C)&&(ie.length||!X.length))&&(L=C,C=_,_=this,ie=Vi(C,Vr(C)));var ve=!(qs(L)&&"chain"in L)||!!L.chain,$e=Zc(_);return zo(ie,function(Ye){var it=C[Ye];_[Ye]=it,$e&&(_.prototype[Ye]=function(){var Et=this.__chain__;if(ve||Et){var Tt=_(this.__wrapped__),jt=Tt.__actions__=hl(this.__actions__);return jt.push({func:it,args:arguments,thisArg:_}),Tt.__chain__=Et,Tt}return it.apply(_,Dh([this.value()],arguments))})}),_}function mde(){return Fs._===this&&(Fs._=N_),this}function q8(){}function gde(_){return _=ue(_),Ur(function(C){return Hm(C,_)})}var yde=NO(ss),vde=NO(M_),bde=NO(Q0);function $Q(_){return ZO(_)?zm(Qh(_)):up(_)}function _de(_){return function(C){return _==null?n:to(_,C)}}var xde=SA(),wde=SA(!0);function Z8(){return[]}function X8(){return!1}function Ode(){return{}}function Sde(){return""}function kde(){return!0}function Cde(_,C){if(_=ue(_),_<1||_>He)return[];var L=We,X=Yo(_,We);C=Kn(C),_-=We;for(var ie=V1(X,C);++L<_;)C(L);return ie}function Ade(_){return yr(_)?ss(_,Qh):D(_)?[_]:hl(FA(qe(_)))}function Ede(_){var C=++Vm;return qe(_)+C}var Tde=hv(function(_,C){return _+C},0),Pde=Hf("ceil"),Dde=hv(function(_,C){return _/C},1),Ide=Hf("floor");function Mde(_){return _&&_.length?bn(_,Ku,da):n}function Rde(_,C){return _&&_.length?bn(_,Kn(C,2),da):n}function Fde(_){return Nm(_,Ku)}function Lde(_,C){return Nm(_,Kn(C,2))}function $de(_){return _&&_.length?bn(_,Ku,Nh):n}function Bde(_,C){return _&&_.length?bn(_,Kn(C,2),Nh):n}var Nde=hv(function(_,C){return _*C},1),zde=Hf("round"),Qde=hv(function(_,C){return _-C},0);function jde(_){return _&&_.length?Ls(_,Ku):0}function Ude(_,C){return _&&_.length?Ls(_,Kn(C,2)):0}return de.after=fS,de.ary=dy,de.assign=pt,de.assignIn=Dt,de.assignInWith=ln,de.assignWith=zn,de.at=un,de.before=dS,de.bind=wv,de.bindAll=sde,de.bindKey=pS,de.castArray=my,de.chain=lx,de.chunk=XI,de.compact=$A,de.concat=KO,de.cond=ode,de.conforms=ade,de.constant=j8,de.countBy=m8,de.create=en,de.curry=Bl,de.curryRight=py,de.debounce=mS,de.defaults=Pn,de.defaultsDeep=vn,de.defer=mE,de.delay=gE,de.difference=BA,de.differenceBy=NA,de.differenceWith=zA,de.drop=WI,de.dropRight=ox,de.dropRightWhile=GI,de.dropWhile=QA,de.fill=YI,de.filter=aS,de.flatMap=uS,de.flatMapDeep=fy,de.flatMapDepth=aE,de.flatten=JO,de.flattenDeep=HI,de.flattenDepth=KI,de.flip=yE,de.flow=ude,de.flowRight=cde,de.fromPairs=gv,de.functions=Zi,de.functionsIn=Uo,de.groupBy=lE,de.initial=qA,de.intersection=ZA,de.intersectionBy=qi,de.intersectionWith=eS,de.invert=Xa,de.invertBy=Wa,de.invokeMap=uE,de.iteratee=U8,de.keyBy=y8,de.keys=Vr,de.keysIn=Ti,de.map=dx,de.mapKeys=Ia,de.mapValues=_a,de.matches=hde,de.matchesProperty=fde,de.memoize=Ov,de.merge=Ya,de.mergeWith=ea,de.method=dde,de.methodOf=pde,de.mixin=V8,de.negate=Sv,de.nthArg=gde,de.omit=yu,de.omitBy=dl,de.once=w8,de.orderBy=cE,de.over=yde,de.overArgs=vE,de.overEvery=vde,de.overSome=bde,de.partial=Uh,de.partialRight=gS,de.partition=v8,de.pick=di,de.pickBy=Ji,de.property=$Q,de.propertyOf=_de,de.pull=WA,de.pullAll=GA,de.pullAllBy=e8,de.pullAllWith=t8,de.pullAt=n8,de.range=xde,de.rangeRight=wde,de.rearg=bE,de.reject=x8,de.remove=r8,de.rest=_E,de.reverse=tS,de.sampleSize=gp,de.set=Ql,de.setWith=Zs,de.shuffle=hE,de.slice=i8,de.sortBy=pE,de.sortedUniq=rS,de.sortedUniqBy=a8,de.split=N8,de.spread=xE,de.tail=l8,de.take=u8,de.takeRight=HA,de.takeRightWhile=KA,de.takeWhile=fl,de.tap=d8,de.throttle=O8,de.thru=ux,de.toArray=re,de.toPairs=fg,de.toPairsIn=Xc,de.toPath=Ade,de.toPlainObject=nt,de.transform=Vh,de.unary=S8,de.union=iS,de.unionBy=JA,de.unionWith=pp,de.uniq=yv,de.uniqBy=vv,de.uniqWith=cy,de.unset=Yu,de.unzip=hy,de.unzipWith=bv,de.update=vu,de.updateWith=ta,de.values=jl,de.valuesIn=Cv,de.without=c8,de.words=FQ,de.wrap=wE,de.xor=h8,de.xorBy=eE,de.xorWith=tE,de.zip=f8,de.zipObject=nE,de.zipObjectDeep=rE,de.zipWith=sS,de.entries=fg,de.entriesIn=Xc,de.extend=Dt,de.extendWith=ln,V8(de,de),de.add=Tde,de.attempt=LQ,de.camelCase=SS,de.capitalize=qh,de.ceil=Pde,de.clamp=EE,de.clone=OE,de.cloneDeep=SE,de.cloneDeepWith=mx,de.cloneWith=px,de.conformsTo=gx,de.deburr=kS,de.defaultTo=lde,de.divide=Dde,de.endsWith=PE,de.eq=Nl,de.escape=P8,de.escapeRegExp=D8,de.every=cx,de.find=g8,de.findIndex=jA,de.findKey=fn,de.findLast=lS,de.findLastIndex=UA,de.findLastKey=vt,de.floor=Ide,de.forEach=cS,de.forEachRight=hx,de.forIn=Mn,de.forInRight=En,de.forOwn=Jn,de.forOwnRight=Ki,de.get=zl,de.gt=k8,de.gte=C8,de.has=ba,de.hasIn=wo,de.head=xo,de.identity=Ku,de.includes=fx,de.indexOf=VA,de.inRange=TE,de.invoke=Ga,de.isArguments=hg,de.isArray=yr,de.isArrayBuffer=va,de.isArrayLike=Eo,de.isArrayLikeObject=co,de.isBoolean=kE,de.isBuffer=nd,de.isDate=yS,de.isElement=A8,de.isEmpty=CE,de.isEqual=AE,de.isEqualWith=E8,de.isError=yx,de.isFinite=vS,de.isFunction=Zc,de.isInteger=bS,de.isLength=yp,de.isMap=vx,de.isMatch=bx,de.isMatchWith=kv,de.isNaN=_S,de.isNative=xS,de.isNil=T8,de.isNull=wS,de.isNumber=d,de.isObject=qs,de.isObjectLike=ho,de.isPlainObject=c,de.isRegExp=m,de.isSafeInteger=v,de.isSet=S,de.isString=P,de.isSymbol=D,de.isTypedArray=R,de.isUndefined=N,de.isWeakMap=V,de.isWeakSet=W,de.join=XA,de.kebabCase=I8,de.last=gu,de.lastIndexOf=td,de.lowerCase=M8,de.lowerFirst=R8,de.lt=Y,de.lte=ee,de.max=Mde,de.maxBy=Rde,de.mean=Fde,de.meanBy=Lde,de.min=$de,de.minBy=Bde,de.stubArray=Z8,de.stubFalse=X8,de.stubObject=Ode,de.stubString=Sde,de.stubTrue=kde,de.multiply=Nde,de.nth=JI,de.noConflict=mde,de.noop=q8,de.now=xv,de.pad=F8,de.padEnd=L8,de.padStart=$8,de.parseInt=Wc,de.random=OS,de.reduce=b8,de.reduceRight=_8,de.repeat=_x,de.replace=DE,de.result=ys,de.round=zde,de.runInContext=tt,de.sample=hS,de.size=fE,de.snakeCase=B8,de.some=dE,de.sortedIndex=s8,de.sortedIndexBy=o8,de.sortedIndexOf=ax,de.sortedLastIndex=uy,de.sortedLastIndexBy=YA,de.sortedLastIndexOf=nS,de.startCase=z8,de.startsWith=Ma,de.subtract=Qde,de.sum=jde,de.sumBy=Ude,de.template=Hu,de.times=Cde,de.toFinite=he,de.toInteger=ue,de.toLength=Ae,de.toLower=dg,de.toNumber=Te,de.toSafeInteger=Ve,de.toString=qe,de.toUpper=Zh,de.trim=pg,de.trimEnd=Xh,de.trimStart=tde,de.truncate=nde,de.unescape=rde,de.uniqueId=Ede,de.upperCase=ide,de.upperFirst=Q8,de.each=cS,de.eachRight=hx,de.first=xo,V8(de,(function(){var _={};return Yn(de,function(C,L){Ei.call(de.prototype,L)||(_[L]=C)}),_})(),{chain:!1}),de.VERSION=r,zo(["bind","bindKey","curry","curryRight","partial","partialRight"],function(_){de[_].placeholder=de}),zo(["drop","take"],function(_,C){Fr.prototype[_]=function(L){L=L===n?1:Us(ue(L),0);var X=this.__filtered__&&!C?new Fr(this):this.clone();return X.__filtered__?X.__takeCount__=Yo(L,X.__takeCount__):X.__views__.push({size:Yo(L,We),type:_+(X.__dir__<0?"Right":"")}),X},Fr.prototype[_+"Right"]=function(L){return this.reverse()[_](L).reverse()}}),zo(["filter","map","takeWhile"],function(_,C){var L=C+1,X=L==ge||L==Se;Fr.prototype[_]=function(ie){var ve=this.clone();return ve.__iteratees__.push({iteratee:Kn(ie,3),type:L}),ve.__filtered__=ve.__filtered__||X,ve}}),zo(["head","last"],function(_,C){var L="take"+(C?"Right":"");Fr.prototype[_]=function(){return this[L](1).value()[0]}}),zo(["initial","tail"],function(_,C){var L="drop"+(C?"":"Right");Fr.prototype[_]=function(){return this.__filtered__?new Fr(this):this[L](1)}}),Fr.prototype.compact=function(){return this.filter(Ku)},Fr.prototype.find=function(_){return this.filter(_).head()},Fr.prototype.findLast=function(_){return this.reverse().find(_)},Fr.prototype.invokeMap=Ur(function(_,C){return typeof _=="function"?new Fr(this):this.map(function(L){return Bh(L,_,C)})}),Fr.prototype.reject=function(_){return this.filter(Sv(Kn(_)))},Fr.prototype.slice=function(_,C){_=ue(_);var L=this;return L.__filtered__&&(_>0||C<0)?new Fr(L):(_<0?L=L.takeRight(-_):_&&(L=L.drop(_)),C!==n&&(C=ue(C),L=C<0?L.dropRight(-C):L.take(C-_)),L)},Fr.prototype.takeRightWhile=function(_){return this.reverse().takeWhile(_).reverse()},Fr.prototype.toArray=function(){return this.take(We)},Yn(Fr.prototype,function(_,C){var L=/^(?:filter|find|map|reject)|While$/.test(C),X=/^(?:head|last)$/.test(C),ie=de[X?"take"+(C=="last"?"Right":""):C],ve=X||/^find/.test(C);ie&&(de.prototype[C]=function(){var $e=this.__wrapped__,Ye=X?[1]:arguments,it=$e instanceof Fr,Et=Ye[0],Tt=it||yr($e),jt=function(yi){var Pi=ie.apply(de,Dh([yi],Ye));return X&&_n?Pi[0]:Pi};Tt&&L&&typeof Et=="function"&&Et.length!=1&&(it=Tt=!1);var _n=this.__chain__,Un=!!this.__actions__.length,vr=ve&&!_n,ni=it&&!Un;if(!ve&&Tt){$e=ni?$e:new Fr(this);var br=_.apply($e,Ye);return br.__actions__.push({func:ux,args:[jt],thisArg:n}),new El(br,_n)}return vr&&ni?_.apply(this,Ye):(br=this.thru(jt),vr?X?br.value()[0]:br.value():br)})}),zo(["pop","push","shift","sort","splice","unshift"],function(_){var C=Lf[_],L=/^(?:push|sort|unshift)$/.test(_)?"tap":"thru",X=/^(?:pop|shift)$/.test(_);de.prototype[_]=function(){var ie=arguments;if(X&&!this.__chain__){var ve=this.value();return C.apply(yr(ve)?ve:[],ie)}return this[L](function($e){return C.apply(yr($e)?$e:[],ie)})}}),Yn(Fr.prototype,function(_,C){var L=de[C];if(L){var X=L.name+"";Ei.call(Ho,X)||(Ho[X]=[]),Ho[X].push({name:C,func:L})}}),Ho[sy(n,I).name]=[{name:"wrapper",func:n}],Fr.prototype.clone=j_,Fr.prototype.reverse=tv,Fr.prototype.value=U_,de.prototype.at=iE,de.prototype.chain=sE,de.prototype.commit=_v,de.prototype.next=jh,de.prototype.plant=oE,de.prototype.reverse=oS,de.prototype.toJSON=de.prototype.valueOf=de.prototype.value=p8,de.prototype.first=de.prototype.head,Lh&&(de.prototype[Lh]=mp),de}),Nc=B_();Zu?((Zu.exports=Nc)._=Nc,fi._=Nc):Fs._=Nc}).call(sHe)})(Y5,Y5.exports)),Y5.exports}var $L=oHe();const Ffe=IQ($L),aHe={headerHeight:null,columnConfigs:{},onColumnConfigsChange:()=>{},minColumnWidths:{},rowRenderBatchSize:4,minFetchSize:1,renderWindowOffset:400,verticalScrollbarPillHeight:4,verticalScrollbarWidth:24,horizontalScrollbarHeight:16,lineHeight:20,textMaxLines:3,betweenRowPadding:8,betweenColPadding:24,scrollOverflowValue:1e6,onRowClick:null,highlightedRows:null,firstColLeftPadding:8,showRowNumber:!0,onShowRowNumberChange:()=>{},highlightHoveredRow:!1,get rowHeight(){return this.textMaxLines*this.lineHeight+this.betweenRowPadding},DEFAULT_TEXT_MAX_LINES:3,DEFAULT_LINE_HEIGHT:20,DEFAULT_ROW_NUMBER_COL_WIDTH:60};class lHe{#e=Nn(Hl(aHe));get config(){return Pe(this.#e)}set config(e){Rt(this.#e,e,!0)}}const jG=Symbol("config");class Ps{static initialize(){nf(jG,new lHe)}static get config(){const e=ac(jG);if(e==null)throw new Error("config context not yet set");return e.config}}class uHe{tableModel;tableController;margin=2;isDragging=!1;lastDragX=0;#e=Nn(0);get elementWidth(){return Pe(this.#e)}set elementWidth(e){Rt(this.#e,e,!0)}#t=qt(()=>this.elementWidth-this.margin*2);get scrollbarWidth(){return Pe(this.#t)}set scrollbarWidth(e){Rt(this.#t,e)}#n=qt(()=>this.tableController.viewWidth/this.tableModel.colsRightmostPosition*this.scrollbarWidth);get pillWidth(){return Pe(this.#n)}set pillWidth(e){Rt(this.#n,e)}#r=qt(()=>-this.tableController.xScroll/this.tableModel.colsRightmostPosition*this.scrollbarWidth);get pillLeft(){return Pe(this.#r)}set pillLeft(e){Rt(this.#r,e)}constructor({tableModel:e,tableController:n}){this.tableModel=e,this.tableController=n}handlePointerDown=e=>{e.preventDefault(),e.target.setPointerCapture(e.pointerId),this.isDragging=!0,this.lastDragX=e.offsetX};handlePointerMove=e=>{this.isDragging&&this.lastDragX!==null&&this.tableController.scroll({deltaX:e.offsetX-this.lastDragX,deltaY:0})};handlePointerUp=e=>{e.target.releasePointerCapture(e.pointerId),this.isDragging=!1,this.lastDragX=null}}const UG=Symbol("mosaic-coordinator");class BL{static get coordinator(){return ac(UG)??SC()}static set coordinator(e){nf(UG,e)}}const rc="__oid",cHe=120;class hHe{schema;#e=Nn(Hl({}));get data(){return Pe(this.#e)}set data(e){Rt(this.#e,e,!0)}#t=Nn(Hl({}));get defaultColWidths(){return Pe(this.#t)}set defaultColWidths(e){Rt(this.#t,e,!0)}#n=Nn(Hl([]));get columns(){return Pe(this.#n)}set columns(e){Rt(this.#n,e,!0)}#r=Nn(0);get numRows(){return Pe(this.#r)}set numRows(e){Rt(this.#r,e,!0)}#l=Nn(0);get renderOffset(){return Pe(this.#l)}set renderOffset(e){Rt(this.#l,e,!0)}#a=Nn(Hl({}));get rowHeightAddition(){return Pe(this.#a)}set rowHeightAddition(e){Rt(this.#a,e,!0)}#i=qt(()=>this.columns.reduce((e,n)=>(Ps.config.columnConfigs[n]?.hidden&&e.add(n),n===rc&&Ps.config.showRowNumber===!1&&e.add(rc),e),new Set));get hiddenColumns(){return Pe(this.#i)}set hiddenColumns(e){Rt(this.#i,e)}rowKeyColumn=null;constructor(e){this.schema=e}#s=qt(()=>Object.keys(this.data).sort((e,n)=>this.data[e][rc]-this.data[n][rc]));get renderableRows(){return Pe(this.#s)}set renderableRows(e){Rt(this.#s,e)}#o=qt(()=>this.columns.filter(e=>!this.hiddenColumns.has(e)));get renderableCols(){return Pe(this.#o)}set renderableCols(e){Rt(this.#o,e)}#u=qt(()=>this.renderableRows.length===0?this.zeroRowPosition:Math.min(...this.renderableRows.map(e=>this.rowPositions[e])));get minRowPosition(){return Pe(this.#u)}set minRowPosition(e){Rt(this.#u,e)}#c=qt(()=>this.renderableRows.length===0?this.finalRowPosition:Math.max(...this.renderableRows.map(e=>this.rowPositions[e])));get maxRowPosition(){return Pe(this.#c)}set maxRowPosition(e){Rt(this.#c,e)}#d=qt(()=>{const e=Math.min(...this.renderableRows.map(n=>this.data[n][rc]));return Number.isSafeInteger(e)?e:0});get minRowOID(){return Pe(this.#d)}set minRowOID(e){Rt(this.#d,e)}#h=qt(()=>{const e=Math.max(...this.renderableRows.map(n=>this.data[n][rc]));return Number.isSafeInteger(e)?e:0});get maxRowOID(){return Pe(this.#h)}set maxRowOID(e){Rt(this.#h,e)}#p=qt(()=>0);get zeroRowPosition(){return Pe(this.#p)}set zeroRowPosition(e){Rt(this.#p,e)}#f=qt(()=>(this.numRows-1)*Ps.config.rowHeight+this.rowPositionOffsets.cumulative);get finalRowPosition(){return Pe(this.#f)}set finalRowPosition(e){Rt(this.#f,e)}colsLeftmostPosition=0;#y=qt(()=>{const e=this.renderableCols[this.renderableCols.length-1];return this.colPositions[e]+this.colWidths[e]});get colsRightmostPosition(){return Pe(this.#y)}set colsRightmostPosition(e){Rt(this.#y,e)}#v=qt(()=>this.renderableRows.reduce(({offsets:e,cumulative:n},r)=>{e[r]=n;const i=this.rowHeightAddition[r]??0;return{offsets:e,cumulative:n+i}},{offsets:{},cumulative:0}));get rowPositionOffsets(){return Pe(this.#v)}set rowPositionOffsets(e){Rt(this.#v,e)}#b=qt(()=>this.renderableRows.reduce((e,n)=>{const r=(this.data[n][rc]-1)*Ps.config.rowHeight+this.rowPositionOffsets.offsets[n];return e[n]=r,e},{}));get rowPositions(){return Pe(this.#b)}set rowPositions(e){Rt(this.#b,e)}#_=qt(()=>{let e=0;return this.columns.reduce((n,r,i)=>(this.hiddenColumns.has(r)||(n[r]=e,e+=this.colWidths[r]),n),{})});get colPositions(){return Pe(this.#_)}set colPositions(e){Rt(this.#_,e)}#m=qt(()=>this.renderableRows.reduce((e,n)=>(e[n]=Ps.config.rowHeight+(this.rowHeightAddition[n]??0),e),{}));get rowHeights(){return Pe(this.#m)}set rowHeights(e){Rt(this.#m,e)}#g=qt(()=>this.columns.reduce((e,n,r)=>(e[n]=Math.max(Ps.config.columnConfigs[n]?.width??this.defaultColWidths[n]??cHe,Ps.config.minColumnWidths[n]??0),this.isFirstCol(n)&&(e[n]+=Ps.config.firstColLeftPadding),this.isLastCol(n)&&(e[n]+=Ps.config.verticalScrollbarWidth),e),{}));get colWidths(){return Pe(this.#g)}set colWidths(e){Rt(this.#g,e)}getContent({row:e,col:n}){return this.data[e]?this.data[e][n]:null}getRowData(e){return this.data[e]?this.data[e]:null}getPosition({row:e,col:n}){const r=this.colPositions[n],i=this.rowPositions[e];return{x:r,y:i}}getDimensions({row:e,col:n}){const r=this.colWidths[n],i=this.rowHeights[e];return{width:r,height:i}}getRowParity(e){return this.data[e]&&this.data[e][rc]%2===0?"even":"odd"}isFirstCol(e){return this.renderableCols.indexOf(e)===0}isLastCol(e){return this.renderableCols.indexOf(e)===this.renderableCols.length-1}deleteRow(e){delete this.data[e];const n=this.rowHeightAddition[e]??0;return delete this.rowHeightAddition[e],n}collapseRow(e){const n=this.rowHeightAddition[e]??0;return delete this.rowHeightAddition[e],n}reset(){this.data={},this.rowHeightAddition={}}teardown(){this.reset()}}class fHe extends qP{tableName;onResult;constructor(e,n,r){super(n??void 0),this.tableName=e,this.onResult=r}queryResult(e){const n=e.toArray()[0].count;return this.onResult(n),this}query(e=[]){return Vn.from(this.tableName).select({count:Mo()}).where(e)}}const ic="__oid";class dHe extends qP{tableName;columns;onResult;onColumnInfo;limit=20;offset=0;sort=null;info=null;columnInfo=null;isReady=!1;constructor(e,n,r,i,s){super(r??void 0),this.tableName=e,this.columns=n,this.onResult=i,this.onColumnInfo=s}async prepare(){if(this.coordinator==null)return;const e=(await V_e(this.coordinator,[{table:this.tableName,column:"*"}])).reduce((n,r)=>(n[r.column]=r,n),{});this.columnInfo=e,this.onColumnInfo(e),this.isReady=!0}getSelect({includeRowNumber:e}={includeRowNumber:!0}){const n=this.columns.reduce((r,i)=>(this.columnInfo?.[i]?.sqlType==="BIGINT"?r[i]=ao(It(i),"TEXT"):r[i]=It(i),r),{});return e||delete n[ic],n}queryResult(e){return this.onResult(e),this}query(e=[]){if(!this.isReady)return null;const n=this.columns.reduce((r,i)=>(this.columnInfo?.[i]?.sqlType==="BIGINT"?r[i]=ao(It(i),"TEXT"):r[i]=It(i),r),{});if(n[ic]=Sye(),this.sort){const r=this.sort.direction==="ascending"?this.sort.column:fw(this.sort.column);n[ic]=n[ic].orderby(r)}return Vn.from(this.tableName).select(n).where(e).limit(this.limit).offset(this.offset)}fetchRows(e,n){this.offset=e,this.limit=n,this.requestUpdate()}}class pHe{model;schema;config;#e=qt(()=>BL.coordinator);get coordinator(){return Pe(this.#e)}set coordinator(e){Rt(this.#e,e)}filterBy=null;rowsClient=null;numRowsClient=null;rowKeyColumn=null;#t=Nn(null);get element(){return Pe(this.#t)}set element(e){Rt(this.#t,e,!0)}#n=Nn(0);get viewHeight(){return Pe(this.#n)}set viewHeight(e){Rt(this.#n,e,!0)}#r=Nn(0);get viewWidth(){return Pe(this.#r)}set viewWidth(e){Rt(this.#r,e,!0)}#l=Nn(0);get yScroll(){return Pe(this.#l)}set yScroll(e){Rt(this.#l,e,!0)}#a=Nn(0);get xScroll(){return Pe(this.#a)}set xScroll(e){Rt(this.#a,e,!0)}#i=Nn(!1);get isFetching(){return Pe(this.#i)}set isFetching(e){Rt(this.#i,e,!0)}#s=Nn(!1);get isJumping(){return Pe(this.#s)}set isJumping(e){Rt(this.#s,e,!0)}#o=Nn(null);get sort(){return Pe(this.#o)}set sort(e){Rt(this.#o,e,!0)}#u=Nn(!1);get isReady(){return Pe(this.#u)}set isReady(e){Rt(this.#u,e,!0)}#c=Nn(0);get updateKey(){return Pe(this.#c)}set updateKey(e){Rt(this.#c,e,!0)}#d=Nn(!1);get isStale(){return Pe(this.#d)}set isStale(e){Rt(this.#d,e,!0)}#h=Nn(null);get flashedRowId(){return Pe(this.#h)}set flashedRowId(e){Rt(this.#h,e,!0)}#p=Nn(null);get hoveredRowId(){return Pe(this.#p)}set hoveredRowId(e){Rt(this.#p,e,!0)}#f=qt(()=>Math.ceil(this.viewHeight/Ps.config.rowHeight));get rowsOnScreen(){return Pe(this.#f)}set rowsOnScreen(e){Rt(this.#f,e)}#y=qt(()=>this.isJumping?0:Ps.config.renderWindowOffset);get renderWindowOffset(){return Pe(this.#y)}set renderWindowOffset(e){Rt(this.#y,e)}#v=qt(()=>{if(this.model.renderableRows.length===0)return null;const e=this.model.renderableRows.filter(r=>{const i=this.model.rowPositions[r]+this.yScroll;return i+this.model.rowHeights[r]>0&&i<this.viewHeight});if(e.length===0)return null;const n=e[0];return this.model.data[n][ic]});get firstVisibleRowOID(){return Pe(this.#v)}set firstVisibleRowOID(e){Rt(this.#v,e)}#b=qt(()=>Math.max(0,Math.floor(-this.yScroll/Ps.config.rowHeight)));get offset(){return Pe(this.#b)}set offset(e){Rt(this.#b,e)}onFetchResolveBegin=null;onFetchResolveEnd=null;constructor(e,n){this.model=e,this.schema=n,this.config=Ps.config}handleFilterBy=()=>{this.rowsClient&&(this.rowsClient.offset=0,this.rowsClient.limit=this.rowsOnScreen,this.isJumping=!0,this.markStale())};updateData=e=>{if(!this.model||!this.rowKeyColumn)return;this.onFetchResolveBegin&&(this.onFetchResolveBegin(),this.onFetchResolveBegin=null);const n=e.toArray(),r={};for(const i of n){const s=i[this.rowKeyColumn];r[s]=i}this.model.data={...this.model.data,...r},this.onFetchResolveEnd&&(this.onFetchResolveEnd(),this.onFetchResolveEnd=null),this.isFetching=!1};initialize({tableName:e,rowKey:n,columns:r,filterBy:i}){if(this.model.columns=r,this.model.rowKeyColumn=n,this.rowKeyColumn=n,i&&(this.filterBy=i,this.filterBy.addEventListener("value",this.handleFilterBy)),!this.rowKeyColumn)throw new Error("rowkey cannot be null");let s=r.includes(this.rowKeyColumn)?r:[...r,this.rowKeyColumn];this.rowsClient=new dHe(e,s,i,o=>{this.updateData(o)},o=>{this.schema.columnInfo=o,this.computeColWidths(e,r),this.isReady=!0}),this.coordinator.connect(this.rowsClient),this.numRowsClient=new fHe(e,i,o=>{this.model&&(this.model.numRows=o)}),this.coordinator.connect(this.numRowsClient),Po(()=>{if(!this.rowsClient||this.isFetching||!this.isReady)return;const o=-this.renderWindowOffset,a=this.viewHeight+this.renderWindowOffset,l=this.model.maxRowPosition+this.yScroll+this.config.rowHeight,h=this.model.minRowPosition+this.yScroll;if(h<0&&l<0||h>this.viewHeight&&l>this.viewHeight){const k=this.rowsOnScreen;this.isFetching=!0,this.rowsClient.fetchRows(this.offset,k)}else{if(l<a){const T=$L.clamp(Math.ceil((a-l)/this.config.rowHeight),this.config.minFetchSize,this.rowsOnScreen);T>0&&this.model.maxRowOID!==this.model.numRows&&(this.isFetching=!0,this.rowsClient.fetchRows(this.model.maxRowOID,T))}const k=this.model.minRowPosition+this.yScroll;if(k>o&&this.model.minRowOID!==1){const T=$L.clamp(Math.ceil((k-o)/this.config.rowHeight),this.config.minFetchSize,this.rowsOnScreen);T>0&&(this.isFetching=!0,this.rowsClient.fetchRows(Math.max(0,this.model.minRowOID-1-T),T))}}const f=Khe(this.model.renderableRows);let p=0;for(;this.model.rowPositions[f[p]]+this.yScroll+this.model.rowHeights[f[p]]<0;)this.yScroll+=this.model.collapseRow(f[p]),p+=1;let g=f.length-1;for(;this.model.rowPositions[f[g]]+this.yScroll>this.viewHeight;)this.model.collapseRow(f[g]),g-=1;let b=0;for(;this.model.rowPositions[f[b]]+this.yScroll+this.model.rowHeights[f[b]]<o;)this.model.deleteRow(f[b]),b+=1;let x=f.length-1;for(;this.model.rowPositions[f[x]]+this.yScroll>a;)this.model.deleteRow(f[x]),x-=1})}teardown(){this.filterBy&&this.filterBy.removeEventListener("value",this.handleFilterBy)}cellIsVisible(e){const{x:n,y:r}=this.model.getPosition(e),{width:i,height:s}=this.model.getDimensions(e),o=n+this.xScroll,a=r+this.yScroll;return o+i>=0&&o<=this.viewWidth&&a+s>=0&&a<=this.viewHeight}rowIsVisible(e){const n=this.model.rowPositions[e],r=this.model.rowHeights[e],i=n+this.yScroll;return i+r>=0&&i<=this.viewHeight}rowStillExists(e){return this.model.data[e]!=null}colIsVisible(e){const n=this.model.colPositions[e],r=this.model.colWidths[e],i=n+this.xScroll;return i+r>=0&&i<=this.viewWidth}scroll({deltaX:e,deltaY:n}){if(Math.abs(n)>Math.abs(e)){const r=this.yScroll-n;this.model.zeroRowPosition+r>0?this.yScroll=-this.model.zeroRowPosition:this.model.finalRowPosition+r<0?this.yScroll=-this.model.finalRowPosition:this.yScroll=r}else{const r=this.xScroll-e;-r<0?this.xScroll=0:-r>Math.max(this.model.colsRightmostPosition,this.viewWidth)-this.viewWidth?this.xScroll=-Math.max(this.model.colsRightmostPosition,this.viewWidth)+this.viewWidth:this.xScroll=r}}handleWheel=e=>{e.preventDefault(),this.isJumping=!1,this.scroll({deltaX:e.deltaX,deltaY:e.deltaY})};jumpToOffset(e){if(!this.rowsClient)return;this.isFetching=!0;const n=this.rowsOnScreen,r=this.onFetchResolveEnd;this.onFetchResolveEnd=()=>{r&&r(),this.yScroll=-(e*this.config.rowHeight)},this.markStale(),this.rowsClient.fetchRows(e,n)}handleSort=e=>{this.rowsClient&&(this.sort=e,this.rowsClient.sort=e,this.resetRows())};resetRows(){this.model.reset(),this.yScroll=0}flashRow(e){this.flashedRowId=e,setTimeout(()=>{this.flashedRowId=null},400)}async scrollToRow(e,n=!0){if(!this.rowsClient)return;this.isFetching=!0;const r=Vn.with({original:this.rowsClient.query(this.rowsClient.filterBy?.predicate(this.rowsClient)).offset(0).limit(this.model.numRows)}).select([ic]).from("original").where(ah(It(this.rowKeyColumn),kn(e))),i=(await this.coordinator.query(r)).toArray();if(i.length>0){const s=i[0][ic]-1;this.onFetchResolveEnd=()=>{n&&this.flashRow(e)},this.jumpToOffset(s)}else this.isFetching=!1,console.error("no row",e,"found")}addHeightToRow(e,n){this.model.rowHeightAddition[e]=(this.model.rowHeightAddition[e]??0)+n}hideColumn(e){e===ic?this.config.onShowRowNumberChange?this.config.onShowRowNumberChange(!1):this.config.showRowNumber=!1:(this.config.columnConfigs[e]||(this.config.columnConfigs[e]={}),this.config.columnConfigs[e].hidden=!0)}showColumn(e){e===ic?this.config.onShowRowNumberChange?this.config.onShowRowNumberChange(!0):this.config.showRowNumber=!0:(this.config.columnConfigs[e]||(this.config.columnConfigs[e]={}),this.config.columnConfigs[e].hidden=!1)}markStale(){this.isStale=!0;const e=this.onFetchResolveBegin;this.onFetchResolveBegin=()=>{e&&e(),this.resetRows()};const n=this.onFetchResolveEnd;this.onFetchResolveEnd=()=>{n&&n(),this.updateKey+=1,this.isStale=!1}}async computeColWidths(e,n){const r=n.filter(l=>l!==ic),i=this.rowsClient?.getSelect({includeRowNumber:!1}),s=r.reduce((l,h)=>(l[h]=0,l),{}),o=Vn.from(e).select(i).offset(0).limit(10),a=(await this.coordinator.query(o)).toArray();for(const l of a)for(const h of r)s[h]=Math.max(s[h],mHe(l[h]));n.includes(ic)&&(s[ic]=this.config.DEFAULT_ROW_NUMBER_COL_WIDTH),this.model.defaultColWidths=s}}function mHe(t){const e=String(t).length;return e>200?600:e>100?300:e>20?200:e>10?150:120}class gHe{tableController;#e=qt(()=>this.tableController.element);get tableElement(){return Pe(this.#e)}set tableElement(e){Rt(this.#e,e)}constructor(e){this.tableController=e}mount(e,n,r,i,s){if(!this.tableElement)return;const o=n.getBoundingClientRect(),a=this.tableElement.getBoundingClientRect(),l=a.top,h=a.left;switch(r){case"inside":switch(s){case"top":e.style.top=o.top-l+"px";break;case"middle":case"bottom":throw new Error("not yet implemented"+r+s)}switch(i){case"left":e.style.left=o.left-h+"px";case"center":case"right":throw new Error("not yet implemented"+r+i)}break;case"outside":switch(s){case"top":e.style.top=o.bottom-l+"px";break;case"middle":case"bottom":throw new Error("not yet implemented"+r+s)}switch(i){case"left":e.style.left=o.left-h+"px";break;case"center":case"right":throw new Error("not yet implemented"+r+i)}break}this.tableElement.appendChild(e)}destroy(e){this.tableElement&&this.tableElement.contains(e)&&this.tableElement.removeChild(e)}}var c7,VG;function yHe(){if(VG)return c7;VG=1;function t(e,n,r){return e===e&&(r!==void 0&&(e=e<=r?e:r),n!==void 0&&(e=e>=n?e:n)),e}return c7=t,c7}var h7,qG;function vHe(){if(qG)return h7;qG=1;var t=/\s/;function e(n){for(var r=n.length;r--&&t.test(n.charAt(r)););return r}return h7=e,h7}var f7,ZG;function bHe(){if(ZG)return f7;ZG=1;var t=vHe(),e=/^\s+/;function n(r){return r&&r.slice(0,t(r)+1).replace(e,"")}return f7=n,f7}var d7,XG;function MQ(){if(XG)return d7;XG=1;function t(e){var n=typeof e;return e!=null&&(n=="object"||n=="function")}return d7=t,d7}var p7,WG;function _He(){if(WG)return p7;WG=1;var t=typeof By=="object"&&By&&By.Object===Object&&By;return p7=t,p7}var m7,GG;function Lfe(){if(GG)return m7;GG=1;var t=_He(),e=typeof self=="object"&&self&&self.Object===Object&&self,n=t||e||Function("return this")();return m7=n,m7}var g7,YG;function $fe(){if(YG)return g7;YG=1;var t=Lfe(),e=t.Symbol;return g7=e,g7}var y7,HG;function xHe(){if(HG)return y7;HG=1;var t=$fe(),e=Object.prototype,n=e.hasOwnProperty,r=e.toString,i=t?t.toStringTag:void 0;function s(o){var a=n.call(o,i),l=o[i];try{o[i]=void 0;var h=!0}catch{}var f=r.call(o);return h&&(a?o[i]=l:delete o[i]),f}return y7=s,y7}var v7,KG;function wHe(){if(KG)return v7;KG=1;var t=Object.prototype,e=t.toString;function n(r){return e.call(r)}return v7=n,v7}var b7,JG;function OHe(){if(JG)return b7;JG=1;var t=$fe(),e=xHe(),n=wHe(),r="[object Null]",i="[object Undefined]",s=t?t.toStringTag:void 0;function o(a){return a==null?a===void 0?i:r:s&&s in Object(a)?e(a):n(a)}return b7=o,b7}var _7,eY;function SHe(){if(eY)return _7;eY=1;function t(e){return e!=null&&typeof e=="object"}return _7=t,_7}var x7,tY;function kHe(){if(tY)return x7;tY=1;var t=OHe(),e=SHe(),n="[object Symbol]";function r(i){return typeof i=="symbol"||e(i)&&t(i)==n}return x7=r,x7}var w7,nY;function Bfe(){if(nY)return w7;nY=1;var t=bHe(),e=MQ(),n=kHe(),r=NaN,i=/^[-+]0x[0-9a-f]+$/i,s=/^0b[01]+$/i,o=/^0o[0-7]+$/i,a=parseInt;function l(h){if(typeof h=="number")return h;if(n(h))return r;if(e(h)){var f=typeof h.valueOf=="function"?h.valueOf():h;h=e(f)?f+"":f}if(typeof h!="string")return h===0?h:+h;h=t(h);var p=s.test(h);return p||o.test(h)?a(h.slice(2),p?2:8):i.test(h)?r:+h}return w7=l,w7}var O7,rY;function CHe(){if(rY)return O7;rY=1;var t=yHe(),e=Bfe();function n(r,i,s){return s===void 0&&(s=i,i=void 0),s!==void 0&&(s=e(s),s=s===s?s:0),i!==void 0&&(i=e(i),i=i===i?i:0),t(e(r),i,s)}return O7=n,O7}var AHe=CHe();const EHe=IQ(AHe);var S7,iY;function THe(){if(iY)return S7;iY=1;var t=Lfe(),e=function(){return t.Date.now()};return S7=e,S7}var k7,sY;function PHe(){if(sY)return k7;sY=1;var t=MQ(),e=THe(),n=Bfe(),r="Expected a function",i=Math.max,s=Math.min;function o(a,l,h){var f,p,g,b,x,k,T=0,I=!1,M=!1,B=!0;if(typeof a!="function")throw new TypeError(r);l=n(l)||0,t(h)&&(I=!!h.leading,M="maxWait"in h,g=M?i(n(h.maxWait)||0,l):g,B="trailing"in h?!!h.trailing:B);function j(se){var ge=f,xe=p;return f=p=void 0,T=se,b=a.apply(xe,ge),b}function Q(se){return T=se,x=setTimeout(J,l),I?j(se):b}function Z(se){var ge=se-k,xe=se-T,Se=l-ge;return M?s(Se,g-xe):Se}function q(se){var ge=se-k,xe=se-T;return k===void 0||ge>=l||ge<0||M&&xe>=g}function J(){var se=e();if(q(se))return oe(se);x=setTimeout(J,Z(se))}function oe(se){return x=void 0,B&&f?j(se):(f=p=void 0,b)}function me(){x!==void 0&&clearTimeout(x),T=0,f=k=p=x=void 0}function ae(){return x===void 0?b:oe(e())}function ce(){var se=e(),ge=q(se);if(f=arguments,p=this,k=se,ge){if(x===void 0)return Q(k);if(M)return clearTimeout(x),x=setTimeout(J,l),j(k)}return x===void 0&&(x=setTimeout(J,l)),b}return ce.cancel=me,ce.flush=ae,ce}return k7=o,k7}var C7,oY;function DHe(){if(oY)return C7;oY=1;var t=PHe(),e=MQ(),n="Expected a function";function r(i,s,o){var a=!0,l=!0;if(typeof i!="function")throw new TypeError(n);return e(o)&&(a="leading"in o?!!o.leading:a,l="trailing"in o?!!o.trailing:l),t(i,s,{leading:a,maxWait:s,trailing:l})}return C7=r,C7}var IHe=DHe();const aY=IQ(IHe);class MHe{tableModel;tableController;isDragging=!1;#e=Nn(0);get elementHeight(){return Pe(this.#e)}set elementHeight(e){Rt(this.#e,e,!0)}#t=Nn(0);get labelHeight(){return Pe(this.#t)}set labelHeight(e){Rt(this.#t,e,!0)}#n=qt(()=>Ps.config.verticalScrollbarPillHeight);get pillHeight(){return Pe(this.#n)}set pillHeight(e){Rt(this.#n,e)}#r=qt(()=>this.elementHeight-this.pillHeight);get scrollbarHeight(){return Pe(this.#r)}set scrollbarHeight(e){Rt(this.#r,e)}#l=qt(()=>this.tableController.firstVisibleRowOID?this.tableController.firstVisibleRowOID:this.tableController.offset+1);get displayRow(){return Pe(this.#l)}set displayRow(e){Rt(this.#l,e)}#a=qt(()=>(this.displayRow-1)/(this.tableModel.numRows-1)*this.scrollbarHeight);get pillPosition(){return Pe(this.#a)}set pillPosition(e){Rt(this.#a,e)}#i=qt(()=>{if(this.pillPosition===null)return 0;const e=this.pillPosition+this.pillHeight/2-this.labelHeight/2;if(e<0)return e;const n=this.pillPosition+this.pillHeight/2+this.labelHeight/2;return n>this.elementHeight?n-this.elementHeight:0});get labelOffset(){return Pe(this.#i)}set labelOffset(e){Rt(this.#i,e)}constructor({tableModel:e,tableController:n}){this.tableModel=e,this.tableController=n}computeOffsetFromPointer=e=>{this.isDragging=!0;let n=Math.round(e.offsetY/this.scrollbarHeight*(this.tableModel.numRows-1));return EHe(n,0,this.tableModel.numRows-1)};pointerDown=e=>{e.preventDefault(),e.target.setPointerCapture(e.pointerId),this.isDragging=!0;const n=this.computeOffsetFromPointer(e);this.tableController.isJumping=!0,this.tableController.jumpToOffset(n)};handlePointerDown=aY(this.pointerDown,50);pointerMove=e=>{if(this.isDragging){const n=this.computeOffsetFromPointer(e);this.tableController.jumpToOffset(n)}};handlePointerMove=aY(this.pointerMove,50);handlePointerUp=e=>{e.target.releasePointerCapture(e.pointerId),this.isDragging=!1,this.tableController.isJumping=!1}}class RHe{#e=Nn(null);get columnInfo(){return Pe(this.#e)}set columnInfo(e){Rt(this.#e,e,!0)}#t=qt(()=>this.columnInfo?Object.keys(this.columnInfo).reduce((e,n)=>(e[n]=this.columnInfo[n].type,e),{}):{});get dataType(){return Pe(this.#t)}set dataType(e){Rt(this.#t,e)}#n=qt(()=>this.columnInfo?Object.keys(this.columnInfo).reduce((e,n)=>(e[n]=this.columnInfo[n].sqlType,e),{}):{});get sqlType(){return Pe(this.#n)}set sqlType(e){Rt(this.#n,e)}}class FHe{tableController;#e=qt(()=>Math.floor(-this.tableController.yScroll/Ps.config.scrollOverflowValue)*Ps.config.scrollOverflowValue);get offset(){return Pe(this.#e)}set offset(e){Rt(this.#e,e)}constructor(e){this.tableController=e}y(e){return e-this.offset}yScroll(e){return e+this.offset}}const lY=Symbol("schema"),uY=Symbol("model"),cY=Symbol("controller"),hY=Symbol("vertical-scrollbar-controller"),fY=Symbol("horizontal-scrollbar-controller"),dY=Symbol("table-portal-controller"),pY=Symbol("overscroll-modifier");class Is{static initialize(){const e=new RHe,n=new hHe(e),r=new pHe(n,e),i=new MHe({tableModel:n,tableController:r}),s=new uHe({tableModel:n,tableController:r}),o=new gHe(r),a=new FHe(r);nf(lY,e),nf(uY,n),nf(cY,r),nf(hY,i),nf(fY,s),nf(dY,o),nf(pY,a)}static get schema(){return ac(lY)}static get model(){return ac(uY)}static get controller(){return ac(cY)}static get verticalScrollbarController(){return ac(hY)}static get horizontalScrollbarController(){return ac(fY)}static get tablePortalController(){return ac(dY)}static get overscrollModifier(){return ac(pY)}}var LHe=is('<div class="horizontal-scrollbar svelte-csucem"><div class="pill svelte-csucem"></div></div>');const $He={hash:"svelte-csucem",code:".horizontal-scrollbar.svelte-csucem {position:absolute;bottom:0;left:0;width:100%;height:var(--height);transition:opacity 200ms linear;background-color:var(--scrollbar-bg);}.horizontal-scrollbar.svelte-csucem:hover {opacity:1 !important;}.pill.svelte-csucem {width:var(--width);height:calc(var(--height) - var(--margin) * 2);margin:var(--margin);border-radius:2px;background-color:var(--scrollbar-pill-bg);}"};function BHe(t,e){Xo(e,!0),Go(t,$He);const n=Is.horizontalScrollbarController,r=Is.controller,i=Ps.config;let s=Nn(0),o=Nn(null),a=Nn(null),l=0;wO(()=>(l=requestAnimationFrame(p),()=>{cancelAnimationFrame(l)}));function h(){Pe(o)&&(Pe(o).style.opacity="0")}const f=Ffe.debounce(h,1e3);Po(()=>{Pe(o)&&(r.xScroll,Pe(o).style.opacity="1",f())});function p(){Rt(s,n.pillWidth,!0),Pe(a)&&(Pe(a).style.transform=`translate(${n.pillLeft}px, 0)`),l=requestAnimationFrame(p)}var g=LHe();let b;var x=_s(g);x.__pointerdown=function(...T){n.handlePointerDown?.apply(this,T)},x.__pointermove=function(...T){n.handlePointerMove?.apply(this,T)},x.__pointerup=function(...T){n.handlePointerUp?.apply(this,T)};let k;Nu(x,T=>Rt(a,T),()=>Pe(a)),ls(g),Nu(g,T=>Rt(o,T),()=>Pe(o)),la(()=>{b=Ic(g,"",b,{"--height":i.horizontalScrollbarHeight+"px"}),k=Ic(x,"",k,{"--width":Pe(s)+"px","--margin":n.margin+"px"})}),Md(g,"clientWidth",T=>n.elementWidth=T),ui(t,g),Wo()}D0(["pointerdown","pointermove","pointerup"]);var NHe=is('<div class="vertical-scrollbar svelte-d1fz7o"><div class="pill svelte-d1fz7o"><div class="label svelte-d1fz7o"> </div></div></div>');const zHe={hash:"svelte-d1fz7o",code:".vertical-scrollbar.svelte-d1fz7o {position:absolute;right:0;top:0;width:var(--width);height:calc(100% - var(--offset-bottom));contain:layout;cursor:row-resize;transition:opacity 200ms linear;user-select:none;background-color:var(--scrollbar-bg);}.vertical-scrollbar.svelte-d1fz7o:hover {opacity:1 !important;}.pill.svelte-d1fz7o {--pill-height: 4px;position:relative;pointer-events:none; /* let the container respond to pointer events */top:0;left:0;width:calc(var(--width) - 2px);margin-left:1px;margin-right:1px;height:var(--pill-height);border-radius:2px;will-change:transform;background-color:var(--scrollbar-pill-bg);}.label.svelte-d1fz7o {--offset: 0;position:absolute;pointer-events:none;top:0;left:-4px;font-family:var(--font-family);font-size:14px;white-space:nowrap;padding:2px 4px;box-shadow:var(--shadow);transform:translate(-100%, calc(-50% + var(--pill-height) / 2 - var(--offset)));border-radius:2px;color:var(--secondary-text-color);background-color:var(--scrollbar-label-bg);border:var(--outline);}"};function QHe(t,e){Xo(e,!0),Go(t,zHe);const n=Is.verticalScrollbarController,r=Is.controller,i=Ps.config;let s=Nn(0),o=Nn(0),a=Nn(null),l=Nn(null),h=Nn(null),f=qt(()=>new Intl.NumberFormat().format(Pe(o))),p=0;wO(()=>(p=requestAnimationFrame(x),()=>{cancelAnimationFrame(p)}));function g(){Pe(a)&&(Pe(a).style.opacity="0")}const b=Ffe.debounce(g,1e3);Po(()=>{Pe(a)&&(r.yScroll,Pe(a).style.opacity="1",b())});function x(){Rt(s,n.pillPosition??Pe(s),!0),Rt(o,n.displayRow??Pe(o),!0),Pe(l)&&(Pe(l).style.transform=`translate3d(0, ${Pe(s)}px, 0)`),Pe(h)&&Pe(h).style.setProperty("--offset",n.labelOffset-1+"px"),p=requestAnimationFrame(x)}var k=NHe();k.__pointerdown=function(...Q){n.handlePointerDown?.apply(this,Q)},k.__pointermove=function(...Q){n.handlePointerMove?.apply(this,Q)},k.__pointerup=function(...Q){n.handlePointerUp?.apply(this,Q)};let T;var I=_s(k);let M;var B=_s(I),j=_s(B,!0);ls(B),Nu(B,Q=>Rt(h,Q),()=>Pe(h)),ls(I),Nu(I,Q=>Rt(l,Q),()=>Pe(l)),ls(k),Nu(k,Q=>Rt(a,Q),()=>Pe(a)),la(()=>{T=Ic(k,"",T,{"--offset-bottom":i.horizontalScrollbarHeight+"px","--width":i.verticalScrollbarWidth+"px"}),M=Ic(I,"",M,{"--pill-height":n.pillHeight+"px"}),Rm(j,Pe(f))}),Md(B,"clientHeight",Q=>n.labelHeight=Q),Md(k,"clientHeight",Q=>n.elementHeight=Q),ui(t,k),Wo()}D0(["pointerdown","pointermove","pointerup"]);var jHe=is('<div class="bigint-content svelte-1x1osq0"> </div>');const UHe={hash:"svelte-1x1osq0",code:".bigint-content.svelte-1x1osq0 {text-align:right;text-overflow:ellipsis;white-space:nowrap;overflow:hidden;}"};function VHe(t,e){Xo(e,!0),Go(t,UHe);let n=OO(e,"height");function r(o){return o===null?null:o.toLocaleString()}var i=jHe(),s=_s(i,!0);ls(i),la(o=>Rm(s,o),[()=>r(e.bigint)]),Md(i,"clientHeight",n),ui(t,i),Wo()}var qHe=is("<div></div>");const ZHe={hash:"svelte-ubqfz9",code:""};function XHe(t,e){Xo(e,!0),Go(t,ZHe);let n=OO(e,"height");const r=Is.model,i=h=>typeof h=="function"?(f,p)=>{let g=new h(f,p);return{...g.update?{update:g.update.bind(g)}:{},...g.destroy?{destroy:g.destroy.bind(g)}:{}}}:(f,p)=>{let g=new h.class(f,p);return{...g.update?{update:g.update.bind(g)}:{},...g.destroy?{destroy:g.destroy.bind(g)}:{}}};let s=qt(()=>i(e.customCell)),o=qt(()=>r.getContent({row:e.row,col:e.col})),a=qt(()=>r.getRowData(e.row));var l=qHe();PQ(l,(h,f)=>Pe(s)?.(h,f),()=>({value:Pe(o),rowData:Pe(a)})),dA(()=>Md(l,"clientHeight",n)),ui(t,l),Wo()}var WHe=is('<img alt=""/>');function GHe(t,e){Xo(e,!0);let n=OO(e,"height");Ps.config;let r=Nn(null);function i(f){let p="";for(let g=0;g<f.length;g++)p+=String.fromCharCode(f[g]);return btoa(p)}function s(f){const p=atob(f);return new Uint8Array([...p].map(g=>g.charCodeAt(0)))}function o(f,p){if(f.length<p.length)return!1;for(let g=0;g<p.length;g++)if(f[g]!=p[g])return!1;return!0}function a(f){return o(f,[137,80,78,71,13,10,26,10])?"image/png":o(f,[255,216,255])?"image/jpeg":o(f,[73,73,42,0])?"image/tiff":o(f,[66,77])?"image/bmp":o(f,[71,73,70,56,55,97])||o(f,[71,73,70,56,55,97])?"image/gif":"application/octet-stream"}function l(f){if(f==null)return null;if(typeof f=="string")return f.startsWith("data:")||f.startsWith("http://")||f.startsWith("https://")?f:`data:${a(s(f))};base64,`+f;{let p=null;if(f.bytes&&f.bytes instanceof Uint8Array&&(p=f.bytes),f instanceof Uint8Array&&(p=f),p!=null)return`data:${a(p)};base64,`+i(p)}return null}var h=WHe();Nu(h,f=>Rt(r,f),()=>Pe(r)),la(f=>gC(h,"src",f),[()=>l(e.image)]),N2("load",h,()=>{Pe(r)&&n(Pe(r).scrollHeight)}),RYe(h),ui(t,h),Wo()}var YHe=is('<a target="_blank" rel="noopener noreferrer"> </a>'),HHe=is('<div class="link-content"><!></div>');const KHe={hash:"svelte-1wimtwv",code:""};function JHe(t,e){Xo(e,!0),Go(t,KHe);let n=OO(e,"height");var r=HHe(),i=_s(r);{var s=o=>{var a=YHe(),l=_s(a,!0);ls(a),la(()=>{gC(a,"href",e.url),Rm(l,e.url)}),ui(o,a)};lc(i,o=>{e.url&&o(s)})}ls(r),Md(r,"clientHeight",n),ui(t,r),Wo()}var eKe=is('<div class="number-content svelte-1xfvszy"> </div>');const tKe={hash:"svelte-1xfvszy",code:".number-content.svelte-1xfvszy {text-align:right;text-overflow:ellipsis;white-space:nowrap;overflow:hidden;}"};function nKe(t,e){Xo(e,!0),Go(t,tKe);let n=OO(e,"height");function r(o){return o===null?null:Number.isInteger(o)?o.toString():o.toPrecision(4).toString()}var i=eKe(),s=_s(i,!0);ls(i),la(o=>Rm(s,o),[()=>r(e.number)]),Md(i,"clientHeight",n),ui(t,i),Wo()}var rKe=is("<div> </div>");const iKe={hash:"svelte-1ngffx0",code:".clamped.svelte-1ngffx0 {display:-webkit-box;-webkit-box-orient:vertical;line-clamp:var(--lines, var(--num-lines)); /* fallback to numlines from parent */-webkit-line-clamp:var(--lines, var(--num-lines));overflow:hidden;text-overflow:ellipsis;}"};function mY(t,e){Xo(e,!0),Go(t,iKe);let n=OO(e,"height");const r=Ps.config;let i=Nn(null),s=Nn(null);Po(()=>{Pe(i)&&(n(Pe(i).scrollHeight),Rt(s,Math.floor(e.parentHeight/r.lineHeight),!0))});var o=rKe();let a;var l=_s(o,!0);ls(o),Nu(o,h=>Rt(i,h),()=>Pe(i)),la(()=>{x1(o,1,`text-content ${(e.clamped?"clamped":null)??""}`,"svelte-1ngffx0"),a=Ic(o,"",a,{"--lines":Pe(s)}),Rm(l,e.text)}),ui(t,o),Wo()}class sKe{#e=Nn(Hl({}));get config(){return Pe(this.#e)}set config(e){Rt(this.#e,e,!0)}}const A7=Symbol("custom-cells");class H5{static initialize(){nf(A7,new sKe)}static set config(e){const n=ac(A7);n.config=e}static get config(){return ac(A7).config}}var oKe=is("<button>â</button>"),aKe=is('<div class="cell-content clamp svelte-8bpcsh"><!> <!></div>');const lKe={hash:"svelte-8bpcsh",code:".cell-content.svelte-8bpcsh {position:relative;flex-grow:1;line-height:var(--lineHeight);overflow-wrap:anywhere;overflow:hidden;}.expand-button.svelte-8bpcsh {all:unset;visibility:hidden;position:absolute;bottom:0;right:0;cursor:pointer;font-size:12px;line-height:18px;padding-left:4px;padding-right:4px;border-radius:2px;color:var(--secondary-text-color);background-color:var(--background-color);border:var(--outline);}.expand-button.show.svelte-8bpcsh {visibility:visible;}"};function uKe(t,e){Xo(e,!0),Go(t,lKe);const n=Is.model,r=Is.controller,i=Is.schema,s=Ps.config;let o=qt(()=>H5.config),a=Nn(0),l=Nn(0),h=qt(()=>Pe(l)>Pe(a));const f=n.getContent({row:e.row,col:e.col}),p=i.dataType[e.col]??"string",g=i.sqlType[e.col]??"TEXT";function b(Z){return typeof Z=="string"&&(Z.startsWith("http://")||Z.startsWith("https://"))}function x(Z){return Z==null?!1:!!(typeof Z=="string"&&Z.startsWith("data:image/")||Z.bytes&&Z.bytes instanceof Uint8Array)}var k=aKe();let T;var I=_s(k);{var M=Z=>{XHe(Z,{get row(){return e.row},get col(){return e.col},get customCell(){return Pe(o)[e.col]},get height(){return Pe(l)},set height(q){Rt(l,q,!0)}})},B=Z=>{var q=qv(),J=dh(q);{var oe=ae=>{var ce=qv(),se=dh(ce);{var ge=Se=>{JHe(Se,{get url(){return f},get height(){return Pe(l)},set height(De){Rt(l,De,!0)}})},xe=Se=>{mY(Se,{get text(){return f},get clamped(){return Pe(h)},get parentHeight(){return Pe(a)},get height(){return Pe(l)},set height(De){Rt(l,De,!0)}})};lc(se,Se=>{f&&b(f)?Se(ge):Se(xe,!1)})}ui(ae,ce)},me=ae=>{var ce=qv(),se=dh(ce);{var ge=Se=>{var De=qv(),He=dh(De);{var Ue=We=>{{let at=qt(()=>BigInt(f??""));VHe(We,{get bigint(){return Pe(at)},get height(){return Pe(l)},set height(ut){Rt(l,ut,!0)}})}},yt=We=>{nKe(We,{get number(){return f},get height(){return Pe(l)},set height(at){Rt(l,at,!0)}})};lc(He,We=>{g==="BIGINT"?We(Ue):We(yt,!1)})}ui(Se,De)},xe=Se=>{var De=qv(),He=dh(De);{var Ue=We=>{GHe(We,{get image(){return f},get height(){return Pe(l)},set height(at){Rt(l,at,!0)}})},yt=We=>{mY(We,{get text(){return f},get clamped(){return Pe(h)},get parentHeight(){return Pe(a)},get height(){return Pe(l)},set height(at){Rt(l,at,!0)}})};lc(He,We=>{x(f)?We(Ue):We(yt,!1)},!0)}ui(Se,De)};lc(se,Se=>{p==="number"?Se(ge):Se(xe,!1)},!0)}ui(ae,ce)};lc(J,ae=>{p==="string"?ae(oe):ae(me,!1)},!0)}ui(Z,q)};lc(I,Z=>{Pe(o)[e.col]?Z(M):Z(B,!1)})}var j=hf(I,2);{var Q=Z=>{var q=oKe();q.__click=()=>{r.addHeightToRow(e.row,Pe(l)-Pe(a))},la(()=>x1(q,1,`expand-button ${e.hovered?"show":"hide"}`,"svelte-8bpcsh")),ui(Z,q)};lc(j,Z=>{Pe(h)&&Z(Q)})}ls(k),la(()=>T=Ic(k,"",T,{"--lineHeight":s.lineHeight+"px","--num-lines":s.textMaxLines})),Md(k,"clientHeight",Z=>Rt(a,Z)),ui(t,k),Wo()}D0(["click"]);var cKe=is('<div class="row-number svelte-1e2x749"> </div>');const hKe={hash:"svelte-1e2x749",code:".row-number.svelte-1e2x749 {flex-grow:1;text-align:right;color:var(--secondary-text-color);text-overflow:ellipsis;white-space:nowrap;overflow:hidden;}"};function fKe(t,e){Xo(e,!0),Go(t,hKe);const n=Is.model.getContent({row:e.row,col:e.col}),r=qt(()=>new Intl.NumberFormat().format(n??0));var i=cKe(),s=_s(i,!0);ls(i),la(()=>Rm(s,Pe(r))),ui(t,i),Wo()}var dKe=is('<div class="cell svelte-16dgxhm"><!></div>');const pKe={hash:"svelte-16dgxhm",code:".cell.svelte-16dgxhm {--x: 0px;--y: 0px;--width: 0px;--height: 0px;display:flex;box-sizing:border-box;padding-top:calc(var(--padding-y) / 2);padding-bottom:calc(var(--padding-y) / 2);padding-right:calc(calc(var(--padding-x) / 2) + var(--extra-right-padding));padding-left:calc(calc(var(--padding-x) / 2) + var(--extra-left-padding));position:absolute;left:0;top:0;width:var(--width);height:var(--height);transform:translate(var(--x), var(--y));contain:layout paint;color:var(--primary-text-color);font-family:var(--cell-font-family);font-size:var(--cell-font-size);}"};function mKe(t,e){Xo(e,!0),Go(t,pKe);const n=Is.model,r=Is.controller,i=Is.overscrollModifier,s=Ps.config;let o=qt(()=>n.getPosition({row:e.row,col:e.col})),a=qt(()=>Pe(o).x),l=qt(()=>Pe(o).y),h=qt(()=>i.y(Pe(l))),f=qt(()=>n.getDimensions({row:e.row,col:e.col})),p=qt(()=>Pe(f).width),g=qt(()=>Pe(f).height),b=qt(()=>n.isFirstCol(e.col)),x=qt(()=>n.isLastCol(e.col)),k=qt(()=>n.getRowParity(e.row)==="even"?"var(--primary-bg)":"var(--secondary-bg)"),T=()=>{s.onRowClick&&s.onRowClick(e.row)},I=Nn(!1);var M=dKe();M.__click=T,M.__keydown=q=>{q.key==="Enter"&&T()};let B;var j=_s(M);{var Q=q=>{uKe(q,{get row(){return e.row},get col(){return e.col},get hovered(){return Pe(I)}})},Z=q=>{fKe(q,{get row(){return e.row},get col(){return e.col}})};lc(j,q=>{e.col!==rc?q(Q):q(Z,!1)})}ls(M),la(()=>B=Ic(M,"",B,{"--x":Pe(a)+"px","--y":Pe(h)+"px","--width":Pe(p)+"px","--height":Pe(g)+"px","--padding-x":s.betweenColPadding+"px","--padding-y":s.betweenRowPadding+"px","--extra-right-padding":(Pe(x)?s.verticalScrollbarWidth:0)+"px","--extra-left-padding":(Pe(b)?s.firstColLeftPadding:0)+"px","--background-color":Pe(k)})),N2("pointerenter",M,()=>{Rt(I,!0),r.hoveredRowId=e.row}),N2("pointerleave",M,()=>{Rt(I,!1),r.hoveredRowId=null}),ui(t,M),Wo()}D0(["click","keydown"]);var gKe=is('<div class="header-title svelte-1si5830"> </div>');const yKe={hash:"svelte-1si5830",code:".header-title.svelte-1si5830 {flex-shrink:1;margin-right:2px;}"};function vKe(t,e){Xo(e,!0),Go(t,yKe);const n=Ps.config;var r=gKe(),i=_s(r,!0);ls(r),la(()=>Rm(i,n.columnConfigs[e.col]?.title??e.col)),ui(t,r),Wo()}JGe();var bKe=is('<div class="row-number-header svelte-v1uha2">#</div>');const _Ke={hash:"svelte-v1uha2",code:".row-number-header.svelte-v1uha2 {flex-grow:1;text-align:right;margin-right:4px;box-sizing:border-box;color:var(--secondary-text-color);}"};function xKe(t){Go(t,_Ke);var e=bKe();ui(t,e)}var wKe=is('<button class="sort-buttons svelte-mgubjs"><div> </div></button>');const OKe={hash:"svelte-mgubjs",code:".sort-buttons.svelte-mgubjs {all:unset;flex-shrink:0;width:16px;cursor:pointer;display:flex;justify-content:center;flex-direction:row;margin-left:4px;border-radius:2px;padding-left:4px;padding-right:4px;color:var(--tertiary-text-color);}.sort-buttons.svelte-mgubjs:hover {--placeholder: 0;background-color:var(--hover-bg);}.sort-glyph.svelte-mgubjs {color:var(--tertiary-text-color);}.sort-buttons.svelte-mgubjs:hover .sort-glyph:where(.svelte-mgubjs) {color:var(--tertiary-text-color);}.selected.svelte-mgubjs {color:var(--primary-text-color) !important;}"};function SKe(t,e){Xo(e,!0),Go(t,OKe);const n=Is.controller;let r=qt(()=>n.sort?n.sort.column===e.col:!1),i=qt(()=>n.sort?n.sort.direction:null),s=qt(()=>Pe(r)?Pe(i)==="ascending"?"â":"â":"â");var o=wKe();o.__click=()=>{const h=Pe(r)?Pe(i)==="ascending"?"descending":null:"ascending";h?n.handleSort({column:e.col,direction:h}):n.handleSort(null)};var a=_s(o),l=_s(a,!0);ls(a),ls(o),la(()=>{x1(a,1,`sort-button ${(Pe(r)?"selected":null)??""} sort-glyph`,"svelte-mgubjs"),Rm(l,Pe(s))}),ui(t,o),Wo()}D0(["click"]);class kKe{#e=Nn(Hl({}));get config(){return Pe(this.#e)}set config(e){Rt(this.#e,e,!0)}}const E7=Symbol("custom-headers");class K5{static initialize(){nf(E7,new kKe)}static set config(e){const n=ac(E7);n.config=e}static get config(){return ac(E7).config}}var CKe=is("<div></div>");const AKe={hash:"svelte-v680az",code:""};function EKe(t,e){Xo(e,!0),Go(t,AKe),Is.model;const n=s=>typeof s=="function"?(o,a)=>{let l=new s(o,a);return{...l.update?{update:l.update.bind(l)}:{},...l.destroy?{destroy:l.destroy.bind(l)}:{}}}:(o,a)=>{let l=new s.class(o,a);return{...l.update?{update:l.update.bind(l)}:{},...l.destroy?{destroy:l.destroy.bind(l)}:{}}};let r=qt(()=>n(e.customHeader));var i=CKe();PQ(i,(s,o)=>Pe(r)?.(s,o),()=>({column:e.col})),ui(t,i),Wo()}var TKe=is("<!> <!>",1),PKe=is('<div><div class="header-content svelte-1vl6s3u"><!> <div class="header-title svelte-1vl6s3u"><!></div></div></div>');const DKe={hash:"svelte-1vl6s3u",code:".header-cell.svelte-1vl6s3u {position:relative;display:flex;flex-direction:row;align-items:end;width:var(--width);min-height:var(--height);flex-shrink:0;box-sizing:border-box;padding:0.25em;padding-right:calc(calc(var(--padding-x) / 2) + var(--extra-padding-right));padding-left:calc(calc(var(--padding-x) / 2) + var(--extra-padding-left));color:var(--secondary-text-color);font-family:var(--header-font-family);font-size:var(--header-font-size);}.header-cell.number.svelte-1vl6s3u {justify-content:end;}.header-content.svelte-1vl6s3u {display:flex;flex-direction:column;flex-shrink:0;}.header-title.svelte-1vl6s3u {height:1.5em;align-items:center;display:flex;flex-direction:row;flex-shrink:0;}"};function IKe(t,e){Xo(e,!0),Go(t,DKe);const n=Is.model,r=Is.schema,i=Ps.config;let s=qt(()=>K5.config),o=Nn(null),a=Nn(0);Po(()=>{i.minColumnWidths[e.col]=Pe(a)+i.betweenColPadding});const l=qt(()=>n.colWidths[e.col]),h=qt(()=>(r.dataType[e.col]??"string")==="number"),f=qt(()=>Pe(h)||e.col===rc?"number":""),p=qt(()=>n.isFirstCol(e.col)),g=qt(()=>n.isLastCol(e.col));let b=qt(()=>i.headerHeight?i.headerHeight+"px":"auto");var x=PKe();let k;var T=_s(x),I=_s(T);{var M=q=>{EKe(q,{get col(){return e.col},get customHeader(){return Pe(s)[e.col]}})};lc(I,q=>{Pe(s)[e.col]&&q(M)})}var B=hf(I,2),j=_s(B);{var Q=q=>{var J=TKe(),oe=dh(J);vKe(oe,{get col(){return e.col}});var me=hf(oe,2);SKe(me,{get col(){return e.col}}),ui(q,J)},Z=q=>{xKe(q)};lc(j,q=>{e.col!==rc?q(Q):q(Z,!1)})}ls(B),ls(T),ls(x),Nu(x,q=>Rt(o,q),()=>Pe(o)),la(()=>{x1(x,1,`header-cell ${Pe(f)??""}`,"svelte-1vl6s3u"),k=Ic(x,"",k,{"--width":Pe(l)+"px","--height":Pe(b),"--padding-x":i.betweenColPadding+"px","--extra-padding-right":(Pe(g)?i.verticalScrollbarWidth:0)+"px","--extra-padding-left":(Pe(p)?i.firstColLeftPadding:0)+"px"})}),Md(T,"clientWidth",q=>Rt(a,q)),ui(t,x),Wo()}class MKe{tableModel;tableController;col;config;isDragging=!1;startDragX=0;constructor({tableModel:e,tableController:n,col:r}){this.tableModel=e,this.tableController=n,this.col=r,this.config=Ps.config}handlePointerDown=e=>{e.preventDefault(),e.target.setPointerCapture(e.pointerId),this.isDragging=!0,this.startDragX=e.offsetX};handlePointerMove=e=>{if(this.isDragging&&this.startDragX!==null){const n=e.offsetX-this.startDragX,r=this.tableModel.colWidths[this.col],i=Math.max(0,Math.round(r+n));this.config.columnConfigs[this.col]||(this.config.columnConfigs[this.col]={}),this.config.columnConfigs[this.col].width=i,this.config.onColumnConfigsChange(this.col,Khe(this.config.columnConfigs))}};handlePointerUp=e=>{e.target.releasePointerCapture(e.pointerId),this.isDragging=!1,this.startDragX=null}}var RKe=is('<div class="header-resize-indicator svelte-1y4d3p9"><div class="pill svelte-1y4d3p9"></div></div>');const FKe={hash:"svelte-1y4d3p9",code:".header-resize-indicator.svelte-1y4d3p9 {position:absolute;z-index:2;box-sizing:border-box;width:12px;height:calc(100% - 0.25rem);margin:2px;cursor:col-resize;justify-content:center;display:flex;align-items:center;justify-content:center;transform:translateX(calc(var(--x) - 4px - 50%));}.pill.svelte-1y4d3p9 {width:2px;height:calc(100% - 4px);margin-top:2px;margin-bottom:2px;background-color:var(--secondary-text-color);opacity:0.2;border-radius:2px;}"};function LKe(t,e){Xo(e,!0),Go(t,FKe);const n=Is.model;let r=new MKe({tableModel:n,tableController:Is.controller,col:e.col});const i=qt(()=>n.colPositions[e.col]+n.colWidths[e.col]);var s=RKe();s.__pointerdown=function(...a){r.handlePointerDown?.apply(this,a)},s.__pointermove=function(...a){r.handlePointerMove?.apply(this,a)},s.__pointerup=function(...a){r.handlePointerUp?.apply(this,a)};let o;la(()=>o=Ic(s,"",o,{"--x":Pe(i)+"px"})),ui(t,s),Wo()}D0(["pointerdown","pointermove","pointerup"]);var $Ke=is('<div class="table-portal svelte-i8g41o" tabindex="-1"><!></div>');const BKe={hash:"svelte-i8g41o",code:".table-portal.svelte-i8g41o {position:absolute;}"};function NKe(t,e){Xo(e,!0),Go(t,BKe);const n=Is.controller,r=Is.tablePortalController;let i=Nn(null);const s=f=>{Po(()=>(r.mount(f,e.relativeTo,e.anchor,e.horizontalAlign,e.verticalAlign),f.focus(),()=>{r.destroy(f)}))};let o=0;wO(()=>{o=n.xScroll,requestAnimationFrame(a)});function a(){Pe(i)&&e.stickyX&&(Pe(i).style.transform=`translateX(${n.xScroll-o}px)`),requestAnimationFrame(a)}var l=$Ke();l.__click=f=>{f.stopPropagation()};var h=_s(l);TQ(h,()=>e.children),ls(l),Nu(l,f=>Rt(i,f),()=>Pe(i)),PQ(l,f=>s?.(f)),N2("wheel",l,f=>{f.stopPropagation()}),ui(t,l),Wo()}D0(["click"]);var zKe=is("<button> </button> <!>",1);const QKe={hash:"svelte-3t0u29",code:'.dropdown.svelte-3t0u29 {all:unset;padding-left:8px;padding-right:8px;border-radius:2px;cursor:pointer;color:var(--secondary-text-color);position:relative;user-select:none;}.dropdown.svelte-3t0u29::before {content:"";position:absolute;top:0;left:0;height:100%;width:100%;background-color:var(--primary-bg);z-index:-1;}.dropdown.svelte-3t0u29:hover {background-color:var(--hover-bg);}.unclickable.svelte-3t0u29 {pointer-events:none;}'};function jKe(t,e){Go(t,QKe);let n=Nn(!1),r=Nn(null),i=Nn(null);var s=zKe();N2("click",PL,f=>{Pe(n)&&f.target!==Pe(r)&&Rt(n,!1)});var o=dh(s);o.__click=f=>{Rt(n,!0)};var a=_s(o,!0);ls(o),Nu(o,f=>Rt(r,f),()=>Pe(r));var l=hf(o,2);{var h=f=>{NKe(f,{get relativeTo(){return e.relativeTo},anchor:"outside",horizontalAlign:"left",verticalAlign:"top",stickyX:!1,get element(){return Pe(i)},set element(p){Rt(i,p,!0)},children:(p,g)=>{var b=qv(),x=dh(b);TQ(x,()=>e.children),ui(p,b)},$$slots:{default:!0}})};lc(l,f=>{Pe(n)&&f(h)})}la(()=>{x1(o,1,`dropdown ${Pe(n)?"unclickable":"clickable"}`,"svelte-3t0u29"),Rm(a,e.label)}),ui(t,s)}D0(["click"]);var UKe=is('<li class="column-entry svelte-bmvlb6"><label class="column-label svelte-bmvlb6"> <input type="checkbox"/></label></li>'),VKe=is('<ul class="column-toggle svelte-bmvlb6"></ul>'),qKe=is("<!> <!>",1),ZKe=is('<div class="header-row svelte-bmvlb6"><div class="scroll-container svelte-bmvlb6"><div class="dropdown-label-container svelte-bmvlb6"><div class="dropdown-label svelte-bmvlb6"><!></div></div> <!></div></div>');const XKe={hash:"svelte-bmvlb6",code:".header-row.svelte-bmvlb6 {flex-shrink:0;border-bottom:1px solid var(--secondary-bg);background-color:var(--primary-bg);}.scroll-container.svelte-bmvlb6 {display:flex;flex-direction:row;}.dropdown-label-container.svelte-bmvlb6 {position:absolute;z-index:20;left:0px;box-sizing:border-box;height:100%;padding:0.25em;display:flex;flex-direction:row;align-items:end;}.dropdown-label.svelte-bmvlb6 {height:1.5em;align-items:center;display:flex;}.column-toggle.svelte-bmvlb6 {margin:0;margin-top:4px;margin-left:8px;padding:12px;background-color:var(--primary-bg);border-radius:4px;box-shadow:var(--shadow);border:var(--outline);max-height:var(--max-height);max-width:var(--max-width);overflow:scroll;}.column-entry.svelte-bmvlb6 {list-style-type:none;padding:4px;user-select:none;}.column-label.svelte-bmvlb6 {display:flex;align-items:center;justify-content:space-between;gap:16px;color:var(--secondary-text-color);}"};function WKe(t,e){Xo(e,!0),Go(t,XKe);const n=Is.model,r=Is.controller,i=Ps.config;let s=Nn(null),o=Nn(null),a=Nn(null),l=qt(()=>n.renderableCols),h=0;wO(()=>(h=requestAnimationFrame(f),()=>{cancelAnimationFrame(h)}));function f(){Pe(o)&&(Pe(o).style.transform=`translate3d(${r.xScroll}px, 0, 0)`),Pe(a)&&(Pe(a).style.transform=`translate3d(${-r.xScroll}px, 0, 0)`),h=requestAnimationFrame(f)}var p=ZKe(),g=_s(p),b=_s(g),x=_s(b),k=_s(x);jKe(k,{label:"â®",get relativeTo(){return Pe(s)},children:(I,M)=>{var B=VKe();let j;nk(B,21,()=>n.columns,ZYe,(Q,Z)=>{var q=UKe(),J=_s(q),oe=_s(J),me=hf(oe);eHe(me),me.__change=ae=>{ae.target.checked?r.showColumn(Pe(Z)):r.hideColumn(Pe(Z))},Ic(me,"",{},{float:"right"}),ls(J),ls(q),la(()=>{Rm(oe,`${(Pe(Z)===rc?"row #":i.columnConfigs[Pe(Z)]?.title??Pe(Z))??""} `),gC(me,"id",`${Pe(Z)??""}-checkbox`),tHe(me,Pe(Z)===rc?i.showRowNumber!==!1:!i.columnConfigs[Pe(Z)]?.hidden)}),ui(Q,q)}),ls(B),la(()=>j=Ic(B,"",j,{"--max-height":r.viewHeight-48+"px","--max-width":r.viewWidth-48+"px"})),ui(I,B)}}),ls(x),Nu(x,I=>Rt(a,I),()=>Pe(a)),ls(b);var T=hf(b,2);nk(T,16,()=>Pe(l),I=>I,(I,M)=>{var B=qKe(),j=dh(B);IKe(j,{get col(){return M}});var Q=hf(j,2);LKe(Q,{get col(){return M}}),ui(I,B)}),ls(g),Nu(g,I=>Rt(o,I),()=>Pe(o)),ls(p),Nu(p,I=>Rt(s,I),()=>Pe(s)),ui(t,p),Wo()}D0(["change"]);class GKe{#e=Nn(null);get colorScheme(){return Pe(this.#e)}set colorScheme(e){Rt(this.#e,e,!0)}#t=Nn(Hl({}));get theme(){return Pe(this.#t)}set theme(e){Rt(this.#t,e,!0)}}const gY=Symbol("style");class NL{static initialize(){nf(gY,new GKe)}static get style(){return ac(gY)}}function YKe(t,e){return{...t,...t[e]!=null?t[e]:{}}}var HKe=is("<div><!></div>");const KKe={hash:"svelte-c7n1rn",code:".table-defaults.light.svelte-c7n1rn {--default-primary-text-color: black;--default-secondary-text-color: gray;--default-tertiary-text-color: lightgray;--default-font-family: sans-serif;--default-font-size: 1rem;--default-primary-bg: white;--default-secondary-bg: rgb(246, 246, 247);--default-tertiary-bg: rgb(234, 234, 235);--default-hover-bg: rgba(0, 0, 0, 0.05);--default-scrollbar-bg: rgba(0, 0, 0, 0.05);--default-scrollbar-pill-bg: rgba(0, 0, 0, 0.5);--default-scrollbar-label-bg: rgba(255, 255, 255, 0.9);--default-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);--default-outline-color: rgb(0 0 0 / 0.2);--default-dimmed-row-color: rgb(0 0 0 / 0.2);--default-row-scroll-to-color: rgb(202 225 255);--default-row-hover-color: rgb(220, 235, 255);}.table-defaults.dark.svelte-c7n1rn {--default-primary-text-color: lightgray;--default-secondary-text-color: gray;--default-tertiary-text-color: dimgray;--default-font-family: sans-serif;--default-font-size: 1rem;--default-primary-bg: #060607;--default-secondary-bg: #161617;--default-hover-bg: rgba(255, 255, 255, 0.05);--default-scrollbar-bg: rgba(255, 255, 255, 0.05);--default-scrollbar-pill-bg: rgba(255, 255, 255, 0.5);--default-scrollbar-label-bg: rgba(0, 0, 0, 0.9);--default-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);--default-outline-color: rgb(255 255 255 / 0.2);--default-dimmed-row-color: rgb(0 0 0 / 0.6);--default-row-scroll-to-color: rgb(1, 24, 106);--default-row-hover-color: rgb(0, 6, 35);}.style-wrapper.svelte-c7n1rn {width:100%;height:100%;--primary-text-color: var(--user-primary-text-color, var(--default-primary-text-color));--secondary-text-color: var(--user-secondary-text-color, var(--default-secondary-text-color));--tertiary-text-color: var(--user-tertiary-text-color, var(--default-tertiary-text-color));--font-family: var(--user-font-family, var(--default-font-family));--font-size: var(--user-font-size, var(--default-font-size));--primary-bg: var(--user-primary-bg, var(--default-primary-bg));--secondary-bg: var(--user-secondary-bg, var(--default-secondary-bg));--tertiary-bg: var(--user-tertiarty-bg, var(--default-tertiary-bg));--hover-bg: var(--user-hover-bg, var(--default-hover-bg));--header-font-family: var(--user-header-font-family, var(--font-family));--header-font-size: var(--user-header-font-size, var(--font-size));--cell-font-family: var(--user-cell-font-family, var(--font-family));--cell-font-size: var(--user-cell-font-size, var(--font-size));--scrollbar-bg: var(--user-scrollbar-bg, var(--default-scrollbar-bg));--scrollbar-pill-bg: var(--user-scrollbar-pill-bg, var(--default-scrollbar-pill-bg));--scrollbar-label-bg: var(--user-scrollbar-label-bg, var(--default-scrollbar-label-bg));--shadow: var(--user-shadow, var(--default-shadow));--outline-color: var(--user-outline-color, var(--default-outline-color));--outline: 0.5px solid var(--outline-color);--dimmed-row-color: var(--user-dimmed-row-color, var(--default-dimmed-row-color));--row-scroll-to-color: var(--user-row-scroll-to-color, var(--default-row-scroll-to-color));--row-hover-color: var(--user-row-hover-color, var(--default-row-hover-color));}"};function JKe(t,e){Xo(e,!0),Go(t,KKe);const n=NL.style;let r=qt(()=>n.colorScheme),i=qt(()=>n.theme),s=Nn(null),o=qt(()=>Pe(r)??Pe(s)??"light");const a=De=>{De.matches?Rt(s,"dark"):Rt(s,"light")},l="(prefers-color-scheme: dark";wO(()=>(Rt(s,window.matchMedia(l).matches?"dark":"light",!0),window.matchMedia(l).addEventListener("change",a),()=>{window.matchMedia(l).removeEventListener("change",a)}));let h=qt(()=>YKe(Pe(i),Pe(o))),f=qt(()=>Pe(h).primaryTextColor),p=qt(()=>Pe(h).secondaryTextColor),g=qt(()=>Pe(h).tertiaryTextColor),b=qt(()=>Pe(h).fontFamily),x=qt(()=>Pe(h).fontSize),k=qt(()=>Pe(h).primaryBackgroundColor),T=qt(()=>Pe(h).secondaryBackgroundColor),I=qt(()=>Pe(h).hoverBackgroundColor),M=qt(()=>Pe(h).headerFontFamily),B=qt(()=>Pe(h).headerFontSize),j=qt(()=>Pe(h).cellFontFamily),Q=qt(()=>Pe(h).cellFontSize),Z=qt(()=>Pe(h).scrollbarBackgroundColor),q=qt(()=>Pe(h).scrollbarPillColor),J=qt(()=>Pe(h).scrollbarLabelBackgroundColor),oe=qt(()=>Pe(h).shadow),me=qt(()=>Pe(h).outlineColor),ae=qt(()=>Pe(h).dimmedRowColor),ce=qt(()=>Pe(h).rowScrollToColor),se=qt(()=>Pe(h).rowHoverColor);Po(()=>{});var ge=HKe();let xe;var Se=_s(ge);TQ(Se,()=>e.children),ls(ge),la(()=>{x1(ge,1,`style-wrapper table-defaults ${Pe(o)??""}`,"svelte-c7n1rn"),xe=Ic(ge,"",xe,{"--user-primary-text-color":Pe(f),"--user-secondary-text-color":Pe(p),"--user-tertiary-text-color":Pe(g),"--user-font-family":Pe(b),"--user-font-size":Pe(x),"--user-primary-bg":Pe(k),"--user-secondary-bg":Pe(T),"--user-hover-bg":Pe(I),"--user-header-font-family":Pe(M),"--user-header-font-size":Pe(B),"--user-cell-font-family":Pe(j),"--user-cell-font-size":Pe(Q),"--user-scrollbar-bg":Pe(Z),"--user-scrollbar-pill-bg":Pe(q),"--user-scrollbar-label-bg":Pe(J),"--user-shadow":Pe(oe),"--user-outline-color":Pe(me),"--user-dimmed-row-color":Pe(ae),"--user-row-scroll-to-color":Pe(ce),"--user-row-hover-color":Pe(se)})}),ui(t,ge),Wo()}function eJe(){return rc}function tJe(t,e){const n=new Set(t),r=new Set(e);return{left:t.filter(i=>!r.has(i)),right:e.filter(i=>!n.has(i))}}function nJe(t,e){const n=new Set(e);return t.filter(r=>!n.has(r))}function rJe(t,e){return t.concat(e)}var iJe=is("<div></div>"),sJe=is("<div></div> <!>",1);const oJe={hash:"svelte-14dgpd0",code:".row-background.svelte-14dgpd0 {position:absolute;width:var(--width);height:var(--height);box-sizing:border-box;z-index:-1;transform:translate3d(0, var(--y), 0);transition:background-color 100ms linear;}.odd.svelte-14dgpd0 {background-color:var(--secondary-bg);}.even.svelte-14dgpd0 {background-color:var(--primary-bg);}.dimmer.svelte-14dgpd0 {background-color:var(--dimmed-row-color);z-index:10;pointer-events:none;}.flashed.svelte-14dgpd0 {background-color:var(--row-scroll-to-color);}.hovered.svelte-14dgpd0 {background-color:var(--row-hover-color);}"};function aJe(t,e){Xo(e,!0),Go(t,oJe);const n=Is.controller,r=Is.model,i=Is.overscrollModifier,s=Ps.config;let o=qt(()=>r.rowHeights[e.row]),a=qt(()=>Math.max(r.colsRightmostPosition,n.viewWidth)),l=qt(()=>i.y(r.rowPositions[e.row])),h=qt(()=>r.getRowParity(e.row)),f=qt(()=>n.flashedRowId===e.row),p=qt(()=>n.hoveredRowId===e.row),g=qt(()=>s.highlightedRows?s.highlightedRows?.has(e.row):null);var b=sJe(),x=dh(b);let k;var T=hf(x,2);{var I=M=>{var B=iJe();let j;la(()=>{x1(B,1,`row-background ${Pe(h)??""} dimmer`,"svelte-14dgpd0"),j=Ic(B,"",j,{"--width":Pe(a)+"px","--height":Pe(o)+"px","--y":Pe(l)+"px"})}),ui(M,B)};lc(T,M=>{Pe(g)!==null&&!Pe(g)&&M(I)})}la(()=>{x1(x,1,`row-background ${Pe(h)??""} ${(Pe(f)?"flashed":null)??""} ${(Pe(p)&&s.highlightHoveredRow?"hovered":null)??""}`,"svelte-14dgpd0"),k=Ic(x,"",k,{"--width":Pe(a)+"px","--height":Pe(o)+"px","--y":Pe(l)+"px"})}),ui(t,b),Wo()}var lJe=is("<!> <!>",1),uJe=is('<div class="scroll-container svelte-1v3p82v"><!></div> <!> <!>',1),cJe=is('<div class="table svelte-1v3p82v"><!> <div class="table-contents svelte-1v3p82v"><!></div></div>');const hJe={hash:"svelte-1v3p82v",code:".table.svelte-1v3p82v {width:100%;max-width:var(--max-width);height:100%;display:flex;flex-direction:column;position:relative;}.table-contents.svelte-1v3p82v {position:relative;overflow:hidden;flex-grow:1;}.scroll-container.svelte-1v3p82v {position:absolute;width:0;height:0;will-change:transform;contain:layout size;}"};function fJe(t,e){Xo(e,!0),Go(t,hJe),Ps.initialize(),H5.initialize(),K5.initialize(),NL.initialize(),Is.initialize();const n=Is.controller,r=Is.model,i=Is.overscrollModifier,s=Ps.config,o=NL.style;Po(()=>{e.scrollTo!=null&&n.scrollToRow(String(e.scrollTo))}),Po(()=>{e.highlightedRows&&e.highlightedRows.length>0?s.highlightedRows=new Set(e.highlightedRows.map(M=>String(M))):s.highlightedRows=null}),Po(()=>{e.onRowClick!=null?s.onRowClick=e.onRowClick:s.onRowClick=null}),Po(()=>{e.coordinator?BL.coordinator=e.coordinator:BL.coordinator=null}),Po(()=>{e.numLines!=null?s.textMaxLines=e.numLines:s.textMaxLines=s.DEFAULT_TEXT_MAX_LINES,e.lineHeight!=null?s.lineHeight=e.lineHeight:s.lineHeight=s.DEFAULT_LINE_HEIGHT}),Po(()=>{e.colorScheme!=null?o.colorScheme=e.colorScheme:o.colorScheme=null}),Po(()=>{e.theme!=null?o.theme=e.theme:o.theme={},e.colorScheme!=null?o.colorScheme=e.colorScheme:o.colorScheme=null}),Po(()=>{e.columnConfigs!=null?s.columnConfigs=e.columnConfigs:s.columnConfigs={},e.onColumnConfigsChange!=null?s.onColumnConfigsChange=e.onColumnConfigsChange:s.onColumnConfigsChange=()=>{}}),Po(()=>{s.showRowNumber=e.showRowNumber??null}),Po(()=>{s.onShowRowNumberChange=e.onShowRowNumberChange??null}),Po(()=>{n.initialize({tableName:e.table,rowKey:e.rowKey,columns:[eJe(),...e.columns],filterBy:e.filter??null})}),Po(()=>{e.customCells!=null?H5.config=e.customCells:H5.config={}}),Po(()=>{e.additionalHeaderContents!=null?K5.config=e.additionalHeaderContents:K5.config={}}),Po(()=>{e.headerHeight!=null?s.headerHeight=e.headerHeight:s.headerHeight=null}),Po(()=>{e.highlightHoveredRow!=null?s.highlightHoveredRow=e.highlightHoveredRow:s.highlightHoveredRow=!1});let a=Nn([]),l=Nn(0),h=Nn(null),f=Nn(Hl([])),p=Nn(Hl([])),g=qt(()=>Pe(f).filter(M=>n.rowStillExists(M))),b=qt(()=>Pe(p)),x=0;wO(()=>(x=requestAnimationFrame(I),()=>{n.teardown(),r.teardown(),cancelAnimationFrame(x)}));function k(M,B){if(B.length>0){const j=B[B.length-1];return Math.abs(r.data[M][ic]-r.data[j][ic])}return 0}function T(){const{left:M,right:B}=tJe(Pe(a),r.renderableRows);M.length===0&&B.length===0||(Rt(a,nJe(Pe(a),M)),Rt(a,rJe(Pe(a),B.sort((j,Q)=>k(j,Pe(a))-k(Q,Pe(a))).slice(0,n.isJumping?n.rowsOnScreen:s.rowRenderBatchSize))))}function I(){T(),Rt(f,Pe(a).filter(j=>n.rowIsVisible(j)),!0),Rt(p,r.renderableCols.filter(j=>n.colIsVisible(j)),!0);const M=n.xScroll,B=i.yScroll(n.yScroll);Pe(h)&&(Pe(h).style.transform=`translate3d(${M}px, ${B}px, 0)`),Rt(l,n.updateKey,!0),x=requestAnimationFrame(I)}JKe(t,{children:(M,B)=>{var j=cJe(),Q=_s(j);WKe(Q,{});var Z=hf(Q,2),q=_s(Z);{var J=oe=>{var me=uJe(),ae=dh(me),ce=_s(ae);qYe(ce,()=>Pe(l),xe=>{var Se=lJe(),De=dh(Se);nk(De,16,()=>Pe(g),Ue=>Ue,(Ue,yt)=>{var We=qv(),at=dh(We);nk(at,16,()=>Pe(b),ut=>ut,(ut,wt)=>{mKe(ut,{get row(){return yt},get col(){return wt}})}),ui(Ue,We)});var He=hf(De,2);nk(He,16,()=>r.renderableRows,Ue=>Ue,(Ue,yt)=>{aJe(Ue,{get row(){return yt}})}),ui(xe,Se)}),ls(ae),Nu(ae,xe=>Rt(h,xe),()=>Pe(h));var se=hf(ae,2);QHe(se,{});var ge=hf(se,2);BHe(ge,{}),ui(oe,me)};lc(q,oe=>{n.isReady&&oe(J)})}ls(Z),ls(j),Nu(j,oe=>n.element=oe,()=>n?.element),N2("wheel",j,function(...oe){n.handleWheel?.apply(this,oe)}),Md(Z,"clientHeight",oe=>n.viewHeight=oe),Md(Z,"clientWidth",oe=>n.viewWidth=oe),ui(M,j)},$$slots:{default:!0}}),Wo()}class dJe{component;currentProps;constructor(e,n){this.currentProps={...n},this.component=QYe({component:fJe,target:e,props:n})}update(e){let n={};for(let r in e)e[r]!==this.currentProps[r]&&(n[r]=e[r],this.currentProps[r]=e[r]);this.component.$set(n)}destroy(){this.component.$destroy()}}var pJe=gt("<div></div>");function mJe(t,e){Ln(e,!0);let n=Qs(e,["$$slots","$$events","$$legacy"]),r;s_(()=>{let s=new dJe(r,n);xh(()=>{s.update(n)}),VP(()=>{s.destroy()})});var i=pJe();lr(i,"",{},{width:"100%",height:"100%"}),zu(i,s=>r=s,()=>r),Re(t,i),$n()}const gJe={fontSize:"13px",fontFamily:"system-ui",light:{primaryBackgroundColor:"white",secondaryBackgroundColor:"var(--color-slate-100)",primaryTextColor:"var(--color-slate-500)",secondaryTextColor:"var(--color-slate-400)",tertiaryTextColor:"var(--color-slate-300)",scrollbarPillColor:"var(--color-slate-400)",scrollbarLabelBackgroundColor:"white",rowScrollToColor:"var(--color-blue-200)",rowHoverColor:"var(--color-blue-100)"},dark:{primaryBackgroundColor:"black",secondaryBackgroundColor:"var(--color-slate-900)",primaryTextColor:"var(--color-slate-400)",secondaryTextColor:"var(--color-slate-500)",tertiaryTextColor:"var(--color-slate-600)",scrollbarPillColor:"var(--color-slate-500)",scrollbarLabelBackgroundColor:"var(--color-slate-900)",rowScrollToColor:"var(--color-blue-900)",rowHoverColor:"var(--color-blue-950)"}};function yJe(t,e){Ln(e,!0);const n=()=>qo(a,"$columnStyles",i),r=()=>qo(o,"$colorScheme",i),[i,s]=Cf();let{colorScheme:o,columnStyles:a}=e.context,l=The(e.context.highlight),h=hn(null);Oo(()=>l.subscribe(g=>{F(h)!==g&&ct(h,g,!0)}));function f(g,b,x){let k={};for(let T of g)x?.[T.name]!=null&&(k[T.name]=jX(x[T.name])),b[T.name]?.renderer!=null&&(k[T.name]=jX(b[T.name]?.renderer));return k}let p=Fe(()=>f(e.context.columns,n(),e.context.tableCellRenderers));mJe(t,{get coordinator(){return e.context.coordinator},get table(){return e.context.table},get rowKey(){return e.context.id},get columns(){return e.spec.columns},get filter(){return e.context.filter},get scrollTo(){return F(h)},onRowClick:async g=>{l.set(g)},numLines:3,get colorScheme(){return r()},get theme(){return gJe},highlightHoveredRow:!0,get customCells(){return F(p)}}),$n(),s()}async function vJe(t){let{coordinator:e,table:n,projection:r}=t,i=t.config??{},s=i.exclude??[],o=(await fhe(e,n)).filter(l=>!l.name.startsWith("__")),a=[];if(r!=null&&i.embedding!==!1){let l={type:"embedding",title:"Embedding",data:{x:r.x,y:r.y,text:r.text,isGis:r.isGis}};typeof i.embedding=="object"&&(l={...l,...i.embedding}),a.push(l),s.push(r.x),s.push(r.y),r.text&&s.push(r.text)}if(a.push({type:"predicates",title:"SQL Predicates"}),i.table!==!1){let l={type:"table",title:"Table",columns:o.map(h=>h.name)};typeof i.table=="object"&&(l={...l,...i.table}),a.push(l)}for(let l of o){if(l.jsType==null||i.include!=null&&i.include.indexOf(l.name)<0||s.indexOf(l.name)>=0)continue;let h=i.override?.[l.name];if(h!==void 0){h!==null&&a.push(h);continue}let f=await dhe(e,n,l.name);if(!(f<=1))switch(l.jsType){case"string":{f<=1e3&&a.push({type:"count-plot",title:l.name,data:{field:l.name}});break}case"string[]":{a.push({type:"count-plot",title:l.name,data:{field:l.name,isList:!0}});break}case"number":{f<=10?a.push({type:"count-plot",title:l.name,data:{field:l.name}}):a.push(Nfe(l.name));break}}}return a}function Nfe(t,e){return{title:t,layers:[{mark:"bar",style:{fillColor:"$markColorFade"},encoding:{x:{field:t},y:{aggregate:"count"}}},{mark:"bar",filter:"$filter",encoding:{x:{field:t},y:{aggregate:"count"},...e?{color:{field:e}}:{}}}],selection:{brush:{encoding:"x"}},widgets:[{type:"scale.type",channel:"x"},{type:"encoding.normalize",attribute:"y",layer:[0,1],options:["x"]}]}}const zfe={},Qfe={},jfe=[];function w_(t,e,n={}){zfe[t]=e,Qfe[t]=n}function Tf(t){jfe.push(t)}function bJe(t){if(typeof t!="object")return cG;if(typeof t.type=="string"){let e=zfe[t.type];return e??cG}return FGe}function Ufe(t){if(typeof t!="object")return{};if(typeof t.type=="string"){let e=Qfe[t.type];return e??{}}return{}}function _Je(){return jfe}w_("builder",JZe);w_("count-plot",sZe);w_("embedding",_We);w_("predicates",OZe);w_("table",yJe);w_("markdown",lZe,{supportsEditMode:!0});w_("content-viewer",wLe);Tf({icon:"chart-h-bar",description:"Create a count plot of a field",ui:[{field:{key:"x",label:"Field",types:["number","string","string[]"],required:!0}}],create:({x:t})=>t.type=="discrete[]"?{title:t.name,type:"count-plot",data:{field:t.name,isList:!0}}:{title:t.name,type:"count-plot",data:{field:t.name}}});Tf({icon:"chart-stacked",description:"Create a histogram of a field",ui:[{field:{key:"x",label:"Field",types:["number","string"],required:!0}},{field:{key:"color",label:"Group Field",types:["number","string"]}}],create:({x:t,color:e})=>Nfe(t.name,e?.name)});Tf({icon:"chart-line",description:"Create a line chart of two fields",ui:[{field:{key:"x",label:"X Field",types:["number","string"],required:!0}},{field:{key:"y",label:"Y Field",types:["number"],required:!0}},{field:{key:"color",label:"Group Field",types:["number","string"]}}],create:({x:t,y:e,color:n})=>({title:e.name,layers:[{mark:"line",filter:"$filter",encoding:{x:{field:t.name},y:{aggregate:"mean",field:e.name},...n?{color:{field:n.name}}:{}}}],selection:{brush:{encoding:"x"}},widgets:[{type:"scale.type",channel:"x"},{type:"encoding.normalize",attribute:"y",layer:0,options:["x"]}]})});Tf({icon:"chart-ecdf",description:"Create a chart showing the empirical cumulative distribution (eCDF) of a field",ui:[{field:{key:"x",label:"Field",types:["number"],required:!0}},{field:{key:"color",label:"Group Field",types:["number","string"]}}],create:({x:t,color:e})=>({title:t.name,layers:[{mark:"line",filter:"$filter",encoding:{x:{aggregate:"ecdf-value",field:t.name},y:{aggregate:"ecdf-rank"},...e?{color:{field:e.name}}:{}}}],selection:{brush:{encoding:"x"}},widgets:[{type:"scale.type",channel:"x"}]})});Tf({icon:"chart-heatmap",description:"Create a 2D heatmap of two fields",ui:[{field:{key:"x",label:"X Field",types:["number","string"],required:!0}},{field:{key:"y",label:"Y Field",types:["number","string"],required:!0}}],create:({x:t,y:e})=>({title:`${t.name}, ${e.name}`,layers:[{mark:"rect",filter:"$filter",zIndex:-1,encoding:{x:{field:t.name},y:{field:e.name},color:{aggregate:"count"}}},{mark:"rect",zIndex:-2,encoding:{color:{value:0}}}],selection:{brush:{encoding:"xy"}},widgets:[{type:"scale.type",channel:"x"},{type:"scale.type",channel:"y"},{type:"encoding.normalize",attribute:"color",layer:0,options:["x","y"]}]})});Tf({icon:"chart-boxplot",description:"Create a box plot",ui:[{field:{key:"x",label:"X Field",required:!0}},{field:{key:"y",label:"Y Field",types:["number"],required:!0}}],create:({x:t,y:e})=>({title:t.name,layers:[{mark:"rect",filter:"$filter",width:1,style:{fillColor:"$ruleColor"},encoding:{x:{field:t.name},y1:{aggregate:"min",field:e.name},y2:{aggregate:"max",field:e.name}}},{mark:"rect",filter:"$filter",width:{gap:1,clampToRatio:.1},encoding:{x:{field:t.name},y1:{aggregate:"quantile",quantile:.25,field:e.name},y2:{aggregate:"quantile",quantile:.75,field:e.name}}},{mark:"rect",filter:"$filter",height:1,width:{gap:1,clampToRatio:.1},style:{fillColor:"$ruleColor"},encoding:{x:{field:t.name},y:{aggregate:"median",field:e.name}}}],selection:{brush:{encoding:"x"}},axis:{y:{title:e.name}},widgets:[{type:"scale.type",channel:"x"},{type:"scale.type",channel:"y"}]})});Tf({icon:"chart-bubble",description:"Create a bubble chart",ui:[{field:{key:"x",label:"X Field",types:["number"],required:!0}},{field:{key:"y",label:"Y Field",types:["number"],required:!0}},{field:{key:"color",label:"Color Field",types:["number","string"]}},{field:{key:"group",label:"Group Field",types:["number","string"]}}],create:({x:t,y:e,color:n,group:r})=>({title:t.name,layers:[{mark:"point",filter:"$filter",style:{fillColor:"$encoding",fillOpacity:.1,strokeColor:"$encoding"},encoding:{x:{aggregate:"mean",field:t.name},y:{aggregate:"mean",field:e.name},size:{aggregate:"count"},...n?{color:{field:n?.name}}:{},...r?{group:{field:r.name}}:{}}}],selection:{brush:{encoding:"xy"}},widgets:[{type:"scale.type",channel:"x"},{type:"scale.type",channel:"y"}]})});Tf({icon:"chart-embedding",description:"Create an embedding view",ui:[{field:{key:"x",label:"X Field",types:["number"],required:!0}},{field:{key:"y",label:"Y Field",types:["number"],required:!0}},{field:{key:"text",label:"Text Field",types:["string"]}},{field:{key:"category",label:"Category Field",types:["string","number"]}},{boolean:{key:"isGis",label:"GIS Mode"}}],preview:!1,create:({x:t,y:e,text:n,category:r,isGis:i},s)=>({type:"embedding",title:"Embedding",data:{x:t.name,y:e.name,text:n?.name,category:r?.name,isGis:!!i}})});Tf({icon:"chart-predicates",description:"Create a filter with custom SQL predicates",ui:[],create:()=>({type:"predicates",title:"SQL Predicates"})});Tf({icon:"chart-markdown",description:"Create a view with markdown content",preview:!1,ui:[{code:{key:"content",language:"markdown"}}],create:({content:t})=>({type:"markdown",title:"Markdown",content:t})});Tf({icon:"chart-content-viewer",description:"Create a view that displays a given field's content for the last selected point",preview:!1,ui:[{field:{key:"field",label:"Field",required:!0}}],create:({field:t})=>({type:"content-viewer",title:t.name,field:t.name})});Tf({icon:"chart-spec",description:"Create a chart with custom spec",preview:!1,ui:[{spec:{key:"spec"}}],create:({spec:t})=>t});var xJe=gt('<div class="p-2 h-full flex flex-col gap-2"><!> <!></div>'),wJe=gt('<div class="absolute"><div class="absolute left-0 right-0 top-0 bottom-0 bg-white dark:bg-black rounded-md overflow-hidden flex flex-col shadow-md border border-slate-300 dark:border-slate-700 group"><div class="p-2 bg-slate-100 dark:bg-slate-900 flex cursor-move select-none"><div class="flex-1 font-mono font-medium whitespace-nowrap overflow-hidden text-ellipsis"> </div> <div class="flex gap-1 sm:opacity-0 group-hover:opacity-100"><!> <!></div></div> <div class="flex-1 min-h-0"><!></div></div> <div class="absolute cursor-ew-resize"></div> <div class="absolute cursor-ew-resize"></div> <div class="absolute cursor-ns-resize"></div> <div class="absolute cursor-ns-resize"></div> <div class="absolute cursor-nwse-resize"></div> <div class="absolute cursor-nesw-resize"></div> <div class="absolute cursor-nesw-resize"></div> <div class="absolute cursor-nwse-resize"></div></div>');function OJe(t,e){Ln(e,!0);const n=()=>qo(s,"$colorScheme",r),[r,i]=Cf();let{colorScheme:s}=e.context,o=Fe(()=>e.grid.resolvePlacement(e.placement)),a=Fe(()=>F(o).x),l=Fe(()=>F(o).y),h=Fe(()=>F(o).width),f=Fe(()=>F(o).height),p=hn(!1),g=Fe(()=>Ufe(e.spec).supportsEditMode??!1),b=Fe(()=>F(g)&&F(p)?"edit":"view"),x=hn(void 0),k;function T(ot){return dt=>{let Yt=e.grid.numColumns,Ft=e.grid.xScaler,Ot=e.grid.yScaler,Kt=e.placement.x,Dn=e.placement.y,Ut=e.placement.x+e.placement.width,At=e.placement.y+e.placement.height;return e.onBringToFront?.(),e.onIsPlacementChanging?.(!0),{move:zt=>{let nn=Math.round(Kt+(zt.clientX-dt.clientX)*ot[0]/Ft),Ze=Math.round(Dn+(zt.clientY-dt.clientY)*ot[1]/Ot),cn=Math.round(Ut+(zt.clientX-dt.clientX)*ot[2]/Ft),Fn=Math.round(At+(zt.clientY-dt.clientY)*ot[3]/Ot);const An=2,qn=2;ot[0]&&ot[2]?(nn=Math.min(Math.max(0,nn),Yt-(Ut-Kt)),cn=nn+(Ut-Kt)):(nn=Math.min(Math.max(0,nn),Ut-An),cn=Math.min(Math.max(Kt+An,cn),Yt)),ot[1]&&ot[3]?(Ze=Math.max(0,Ze),Fn=Ze+(At-Dn)):(Ze=Math.min(Math.max(0,Ze),At-qn),Fn=Math.max(Dn+qn,Fn)),e.onPlacementChange?.({x:nn,y:Ze,width:cn-nn,height:Fn-Ze})},up:()=>{e.onIsPlacementChanging?.(!1)},cancel:()=>{e.onIsPlacementChanging?.(!1)}}}}function I(){k?.scrollIntoView({block:"nearest"})}var M={scrollIntoView:I},B=wJe();B.__click=()=>{e.onBringToFront?.()};let j;var Q=je(B),Z=je(Q),q=je(Z),J=je(q,!0);Be(q),Do(q,(ot,dt)=>vs?.(ot,dt),()=>({click:()=>{e.onBringToFront?.()},drag:T([1,1,1,1])}));var oe=lt(q,2),me=je(oe);{let ot=Fe(()=>F(b)=="edit"?wle:mz);My(me,{get icon(){return F(ot)},onClick:()=>{ct(p,!F(p)),F(p)&&ct(x,e.spec)}})}var ae=lt(me,2);My(ae,{get icon(){return cO},get onClick(){return e.onRemove}}),Be(oe),Be(Z);var ce=lt(Z,2),se=je(ce);{var ge=ot=>{var dt=ar(),Yt=pn(dt);vf(Yt,()=>e.chartView,()=>({id:e.id,width:"container",height:"container",mode:F(b)})),Re(ot,dt)},xe=ot=>{var dt=xJe(),Yt=je(dt);pz(Yt,{class:"w-full flex-1 min-h-0",get initialValue(){return F(x)},get colorScheme(){return n()},onChange:Ot=>{ct(x,Ot)}});var Ft=lt(Yt,2);{let Ot=Fe(()=>F(x)==null);SB(Ft,{label:"Confirm",get disabled(){return F(Ot)},onClick:()=>{F(x)!=null&&(e.onSpecChange(F(x)),ct(p,!1))}})}Be(dt),Re(ot,dt)};Pt(se,ot=>{F(b)=="view"&&F(p)&&e.onSpecChange?ot(xe,!1):ot(ge)})}Be(ce),Be(Q);var Se=lt(Q,2);lr(Se,"",{},{left:"-2px",top:"10px",bottom:"10px",width:"10px"}),Do(Se,(ot,dt)=>vs?.(ot,dt),()=>({drag:T([1,0,0,0])}));var De=lt(Se,2);lr(De,"",{},{right:"-2px",top:"10px",bottom:"10px",width:"10px"}),Do(De,(ot,dt)=>vs?.(ot,dt),()=>({drag:T([0,0,1,0])}));var He=lt(De,2);lr(He,"",{},{left:"10px",right:"10px",top:"-2px",height:"10px"}),Do(He,(ot,dt)=>vs?.(ot,dt),()=>({drag:T([0,1,0,0])}));var Ue=lt(He,2);lr(Ue,"",{},{left:"10px",right:"10px",bottom:"-2px",height:"10px"}),Do(Ue,(ot,dt)=>vs?.(ot,dt),()=>({drag:T([0,0,0,1])}));var yt=lt(Ue,2);lr(yt,"",{},{left:"-2px",top:"-2px",width:"10px",height:"10px"}),Do(yt,(ot,dt)=>vs?.(ot,dt),()=>({drag:T([1,1,0,0])}));var We=lt(yt,2);lr(We,"",{},{right:"-2px",top:"-2px",width:"10px",height:"10px"}),Do(We,(ot,dt)=>vs?.(ot,dt),()=>({drag:T([0,1,1,0])}));var at=lt(We,2);lr(at,"",{},{left:"-2px",bottom:"-2px",width:"10px",height:"10px"}),Do(at,(ot,dt)=>vs?.(ot,dt),()=>({drag:T([1,0,0,1])}));var ut=lt(at,2);lr(ut,"",{},{right:"-2px",bottom:"-2px",width:"10px",height:"10px"}),Do(ut,(ot,dt)=>vs?.(ot,dt),()=>({drag:T([0,0,1,1])})),Be(B),zu(B,ot=>k=ot,()=>k),on(()=>{j=lr(B,"",j,{left:`${F(a)??""}px`,top:`${F(l)??""}px`,width:`${F(h)??""}px`,height:`${F(f)??""}px`,"z-index":e.order}),Pr(J,e.spec.title)}),Ey(3,B,()=>ete,()=>({duration:100})),Re(t,B);var wt=$n(M);return i(),wt}Js(["click"]);function RQ(t,e=""){let n=1,r;do r=e+n,n++;while(r in t);return r}function Vfe(t,e){if(!e||e.length===0)return t;let n=new Set(t),r=new Set(e);return[...e.filter(i=>n.has(i)),...t.filter(i=>!r.has(i))]}class TI{numColumns;rows;constructor(e){if(e>32)throw new Error("numColumns must be <= 32");this.numColumns=e,this.rows=new Uint32Array(128)}ensureSize(e){if(this.rows.length<e){let n=Math.ceil(this.rows.length*1.5);for(;n<e;)n=Math.ceil(n*1.5);let r=new Uint32Array(n);r.set(this.rows,0),this.rows=r}}clone(){let e=new TI(this.numColumns);return e.rows=new Uint32Array(this.rows),e}get(e,n){return e<0||e>=this.numColumns||n<0||n>=this.rows.length?!1:(this.rows[n]&1<<e)!=0}set(e,n,r){e<0||e>=this.numColumns||n<0||(this.ensureSize(n+1),r==0?this.rows[n]&=~(1<<e):r==1&&(this.rows[n]|=1<<e))}check(e,n,r,i){if(e<0&&(r+=e,e=0),n<0&&(i+=n,n=0),e+r>this.numColumns&&(r=this.numColumns-e),r<=0||i<=0)return!0;let s=(1<<r)-1<<e;for(let o=0;o<i;o++)if(n+o<this.rows.length&&(this.rows[n+o]&s)!=0)return!1;return!0}fill(e,n,r,i){if(e<0&&(r+=e,e=0),n<0&&(i+=n,n=0),e+r>this.numColumns&&(r=this.numColumns-e),r<=0||i<=0)return;const s=(1<<r)-1<<e;this.ensureSize(n+i);for(let o=0;o<i;o++)this.rows[n+o]|=s}find(e,n){if(e<=0||n<=0||e>this.numColumns)throw new Error("invalid dimensions");let r=this.rows.length;for(let s=0;s<r;s++)for(let o=0;o<=this.numColumns-e;o++)if(this.check(o,s,e,n))return{x:o,y:s};return{x:0,y:this.rows.length}}maxOccupiedY(){for(let e=this.rows.length-1;e>=0;e--)if(this.rows[e]!=0)return e;return-1}unusedRects(e,n,r,i){let s=this.clone(),o=[],a=this.maxOccupiedY();for(let l=0;l<=a;l++)for(let h=0;h<s.numColumns;h++){if(s.get(h,l))continue;let f=0;for(let g=1;g<=Math.min(r,s.numColumns-h)&&!s.get(h+g-1,l);g++)f=g;if(f<e)continue;let p=0;for(let g=f;g>=e;g--){p=0;for(let b=1;b<=Math.min(i,s.rows.length-l);b++){let x=!0;for(let k=0;k<g;k++)if(s.get(h+k,l+b-1)){x=!1;break}if(!x)break;p=b}if(l+p>a+1&&(p=a+1-l),p>=n){o.push({x:h,y:l,width:g,height:p}),s.fill(h,l,g,p);break}}}return o}}class SJe{containerWidth;containerHeight;numColumns;numRows;gap;constructor(e,n,r,i,s){this.containerWidth=e,this.containerHeight=n,this.numColumns=r,this.numRows=i,this.gap=s}resolvePlacement(e){let n=(this.containerWidth-this.gap*(this.numColumns-1))/this.numColumns,r=(this.containerHeight-this.gap*(this.numRows-1))/this.numRows;return{x:e.x*(n+this.gap),y:e.y*(r+this.gap),width:e.width*n+(e.width-1)*this.gap,height:e.height*r+(e.height-1)*this.gap}}get xScaler(){return(this.containerWidth+this.gap)/this.numColumns}get yScaler(){return(this.containerHeight+this.gap)/this.numRows}}function kJe(t,e,n){let r={},i=new TI(n);for(let s in t){let o=e[s];o!=null&&(i.fill(o.x,o.y,o.width,o.height),r[s]=o)}for(let s in t){if(r[s]!=null)continue;let o=8,a=5;t[s].type=="embedding"&&(o=16,a=12),t[s].type=="table"&&(o=n,a=6),o>n&&(o=n);let{x:l,y:h}=i.find(o,a);i.fill(l,h,o,a),r[s]={x:l,y:h,width:o,height:a}}return r}var CJe=gt('<button class="absolute rounded-md border bg-slate-100 dark:bg-slate-900 border-slate-400 text-slate-400 dark:border-slate-500 dark:text-slate-500 border-dashed opacity-0 hover:opacity-50 flex items-center justify-center"><!></button>'),AJe=gt("<div><div><!> <!></div></div>");function EJe(t,e){Ln(e,!0);let n=hn(100),r=hn(100),i,s=hn(0),o=Fe(()=>e.state.numColumns??(F(n)<500?8:24)),a=Fe(()=>e.state.numRows??16),l=Fe(()=>new SJe(F(n),F(r),F(o),F(a),6)),h=Fe(()=>`${F(o)}x${F(a)}`),f=Fe(()=>kJe(e.charts,e.state.grids?.[F(h)]?.placements??{},F(l).numColumns)),p=Fe(j7(()=>Vfe(Object.keys(e.charts),e.state.grids?.[F(h)]?.order).reverse())),g=Fe(()=>{let me=new TI(F(l).numColumns);for(let ae in F(f))me.fill(F(f)[ae].x,F(f)[ae].y,F(f)[ae].width,F(f)[ae].height);return me.unusedRects(4,4,12,8)}),b=Fe(()=>{let me=F(l).numRows;for(let ae in F(f))me=Math.max(me,F(f)[ae].y+F(f)[ae].height);return me}),x=hn(void 0),k=Fe(()=>Math.max(F(x)??F(b),F(b))),T=Fe(()=>F(k)<=F(l).numRows?F(r):F(l).yScaler*F(k));Oo(()=>{let me=F(s)>=1;xl(()=>{me?ct(x,Math.max(F(x)??F(b),F(b)),!0):ct(x,0)})});function I(me){e.onStateChange({grids:{[F(h)]:{placements:{...F(f),[me]:void 0}}}}),e.onChartsChange({[me]:void 0}),e.onChartStatesChange({[me]:void 0})}function M(me){let ae=e.state.grids?.[F(h)]?.order??[],ce=[me,...ae.filter(se=>se!=me)];e.onStateChange({grids:{[F(h)]:{order:ce}}})}function B(me){let ae=RQ(e.charts);e.onChartsChange({[ae]:{type:"builder",title:"New"}}),e.onStateChange({grids:{[F(h)]:{placements:{[ae]:me}}}})}let j=Ng({});s_(()=>{let me=new Set(Object.keys(e.charts));xh(()=>{let ae=me;if(me=new Set(Object.keys(e.charts)),me.size!=ae.size+1)return;let ce=[];for(let se of me)ae.has(se)||ce.push(se);ce.length==1&&j[ce[0]]?.scrollIntoView()})});var Q=AJe(),Z=je(Q);let q;var J=je(Z);Wr(J,17,()=>F(g),Wi,(me,ae)=>{const ce=Fe(()=>F(l).resolvePlacement(F(ae)));var se=CJe(),ge=Fe(()=>B.bind(null,F(ae)));se.__click=function(...De){F(ge)?.apply(this,De)};let xe;var Se=je(se);xle(Se,{}),Be(se),on(()=>xe=lr(se,"",xe,{left:`${F(ce).x??""}px`,top:`${F(ce).y??""}px`,width:`${F(ce).width??""}px`,height:`${F(ce).height??""}px`})),Ey(3,se,()=>ete,()=>({duration:100})),Re(me,se)});var oe=lt(J,2);Wr(oe,16,()=>Object.keys(e.charts),me=>me,(me,ae)=>{{let ce=Fe(()=>F(f)[ae]??{x:0,y:0,width:4,height:3}),se=Fe(()=>F(p).indexOf(ae)),ge=Fe(()=>I.bind(null,ae)),xe=Fe(()=>M.bind(null,ae));zu(OJe(me,{get context(){return e.context},get id(){return ae},get spec(){return e.charts[ae]},get placement(){return F(ce)},get grid(){return F(l)},get order(){return F(se)},get onRemove(){return F(ge)},onPlacementChange:Se=>{e.onStateChange({grids:{[F(h)]:{placements:{...F(f),[ae]:Se}}}})},onIsPlacementChanging:Se=>ct(s,F(s)+(Se?1:-1)),get onBringToFront(){return F(xe)},onSpecChange:Se=>{e.onChartsChange({[ae]:void 0}),e.onChartStatesChange({[ae]:void 0}),e.onChartsChange({[ae]:Se})},get chartView(){return e.chartView}}),(Se,De)=>j[De]=Se,Se=>j?.[Se],()=>[ae])}}),Be(Z),zu(Z,me=>i=me,()=>i),Be(Q),on(()=>{Hi(Q,1,`w-full h-full overflow-x-hidden relative ${F(T)>F(r)?"overflow-y-scroll overscroll-none":"overflow-y-hidden"}`),q=lr(Z,"",q,{"z-index":0,width:`${F(n)??""}px`,height:`${F(T)??""}px`,position:"relative",overflow:"hidden"})}),a0(Q,"clientWidth",me=>ct(n,me)),a0(Q,"clientHeight",me=>ct(r,me)),Re(t,Q),$n()}Js(["click"]);function TJe(t,e){Ln(e,!0);function n(){let r=RQ(e.charts);e.onChartsChange({[r]:{type:"builder",title:"New"}})}om(t,{get icon(){return xle},onClick:n,title:"Add"}),$n()}function yY(t,{from:e,to:n},r={}){var{delay:i=0,duration:s=Z=>Math.sqrt(Z)*120,easing:o=vhe}=r,a=getComputedStyle(t),l=a.transform==="none"?"":a.transform,[h,f]=a.transformOrigin.split(" ").map(parseFloat);h/=t.clientWidth,f/=t.clientHeight;var p=PJe(t),g=t.clientWidth/n.width/p,b=t.clientHeight/n.height/p,x=e.left+e.width*h,k=e.top+e.height*f,T=n.left+n.width*h,I=n.top+n.height*f,M=(x-T)*g,B=(k-I)*b,j=e.width/n.width,Q=e.height/n.height;return{delay:i,duration:typeof s=="function"?s(Math.sqrt(M*M+B*B)):s,easing:o,css:(Z,q)=>{var J=q*M,oe=q*B,me=Z+q*j,ae=Z+q*Q;return`transform: ${l} translate(${J}px, ${oe}px) scale(${me}, ${ae});`}}}function PJe(t){if("currentCSSZoom"in t)return t.currentCSSZoom;for(var e=t,n=1;e!==null;)n*=+getComputedStyle(e).zoom,e=e.parentElement;return n}var DJe=gt('<div class="text-sm pr-0.5"><!></div>'),IJe=gt('<div class="text-sm pr-0.5"><!></div>'),MJe=gt('<div class="h-96"><div class="w-full h-96 p-2 flex flex-col gap-2"><!> <!></div></div>'),RJe=gt('<div class="p-2 flex items-center"><button class="font-mono font-medium h-6 text-left flex flex-1 mr-2 overflow-hidden items-center"><!> <div class="flex-1 whitespace-nowrap overflow-hidden text-ellipsis"> </div></button> <div class="flex-none flex gap-1 sm:opacity-0 group-hover:opacity-100"><!> <!> <!> <!></div></div> <div><div class="overflow-hidden"><!> <!></div></div>',1);function vY(t,e){Ln(e,!0);let n=hn(!1),r=Fe(()=>Ufe(e.spec).supportsEditMode??!1),i=Fe(()=>F(r)&&F(n)?"edit":"view"),s=hn(void 0);var o=RJe(),a=pn(o),l=je(a);l.__click=()=>e.onIsVisibleChange?.(!e.isVisible);var h=je(l);{var f=se=>{var ge=DJe(),xe=je(ge);CX(xe,{}),Be(ge),Re(se,ge)},p=se=>{var ge=IJe(),xe=je(ge);kX(xe,{}),Be(ge),Re(se,ge)};Pt(h,se=>{e.isVisible?se(f):se(p,!1)})}var g=lt(h,2),b=je(g,!0);Be(g),Be(l);var x=lt(l,2),k=je(x);{var T=se=>{{let ge=Fe(()=>F(i)=="edit"?wle:mz);My(se,{get icon(){return F(ge)},title:"Edit",onClick:()=>{ct(n,!F(n)),F(n)&&(ct(s,e.spec),e.onIsVisibleChange?.(!0))}})}};Pt(k,se=>{e.onSpecChange&&se(T)})}var I=lt(k,2);{var M=se=>{My(se,{get icon(){return CX},title:"Move up",get onClick(){return e.onUp}})};Pt(I,se=>{e.onUp&&se(M)})}var B=lt(I,2);{var j=se=>{My(se,{get icon(){return kX},title:"Move down",get onClick(){return e.onDown}})};Pt(B,se=>{e.onDown&&se(j)})}var Q=lt(B,2);{var Z=se=>{My(se,{get icon(){return cO},title:"Close",onClick:()=>e.onRemove()})};Pt(Q,se=>{e.onRemove&&se(Z)})}Be(x),Be(a);var q=lt(a,2);let J;var oe=je(q),me=je(oe);vf(me,()=>e.chartView,()=>({id:e.id,width:"container",mode:F(i)}));var ae=lt(me,2);{var ce=se=>{var ge=MJe(),xe=je(ge),Se=je(xe);pz(Se,{class:"w-full flex-1 min-h-0",get initialValue(){return F(s)},get colorScheme(){return e.colorScheme},onChange:He=>{ct(s,He)}});var De=lt(Se,2);{let He=Fe(()=>F(s)==null);SB(De,{label:"Confirm",get disabled(){return F(He)},onClick:()=>{F(s)!=null&&(e.onSpecChange(F(s)),ct(n,!1))}})}Be(xe),Be(ge),Ey(3,ge,()=>p3),Re(se,ge)};Pt(ae,se=>{F(i)=="view"&&F(n)&&e.onSpecChange&&se(ce)})}Be(oe),Be(q),on(()=>{Pr(b,e.spec.title),J=lr(q,"",J,{display:"grid","grid-template-rows":e.isVisible?"1fr":"0fr",transition:"grid-template-rows 300ms ease-in-out"})}),Re(t,o),$n()}Js(["click"]);var FJe=gt("<div></div>");function bY(t,e){Ln(e,!0);let n=Qs(e,["$$slots","$$events","$$legacy"]);function r(s){let o=s.pageX,a=s.pageY,l=e.value;return{move:h=>{let f=h.pageX-o,p=h.pageY-a,g=l+(e.axis=="x"?f:p)*e.scaler;g<e.min&&(g=n.min),g>e.max&&(g=n.max),e.onChange(g)}}}var i=FJe();Do(i,(s,o)=>vs?.(s,o),()=>({drag:r})),on(()=>Hi(i,1,`${e.class??""} ${e.axis=="x"?"cursor-col-resize":"cursor-row-resize"}`)),Re(t,i),$n()}function LJe(t){switch(t.type){case"embedding":return"embedding";case"table":return"table";default:return"chart"}}function qfe(t){let e={embedding:[],table:[],chart:[]};for(let n in t){let r=LJe(t[n]);r!=null&&e[r].push(n)}return e}var $Je=gt('<div class="flex-1 overflow-hidden rounded-md"><!></div>'),BJe=gt('<div class="flex flex-row gap-2 flex-1 overflow-hidden"></div>'),NJe=gt('<div class="flex-1 h-full overflow-hidden rounded-md"><!></div>'),zJe=gt("<div></div>"),QJe=gt('<div class="flex-1 flex flex-col overflow-hidden"><!> <!> <!></div>'),jJe=gt('<div class="bg-white dark:bg-black rounded-md flex flex-col group"><!></div>'),UJe=gt('<div class="h-full overflow-x-hidden overflow-y-scroll"><div class="flex flex-row flex-wrap gap-2"><button class="bg-white dark:bg-black rounded-md flex flex-col justify-center items-center gap-2 p-2 w-full text-slate-500 hover:text-slate-900 dark:text-slate-400 dark:hover:text-slate-100 select-none">+ Add</button> <!></div></div>'),VJe=gt("<!> <!> <!>",1),qJe=gt('<div class="bg-white dark:bg-black rounded-md flex flex-col group"><!></div>'),ZJe=gt('<div class="w-full h-full overflow-y-scroll flex flex-col gap-2"></div>'),XJe=gt('<div class="w-full h-full flex flex-row"><!></div>');function WJe(t,e){Ln(e,!0);const n=()=>qo(s,"$colorScheme",r),[r,i]=Cf();let{colorScheme:s}=e.context,o=hn(100),a=hn(100),l=hn(300),h=hn(400),f=Fe(j7(()=>qfe(e.charts))),p=Fe(()=>F(o)<500),g=Fe(()=>F(f).embedding.length>0&&(e.state.showEmbedding??!0)),b=Fe(()=>F(f).table.length>0&&(e.state.showTable??!0)),x=Fe(()=>e.state.showCharts??!0);function k(q,J){let me=Math.round((q+7)/(J+7)),ae,ce;for(let se=Math.max(1,me-1);se<=Math.max(1,me+1);se++){let ge=(q-7*(se-1))/se,xe=Math.abs(ge-J);(ae==null||xe<ae)&&(ae=xe,ce=ge)}return Math.floor((ce??400)*2)/2}let T=Fe(j7(()=>Vfe(F(f).chart,e.state.chartsOrder)));function I(q,J){let oe=[...F(T)],me=oe.indexOf(q);if(me==-1)return;let ae=me+J;ae<0||ae>=oe.length||([oe[me],oe[ae]]=[oe[ae],oe[me]],e.onStateChange({chartsOrder:oe}))}function M(q){e.onChartsChange({[q]:void 0}),e.onChartStatesChange({[q]:void 0})}var B=XJe(),j=je(B);{var Q=q=>{var J=VJe(),oe=pn(J);{var me=xe=>{var Se=QJe(),De=je(Se);{var He=ut=>{var wt=BJe();Wr(wt,20,()=>F(f).embedding,ot=>ot,(ot,dt)=>{var Yt=$Je(),Ft=je(Yt);vf(Ft,()=>e.chartView,()=>({id:dt,width:"container",height:"container"})),Be(Yt),Re(ot,Yt)}),Be(wt),Re(ut,wt)};Pt(De,ut=>{F(g)&&ut(He)})}var Ue=lt(De,2);{var yt=ut=>{{let wt=Fe(()=>F(a)-100);bY(ut,{class:"h-2 flex-none",axis:"y",min:100,get max(){return F(wt)},scaler:-1,get value(){return F(l)},onChange:ot=>ct(l,ot,!0)})}};Pt(Ue,ut=>{F(g)&&F(b)&&ut(yt)})}var We=lt(Ue,2);{var at=ut=>{var wt=zJe();let ot;Wr(wt,20,()=>F(f).table,dt=>dt,(dt,Yt)=>{var Ft=NJe(),Ot=je(Ft);vf(Ot,()=>e.chartView,()=>({id:Yt,width:"container",height:"container"})),Be(Ft),Re(dt,Ft)}),Be(wt),on(()=>{Hi(wt,1,_C(F(g)?"flex-none":"flex-1")),ot=lr(wt,"",ot,{height:F(g)?`${F(l)}px`:null})}),Ey(3,wt,()=>p3),Re(ut,wt)};Pt(We,ut=>{F(b)&&ut(at)})}Be(Se),Re(xe,Se)};Pt(oe,xe=>{(F(g)||F(b))&&xe(me)})}var ae=lt(oe,2);{var ce=xe=>{{let Se=Fe(()=>F(o)-100);bY(xe,{class:"w-2 flex-none",axis:"x",min:100,get max(){return F(Se)},scaler:-1,get value(){return F(h)},onChange:De=>ct(h,De,!0)})}};Pt(ae,xe=>{(F(g)||F(b))&&F(x)&&xe(ce)})}var se=lt(ae,2);{var ge=xe=>{const Se=Fe(()=>F(g)||F(b)?F(h):F(o));var De=UJe();let He;var Ue=je(De);let yt;var We=je(Ue);We.__click=()=>{let ut=RQ(e.charts);e.onChartsChange({[ut]:{type:"builder",title:"New"}}),e.onStateChange({chartsOrder:[ut,...F(T).filter(wt=>wt!=ut)]})};var at=lt(We,2);Wr(at,26,()=>F(T),ut=>ut,(ut,wt,ot)=>{const dt=Fe(()=>e.charts[wt]),Yt=Fe(()=>e.state.chartVisibility?.[wt]??!0);var Ft=jJe();let Ot;var Kt=je(Ft);{let Dn=Fe(()=>M.bind(null,wt)),Ut=Fe(()=>F(ot)>0?I.bind(null,wt,-1):void 0),At=Fe(()=>F(ot)+1<F(T).length?I.bind(null,wt,1):void 0);vY(Kt,{get id(){return wt},get spec(){return F(dt)},onIsVisibleChange:zt=>{e.onStateChange({chartVisibility:{[wt]:zt}})},get isVisible(){return F(Yt)},get colorScheme(){return n()},get chartView(){return e.chartView},get onRemove(){return F(Dn)},get onUp(){return F(Ut)},get onDown(){return F(At)},onSpecChange:zt=>{e.onChartsChange({[wt]:void 0}),e.onChartStatesChange({[wt]:void 0}),e.onChartsChange({[wt]:zt})}})}Be(Ft),on(Dn=>Ot=lr(Ft,"",Ot,Dn),[()=>({width:`${k(F(Se),500)??""}px`})]),ej(Ft,()=>yY,()=>({duration:300})),Ey(2,Ft,()=>p3),Re(ut,Ft)}),Be(Ue),Be(De),on(()=>{He=lr(De,"",He,{width:`${F(Se)??""}px`}),yt=lr(Ue,"",yt,{width:`${F(Se)??""}px`})}),Ey(3,De,()=>p3,()=>({axis:"x"})),Re(xe,De)};Pt(se,xe=>{F(x)&&xe(ge)})}Re(q,J)},Z=q=>{var J=ZJe();Wr(J,30,()=>F(f).embedding.concat(F(T),F(f).table),oe=>oe,(oe,me)=>{const ae=Fe(()=>e.state.chartVisibility?.[me]??!0),ce=Fe(()=>F(T).indexOf(me));var se=qJe(),ge=je(se);{let xe=Fe(()=>M.bind(null,me)),Se=Fe(()=>F(ce)>0?I.bind(null,me,-1):void 0),De=Fe(()=>F(ce)!=-1&&F(ce)+1<F(T).length?I.bind(null,me,1):void 0);vY(ge,{get id(){return me},get spec(){return e.charts[me]},onIsVisibleChange:He=>{e.onStateChange({chartVisibility:{[me]:He}})},get isVisible(){return F(ae)},get colorScheme(){return n()},get chartView(){return e.chartView},get onRemove(){return F(xe)},get onUp(){return F(Se)},get onDown(){return F(De)}})}Be(se),ej(se,()=>yY,()=>({duration:300})),Ey(2,se,()=>p3),Re(oe,se)}),Be(J),Re(q,J)};Pt(j,q=>{F(p)?q(Z,!1):q(Q)})}Be(B),a0(B,"clientWidth",q=>ct(o,q)),a0(B,"clientHeight",q=>ct(a,q)),Re(t,B),$n(),i()}Js(["click"]);var GJe=gt('<div class="flex gap-0.5 items-center"><!> <!> <!></div>');function YJe(t,e){Ln(e,!0);let n=Fe(()=>qfe(e.charts));var r=GJe(),i=je(r);{var s=g=>{var b=()=>e.state.showEmbedding??!0,x=k=>{e.onStateChange({showEmbedding:k})};X5(g,{get icon(){return LFe},title:"Show / hide embedding",get checked(){return b()},set checked(k){x(k)}})};Pt(i,g=>{F(n).embedding.length>0&&g(s)})}var o=lt(i,2),a=()=>e.state.showTable??!0,l=g=>{e.onStateChange({showTable:g})};X5(o,{get icon(){return ZFe},title:"Show / hide table",get checked(){return a()},set checked(g){l(g)}});var h=lt(o,2),f=()=>e.state.showCharts??!0,p=g=>{e.onStateChange({showCharts:g})};X5(h,{get icon(){return WFe},title:"Show / hide charts",get checked(){return f()},set checked(g){p(g)}}),Be(r),Re(t,r),$n()}const Uw={list:[WJe,YJe],dashboard:[EJe,TJe]};function HJe(t){return Uw[t]==null?Uw.list[0]:Uw[t][0]}function KJe(t){return Uw[t]==null?Uw.list[1]:Uw[t][1]}function JJe(t,e){Ln(e,!0);let n=Fe(()=>KJe(e.layout)),r=Fe(()=>e.layoutStates[e.layout]??{});function i(h,f="merge"){Ww(e.charts,h,f,p=>e.onChartsChange?.(p))}function s(h,f="merge"){Ww(e.chartStates,h,f,p=>e.onChartStatesChange?.(p))}function o(h,f,p="merge"){t5(e.layoutStates,h,f,p,g=>e.onLayoutStatesChange?.(g))}var a=ar(),l=pn(a);{let h=Fe(()=>o.bind(null,e.layout));o0(l,()=>F(n),(f,p)=>{p(f,{get context(){return e.context},get charts(){return e.charts},get state(){return F(r)},get onStateChange(){return F(h)},onChartsChange:i,onChartStatesChange:s})})}Re(t,a),$n()}function eet(t,e){Ln(e,!0);let n=Fe(()=>HJe(e.layout)),r=Fe(()=>e.layoutStates[e.layout]??{});function i(p,g,b="merge"){t5(e.charts,p,g,b,x=>e.onChartsChange?.(x))}function s(p,g,b="merge"){t5(e.chartStates,p,g,b,x=>e.onChartStatesChange?.(x))}function o(p,g="merge"){Ww(e.charts,p,g,b=>e.onChartsChange?.(b))}function a(p,g="merge"){Ww(e.chartStates,p,g,b=>e.onChartStatesChange?.(b))}function l(p,g,b="merge"){t5(e.layoutStates,p,g,b,x=>e.onLayoutStatesChange?.(x))}var h=ar(),f=pn(h);{const p=(b,x)=>{let k=()=>x?.().id,T=()=>x?.().width,I=()=>x?.().height,M=()=>x?.().mode;{let B=Fe(()=>e.chartStates[k()]??{}),j=Fe(()=>M()??"view"),Q=Fe(()=>i.bind(null,k())),Z=Fe(()=>s.bind(null,k()));mhe(b,{get context(){return e.context},get width(){return T()},get height(){return I()},get spec(){return e.charts[k()]},get state(){return F(B)},get mode(){return F(j)},get onSpecChange(){return F(Q)},get onStateChange(){return F(Z)}})}};let g=Fe(()=>l.bind(null,e.layout));o0(f,()=>F(n),(b,x)=>{x(b,{get context(){return e.context},get charts(){return e.charts},get state(){return F(r)},get onStateChange(){return F(g)},onChartsChange:o,onChartStatesChange:a,chartView:p,$$slots:{chartView:!0}})})}Re(t,h),$n()}var tet=gt('<tr class="leading-10"><td class="w-full"><div class="max-w-80 whitespace-nowrap text-ellipsis overflow-x-hidden"> </div></td><td class="pr-2"><div class="flex items-center gap-2"><!> <!></div></td><td><div class="flex items-center gap-2"><!></div></td></tr>');function net(t,e){Ln(e,!0);function n(k){e.onChange({...e.style,...k})}var r=tet(),i=je(r),s=je(i),o=je(s,!0);Be(s),Be(i);var a=lt(i),l=je(a),h=je(l);{let k=Fe(()=>e.style.renderer??null),T=Fe(()=>[{value:null,label:"(default)"},...mLe.map(I=>({value:I.renderer,label:I.label}))]);ch(h,{get value(){return F(k)},onChange:I=>n({renderer:I}),get options(){return F(T)}})}var f=lt(h,2);{var p=k=>{var T=()=>e.style.rendererOptions?.size??100,I=M=>{n({rendererOptions:{size:M}})};W5(k,{get value(){return T()},set value(M){I(M)},width:80,min:16,max:400,step:1})};Pt(f,k=>{e.style.renderer=="image"&&k(p)})}Be(l),Be(a);var g=lt(a),b=je(g),x=je(b);{let k=Fe(()=>e.style.display??"badge");ch(x,{get value(){return F(k)},onChange:T=>{n({display:T})},options:[{value:"full",label:"Full"},{value:"badge",label:"Badge"},{value:"hidden",label:"Hidden"}]})}Be(b),Be(g),Be(r),on(()=>Pr(o,e.column.name)),Re(t,r),$n()}var ret=gt('<div class="max-h-60 overflow-x-hidden overflow-y-scroll border border-slate-300 dark:border-slate-700 p-2 rounded-md"><table><thead><tr class="select-none"><th class="pb-2 text-slate-500 dark:text-slate-400 text-left font-normal text-sm">Column</th><th class="pb-2 text-slate-500 dark:text-slate-400 text-left font-normal text-sm">Format</th><th class="pb-2 text-slate-500 dark:text-slate-400 text-left font-normal text-sm">Style</th></tr></thead><tbody></tbody></table></div>');function iet(t,e){Ln(e,!0);var n=ret(),r=je(n),i=lt(je(r));Wr(i,21,()=>e.columns,Wi,(s,o)=>{{let a=Fe(()=>e.styles[F(o).name]??{});net(s,{get column(){return F(o)},get style(){return F(a)},onChange:l=>{let h={...e.styles};h[F(o).name]=l,e.onStylesChange(h)}})}}),Be(i),Be(r),Be(n),Re(t,n),$n()}var set=gt('<div> <span class="text-slate-500"> </span></div>');function oet(t,e){Ln(e,!0);let n=hn(null),r=hn(null);xh(()=>{ct(n,null),ct(r,null);let l=kC({coordinator:e.coordinator,selection:e.filter,prepare:async()=>{let h=await e.coordinator.query(Vn.from(e.table).select({count:ir`COUNT(*)::INT`}));ct(n,h.get(0).count,!0)},query:h=>Vn.from(e.table).select({count:ir`COUNT(*)::INT`}).where(h),queryResult:h=>{ct(r,h.getChild("count").get(0),!0)}});return()=>{l.destroy()}});var i=set(),s=je(i),o=lt(s),a=je(o);Be(o),Be(i),on((l,h)=>{Pr(s,`${l??""} `),Pr(a,`/ ${h??""} points`)},[()=>F(r)?.toLocaleString()??"",()=>F(n)?.toLocaleString()??""]),Re(t,i),$n()}var J5={exports:{}};var aet=J5.exports,_Y;function uet(){return _Y||(_Y=1,(function(t,e){(function(n,r){t.exports=r()})(aet,(function(){var n=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(h){return typeof h}:function(h){return h&&typeof Symbol=="function"&&h.constructor===Symbol&&h!==Symbol.prototype?"symbol":typeof h},r=function(h,f){if(!(h instanceof f))throw new TypeError("Cannot call a class as a function")},i=(function(){function h(f,p){for(var g=0;g<p.length;g++){var b=p[g];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(f,b.key,b)}}return function(f,p,g){return p&&h(f.prototype,p),g&&h(f,g),f}})(),s=Object.assign||function(h){for(var f=1;f<arguments.length;f++){var p=arguments[f];for(var g in p)Object.prototype.hasOwnProperty.call(p,g)&&(h[g]=p[g])}return h},o=(function(){function h(f){var p=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,g=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[],b=arguments.length>3&&arguments[3]!==void 0?arguments[3]:5e3;r(this,h),this.ctx=f,this.iframes=p,this.exclude=g,this.iframesTimeout=b}return i(h,[{key:"getContexts",value:function(){var p=void 0,g=[];return typeof this.ctx>"u"||!this.ctx?p=[]:NodeList.prototype.isPrototypeOf(this.ctx)?p=Array.prototype.slice.call(this.ctx):Array.isArray(this.ctx)?p=this.ctx:typeof this.ctx=="string"?p=Array.prototype.slice.call(document.querySelectorAll(this.ctx)):p=[this.ctx],p.forEach(function(b){var x=g.filter(function(k){return k.contains(b)}).length>0;g.indexOf(b)===-1&&!x&&g.push(b)}),g}},{key:"getIframeContents",value:function(p,g){var b=arguments.length>2&&arguments[2]!==void 0?arguments[2]:function(){},x=void 0;try{var k=p.contentWindow;if(x=k.document,!k||!x)throw new Error("iframe inaccessible")}catch{b()}x&&g(x)}},{key:"isIframeBlank",value:function(p){var g="about:blank",b=p.getAttribute("src").trim(),x=p.contentWindow.location.href;return x===g&&b!==g&&b}},{key:"observeIframeLoad",value:function(p,g,b){var x=this,k=!1,T=null,I=function M(){if(!k){k=!0,clearTimeout(T);try{x.isIframeBlank(p)||(p.removeEventListener("load",M),x.getIframeContents(p,g,b))}catch{b()}}};p.addEventListener("load",I),T=setTimeout(I,this.iframesTimeout)}},{key:"onIframeReady",value:function(p,g,b){try{p.contentWindow.document.readyState==="complete"?this.isIframeBlank(p)?this.observeIframeLoad(p,g,b):this.getIframeContents(p,g,b):this.observeIframeLoad(p,g,b)}catch{b()}}},{key:"waitForIframes",value:function(p,g){var b=this,x=0;this.forEachIframe(p,function(){return!0},function(k){x++,b.waitForIframes(k.querySelector("html"),function(){--x||g()})},function(k){k||g()})}},{key:"forEachIframe",value:function(p,g,b){var x=this,k=arguments.length>3&&arguments[3]!==void 0?arguments[3]:function(){},T=p.querySelectorAll("iframe"),I=T.length,M=0;T=Array.prototype.slice.call(T);var B=function(){--I<=0&&k(M)};I||B(),T.forEach(function(j){h.matches(j,x.exclude)?B():x.onIframeReady(j,function(Q){g(j)&&(M++,b(Q)),B()},B)})}},{key:"createIterator",value:function(p,g,b){return document.createNodeIterator(p,g,b,!1)}},{key:"createInstanceOnIframe",value:function(p){return new h(p.querySelector("html"),this.iframes)}},{key:"compareNodeIframe",value:function(p,g,b){var x=p.compareDocumentPosition(b),k=Node.DOCUMENT_POSITION_PRECEDING;if(x&k)if(g!==null){var T=g.compareDocumentPosition(b),I=Node.DOCUMENT_POSITION_FOLLOWING;if(T&I)return!0}else return!0;return!1}},{key:"getIteratorNode",value:function(p){var g=p.previousNode(),b=void 0;return g===null?b=p.nextNode():b=p.nextNode()&&p.nextNode(),{prevNode:g,node:b}}},{key:"checkIframeFilter",value:function(p,g,b,x){var k=!1,T=!1;return x.forEach(function(I,M){I.val===b&&(k=M,T=I.handled)}),this.compareNodeIframe(p,g,b)?(k===!1&&!T?x.push({val:b,handled:!0}):k!==!1&&!T&&(x[k].handled=!0),!0):(k===!1&&x.push({val:b,handled:!1}),!1)}},{key:"handleOpenIframes",value:function(p,g,b,x){var k=this;p.forEach(function(T){T.handled||k.getIframeContents(T.val,function(I){k.createInstanceOnIframe(I).forEachNode(g,b,x)})})}},{key:"iterateThroughNodes",value:function(p,g,b,x,k){for(var T=this,I=this.createIterator(g,p,x),M=[],B=[],j=void 0,Q=void 0,Z=function(){var J=T.getIteratorNode(I);return Q=J.prevNode,j=J.node,j};Z();)this.iframes&&this.forEachIframe(g,function(q){return T.checkIframeFilter(j,Q,q,M)},function(q){T.createInstanceOnIframe(q).forEachNode(p,function(J){return B.push(J)},x)}),B.push(j);B.forEach(function(q){b(q)}),this.iframes&&this.handleOpenIframes(M,p,b,x),k()}},{key:"forEachNode",value:function(p,g,b){var x=this,k=arguments.length>3&&arguments[3]!==void 0?arguments[3]:function(){},T=this.getContexts(),I=T.length;I||k(),T.forEach(function(M){var B=function(){x.iterateThroughNodes(p,M,g,b,function(){--I<=0&&k()})};x.iframes?x.waitForIframes(M,B):B()})}}],[{key:"matches",value:function(p,g){var b=typeof g=="string"?[g]:g,x=p.matches||p.matchesSelector||p.msMatchesSelector||p.mozMatchesSelector||p.oMatchesSelector||p.webkitMatchesSelector;if(x){var k=!1;return b.every(function(T){return x.call(p,T)?(k=!0,!1):!0}),k}else return!1}}]),h})(),a=(function(){function h(f){r(this,h),this.ctx=f,this.ie=!1;var p=window.navigator.userAgent;(p.indexOf("MSIE")>-1||p.indexOf("Trident")>-1)&&(this.ie=!0)}return i(h,[{key:"log",value:function(p){var g=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"debug",b=this.opt.log;this.opt.debug&&(typeof b>"u"?"undefined":n(b))==="object"&&typeof b[g]=="function"&&b[g]("mark.js: "+p)}},{key:"escapeStr",value:function(p){return p.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}},{key:"createRegExp",value:function(p){return this.opt.wildcards!=="disabled"&&(p=this.setupWildcardsRegExp(p)),p=this.escapeStr(p),Object.keys(this.opt.synonyms).length&&(p=this.createSynonymsRegExp(p)),(this.opt.ignoreJoiners||this.opt.ignorePunctuation.length)&&(p=this.setupIgnoreJoinersRegExp(p)),this.opt.diacritics&&(p=this.createDiacriticsRegExp(p)),p=this.createMergedBlanksRegExp(p),(this.opt.ignoreJoiners||this.opt.ignorePunctuation.length)&&(p=this.createJoinersRegExp(p)),this.opt.wildcards!=="disabled"&&(p=this.createWildcardsRegExp(p)),p=this.createAccuracyRegExp(p),p}},{key:"createSynonymsRegExp",value:function(p){var g=this.opt.synonyms,b=this.opt.caseSensitive?"":"i",x=this.opt.ignoreJoiners||this.opt.ignorePunctuation.length?"\0":"";for(var k in g)if(g.hasOwnProperty(k)){var T=g[k],I=this.opt.wildcards!=="disabled"?this.setupWildcardsRegExp(k):this.escapeStr(k),M=this.opt.wildcards!=="disabled"?this.setupWildcardsRegExp(T):this.escapeStr(T);I!==""&&M!==""&&(p=p.replace(new RegExp("("+this.escapeStr(I)+"|"+this.escapeStr(M)+")","gm"+b),x+("("+this.processSynomyms(I)+"|")+(this.processSynomyms(M)+")")+x))}return p}},{key:"processSynomyms",value:function(p){return(this.opt.ignoreJoiners||this.opt.ignorePunctuation.length)&&(p=this.setupIgnoreJoinersRegExp(p)),p}},{key:"setupWildcardsRegExp",value:function(p){return p=p.replace(/(?:\\)*\?/g,function(g){return g.charAt(0)==="\\"?"?":""}),p.replace(/(?:\\)*\*/g,function(g){return g.charAt(0)==="\\"?"*":""})}},{key:"createWildcardsRegExp",value:function(p){var g=this.opt.wildcards==="withSpaces";return p.replace(/\u0001/g,g?"[\\S\\s]?":"\\S?").replace(/\u0002/g,g?"[\\S\\s]*?":"\\S*")}},{key:"setupIgnoreJoinersRegExp",value:function(p){return p.replace(/[^(|)\\]/g,function(g,b,x){var k=x.charAt(b+1);return/[(|)\\]/.test(k)||k===""?g:g+"\0"})}},{key:"createJoinersRegExp",value:function(p){var g=[],b=this.opt.ignorePunctuation;return Array.isArray(b)&&b.length&&g.push(this.escapeStr(b.join(""))),this.opt.ignoreJoiners&&g.push("\\u00ad\\u200b\\u200c\\u200d"),g.length?p.split(/\u0000+/).join("["+g.join("")+"]*"):p}},{key:"createDiacriticsRegExp",value:function(p){var g=this.opt.caseSensitive?"":"i",b=this.opt.caseSensitive?["aÃ Ã¡áº£Ã£áº¡Äáº±áº¯áº³áºµáº·Ã¢áº§áº¥áº©áº«áº­Ã¤Ã¥ÄÄ","AÃÃáº¢Ãáº Äáº°áº®áº²áº´áº¶Ãáº¦áº¤áº¨áºªáº¬ÃÃÄÄ","cÃ§ÄÄ","CÃÄÄ","dÄÄ","DÄÄ","eÃ¨Ã©áº»áº½áº¹Ãªá»áº¿á»á»á»Ã«ÄÄÄ","EÃÃáººáº¼áº¸Ãá»áº¾á»á»á»ÃÄÄÄ","iÃ¬Ã­á»Ä©á»Ã®Ã¯Ä«","IÃÃá»Ä¨á»ÃÃÄª","lÅ","LÅ","nÃ±ÅÅ","NÃÅÅ","oÃ²Ã³á»Ãµá»Ã´á»á»á»á»á»Æ¡á»á»¡á»á»á»£Ã¶Ã¸Å","OÃÃá»Ãá»Ãá»á»á»á»á»Æ á»á» á»á»á»¢ÃÃÅ","rÅ","RÅ","sÅ¡ÅÈÅ","SÅ ÅÈÅ","tÅ¥ÈÅ£","TÅ¤ÈÅ¢","uÃ¹Ãºá»§Å©á»¥Æ°á»«á»©á»­á»¯á»±Ã»Ã¼Å¯Å«","UÃÃá»¦Å¨á»¤Æ¯á»ªá»¨á»¬á»®á»°ÃÃÅ®Åª","yÃ½á»³á»·á»¹á»µÃ¿","YÃá»²á»¶á»¸á»´Å¸","zÅ¾Å¼Åº","ZÅ½Å»Å¹"]:["aÃ Ã¡áº£Ã£áº¡Äáº±áº¯áº³áºµáº·Ã¢áº§áº¥áº©áº«áº­Ã¤Ã¥ÄÄAÃÃáº¢Ãáº Äáº°áº®áº²áº´áº¶Ãáº¦áº¤áº¨áºªáº¬ÃÃÄÄ","cÃ§ÄÄCÃÄÄ","dÄÄDÄÄ","eÃ¨Ã©áº»áº½áº¹Ãªá»áº¿á»á»á»Ã«ÄÄÄEÃÃáººáº¼áº¸Ãá»áº¾á»á»á»ÃÄÄÄ","iÃ¬Ã­á»Ä©á»Ã®Ã¯Ä«IÃÃá»Ä¨á»ÃÃÄª","lÅLÅ","nÃ±ÅÅNÃÅÅ","oÃ²Ã³á»Ãµá»Ã´á»á»á»á»á»Æ¡á»á»¡á»á»á»£Ã¶Ã¸ÅOÃÃá»Ãá»Ãá»á»á»á»á»Æ á»á» á»á»á»¢ÃÃÅ","rÅRÅ","sÅ¡ÅÈÅSÅ ÅÈÅ","tÅ¥ÈÅ£TÅ¤ÈÅ¢","uÃ¹Ãºá»§Å©á»¥Æ°á»«á»©á»­á»¯á»±Ã»Ã¼Å¯Å«UÃÃá»¦Å¨á»¤Æ¯á»ªá»¨á»¬á»®á»°ÃÃÅ®Åª","yÃ½á»³á»·á»¹á»µÃ¿YÃá»²á»¶á»¸á»´Å¸","zÅ¾Å¼ÅºZÅ½Å»Å¹"],x=[];return p.split("").forEach(function(k){b.every(function(T){if(T.indexOf(k)!==-1){if(x.indexOf(T)>-1)return!1;p=p.replace(new RegExp("["+T+"]","gm"+g),"["+T+"]"),x.push(T)}return!0})}),p}},{key:"createMergedBlanksRegExp",value:function(p){return p.replace(/[\s]+/gmi,"[\\s]+")}},{key:"createAccuracyRegExp",value:function(p){var g=this,b="!\"#$%&'()*+,-./:;<=>?@[\\]^_`{|}~Â¡Â¿",x=this.opt.accuracy,k=typeof x=="string"?x:x.value,T=typeof x=="string"?[]:x.limiters,I="";switch(T.forEach(function(M){I+="|"+g.escapeStr(M)}),k){case"partially":default:return"()("+p+")";case"complementary":return I="\\s"+(I||this.escapeStr(b)),"()([^"+I+"]*"+p+"[^"+I+"]*)";case"exactly":return"(^|\\s"+I+")("+p+")(?=$|\\s"+I+")"}}},{key:"getSeparatedKeywords",value:function(p){var g=this,b=[];return p.forEach(function(x){g.opt.separateWordSearch?x.split(" ").forEach(function(k){k.trim()&&b.indexOf(k)===-1&&b.push(k)}):x.trim()&&b.indexOf(x)===-1&&b.push(x)}),{keywords:b.sort(function(x,k){return k.length-x.length}),length:b.length}}},{key:"isNumeric",value:function(p){return Number(parseFloat(p))==p}},{key:"checkRanges",value:function(p){var g=this;if(!Array.isArray(p)||Object.prototype.toString.call(p[0])!=="[object Object]")return this.log("markRanges() will only accept an array of objects"),this.opt.noMatch(p),[];var b=[],x=0;return p.sort(function(k,T){return k.start-T.start}).forEach(function(k){var T=g.callNoMatchOnInvalidRanges(k,x),I=T.start,M=T.end,B=T.valid;B&&(k.start=I,k.length=M-I,b.push(k),x=M)}),b}},{key:"callNoMatchOnInvalidRanges",value:function(p,g){var b=void 0,x=void 0,k=!1;return p&&typeof p.start<"u"?(b=parseInt(p.start,10),x=b+parseInt(p.length,10),this.isNumeric(p.start)&&this.isNumeric(p.length)&&x-g>0&&x-b>0?k=!0:(this.log("Ignoring invalid or overlapping range: "+(""+JSON.stringify(p))),this.opt.noMatch(p))):(this.log("Ignoring invalid range: "+JSON.stringify(p)),this.opt.noMatch(p)),{start:b,end:x,valid:k}}},{key:"checkWhitespaceRanges",value:function(p,g,b){var x=void 0,k=!0,T=b.length,I=g-T,M=parseInt(p.start,10)-I;return M=M>T?T:M,x=M+parseInt(p.length,10),x>T&&(x=T,this.log("End range automatically set to the max value of "+T)),M<0||x-M<0||M>T||x>T?(k=!1,this.log("Invalid range: "+JSON.stringify(p)),this.opt.noMatch(p)):b.substring(M,x).replace(/\s+/g,"")===""&&(k=!1,this.log("Skipping whitespace only range: "+JSON.stringify(p)),this.opt.noMatch(p)),{start:M,end:x,valid:k}}},{key:"getTextNodes",value:function(p){var g=this,b="",x=[];this.iterator.forEachNode(NodeFilter.SHOW_TEXT,function(k){x.push({start:b.length,end:(b+=k.textContent).length,node:k})},function(k){return g.matchesExclude(k.parentNode)?NodeFilter.FILTER_REJECT:NodeFilter.FILTER_ACCEPT},function(){p({value:b,nodes:x})})}},{key:"matchesExclude",value:function(p){return o.matches(p,this.opt.exclude.concat(["script","style","title","head","html"]))}},{key:"wrapRangeInTextNode",value:function(p,g,b){var x=this.opt.element?this.opt.element:"mark",k=p.splitText(g),T=k.splitText(b-g),I=document.createElement(x);return I.setAttribute("data-markjs","true"),this.opt.className&&I.setAttribute("class",this.opt.className),I.textContent=k.textContent,k.parentNode.replaceChild(I,k),T}},{key:"wrapRangeInMappedTextNode",value:function(p,g,b,x,k){var T=this;p.nodes.every(function(I,M){var B=p.nodes[M+1];if(typeof B>"u"||B.start>g){if(!x(I.node))return!1;var j=g-I.start,Q=(b>I.end?I.end:b)-I.start,Z=p.value.substr(0,I.start),q=p.value.substr(Q+I.start);if(I.node=T.wrapRangeInTextNode(I.node,j,Q),p.value=Z+q,p.nodes.forEach(function(J,oe){oe>=M&&(p.nodes[oe].start>0&&oe!==M&&(p.nodes[oe].start-=Q),p.nodes[oe].end-=Q)}),b-=Q,k(I.node.previousSibling,I.start),b>I.end)g=I.end;else return!1}return!0})}},{key:"wrapMatches",value:function(p,g,b,x,k){var T=this,I=g===0?0:g+1;this.getTextNodes(function(M){M.nodes.forEach(function(B){B=B.node;for(var j=void 0;(j=p.exec(B.textContent))!==null&&j[I]!=="";)if(b(j[I],B)){var Q=j.index;if(I!==0)for(var Z=1;Z<I;Z++)Q+=j[Z].length;B=T.wrapRangeInTextNode(B,Q,Q+j[I].length),x(B.previousSibling),p.lastIndex=0}}),k()})}},{key:"wrapMatchesAcrossElements",value:function(p,g,b,x,k){var T=this,I=g===0?0:g+1;this.getTextNodes(function(M){for(var B=void 0;(B=p.exec(M.value))!==null&&B[I]!=="";){var j=B.index;if(I!==0)for(var Q=1;Q<I;Q++)j+=B[Q].length;var Z=j+B[I].length;T.wrapRangeInMappedTextNode(M,j,Z,function(q){return b(B[I],q)},function(q,J){p.lastIndex=J,x(q)})}k()})}},{key:"wrapRangeFromIndex",value:function(p,g,b,x){var k=this;this.getTextNodes(function(T){var I=T.value.length;p.forEach(function(M,B){var j=k.checkWhitespaceRanges(M,I,T.value),Q=j.start,Z=j.end,q=j.valid;q&&k.wrapRangeInMappedTextNode(T,Q,Z,function(J){return g(J,M,T.value.substring(Q,Z),B)},function(J){b(J,M)})}),x()})}},{key:"unwrapMatches",value:function(p){for(var g=p.parentNode,b=document.createDocumentFragment();p.firstChild;)b.appendChild(p.removeChild(p.firstChild));g.replaceChild(b,p),this.ie?this.normalizeTextNode(g):g.normalize()}},{key:"normalizeTextNode",value:function(p){if(p){if(p.nodeType===3)for(;p.nextSibling&&p.nextSibling.nodeType===3;)p.nodeValue+=p.nextSibling.nodeValue,p.parentNode.removeChild(p.nextSibling);else this.normalizeTextNode(p.firstChild);this.normalizeTextNode(p.nextSibling)}}},{key:"markRegExp",value:function(p,g){var b=this;this.opt=g,this.log('Searching with expression "'+p+'"');var x=0,k="wrapMatches",T=function(M){x++,b.opt.each(M)};this.opt.acrossElements&&(k="wrapMatchesAcrossElements"),this[k](p,this.opt.ignoreGroups,function(I,M){return b.opt.filter(M,I,x)},T,function(){x===0&&b.opt.noMatch(p),b.opt.done(x)})}},{key:"mark",value:function(p,g){var b=this;this.opt=g;var x=0,k="wrapMatches",T=this.getSeparatedKeywords(typeof p=="string"?[p]:p),I=T.keywords,M=T.length,B=this.opt.caseSensitive?"":"i",j=function Q(Z){var q=new RegExp(b.createRegExp(Z),"gm"+B),J=0;b.log('Searching with expression "'+q+'"'),b[k](q,1,function(oe,me){return b.opt.filter(me,Z,x,J)},function(oe){J++,x++,b.opt.each(oe)},function(){J===0&&b.opt.noMatch(Z),I[M-1]===Z?b.opt.done(x):Q(I[I.indexOf(Z)+1])})};this.opt.acrossElements&&(k="wrapMatchesAcrossElements"),M===0?this.opt.done(x):j(I[0])}},{key:"markRanges",value:function(p,g){var b=this;this.opt=g;var x=0,k=this.checkRanges(p);k&&k.length?(this.log("Starting to mark with the following ranges: "+JSON.stringify(k)),this.wrapRangeFromIndex(k,function(T,I,M,B){return b.opt.filter(T,I,M,B)},function(T,I){x++,b.opt.each(T,I)},function(){b.opt.done(x)})):this.opt.done(x)}},{key:"unmark",value:function(p){var g=this;this.opt=p;var b=this.opt.element?this.opt.element:"*";b+="[data-markjs]",this.opt.className&&(b+="."+this.opt.className),this.log('Removal selector "'+b+'"'),this.iterator.forEachNode(NodeFilter.SHOW_ELEMENT,function(x){g.unwrapMatches(x)},function(x){var k=o.matches(x,b),T=g.matchesExclude(x);return!k||T?NodeFilter.FILTER_REJECT:NodeFilter.FILTER_ACCEPT},this.opt.done)}},{key:"opt",set:function(p){this._opt=s({},{element:"",className:"",exclude:[],iframes:!1,iframesTimeout:5e3,separateWordSearch:!0,diacritics:!0,synonyms:{},accuracy:"partially",acrossElements:!1,caseSensitive:!1,ignoreJoiners:!1,ignoreGroups:0,ignorePunctuation:[],wildcards:"disabled",each:function(){},noMatch:function(){},filter:function(){return!0},done:function(){},debug:!1,log:window.console},p)},get:function(){return this._opt}},{key:"iterator",get:function(){return new o(this.ctx,this.opt.iframes,this.opt.exclude,this.opt.iframesTimeout)}}]),h})();function l(h){var f=this,p=new a(h);return this.mark=function(g,b){return p.mark(g,b),f},this.markRegExp=function(g,b){return p.markRegExp(g,b),f},this.markRanges=function(g,b){return p.markRanges(g,b),f},this.unmark=function(g){return p.unmark(g),f},this}return l}))})(J5)),J5.exports}var cet=uet();const het=l_(cet);var fet=gt('<div class="flex gap-2 select-none mx-2 my-1 items-center"><button><!></button> <div class="flex items-center gap-2"><div>Page</div> <input class="form-input w-16 h-7.5 text-right border border-slate-300 bg-white/50 dark:border-slate-700 dark:bg-black/50 rounded-md px-2 py-0 my-1"/> <div> </div></div> <button><!></button></div>');function xY(t,e){Ln(e,!0);let n;function r(k){if(!isFinite(k))return e.currentPage;k=Math.max(0,Math.min(e.pageCount-1,k)),e.onChange(k),n.value=(k+1).toString()}var i=fet(),s=je(i);let o;s.__click=()=>{r(e.currentPage-1)};var a=je(s);DFe(a,{class:"w-5 h-5"}),Be(s);var l=lt(s,2),h=lt(je(l),2);UP(h),h.__keydown=k=>{if(k.key=="Enter"){let T=+n.value;r(Math.round(T)-1)}},zu(h,k=>n=k,()=>n);var f=lt(h,2),p=je(f);Be(f),Be(l);var g=lt(l,2);let b;g.__click=()=>{r(e.currentPage+1)};var x=je(g);MFe(x,{class:"w-5 h-5"}),Be(g),Be(i),on(()=>{o=Hi(s,1,"border border-slate-300 bg-white/50 dark:border-slate-700 dark:bg-black/50 px-3 py-1 rounded-md",null,o,{"text-slate-300":e.currentPage<=0,"dark:text-slate-700":e.currentPage<=0}),s.disabled=e.currentPage<=0,OH(h,e.currentPage+1),Pr(p,`of ${e.pageCount??""}`),b=Hi(g,1,"border border-slate-300 bg-white/50 dark:border-slate-700 dark:bg-black/50 px-3 py-1 rounded-md",null,b,{"text-slate-300":e.currentPage>=e.pageCount-1,"dark:text-slate-700":e.currentPage>=e.pageCount-1}),g.disabled=e.currentPage>=e.pageCount-1}),jy("blur",h,()=>{let k=+n.value;r(Math.round(k)-1)}),Re(t,i),$n()}Js(["click","keydown"]);var det=gt("<!> <!> <!>",1);function pet(t,e){let n=jn(e,"pageSize",3,50),r=hn(0),i=Fe(()=>Math.ceil(e.count/n()));var s=det(),o=pn(s);{var a=p=>{xY(p,{get currentPage(){return F(r)},get pageCount(){return F(i)},onChange:g=>{ct(r,g)}})};Pt(o,p=>{F(i)>1&&p(a)})}var l=lt(o,2);{let p=Fe(()=>({start:F(r)*n(),end:Math.min(e.count,F(r)*n()+n())}));vf(l,()=>e.children,()=>F(p))}var h=lt(l,2);{var f=p=>{xY(p,{get currentPage(){return F(r)},get pageCount(){return F(i)},onChange:g=>{ct(r,g)}})};Pt(h,p=>{F(i)>1&&p(f)})}Re(t,s)}var met=gt('<div class="flex pb-1 text-sm"><span class="px-2 flex gap-2 bg-slate-200 text-slate-500 dark:bg-slate-600 dark:text-slate-300 rounded-md"><div class="text-slate-400 dark:text-slate-400 font-medium">Distance</div> <div class="text-ellipsis whitespace-nowrap overflow-hidden max-w-72"> </div></span></div>'),get=gt('<button class="m-1 p-2 text-left rounded-md hover:outline outline-slate-500"><!> <div class="overflow-hidden text-ellipsis line-clamp-4 leading-5"><!></div></button> <hr class="border-slate-300 dark:border-slate-600"/>',1),yet=gt('<div class="flex flex-col w-full h-full"><div class="ml-3 mr-2 my-1 flex items-center text-slate-400 dark:text-slate-500 items-start"><div class="flex-1"><div> </div> <div> </div></div> <div class="flex-none mt-1"><button class="block hover:text-slate-500 dark:hover:text-slate-400"><!></button></div></div> <hr class="border-slate-300 dark:border-slate-600"/> <div class="flex flex-col overflow-x-hidden overflow-y-scroll"><!></div></div>');function vet(t,e){Ln(e,!0);let n=jn(e,"limit",3,100);function r(I,M){new het(I).mark(M)}let i=Fe(()=>e.items.length==0?"No result found.":e.items.length==1?`${e.items.length.toLocaleString()} result.`:e.items.length>=n()?`More than ${e.items.length.toLocaleString()} results, showing top ${n().toLocaleString()}.`:`${e.items.length.toLocaleString()} results.`);var s=yet(),o=je(s),a=je(o),l=je(a),h=je(l,!0);Be(l);var f=lt(l,2),p=je(f,!0);Be(f),Be(a);var g=lt(a,2),b=je(g);b.__click=()=>{e.onClose?.()};var x=je(b);cO(x,{}),Be(b),Be(g),Be(o);var k=lt(o,4),T=je(k);pet(T,{get count(){return e.items.length},children:(M,B)=>{let j=()=>B?.().start,Q=()=>B?.().end;var Z=ar(),q=pn(Z);Wr(q,16,()=>e.items.slice(j(),Q()),J=>J,(J,oe)=>{var me=get(),ae=pn(me);ae.__click=()=>{e.onClick?.(oe)};var ce=je(ae);{var se=Se=>{var De=met(),He=je(De),Ue=lt(je(He),2),yt=je(Ue,!0);Be(Ue),Be(He),Be(De),on(We=>Pr(yt,We),[()=>oe.distance.toFixed(5)]),Re(Se,De)};Pt(ce,Se=>{oe.distance!=null&&Se(se)})}var ge=lt(ce,2),xe=je(ge);{let Se=Fe(()=>e.columnStyles??{});ghe(xe,{get values(){return oe.fields},get columnStyles(){return F(Se)}})}Be(ge),Do(ge,(Se,De)=>r?.(Se,De),()=>e.highlight),Be(ae),Xg(2),Re(J,me)}),Re(M,Z)},$$slots:{default:!0}}),Be(k),Be(s),on(()=>{Pr(h,e.label),Pr(p,F(i))}),Re(t,s),$n()}Js(["click"]);function wY(t,e){Ln(e,!0);let n=jn(e,"label",3,null),r=jn(e,"icon",3,null),i=jn(e,"title",3,""),s=jn(e,"order",3,null),o=hn("ready");async function a(){if(e.onClick&&F(o)!="running"){ct(o,"running");try{await e.onClick(),ct(o,"ready")}catch(l){ct(o,"error"),console.error(l)}}}{let l=Fe(()=>F(o)=="ready"?r():F(o)=="running"?gz:Ole);om(t,{get label(){return n()},get icon(){return F(l)},get title(){return i()},get order(){return s()},get class(){return e.class},onClick:a})}$n()}var bet=gt('<span class="mx-1"> </span>'),_et=gt("<button><!> <!></button>"),xet=gt('<div class="flex rounded-md select-none items-center overflow-hidden border border-slate-300 dark:border-slate-600 dark:text-slate-400 bg-slate-200 dark:bg-slate-800"></div>');function Zfe(t,e){Ln(e,!0);var n=xet();Wr(n,21,()=>e.options,Wi,(r,i)=>{const s=Fe(()=>e.value==F(i).value);var o=_et();o.__click=()=>{e.onChange?.(F(i).value)};var a=je(o);{var l=p=>{const g=Fe(()=>F(i).icon);var b=ar(),x=pn(b);o0(x,()=>F(g),(k,T)=>{T(k,{class:"w-5 h-5"})}),Re(p,b)};Pt(a,p=>{F(i).icon!=null&&p(l)})}var h=lt(a,2);{var f=p=>{var g=bet(),b=je(g,!0);Be(g),on(()=>Pr(b,F(i).label)),Re(p,g)};Pt(h,p=>{F(i).label!=null&&F(i).label!=""&&p(f)})}Be(o),on(()=>{Hi(o,1,`flex items-center px-1.5 py-1.5 h-[26px] rounded-[3.875px] focus-visible:outline-2 outline-blue-600 -outline-offset-1 ${F(s)?"bg-white dark:bg-black shadow-md":"text-slate-400 dark:text-slate-600"}`),St(o,"title",F(i).title??F(i).label)}),Re(r,o)}),Be(n),Re(t,n),$n()}Js(["click"]);var wet=gt('<span class="pl-2 text-slate-500 dark:text-slate-500"> </span>'),Oet=gt('<div role="status" class="flex flex-row items-center"><!> <!></div>');function ket(t,e){let n=jn(e,"status",3,"Loading...");var r=Oet(),i=je(r);gz(i,{class:"text-blue-500"});var s=lt(i,2);{var o=a=>{var l=wet(),h=je(l,!0);Be(l),on(()=>Pr(h,n())),Re(a,l)};Pt(s,a=>{n()!=null&&a(o)})}Be(r),Re(t,r)}class Cet{contents;constructor(){this.contents=new Map}get(e){return this.contents.get(e)??null}set(e,n){this.contents.set(e,n)}value(e,n){if(this.contents.has(e))return this.contents.get(e);const r=n();return this.contents.set(e,r),r}}const zL="0.15.0";class Aet{worker;callbacks;constructor(){this.worker=new Worker(new URL(""+new URL("search.worker-t1sBWce_.js",import.meta.url).href,import.meta.url),{type:"module"}),this.callbacks=new Map,this.worker.onmessage=e=>{let n=this.callbacks.get(e.data.identifier);n!=null&&(this.callbacks.delete(e.data.identifier),n(e.data))}}rpc(e){return new Promise((n,r)=>{let i=new Date().getTime()+"-"+Math.random();this.callbacks.set(i,n),this.worker.postMessage({...e,identifier:i})})}async clear(){await this.rpc({type:"clear"})}async addPoints(e){await this.rpc({type:"points",points:e})}async query(e,n){return(await this.rpc({type:"query",query:e,limit:n})).result}}class Eet{coordinator;table;columns;backend;currentIndex=null;constructor(e,n,r){this.coordinator=e,this.table=n,this.columns=r,this.currentIndex=null,this.backend=new Aet}predicateString(e){return e!=null&&e.toString()!=""?e.toString():null}buildIndexIfNeeded(e){let n=async()=>{let i;r!=null?i=await this.coordinator.query(`
        SELECT
          ${It(this.columns.id)} AS id,
          ${It(this.columns.text)} AS text
        FROM ${this.table}
        WHERE ${r}
      `):i=await this.coordinator.query(`
        SELECT
          ${It(this.columns.id)} AS id,
          ${It(this.columns.text)} AS text
        FROM ${this.table}
      `),await this.backend.clear(),await this.backend.addPoints(Array.from(i))},r=this.predicateString(e);if(this.currentIndex!=null){if(this.currentIndex.predicate!=r){let i=this.currentIndex.promise.then(()=>n());this.currentIndex={predicate:r,promise:i}}}else{let i=n();this.currentIndex={predicate:r,promise:i}}return this.currentIndex.promise}async fullTextSearch(e,n={}){let r=n.limit??100,i=n.predicate;return n?.onStatus?.("Indexing..."),await this.buildIndexIfNeeded(i),n?.onStatus?.("Searching..."),(await this.backend.query(e,r)).map(o=>({id:o}))}}async function Tet(t,e,n,r,i,s){let o=[`${It(n.id,e)} AS id`];n.x&&o.push(`${It(n.x,e)} AS x`),n.y&&o.push(`${It(n.y,e)} AS y`),n.text&&o.push(`${It(n.text,e)} AS text`);let a=r??{};for(let b in a){let x=a[b];typeof x=="string"?o.push(`${It(x,e)} AS "field_${b}"`):o.push(`${ir(x.sql)} AS "field_${b}"`)}let l=s.map(b=>b.id),h=new Map,f=new Map;for(let b=0;b<l.length;b++)h.set(l[b],b),f.set(l[b],s[b]);let p=await t.query(`
    SELECT
      ${o.join(", ")}
    FROM (
      SELECT ${It(n.id,e)} AS __search_result_id__
      FROM ${e}
      WHERE
        ${It(n.id,e)} IN [${l.map(b=>kn(b)).join(", ")}]
        ${i?`AND (${i})`:""}
    )
    LEFT JOIN ${e} ON ${It(n.id,e)} = __search_result_id__
  `),g=Array.from(p).map(b=>{let x={id:b.id,distance:f.get(b.id)?.distance,fields:{}};for(let k in b)k.startsWith("field_")?x.fields[k.substring(6)]=b[k]:x[k]=b[k];return x});return g=g.sort((b,x)=>(h.get(b.id)??0)-(h.get(x.id)??0)),g}function Pet(t){let{coordinator:e,table:n,idColumn:r,searcher:i,textColumn:s,neighborsColumn:o}=t;if(i===null)return{};let a={};if(i?.fullTextSearch!=null)a.fullTextSearch=i.fullTextSearch.bind(i);else if(s!=null){let l=new Eet(e,n,{id:r,text:s});a.fullTextSearch=l.fullTextSearch.bind(l)}return i?.vectorSearch!=null&&(a.vectorSearch=i.vectorSearch.bind(i)),i?.nearestNeighbors!=null?a.nearestNeighbors=i.nearestNeighbors.bind(i):o!=null&&(a.nearestNeighbors=async l=>{let h=Vn.from(n).select({knn:It(o)}).where(ah(It(r),kn(l))),f=await e.query(h),p=Array.from(f);if(p.length!=1)return[];let{distances:g,ids:b}=p[0].knn;return Array.from(b).map((k,T)=>({id:k,distance:g[T]})).filter(k=>k.id!=l)}),a}async function Det({searcher:t,predicate:e,query:n,mode:r,limit:i,onStatus:s}){s("Searching...");let o=[];if(n.toString(),r=="full-text"&&t.fullTextSearch!=null)n=n.trim(),o=await t.fullTextSearch(n,{limit:i,predicate:e,onStatus:s});else if(r=="vector"&&t.vectorSearch!=null)n=n.trim(),o=await t.vectorSearch(n,{limit:i,predicate:e,onStatus:s});else if(r=="neighbors"&&t.nearestNeighbors!=null)""+n.toString(),o=await t.nearestNeighbors(n,{limit:i,predicate:e,onStatus:s});else return[];return o}let Xfe=typeof window<"u"?window.matchMedia?.("(prefers-color-scheme: dark)"):null,PI=gc(Xfe?.matches?"dark":"light");Xfe?.addEventListener("change",t=>{PI.set(t.matches?"dark":"light")});function Iet(){let t=gc(null);return{colorScheme:xC([PI,t],([n,r])=>r??n),userColorScheme:t}}function Met(t,e){let n=0;return(...r)=>{const i=++n;t(...r).then(s=>{i===n&&e(s)}).catch(s=>{console.log(s)})}}var Ret=gt('<div class="p-2"><!></div>'),Fet=gt('<div class="absolute w-96 left-0 top-[32px] rounded-md right-0 z-20 border border-slate-300 dark:border-slate-600 overflow-hidden resize shadow-lg bg-white/75 dark:bg-slate-800/75 backdrop-blur-sm"><!></div>'),Let=gt('<div class="relative w-full"><!> <!> <!></div>'),$et=gt('<div class="text-slate-500 dark:text-slate-400">Embedding Atlas</div>'),Bet=gt('<button title="Export Selection"><!></button>'),Net=gt('<div class="min-w-[420px] flex flex-col gap-2"><div class="flex flex-row gap-2"><!> <!></div></div>'),zet=gt('<div class="col-start-1 row-start-1"><!></div>'),Qet=gt('<h4 class="text-slate-500 dark:text-slate-400 select-none">Column Styles</h4> <!>',1),jet=gt('<h4 class="text-slate-500 dark:text-slate-400 select-none">Export</h4> <div class="flex flex-col gap-2"><!></div>',1),Uet=gt('<div class="min-w-[420px] flex flex-col gap-2"><!> <!> <h4 class="text-slate-500 dark:text-slate-400 select-none">About</h4> <div> </div></div>'),Vet=gt('<div class="flex flex-row flex-1 justify-between min-w-[180px]"><!></div> <div class="flex flex-none gap-2 items-center pl-2 rounded-md border border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-900"><!> <div class="flex flex-row items-center"><button title="Clear filters" class="rounded-md flex select-none items-center p-1.5 text-slate-400 dark:text-slate-500 focus-visible:outline-2 outline-blue-600 -outline-offset-1"><!></button> <!></div></div> <div class="flex flex-none flex-row gap-2"><div class="grid grid-cols-1 grid-rows-1 justify-items-end items-center"><!></div> <!> <!> <!></div>',1),qet=gt('<div class="embedding-atlas-root"><div><div class="m-2 flex flex-row items-center gap-2 flex-wrap"><!></div> <div class="flex-1 overflow-hidden h-full ml-2 mr-2 mb-2"><!></div></div></div>');function Wfe(t,e){Ln(e,!0);const n=()=>qo(f,"$colorScheme",s),r=()=>qo(ae,"$searchResultStore",s),i=()=>qo(M,"$resolvedColumnStyles",s),[s,o]=Cf(),a=500;let l=jn(e,"embeddingViewConfig",3,null),h=jn(e,"embeddingViewLabels",3,null);const{colorScheme:f,userColorScheme:p}=Iet();Oo(()=>{ij(p,e.colorScheme)});let g=hn(!1),b=hn("parquet");const x=G$.crossfilter();function k(){return uQ(x.predicate(null))}let T=hn([]),I=hn({}),M=gc({});Oo(()=>{let zt=B(F(T),F(I));M.set(zt)});function B(zt,nn){let Ze={};for(let cn of zt){let Fn=nn[cn.name];Fn==null&&(Fn={display:e.data.text==cn.name?"full":"badge"}),Ze[cn.name]=Fn}return Ze}let j=Pet({coordinator:e.coordinator,table:e.data.table,idColumn:e.data.id,textColumn:e.data.text,neighborsColumn:e.data.neighbors,searcher:e.searcher}),Q=[...j.fullTextSearch!=null?["full-text"]:[],...j.vectorSearch!=null?["vector"]:[],...j.nearestNeighbors!=null?["neighbors"]:[]];const Z={"full-text":{value:"full-text",label:"Full Text"},vector:{value:"vector",label:"Vector"},neighbors:{value:"neighbors",label:"Neighbors"}};let q=hn("full-text"),J=hn(""),oe=hn(""),me=hn(!1),ae=gc(null);const ce=Met(async(zt,nn)=>{ct(me,!0);let Ze=k(),cn=await Det({searcher:j,predicate:Ze,query:zt,mode:nn,limit:a,onStatus:Er=>{ct(oe,Er,!0)}}),Fn=await Tet(e.coordinator,e.data.table,{id:e.data.id,x:e.data.projection?.x,y:e.data.projection?.y,text:e.data.text},Object.fromEntries(F(T).map(Er=>[Er.name,Er.name])),Ze,cn),An=zt.toString().trim(),qn=zt.toString().trim();return nn=="neighbors"&&(An="Neighbors of #"+zt.toString(),qn=""),ct(oe,""),{query:zt,mode:nn,ids:Fn.map(Er=>Er.id),label:An,highlight:qn,items:Fn}},zt=>{ae.set(zt)}),se=l$(ce,500);function ge(){ae.set(null),ct(me,!1)}Oo(()=>{F(J)==""?ge():se(F(J),F(q))});function xe(){for(let zt of x.clauses)zt.source?.reset?.(),x.update({...zt,value:null,predicate:null})}function Se(zt){typeof zt.version=="string"&&(ct(yt,zt.charts??{}),ct(We,zt.chartStates??{}),ct(at,zt.layout??"list"),ct(ut,zt.layoutStates??{}))}xh(()=>{if(!F(g))return;let zt={version:zL,timestamp:new Date().getTime()/1e3,charts:F(yt),chartStates:F(We),layout:F(at),layoutStates:F(ut),predicate:k()};e.onStateChange?.(zt)}),s_(async()=>{if(ct(T,(await fhe(e.coordinator,e.data.table)).filter(zt=>!zt.name.startsWith("__"))),Ue.columns=F(T),e.initialState&&Se(e.initialState),Object.keys(F(yt)).length==0){let zt=await vJe({coordinator:e.coordinator,table:e.data.table,id:e.data.id,projection:e.data.projection?{...e.data.projection,text:e.data.text??void 0}:void 0,config:e.defaultChartsConfig??void 0});ct(yt,Object.fromEntries(zt.map((nn,Ze)=>[`${Ze+1}`,nn])))}ct(g,!0)});function De(zt){if(zt.key=="Escape"){xe(),zt.preventDefault();try{document.activeElement?.blur?.()}catch{}}}let He=gc(e.chartTheme??void 0);Oo(()=>{He.set(e.chartTheme??void 0)});let Ue={coordinator:e.coordinator,filter:x,table:e.data.table,id:e.data.id,columns:[],colorScheme:f,theme:He,columnStyles:M,cache:new Cet,persistentCache:e.cache??{get:async()=>null,set:async(zt,nn)=>{}},searchModes:Q,search:ce,searchResult:ae,highlight:gc(null),embeddingViewConfig:l(),embeddingViewLabels:h(),tableCellRenderers:e.tableCellRenderers},yt=hn({}),We=hn({}),at=hn("list"),ut=hn({});var wt=qet();jy("keydown",R7,De),lr(wt,"",{},{width:"100%",height:"100%"});var ot=je(wt);let dt,Yt;var Ft=je(ot),Ot=je(Ft);{var Kt=zt=>{var nn=Vet(),Ze=pn(nn),cn=je(Ze);{var Fn=yn=>{var rn=Let(),Xr=je(rn);aA(Xr,{type:"search",placeholder:"Search...",className:"w-full max-w-[400px] ",get value(){return F(J)},set value(oi){ct(J,oi,!0)}});var si=lt(Xr,2);{var Tn=oi=>{{let Fi=Fe(()=>Q.filter(Oe=>Oe!="neighbors").map(Oe=>Z[Oe]));ch(oi,{get options(){return F(Fi)},get value(){return F(q)},onChange:Oe=>ct(q,Oe,!0)})}};Pt(si,oi=>{Q.filter(Fi=>Fi!="neighbors").length>1&&oi(Tn)})}var Ms=lt(si,2);{var Ri=oi=>{var Fi=Fet();lr(Fi,"",{},{height:"48em"});var Oe=je(Fi);{var ne=fe=>{const we=Fe(r);var ze=ar(),Ge=pn(ze);lT(Ge,()=>F(we),et=>{vet(et,{get items(){return F(we).items},get label(){return F(we).label},get highlight(){return F(we).highlight},limit:a,onClick:async Ie=>{Ue.highlight.set(Ie.id)},onClose:ge,get columnStyles(){return i()}})}),Re(fe,ze)},te=fe=>{var we=ar(),ze=pn(we);{var Ge=et=>{var Ie=Ret(),ht=je(Ie);ket(ht,{get status(){return F(oe)}}),Be(Ie),Re(et,Ie)};Pt(ze,et=>{F(oe)!=null&&et(Ge)},!0)}Re(fe,we)};Pt(Oe,fe=>{r()!=null?fe(ne):fe(te,!1)})}Be(Fi),Re(oi,Fi)};Pt(Ms,oi=>{F(me)&&oi(Ri)})}Be(rn),Re(yn,rn)},An=yn=>{var rn=$et();Re(yn,rn)};Pt(cn,yn=>{F(q).length>0?yn(Fn):yn(An,!1)})}Be(Ze);var qn=lt(Ze,2),Er=je(qn);oet(Er,{get coordinator(){return e.coordinator},get filter(){return x},get table(){return e.data.table}});var Mi=lt(Er,2),gi=je(Mi);gi.__click=xe;var fs=je(gi);cO(fs,{class:"w-5 h-5"}),Be(gi);var Hr=lt(gi,2);{var uo=yn=>{AL(yn,{title:"Export Selection",button:(Xr,si)=>{let Tn=()=>si?.().visible,Ms=()=>si?.().toggle;var Ri=Bet();Ri.__click=function(...Oe){Ms()?.apply(this,Oe)};let oi;var Fi=je(Ri);LR(Fi,{class:"w-5 h-5"}),Be(Ri),on(()=>oi=Hi(Ri,1,"rounded-md px-1.5 py-1.5 flex select-none items-center focus-visible:outline-2 outline-blue-600 -outline-offset-1",null,oi,{"text-slate-400":!Tn(),"dark:text-slate-500":!Tn()})),Re(Xr,Ri)},children:(Xr,si)=>{var Tn=Net(),Ms=je(Tn),Ri=je(Ms);wY(Ri,{get icon(){return LR},label:"Export Selection",title:"Export the selected points",class:"w-48",onClick:()=>e.onExportSelection(k(),F(b))});var oi=lt(Ri,2);ch(oi,{label:"Format",get value(){return F(b)},onChange:Fi=>ct(b,Fi,!0),options:[{value:"parquet",label:"Parquet"},{value:"jsonl",label:"JSONL"},{value:"json",label:"JSON"},{value:"csv",label:"CSV"}]}),Be(Ms),Be(Tn),Re(Xr,Tn)},$$slots:{button:!0,default:!0}})};Pt(Hr,yn=>{e.onExportSelection&&yn(uo)})}Be(Mi),Be(qn);var ei=lt(qn,2),Ct=je(ei),Qi=je(Ct);lT(Qi,()=>F(at),yn=>{var rn=zet(),Xr=je(rn);JJe(Xr,{get context(){return Ue},get charts(){return F(yt)},get chartStates(){return F(We)},get layout(){return F(at)},get layoutStates(){return F(ut)},onChartsChange:si=>ct(yt,si),onChartStatesChange:si=>ct(We,si),onLayoutStatesChange:si=>ct(ut,si)}),Be(rn),Ey(3,rn,()=>W_e),Re(yn,rn)}),Be(Ct);var ki=lt(Ct,2);{let yn=Fe(()=>[{value:"list",icon:VFe,title:"List layout"},{value:"dashboard",icon:jFe,title:"Dashboard layout"}]);Zfe(ki,{get value(){return F(at)},onChange:rn=>ct(at,rn),get options(){return F(yn)}})}var js=lt(ki,2);{var Co=yn=>{{let rn=Fe(()=>n()=="dark"?t9e:JFe);om(yn,{get icon(){return F(rn)},title:"Toggle light / dark mode",onClick:()=>{ij(p,n()=="light"?"dark":"light")}})}};Pt(js,yn=>{e.colorScheme==null&&yn(Co)})}var Lt=lt(js,2);AL(Lt,{get icon(){return Sle},title:"Options",children:(yn,rn)=>{var Xr=Uet(),si=je(Xr);{var Tn=Oe=>{var ne=Qet(),te=lt(pn(ne),2);iet(te,{get columns(){return F(T)},get styles(){return i()},onStylesChange:fe=>{ct(I,fe)}}),Re(Oe,ne)};Pt(si,Oe=>{F(T).length>0&&Oe(Tn)})}var Ms=lt(si,2);{var Ri=Oe=>{var ne=jet(),te=lt(pn(ne),2),fe=je(te);wY(fe,{get icon(){return LR},label:"Export Application",title:"Download a self-contained static web application",class:"w-48",get onClick(){return e.onExportApplication}}),Be(te),Re(Oe,ne)};Pt(Ms,Oe=>{e.onExportApplication&&Oe(Ri)})}var oi=lt(Ms,4),Fi=je(oi);Be(oi),Be(Xr),on(()=>Pr(Fi,`Embedding Atlas, ${zL}`)),Re(yn,Xr)},$$slots:{default:!0}}),Be(ei),Re(zt,nn)};Pt(Ot,zt=>{F(g)&&zt(Kt)})}Be(Ft);var Dn=lt(Ft,2),Ut=je(Dn);{var At=zt=>{eet(zt,{get context(){return Ue},get layout(){return F(at)},get layoutStates(){return F(ut)},get charts(){return F(yt)},get chartStates(){return F(We)},onChartsChange:nn=>ct(yt,nn),onChartStatesChange:nn=>ct(We,nn),onLayoutStatesChange:nn=>ct(ut,nn)})};Pt(Ut,zt=>{F(g)&&zt(At)})}Be(Dn),Be(ot),Be(wt),on(()=>{dt=Hi(ot,1,"w-full h-full flex flex-col text-slate-800 bg-slate-200 dark:text-slate-200 dark:bg-slate-800",null,dt,{dark:n()=="dark"}),Yt=lr(ot,"",Yt,{"color-scheme":n()})}),Re(t,wt),$n(),o()}Js(["click"]);var Zet=gt('<div class="content-markdown svelte-zqu787"><!></div>'),Xet=gt('<div class="flex-none font-mono text-sm"><!> <!></div>'),Wet=gt('<div><div class="w-7 flex-none"><!></div> <div><!></div> <!></div>'),Get=gt('<div class="flex flex-col gap-1 p-4 w-[420px] border rounded-md bg-slate-50 border-slate-300 dark:bg-slate-900 dark:border-slate-700 select-text"></div>');function Gfe(t,e){Ln(e,!0);let n=jn(e,"messages",19,()=>[]);var r=Get();Wr(r,21,n,Wi,(i,s,o)=>{const a=Fe(()=>o==n().length-1);var l=Wet(),h=je(l),f=je(h);{var p=B=>{var j=ar(),Q=pn(j);{var Z=J=>{Ole(J,{class:"text-red-400 w-5 h-5"})},q=J=>{gz(J,{class:"text-blue-500 w-5 h-5"})};Pt(Q,J=>{F(s).error?J(Z):J(q,!1)})}Re(B,j)};Pt(f,B=>{(F(a)||F(s).error)&&B(p)})}Be(h);var g=lt(h,2);let b;var x=je(g);{var k=B=>{var j=Zet(),Q=je(j);n$(Q,()=>JD(F(s).text)),Be(j),Re(B,j)},T=B=>{var j=yb();on(()=>Pr(j,F(s).text)),Re(B,j)};Pt(x,B=>{F(s).markdown?B(k):B(T,!1)})}Be(g);var I=lt(g,2);{var M=B=>{var j=Xet(),Q=je(j);{var Z=oe=>{var me=yb();on(ae=>Pr(me,`${ae??""}%`),[()=>F(s).progress.toFixed(0)]),Re(oe,me)};Pt(Q,oe=>{F(s).progress!=null&&oe(Z)})}var q=lt(Q,2);{var J=oe=>{var me=yb();on(()=>Pr(me,F(s).progressText)),Re(oe,me)};Pt(q,oe=>{F(s).progressText!=null&&oe(J)})}Be(j),Re(B,j)};Pt(I,B=>{F(a)&&B(M)})}Be(l),on(()=>{Hi(l,1,`flex items-start leading-5 ${F(a)?"text-slate-500 dark:text-slate-400":"text-slate-300 dark:text-slate-600"}`),b=Hi(g,1,"flex-1",null,b,{"text-red-400":F(s).error})}),Re(i,l)}),Be(r),Re(t,r),$n()}const Yfe="deflate-raw";async function Yet(t){let n=new TextEncoder().encode(JSON.stringify(t)),r=await Tme(n,Yfe);return Mme(r)}async function Het(t){let e=Rme(t),n=await Pme(e,Yfe),r=new TextDecoder;return JSON.parse(r.decode(n))}function Hfe(t){let e=t.lastIndexOf("?");if(e<0)return{};let n=new URLSearchParams(t.slice(e+1));return Object.fromEntries(n.entries())}function Ket(t,e){let n=t.lastIndexOf("?"),r=new URLSearchParams(e);r.sort();let i=r.toString();return i==""?n<0?t:t.slice(0,n):n<0?t+"?"+i:t.slice(0,n)+"?"+r.toString()}async function eT(t,e="object"){try{let n=Hfe(window.location.hash);return n[t]==null?void 0:e=="text"?n[t]:e=="object"?await Het(n[t]):void 0}catch{return}}async function Qv(t,e,n="object"){let r;if(e!==void 0)if(n=="text"){if(typeof e!="string")return;r=e}else if(n=="object")r=await Yet(e);else return;let i=Hfe(window.location.hash);r===void 0?delete i[t]:i[t]=r,window.location.hash=Ket(window.location.hash,i)}var Jet=gt("<div><!></div>"),ett=gt('<div class="fixed left-0 right-0 top-0 bottom-0"><!></div>');function ttt(t,e){Ln(e,!0);const n=()=>qo(PI,"$systemColorScheme",r),[r,i]=Cf(),s=SC();let o=hn(!1),a=hn(!1),l=hn("Loading..."),h=hn(null),f=hn(null);s_(async()=>{try{ct(h,await eT("state")),ct(l,"Initializing database..."),ct(f,await e.dataSource.initializeCoordinator(s,"dataset",M=>{ct(l,M,!0)})),ct(o,!0)}catch(M){ct(a,!0),ct(l,M.message,!0);return}});async function p(M,B){e.dataSource.downloadSelection&&await e.dataSource.downloadSelection(M,B)}async function g(){e.dataSource.downloadArchive&&await e.dataSource.downloadArchive()}function b(M){Qv("state",{...M,predicate:void 0})}var x=ett(),k=je(x);{var T=M=>{{let B=Fe(()=>({...F(f).data??{id:"id"},table:"dataset"})),j=Fe(()=>F(h)??F(f).initialState),Q=Fe(()=>e.dataSource.downloadArchive?g:null),Z=Fe(()=>e.dataSource.downloadSelection?p:null),q=Fe(()=>l$(b,200));Wfe(M,{get coordinator(){return s},get data(){return F(B)},get embeddingViewConfig(){return F(f).embeddingViewConfig},get embeddingViewLabels(){return F(f).embeddingViewLabels},get defaultChartsConfig(){return F(f).defaultChartsConfig},get chartTheme(){return F(f).chartTheme},get stylesheet(){return F(f).stylesheet},get initialState(){return F(j)},get onExportApplication(){return F(Q)},get onExportSelection(){return F(Z)},get onStateChange(){return F(q)},get cache(){return e.dataSource.cache}})}},I=M=>{var B=Jet();let j;var Q=je(B);{let Z=Fe(()=>[{text:F(l),error:F(a)}]);Gfe(Q,{get messages(){return F(Z)}})}Be(B),on(()=>j=Hi(B,1,"w-full h-full grid place-content-center select-none text-slate-800 bg-slate-200 dark:text-slate-200 dark:bg-slate-800",null,j,{dark:n()=="dark"})),Re(M,B)};Pt(k,M=>{F(o)&&F(f)!=null?M(T):M(I,!1)})}Be(x),Re(t,x),$n(),i()}function tT(t,e){let n=document.createElement("a");n.href=URL.createObjectURL(new Blob([t],{type:"application/octet-stream"})),n.download=e,n.click()}const QL={json:{query:"(FORMAT JSON, ARRAY true)",extension:"json"},jsonl:{query:"(FORMAT JSON)",extension:"jsonl"},csv:{query:"(FORMAT CSV)",extension:"csv"},parquet:{query:"(FORMAT parquet)",extension:"parquet"}};function ntt(t,e,n,r){return e==null||e.length==0?ir`COPY ${t} TO ${kn(n)} ${QL[r].query}`:ir`COPY (SELECT * FROM ${t} WHERE ${e}) TO ${kn(n)} ${QL[r].query}`}function Kfe(t){return`selection-${Date.now()}.${QL[t].extension}`}async function Jfe(t,e,n,r){let i=await t.databaseConnector()?.getDuckDB(),s=Kfe(r);await i.registerEmptyFileBuffer(s);let o=ntt(e,n,s,r);await t.query(o.toString());let a=await i.copyFileToBuffer(s);return i.dropFile(s),[a,s]}function K4(t,e){return e.startsWith(".")&&(e=e.slice(1)),t.endsWith("/")&&e.startsWith("/")?t+e.slice(1):!t.endsWith("/")&&!e.startsWith("/")?t+"/"+e:t+e}class rtt{serverUrl;downloadArchive=void 0;downloadSelection=void 0;constructor(e){if(e.startsWith("http"))this.serverUrl=e;else{let n=window.location.origin+window.location.pathname;n=n.replace(/\/[^/]*$/,"/"),this.serverUrl=K4(n,e)}}async initializeCoordinator(e,n,r){let i=await this.metadata();r("Initializing database...");let s=i.database?.type??"wasm";if(await hhe(e,s,i.database?.uri??K4(this.serverUrl,"query")),i.database?.load){r("Loading data...");const a=(i.database?.files??["dataset.parquet"]).map(h=>K4(this.serverUrl,h));let l;if(a.length===1)l=`CREATE OR REPLACE TABLE ${n} AS (SELECT * FROM read_parquet(${kn(a[0])}));`;else{const h=a.map(f=>kn(f)).join(", ");l=`CREATE OR REPLACE TABLE ${n} AS (SELECT * FROM read_parquet([${h}]));`}await e.exec(l)}return i.isStatic||(this.downloadArchive=async()=>{let a=await(await this.fetchEndpoint("archive.zip")).arrayBuffer();tT(a,"embedding-atlas.zip")}),s=="wasm"?this.downloadSelection=async(o,a)=>{let[l,h]=await Jfe(e,n,o,a);tT(l,h)}:i.isStatic||(this.downloadSelection=async(o,a)=>{let l=Kfe(a),f=await(await this.fetchEndpoint("selection",{method:"POST",body:JSON.stringify({predicate:o,format:a})})).arrayBuffer();tT(f,l)}),i.props}async fetchEndpoint(e,n){let r=await fetch(K4(this.serverUrl,e),n);if(r.status!=200)throw new Error("ERROR FETCH");return r}async metadata(){try{return await this.fetchEndpoint("metadata.json").then(e=>e.json())}catch{throw new Error("Network Error: Failed to fetch dataset metadata")}}async cacheGet(e){try{return await this.fetchEndpoint("cache/"+e).then(n=>n.json())}catch{return null}}async cacheSet(e,n){try{await this.fetchEndpoint("cache/"+e,{method:"POST",body:JSON.stringify(n)})}catch{}}cache={get:e=>this.cacheGet(e),set:(e,n)=>this.cacheSet(e,n)}}function itt(t,e){Ln(e,!1);let n="./data/",r=new rtt(n);s$(),ttt(t,{get dataSource(){return r}}),$n()}var stt=gt('<button><div class="text-center space-y-2"><p class="text-slate-500 dark:text-slate-500"> </p> <p class="text-sm text-slate-400 dark:text-slate-600">Accepted file types: JSON, CSV, Parquet</p></div> <input type="file" class="hidden"/></button>');function ott(t,e){Ln(e,!0);let n=jn(e,"multiple",3,!1),r=hn(!1),i;function s(k){k.preventDefault(),ct(r,!0)}function o(){ct(r,!1)}function a(k){if(k.preventDefault(),ct(r,!1),k.dataTransfer.files){let T=Array.from(k.dataTransfer.files);(n()||T.length==1)&&T.length>0&&T.every(h)&&e.onUpload(T)}}function l(k){let T=Array.from(k.target.files);(n()||T.length==1)&&T.length>0&&T.every(h)&&e.onUpload(T)}function h(k){if(e.extensions==null)return!0;for(let T of e.extensions)if(k.name.toLowerCase().endsWith(T.toLowerCase()))return!0;return!1}var f=stt();f.__click=()=>{i.click()};var p=je(f),g=je(p),b=je(g,!0);Be(g),Xg(2),Be(p);var x=lt(p,2);x.__change=l,zu(x,k=>i=k,()=>i),Be(f),on(k=>{Hi(f,1,`flex flex-col items-center w-full justify-center py-20 border-2 border-dashed rounded-md transition-all
    ${F(r)?"bg-slate-50 border-slate-500 dark:bg-slate-900 dark:border-slate-500":"bg-slate-50 border-slate-300 dark:bg-slate-900 dark:border-slate-700"}`),Pr(b,F(r)?"Drop your files here":"Drag & drop files here or click to select"),St(x,"accept",k),x.multiple=n()},[()=>e.extensions?.join(",")]),jy("dragover",f,s),jy("dragleave",f,o),jy("drop",f,a),Re(t,f),$n()}Js(["click","change"]);var att=gt('<button class="px-2 py-1 text-left rounded-md text-slate-600 dark:text-slate-400 hover:bg-slate-200 dark:hover:bg-slate-700"> </button>'),ltt=gt('<ul class="absolute mt-1 w-full rounded-md shadow-md p-1 z-10 flex flex-col bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700"></ul>'),utt=gt('<div><input type="text" class="form-input rounded-md py-1 bg-white dark:bg-slate-800 border border-slate-300 dark:border-slate-600 w-full"/> <!></div>');function OY(t,e){Ln(e,!0);let n=jn(e,"value",3,""),r=jn(e,"options",19,()=>[]),i,s,o=hn(!1),a=Fe(()=>n()!=null&&r()!=null?r().filter(x=>x.toLowerCase().includes(n().toLowerCase())):r()??[]);function l(x){e.onChange?.(x)}function h(x){l(x),ct(o,!1)}var f=utt(),p=je(f);UP(p),p.__change=()=>l(i.value??""),p.__input=()=>l(i.value??""),zu(p,x=>i=x,()=>i);var g=lt(p,2);{var b=x=>{var k=ltt();Wr(k,20,()=>F(a),T=>T,(T,I)=>{var M=att();M.__click=()=>h(I);var B=je(M,!0);Be(M),on(()=>Pr(B,I)),Re(T,M)}),Be(k),Re(x,k)};Pt(g,x=>{F(o)&&F(a).length>0&&x(b)})}Be(f),zu(f,x=>s=x,()=>s),on(()=>{Hi(f,1,`relative ${e.className??""??""}`),St(p,"placeholder",e.placeholder),OH(p,n())}),jy("focus",p,()=>ct(o,!0)),jy("blur",p,x=>{x.relatedTarget&&x.relatedTarget instanceof Node&&s.contains(x.relatedTarget)||ct(o,!1)}),Re(t,f),$n()}Js(["change","input","click"]);var ctt=gt('<div class="w-full flex flex-row items-center"><div class="w-[6rem] dark:text-slate-400">X</div> <!></div> <div class="w-full flex flex-row items-center"><div class="w-[6rem] dark:text-slate-400">Y</div> <!></div> <div class="w-full flex flex-row items-center"><div class="w-[6rem] dark:text-slate-400">Neighbors</div> <!></div> <p class="text-sm text-slate-400 dark:text-slate-600">Neighbors column should contain pre-computed nearest neighbors in format: <code></code>. IDs should be zero-based row indices.</p>',1),htt=gt(`<div class="w-full flex flex-row items-center"><div class="w-[6rem] dark:text-slate-400">Text</div> <!></div> <div class="w-full flex flex-row items-center"><div class="w-[6rem] dark:text-slate-400">Model</div> <!></div> <p class="text-sm text-slate-400 dark:text-slate-600">Computing the embedding and 2D projection in browser may take a while. The model will be loaded with
        Transformers.js.</p>`,1),ftt=gt(`<div class="w-full flex flex-row items-center"><div class="w-[6rem] dark:text-slate-400">Image</div> <!></div> <div class="w-full flex flex-row items-center"><div class="w-[6rem] dark:text-slate-400">Model</div> <!></div> <p class="text-sm text-slate-400 dark:text-slate-600">Computing the embedding and 2D projection in browser may take a while. The model will be loaded with
        Transformers.js.</p>`,1),dtt=gt(`<div class="flex flex-col p-4 w-[40rem] border rounded-md bg-slate-50 border-slate-300 dark:bg-slate-900 dark:border-slate-700"><div class="flex flex-col gap-2 pb-4"><h2 class="text-slate-500 dark:text-slate-500">Search and Tooltip (optional)</h2> <p class="text-sm text-slate-400 dark:text-slate-600">The selected column, if any, will be used for full-text search and tooltips. Choose a column with freeform text,
      such as a description, chat messages, or a summary.</p> <div class="w-full flex flex-row items-center"><div class="w-[6rem] dark:text-slate-400">Text</div> <!></div> <div class="my-2"></div> <h2 class="text-slate-500 dark:text-slate-500">Embedding View (optional)</h2> <p class="text-sm text-slate-400 dark:text-slate-600">To enable the embedding view, you can either (a) pick a pair of pre-computed X and Y columns; or (b) pick a text
      column and compute the embedding projection in browser. For large data, it's recommended to pre-compute the
      embedding and its 2D projection.</p> <div class="flex items-start"><!></div> <!></div> <div class="w-full flex flex-row items-center mt-4"><div class="flex-1"></div> <!></div></div>`);function ptt(t,e){Ln(e,!0);const n=["Xenova/all-MiniLM-L6-v2","Xenova/paraphrase-multilingual-mpnet-base-v2","Xenova/multilingual-e5-small","Xenova/multilingual-e5-base","Xenova/multilingual-e5-large"],r=["Xenova/dinov2-small","Xenova/dinov2-base","Xenova/dinov2-large","Xenova/dino-vitb8","Xenova/dino-vits8","Xenova/dino-vitb16","Xenova/dino-vits16"];let i=hn("precomputed"),s=hn(void 0),o=hn(void 0),a=hn(void 0),l=hn(void 0),h=hn(void 0),f=hn(void 0),p=hn(void 0),g=hn(void 0),b=Fe(()=>e.columns.filter(ae=>fC(ae.column_type)=="number")),x=Fe(()=>e.columns.filter(ae=>fC(ae.column_type)=="string"));Oo(()=>{let ae=F(s);xl(()=>F(h)==null)&&ct(h,ae,!0)});function k(){let ae={version:zL,text:F(s)};if(F(i)=="precomputed"&&F(o)!=null&&F(a)!=null&&(ae.embedding={precomputed:{x:F(o),y:F(a),neighbors:F(l)!=null?F(l):void 0}}),F(i)=="from-text"&&F(h)!=null){let ce=F(f)?.trim()??"";(ce==null||ce=="")&&(ce=n[0]),ae.embedding={compute:{column:F(h),type:"text",model:ce}}}if(F(i)=="from-image"&&F(p)!=null){let ce=F(g)?.trim()??"";(ce==null||ce=="")&&(ce=r[0]),ae.embedding={compute:{column:F(p),type:"image",model:ce}}}e.onConfirm?.(ae)}var T=dtt(),I=je(T),M=lt(je(I),4),B=lt(je(M),2);{let ae=Fe(()=>[{value:void 0,label:"(none)"},...F(x).map(ce=>({value:ce.column_name,label:`${ce.column_name} (${ce.column_type})`}))]);ch(B,{class:"flex-1 min-w-0",get value(){return F(s)},onChange:ce=>ct(s,ce,!0),get options(){return F(ae)}})}Be(M);var j=lt(M,8),Q=je(j);Zfe(Q,{get value(){return F(i)},onChange:ae=>ct(i,ae,!0),options:[{value:"precomputed",label:"Pre-computed"},{value:"from-text",label:"From Text"},{value:"from-image",label:"From Image"},{value:"none",label:"None"}]}),Be(j);var Z=lt(j,2);{var q=ae=>{var ce=ctt(),se=pn(ce),ge=lt(je(se),2);{let We=Fe(()=>[{value:void 0,label:"(none)"},...F(b).map(at=>({value:at.column_name,label:`${at.column_name} (${at.column_type})`}))]);ch(ge,{class:"flex-1 min-w-0",get value(){return F(o)},onChange:at=>ct(o,at,!0),get options(){return F(We)}})}Be(se);var xe=lt(se,2),Se=lt(je(xe),2);{let We=Fe(()=>[{value:void 0,label:"(none)"},...F(b).map(at=>({value:at.column_name,label:`${at.column_name} (${at.column_type})`}))]);ch(Se,{class:"flex-1 min-w-0",get value(){return F(a)},onChange:at=>ct(a,at,!0),get options(){return F(We)}})}Be(xe);var De=lt(xe,2),He=lt(je(De),2);{let We=Fe(()=>[{value:void 0,label:"(none)"},...e.columns.map(at=>({value:at.column_name,label:`${at.column_name} (${at.column_type})`}))]);ch(He,{class:"flex-1 min-w-0",get value(){return F(l)},onChange:at=>ct(l,at,!0),get options(){return F(We)}})}Be(De);var Ue=lt(De,2),yt=lt(je(Ue));yt.textContent='{ "ids": [n1, n2, ...], "distances": [d1, d2, ...] }',Xg(),Be(Ue),Re(ae,ce)},J=ae=>{var ce=ar(),se=pn(ce);{var ge=Se=>{var De=htt(),He=pn(De),Ue=lt(je(He),2);{let at=Fe(()=>[{value:void 0,label:"(none)"},...F(x).map(ut=>({value:ut.column_name,label:`${ut.column_name} (${ut.column_type})`}))]);ch(Ue,{class:"flex-1 min-w-0",get value(){return F(h)},onChange:ut=>ct(h,ut,!0),get options(){return F(at)}})}Be(He);var yt=lt(He,2),We=lt(je(yt),2);OY(We,{className:"flex-1",get value(){return F(f)},get placeholder(){return`(default ${n[0]??""})`},onChange:at=>ct(f,at,!0),get options(){return n}}),Be(yt),Xg(2),Re(Se,De)},xe=Se=>{var De=ar(),He=pn(De);{var Ue=yt=>{var We=ftt(),at=pn(We),ut=lt(je(at),2);{let dt=Fe(()=>[{value:void 0,label:"(none)"},...e.columns.map(Yt=>({value:Yt.column_name,label:`${Yt.column_name} (${Yt.column_type})`}))]);ch(ut,{class:"flex-1 min-w-0",get value(){return F(p)},onChange:Yt=>ct(p,Yt,!0),get options(){return F(dt)}})}Be(at);var wt=lt(at,2),ot=lt(je(wt),2);OY(ot,{className:"flex-1",get value(){return F(g)},get placeholder(){return`(default ${r[0]??""})`},onChange:dt=>ct(g,dt,!0),get options(){return r}}),Be(wt),Xg(2),Re(yt,We)};Pt(He,yt=>{F(i)=="from-image"&&yt(Ue)},!0)}Re(Se,De)};Pt(se,Se=>{F(i)=="from-text"?Se(ge):Se(xe,!1)},!0)}Re(ae,ce)};Pt(Z,ae=>{F(i)=="precomputed"?ae(q):ae(J,!1)})}Be(I);var oe=lt(I,2),me=lt(je(oe),2);om(me,{label:"Confirm",class:"w-40 justify-center",onClick:()=>{k()}}),Be(oe),Be(T),Re(t,T),$n()}var mtt=gt('<div class="flex gap-1"><!> <!></div>');function gtt(t,e){Ln(e,!0);let n=hn("");function r(){let a=F(n).trim();a!=""&&e.onConfirm(a)}var i=mtt(),s=je(i);aA(s,{className:"flex-1",placeholder:"Enter data URL",onEnter:r,get value(){return F(n)},set value(a){ct(n,a,!0)}});var o=lt(s,2);om(o,{onClick:r,get icon(){return AFe}}),Be(i),Re(t,i),$n()}class ytt{static connect(e){return new Promise(n=>{let r=new Map,i=(s,...o)=>new Promise((a,l)=>{let h=new Date().getTime()+"-"+Math.random();r.set(h,[a,l]),e.postMessage({rpc:s,id:h,args:o})});e.postMessage({ready:!0}),e.onmessage=s=>{if(s.data.ready){n(i);return}let o=r.get(s.data.id);o!=null&&(r.delete(s.data.id),s.data.error?o[1](new Error(s.data.error)):o[0](s.data.result))}})}static runtime(){let e=new Map,n=async r=>{if(r.data.ready&&postMessage({ready:!0}),r.data.rpc){let s={id:r.data.id,result:null,error:null};try{s.result=await e.get(r.data.rpc)?.(...r.data.args)}catch(o){s.error=o.toString()}postMessage(s)}};return postMessage({ready:!0}),{handler:n,register:(r,i)=>{e.set(r,i)}}}}let T7=null;function vtt(){if(T7==null){let t=new Worker(new URL(""+new URL("embedding.worker-DkHRd1JM.js",import.meta.url).href,import.meta.url),{type:"module"});T7=ytt.connect(t)}return T7}async function*btt(t,e,n,r,i){let o=(await t.query(Vn.from(e).select({count:Mo()}))).get(0).count,a=0;for(;a<o;){let l=a,h=a+i;h>o&&(h=o);let f=await t.query(Vn.from(e).select({id:It(n),value:It(r)}).offset(a).limit(h-l));yield{total:o,data:f},a=h}}async function _tt(t,e,n,r,i,s,o){let a=0;await t.exec(`
    ALTER TABLE ${e} ADD COLUMN IF NOT EXISTS ${It(r)} DOUBLE DEFAULT 0;
    ALTER TABLE ${e} ADD COLUMN IF NOT EXISTS ${It(i)} DOUBLE DEFAULT 0;
  `);for(let l of s){let h=o.subarray(a,a+l.length*2);await t.exec(`
        WITH t1 AS (
            SELECT
                UNNEST([${l.map(f=>kn(f)).join(",")}]) AS id,
                UNNEST([${l.map((f,p)=>h[p*2]).join(",")}]) AS x,
                UNNEST([${l.map((f,p)=>h[p*2+1]).join(",")}]) AS y
        )
        UPDATE ${e}
            SET ${It(r)} = t1.x, ${It(i)} = t1.y
            FROM t1 WHERE ${It(n,e)} = t1.id
    `),a+=l.length*2}}async function xtt(t){function e(a,l){t.callback?.(a,l)}e(`Loading ${t.model}...`);let n=await vtt(),r=await n("embedding.new",{type:t.type,model:t.model}),i=[],s=0;for await(const{total:a,data:l}of btt(t.coordinator,t.table,t.idColumn,t.dataColumn,t.type=="text"?64:16)){e("Processing Batches...",s/a*100);let h=Array.from(l.getChild("id")),f=Array.from(l.getChild("value"));await n("embedding.batch",r,f),i.push(h),s+=h.length}e("UMAP Projection...");let o=await n("embedding.finalize",r);await _tt(t.coordinator,t.table,t.idColumn,t.xColumn,t.yColumn,i,o)}class wtt{messages;constructor(){this.messages=gc([])}append(e){this.messages.update(n=>n.length>0&&n[n.length-1].text==e.text?[...n.slice(0,n.length-1),e]:[...n,e])}info(e,n={}){this.append({text:e,...n})}error(e,n={}){this.append({text:e,...n,error:!0})}exception(e){e instanceof ede?this.append({text:e.message,...e.loggerOptions,error:!0}):e instanceof Error?this.append({text:e.message,error:!0}):this.append({text:String(e),error:!0})}}class ede extends Error{loggerOptions;constructor(e,n={}){super(e),this.loggerOptions=n}}async function Ott(t,e,n,r,i){let s=0;for(let o of t){let a,l;if(o instanceof File)i?.info("Loading data from file..."),l=o.name,a=await o.arrayBuffer();else if("url"in o)i?.info("Loading data from URL..."),l=o.url,a=await(await Stt(o.url,{referrerPolicy:"no-referrer"},i)).arrayBuffer();else throw new Error("invalid input type");let h=`data-${s}`+Ctt(l);await e.registerFileBuffer(h,new Uint8Array(a)),t.length==1?await n.query(`CREATE TABLE ${r} AS SELECT * FROM ${kn(h)}`):s==0?await n.query(`CREATE TABLE ${r} AS SELECT *, ${kn(l)} AS filename FROM ${kn(h)}`):await n.query(`INSERT INTO ${r} SELECT *, ${kn(l)} AS filename FROM ${kn(h)}`),await e.dropFile(h),s+=1}}async function Stt(t,e,n){let r;try{r=await fetch(t,e)}catch{throw new ede("Failed to fetch data from URL: This may be due to a network issue or the server blocking [cross-origin requests (CORS)](https://developer.mozilla.org/en-US/docs/Web/HTTP/Guides/CORS). Check that the URL is valid and configured to allow access from this site.",{markdown:!0})}if(!r.ok)throw new Error(`Failed to fetch data from URL: ${Ett(r.status)}. Please check if the URL is accessible and the server is responding correctly.`);if(!r.body)throw new Error("Failed to fetch data from URL: Server response has no body content. This may indicate a server configuration issue or the resource may be empty.");try{let i=r.body.getReader(),s=[],o=0;for(;;){let{done:a,value:l}=await i.read();if(a)break;l!=null&&(s.push(l),o+=l.length),n?.info("Loading data from URL...",{progressText:Att(o)})}return new Blob(s)}catch{throw new Error("Failed to fetch data from URL: Error while reading data.")}}function ktt(t){let e=t.toLowerCase();return{"application/json":".json","text/json":".json","application/x-ndjson":".jsonl","application/ndjson":".jsonl","application/jsonlines":".jsonl","application/json-seq":".jsonl","application/vnd.apache.parquet":".parquet","application/x-parquet":".parquet"}[e]||".bin"}function Ctt(t){if(t.startsWith("data:")){let s=t.match(/^data:([^;,]+)/);return s?ktt(s[1]):".bin"}let e=t.split("#",1)[0].split("?",1)[0],n=e.lastIndexOf("/"),r=n>=0?e.slice(n+1):e;if(!r||r[0]==="."&&r.indexOf(".",1)===-1)return null;let i=r.lastIndexOf(".");return i>0?r.slice(i):null}function Att(t,e=2){let n=["B","KB","MB","GB"],r=1e3,i=t,s=0;for(;i>=r&&s<n.length-1;)i/=r,s++;return`${s===0?i.toString():i.toFixed(e)} ${n[s]}`}function Ett(t){let e={400:"Bad Request",401:"Unauthorized",403:"Forbidden",404:"Not Found",408:"Request Timeout",409:"Conflict",429:"Too Many Requests",500:"Internal Server Error",502:"Bad Gateway",503:"Service Unavailable",504:"Gateway Timeout"};return e[t]?`HTTP ${t} - ${e[t]}`:`HTTP ${t}`}var Ttt=gt('<div class="text-slate-600 dark:text-slate-300 mt-4 flex flex-col items-start gap-1 border-l-2 pl-2 border-slate-400 dark:border-slate-600"><div>A saved view is available in the URL. It will be restored after the data loads.</div> <button class="flex gap-1 items-center border bg-white dark:bg-slate-900 border-slate-300 dark:border-slate-600 dark:text-slate-400 rounded-md pl-1 pr-2"><!> Clear Saved View</button></div>'),Ptt=gt('<div class="w-[40rem] flex flex-col gap-2"><!> <div class="w-full text-center text-slate-400 dark:text-slate-500">&mdash; or &mdash;</div> <!> <!> <div class="text-slate-400 dark:text-slate-500 mt-4">All data remains confined to the browser and is not transmitted elsewhere.</div></div>'),Dtt=gt("<div><!></div>"),Itt=gt('<div class="fixed left-0 right-0 top-0 bottom-0"><!></div>');function Mtt(t,e){Ln(e,!0);const n=()=>qo(PI,"$systemColorScheme",i),r=()=>qo(f,"$messages",i),[i,s]=Cf(),o=SC(),a=hhe(o,"wasm",null);let l=hn("load-data"),h=new wtt,f=h.messages,p=hn(void 0),g=hn([]),b=hn({});async function x(){ct(b,{data:await eT("data","text"),settings:await eT("settings"),state:await eT("state")})}function k(){Qv("data",void 0,"text"),Qv("state",void 0),Qv("settings",void 0),ct(b,{})}s_(async()=>{await x(),F(b).data!=null&&typeof F(b).data=="string"&&await T([{url:F(b).data}])});async function T(J){ct(l,"messages");try{h.info("Initializing database..."),await a;let oe=await o.databaseConnector().getDuckDB();await Ott(J,oe,o,"dataset",h);let me=await o.query("DESCRIBE TABLE dataset");ct(g,Array.from(me)),await o.exec(`
        CREATE OR REPLACE SEQUENCE __row_index_sequence__ MINVALUE 0 START 0;
        ALTER TABLE dataset ADD COLUMN IF NOT EXISTS __row_index__ INTEGER DEFAULT nextval('__row_index_sequence__');
      `)}catch(oe){ct(l,"messages"),h.exception(oe);return}J.length==1&&"url"in J[0]&&Qv("data",J[0].url,"text"),ct(l,"columns"),F(b).settings!=null&&await I(F(b).settings)}async function I(J){ct(l,"messages");try{let oe,me;if(J.embedding!=null&&"precomputed"in J.embedding&&(oe={x:J.embedding.precomputed.x,y:J.embedding.precomputed.y},J.embedding.precomputed.neighbors!=null&&(me=J.embedding.precomputed.neighbors)),J.embedding!=null&&"compute"in J.embedding){let ae=J.embedding.compute.column,ce=J.embedding.compute.type,se=J.embedding.compute.model,ge=ae+"_proj_x",xe=ae+"_proj_y";await xtt({coordinator:o,table:"dataset",idColumn:"__row_index__",dataColumn:ae,type:ce,xColumn:ge,yColumn:xe,model:se,callback:(Se,De)=>{h.info(`Embedding: ${Se}`,{progress:De})}}),oe={x:ge,y:xe}}ct(p,{data:{table:"dataset",id:"__row_index__",text:J.text,projection:oe,neighbors:me},initialState:F(b).state},!0)}catch(oe){h.exception(oe);return}await Qv("settings",J),ct(l,"ready")}function M(J){Qv("state",{...J,predicate:void 0})}async function B(J,oe){let[me,ae]=await Jfe(o,"dataset",J,oe);tT(me,ae)}var j=Itt(),Q=je(j);{var Z=J=>{{let oe=Fe(()=>l$(M,200));Wfe(J,Ib({get coordinator(){return o},get onStateChange(){return F(oe)},onExportSelection:B},()=>F(p)))}},q=J=>{var oe=Dtt();let me;var ae=je(oe);{var ce=ge=>{var xe=Ptt(),Se=je(xe);ott(Se,{extensions:[".csv",".parquet",".json",".jsonl"],multiple:!0,onUpload:T});var De=lt(Se,4);gtt(De,{onConfirm:yt=>T([{url:yt}])});var He=lt(De,2);{var Ue=yt=>{var We=Ttt(),at=lt(je(We),2);at.__click=k;var ut=je(at);cO(ut,{class:"w-4 h-4"}),Xg(),Be(at),Be(We),Re(yt,We)};Pt(He,yt=>{(F(b).settings!=null||F(b).state!=null)&&yt(Ue)})}Xg(2),Be(xe),Re(ge,xe)},se=ge=>{var xe=ar(),Se=pn(xe);{var De=Ue=>{ptt(Ue,{get columns(){return F(g)},onConfirm:yt=>I(yt)})},He=Ue=>{var yt=ar(),We=pn(yt);{var at=ut=>{Gfe(ut,{get messages(){return r()}})};Pt(We,ut=>{F(l)=="messages"&&ut(at)},!0)}Re(Ue,yt)};Pt(Se,Ue=>{F(l)=="columns"?Ue(De):Ue(He,!1)},!0)}Re(ge,xe)};Pt(ae,ge=>{F(l)=="load-data"?ge(ce):ge(se,!1)})}Be(oe),on(()=>me=Hi(oe,1,"w-full h-full grid place-content-center select-none text-slate-800 bg-slate-200 dark:text-slate-200 dark:bg-slate-800",null,me,{dark:n()=="dark"})),Re(J,oe)};Pt(Q,J=>{F(l)=="ready"&&F(p)!==void 0?J(Z):J(q,!1)})}Be(j),Re(t,j),$n(),s()}Js(["click"]);function Rtt(){let t={};return typeof window!=null&&window.EMBEDDING_ATLAS_CONFIG!=null&&(t=window.EMBEDDING_ATLAS_CONFIG),{home:"backend-viewer",...t}}function Ftt(t,e){Ln(e,!1);const n=Rtt(),r=mb({"/":n.home=="file-viewer"?Mtt:itt});s$(),Eme(t,{get routes(){return F(r)}}),$n()}t$(Ftt,{target:document.getElementById("app")});
